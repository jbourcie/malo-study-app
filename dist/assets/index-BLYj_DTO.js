function k0(r,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in r)){const l=Object.getOwnPropertyDescriptor(s,o);l&&Object.defineProperty(r,o,l.get?l:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function b_(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var kd={exports:{}},Wa={},xd={exports:{}},je={};var Fg;function x0(){if(Fg)return je;Fg=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.iterator;function S(b){return b===null||typeof b!="object"?null:(b=E&&b[E]||b["@@iterator"],typeof b=="function"?b:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,$={};function L(b,G,Re){this.props=b,this.context=G,this.refs=$,this.updater=Re||O}L.prototype.isReactComponent={},L.prototype.setState=function(b,G){if(typeof b!="object"&&typeof b!="function"&&b!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,b,G,"setState")},L.prototype.forceUpdate=function(b){this.updater.enqueueForceUpdate(this,b,"forceUpdate")};function ne(){}ne.prototype=L.prototype;function Y(b,G,Re){this.props=b,this.context=G,this.refs=$,this.updater=Re||O}var te=Y.prototype=new ne;te.constructor=Y,q(te,L.prototype),te.isPureReactComponent=!0;var H=Array.isArray,ie=Object.prototype.hasOwnProperty,le={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function R(b,G,Re){var xe,Me={},be=null,oe=null;if(G!=null)for(xe in G.ref!==void 0&&(oe=G.ref),G.key!==void 0&&(be=""+G.key),G)ie.call(G,xe)&&!A.hasOwnProperty(xe)&&(Me[xe]=G[xe]);var De=arguments.length-2;if(De===1)Me.children=Re;else if(1<De){for(var Oe=Array(De),mt=0;mt<De;mt++)Oe[mt]=arguments[mt+2];Me.children=Oe}if(b&&b.defaultProps)for(xe in De=b.defaultProps,De)Me[xe]===void 0&&(Me[xe]=De[xe]);return{$$typeof:r,type:b,key:be,ref:oe,props:Me,_owner:le.current}}function P(b,G){return{$$typeof:r,type:b.type,key:G,ref:b.ref,props:b.props,_owner:b._owner}}function N(b){return typeof b=="object"&&b!==null&&b.$$typeof===r}function k(b){var G={"=":"=0",":":"=2"};return"$"+b.replace(/[=:]/g,function(Re){return G[Re]})}var D=/\/+/g;function C(b,G){return typeof b=="object"&&b!==null&&b.key!=null?k(""+b.key):G.toString(36)}function se(b,G,Re,xe,Me){var be=typeof b;(be==="undefined"||be==="boolean")&&(b=null);var oe=!1;if(b===null)oe=!0;else switch(be){case"string":case"number":oe=!0;break;case"object":switch(b.$$typeof){case r:case e:oe=!0}}if(oe)return oe=b,Me=Me(oe),b=xe===""?"."+C(oe,0):xe,H(Me)?(Re="",b!=null&&(Re=b.replace(D,"$&/")+"/"),se(Me,G,Re,"",function(mt){return mt})):Me!=null&&(N(Me)&&(Me=P(Me,Re+(!Me.key||oe&&oe.key===Me.key?"":(""+Me.key).replace(D,"$&/")+"/")+b)),G.push(Me)),1;if(oe=0,xe=xe===""?".":xe+":",H(b))for(var De=0;De<b.length;De++){be=b[De];var Oe=xe+C(be,De);oe+=se(be,G,Re,Oe,Me)}else if(Oe=S(b),typeof Oe=="function")for(b=Oe.call(b),De=0;!(be=b.next()).done;)be=be.value,Oe=xe+C(be,De++),oe+=se(be,G,Re,Oe,Me);else if(be==="object")throw G=String(b),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(b).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return oe}function me(b,G,Re){if(b==null)return b;var xe=[],Me=0;return se(b,xe,"","",function(be){return G.call(Re,be,Me++)}),xe}function Le(b){if(b._status===-1){var G=b._result;G=G(),G.then(function(Re){(b._status===0||b._status===-1)&&(b._status=1,b._result=Re)},function(Re){(b._status===0||b._status===-1)&&(b._status=2,b._result=Re)}),b._status===-1&&(b._status=0,b._result=G)}if(b._status===1)return b._result.default;throw b._result}var Ie={current:null},Z={transition:null},ye={ReactCurrentDispatcher:Ie,ReactCurrentBatchConfig:Z,ReactCurrentOwner:le};function ue(){throw Error("act(...) is not supported in production builds of React.")}return je.Children={map:me,forEach:function(b,G,Re){me(b,function(){G.apply(this,arguments)},Re)},count:function(b){var G=0;return me(b,function(){G++}),G},toArray:function(b){return me(b,function(G){return G})||[]},only:function(b){if(!N(b))throw Error("React.Children.only expected to receive a single React element child.");return b}},je.Component=L,je.Fragment=t,je.Profiler=o,je.PureComponent=Y,je.StrictMode=s,je.Suspense=g,je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ye,je.act=ue,je.cloneElement=function(b,G,Re){if(b==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+b+".");var xe=q({},b.props),Me=b.key,be=b.ref,oe=b._owner;if(G!=null){if(G.ref!==void 0&&(be=G.ref,oe=le.current),G.key!==void 0&&(Me=""+G.key),b.type&&b.type.defaultProps)var De=b.type.defaultProps;for(Oe in G)ie.call(G,Oe)&&!A.hasOwnProperty(Oe)&&(xe[Oe]=G[Oe]===void 0&&De!==void 0?De[Oe]:G[Oe])}var Oe=arguments.length-2;if(Oe===1)xe.children=Re;else if(1<Oe){De=Array(Oe);for(var mt=0;mt<Oe;mt++)De[mt]=arguments[mt+2];xe.children=De}return{$$typeof:r,type:b.type,key:Me,ref:be,props:xe,_owner:oe}},je.createContext=function(b){return b={$$typeof:h,_currentValue:b,_currentValue2:b,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},b.Provider={$$typeof:l,_context:b},b.Consumer=b},je.createElement=R,je.createFactory=function(b){var G=R.bind(null,b);return G.type=b,G},je.createRef=function(){return{current:null}},je.forwardRef=function(b){return{$$typeof:f,render:b}},je.isValidElement=N,je.lazy=function(b){return{$$typeof:v,_payload:{_status:-1,_result:b},_init:Le}},je.memo=function(b,G){return{$$typeof:y,type:b,compare:G===void 0?null:G}},je.startTransition=function(b){var G=Z.transition;Z.transition={};try{b()}finally{Z.transition=G}},je.unstable_act=ue,je.useCallback=function(b,G){return Ie.current.useCallback(b,G)},je.useContext=function(b){return Ie.current.useContext(b)},je.useDebugValue=function(){},je.useDeferredValue=function(b){return Ie.current.useDeferredValue(b)},je.useEffect=function(b,G){return Ie.current.useEffect(b,G)},je.useId=function(){return Ie.current.useId()},je.useImperativeHandle=function(b,G,Re){return Ie.current.useImperativeHandle(b,G,Re)},je.useInsertionEffect=function(b,G){return Ie.current.useInsertionEffect(b,G)},je.useLayoutEffect=function(b,G){return Ie.current.useLayoutEffect(b,G)},je.useMemo=function(b,G){return Ie.current.useMemo(b,G)},je.useReducer=function(b,G,Re){return Ie.current.useReducer(b,G,Re)},je.useRef=function(b){return Ie.current.useRef(b)},je.useState=function(b){return Ie.current.useState(b)},je.useSyncExternalStore=function(b,G,Re){return Ie.current.useSyncExternalStore(b,G,Re)},je.useTransition=function(){return Ie.current.useTransition()},je.version="18.3.1",je}var Ug;function Sf(){return Ug||(Ug=1,xd.exports=x0()),xd.exports}var Bg;function N0(){if(Bg)return Wa;Bg=1;var r=Sf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(f,g,y){var v,E={},S=null,O=null;y!==void 0&&(S=""+y),g.key!==void 0&&(S=""+g.key),g.ref!==void 0&&(O=g.ref);for(v in g)s.call(g,v)&&!l.hasOwnProperty(v)&&(E[v]=g[v]);if(f&&f.defaultProps)for(v in g=f.defaultProps,g)E[v]===void 0&&(E[v]=g[v]);return{$$typeof:e,type:f,key:S,ref:O,props:E,_owner:o.current}}return Wa.Fragment=t,Wa.jsx=h,Wa.jsxs=h,Wa}var zg;function D0(){return zg||(zg=1,kd.exports=N0()),kd.exports}var T=D0(),fe=Sf();const we=b_(fe),V0=k0({__proto__:null,default:we},[fe]);var qu={},Nd={exports:{}},on={},Dd={exports:{}},Vd={};var $g;function O0(){return $g||($g=1,(function(r){function e(Z,ye){var ue=Z.length;Z.push(ye);e:for(;0<ue;){var b=ue-1>>>1,G=Z[b];if(0<o(G,ye))Z[b]=ye,Z[ue]=G,ue=b;else break e}}function t(Z){return Z.length===0?null:Z[0]}function s(Z){if(Z.length===0)return null;var ye=Z[0],ue=Z.pop();if(ue!==ye){Z[0]=ue;e:for(var b=0,G=Z.length,Re=G>>>1;b<Re;){var xe=2*(b+1)-1,Me=Z[xe],be=xe+1,oe=Z[be];if(0>o(Me,ue))be<G&&0>o(oe,Me)?(Z[b]=oe,Z[be]=ue,b=be):(Z[b]=Me,Z[xe]=ue,b=xe);else if(be<G&&0>o(oe,ue))Z[b]=oe,Z[be]=ue,b=be;else break e}}return ye}function o(Z,ye){var ue=Z.sortIndex-ye.sortIndex;return ue!==0?ue:Z.id-ye.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var h=Date,f=h.now();r.unstable_now=function(){return h.now()-f}}var g=[],y=[],v=1,E=null,S=3,O=!1,q=!1,$=!1,L=typeof setTimeout=="function"?setTimeout:null,ne=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function te(Z){for(var ye=t(y);ye!==null;){if(ye.callback===null)s(y);else if(ye.startTime<=Z)s(y),ye.sortIndex=ye.expirationTime,e(g,ye);else break;ye=t(y)}}function H(Z){if($=!1,te(Z),!q)if(t(g)!==null)q=!0,Le(ie);else{var ye=t(y);ye!==null&&Ie(H,ye.startTime-Z)}}function ie(Z,ye){q=!1,$&&($=!1,ne(R),R=-1),O=!0;var ue=S;try{for(te(ye),E=t(g);E!==null&&(!(E.expirationTime>ye)||Z&&!k());){var b=E.callback;if(typeof b=="function"){E.callback=null,S=E.priorityLevel;var G=b(E.expirationTime<=ye);ye=r.unstable_now(),typeof G=="function"?E.callback=G:E===t(g)&&s(g),te(ye)}else s(g);E=t(g)}if(E!==null)var Re=!0;else{var xe=t(y);xe!==null&&Ie(H,xe.startTime-ye),Re=!1}return Re}finally{E=null,S=ue,O=!1}}var le=!1,A=null,R=-1,P=5,N=-1;function k(){return!(r.unstable_now()-N<P)}function D(){if(A!==null){var Z=r.unstable_now();N=Z;var ye=!0;try{ye=A(!0,Z)}finally{ye?C():(le=!1,A=null)}}else le=!1}var C;if(typeof Y=="function")C=function(){Y(D)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,me=se.port2;se.port1.onmessage=D,C=function(){me.postMessage(null)}}else C=function(){L(D,0)};function Le(Z){A=Z,le||(le=!0,C())}function Ie(Z,ye){R=L(function(){Z(r.unstable_now())},ye)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Z){Z.callback=null},r.unstable_continueExecution=function(){q||O||(q=!0,Le(ie))},r.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<Z?Math.floor(1e3/Z):5},r.unstable_getCurrentPriorityLevel=function(){return S},r.unstable_getFirstCallbackNode=function(){return t(g)},r.unstable_next=function(Z){switch(S){case 1:case 2:case 3:var ye=3;break;default:ye=S}var ue=S;S=ye;try{return Z()}finally{S=ue}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(Z,ye){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var ue=S;S=Z;try{return ye()}finally{S=ue}},r.unstable_scheduleCallback=function(Z,ye,ue){var b=r.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?b+ue:b):ue=b,Z){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=ue+G,Z={id:v++,callback:ye,priorityLevel:Z,startTime:ue,expirationTime:G,sortIndex:-1},ue>b?(Z.sortIndex=ue,e(y,Z),t(g)===null&&Z===t(y)&&($?(ne(R),R=-1):$=!0,Ie(H,ue-b))):(Z.sortIndex=G,e(g,Z),q||O||(q=!0,Le(ie))),Z},r.unstable_shouldYield=k,r.unstable_wrapCallback=function(Z){var ye=S;return function(){var ue=S;S=ye;try{return Z.apply(this,arguments)}finally{S=ue}}}})(Vd)),Vd}var qg;function M0(){return qg||(qg=1,Dd.exports=O0()),Dd.exports}var Wg;function b0(){if(Wg)return on;Wg=1;var r=Sf(),e=M0();function t(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(n,i){h(n,i),h(n+"Capture",i)}function h(n,i){for(o[n]=i,n=0;n<i.length;n++)s.add(i[n])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},E={};function S(n){return g.call(E,n)?!0:g.call(v,n)?!1:y.test(n)?E[n]=!0:(v[n]=!0,!1)}function O(n,i,a,c){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function q(n,i,a,c){if(i===null||typeof i>"u"||O(n,i,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function $(n,i,a,c,d,p,w){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=i,this.sanitizeURL=p,this.removeEmptyString=w}var L={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){L[n]=new $(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];L[i]=new $(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){L[n]=new $(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){L[n]=new $(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){L[n]=new $(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){L[n]=new $(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){L[n]=new $(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){L[n]=new $(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){L[n]=new $(n,5,!1,n.toLowerCase(),null,!1,!1)});var ne=/[\-:]([a-z])/g;function Y(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(ne,Y);L[i]=new $(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(ne,Y);L[i]=new $(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(ne,Y);L[i]=new $(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){L[n]=new $(n,1,!1,n.toLowerCase(),null,!1,!1)}),L.xlinkHref=new $("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){L[n]=new $(n,1,!1,n.toLowerCase(),null,!0,!0)});function te(n,i,a,c){var d=L.hasOwnProperty(i)?L[i]:null;(d!==null?d.type!==0:c||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(q(i,a,d,c)&&(a=null),c||d===null?S(i)&&(a===null?n.removeAttribute(i):n.setAttribute(i,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(i=d.attributeName,c=d.attributeNamespace,a===null?n.removeAttribute(i):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?n.setAttributeNS(c,i,a):n.setAttribute(i,a))))}var H=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ie=Symbol.for("react.element"),le=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),k=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),se=Symbol.for("react.suspense_list"),me=Symbol.for("react.memo"),Le=Symbol.for("react.lazy"),Ie=Symbol.for("react.offscreen"),Z=Symbol.iterator;function ye(n){return n===null||typeof n!="object"?null:(n=Z&&n[Z]||n["@@iterator"],typeof n=="function"?n:null)}var ue=Object.assign,b;function G(n){if(b===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);b=i&&i[1]||""}return`
`+b+n}var Re=!1;function xe(n,i){if(!n||Re)return"";Re=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(B){var c=B}Reflect.construct(n,[],i)}else{try{i.call()}catch(B){c=B}n.call(i.prototype)}else{try{throw Error()}catch(B){c=B}n()}}catch(B){if(B&&c&&typeof B.stack=="string"){for(var d=B.stack.split(`
`),p=c.stack.split(`
`),w=d.length-1,x=p.length-1;1<=w&&0<=x&&d[w]!==p[x];)x--;for(;1<=w&&0<=x;w--,x--)if(d[w]!==p[x]){if(w!==1||x!==1)do if(w--,x--,0>x||d[w]!==p[x]){var V=`
`+d[w].replace(" at new "," at ");return n.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",n.displayName)),V}while(1<=w&&0<=x);break}}}finally{Re=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?G(n):""}function Me(n){switch(n.tag){case 5:return G(n.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return n=xe(n.type,!1),n;case 11:return n=xe(n.type.render,!1),n;case 1:return n=xe(n.type,!0),n;default:return""}}function be(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case A:return"Fragment";case le:return"Portal";case P:return"Profiler";case R:return"StrictMode";case C:return"Suspense";case se:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case k:return(n.displayName||"Context")+".Consumer";case N:return(n._context.displayName||"Context")+".Provider";case D:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case me:return i=n.displayName||null,i!==null?i:be(n.type)||"Memo";case Le:i=n._payload,n=n._init;try{return be(n(i))}catch{}}return null}function oe(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return be(i);case 8:return i===R?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function De(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Oe(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function mt(n){var i=Oe(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),c=""+n[i];if(!n.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,p=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return d.call(this)},set:function(w){c=""+w,p.call(this,w)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Vt(n){n._valueTracker||(n._valueTracker=mt(n))}function Wn(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),c="";return n&&(c=Oe(n)?n.checked?"true":"false":n.value),n=c,n!==a?(i.setValue(n),!0):!1}function wn(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Li(n,i){var a=i.checked;return ue({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function kl(n,i){var a=i.defaultValue==null?"":i.defaultValue,c=i.checked!=null?i.checked:i.defaultChecked;a=De(i.value!=null?i.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function ji(n,i){i=i.checked,i!=null&&te(n,"checked",i,!1)}function Xs(n,i){ji(n,i);var a=De(i.value),c=i.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?gt(n,i.type,a):i.hasOwnProperty("defaultValue")&&gt(n,i.type,De(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function Yo(n,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var c=i.type;if(!(c!=="submit"&&c!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,a||i===n.value||(n.value=i),n.defaultValue=i}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function gt(n,i,a){(i!=="number"||wn(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var ct=Array.isArray;function xn(n,i,a,c){if(n=n.options,i){i={};for(var d=0;d<a.length;d++)i["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=i.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&c&&(n[a].defaultSelected=!0)}else{for(a=""+De(a),i=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}i!==null||n[d].disabled||(i=n[d])}i!==null&&(i.selected=!0)}}function Zo(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return ue({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function ea(n,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(t(92));if(ct(a)){if(1<a.length)throw Error(t(93));a=a[0]}i=a}i==null&&(i=""),a=i}n._wrapperState={initialValue:De(a)}}function xl(n,i){var a=De(i.value),c=De(i.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),i.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function Qr(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function ta(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fi(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?ta(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Xr,Nl=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,c,d){MSApp.execUnsafeLocalFunction(function(){return n(i,a,c,d)})}:n})(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(Xr=Xr||document.createElement("div"),Xr.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Xr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function Js(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var Jr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Dl=["Webkit","ms","Moz","O"];Object.keys(Jr).forEach(function(n){Dl.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),Jr[i]=Jr[n]})});function Yr(n,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||Jr.hasOwnProperty(n)&&Jr[n]?(""+i).trim():i+"px"}function Ui(n,i){n=n.style;for(var a in i)if(i.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=Yr(a,i[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,d):n[a]=d}}var na=ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Nn(n,i){if(i){if(na[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function Bi(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zr=null;function zi(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Er=null,Tr=null,at=null;function ra(n){if(n=xa(n)){if(typeof Er!="function")throw Error(t(280));var i=n.stateNode;i&&(i=iu(i),Er(n.stateNode,n.type,i))}}function es(n){Tr?at?at.push(n):at=[n]:Tr=n}function ts(){if(Tr){var n=Tr,i=at;if(at=Tr=null,ra(n),i)for(n=0;n<i.length;n++)ra(i[n])}}function Vl(n,i){return n(i)}function Ol(){}var Hn=!1;function Ml(n,i,a){if(Hn)return n(i,a);Hn=!0;try{return Vl(n,i,a)}finally{Hn=!1,(Tr!==null||at!==null)&&(Ol(),ts())}}function Ys(n,i){var a=n.stateNode;if(a===null)return null;var c=iu(a);if(c===null)return null;a=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,i,typeof a));return a}var ns=!1;if(f)try{var rs={};Object.defineProperty(rs,"passive",{get:function(){ns=!0}}),window.addEventListener("test",rs,rs),window.removeEventListener("test",rs,rs)}catch{ns=!1}function bl(n,i,a,c,d,p,w,x,V){var B=Array.prototype.slice.call(arguments,3);try{i.apply(a,B)}catch(X){this.onError(X)}}var Ir=!1,Gn=null,$i=!1,En=null,Ll={onError:function(n){Ir=!0,Gn=n}};function jl(n,i,a,c,d,p,w,x,V){Ir=!1,Gn=null,bl.apply(Ll,arguments)}function sa(n,i,a,c,d,p,w,x,V){if(jl.apply(this,arguments),Ir){if(Ir){var B=Gn;Ir=!1,Gn=null}else throw Error(t(198));$i||($i=!0,En=B)}}function Dn(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function ia(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function Fl(n){if(Dn(n)!==n)throw Error(t(188))}function Ul(n){var i=n.alternate;if(!i){if(i=Dn(n),i===null)throw Error(t(188));return i!==n?null:n}for(var a=n,c=i;;){var d=a.return;if(d===null)break;var p=d.alternate;if(p===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===a)return Fl(d),n;if(p===c)return Fl(d),i;p=p.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=p;else{for(var w=!1,x=d.child;x;){if(x===a){w=!0,a=d,c=p;break}if(x===c){w=!0,c=d,a=p;break}x=x.sibling}if(!w){for(x=p.child;x;){if(x===a){w=!0,a=p,c=d;break}if(x===c){w=!0,c=p,a=d;break}x=x.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:i}function Bl(n){return n=Ul(n),n!==null?Zs(n):null}function Zs(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=Zs(n);if(i!==null)return i;n=n.sibling}return null}var oa=e.unstable_scheduleCallback,qi=e.unstable_cancelCallback,ei=e.unstable_shouldYield,Sr=e.unstable_requestPaint,Ze=e.unstable_now,oh=e.unstable_getCurrentPriorityLevel,Wi=e.unstable_ImmediatePriority,aa=e.unstable_UserBlockingPriority,ti=e.unstable_NormalPriority,la=e.unstable_LowPriority,Hi=e.unstable_IdlePriority,ni=null,ln=null;function zl(n){if(ln&&typeof ln.onCommitFiberRoot=="function")try{ln.onCommitFiberRoot(ni,n,void 0,(n.current.flags&128)===128)}catch{}}var un=Math.clz32?Math.clz32:ri,Kn=Math.log,Tn=Math.LN2;function ri(n){return n>>>=0,n===0?32:31-(Kn(n)/Tn|0)|0}var Qn=64,ss=4194304;function Ke(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Ar(n,i){var a=n.pendingLanes;if(a===0)return 0;var c=0,d=n.suspendedLanes,p=n.pingedLanes,w=a&268435455;if(w!==0){var x=w&~d;x!==0?c=Ke(x):(p&=w,p!==0&&(c=Ke(p)))}else w=a&~d,w!==0?c=Ke(w):p!==0&&(c=Ke(p));if(c===0)return 0;if(i!==0&&i!==c&&(i&d)===0&&(d=c&-c,p=i&-i,d>=p||d===16&&(p&4194240)!==0))return i;if((c&4)!==0&&(c|=a&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=c;0<i;)a=31-un(i),d=1<<a,c|=n[a],i&=~d;return c}function si(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ii(n,i){for(var a=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,p=n.pendingLanes;0<p;){var w=31-un(p),x=1<<w,V=d[w];V===-1?((x&a)===0||(x&c)!==0)&&(d[w]=si(x,i)):V<=i&&(n.expiredLanes|=x),p&=~x}}function ua(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function ca(){var n=Qn;return Qn<<=1,(Qn&4194240)===0&&(Qn=64),n}function ha(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function oi(n,i,a){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-un(i),n[i]=a}function ah(n,i){var a=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-un(a),p=1<<d;i[d]=0,c[d]=-1,n[d]=-1,a&=~p}}function da(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var c=31-un(a),d=1<<c;d&i|n[c]&i&&(n[c]|=i),a&=~d}}var $e=0;function Xn(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var fa,Gi,pa,ma,ga,Jn=!1,Ki=[],Yn=null,Zn=null,Ot=null,ai=new Map,Rr=new Map,cn=[],$l="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function is(n,i){switch(n){case"focusin":case"focusout":Yn=null;break;case"dragenter":case"dragleave":Zn=null;break;case"mouseover":case"mouseout":Ot=null;break;case"pointerover":case"pointerout":ai.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rr.delete(i.pointerId)}}function Vn(n,i,a,c,d,p){return n===null||n.nativeEvent!==p?(n={blockedOn:i,domEventName:a,eventSystemFlags:c,nativeEvent:p,targetContainers:[d]},i!==null&&(i=xa(i),i!==null&&Gi(i)),n):(n.eventSystemFlags|=c,i=n.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),n)}function ql(n,i,a,c,d){switch(i){case"focusin":return Yn=Vn(Yn,n,i,a,c,d),!0;case"dragenter":return Zn=Vn(Zn,n,i,a,c,d),!0;case"mouseover":return Ot=Vn(Ot,n,i,a,c,d),!0;case"pointerover":var p=d.pointerId;return ai.set(p,Vn(ai.get(p)||null,n,i,a,c,d)),!0;case"gotpointercapture":return p=d.pointerId,Rr.set(p,Vn(Rr.get(p)||null,n,i,a,c,d)),!0}return!1}function Qi(n){var i=hi(n.target);if(i!==null){var a=Dn(i);if(a!==null){if(i=a.tag,i===13){if(i=ia(a),i!==null){n.blockedOn=i,ga(n.priority,function(){pa(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Je(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=Xi(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Zr=c,a.target.dispatchEvent(c),Zr=null}else return i=xa(a),i!==null&&Gi(i),n.blockedOn=a,!1;i.shift()}return!0}function Wl(n,i,a){Je(n)&&a.delete(i)}function lh(){Jn=!1,Yn!==null&&Je(Yn)&&(Yn=null),Zn!==null&&Je(Zn)&&(Zn=null),Ot!==null&&Je(Ot)&&(Ot=null),ai.forEach(Wl),Rr.forEach(Wl)}function os(n,i){n.blockedOn===i&&(n.blockedOn=null,Jn||(Jn=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,lh)))}function as(n){function i(d){return os(d,n)}if(0<Ki.length){os(Ki[0],n);for(var a=1;a<Ki.length;a++){var c=Ki[a];c.blockedOn===n&&(c.blockedOn=null)}}for(Yn!==null&&os(Yn,n),Zn!==null&&os(Zn,n),Ot!==null&&os(Ot,n),ai.forEach(i),Rr.forEach(i),a=0;a<cn.length;a++)c=cn[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<cn.length&&(a=cn[0],a.blockedOn===null);)Qi(a),a.blockedOn===null&&cn.shift()}var Cr=H.ReactCurrentBatchConfig,Pr=!0;function er(n,i,a,c){var d=$e,p=Cr.transition;Cr.transition=null;try{$e=1,ya(n,i,a,c)}finally{$e=d,Cr.transition=p}}function Hl(n,i,a,c){var d=$e,p=Cr.transition;Cr.transition=null;try{$e=4,ya(n,i,a,c)}finally{$e=d,Cr.transition=p}}function ya(n,i,a,c){if(Pr){var d=Xi(n,i,a,c);if(d===null)vh(n,i,c,tr,a),is(n,c);else if(ql(d,n,i,a,c))c.stopPropagation();else if(is(n,c),i&4&&-1<$l.indexOf(n)){for(;d!==null;){var p=xa(d);if(p!==null&&fa(p),p=Xi(n,i,a,c),p===null&&vh(n,i,c,tr,a),p===d)break;d=p}d!==null&&c.stopPropagation()}else vh(n,i,c,null,a)}}var tr=null;function Xi(n,i,a,c){if(tr=null,n=zi(c),n=hi(n),n!==null)if(i=Dn(n),i===null)n=null;else if(a=i.tag,a===13){if(n=ia(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return tr=n,null}function Ji(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(oh()){case Wi:return 1;case aa:return 4;case ti:case la:return 16;case Hi:return 536870912;default:return 16}default:return 16}}var hn=null,Yi=null,kr=null;function Gl(){if(kr)return kr;var n,i=Yi,a=i.length,c,d="value"in hn?hn.value:hn.textContent,p=d.length;for(n=0;n<a&&i[n]===d[n];n++);var w=a-n;for(c=1;c<=w&&i[a-c]===d[p-c];c++);return kr=d.slice(n,1<c?1-c:void 0)}function li(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function nr(){return!0}function _a(){return!1}function zt(n){function i(a,c,d,p,w){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=p,this.target=w,this.currentTarget=null;for(var x in n)n.hasOwnProperty(x)&&(a=n[x],this[x]=a?a(p):p[x]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?nr:_a,this.isPropagationStopped=_a,this}return ue(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=nr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=nr)},persist:function(){},isPersistent:nr}),i}var rr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ui=zt(rr),ls=ue({},rr,{view:0,detail:0}),Zi=zt(ls),eo,to,dn,ci=ue({},ls,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ve,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==dn&&(dn&&n.type==="mousemove"?(eo=n.screenX-dn.screenX,to=n.screenY-dn.screenY):to=eo=0,dn=n),eo)},movementY:function(n){return"movementY"in n?n.movementY:to}}),va=zt(ci),Kl=ue({},ci,{dataTransfer:0}),Ql=zt(Kl),no=ue({},ls,{relatedTarget:0}),Mt=zt(no),Xl=ue({},rr,{animationName:0,elapsedTime:0,pseudoElement:0}),Jl=zt(Xl),us=ue({},rr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),u=zt(us),m=ue({},rr,{data:0}),_=zt(m),I={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},F={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},z={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function re(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=z[n])?!!i[n]:!1}function Ve(){return re}var ht=ue({},ls,{key:function(n){if(n.key){var i=I[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=li(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?F[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ve,charCode:function(n){return n.type==="keypress"?li(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?li(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Qe=zt(ht),yt=ue({},ci,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fn=zt(yt),xr=ue({},ls,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ve}),sr=zt(xr),ir=ue({},rr,{propertyName:0,elapsedTime:0,pseudoElement:0}),ro=zt(ir),wa=ue({},ci,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),IE=zt(wa),SE=[9,13,27,32],uh=f&&"CompositionEvent"in window,Ea=null;f&&"documentMode"in document&&(Ea=document.documentMode);var AE=f&&"TextEvent"in window&&!Ea,Np=f&&(!uh||Ea&&8<Ea&&11>=Ea),Dp=" ",Vp=!1;function Op(n,i){switch(n){case"keyup":return SE.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mp(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var so=!1;function RE(n,i){switch(n){case"compositionend":return Mp(i);case"keypress":return i.which!==32?null:(Vp=!0,Dp);case"textInput":return n=i.data,n===Dp&&Vp?null:n;default:return null}}function CE(n,i){if(so)return n==="compositionend"||!uh&&Op(n,i)?(n=Gl(),kr=Yi=hn=null,so=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Np&&i.locale!=="ko"?null:i.data;default:return null}}var PE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bp(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!PE[n.type]:i==="textarea"}function Lp(n,i,a,c){es(c),i=nu(i,"onChange"),0<i.length&&(a=new ui("onChange","change",null,a,c),n.push({event:a,listeners:i}))}var Ta=null,Ia=null;function kE(n){tm(n,0)}function Yl(n){var i=uo(n);if(Wn(i))return n}function xE(n,i){if(n==="change")return i}var jp=!1;if(f){var ch;if(f){var hh="oninput"in document;if(!hh){var Fp=document.createElement("div");Fp.setAttribute("oninput","return;"),hh=typeof Fp.oninput=="function"}ch=hh}else ch=!1;jp=ch&&(!document.documentMode||9<document.documentMode)}function Up(){Ta&&(Ta.detachEvent("onpropertychange",Bp),Ia=Ta=null)}function Bp(n){if(n.propertyName==="value"&&Yl(Ia)){var i=[];Lp(i,Ia,n,zi(n)),Ml(kE,i)}}function NE(n,i,a){n==="focusin"?(Up(),Ta=i,Ia=a,Ta.attachEvent("onpropertychange",Bp)):n==="focusout"&&Up()}function DE(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Yl(Ia)}function VE(n,i){if(n==="click")return Yl(i)}function OE(n,i){if(n==="input"||n==="change")return Yl(i)}function ME(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var On=typeof Object.is=="function"?Object.is:ME;function Sa(n,i){if(On(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),c=Object.keys(i);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!g.call(i,d)||!On(n[d],i[d]))return!1}return!0}function zp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function $p(n,i){var a=zp(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=i&&c>=i)return{node:a,offset:i-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=zp(a)}}function qp(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?qp(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Wp(){for(var n=window,i=wn();i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=wn(n.document)}return i}function dh(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function bE(n){var i=Wp(),a=n.focusedElem,c=n.selectionRange;if(i!==a&&a&&a.ownerDocument&&qp(a.ownerDocument.documentElement,a)){if(c!==null&&dh(a)){if(i=c.start,n=c.end,n===void 0&&(n=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(n,a.value.length);else if(n=(i=a.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,p=Math.min(c.start,d);c=c.end===void 0?p:Math.min(c.end,d),!n.extend&&p>c&&(d=c,c=p,p=d),d=$p(a,p);var w=$p(a,c);d&&w&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==w.node||n.focusOffset!==w.offset)&&(i=i.createRange(),i.setStart(d.node,d.offset),n.removeAllRanges(),p>c?(n.addRange(i),n.extend(w.node,w.offset)):(i.setEnd(w.node,w.offset),n.addRange(i)))}}for(i=[],n=a;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)n=i[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var LE=f&&"documentMode"in document&&11>=document.documentMode,io=null,fh=null,Aa=null,ph=!1;function Hp(n,i,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;ph||io==null||io!==wn(c)||(c=io,"selectionStart"in c&&dh(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Aa&&Sa(Aa,c)||(Aa=c,c=nu(fh,"onSelect"),0<c.length&&(i=new ui("onSelect","select",null,i,a),n.push({event:i,listeners:c}),i.target=io)))}function Zl(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var oo={animationend:Zl("Animation","AnimationEnd"),animationiteration:Zl("Animation","AnimationIteration"),animationstart:Zl("Animation","AnimationStart"),transitionend:Zl("Transition","TransitionEnd")},mh={},Gp={};f&&(Gp=document.createElement("div").style,"AnimationEvent"in window||(delete oo.animationend.animation,delete oo.animationiteration.animation,delete oo.animationstart.animation),"TransitionEvent"in window||delete oo.transitionend.transition);function eu(n){if(mh[n])return mh[n];if(!oo[n])return n;var i=oo[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in Gp)return mh[n]=i[a];return n}var Kp=eu("animationend"),Qp=eu("animationiteration"),Xp=eu("animationstart"),Jp=eu("transitionend"),Yp=new Map,Zp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function cs(n,i){Yp.set(n,i),l(i,[n])}for(var gh=0;gh<Zp.length;gh++){var yh=Zp[gh],jE=yh.toLowerCase(),FE=yh[0].toUpperCase()+yh.slice(1);cs(jE,"on"+FE)}cs(Kp,"onAnimationEnd"),cs(Qp,"onAnimationIteration"),cs(Xp,"onAnimationStart"),cs("dblclick","onDoubleClick"),cs("focusin","onFocus"),cs("focusout","onBlur"),cs(Jp,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ra="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),UE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ra));function em(n,i,a){var c=n.type||"unknown-event";n.currentTarget=a,sa(c,i,void 0,n),n.currentTarget=null}function tm(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],d=c.event;c=c.listeners;e:{var p=void 0;if(i)for(var w=c.length-1;0<=w;w--){var x=c[w],V=x.instance,B=x.currentTarget;if(x=x.listener,V!==p&&d.isPropagationStopped())break e;em(d,x,B),p=V}else for(w=0;w<c.length;w++){if(x=c[w],V=x.instance,B=x.currentTarget,x=x.listener,V!==p&&d.isPropagationStopped())break e;em(d,x,B),p=V}}}if($i)throw n=En,$i=!1,En=null,n}function et(n,i){var a=i[Ah];a===void 0&&(a=i[Ah]=new Set);var c=n+"__bubble";a.has(c)||(nm(i,n,2,!1),a.add(c))}function _h(n,i,a){var c=0;i&&(c|=4),nm(a,n,c,i)}var tu="_reactListening"+Math.random().toString(36).slice(2);function Ca(n){if(!n[tu]){n[tu]=!0,s.forEach(function(a){a!=="selectionchange"&&(UE.has(a)||_h(a,!1,n),_h(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[tu]||(i[tu]=!0,_h("selectionchange",!1,i))}}function nm(n,i,a,c){switch(Ji(i)){case 1:var d=er;break;case 4:d=Hl;break;default:d=ya}a=d.bind(null,i,a,n),d=void 0,!ns||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(i,a,{capture:!0,passive:d}):n.addEventListener(i,a,!0):d!==void 0?n.addEventListener(i,a,{passive:d}):n.addEventListener(i,a,!1)}function vh(n,i,a,c,d){var p=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var x=c.stateNode.containerInfo;if(x===d||x.nodeType===8&&x.parentNode===d)break;if(w===4)for(w=c.return;w!==null;){var V=w.tag;if((V===3||V===4)&&(V=w.stateNode.containerInfo,V===d||V.nodeType===8&&V.parentNode===d))return;w=w.return}for(;x!==null;){if(w=hi(x),w===null)return;if(V=w.tag,V===5||V===6){c=p=w;continue e}x=x.parentNode}}c=c.return}Ml(function(){var B=p,X=zi(a),J=[];e:{var Q=Yp.get(n);if(Q!==void 0){var ce=ui,pe=n;switch(n){case"keypress":if(li(a)===0)break e;case"keydown":case"keyup":ce=Qe;break;case"focusin":pe="focus",ce=Mt;break;case"focusout":pe="blur",ce=Mt;break;case"beforeblur":case"afterblur":ce=Mt;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=va;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=Ql;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=sr;break;case Kp:case Qp:case Xp:ce=Jl;break;case Jp:ce=ro;break;case"scroll":ce=Zi;break;case"wheel":ce=IE;break;case"copy":case"cut":case"paste":ce=u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=fn}var ge=(i&4)!==0,dt=!ge&&n==="scroll",j=ge?Q!==null?Q+"Capture":null:Q;ge=[];for(var M=B,U;M!==null;){U=M;var ee=U.stateNode;if(U.tag===5&&ee!==null&&(U=ee,j!==null&&(ee=Ys(M,j),ee!=null&&ge.push(Pa(M,ee,U)))),dt)break;M=M.return}0<ge.length&&(Q=new ce(Q,pe,null,a,X),J.push({event:Q,listeners:ge}))}}if((i&7)===0){e:{if(Q=n==="mouseover"||n==="pointerover",ce=n==="mouseout"||n==="pointerout",Q&&a!==Zr&&(pe=a.relatedTarget||a.fromElement)&&(hi(pe)||pe[Nr]))break e;if((ce||Q)&&(Q=X.window===X?X:(Q=X.ownerDocument)?Q.defaultView||Q.parentWindow:window,ce?(pe=a.relatedTarget||a.toElement,ce=B,pe=pe?hi(pe):null,pe!==null&&(dt=Dn(pe),pe!==dt||pe.tag!==5&&pe.tag!==6)&&(pe=null)):(ce=null,pe=B),ce!==pe)){if(ge=va,ee="onMouseLeave",j="onMouseEnter",M="mouse",(n==="pointerout"||n==="pointerover")&&(ge=fn,ee="onPointerLeave",j="onPointerEnter",M="pointer"),dt=ce==null?Q:uo(ce),U=pe==null?Q:uo(pe),Q=new ge(ee,M+"leave",ce,a,X),Q.target=dt,Q.relatedTarget=U,ee=null,hi(X)===B&&(ge=new ge(j,M+"enter",pe,a,X),ge.target=U,ge.relatedTarget=dt,ee=ge),dt=ee,ce&&pe)t:{for(ge=ce,j=pe,M=0,U=ge;U;U=ao(U))M++;for(U=0,ee=j;ee;ee=ao(ee))U++;for(;0<M-U;)ge=ao(ge),M--;for(;0<U-M;)j=ao(j),U--;for(;M--;){if(ge===j||j!==null&&ge===j.alternate)break t;ge=ao(ge),j=ao(j)}ge=null}else ge=null;ce!==null&&rm(J,Q,ce,ge,!1),pe!==null&&dt!==null&&rm(J,dt,pe,ge,!0)}}e:{if(Q=B?uo(B):window,ce=Q.nodeName&&Q.nodeName.toLowerCase(),ce==="select"||ce==="input"&&Q.type==="file")var _e=xE;else if(bp(Q))if(jp)_e=OE;else{_e=DE;var Se=NE}else(ce=Q.nodeName)&&ce.toLowerCase()==="input"&&(Q.type==="checkbox"||Q.type==="radio")&&(_e=VE);if(_e&&(_e=_e(n,B))){Lp(J,_e,a,X);break e}Se&&Se(n,Q,B),n==="focusout"&&(Se=Q._wrapperState)&&Se.controlled&&Q.type==="number"&&gt(Q,"number",Q.value)}switch(Se=B?uo(B):window,n){case"focusin":(bp(Se)||Se.contentEditable==="true")&&(io=Se,fh=B,Aa=null);break;case"focusout":Aa=fh=io=null;break;case"mousedown":ph=!0;break;case"contextmenu":case"mouseup":case"dragend":ph=!1,Hp(J,a,X);break;case"selectionchange":if(LE)break;case"keydown":case"keyup":Hp(J,a,X)}var Ae;if(uh)e:{switch(n){case"compositionstart":var Pe="onCompositionStart";break e;case"compositionend":Pe="onCompositionEnd";break e;case"compositionupdate":Pe="onCompositionUpdate";break e}Pe=void 0}else so?Op(n,a)&&(Pe="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Pe="onCompositionStart");Pe&&(Np&&a.locale!=="ko"&&(so||Pe!=="onCompositionStart"?Pe==="onCompositionEnd"&&so&&(Ae=Gl()):(hn=X,Yi="value"in hn?hn.value:hn.textContent,so=!0)),Se=nu(B,Pe),0<Se.length&&(Pe=new _(Pe,n,null,a,X),J.push({event:Pe,listeners:Se}),Ae?Pe.data=Ae:(Ae=Mp(a),Ae!==null&&(Pe.data=Ae)))),(Ae=AE?RE(n,a):CE(n,a))&&(B=nu(B,"onBeforeInput"),0<B.length&&(X=new _("onBeforeInput","beforeinput",null,a,X),J.push({event:X,listeners:B}),X.data=Ae))}tm(J,i)})}function Pa(n,i,a){return{instance:n,listener:i,currentTarget:a}}function nu(n,i){for(var a=i+"Capture",c=[];n!==null;){var d=n,p=d.stateNode;d.tag===5&&p!==null&&(d=p,p=Ys(n,a),p!=null&&c.unshift(Pa(n,p,d)),p=Ys(n,i),p!=null&&c.push(Pa(n,p,d))),n=n.return}return c}function ao(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function rm(n,i,a,c,d){for(var p=i._reactName,w=[];a!==null&&a!==c;){var x=a,V=x.alternate,B=x.stateNode;if(V!==null&&V===c)break;x.tag===5&&B!==null&&(x=B,d?(V=Ys(a,p),V!=null&&w.unshift(Pa(a,V,x))):d||(V=Ys(a,p),V!=null&&w.push(Pa(a,V,x)))),a=a.return}w.length!==0&&n.push({event:i,listeners:w})}var BE=/\r\n?/g,zE=/\u0000|\uFFFD/g;function sm(n){return(typeof n=="string"?n:""+n).replace(BE,`
`).replace(zE,"")}function ru(n,i,a){if(i=sm(i),sm(n)!==i&&a)throw Error(t(425))}function su(){}var wh=null,Eh=null;function Th(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Ih=typeof setTimeout=="function"?setTimeout:void 0,$E=typeof clearTimeout=="function"?clearTimeout:void 0,im=typeof Promise=="function"?Promise:void 0,qE=typeof queueMicrotask=="function"?queueMicrotask:typeof im<"u"?function(n){return im.resolve(null).then(n).catch(WE)}:Ih;function WE(n){setTimeout(function(){throw n})}function Sh(n,i){var a=i,c=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){n.removeChild(d),as(i);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);as(i)}function hs(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function om(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}var lo=Math.random().toString(36).slice(2),or="__reactFiber$"+lo,ka="__reactProps$"+lo,Nr="__reactContainer$"+lo,Ah="__reactEvents$"+lo,HE="__reactListeners$"+lo,GE="__reactHandles$"+lo;function hi(n){var i=n[or];if(i)return i;for(var a=n.parentNode;a;){if(i=a[Nr]||a[or]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=om(n);n!==null;){if(a=n[or])return a;n=om(n)}return i}n=a,a=n.parentNode}return null}function xa(n){return n=n[or]||n[Nr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function uo(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function iu(n){return n[ka]||null}var Rh=[],co=-1;function ds(n){return{current:n}}function tt(n){0>co||(n.current=Rh[co],Rh[co]=null,co--)}function Ye(n,i){co++,Rh[co]=n.current,n.current=i}var fs={},$t=ds(fs),en=ds(!1),di=fs;function ho(n,i){var a=n.type.contextTypes;if(!a)return fs;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===i)return c.__reactInternalMemoizedMaskedChildContext;var d={},p;for(p in a)d[p]=i[p];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=d),d}function tn(n){return n=n.childContextTypes,n!=null}function ou(){tt(en),tt($t)}function am(n,i,a){if($t.current!==fs)throw Error(t(168));Ye($t,i),Ye(en,a)}function lm(n,i,a){var c=n.stateNode;if(i=i.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in i))throw Error(t(108,oe(n)||"Unknown",d));return ue({},a,c)}function au(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||fs,di=$t.current,Ye($t,n),Ye(en,en.current),!0}function um(n,i,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=lm(n,i,di),c.__reactInternalMemoizedMergedChildContext=n,tt(en),tt($t),Ye($t,n)):tt(en),Ye(en,a)}var Dr=null,lu=!1,Ch=!1;function cm(n){Dr===null?Dr=[n]:Dr.push(n)}function KE(n){lu=!0,cm(n)}function ps(){if(!Ch&&Dr!==null){Ch=!0;var n=0,i=$e;try{var a=Dr;for($e=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}Dr=null,lu=!1}catch(d){throw Dr!==null&&(Dr=Dr.slice(n+1)),oa(Wi,ps),d}finally{$e=i,Ch=!1}}return null}var fo=[],po=0,uu=null,cu=0,In=[],Sn=0,fi=null,Vr=1,Or="";function pi(n,i){fo[po++]=cu,fo[po++]=uu,uu=n,cu=i}function hm(n,i,a){In[Sn++]=Vr,In[Sn++]=Or,In[Sn++]=fi,fi=n;var c=Vr;n=Or;var d=32-un(c)-1;c&=~(1<<d),a+=1;var p=32-un(i)+d;if(30<p){var w=d-d%5;p=(c&(1<<w)-1).toString(32),c>>=w,d-=w,Vr=1<<32-un(i)+d|a<<d|c,Or=p+n}else Vr=1<<p|a<<d|c,Or=n}function Ph(n){n.return!==null&&(pi(n,1),hm(n,1,0))}function kh(n){for(;n===uu;)uu=fo[--po],fo[po]=null,cu=fo[--po],fo[po]=null;for(;n===fi;)fi=In[--Sn],In[Sn]=null,Or=In[--Sn],In[Sn]=null,Vr=In[--Sn],In[Sn]=null}var pn=null,mn=null,rt=!1,Mn=null;function dm(n,i){var a=Pn(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=n,i=n.deletions,i===null?(n.deletions=[a],n.flags|=16):i.push(a)}function fm(n,i){switch(n.tag){case 5:var a=n.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,pn=n,mn=hs(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,pn=n,mn=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=fi!==null?{id:Vr,overflow:Or}:null,n.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=Pn(18,null,null,0),a.stateNode=i,a.return=n,n.child=a,pn=n,mn=null,!0):!1;default:return!1}}function xh(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Nh(n){if(rt){var i=mn;if(i){var a=i;if(!fm(n,i)){if(xh(n))throw Error(t(418));i=hs(a.nextSibling);var c=pn;i&&fm(n,i)?dm(c,a):(n.flags=n.flags&-4097|2,rt=!1,pn=n)}}else{if(xh(n))throw Error(t(418));n.flags=n.flags&-4097|2,rt=!1,pn=n}}}function pm(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;pn=n}function hu(n){if(n!==pn)return!1;if(!rt)return pm(n),rt=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!Th(n.type,n.memoizedProps)),i&&(i=mn)){if(xh(n))throw mm(),Error(t(418));for(;i;)dm(n,i),i=hs(i.nextSibling)}if(pm(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(i===0){mn=hs(n.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}n=n.nextSibling}mn=null}}else mn=pn?hs(n.stateNode.nextSibling):null;return!0}function mm(){for(var n=mn;n;)n=hs(n.nextSibling)}function mo(){mn=pn=null,rt=!1}function Dh(n){Mn===null?Mn=[n]:Mn.push(n)}var QE=H.ReactCurrentBatchConfig;function Na(n,i,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var d=c,p=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===p?i.ref:(i=function(w){var x=d.refs;w===null?delete x[p]:x[p]=w},i._stringRef=p,i)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function du(n,i){throw n=Object.prototype.toString.call(i),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function gm(n){var i=n._init;return i(n._payload)}function ym(n){function i(j,M){if(n){var U=j.deletions;U===null?(j.deletions=[M],j.flags|=16):U.push(M)}}function a(j,M){if(!n)return null;for(;M!==null;)i(j,M),M=M.sibling;return null}function c(j,M){for(j=new Map;M!==null;)M.key!==null?j.set(M.key,M):j.set(M.index,M),M=M.sibling;return j}function d(j,M){return j=Ts(j,M),j.index=0,j.sibling=null,j}function p(j,M,U){return j.index=U,n?(U=j.alternate,U!==null?(U=U.index,U<M?(j.flags|=2,M):U):(j.flags|=2,M)):(j.flags|=1048576,M)}function w(j){return n&&j.alternate===null&&(j.flags|=2),j}function x(j,M,U,ee){return M===null||M.tag!==6?(M=Id(U,j.mode,ee),M.return=j,M):(M=d(M,U),M.return=j,M)}function V(j,M,U,ee){var _e=U.type;return _e===A?X(j,M,U.props.children,ee,U.key):M!==null&&(M.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===Le&&gm(_e)===M.type)?(ee=d(M,U.props),ee.ref=Na(j,M,U),ee.return=j,ee):(ee=bu(U.type,U.key,U.props,null,j.mode,ee),ee.ref=Na(j,M,U),ee.return=j,ee)}function B(j,M,U,ee){return M===null||M.tag!==4||M.stateNode.containerInfo!==U.containerInfo||M.stateNode.implementation!==U.implementation?(M=Sd(U,j.mode,ee),M.return=j,M):(M=d(M,U.children||[]),M.return=j,M)}function X(j,M,U,ee,_e){return M===null||M.tag!==7?(M=Ti(U,j.mode,ee,_e),M.return=j,M):(M=d(M,U),M.return=j,M)}function J(j,M,U){if(typeof M=="string"&&M!==""||typeof M=="number")return M=Id(""+M,j.mode,U),M.return=j,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case ie:return U=bu(M.type,M.key,M.props,null,j.mode,U),U.ref=Na(j,null,M),U.return=j,U;case le:return M=Sd(M,j.mode,U),M.return=j,M;case Le:var ee=M._init;return J(j,ee(M._payload),U)}if(ct(M)||ye(M))return M=Ti(M,j.mode,U,null),M.return=j,M;du(j,M)}return null}function Q(j,M,U,ee){var _e=M!==null?M.key:null;if(typeof U=="string"&&U!==""||typeof U=="number")return _e!==null?null:x(j,M,""+U,ee);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case ie:return U.key===_e?V(j,M,U,ee):null;case le:return U.key===_e?B(j,M,U,ee):null;case Le:return _e=U._init,Q(j,M,_e(U._payload),ee)}if(ct(U)||ye(U))return _e!==null?null:X(j,M,U,ee,null);du(j,U)}return null}function ce(j,M,U,ee,_e){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return j=j.get(U)||null,x(M,j,""+ee,_e);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case ie:return j=j.get(ee.key===null?U:ee.key)||null,V(M,j,ee,_e);case le:return j=j.get(ee.key===null?U:ee.key)||null,B(M,j,ee,_e);case Le:var Se=ee._init;return ce(j,M,U,Se(ee._payload),_e)}if(ct(ee)||ye(ee))return j=j.get(U)||null,X(M,j,ee,_e,null);du(M,ee)}return null}function pe(j,M,U,ee){for(var _e=null,Se=null,Ae=M,Pe=M=0,xt=null;Ae!==null&&Pe<U.length;Pe++){Ae.index>Pe?(xt=Ae,Ae=null):xt=Ae.sibling;var Ge=Q(j,Ae,U[Pe],ee);if(Ge===null){Ae===null&&(Ae=xt);break}n&&Ae&&Ge.alternate===null&&i(j,Ae),M=p(Ge,M,Pe),Se===null?_e=Ge:Se.sibling=Ge,Se=Ge,Ae=xt}if(Pe===U.length)return a(j,Ae),rt&&pi(j,Pe),_e;if(Ae===null){for(;Pe<U.length;Pe++)Ae=J(j,U[Pe],ee),Ae!==null&&(M=p(Ae,M,Pe),Se===null?_e=Ae:Se.sibling=Ae,Se=Ae);return rt&&pi(j,Pe),_e}for(Ae=c(j,Ae);Pe<U.length;Pe++)xt=ce(Ae,j,Pe,U[Pe],ee),xt!==null&&(n&&xt.alternate!==null&&Ae.delete(xt.key===null?Pe:xt.key),M=p(xt,M,Pe),Se===null?_e=xt:Se.sibling=xt,Se=xt);return n&&Ae.forEach(function(Is){return i(j,Is)}),rt&&pi(j,Pe),_e}function ge(j,M,U,ee){var _e=ye(U);if(typeof _e!="function")throw Error(t(150));if(U=_e.call(U),U==null)throw Error(t(151));for(var Se=_e=null,Ae=M,Pe=M=0,xt=null,Ge=U.next();Ae!==null&&!Ge.done;Pe++,Ge=U.next()){Ae.index>Pe?(xt=Ae,Ae=null):xt=Ae.sibling;var Is=Q(j,Ae,Ge.value,ee);if(Is===null){Ae===null&&(Ae=xt);break}n&&Ae&&Is.alternate===null&&i(j,Ae),M=p(Is,M,Pe),Se===null?_e=Is:Se.sibling=Is,Se=Is,Ae=xt}if(Ge.done)return a(j,Ae),rt&&pi(j,Pe),_e;if(Ae===null){for(;!Ge.done;Pe++,Ge=U.next())Ge=J(j,Ge.value,ee),Ge!==null&&(M=p(Ge,M,Pe),Se===null?_e=Ge:Se.sibling=Ge,Se=Ge);return rt&&pi(j,Pe),_e}for(Ae=c(j,Ae);!Ge.done;Pe++,Ge=U.next())Ge=ce(Ae,j,Pe,Ge.value,ee),Ge!==null&&(n&&Ge.alternate!==null&&Ae.delete(Ge.key===null?Pe:Ge.key),M=p(Ge,M,Pe),Se===null?_e=Ge:Se.sibling=Ge,Se=Ge);return n&&Ae.forEach(function(P0){return i(j,P0)}),rt&&pi(j,Pe),_e}function dt(j,M,U,ee){if(typeof U=="object"&&U!==null&&U.type===A&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case ie:e:{for(var _e=U.key,Se=M;Se!==null;){if(Se.key===_e){if(_e=U.type,_e===A){if(Se.tag===7){a(j,Se.sibling),M=d(Se,U.props.children),M.return=j,j=M;break e}}else if(Se.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===Le&&gm(_e)===Se.type){a(j,Se.sibling),M=d(Se,U.props),M.ref=Na(j,Se,U),M.return=j,j=M;break e}a(j,Se);break}else i(j,Se);Se=Se.sibling}U.type===A?(M=Ti(U.props.children,j.mode,ee,U.key),M.return=j,j=M):(ee=bu(U.type,U.key,U.props,null,j.mode,ee),ee.ref=Na(j,M,U),ee.return=j,j=ee)}return w(j);case le:e:{for(Se=U.key;M!==null;){if(M.key===Se)if(M.tag===4&&M.stateNode.containerInfo===U.containerInfo&&M.stateNode.implementation===U.implementation){a(j,M.sibling),M=d(M,U.children||[]),M.return=j,j=M;break e}else{a(j,M);break}else i(j,M);M=M.sibling}M=Sd(U,j.mode,ee),M.return=j,j=M}return w(j);case Le:return Se=U._init,dt(j,M,Se(U._payload),ee)}if(ct(U))return pe(j,M,U,ee);if(ye(U))return ge(j,M,U,ee);du(j,U)}return typeof U=="string"&&U!==""||typeof U=="number"?(U=""+U,M!==null&&M.tag===6?(a(j,M.sibling),M=d(M,U),M.return=j,j=M):(a(j,M),M=Id(U,j.mode,ee),M.return=j,j=M),w(j)):a(j,M)}return dt}var go=ym(!0),_m=ym(!1),fu=ds(null),pu=null,yo=null,Vh=null;function Oh(){Vh=yo=pu=null}function Mh(n){var i=fu.current;tt(fu),n._currentValue=i}function bh(n,i,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),n===a)break;n=n.return}}function _o(n,i){pu=n,Vh=yo=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&i)!==0&&(nn=!0),n.firstContext=null)}function An(n){var i=n._currentValue;if(Vh!==n)if(n={context:n,memoizedValue:i,next:null},yo===null){if(pu===null)throw Error(t(308));yo=n,pu.dependencies={lanes:0,firstContext:n}}else yo=yo.next=n;return i}var mi=null;function Lh(n){mi===null?mi=[n]:mi.push(n)}function vm(n,i,a,c){var d=i.interleaved;return d===null?(a.next=a,Lh(i)):(a.next=d.next,d.next=a),i.interleaved=a,Mr(n,c)}function Mr(n,i){n.lanes|=i;var a=n.alternate;for(a!==null&&(a.lanes|=i),a=n,n=n.return;n!==null;)n.childLanes|=i,a=n.alternate,a!==null&&(a.childLanes|=i),a=n,n=n.return;return a.tag===3?a.stateNode:null}var ms=!1;function jh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wm(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function br(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function gs(n,i,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(He&2)!==0){var d=c.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),c.pending=i,Mr(n,a)}return d=c.interleaved,d===null?(i.next=i,Lh(c)):(i.next=d.next,d.next=i),c.interleaved=i,Mr(n,a)}function mu(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,da(n,a)}}function Em(n,i){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};p===null?d=p=w:p=p.next=w,a=a.next}while(a!==null);p===null?d=p=i:p=p.next=i}else d=p=i;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}function gu(n,i,a,c){var d=n.updateQueue;ms=!1;var p=d.firstBaseUpdate,w=d.lastBaseUpdate,x=d.shared.pending;if(x!==null){d.shared.pending=null;var V=x,B=V.next;V.next=null,w===null?p=B:w.next=B,w=V;var X=n.alternate;X!==null&&(X=X.updateQueue,x=X.lastBaseUpdate,x!==w&&(x===null?X.firstBaseUpdate=B:x.next=B,X.lastBaseUpdate=V))}if(p!==null){var J=d.baseState;w=0,X=B=V=null,x=p;do{var Q=x.lane,ce=x.eventTime;if((c&Q)===Q){X!==null&&(X=X.next={eventTime:ce,lane:0,tag:x.tag,payload:x.payload,callback:x.callback,next:null});e:{var pe=n,ge=x;switch(Q=i,ce=a,ge.tag){case 1:if(pe=ge.payload,typeof pe=="function"){J=pe.call(ce,J,Q);break e}J=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=ge.payload,Q=typeof pe=="function"?pe.call(ce,J,Q):pe,Q==null)break e;J=ue({},J,Q);break e;case 2:ms=!0}}x.callback!==null&&x.lane!==0&&(n.flags|=64,Q=d.effects,Q===null?d.effects=[x]:Q.push(x))}else ce={eventTime:ce,lane:Q,tag:x.tag,payload:x.payload,callback:x.callback,next:null},X===null?(B=X=ce,V=J):X=X.next=ce,w|=Q;if(x=x.next,x===null){if(x=d.shared.pending,x===null)break;Q=x,x=Q.next,Q.next=null,d.lastBaseUpdate=Q,d.shared.pending=null}}while(!0);if(X===null&&(V=J),d.baseState=V,d.firstBaseUpdate=B,d.lastBaseUpdate=X,i=d.shared.interleaved,i!==null){d=i;do w|=d.lane,d=d.next;while(d!==i)}else p===null&&(d.shared.lanes=0);_i|=w,n.lanes=w,n.memoizedState=J}}function Tm(n,i,a){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var c=n[i],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var Da={},ar=ds(Da),Va=ds(Da),Oa=ds(Da);function gi(n){if(n===Da)throw Error(t(174));return n}function Fh(n,i){switch(Ye(Oa,i),Ye(Va,n),Ye(ar,Da),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:Fi(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=Fi(i,n)}tt(ar),Ye(ar,i)}function vo(){tt(ar),tt(Va),tt(Oa)}function Im(n){gi(Oa.current);var i=gi(ar.current),a=Fi(i,n.type);i!==a&&(Ye(Va,n),Ye(ar,a))}function Uh(n){Va.current===n&&(tt(ar),tt(Va))}var st=ds(0);function yu(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Bh=[];function zh(){for(var n=0;n<Bh.length;n++)Bh[n]._workInProgressVersionPrimary=null;Bh.length=0}var _u=H.ReactCurrentDispatcher,$h=H.ReactCurrentBatchConfig,yi=0,it=null,At=null,Pt=null,vu=!1,Ma=!1,ba=0,XE=0;function qt(){throw Error(t(321))}function qh(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!On(n[a],i[a]))return!1;return!0}function Wh(n,i,a,c,d,p){if(yi=p,it=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,_u.current=n===null||n.memoizedState===null?e0:t0,n=a(c,d),Ma){p=0;do{if(Ma=!1,ba=0,25<=p)throw Error(t(301));p+=1,Pt=At=null,i.updateQueue=null,_u.current=n0,n=a(c,d)}while(Ma)}if(_u.current=Tu,i=At!==null&&At.next!==null,yi=0,Pt=At=it=null,vu=!1,i)throw Error(t(300));return n}function Hh(){var n=ba!==0;return ba=0,n}function lr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?it.memoizedState=Pt=n:Pt=Pt.next=n,Pt}function Rn(){if(At===null){var n=it.alternate;n=n!==null?n.memoizedState:null}else n=At.next;var i=Pt===null?it.memoizedState:Pt.next;if(i!==null)Pt=i,At=n;else{if(n===null)throw Error(t(310));At=n,n={memoizedState:At.memoizedState,baseState:At.baseState,baseQueue:At.baseQueue,queue:At.queue,next:null},Pt===null?it.memoizedState=Pt=n:Pt=Pt.next=n}return Pt}function La(n,i){return typeof i=="function"?i(n):i}function Gh(n){var i=Rn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=At,d=c.baseQueue,p=a.pending;if(p!==null){if(d!==null){var w=d.next;d.next=p.next,p.next=w}c.baseQueue=d=p,a.pending=null}if(d!==null){p=d.next,c=c.baseState;var x=w=null,V=null,B=p;do{var X=B.lane;if((yi&X)===X)V!==null&&(V=V.next={lane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),c=B.hasEagerState?B.eagerState:n(c,B.action);else{var J={lane:X,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null};V===null?(x=V=J,w=c):V=V.next=J,it.lanes|=X,_i|=X}B=B.next}while(B!==null&&B!==p);V===null?w=c:V.next=x,On(c,i.memoizedState)||(nn=!0),i.memoizedState=c,i.baseState=w,i.baseQueue=V,a.lastRenderedState=c}if(n=a.interleaved,n!==null){d=n;do p=d.lane,it.lanes|=p,_i|=p,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function Kh(n){var i=Rn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,d=a.pending,p=i.memoizedState;if(d!==null){a.pending=null;var w=d=d.next;do p=n(p,w.action),w=w.next;while(w!==d);On(p,i.memoizedState)||(nn=!0),i.memoizedState=p,i.baseQueue===null&&(i.baseState=p),a.lastRenderedState=p}return[p,c]}function Sm(){}function Am(n,i){var a=it,c=Rn(),d=i(),p=!On(c.memoizedState,d);if(p&&(c.memoizedState=d,nn=!0),c=c.queue,Qh(Pm.bind(null,a,c,n),[n]),c.getSnapshot!==i||p||Pt!==null&&Pt.memoizedState.tag&1){if(a.flags|=2048,ja(9,Cm.bind(null,a,c,d,i),void 0,null),kt===null)throw Error(t(349));(yi&30)!==0||Rm(a,i,d)}return d}function Rm(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=it.updateQueue,i===null?(i={lastEffect:null,stores:null},it.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function Cm(n,i,a,c){i.value=a,i.getSnapshot=c,km(i)&&xm(n)}function Pm(n,i,a){return a(function(){km(i)&&xm(n)})}function km(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!On(n,a)}catch{return!0}}function xm(n){var i=Mr(n,1);i!==null&&Fn(i,n,1,-1)}function Nm(n){var i=lr();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:La,lastRenderedState:n},i.queue=n,n=n.dispatch=ZE.bind(null,it,n),[i.memoizedState,n]}function ja(n,i,a,c){return n={tag:n,create:i,destroy:a,deps:c,next:null},i=it.updateQueue,i===null?(i={lastEffect:null,stores:null},it.updateQueue=i,i.lastEffect=n.next=n):(a=i.lastEffect,a===null?i.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,i.lastEffect=n)),n}function Dm(){return Rn().memoizedState}function wu(n,i,a,c){var d=lr();it.flags|=n,d.memoizedState=ja(1|i,a,void 0,c===void 0?null:c)}function Eu(n,i,a,c){var d=Rn();c=c===void 0?null:c;var p=void 0;if(At!==null){var w=At.memoizedState;if(p=w.destroy,c!==null&&qh(c,w.deps)){d.memoizedState=ja(i,a,p,c);return}}it.flags|=n,d.memoizedState=ja(1|i,a,p,c)}function Vm(n,i){return wu(8390656,8,n,i)}function Qh(n,i){return Eu(2048,8,n,i)}function Om(n,i){return Eu(4,2,n,i)}function Mm(n,i){return Eu(4,4,n,i)}function bm(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Lm(n,i,a){return a=a!=null?a.concat([n]):null,Eu(4,4,bm.bind(null,i,n),a)}function Xh(){}function jm(n,i){var a=Rn();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&qh(i,c[1])?c[0]:(a.memoizedState=[n,i],n)}function Fm(n,i){var a=Rn();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&qh(i,c[1])?c[0]:(n=n(),a.memoizedState=[n,i],n)}function Um(n,i,a){return(yi&21)===0?(n.baseState&&(n.baseState=!1,nn=!0),n.memoizedState=a):(On(a,i)||(a=ca(),it.lanes|=a,_i|=a,n.baseState=!0),i)}function JE(n,i){var a=$e;$e=a!==0&&4>a?a:4,n(!0);var c=$h.transition;$h.transition={};try{n(!1),i()}finally{$e=a,$h.transition=c}}function Bm(){return Rn().memoizedState}function YE(n,i,a){var c=ws(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},zm(n))$m(i,a);else if(a=vm(n,i,a,c),a!==null){var d=Yt();Fn(a,n,c,d),qm(a,i,c)}}function ZE(n,i,a){var c=ws(n),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(zm(n))$m(i,d);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=i.lastRenderedReducer,p!==null))try{var w=i.lastRenderedState,x=p(w,a);if(d.hasEagerState=!0,d.eagerState=x,On(x,w)){var V=i.interleaved;V===null?(d.next=d,Lh(i)):(d.next=V.next,V.next=d),i.interleaved=d;return}}catch{}a=vm(n,i,d,c),a!==null&&(d=Yt(),Fn(a,n,c,d),qm(a,i,c))}}function zm(n){var i=n.alternate;return n===it||i!==null&&i===it}function $m(n,i){Ma=vu=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function qm(n,i,a){if((a&4194240)!==0){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,da(n,a)}}var Tu={readContext:An,useCallback:qt,useContext:qt,useEffect:qt,useImperativeHandle:qt,useInsertionEffect:qt,useLayoutEffect:qt,useMemo:qt,useReducer:qt,useRef:qt,useState:qt,useDebugValue:qt,useDeferredValue:qt,useTransition:qt,useMutableSource:qt,useSyncExternalStore:qt,useId:qt,unstable_isNewReconciler:!1},e0={readContext:An,useCallback:function(n,i){return lr().memoizedState=[n,i===void 0?null:i],n},useContext:An,useEffect:Vm,useImperativeHandle:function(n,i,a){return a=a!=null?a.concat([n]):null,wu(4194308,4,bm.bind(null,i,n),a)},useLayoutEffect:function(n,i){return wu(4194308,4,n,i)},useInsertionEffect:function(n,i){return wu(4,2,n,i)},useMemo:function(n,i){var a=lr();return i=i===void 0?null:i,n=n(),a.memoizedState=[n,i],n},useReducer:function(n,i,a){var c=lr();return i=a!==void 0?a(i):i,c.memoizedState=c.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},c.queue=n,n=n.dispatch=YE.bind(null,it,n),[c.memoizedState,n]},useRef:function(n){var i=lr();return n={current:n},i.memoizedState=n},useState:Nm,useDebugValue:Xh,useDeferredValue:function(n){return lr().memoizedState=n},useTransition:function(){var n=Nm(!1),i=n[0];return n=JE.bind(null,n[1]),lr().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,a){var c=it,d=lr();if(rt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=i(),kt===null)throw Error(t(349));(yi&30)!==0||Rm(c,i,a)}d.memoizedState=a;var p={value:a,getSnapshot:i};return d.queue=p,Vm(Pm.bind(null,c,p,n),[n]),c.flags|=2048,ja(9,Cm.bind(null,c,p,a,i),void 0,null),a},useId:function(){var n=lr(),i=kt.identifierPrefix;if(rt){var a=Or,c=Vr;a=(c&~(1<<32-un(c)-1)).toString(32)+a,i=":"+i+"R"+a,a=ba++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=XE++,i=":"+i+"r"+a.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},t0={readContext:An,useCallback:jm,useContext:An,useEffect:Qh,useImperativeHandle:Lm,useInsertionEffect:Om,useLayoutEffect:Mm,useMemo:Fm,useReducer:Gh,useRef:Dm,useState:function(){return Gh(La)},useDebugValue:Xh,useDeferredValue:function(n){var i=Rn();return Um(i,At.memoizedState,n)},useTransition:function(){var n=Gh(La)[0],i=Rn().memoizedState;return[n,i]},useMutableSource:Sm,useSyncExternalStore:Am,useId:Bm,unstable_isNewReconciler:!1},n0={readContext:An,useCallback:jm,useContext:An,useEffect:Qh,useImperativeHandle:Lm,useInsertionEffect:Om,useLayoutEffect:Mm,useMemo:Fm,useReducer:Kh,useRef:Dm,useState:function(){return Kh(La)},useDebugValue:Xh,useDeferredValue:function(n){var i=Rn();return At===null?i.memoizedState=n:Um(i,At.memoizedState,n)},useTransition:function(){var n=Kh(La)[0],i=Rn().memoizedState;return[n,i]},useMutableSource:Sm,useSyncExternalStore:Am,useId:Bm,unstable_isNewReconciler:!1};function bn(n,i){if(n&&n.defaultProps){i=ue({},i),n=n.defaultProps;for(var a in n)i[a]===void 0&&(i[a]=n[a]);return i}return i}function Jh(n,i,a,c){i=n.memoizedState,a=a(c,i),a=a==null?i:ue({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Iu={isMounted:function(n){return(n=n._reactInternals)?Dn(n)===n:!1},enqueueSetState:function(n,i,a){n=n._reactInternals;var c=Yt(),d=ws(n),p=br(c,d);p.payload=i,a!=null&&(p.callback=a),i=gs(n,p,d),i!==null&&(Fn(i,n,d,c),mu(i,n,d))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var c=Yt(),d=ws(n),p=br(c,d);p.tag=1,p.payload=i,a!=null&&(p.callback=a),i=gs(n,p,d),i!==null&&(Fn(i,n,d,c),mu(i,n,d))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=Yt(),c=ws(n),d=br(a,c);d.tag=2,i!=null&&(d.callback=i),i=gs(n,d,c),i!==null&&(Fn(i,n,c,a),mu(i,n,c))}};function Wm(n,i,a,c,d,p,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,p,w):i.prototype&&i.prototype.isPureReactComponent?!Sa(a,c)||!Sa(d,p):!0}function Hm(n,i,a){var c=!1,d=fs,p=i.contextType;return typeof p=="object"&&p!==null?p=An(p):(d=tn(i)?di:$t.current,c=i.contextTypes,p=(c=c!=null)?ho(n,d):fs),i=new i(a,p),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Iu,n.stateNode=i,i._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=p),i}function Gm(n,i,a,c){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,c),i.state!==n&&Iu.enqueueReplaceState(i,i.state,null)}function Yh(n,i,a,c){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs={},jh(n);var p=i.contextType;typeof p=="object"&&p!==null?d.context=An(p):(p=tn(i)?di:$t.current,d.context=ho(n,p)),d.state=n.memoizedState,p=i.getDerivedStateFromProps,typeof p=="function"&&(Jh(n,i,p,a),d.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(i=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),i!==d.state&&Iu.enqueueReplaceState(d,d.state,null),gu(n,a,d,c),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function wo(n,i){try{var a="",c=i;do a+=Me(c),c=c.return;while(c);var d=a}catch(p){d=`
Error generating stack: `+p.message+`
`+p.stack}return{value:n,source:i,stack:d,digest:null}}function Zh(n,i,a){return{value:n,source:null,stack:a??null,digest:i??null}}function ed(n,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var r0=typeof WeakMap=="function"?WeakMap:Map;function Km(n,i,a){a=br(-1,a),a.tag=3,a.payload={element:null};var c=i.value;return a.callback=function(){xu||(xu=!0,md=c),ed(n,i)},a}function Qm(n,i,a){a=br(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=i.value;a.payload=function(){return c(d)},a.callback=function(){ed(n,i)}}var p=n.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(a.callback=function(){ed(n,i),typeof c!="function"&&(_s===null?_s=new Set([this]):_s.add(this));var w=i.stack;this.componentDidCatch(i.value,{componentStack:w!==null?w:""})}),a}function Xm(n,i,a){var c=n.pingCache;if(c===null){c=n.pingCache=new r0;var d=new Set;c.set(i,d)}else d=c.get(i),d===void 0&&(d=new Set,c.set(i,d));d.has(a)||(d.add(a),n=y0.bind(null,n,i,a),i.then(n,n))}function Jm(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function Ym(n,i,a,c,d){return(n.mode&1)===0?(n===i?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=br(-1,1),i.tag=2,gs(a,i,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=d,n)}var s0=H.ReactCurrentOwner,nn=!1;function Jt(n,i,a,c){i.child=n===null?_m(i,null,a,c):go(i,n.child,a,c)}function Zm(n,i,a,c,d){a=a.render;var p=i.ref;return _o(i,d),c=Wh(n,i,a,c,p,d),a=Hh(),n!==null&&!nn?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~d,Lr(n,i,d)):(rt&&a&&Ph(i),i.flags|=1,Jt(n,i,c,d),i.child)}function eg(n,i,a,c,d){if(n===null){var p=a.type;return typeof p=="function"&&!Td(p)&&p.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=p,tg(n,i,p,c,d)):(n=bu(a.type,null,c,i,i.mode,d),n.ref=i.ref,n.return=i,i.child=n)}if(p=n.child,(n.lanes&d)===0){var w=p.memoizedProps;if(a=a.compare,a=a!==null?a:Sa,a(w,c)&&n.ref===i.ref)return Lr(n,i,d)}return i.flags|=1,n=Ts(p,c),n.ref=i.ref,n.return=i,i.child=n}function tg(n,i,a,c,d){if(n!==null){var p=n.memoizedProps;if(Sa(p,c)&&n.ref===i.ref)if(nn=!1,i.pendingProps=c=p,(n.lanes&d)!==0)(n.flags&131072)!==0&&(nn=!0);else return i.lanes=n.lanes,Lr(n,i,d)}return td(n,i,a,c,d)}function ng(n,i,a){var c=i.pendingProps,d=c.children,p=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ye(To,gn),gn|=a;else{if((a&1073741824)===0)return n=p!==null?p.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,Ye(To,gn),gn|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=p!==null?p.baseLanes:a,Ye(To,gn),gn|=c}else p!==null?(c=p.baseLanes|a,i.memoizedState=null):c=a,Ye(To,gn),gn|=c;return Jt(n,i,d,a),i.child}function rg(n,i){var a=i.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function td(n,i,a,c,d){var p=tn(a)?di:$t.current;return p=ho(i,p),_o(i,d),a=Wh(n,i,a,c,p,d),c=Hh(),n!==null&&!nn?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~d,Lr(n,i,d)):(rt&&c&&Ph(i),i.flags|=1,Jt(n,i,a,d),i.child)}function sg(n,i,a,c,d){if(tn(a)){var p=!0;au(i)}else p=!1;if(_o(i,d),i.stateNode===null)Au(n,i),Hm(i,a,c),Yh(i,a,c,d),c=!0;else if(n===null){var w=i.stateNode,x=i.memoizedProps;w.props=x;var V=w.context,B=a.contextType;typeof B=="object"&&B!==null?B=An(B):(B=tn(a)?di:$t.current,B=ho(i,B));var X=a.getDerivedStateFromProps,J=typeof X=="function"||typeof w.getSnapshotBeforeUpdate=="function";J||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(x!==c||V!==B)&&Gm(i,w,c,B),ms=!1;var Q=i.memoizedState;w.state=Q,gu(i,c,w,d),V=i.memoizedState,x!==c||Q!==V||en.current||ms?(typeof X=="function"&&(Jh(i,a,X,c),V=i.memoizedState),(x=ms||Wm(i,a,x,c,Q,V,B))?(J||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(i.flags|=4194308)):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=V),w.props=c,w.state=V,w.context=B,c=x):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{w=i.stateNode,wm(n,i),x=i.memoizedProps,B=i.type===i.elementType?x:bn(i.type,x),w.props=B,J=i.pendingProps,Q=w.context,V=a.contextType,typeof V=="object"&&V!==null?V=An(V):(V=tn(a)?di:$t.current,V=ho(i,V));var ce=a.getDerivedStateFromProps;(X=typeof ce=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(x!==J||Q!==V)&&Gm(i,w,c,V),ms=!1,Q=i.memoizedState,w.state=Q,gu(i,c,w,d);var pe=i.memoizedState;x!==J||Q!==pe||en.current||ms?(typeof ce=="function"&&(Jh(i,a,ce,c),pe=i.memoizedState),(B=ms||Wm(i,a,B,c,Q,pe,V)||!1)?(X||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(c,pe,V),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(c,pe,V)),typeof w.componentDidUpdate=="function"&&(i.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof w.componentDidUpdate!="function"||x===n.memoizedProps&&Q===n.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||x===n.memoizedProps&&Q===n.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=pe),w.props=c,w.state=pe,w.context=V,c=B):(typeof w.componentDidUpdate!="function"||x===n.memoizedProps&&Q===n.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||x===n.memoizedProps&&Q===n.memoizedState||(i.flags|=1024),c=!1)}return nd(n,i,a,c,p,d)}function nd(n,i,a,c,d,p){rg(n,i);var w=(i.flags&128)!==0;if(!c&&!w)return d&&um(i,a,!1),Lr(n,i,p);c=i.stateNode,s0.current=i;var x=w&&typeof a.getDerivedStateFromError!="function"?null:c.render();return i.flags|=1,n!==null&&w?(i.child=go(i,n.child,null,p),i.child=go(i,null,x,p)):Jt(n,i,x,p),i.memoizedState=c.state,d&&um(i,a,!0),i.child}function ig(n){var i=n.stateNode;i.pendingContext?am(n,i.pendingContext,i.pendingContext!==i.context):i.context&&am(n,i.context,!1),Fh(n,i.containerInfo)}function og(n,i,a,c,d){return mo(),Dh(d),i.flags|=256,Jt(n,i,a,c),i.child}var rd={dehydrated:null,treeContext:null,retryLane:0};function sd(n){return{baseLanes:n,cachePool:null,transitions:null}}function ag(n,i,a){var c=i.pendingProps,d=st.current,p=!1,w=(i.flags&128)!==0,x;if((x=w)||(x=n!==null&&n.memoizedState===null?!1:(d&2)!==0),x?(p=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),Ye(st,d&1),n===null)return Nh(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((i.mode&1)===0?i.lanes=1:n.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(w=c.children,n=c.fallback,p?(c=i.mode,p=i.child,w={mode:"hidden",children:w},(c&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=w):p=Lu(w,c,0,null),n=Ti(n,c,a,null),p.return=i,n.return=i,p.sibling=n,i.child=p,i.child.memoizedState=sd(a),i.memoizedState=rd,n):id(i,w));if(d=n.memoizedState,d!==null&&(x=d.dehydrated,x!==null))return i0(n,i,w,c,x,d,a);if(p){p=c.fallback,w=i.mode,d=n.child,x=d.sibling;var V={mode:"hidden",children:c.children};return(w&1)===0&&i.child!==d?(c=i.child,c.childLanes=0,c.pendingProps=V,i.deletions=null):(c=Ts(d,V),c.subtreeFlags=d.subtreeFlags&14680064),x!==null?p=Ts(x,p):(p=Ti(p,w,a,null),p.flags|=2),p.return=i,c.return=i,c.sibling=p,i.child=c,c=p,p=i.child,w=n.child.memoizedState,w=w===null?sd(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},p.memoizedState=w,p.childLanes=n.childLanes&~a,i.memoizedState=rd,c}return p=n.child,n=p.sibling,c=Ts(p,{mode:"visible",children:c.children}),(i.mode&1)===0&&(c.lanes=a),c.return=i,c.sibling=null,n!==null&&(a=i.deletions,a===null?(i.deletions=[n],i.flags|=16):a.push(n)),i.child=c,i.memoizedState=null,c}function id(n,i){return i=Lu({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function Su(n,i,a,c){return c!==null&&Dh(c),go(i,n.child,null,a),n=id(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function i0(n,i,a,c,d,p,w){if(a)return i.flags&256?(i.flags&=-257,c=Zh(Error(t(422))),Su(n,i,w,c)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(p=c.fallback,d=i.mode,c=Lu({mode:"visible",children:c.children},d,0,null),p=Ti(p,d,w,null),p.flags|=2,c.return=i,p.return=i,c.sibling=p,i.child=c,(i.mode&1)!==0&&go(i,n.child,null,w),i.child.memoizedState=sd(w),i.memoizedState=rd,p);if((i.mode&1)===0)return Su(n,i,w,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var x=c.dgst;return c=x,p=Error(t(419)),c=Zh(p,c,void 0),Su(n,i,w,c)}if(x=(w&n.childLanes)!==0,nn||x){if(c=kt,c!==null){switch(w&-w){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|w))!==0?0:d,d!==0&&d!==p.retryLane&&(p.retryLane=d,Mr(n,d),Fn(c,n,d,-1))}return Ed(),c=Zh(Error(t(421))),Su(n,i,w,c)}return d.data==="$?"?(i.flags|=128,i.child=n.child,i=_0.bind(null,n),d._reactRetry=i,null):(n=p.treeContext,mn=hs(d.nextSibling),pn=i,rt=!0,Mn=null,n!==null&&(In[Sn++]=Vr,In[Sn++]=Or,In[Sn++]=fi,Vr=n.id,Or=n.overflow,fi=i),i=id(i,c.children),i.flags|=4096,i)}function lg(n,i,a){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i),bh(n.return,i,a)}function od(n,i,a,c,d){var p=n.memoizedState;p===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(p.isBackwards=i,p.rendering=null,p.renderingStartTime=0,p.last=c,p.tail=a,p.tailMode=d)}function ug(n,i,a){var c=i.pendingProps,d=c.revealOrder,p=c.tail;if(Jt(n,i,c.children,a),c=st.current,(c&2)!==0)c=c&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&lg(n,a,i);else if(n.tag===19)lg(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(Ye(st,c),(i.mode&1)===0)i.memoizedState=null;else switch(d){case"forwards":for(a=i.child,d=null;a!==null;)n=a.alternate,n!==null&&yu(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=i.child,i.child=null):(d=a.sibling,a.sibling=null),od(i,!1,d,a,p);break;case"backwards":for(a=null,d=i.child,i.child=null;d!==null;){if(n=d.alternate,n!==null&&yu(n)===null){i.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}od(i,!0,a,null,p);break;case"together":od(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Au(n,i){(i.mode&1)===0&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function Lr(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),_i|=i.lanes,(a&i.childLanes)===0)return null;if(n!==null&&i.child!==n.child)throw Error(t(153));if(i.child!==null){for(n=i.child,a=Ts(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=Ts(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function o0(n,i,a){switch(i.tag){case 3:ig(i),mo();break;case 5:Im(i);break;case 1:tn(i.type)&&au(i);break;case 4:Fh(i,i.stateNode.containerInfo);break;case 10:var c=i.type._context,d=i.memoizedProps.value;Ye(fu,c._currentValue),c._currentValue=d;break;case 13:if(c=i.memoizedState,c!==null)return c.dehydrated!==null?(Ye(st,st.current&1),i.flags|=128,null):(a&i.child.childLanes)!==0?ag(n,i,a):(Ye(st,st.current&1),n=Lr(n,i,a),n!==null?n.sibling:null);Ye(st,st.current&1);break;case 19:if(c=(a&i.childLanes)!==0,(n.flags&128)!==0){if(c)return ug(n,i,a);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Ye(st,st.current),c)break;return null;case 22:case 23:return i.lanes=0,ng(n,i,a)}return Lr(n,i,a)}var cg,ad,hg,dg;cg=function(n,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},ad=function(){},hg=function(n,i,a,c){var d=n.memoizedProps;if(d!==c){n=i.stateNode,gi(ar.current);var p=null;switch(a){case"input":d=Li(n,d),c=Li(n,c),p=[];break;case"select":d=ue({},d,{value:void 0}),c=ue({},c,{value:void 0}),p=[];break;case"textarea":d=Zo(n,d),c=Zo(n,c),p=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=su)}Nn(a,c);var w;a=null;for(B in d)if(!c.hasOwnProperty(B)&&d.hasOwnProperty(B)&&d[B]!=null)if(B==="style"){var x=d[B];for(w in x)x.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else B!=="dangerouslySetInnerHTML"&&B!=="children"&&B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&B!=="autoFocus"&&(o.hasOwnProperty(B)?p||(p=[]):(p=p||[]).push(B,null));for(B in c){var V=c[B];if(x=d?.[B],c.hasOwnProperty(B)&&V!==x&&(V!=null||x!=null))if(B==="style")if(x){for(w in x)!x.hasOwnProperty(w)||V&&V.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in V)V.hasOwnProperty(w)&&x[w]!==V[w]&&(a||(a={}),a[w]=V[w])}else a||(p||(p=[]),p.push(B,a)),a=V;else B==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,x=x?x.__html:void 0,V!=null&&x!==V&&(p=p||[]).push(B,V)):B==="children"?typeof V!="string"&&typeof V!="number"||(p=p||[]).push(B,""+V):B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&(o.hasOwnProperty(B)?(V!=null&&B==="onScroll"&&et("scroll",n),p||x===V||(p=[])):(p=p||[]).push(B,V))}a&&(p=p||[]).push("style",a);var B=p;(i.updateQueue=B)&&(i.flags|=4)}},dg=function(n,i,a,c){a!==c&&(i.flags|=4)};function Fa(n,i){if(!rt)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Wt(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(i)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=a,i}function a0(n,i,a){var c=i.pendingProps;switch(kh(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wt(i),null;case 1:return tn(i.type)&&ou(),Wt(i),null;case 3:return c=i.stateNode,vo(),tt(en),tt($t),zh(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(hu(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Mn!==null&&(_d(Mn),Mn=null))),ad(n,i),Wt(i),null;case 5:Uh(i);var d=gi(Oa.current);if(a=i.type,n!==null&&i.stateNode!=null)hg(n,i,a,c,d),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!c){if(i.stateNode===null)throw Error(t(166));return Wt(i),null}if(n=gi(ar.current),hu(i)){c=i.stateNode,a=i.type;var p=i.memoizedProps;switch(c[or]=i,c[ka]=p,n=(i.mode&1)!==0,a){case"dialog":et("cancel",c),et("close",c);break;case"iframe":case"object":case"embed":et("load",c);break;case"video":case"audio":for(d=0;d<Ra.length;d++)et(Ra[d],c);break;case"source":et("error",c);break;case"img":case"image":case"link":et("error",c),et("load",c);break;case"details":et("toggle",c);break;case"input":kl(c,p),et("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!p.multiple},et("invalid",c);break;case"textarea":ea(c,p),et("invalid",c)}Nn(a,p),d=null;for(var w in p)if(p.hasOwnProperty(w)){var x=p[w];w==="children"?typeof x=="string"?c.textContent!==x&&(p.suppressHydrationWarning!==!0&&ru(c.textContent,x,n),d=["children",x]):typeof x=="number"&&c.textContent!==""+x&&(p.suppressHydrationWarning!==!0&&ru(c.textContent,x,n),d=["children",""+x]):o.hasOwnProperty(w)&&x!=null&&w==="onScroll"&&et("scroll",c)}switch(a){case"input":Vt(c),Yo(c,p,!0);break;case"textarea":Vt(c),Qr(c);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(c.onclick=su)}c=d,i.updateQueue=c,c!==null&&(i.flags|=4)}else{w=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=ta(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=w.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=w.createElement(a,{is:c.is}):(n=w.createElement(a),a==="select"&&(w=n,c.multiple?w.multiple=!0:c.size&&(w.size=c.size))):n=w.createElementNS(n,a),n[or]=i,n[ka]=c,cg(n,i,!1,!1),i.stateNode=n;e:{switch(w=Bi(a,c),a){case"dialog":et("cancel",n),et("close",n),d=c;break;case"iframe":case"object":case"embed":et("load",n),d=c;break;case"video":case"audio":for(d=0;d<Ra.length;d++)et(Ra[d],n);d=c;break;case"source":et("error",n),d=c;break;case"img":case"image":case"link":et("error",n),et("load",n),d=c;break;case"details":et("toggle",n),d=c;break;case"input":kl(n,c),d=Li(n,c),et("invalid",n);break;case"option":d=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},d=ue({},c,{value:void 0}),et("invalid",n);break;case"textarea":ea(n,c),d=Zo(n,c),et("invalid",n);break;default:d=c}Nn(a,d),x=d;for(p in x)if(x.hasOwnProperty(p)){var V=x[p];p==="style"?Ui(n,V):p==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,V!=null&&Nl(n,V)):p==="children"?typeof V=="string"?(a!=="textarea"||V!=="")&&Js(n,V):typeof V=="number"&&Js(n,""+V):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(o.hasOwnProperty(p)?V!=null&&p==="onScroll"&&et("scroll",n):V!=null&&te(n,p,V,w))}switch(a){case"input":Vt(n),Yo(n,c,!1);break;case"textarea":Vt(n),Qr(n);break;case"option":c.value!=null&&n.setAttribute("value",""+De(c.value));break;case"select":n.multiple=!!c.multiple,p=c.value,p!=null?xn(n,!!c.multiple,p,!1):c.defaultValue!=null&&xn(n,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=su)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Wt(i),null;case 6:if(n&&i.stateNode!=null)dg(n,i,n.memoizedProps,c);else{if(typeof c!="string"&&i.stateNode===null)throw Error(t(166));if(a=gi(Oa.current),gi(ar.current),hu(i)){if(c=i.stateNode,a=i.memoizedProps,c[or]=i,(p=c.nodeValue!==a)&&(n=pn,n!==null))switch(n.tag){case 3:ru(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&ru(c.nodeValue,a,(n.mode&1)!==0)}p&&(i.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[or]=i,i.stateNode=c}return Wt(i),null;case 13:if(tt(st),c=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(rt&&mn!==null&&(i.mode&1)!==0&&(i.flags&128)===0)mm(),mo(),i.flags|=98560,p=!1;else if(p=hu(i),c!==null&&c.dehydrated!==null){if(n===null){if(!p)throw Error(t(318));if(p=i.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(t(317));p[or]=i}else mo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Wt(i),p=!1}else Mn!==null&&(_d(Mn),Mn=null),p=!0;if(!p)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=a,i):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(i.child.flags|=8192,(i.mode&1)!==0&&(n===null||(st.current&1)!==0?Rt===0&&(Rt=3):Ed())),i.updateQueue!==null&&(i.flags|=4),Wt(i),null);case 4:return vo(),ad(n,i),n===null&&Ca(i.stateNode.containerInfo),Wt(i),null;case 10:return Mh(i.type._context),Wt(i),null;case 17:return tn(i.type)&&ou(),Wt(i),null;case 19:if(tt(st),p=i.memoizedState,p===null)return Wt(i),null;if(c=(i.flags&128)!==0,w=p.rendering,w===null)if(c)Fa(p,!1);else{if(Rt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(w=yu(n),w!==null){for(i.flags|=128,Fa(p,!1),c=w.updateQueue,c!==null&&(i.updateQueue=c,i.flags|=4),i.subtreeFlags=0,c=a,a=i.child;a!==null;)p=a,n=c,p.flags&=14680066,w=p.alternate,w===null?(p.childLanes=0,p.lanes=n,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=w.childLanes,p.lanes=w.lanes,p.child=w.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=w.memoizedProps,p.memoizedState=w.memoizedState,p.updateQueue=w.updateQueue,p.type=w.type,n=w.dependencies,p.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Ye(st,st.current&1|2),i.child}n=n.sibling}p.tail!==null&&Ze()>Io&&(i.flags|=128,c=!0,Fa(p,!1),i.lanes=4194304)}else{if(!c)if(n=yu(w),n!==null){if(i.flags|=128,c=!0,a=n.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),Fa(p,!0),p.tail===null&&p.tailMode==="hidden"&&!w.alternate&&!rt)return Wt(i),null}else 2*Ze()-p.renderingStartTime>Io&&a!==1073741824&&(i.flags|=128,c=!0,Fa(p,!1),i.lanes=4194304);p.isBackwards?(w.sibling=i.child,i.child=w):(a=p.last,a!==null?a.sibling=w:i.child=w,p.last=w)}return p.tail!==null?(i=p.tail,p.rendering=i,p.tail=i.sibling,p.renderingStartTime=Ze(),i.sibling=null,a=st.current,Ye(st,c?a&1|2:a&1),i):(Wt(i),null);case 22:case 23:return wd(),c=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(i.flags|=8192),c&&(i.mode&1)!==0?(gn&1073741824)!==0&&(Wt(i),i.subtreeFlags&6&&(i.flags|=8192)):Wt(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function l0(n,i){switch(kh(i),i.tag){case 1:return tn(i.type)&&ou(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return vo(),tt(en),tt($t),zh(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 5:return Uh(i),null;case 13:if(tt(st),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(t(340));mo()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return tt(st),null;case 4:return vo(),null;case 10:return Mh(i.type._context),null;case 22:case 23:return wd(),null;case 24:return null;default:return null}}var Ru=!1,Ht=!1,u0=typeof WeakSet=="function"?WeakSet:Set,de=null;function Eo(n,i){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){lt(n,i,c)}else a.current=null}function ld(n,i,a){try{a()}catch(c){lt(n,i,c)}}var fg=!1;function c0(n,i){if(wh=Pr,n=Wp(),dh(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break e}var w=0,x=-1,V=-1,B=0,X=0,J=n,Q=null;t:for(;;){for(var ce;J!==a||d!==0&&J.nodeType!==3||(x=w+d),J!==p||c!==0&&J.nodeType!==3||(V=w+c),J.nodeType===3&&(w+=J.nodeValue.length),(ce=J.firstChild)!==null;)Q=J,J=ce;for(;;){if(J===n)break t;if(Q===a&&++B===d&&(x=w),Q===p&&++X===c&&(V=w),(ce=J.nextSibling)!==null)break;J=Q,Q=J.parentNode}J=ce}a=x===-1||V===-1?null:{start:x,end:V}}else a=null}a=a||{start:0,end:0}}else a=null;for(Eh={focusedElem:n,selectionRange:a},Pr=!1,de=i;de!==null;)if(i=de,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,de=n;else for(;de!==null;){i=de;try{var pe=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(pe!==null){var ge=pe.memoizedProps,dt=pe.memoizedState,j=i.stateNode,M=j.getSnapshotBeforeUpdate(i.elementType===i.type?ge:bn(i.type,ge),dt);j.__reactInternalSnapshotBeforeUpdate=M}break;case 3:var U=i.stateNode.containerInfo;U.nodeType===1?U.textContent="":U.nodeType===9&&U.documentElement&&U.removeChild(U.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ee){lt(i,i.return,ee)}if(n=i.sibling,n!==null){n.return=i.return,de=n;break}de=i.return}return pe=fg,fg=!1,pe}function Ua(n,i,a){var c=i.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&n)===n){var p=d.destroy;d.destroy=void 0,p!==void 0&&ld(i,a,p)}d=d.next}while(d!==c)}}function Cu(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==i)}}function ud(n){var i=n.ref;if(i!==null){var a=n.stateNode;n.tag,n=a,typeof i=="function"?i(n):i.current=n}}function pg(n){var i=n.alternate;i!==null&&(n.alternate=null,pg(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[or],delete i[ka],delete i[Ah],delete i[HE],delete i[GE])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function mg(n){return n.tag===5||n.tag===3||n.tag===4}function gg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||mg(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function cd(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(n,i):a.insertBefore(n,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(n,a)):(i=a,i.appendChild(n)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=su));else if(c!==4&&(n=n.child,n!==null))for(cd(n,i,a),n=n.sibling;n!==null;)cd(n,i,a),n=n.sibling}function hd(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(hd(n,i,a),n=n.sibling;n!==null;)hd(n,i,a),n=n.sibling}var bt=null,Ln=!1;function ys(n,i,a){for(a=a.child;a!==null;)yg(n,i,a),a=a.sibling}function yg(n,i,a){if(ln&&typeof ln.onCommitFiberUnmount=="function")try{ln.onCommitFiberUnmount(ni,a)}catch{}switch(a.tag){case 5:Ht||Eo(a,i);case 6:var c=bt,d=Ln;bt=null,ys(n,i,a),bt=c,Ln=d,bt!==null&&(Ln?(n=bt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):bt.removeChild(a.stateNode));break;case 18:bt!==null&&(Ln?(n=bt,a=a.stateNode,n.nodeType===8?Sh(n.parentNode,a):n.nodeType===1&&Sh(n,a),as(n)):Sh(bt,a.stateNode));break;case 4:c=bt,d=Ln,bt=a.stateNode.containerInfo,Ln=!0,ys(n,i,a),bt=c,Ln=d;break;case 0:case 11:case 14:case 15:if(!Ht&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var p=d,w=p.destroy;p=p.tag,w!==void 0&&((p&2)!==0||(p&4)!==0)&&ld(a,i,w),d=d.next}while(d!==c)}ys(n,i,a);break;case 1:if(!Ht&&(Eo(a,i),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(x){lt(a,i,x)}ys(n,i,a);break;case 21:ys(n,i,a);break;case 22:a.mode&1?(Ht=(c=Ht)||a.memoizedState!==null,ys(n,i,a),Ht=c):ys(n,i,a);break;default:ys(n,i,a)}}function _g(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new u0),i.forEach(function(c){var d=v0.bind(null,n,c);a.has(c)||(a.add(c),c.then(d,d))})}}function jn(n,i){var a=i.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var p=n,w=i,x=w;e:for(;x!==null;){switch(x.tag){case 5:bt=x.stateNode,Ln=!1;break e;case 3:bt=x.stateNode.containerInfo,Ln=!0;break e;case 4:bt=x.stateNode.containerInfo,Ln=!0;break e}x=x.return}if(bt===null)throw Error(t(160));yg(p,w,d),bt=null,Ln=!1;var V=d.alternate;V!==null&&(V.return=null),d.return=null}catch(B){lt(d,i,B)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)vg(i,n),i=i.sibling}function vg(n,i){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(jn(i,n),ur(n),c&4){try{Ua(3,n,n.return),Cu(3,n)}catch(ge){lt(n,n.return,ge)}try{Ua(5,n,n.return)}catch(ge){lt(n,n.return,ge)}}break;case 1:jn(i,n),ur(n),c&512&&a!==null&&Eo(a,a.return);break;case 5:if(jn(i,n),ur(n),c&512&&a!==null&&Eo(a,a.return),n.flags&32){var d=n.stateNode;try{Js(d,"")}catch(ge){lt(n,n.return,ge)}}if(c&4&&(d=n.stateNode,d!=null)){var p=n.memoizedProps,w=a!==null?a.memoizedProps:p,x=n.type,V=n.updateQueue;if(n.updateQueue=null,V!==null)try{x==="input"&&p.type==="radio"&&p.name!=null&&ji(d,p),Bi(x,w);var B=Bi(x,p);for(w=0;w<V.length;w+=2){var X=V[w],J=V[w+1];X==="style"?Ui(d,J):X==="dangerouslySetInnerHTML"?Nl(d,J):X==="children"?Js(d,J):te(d,X,J,B)}switch(x){case"input":Xs(d,p);break;case"textarea":xl(d,p);break;case"select":var Q=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!p.multiple;var ce=p.value;ce!=null?xn(d,!!p.multiple,ce,!1):Q!==!!p.multiple&&(p.defaultValue!=null?xn(d,!!p.multiple,p.defaultValue,!0):xn(d,!!p.multiple,p.multiple?[]:"",!1))}d[ka]=p}catch(ge){lt(n,n.return,ge)}}break;case 6:if(jn(i,n),ur(n),c&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,p=n.memoizedProps;try{d.nodeValue=p}catch(ge){lt(n,n.return,ge)}}break;case 3:if(jn(i,n),ur(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{as(i.containerInfo)}catch(ge){lt(n,n.return,ge)}break;case 4:jn(i,n),ur(n);break;case 13:jn(i,n),ur(n),d=n.child,d.flags&8192&&(p=d.memoizedState!==null,d.stateNode.isHidden=p,!p||d.alternate!==null&&d.alternate.memoizedState!==null||(pd=Ze())),c&4&&_g(n);break;case 22:if(X=a!==null&&a.memoizedState!==null,n.mode&1?(Ht=(B=Ht)||X,jn(i,n),Ht=B):jn(i,n),ur(n),c&8192){if(B=n.memoizedState!==null,(n.stateNode.isHidden=B)&&!X&&(n.mode&1)!==0)for(de=n,X=n.child;X!==null;){for(J=de=X;de!==null;){switch(Q=de,ce=Q.child,Q.tag){case 0:case 11:case 14:case 15:Ua(4,Q,Q.return);break;case 1:Eo(Q,Q.return);var pe=Q.stateNode;if(typeof pe.componentWillUnmount=="function"){c=Q,a=Q.return;try{i=c,pe.props=i.memoizedProps,pe.state=i.memoizedState,pe.componentWillUnmount()}catch(ge){lt(c,a,ge)}}break;case 5:Eo(Q,Q.return);break;case 22:if(Q.memoizedState!==null){Tg(J);continue}}ce!==null?(ce.return=Q,de=ce):Tg(J)}X=X.sibling}e:for(X=null,J=n;;){if(J.tag===5){if(X===null){X=J;try{d=J.stateNode,B?(p=d.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(x=J.stateNode,V=J.memoizedProps.style,w=V!=null&&V.hasOwnProperty("display")?V.display:null,x.style.display=Yr("display",w))}catch(ge){lt(n,n.return,ge)}}}else if(J.tag===6){if(X===null)try{J.stateNode.nodeValue=B?"":J.memoizedProps}catch(ge){lt(n,n.return,ge)}}else if((J.tag!==22&&J.tag!==23||J.memoizedState===null||J===n)&&J.child!==null){J.child.return=J,J=J.child;continue}if(J===n)break e;for(;J.sibling===null;){if(J.return===null||J.return===n)break e;X===J&&(X=null),J=J.return}X===J&&(X=null),J.sibling.return=J.return,J=J.sibling}}break;case 19:jn(i,n),ur(n),c&4&&_g(n);break;case 21:break;default:jn(i,n),ur(n)}}function ur(n){var i=n.flags;if(i&2){try{e:{for(var a=n.return;a!==null;){if(mg(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(Js(d,""),c.flags&=-33);var p=gg(n);hd(n,p,d);break;case 3:case 4:var w=c.stateNode.containerInfo,x=gg(n);cd(n,x,w);break;default:throw Error(t(161))}}catch(V){lt(n,n.return,V)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function h0(n,i,a){de=n,wg(n)}function wg(n,i,a){for(var c=(n.mode&1)!==0;de!==null;){var d=de,p=d.child;if(d.tag===22&&c){var w=d.memoizedState!==null||Ru;if(!w){var x=d.alternate,V=x!==null&&x.memoizedState!==null||Ht;x=Ru;var B=Ht;if(Ru=w,(Ht=V)&&!B)for(de=d;de!==null;)w=de,V=w.child,w.tag===22&&w.memoizedState!==null?Ig(d):V!==null?(V.return=w,de=V):Ig(d);for(;p!==null;)de=p,wg(p),p=p.sibling;de=d,Ru=x,Ht=B}Eg(n)}else(d.subtreeFlags&8772)!==0&&p!==null?(p.return=d,de=p):Eg(n)}}function Eg(n){for(;de!==null;){var i=de;if((i.flags&8772)!==0){var a=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:Ht||Cu(5,i);break;case 1:var c=i.stateNode;if(i.flags&4&&!Ht)if(a===null)c.componentDidMount();else{var d=i.elementType===i.type?a.memoizedProps:bn(i.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var p=i.updateQueue;p!==null&&Tm(i,p,c);break;case 3:var w=i.updateQueue;if(w!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}Tm(i,w,a)}break;case 5:var x=i.stateNode;if(a===null&&i.flags&4){a=x;var V=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":V.autoFocus&&a.focus();break;case"img":V.src&&(a.src=V.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var B=i.alternate;if(B!==null){var X=B.memoizedState;if(X!==null){var J=X.dehydrated;J!==null&&as(J)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ht||i.flags&512&&ud(i)}catch(Q){lt(i,i.return,Q)}}if(i===n){de=null;break}if(a=i.sibling,a!==null){a.return=i.return,de=a;break}de=i.return}}function Tg(n){for(;de!==null;){var i=de;if(i===n){de=null;break}var a=i.sibling;if(a!==null){a.return=i.return,de=a;break}de=i.return}}function Ig(n){for(;de!==null;){var i=de;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{Cu(4,i)}catch(V){lt(i,a,V)}break;case 1:var c=i.stateNode;if(typeof c.componentDidMount=="function"){var d=i.return;try{c.componentDidMount()}catch(V){lt(i,d,V)}}var p=i.return;try{ud(i)}catch(V){lt(i,p,V)}break;case 5:var w=i.return;try{ud(i)}catch(V){lt(i,w,V)}}}catch(V){lt(i,i.return,V)}if(i===n){de=null;break}var x=i.sibling;if(x!==null){x.return=i.return,de=x;break}de=i.return}}var d0=Math.ceil,Pu=H.ReactCurrentDispatcher,dd=H.ReactCurrentOwner,Cn=H.ReactCurrentBatchConfig,He=0,kt=null,_t=null,Lt=0,gn=0,To=ds(0),Rt=0,Ba=null,_i=0,ku=0,fd=0,za=null,rn=null,pd=0,Io=1/0,jr=null,xu=!1,md=null,_s=null,Nu=!1,vs=null,Du=0,$a=0,gd=null,Vu=-1,Ou=0;function Yt(){return(He&6)!==0?Ze():Vu!==-1?Vu:Vu=Ze()}function ws(n){return(n.mode&1)===0?1:(He&2)!==0&&Lt!==0?Lt&-Lt:QE.transition!==null?(Ou===0&&(Ou=ca()),Ou):(n=$e,n!==0||(n=window.event,n=n===void 0?16:Ji(n.type)),n)}function Fn(n,i,a,c){if(50<$a)throw $a=0,gd=null,Error(t(185));oi(n,a,c),((He&2)===0||n!==kt)&&(n===kt&&((He&2)===0&&(ku|=a),Rt===4&&Es(n,Lt)),sn(n,c),a===1&&He===0&&(i.mode&1)===0&&(Io=Ze()+500,lu&&ps()))}function sn(n,i){var a=n.callbackNode;ii(n,i);var c=Ar(n,n===kt?Lt:0);if(c===0)a!==null&&qi(a),n.callbackNode=null,n.callbackPriority=0;else if(i=c&-c,n.callbackPriority!==i){if(a!=null&&qi(a),i===1)n.tag===0?KE(Ag.bind(null,n)):cm(Ag.bind(null,n)),qE(function(){(He&6)===0&&ps()}),a=null;else{switch(Xn(c)){case 1:a=Wi;break;case 4:a=aa;break;case 16:a=ti;break;case 536870912:a=Hi;break;default:a=ti}a=Vg(a,Sg.bind(null,n))}n.callbackPriority=i,n.callbackNode=a}}function Sg(n,i){if(Vu=-1,Ou=0,(He&6)!==0)throw Error(t(327));var a=n.callbackNode;if(So()&&n.callbackNode!==a)return null;var c=Ar(n,n===kt?Lt:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||i)i=Mu(n,c);else{i=c;var d=He;He|=2;var p=Cg();(kt!==n||Lt!==i)&&(jr=null,Io=Ze()+500,wi(n,i));do try{m0();break}catch(x){Rg(n,x)}while(!0);Oh(),Pu.current=p,He=d,_t!==null?i=0:(kt=null,Lt=0,i=Rt)}if(i!==0){if(i===2&&(d=ua(n),d!==0&&(c=d,i=yd(n,d))),i===1)throw a=Ba,wi(n,0),Es(n,c),sn(n,Ze()),a;if(i===6)Es(n,c);else{if(d=n.current.alternate,(c&30)===0&&!f0(d)&&(i=Mu(n,c),i===2&&(p=ua(n),p!==0&&(c=p,i=yd(n,p))),i===1))throw a=Ba,wi(n,0),Es(n,c),sn(n,Ze()),a;switch(n.finishedWork=d,n.finishedLanes=c,i){case 0:case 1:throw Error(t(345));case 2:Ei(n,rn,jr);break;case 3:if(Es(n,c),(c&130023424)===c&&(i=pd+500-Ze(),10<i)){if(Ar(n,0)!==0)break;if(d=n.suspendedLanes,(d&c)!==c){Yt(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=Ih(Ei.bind(null,n,rn,jr),i);break}Ei(n,rn,jr);break;case 4:if(Es(n,c),(c&4194240)===c)break;for(i=n.eventTimes,d=-1;0<c;){var w=31-un(c);p=1<<w,w=i[w],w>d&&(d=w),c&=~p}if(c=d,c=Ze()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*d0(c/1960))-c,10<c){n.timeoutHandle=Ih(Ei.bind(null,n,rn,jr),c);break}Ei(n,rn,jr);break;case 5:Ei(n,rn,jr);break;default:throw Error(t(329))}}}return sn(n,Ze()),n.callbackNode===a?Sg.bind(null,n):null}function yd(n,i){var a=za;return n.current.memoizedState.isDehydrated&&(wi(n,i).flags|=256),n=Mu(n,i),n!==2&&(i=rn,rn=a,i!==null&&_d(i)),n}function _d(n){rn===null?rn=n:rn.push.apply(rn,n)}function f0(n){for(var i=n;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],p=d.getSnapshot;d=d.value;try{if(!On(p(),d))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Es(n,i){for(i&=~fd,i&=~ku,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var a=31-un(i),c=1<<a;n[a]=-1,i&=~c}}function Ag(n){if((He&6)!==0)throw Error(t(327));So();var i=Ar(n,0);if((i&1)===0)return sn(n,Ze()),null;var a=Mu(n,i);if(n.tag!==0&&a===2){var c=ua(n);c!==0&&(i=c,a=yd(n,c))}if(a===1)throw a=Ba,wi(n,0),Es(n,i),sn(n,Ze()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,Ei(n,rn,jr),sn(n,Ze()),null}function vd(n,i){var a=He;He|=1;try{return n(i)}finally{He=a,He===0&&(Io=Ze()+500,lu&&ps())}}function vi(n){vs!==null&&vs.tag===0&&(He&6)===0&&So();var i=He;He|=1;var a=Cn.transition,c=$e;try{if(Cn.transition=null,$e=1,n)return n()}finally{$e=c,Cn.transition=a,He=i,(He&6)===0&&ps()}}function wd(){gn=To.current,tt(To)}function wi(n,i){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,$E(a)),_t!==null)for(a=_t.return;a!==null;){var c=a;switch(kh(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&ou();break;case 3:vo(),tt(en),tt($t),zh();break;case 5:Uh(c);break;case 4:vo();break;case 13:tt(st);break;case 19:tt(st);break;case 10:Mh(c.type._context);break;case 22:case 23:wd()}a=a.return}if(kt=n,_t=n=Ts(n.current,null),Lt=gn=i,Rt=0,Ba=null,fd=ku=_i=0,rn=za=null,mi!==null){for(i=0;i<mi.length;i++)if(a=mi[i],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,p=a.pending;if(p!==null){var w=p.next;p.next=d,c.next=w}a.pending=c}mi=null}return n}function Rg(n,i){do{var a=_t;try{if(Oh(),_u.current=Tu,vu){for(var c=it.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}vu=!1}if(yi=0,Pt=At=it=null,Ma=!1,ba=0,dd.current=null,a===null||a.return===null){Rt=1,Ba=i,_t=null;break}e:{var p=n,w=a.return,x=a,V=i;if(i=Lt,x.flags|=32768,V!==null&&typeof V=="object"&&typeof V.then=="function"){var B=V,X=x,J=X.tag;if((X.mode&1)===0&&(J===0||J===11||J===15)){var Q=X.alternate;Q?(X.updateQueue=Q.updateQueue,X.memoizedState=Q.memoizedState,X.lanes=Q.lanes):(X.updateQueue=null,X.memoizedState=null)}var ce=Jm(w);if(ce!==null){ce.flags&=-257,Ym(ce,w,x,p,i),ce.mode&1&&Xm(p,B,i),i=ce,V=B;var pe=i.updateQueue;if(pe===null){var ge=new Set;ge.add(V),i.updateQueue=ge}else pe.add(V);break e}else{if((i&1)===0){Xm(p,B,i),Ed();break e}V=Error(t(426))}}else if(rt&&x.mode&1){var dt=Jm(w);if(dt!==null){(dt.flags&65536)===0&&(dt.flags|=256),Ym(dt,w,x,p,i),Dh(wo(V,x));break e}}p=V=wo(V,x),Rt!==4&&(Rt=2),za===null?za=[p]:za.push(p),p=w;do{switch(p.tag){case 3:p.flags|=65536,i&=-i,p.lanes|=i;var j=Km(p,V,i);Em(p,j);break e;case 1:x=V;var M=p.type,U=p.stateNode;if((p.flags&128)===0&&(typeof M.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(_s===null||!_s.has(U)))){p.flags|=65536,i&=-i,p.lanes|=i;var ee=Qm(p,x,i);Em(p,ee);break e}}p=p.return}while(p!==null)}kg(a)}catch(_e){i=_e,_t===a&&a!==null&&(_t=a=a.return);continue}break}while(!0)}function Cg(){var n=Pu.current;return Pu.current=Tu,n===null?Tu:n}function Ed(){(Rt===0||Rt===3||Rt===2)&&(Rt=4),kt===null||(_i&268435455)===0&&(ku&268435455)===0||Es(kt,Lt)}function Mu(n,i){var a=He;He|=2;var c=Cg();(kt!==n||Lt!==i)&&(jr=null,wi(n,i));do try{p0();break}catch(d){Rg(n,d)}while(!0);if(Oh(),He=a,Pu.current=c,_t!==null)throw Error(t(261));return kt=null,Lt=0,Rt}function p0(){for(;_t!==null;)Pg(_t)}function m0(){for(;_t!==null&&!ei();)Pg(_t)}function Pg(n){var i=Dg(n.alternate,n,gn);n.memoizedProps=n.pendingProps,i===null?kg(n):_t=i,dd.current=null}function kg(n){var i=n;do{var a=i.alternate;if(n=i.return,(i.flags&32768)===0){if(a=a0(a,i,gn),a!==null){_t=a;return}}else{if(a=l0(a,i),a!==null){a.flags&=32767,_t=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Rt=6,_t=null;return}}if(i=i.sibling,i!==null){_t=i;return}_t=i=n}while(i!==null);Rt===0&&(Rt=5)}function Ei(n,i,a){var c=$e,d=Cn.transition;try{Cn.transition=null,$e=1,g0(n,i,a,c)}finally{Cn.transition=d,$e=c}return null}function g0(n,i,a,c){do So();while(vs!==null);if((He&6)!==0)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var p=a.lanes|a.childLanes;if(ah(n,p),n===kt&&(_t=kt=null,Lt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Nu||(Nu=!0,Vg(ti,function(){return So(),null})),p=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||p){p=Cn.transition,Cn.transition=null;var w=$e;$e=1;var x=He;He|=4,dd.current=null,c0(n,a),vg(a,n),bE(Eh),Pr=!!wh,Eh=wh=null,n.current=a,h0(a),Sr(),He=x,$e=w,Cn.transition=p}else n.current=a;if(Nu&&(Nu=!1,vs=n,Du=d),p=n.pendingLanes,p===0&&(_s=null),zl(a.stateNode),sn(n,Ze()),i!==null)for(c=n.onRecoverableError,a=0;a<i.length;a++)d=i[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(xu)throw xu=!1,n=md,md=null,n;return(Du&1)!==0&&n.tag!==0&&So(),p=n.pendingLanes,(p&1)!==0?n===gd?$a++:($a=0,gd=n):$a=0,ps(),null}function So(){if(vs!==null){var n=Xn(Du),i=Cn.transition,a=$e;try{if(Cn.transition=null,$e=16>n?16:n,vs===null)var c=!1;else{if(n=vs,vs=null,Du=0,(He&6)!==0)throw Error(t(331));var d=He;for(He|=4,de=n.current;de!==null;){var p=de,w=p.child;if((de.flags&16)!==0){var x=p.deletions;if(x!==null){for(var V=0;V<x.length;V++){var B=x[V];for(de=B;de!==null;){var X=de;switch(X.tag){case 0:case 11:case 15:Ua(8,X,p)}var J=X.child;if(J!==null)J.return=X,de=J;else for(;de!==null;){X=de;var Q=X.sibling,ce=X.return;if(pg(X),X===B){de=null;break}if(Q!==null){Q.return=ce,de=Q;break}de=ce}}}var pe=p.alternate;if(pe!==null){var ge=pe.child;if(ge!==null){pe.child=null;do{var dt=ge.sibling;ge.sibling=null,ge=dt}while(ge!==null)}}de=p}}if((p.subtreeFlags&2064)!==0&&w!==null)w.return=p,de=w;else e:for(;de!==null;){if(p=de,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:Ua(9,p,p.return)}var j=p.sibling;if(j!==null){j.return=p.return,de=j;break e}de=p.return}}var M=n.current;for(de=M;de!==null;){w=de;var U=w.child;if((w.subtreeFlags&2064)!==0&&U!==null)U.return=w,de=U;else e:for(w=M;de!==null;){if(x=de,(x.flags&2048)!==0)try{switch(x.tag){case 0:case 11:case 15:Cu(9,x)}}catch(_e){lt(x,x.return,_e)}if(x===w){de=null;break e}var ee=x.sibling;if(ee!==null){ee.return=x.return,de=ee;break e}de=x.return}}if(He=d,ps(),ln&&typeof ln.onPostCommitFiberRoot=="function")try{ln.onPostCommitFiberRoot(ni,n)}catch{}c=!0}return c}finally{$e=a,Cn.transition=i}}return!1}function xg(n,i,a){i=wo(a,i),i=Km(n,i,1),n=gs(n,i,1),i=Yt(),n!==null&&(oi(n,1,i),sn(n,i))}function lt(n,i,a){if(n.tag===3)xg(n,n,a);else for(;i!==null;){if(i.tag===3){xg(i,n,a);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(_s===null||!_s.has(c))){n=wo(a,n),n=Qm(i,n,1),i=gs(i,n,1),n=Yt(),i!==null&&(oi(i,1,n),sn(i,n));break}}i=i.return}}function y0(n,i,a){var c=n.pingCache;c!==null&&c.delete(i),i=Yt(),n.pingedLanes|=n.suspendedLanes&a,kt===n&&(Lt&a)===a&&(Rt===4||Rt===3&&(Lt&130023424)===Lt&&500>Ze()-pd?wi(n,0):fd|=a),sn(n,i)}function Ng(n,i){i===0&&((n.mode&1)===0?i=1:(i=ss,ss<<=1,(ss&130023424)===0&&(ss=4194304)));var a=Yt();n=Mr(n,i),n!==null&&(oi(n,i,a),sn(n,a))}function _0(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),Ng(n,a)}function v0(n,i){var a=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(i),Ng(n,a)}var Dg;Dg=function(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps||en.current)nn=!0;else{if((n.lanes&a)===0&&(i.flags&128)===0)return nn=!1,o0(n,i,a);nn=(n.flags&131072)!==0}else nn=!1,rt&&(i.flags&1048576)!==0&&hm(i,cu,i.index);switch(i.lanes=0,i.tag){case 2:var c=i.type;Au(n,i),n=i.pendingProps;var d=ho(i,$t.current);_o(i,a),d=Wh(null,i,c,n,d,a);var p=Hh();return i.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,tn(c)?(p=!0,au(i)):p=!1,i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,jh(i),d.updater=Iu,i.stateNode=d,d._reactInternals=i,Yh(i,c,n,a),i=nd(null,i,c,!0,p,a)):(i.tag=0,rt&&p&&Ph(i),Jt(null,i,d,a),i=i.child),i;case 16:c=i.elementType;e:{switch(Au(n,i),n=i.pendingProps,d=c._init,c=d(c._payload),i.type=c,d=i.tag=E0(c),n=bn(c,n),d){case 0:i=td(null,i,c,n,a);break e;case 1:i=sg(null,i,c,n,a);break e;case 11:i=Zm(null,i,c,n,a);break e;case 14:i=eg(null,i,c,bn(c.type,n),a);break e}throw Error(t(306,c,""))}return i;case 0:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:bn(c,d),td(n,i,c,d,a);case 1:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:bn(c,d),sg(n,i,c,d,a);case 3:e:{if(ig(i),n===null)throw Error(t(387));c=i.pendingProps,p=i.memoizedState,d=p.element,wm(n,i),gu(i,c,null,a);var w=i.memoizedState;if(c=w.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){d=wo(Error(t(423)),i),i=og(n,i,c,a,d);break e}else if(c!==d){d=wo(Error(t(424)),i),i=og(n,i,c,a,d);break e}else for(mn=hs(i.stateNode.containerInfo.firstChild),pn=i,rt=!0,Mn=null,a=_m(i,null,c,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(mo(),c===d){i=Lr(n,i,a);break e}Jt(n,i,c,a)}i=i.child}return i;case 5:return Im(i),n===null&&Nh(i),c=i.type,d=i.pendingProps,p=n!==null?n.memoizedProps:null,w=d.children,Th(c,d)?w=null:p!==null&&Th(c,p)&&(i.flags|=32),rg(n,i),Jt(n,i,w,a),i.child;case 6:return n===null&&Nh(i),null;case 13:return ag(n,i,a);case 4:return Fh(i,i.stateNode.containerInfo),c=i.pendingProps,n===null?i.child=go(i,null,c,a):Jt(n,i,c,a),i.child;case 11:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:bn(c,d),Zm(n,i,c,d,a);case 7:return Jt(n,i,i.pendingProps,a),i.child;case 8:return Jt(n,i,i.pendingProps.children,a),i.child;case 12:return Jt(n,i,i.pendingProps.children,a),i.child;case 10:e:{if(c=i.type._context,d=i.pendingProps,p=i.memoizedProps,w=d.value,Ye(fu,c._currentValue),c._currentValue=w,p!==null)if(On(p.value,w)){if(p.children===d.children&&!en.current){i=Lr(n,i,a);break e}}else for(p=i.child,p!==null&&(p.return=i);p!==null;){var x=p.dependencies;if(x!==null){w=p.child;for(var V=x.firstContext;V!==null;){if(V.context===c){if(p.tag===1){V=br(-1,a&-a),V.tag=2;var B=p.updateQueue;if(B!==null){B=B.shared;var X=B.pending;X===null?V.next=V:(V.next=X.next,X.next=V),B.pending=V}}p.lanes|=a,V=p.alternate,V!==null&&(V.lanes|=a),bh(p.return,a,i),x.lanes|=a;break}V=V.next}}else if(p.tag===10)w=p.type===i.type?null:p.child;else if(p.tag===18){if(w=p.return,w===null)throw Error(t(341));w.lanes|=a,x=w.alternate,x!==null&&(x.lanes|=a),bh(w,a,i),w=p.sibling}else w=p.child;if(w!==null)w.return=p;else for(w=p;w!==null;){if(w===i){w=null;break}if(p=w.sibling,p!==null){p.return=w.return,w=p;break}w=w.return}p=w}Jt(n,i,d.children,a),i=i.child}return i;case 9:return d=i.type,c=i.pendingProps.children,_o(i,a),d=An(d),c=c(d),i.flags|=1,Jt(n,i,c,a),i.child;case 14:return c=i.type,d=bn(c,i.pendingProps),d=bn(c.type,d),eg(n,i,c,d,a);case 15:return tg(n,i,i.type,i.pendingProps,a);case 17:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:bn(c,d),Au(n,i),i.tag=1,tn(c)?(n=!0,au(i)):n=!1,_o(i,a),Hm(i,c,d),Yh(i,c,d,a),nd(null,i,c,!0,n,a);case 19:return ug(n,i,a);case 22:return ng(n,i,a)}throw Error(t(156,i.tag))};function Vg(n,i){return oa(n,i)}function w0(n,i,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pn(n,i,a,c){return new w0(n,i,a,c)}function Td(n){return n=n.prototype,!(!n||!n.isReactComponent)}function E0(n){if(typeof n=="function")return Td(n)?1:0;if(n!=null){if(n=n.$$typeof,n===D)return 11;if(n===me)return 14}return 2}function Ts(n,i){var a=n.alternate;return a===null?(a=Pn(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function bu(n,i,a,c,d,p){var w=2;if(c=n,typeof n=="function")Td(n)&&(w=1);else if(typeof n=="string")w=5;else e:switch(n){case A:return Ti(a.children,d,p,i);case R:w=8,d|=8;break;case P:return n=Pn(12,a,i,d|2),n.elementType=P,n.lanes=p,n;case C:return n=Pn(13,a,i,d),n.elementType=C,n.lanes=p,n;case se:return n=Pn(19,a,i,d),n.elementType=se,n.lanes=p,n;case Ie:return Lu(a,d,p,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case N:w=10;break e;case k:w=9;break e;case D:w=11;break e;case me:w=14;break e;case Le:w=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return i=Pn(w,a,i,d),i.elementType=n,i.type=c,i.lanes=p,i}function Ti(n,i,a,c){return n=Pn(7,n,c,i),n.lanes=a,n}function Lu(n,i,a,c){return n=Pn(22,n,c,i),n.elementType=Ie,n.lanes=a,n.stateNode={isHidden:!1},n}function Id(n,i,a){return n=Pn(6,n,null,i),n.lanes=a,n}function Sd(n,i,a){return i=Pn(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function T0(n,i,a,c,d){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ha(0),this.expirationTimes=ha(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ha(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Ad(n,i,a,c,d,p,w,x,V){return n=new T0(n,i,a,x,V),i===1?(i=1,p===!0&&(i|=8)):i=0,p=Pn(3,null,null,i),n.current=p,p.stateNode=n,p.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},jh(p),n}function I0(n,i,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:le,key:c==null?null:""+c,children:n,containerInfo:i,implementation:a}}function Og(n){if(!n)return fs;n=n._reactInternals;e:{if(Dn(n)!==n||n.tag!==1)throw Error(t(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(tn(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(tn(a))return lm(n,a,i)}return i}function Mg(n,i,a,c,d,p,w,x,V){return n=Ad(a,c,!0,n,d,p,w,x,V),n.context=Og(null),a=n.current,c=Yt(),d=ws(a),p=br(c,d),p.callback=i??null,gs(a,p,d),n.current.lanes=d,oi(n,d,c),sn(n,c),n}function ju(n,i,a,c){var d=i.current,p=Yt(),w=ws(d);return a=Og(a),i.context===null?i.context=a:i.pendingContext=a,i=br(p,w),i.payload={element:n},c=c===void 0?null:c,c!==null&&(i.callback=c),n=gs(d,i,w),n!==null&&(Fn(n,d,w,p),mu(n,d,w)),w}function Fu(n){return n=n.current,n.child?(n.child.tag===5,n.child.stateNode):null}function bg(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function Rd(n,i){bg(n,i),(n=n.alternate)&&bg(n,i)}function S0(){return null}var Lg=typeof reportError=="function"?reportError:function(n){console.error(n)};function Cd(n){this._internalRoot=n}Uu.prototype.render=Cd.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(t(409));ju(n,i,null,null)},Uu.prototype.unmount=Cd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;vi(function(){ju(null,n,null,null)}),i[Nr]=null}};function Uu(n){this._internalRoot=n}Uu.prototype.unstable_scheduleHydration=function(n){if(n){var i=ma();n={blockedOn:null,target:n,priority:i};for(var a=0;a<cn.length&&i!==0&&i<cn[a].priority;a++);cn.splice(a,0,n),a===0&&Qi(n)}};function Pd(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Bu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function jg(){}function A0(n,i,a,c,d){if(d){if(typeof c=="function"){var p=c;c=function(){var B=Fu(w);p.call(B)}}var w=Mg(i,c,n,0,null,!1,!1,"",jg);return n._reactRootContainer=w,n[Nr]=w.current,Ca(n.nodeType===8?n.parentNode:n),vi(),w}for(;d=n.lastChild;)n.removeChild(d);if(typeof c=="function"){var x=c;c=function(){var B=Fu(V);x.call(B)}}var V=Ad(n,0,!1,null,null,!1,!1,"",jg);return n._reactRootContainer=V,n[Nr]=V.current,Ca(n.nodeType===8?n.parentNode:n),vi(function(){ju(i,V,a,c)}),V}function zu(n,i,a,c,d){var p=a._reactRootContainer;if(p){var w=p;if(typeof d=="function"){var x=d;d=function(){var V=Fu(w);x.call(V)}}ju(i,w,n,d)}else w=A0(a,i,n,d,c);return Fu(w)}fa=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var a=Ke(i.pendingLanes);a!==0&&(da(i,a|1),sn(i,Ze()),(He&6)===0&&(Io=Ze()+500,ps()))}break;case 13:vi(function(){var c=Mr(n,1);if(c!==null){var d=Yt();Fn(c,n,1,d)}}),Rd(n,1)}},Gi=function(n){if(n.tag===13){var i=Mr(n,134217728);if(i!==null){var a=Yt();Fn(i,n,134217728,a)}Rd(n,134217728)}},pa=function(n){if(n.tag===13){var i=ws(n),a=Mr(n,i);if(a!==null){var c=Yt();Fn(a,n,i,c)}Rd(n,i)}},ma=function(){return $e},ga=function(n,i){var a=$e;try{return $e=n,i()}finally{$e=a}},Er=function(n,i,a){switch(i){case"input":if(Xs(n,a),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var c=a[i];if(c!==n&&c.form===n.form){var d=iu(c);if(!d)throw Error(t(90));Wn(c),Xs(c,d)}}}break;case"textarea":xl(n,a);break;case"select":i=a.value,i!=null&&xn(n,!!a.multiple,i,!1)}},Vl=vd,Ol=vi;var R0={usingClientEntryPoint:!1,Events:[xa,uo,iu,es,ts,vd]},qa={findFiberByHostInstance:hi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},C0={bundleType:qa.bundleType,version:qa.version,rendererPackageName:qa.rendererPackageName,rendererConfig:qa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:H.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Bl(n),n===null?null:n.stateNode},findFiberByHostInstance:qa.findFiberByHostInstance||S0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$u.isDisabled&&$u.supportsFiber)try{ni=$u.inject(C0),ln=$u}catch{}}return on.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R0,on.createPortal=function(n,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Pd(i))throw Error(t(200));return I0(n,i,null,a)},on.createRoot=function(n,i){if(!Pd(n))throw Error(t(299));var a=!1,c="",d=Lg;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onRecoverableError!==void 0&&(d=i.onRecoverableError)),i=Ad(n,1,!1,null,null,a,!1,c,d),n[Nr]=i.current,Ca(n.nodeType===8?n.parentNode:n),new Cd(i)},on.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Bl(i),n=n===null?null:n.stateNode,n},on.flushSync=function(n){return vi(n)},on.hydrate=function(n,i,a){if(!Bu(i))throw Error(t(200));return zu(null,n,i,!0,a)},on.hydrateRoot=function(n,i,a){if(!Pd(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,p="",w=Lg;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),i=Mg(i,null,n,1,a??null,d,!1,p,w),n[Nr]=i.current,Ca(n),c)for(n=0;n<c.length;n++)a=c[n],d=a._getVersion,d=d(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,d]:i.mutableSourceEagerHydrationData.push(a,d);return new Uu(i)},on.render=function(n,i,a){if(!Bu(i))throw Error(t(200));return zu(null,n,i,!1,a)},on.unmountComponentAtNode=function(n){if(!Bu(n))throw Error(t(40));return n._reactRootContainer?(vi(function(){zu(null,null,n,!1,function(){n._reactRootContainer=null,n[Nr]=null})}),!0):!1},on.unstable_batchedUpdates=vd,on.unstable_renderSubtreeIntoContainer=function(n,i,a,c){if(!Bu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return zu(n,i,a,!1,c)},on.version="18.3.1-next-f1338f8080-20240426",on}var Hg;function L_(){if(Hg)return Nd.exports;Hg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Nd.exports=b0(),Nd.exports}var Gg;function L0(){if(Gg)return qu;Gg=1;var r=L_();return qu.createRoot=r.createRoot,qu.hydrateRoot=r.hydrateRoot,qu}var j0=L0();const F0=b_(j0);L_();function nl(){return nl=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},nl.apply(this,arguments)}var Ps;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(Ps||(Ps={}));const Kg="popstate";function U0(r){r===void 0&&(r={});function e(o,l){let{pathname:h="/",search:f="",hash:g=""}=Oi(o.location.hash.substr(1));return!h.startsWith("/")&&!h.startsWith(".")&&(h="/"+h),Qd("",{pathname:h,search:f,hash:g},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(o,l){let h=o.document.querySelector("base"),f="";if(h&&h.getAttribute("href")){let g=o.location.href,y=g.indexOf("#");f=y===-1?g:g.slice(0,y)}return f+"#"+(typeof l=="string"?l:uc(l))}function s(o,l){Oc(o.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(l)+")")}return z0(e,t,s,r)}function pt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Oc(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function B0(){return Math.random().toString(36).substr(2,8)}function Qg(r,e){return{usr:r.state,key:r.key,idx:e}}function Qd(r,e,t,s){return t===void 0&&(t=null),nl({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?Oi(e):e,{state:t,key:e&&e.key||s||B0()})}function uc(r){let{pathname:e="/",search:t="",hash:s=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function Oi(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let s=r.indexOf("?");s>=0&&(e.search=r.substr(s),r=r.substr(0,s)),r&&(e.pathname=r)}return e}function z0(r,e,t,s){s===void 0&&(s={});let{window:o=document.defaultView,v5Compat:l=!1}=s,h=o.history,f=Ps.Pop,g=null,y=v();y==null&&(y=0,h.replaceState(nl({},h.state,{idx:y}),""));function v(){return(h.state||{idx:null}).idx}function E(){f=Ps.Pop;let L=v(),ne=L==null?null:L-y;y=L,g&&g({action:f,location:$.location,delta:ne})}function S(L,ne){f=Ps.Push;let Y=Qd($.location,L,ne);t&&t(Y,L),y=v()+1;let te=Qg(Y,y),H=$.createHref(Y);try{h.pushState(te,"",H)}catch(ie){if(ie instanceof DOMException&&ie.name==="DataCloneError")throw ie;o.location.assign(H)}l&&g&&g({action:f,location:$.location,delta:1})}function O(L,ne){f=Ps.Replace;let Y=Qd($.location,L,ne);t&&t(Y,L),y=v();let te=Qg(Y,y),H=$.createHref(Y);h.replaceState(te,"",H),l&&g&&g({action:f,location:$.location,delta:0})}function q(L){let ne=o.location.origin!=="null"?o.location.origin:o.location.href,Y=typeof L=="string"?L:uc(L);return Y=Y.replace(/ $/,"%20"),pt(ne,"No window.location.(origin|href) available to create URL for href: "+Y),new URL(Y,ne)}let $={get action(){return f},get location(){return r(o,h)},listen(L){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(Kg,E),g=L,()=>{o.removeEventListener(Kg,E),g=null}},createHref(L){return e(o,L)},createURL:q,encodeLocation(L){let ne=q(L);return{pathname:ne.pathname,search:ne.search,hash:ne.hash}},push:S,replace:O,go(L){return h.go(L)}};return $}var Xg;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(Xg||(Xg={}));function $0(r,e,t){return t===void 0&&(t="/"),q0(r,e,t)}function q0(r,e,t,s){let o=typeof e=="string"?Oi(e):e,l=Af(o.pathname||"/",t);if(l==null)return null;let h=j_(r);W0(h);let f=null;for(let g=0;f==null&&g<h.length;++g){let y=rT(l);f=eT(h[g],y)}return f}function j_(r,e,t,s){e===void 0&&(e=[]),t===void 0&&(t=[]),s===void 0&&(s="");let o=(l,h,f)=>{let g={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};g.relativePath.startsWith("/")&&(pt(g.relativePath.startsWith(s),'Absolute route path "'+g.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),g.relativePath=g.relativePath.slice(s.length));let y=Ns([s,g.relativePath]),v=t.concat(g);l.children&&l.children.length>0&&(pt(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+y+'".')),j_(l.children,e,v,y)),!(l.path==null&&!l.index)&&e.push({path:y,score:Y0(y,l.index),routesMeta:v})};return r.forEach((l,h)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))o(l,h);else for(let g of F_(l.path))o(l,h,g)}),e}function F_(r){let e=r.split("/");if(e.length===0)return[];let[t,...s]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(s.length===0)return o?[l,""]:[l];let h=F_(s.join("/")),f=[];return f.push(...h.map(g=>g===""?l:[l,g].join("/"))),o&&f.push(...h),f.map(g=>r.startsWith("/")&&g===""?"/":g)}function W0(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:Z0(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}const H0=/^:[\w-]+$/,G0=3,K0=2,Q0=1,X0=10,J0=-2,Jg=r=>r==="*";function Y0(r,e){let t=r.split("/"),s=t.length;return t.some(Jg)&&(s+=J0),e&&(s+=K0),t.filter(o=>!Jg(o)).reduce((o,l)=>o+(H0.test(l)?G0:l===""?Q0:X0),s)}function Z0(r,e){return r.length===e.length&&r.slice(0,-1).every((s,o)=>s===e[o])?r[r.length-1]-e[e.length-1]:0}function eT(r,e,t){let{routesMeta:s}=r,o={},l="/",h=[];for(let f=0;f<s.length;++f){let g=s[f],y=f===s.length-1,v=l==="/"?e:e.slice(l.length)||"/",E=tT({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},v),S=g.route;if(!E)return null;Object.assign(o,E.params),h.push({params:o,pathname:Ns([l,E.pathname]),pathnameBase:lT(Ns([l,E.pathnameBase])),route:S}),E.pathnameBase!=="/"&&(l=Ns([l,E.pathnameBase]))}return h}function tT(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,s]=nT(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let l=o[0],h=l.replace(/(.)\/+$/,"$1"),f=o.slice(1);return{params:s.reduce((y,v,E)=>{let{paramName:S,isOptional:O}=v;if(S==="*"){let $=f[E]||"";h=l.slice(0,l.length-$.length).replace(/(.)\/+$/,"$1")}const q=f[E];return O&&!q?y[S]=void 0:y[S]=(q||"").replace(/%2F/g,"/"),y},{}),pathname:l,pathnameBase:h,pattern:r}}function nT(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Oc(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,f,g)=>(s.push({paramName:f,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(s.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function rT(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Oc(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function Af(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=r.charAt(t);return s&&s!=="/"?null:r.slice(t)||"/"}const sT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,iT=r=>sT.test(r);function oT(r,e){e===void 0&&(e="/");let{pathname:t,search:s="",hash:o=""}=typeof r=="string"?Oi(r):r,l;if(t)if(iT(t))l=t;else{if(t.includes("//")){let h=t;t=t.replace(/\/\/+/g,"/"),Oc(!1,"Pathnames cannot have embedded double slashes - normalizing "+(h+" -> "+t))}t.startsWith("/")?l=Yg(t.substring(1),"/"):l=Yg(t,e)}else l=e;return{pathname:l,search:uT(s),hash:cT(o)}}function Yg(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Od(r,e,t,s){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function aT(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Rf(r,e){let t=aT(r);return e?t.map((s,o)=>o===t.length-1?s.pathname:s.pathnameBase):t.map(s=>s.pathnameBase)}function Cf(r,e,t,s){s===void 0&&(s=!1);let o;typeof r=="string"?o=Oi(r):(o=nl({},r),pt(!o.pathname||!o.pathname.includes("?"),Od("?","pathname","search",o)),pt(!o.pathname||!o.pathname.includes("#"),Od("#","pathname","hash",o)),pt(!o.search||!o.search.includes("#"),Od("#","search","hash",o)));let l=r===""||o.pathname==="",h=l?"/":o.pathname,f;if(h==null)f=t;else{let E=e.length-1;if(!s&&h.startsWith("..")){let S=h.split("/");for(;S[0]==="..";)S.shift(),E-=1;o.pathname=S.join("/")}f=E>=0?e[E]:"/"}let g=oT(o,f),y=h&&h!=="/"&&h.endsWith("/"),v=(l||h===".")&&t.endsWith("/");return!g.pathname.endsWith("/")&&(y||v)&&(g.pathname+="/"),g}const Ns=r=>r.join("/").replace(/\/\/+/g,"/"),lT=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),uT=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,cT=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function hT(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const U_=["post","put","patch","delete"];new Set(U_);const dT=["get",...U_];new Set(dT);function rl(){return rl=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},rl.apply(this,arguments)}const Pf=fe.createContext(null),fT=fe.createContext(null),Ws=fe.createContext(null),Mc=fe.createContext(null),Hr=fe.createContext({outlet:null,matches:[],isDataRoute:!1}),B_=fe.createContext(null);function pT(r,e){let{relative:t}=e===void 0?{}:e;$o()||pt(!1);let{basename:s,navigator:o}=fe.useContext(Ws),{hash:l,pathname:h,search:f}=$_(r,{relative:t}),g=h;return s!=="/"&&(g=h==="/"?s:Ns([s,h])),o.createHref({pathname:g,search:f,hash:l})}function $o(){return fe.useContext(Mc)!=null}function fl(){return $o()||pt(!1),fe.useContext(Mc).location}function z_(r){fe.useContext(Ws).static||fe.useLayoutEffect(r)}function bc(){let{isDataRoute:r}=fe.useContext(Hr);return r?PT():mT()}function mT(){$o()||pt(!1);let r=fe.useContext(Pf),{basename:e,future:t,navigator:s}=fe.useContext(Ws),{matches:o}=fe.useContext(Hr),{pathname:l}=fl(),h=JSON.stringify(Rf(o,t.v7_relativeSplatPath)),f=fe.useRef(!1);return z_(()=>{f.current=!0}),fe.useCallback(function(y,v){if(v===void 0&&(v={}),!f.current)return;if(typeof y=="number"){s.go(y);return}let E=Cf(y,JSON.parse(h),l,v.relative==="path");r==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:Ns([e,E.pathname])),(v.replace?s.replace:s.push)(E,v.state,v)},[e,s,h,l,r])}function gT(){let{matches:r}=fe.useContext(Hr),e=r[r.length-1];return e?e.params:{}}function $_(r,e){let{relative:t}=e===void 0?{}:e,{future:s}=fe.useContext(Ws),{matches:o}=fe.useContext(Hr),{pathname:l}=fl(),h=JSON.stringify(Rf(o,s.v7_relativeSplatPath));return fe.useMemo(()=>Cf(r,JSON.parse(h),l,t==="path"),[r,h,l,t])}function yT(r,e){return _T(r,e)}function _T(r,e,t,s){$o()||pt(!1);let{navigator:o}=fe.useContext(Ws),{matches:l}=fe.useContext(Hr),h=l[l.length-1],f=h?h.params:{};h&&h.pathname;let g=h?h.pathnameBase:"/";h&&h.route;let y=fl(),v;if(e){var E;let L=typeof e=="string"?Oi(e):e;g==="/"||(E=L.pathname)!=null&&E.startsWith(g)||pt(!1),v=L}else v=y;let S=v.pathname||"/",O=S;if(g!=="/"){let L=g.replace(/^\//,"").split("/");O="/"+S.replace(/^\//,"").split("/").slice(L.length).join("/")}let q=$0(r,{pathname:O}),$=IT(q&&q.map(L=>Object.assign({},L,{params:Object.assign({},f,L.params),pathname:Ns([g,o.encodeLocation?o.encodeLocation(L.pathname).pathname:L.pathname]),pathnameBase:L.pathnameBase==="/"?g:Ns([g,o.encodeLocation?o.encodeLocation(L.pathnameBase).pathname:L.pathnameBase])})),l,t,s);return e&&$?fe.createElement(Mc.Provider,{value:{location:rl({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:Ps.Pop}},$):$}function vT(){let r=CT(),e=hT(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return fe.createElement(fe.Fragment,null,fe.createElement("h2",null,"Unexpected Application Error!"),fe.createElement("h3",{style:{fontStyle:"italic"}},e),t?fe.createElement("pre",{style:o},t):null,null)}const wT=fe.createElement(vT,null);class ET extends fe.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?fe.createElement(Hr.Provider,{value:this.props.routeContext},fe.createElement(B_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function TT(r){let{routeContext:e,match:t,children:s}=r,o=fe.useContext(Pf);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),fe.createElement(Hr.Provider,{value:e},s)}function IT(r,e,t,s){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),s===void 0&&(s=null),r==null){var l;if(!t)return null;if(t.errors)r=t.matches;else if((l=s)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let h=r,f=(o=t)==null?void 0:o.errors;if(f!=null){let v=h.findIndex(E=>E.route.id&&f?.[E.route.id]!==void 0);v>=0||pt(!1),h=h.slice(0,Math.min(h.length,v+1))}let g=!1,y=-1;if(t&&s&&s.v7_partialHydration)for(let v=0;v<h.length;v++){let E=h[v];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(y=v),E.route.id){let{loaderData:S,errors:O}=t,q=E.route.loader&&S[E.route.id]===void 0&&(!O||O[E.route.id]===void 0);if(E.route.lazy||q){g=!0,y>=0?h=h.slice(0,y+1):h=[h[0]];break}}}return h.reduceRight((v,E,S)=>{let O,q=!1,$=null,L=null;t&&(O=f&&E.route.id?f[E.route.id]:void 0,$=E.route.errorElement||wT,g&&(y<0&&S===0?(kT("route-fallback"),q=!0,L=null):y===S&&(q=!0,L=E.route.hydrateFallbackElement||null)));let ne=e.concat(h.slice(0,S+1)),Y=()=>{let te;return O?te=$:q?te=L:E.route.Component?te=fe.createElement(E.route.Component,null):E.route.element?te=E.route.element:te=v,fe.createElement(TT,{match:E,routeContext:{outlet:v,matches:ne,isDataRoute:t!=null},children:te})};return t&&(E.route.ErrorBoundary||E.route.errorElement||S===0)?fe.createElement(ET,{location:t.location,revalidation:t.revalidation,component:$,error:O,children:Y(),routeContext:{outlet:null,matches:ne,isDataRoute:!0}}):Y()},null)}var q_=(function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r})(q_||{}),W_=(function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r})(W_||{});function ST(r){let e=fe.useContext(Pf);return e||pt(!1),e}function AT(r){let e=fe.useContext(fT);return e||pt(!1),e}function RT(r){let e=fe.useContext(Hr);return e||pt(!1),e}function H_(r){let e=RT(),t=e.matches[e.matches.length-1];return t.route.id||pt(!1),t.route.id}function CT(){var r;let e=fe.useContext(B_),t=AT(),s=H_();return e!==void 0?e:(r=t.errors)==null?void 0:r[s]}function PT(){let{router:r}=ST(q_.UseNavigateStable),e=H_(W_.UseNavigateStable),t=fe.useRef(!1);return z_(()=>{t.current=!0}),fe.useCallback(function(o,l){l===void 0&&(l={}),t.current&&(typeof o=="number"?r.navigate(o):r.navigate(o,rl({fromRouteId:e},l)))},[r,e])}const Zg={};function kT(r,e,t){Zg[r]||(Zg[r]=!0)}function xT(r,e){r?.v7_startTransition,r?.v7_relativeSplatPath}function Xd(r){let{to:e,replace:t,state:s,relative:o}=r;$o()||pt(!1);let{future:l,static:h}=fe.useContext(Ws),{matches:f}=fe.useContext(Hr),{pathname:g}=fl(),y=bc(),v=Cf(e,Rf(f,l.v7_relativeSplatPath),g,o==="path"),E=JSON.stringify(v);return fe.useEffect(()=>y(JSON.parse(E),{replace:t,state:s,relative:o}),[y,E,o,t,s]),null}function cr(r){pt(!1)}function NT(r){let{basename:e="/",children:t=null,location:s,navigationType:o=Ps.Pop,navigator:l,static:h=!1,future:f}=r;$o()&&pt(!1);let g=e.replace(/^\/*/,"/"),y=fe.useMemo(()=>({basename:g,navigator:l,static:h,future:rl({v7_relativeSplatPath:!1},f)}),[g,f,l,h]);typeof s=="string"&&(s=Oi(s));let{pathname:v="/",search:E="",hash:S="",state:O=null,key:q="default"}=s,$=fe.useMemo(()=>{let L=Af(v,g);return L==null?null:{location:{pathname:L,search:E,hash:S,state:O,key:q},navigationType:o}},[g,v,E,S,O,q,o]);return $==null?null:fe.createElement(Ws.Provider,{value:y},fe.createElement(Mc.Provider,{children:t,value:$}))}function DT(r){let{children:e,location:t}=r;return yT(Jd(e),t)}new Promise(()=>{});function Jd(r,e){e===void 0&&(e=[]);let t=[];return fe.Children.forEach(r,(s,o)=>{if(!fe.isValidElement(s))return;let l=[...e,o];if(s.type===fe.Fragment){t.push.apply(t,Jd(s.props.children,l));return}s.type!==cr&&pt(!1),!s.props.index||!s.props.children||pt(!1);let h={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(h.children=Jd(s.props.children,l)),t.push(h)}),t}function Yd(){return Yd=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},Yd.apply(this,arguments)}function VT(r,e){if(r==null)return{};var t={},s=Object.keys(r),o,l;for(l=0;l<s.length;l++)o=s[l],!(e.indexOf(o)>=0)&&(t[o]=r[o]);return t}function OT(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function MT(r,e){return r.button===0&&(!e||e==="_self")&&!OT(r)}const bT=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],LT="6";try{window.__reactRouterVersion=LT}catch{}const jT="startTransition",ey=V0[jT];function FT(r){let{basename:e,children:t,future:s,window:o}=r,l=fe.useRef();l.current==null&&(l.current=U0({window:o,v5Compat:!0}));let h=l.current,[f,g]=fe.useState({action:h.action,location:h.location}),{v7_startTransition:y}=s||{},v=fe.useCallback(E=>{y&&ey?ey(()=>g(E)):g(E)},[g,y]);return fe.useLayoutEffect(()=>h.listen(v),[h,v]),fe.useEffect(()=>xT(s),[s]),fe.createElement(NT,{basename:e,children:t,location:f.location,navigationType:f.action,navigator:h,future:s})}const UT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",BT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ii=fe.forwardRef(function(e,t){let{onClick:s,relative:o,reloadDocument:l,replace:h,state:f,target:g,to:y,preventScrollReset:v,viewTransition:E}=e,S=VT(e,bT),{basename:O}=fe.useContext(Ws),q,$=!1;if(typeof y=="string"&&BT.test(y)&&(q=y,UT))try{let te=new URL(window.location.href),H=y.startsWith("//")?new URL(te.protocol+y):new URL(y),ie=Af(H.pathname,O);H.origin===te.origin&&ie!=null?y=ie+H.search+H.hash:$=!0}catch{}let L=pT(y,{relative:o}),ne=zT(y,{replace:h,state:f,target:g,preventScrollReset:v,relative:o,viewTransition:E});function Y(te){s&&s(te),te.defaultPrevented||ne(te)}return fe.createElement("a",Yd({},S,{href:q||L,onClick:$||l?s:Y,ref:t,target:g}))});var ty;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(ty||(ty={}));var ny;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(ny||(ny={}));function zT(r,e){let{target:t,replace:s,state:o,preventScrollReset:l,relative:h,viewTransition:f}=e===void 0?{}:e,g=bc(),y=fl(),v=$_(r,{relative:h});return fe.useCallback(E=>{if(MT(E,t)){E.preventDefault();let S=s!==void 0?s:uc(y)===uc(v);g(r,{replace:S,state:o,preventScrollReset:l,relative:h,viewTransition:f})}},[y,g,v,s,o,t,r,l,h,f])}const $T=()=>{};var ry={};const G_=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},qT=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const o=r[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],h=r[t++],f=r[t++],g=((o&7)<<18|(l&63)<<12|(h&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const l=r[t++],h=r[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},K_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const l=r[o],h=o+1<r.length,f=h?r[o+1]:0,g=o+2<r.length,y=g?r[o+2]:0,v=l>>2,E=(l&3)<<4|f>>4;let S=(f&15)<<2|y>>6,O=y&63;g||(O=64,h||(S=64)),s.push(t[v],t[E],t[S],t[O])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(G_(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):qT(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],f=o<r.length?t[r.charAt(o)]:0;++o;const y=o<r.length?t[r.charAt(o)]:64;++o;const E=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||f==null||y==null||E==null)throw new WT;const S=l<<2|f>>4;if(s.push(S),y!==64){const O=f<<4&240|y>>2;if(s.push(O),E!==64){const q=y<<6&192|E;s.push(q)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class WT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const HT=function(r){const e=G_(r);return K_.encodeByteArray(e,!0)},cc=function(r){return HT(r).replace(/\./g,"")},Q_=function(r){try{return K_.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function GT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const KT=()=>GT().__FIREBASE_DEFAULTS__,QT=()=>{if(typeof process>"u"||typeof ry>"u")return;const r=ry.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},XT=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Q_(r[1]);return e&&JSON.parse(e)},Lc=()=>{try{return $T()||KT()||QT()||XT()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},X_=r=>Lc()?.emulatorHosts?.[r],JT=r=>{const e=X_(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},J_=()=>Lc()?.config,Y_=r=>Lc()?.[`_${r}`];class YT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}function qo(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Z_(r){return(await fetch(r,{credentials:"include"})).ok}function ZT(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...r};return[cc(JSON.stringify(t)),cc(JSON.stringify(h)),""].join(".")}const Qa={};function eI(){const r={prod:[],emulator:[]};for(const e of Object.keys(Qa))Qa[e]?r.emulator.push(e):r.prod.push(e);return r}function tI(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let sy=!1;function ev(r,e){if(typeof window>"u"||typeof document>"u"||!qo(window.location.host)||Qa[r]===e||Qa[r]||sy)return;Qa[r]=e;function t(S){return`__firebase__banner__${S}`}const s="__firebase__banner",l=eI().prod.length>0;function h(){const S=document.getElementById(s);S&&S.remove()}function f(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function g(S,O){S.setAttribute("width","24"),S.setAttribute("id",O),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function y(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{sy=!0,h()},S}function v(S,O){S.setAttribute("id",O),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function E(){const S=tI(s),O=t("text"),q=document.getElementById(O)||document.createElement("span"),$=t("learnmore"),L=document.getElementById($)||document.createElement("a"),ne=t("preprendIcon"),Y=document.getElementById(ne)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const te=S.element;f(te),v(L,$);const H=y();g(Y,ne),te.append(Y,q,L,H),document.body.appendChild(te)}l?(q.innerText="Preview backend disconnected.",Y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,q.innerText="Preview backend running in this workspace."),q.setAttribute("id",O)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}function Xt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xt())}function rI(){const r=Lc()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function sI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function iI(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function oI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function aI(){const r=Xt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function lI(){return!rI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function uI(){try{return typeof indexedDB=="object"}catch{return!1}}function cI(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}const hI="FirebaseError";class Gr extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=hI,Object.setPrototypeOf(this,Gr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pl.prototype.create)}}class pl{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?dI(l,s):"Error",f=`${this.serviceName}: ${h} (${o}).`;return new Gr(o,f,s)}}function dI(r,e){return r.replace(fI,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const fI=/\{\$([^}]+)}/g;function pI(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function ki(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=r[o],h=e[o];if(iy(l)&&iy(h)){if(!ki(l,h))return!1}else if(l!==h)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function iy(r){return r!==null&&typeof r=="object"}function ml(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function mI(r,e){const t=new gI(r,e);return t.subscribe.bind(t)}class gI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");yI(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=Md),o.error===void 0&&(o.error=Md),o.complete===void 0&&(o.complete=Md);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yI(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Md(){}function St(r){return r&&r._delegate?r._delegate:r}class xi{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Si="[DEFAULT]";class _I{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new YT;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(wI(e))try{this.getOrInitializeService({instanceIdentifier:Si})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=Si){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Si){return this.instances.has(e)}getOptions(e=Si){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,h]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);s===f&&h.resolve(o)}return o}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:vI(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Si){return this.component?this.component.multipleInstances?e:Si:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function vI(r){return r===Si?void 0:r}function wI(r){return r.instantiationMode==="EAGER"}class EI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new _I(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Ue;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ue||(Ue={}));const TI={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},II=Ue.INFO,SI={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},AI=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=SI[e];if(o)console[o](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class kf{constructor(e){this.name=e,this._logLevel=II,this._logHandler=AI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?TI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const RI=(r,e)=>e.some(t=>r instanceof t);let oy,ay;function CI(){return oy||(oy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function PI(){return ay||(ay=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const tv=new WeakMap,Zd=new WeakMap,nv=new WeakMap,bd=new WeakMap,xf=new WeakMap;function kI(r){const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",h)},l=()=>{t(Ds(r.result)),o()},h=()=>{s(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&tv.set(t,r)}).catch(()=>{}),xf.set(e,r),e}function xI(r){if(Zd.has(r))return;const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",h),r.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",h),r.addEventListener("abort",h)});Zd.set(r,e)}let ef={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Zd.get(r);if(e==="objectStoreNames")return r.objectStoreNames||nv.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ds(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function NI(r){ef=r(ef)}function DI(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(Ld(this),e,...t);return nv.set(s,e.sort?e.sort():[e]),Ds(s)}:PI().includes(r)?function(...e){return r.apply(Ld(this),e),Ds(tv.get(this))}:function(...e){return Ds(r.apply(Ld(this),e))}}function VI(r){return typeof r=="function"?DI(r):(r instanceof IDBTransaction&&xI(r),RI(r,CI())?new Proxy(r,ef):r)}function Ds(r){if(r instanceof IDBRequest)return kI(r);if(bd.has(r))return bd.get(r);const e=VI(r);return e!==r&&(bd.set(r,e),xf.set(e,r)),e}const Ld=r=>xf.get(r);function OI(r,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const h=indexedDB.open(r,e),f=Ds(h);return s&&h.addEventListener("upgradeneeded",g=>{s(Ds(h.result),g.oldVersion,g.newVersion,Ds(h.transaction),g)}),t&&h.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),f.then(g=>{l&&g.addEventListener("close",()=>l()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),f}const MI=["get","getKey","getAll","getAllKeys","count"],bI=["put","add","delete","clear"],jd=new Map;function ly(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(jd.get(e))return jd.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=bI.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||MI.includes(t)))return;const l=async function(h,...f){const g=this.transaction(h,o?"readwrite":"readonly");let y=g.store;return s&&(y=y.index(f.shift())),(await Promise.all([y[t](...f),o&&g.done]))[0]};return jd.set(e,l),l}NI(r=>({...r,get:(e,t,s)=>ly(e,t)||r.get(e,t,s),has:(e,t)=>!!ly(e,t)||r.has(e,t)}));class LI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(jI(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function jI(r){return r.getComponent()?.type==="VERSION"}const tf="@firebase/app",uy="0.14.6";const zr=new kf("@firebase/app"),FI="@firebase/app-compat",UI="@firebase/analytics-compat",BI="@firebase/analytics",zI="@firebase/app-check-compat",$I="@firebase/app-check",qI="@firebase/auth",WI="@firebase/auth-compat",HI="@firebase/database",GI="@firebase/data-connect",KI="@firebase/database-compat",QI="@firebase/functions",XI="@firebase/functions-compat",JI="@firebase/installations",YI="@firebase/installations-compat",ZI="@firebase/messaging",eS="@firebase/messaging-compat",tS="@firebase/performance",nS="@firebase/performance-compat",rS="@firebase/remote-config",sS="@firebase/remote-config-compat",iS="@firebase/storage",oS="@firebase/storage-compat",aS="@firebase/firestore",lS="@firebase/ai",uS="@firebase/firestore-compat",cS="firebase",hS="12.6.0";const nf="[DEFAULT]",dS={[tf]:"fire-core",[FI]:"fire-core-compat",[BI]:"fire-analytics",[UI]:"fire-analytics-compat",[$I]:"fire-app-check",[zI]:"fire-app-check-compat",[qI]:"fire-auth",[WI]:"fire-auth-compat",[HI]:"fire-rtdb",[GI]:"fire-data-connect",[KI]:"fire-rtdb-compat",[QI]:"fire-fn",[XI]:"fire-fn-compat",[JI]:"fire-iid",[YI]:"fire-iid-compat",[ZI]:"fire-fcm",[eS]:"fire-fcm-compat",[tS]:"fire-perf",[nS]:"fire-perf-compat",[rS]:"fire-rc",[sS]:"fire-rc-compat",[iS]:"fire-gcs",[oS]:"fire-gcs-compat",[aS]:"fire-fst",[uS]:"fire-fst-compat",[lS]:"fire-vertex","fire-js":"fire-js",[cS]:"fire-js-all"};const hc=new Map,fS=new Map,rf=new Map;function cy(r,e){try{r.container.addComponent(e)}catch(t){zr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Oo(r){const e=r.name;if(rf.has(e))return zr.debug(`There were multiple attempts to register component ${e}.`),!1;rf.set(e,r);for(const t of hc.values())cy(t,r);for(const t of fS.values())cy(t,r);return!0}function Nf(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Un(r){return r==null?!1:r.settings!==void 0}const pS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Vs=new pl("app","Firebase",pS);class mS{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new xi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Vs.create("app-deleted",{appName:this._name})}}const Wo=hS;function rv(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s={name:nf,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw Vs.create("bad-app-name",{appName:String(o)});if(t||(t=J_()),!t)throw Vs.create("no-options");const l=hc.get(o);if(l){if(ki(t,l.options)&&ki(s,l.config))return l;throw Vs.create("duplicate-app",{appName:o})}const h=new EI(o);for(const g of rf.values())h.addComponent(g);const f=new mS(t,s,h);return hc.set(o,f),f}function sv(r=nf){const e=hc.get(r);if(!e&&r===nf&&J_())return rv();if(!e)throw Vs.create("no-app",{appName:r});return e}function Os(r,e,t){let s=dS[r]??r;t&&(s+=`-${t}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const h=[`Unable to register library "${s}" with version "${e}":`];o&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),zr.warn(h.join(" "));return}Oo(new xi(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const gS="firebase-heartbeat-database",yS=1,sl="firebase-heartbeat-store";let Fd=null;function iv(){return Fd||(Fd=OI(gS,yS,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(sl)}catch(t){console.warn(t)}}}}).catch(r=>{throw Vs.create("idb-open",{originalErrorMessage:r.message})})),Fd}async function _S(r){try{const t=(await iv()).transaction(sl),s=await t.objectStore(sl).get(ov(r));return await t.done,s}catch(e){if(e instanceof Gr)zr.warn(e.message);else{const t=Vs.create("idb-get",{originalErrorMessage:e?.message});zr.warn(t.message)}}}async function hy(r,e){try{const s=(await iv()).transaction(sl,"readwrite");await s.objectStore(sl).put(e,ov(r)),await s.done}catch(t){if(t instanceof Gr)zr.warn(t.message);else{const s=Vs.create("idb-set",{originalErrorMessage:t?.message});zr.warn(s.message)}}}function ov(r){return`${r.name}!${r.options.appId}`}const vS=1024,wS=30;class ES{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new IS(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=dy();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:t}),this._heartbeatsCache.heartbeats.length>wS){const o=SS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){zr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=dy(),{heartbeatsToSend:t,unsentEntries:s}=TS(this._heartbeatsCache.heartbeats),o=cc(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return zr.warn(e),""}}}function dy(){return new Date().toISOString().substring(0,10)}function TS(r,e=vS){const t=[];let s=r.slice();for(const o of r){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),fy(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),fy(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class IS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return uI()?cI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await _S(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return hy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return hy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function fy(r){return cc(JSON.stringify({version:2,heartbeats:r})).length}function SS(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}function AS(r){Oo(new xi("platform-logger",e=>new LI(e),"PRIVATE")),Oo(new xi("heartbeat",e=>new ES(e),"PRIVATE")),Os(tf,uy,r),Os(tf,uy,"esm2020"),Os("fire-js","")}AS("");function av(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const RS=av,lv=new pl("auth","Firebase",av());const dc=new kf("@firebase/auth");function CS(r,...e){dc.logLevel<=Ue.WARN&&dc.warn(`Auth (${Wo}): ${r}`,...e)}function Zu(r,...e){dc.logLevel<=Ue.ERROR&&dc.error(`Auth (${Wo}): ${r}`,...e)}function vr(r,...e){throw Vf(r,...e)}function zn(r,...e){return Vf(r,...e)}function Df(r,e,t){const s={...RS(),[e]:t};return new pl("auth","Firebase",s).create(e,{appName:r.name})}function Ci(r){return Df(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function PS(r,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&vr(r,"argument-error"),Df(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Vf(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return lv.create(r,...e)}function ke(r,e,...t){if(!r)throw Vf(e,...t)}function Ur(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Zu(e),new Error(e)}function $r(r,e){r||Ur(e)}function sf(){return typeof self<"u"&&self.location?.href||""}function kS(){return py()==="http:"||py()==="https:"}function py(){return typeof self<"u"&&self.location?.protocol||null}function xS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(kS()||iI()||"connection"in navigator)?navigator.onLine:!0}function NS(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class gl{constructor(e,t){this.shortDelay=e,this.longDelay=t,$r(t>e,"Short delay should be less than long delay!"),this.isMobile=nI()||oI()}get(){return xS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Of(r,e){$r(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class uv{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ur("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ur("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ur("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const DS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const VS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],OS=new gl(3e4,6e4);function Mf(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Ho(r,e,t,s,o={}){return cv(r,o,async()=>{let l={},h={};s&&(e==="GET"?h=s:l={body:JSON.stringify(s)});const f=ml({key:r.config.apiKey,...h}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const y={method:e,headers:g,...l};return sI()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&qo(r.emulatorConfig.host)&&(y.credentials="include"),uv.fetch()(await hv(r,r.config.apiHost,t,f),y)})}async function cv(r,e,t){r._canInitEmulator=!1;const s={...DS,...e};try{const o=new bS(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw Wu(r,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const f=l.ok?h.errorMessage:h.error.message,[g,y]=f.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wu(r,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw Wu(r,"email-already-in-use",h);if(g==="USER_DISABLED")throw Wu(r,"user-disabled",h);const v=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Df(r,v,y);vr(r,v)}}catch(o){if(o instanceof Gr)throw o;vr(r,"network-request-failed",{message:String(o)})}}async function MS(r,e,t,s,o={}){const l=await Ho(r,e,t,s,o);return"mfaPendingCredential"in l&&vr(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function hv(r,e,t,s){const o=`${e}${t}?${s}`,l=r,h=l.config.emulator?Of(r.config,o):`${r.config.apiScheme}://${o}`;return VS.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}class bS{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(zn(this.auth,"network-request-failed")),OS.get())})}}function Wu(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=zn(r,e,s);return o.customData._tokenResponse=t,o}async function LS(r,e){return Ho(r,"POST","/v1/accounts:delete",e)}async function fc(r,e){return Ho(r,"POST","/v1/accounts:lookup",e)}function Xa(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function jS(r,e=!1){const t=St(r),s=await t.getIdToken(e),o=bf(s);ke(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l?.sign_in_provider;return{claims:o,token:s,authTime:Xa(Ud(o.auth_time)),issuedAtTime:Xa(Ud(o.iat)),expirationTime:Xa(Ud(o.exp)),signInProvider:h||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Ud(r){return Number(r)*1e3}function bf(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return Zu("JWT malformed, contained fewer than 3 sections"),null;try{const o=Q_(t);return o?JSON.parse(o):(Zu("Failed to decode base64 JWT payload"),null)}catch(o){return Zu("Caught error parsing JWT payload as JSON",o?.toString()),null}}function my(r){const e=bf(r);return ke(e,"internal-error"),ke(typeof e.exp<"u","internal-error"),ke(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function il(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Gr&&FS(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function FS({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class US{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class of{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xa(this.lastLoginAt),this.creationTime=Xa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function pc(r){const e=r.auth,t=await r.getIdToken(),s=await il(r,fc(e,{idToken:t}));ke(s?.users.length,e,"internal-error");const o=s.users[0];r._notifyReloadListener(o);const l=o.providerUserInfo?.length?dv(o.providerUserInfo):[],h=zS(r.providerData,l),f=r.isAnonymous,g=!(r.email&&o.passwordHash)&&!h?.length,y=f?g:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new of(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(r,v)}async function BS(r){const e=St(r);await pc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function zS(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function dv(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function $S(r,e){const t=await cv(r,{},async()=>{const s=ml({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,h=await hv(r,o,"/v1/token",`key=${l}`),f=await r._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:f,body:s};return r.emulatorConfig&&qo(r.emulatorConfig.host)&&(g.credentials="include"),uv.fetch()(h,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function qS(r,e){return Ho(r,"POST","/v2/accounts:revokeToken",Mf(r,e))}class xo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ke(e.idToken,"internal-error"),ke(typeof e.idToken<"u","internal-error"),ke(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):my(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ke(e.length!==0,"internal-error");const t=my(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ke(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:l}=await $S(e,t);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:l}=t,h=new xo;return s&&(ke(typeof s=="string","internal-error",{appName:e}),h.refreshToken=s),o&&(ke(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(ke(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xo,this.toJSON())}_performRefresh(){return Ur("not implemented")}}function Ss(r,e){ke(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Bn{constructor({uid:e,auth:t,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new US(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new of(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await il(this,this.stsTokenManager.getToken(this.auth,e));return ke(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return jS(this,e)}reload(){return BS(this)}_assign(e){this!==e&&(ke(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Bn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await pc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Un(this.auth.app))return Promise.reject(Ci(this.auth));const e=await this.getIdToken();return await il(this,LS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,h=t.photoURL??void 0,f=t.tenantId??void 0,g=t._redirectEventId??void 0,y=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:E,emailVerified:S,isAnonymous:O,providerData:q,stsTokenManager:$}=t;ke(E&&$,e,"internal-error");const L=xo.fromJSON(this.name,$);ke(typeof E=="string",e,"internal-error"),Ss(s,e.name),Ss(o,e.name),ke(typeof S=="boolean",e,"internal-error"),ke(typeof O=="boolean",e,"internal-error"),Ss(l,e.name),Ss(h,e.name),Ss(f,e.name),Ss(g,e.name),Ss(y,e.name),Ss(v,e.name);const ne=new Bn({uid:E,auth:e,email:o,emailVerified:S,displayName:s,isAnonymous:O,photoURL:h,phoneNumber:l,tenantId:f,stsTokenManager:L,createdAt:y,lastLoginAt:v});return q&&Array.isArray(q)&&(ne.providerData=q.map(Y=>({...Y}))),g&&(ne._redirectEventId=g),ne}static async _fromIdTokenResponse(e,t,s=!1){const o=new xo;o.updateFromServerResponse(t);const l=new Bn({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await pc(l),l}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];ke(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?dv(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!l?.length,f=new xo;f.updateFromIdToken(s);const g=new Bn({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:h}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new of(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!l?.length};return Object.assign(g,y),g}}const gy=new Map;function Br(r){$r(r instanceof Function,"Expected a class definition");let e=gy.get(r);return e?($r(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,gy.set(r,e),e)}class fv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}fv.type="NONE";const yy=fv;function ec(r,e,t){return`firebase:${r}:${e}:${t}`}class No{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=ec(this.userKey,o.apiKey,l),this.fullPersistenceKey=ec("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await fc(this.auth,{idToken:e}).catch(()=>{});return t?Bn._fromGetAccountInfoResponse(this.auth,t,e):null}return Bn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new No(Br(yy),e,s);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=o[0]||Br(yy);const h=ec(s,e.config.apiKey,e.name);let f=null;for(const y of t)try{const v=await y._get(h);if(v){let E;if(typeof v=="string"){const S=await fc(e,{idToken:v}).catch(()=>{});if(!S)break;E=await Bn._fromGetAccountInfoResponse(e,S,v)}else E=Bn._fromJSON(e,v);y!==l&&(f=E),l=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new No(l,e,s):(l=g[0],f&&await l._set(h,f.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(h)}catch{}})),new No(l,e,s))}}function _y(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(yv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(pv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(vv(e))return"Blackberry";if(wv(e))return"Webos";if(mv(e))return"Safari";if((e.includes("chrome/")||gv(e))&&!e.includes("edge/"))return"Chrome";if(_v(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if(s?.length===2)return s[1]}return"Other"}function pv(r=Xt()){return/firefox\//i.test(r)}function mv(r=Xt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function gv(r=Xt()){return/crios\//i.test(r)}function yv(r=Xt()){return/iemobile/i.test(r)}function _v(r=Xt()){return/android/i.test(r)}function vv(r=Xt()){return/blackberry/i.test(r)}function wv(r=Xt()){return/webos/i.test(r)}function Lf(r=Xt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function WS(r=Xt()){return Lf(r)&&!!window.navigator?.standalone}function HS(){return aI()&&document.documentMode===10}function Ev(r=Xt()){return Lf(r)||_v(r)||wv(r)||vv(r)||/windows phone/i.test(r)||yv(r)}function Tv(r,e=[]){let t;switch(r){case"Browser":t=_y(Xt());break;case"Worker":t=`${_y(Xt())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Wo}/${s}`}class GS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((h,f)=>{try{const g=e(l);h(g)}catch(g){f(g)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function KS(r,e={}){return Ho(r,"GET","/v2/passwordPolicy",Mf(r,e))}const QS=6;class XS{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??QS,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class JS{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vy(this),this.idTokenSubscription=new vy(this),this.beforeStateQueue=new GS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Br(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await No.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await fc(this,{idToken:e}),s=await Bn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Un(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(h,h))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,h=s?._redirectEventId,f=await this.tryRedirectSignIn(e);(!l||l===h)&&f?.user&&(s=f.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ke(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await pc(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=NS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Un(this.app))return Promise.reject(Ci(this));const t=e?St(e):null;return t&&ke(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ke(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Un(this.app)?Promise.reject(Ci(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Un(this.app)?Promise.reject(Ci(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Br(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await KS(this),t=new XS(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new pl("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await qS(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Br(e)||this._popupRedirectResolver;ke(t,this,"argument-error"),this.redirectPersistenceManager=await No.create(this,[Br(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(ke(f,this,"internal-error"),f.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,s,o);return()=>{h=!0,g()}}else{const g=e.addObserver(t);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Tv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(Un(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&CS(`Error while retrieving App Check token: ${e.error}`),e?.token}}function jc(r){return St(r)}class vy{constructor(e){this.auth=e,this.observer=null,this.addObserver=mI(t=>this.observer=t)}get next(){return ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let jf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function YS(r){jf=r}function ZS(r){return jf.loadJS(r)}function e1(){return jf.gapiScript}function t1(r){return`__${r}${Math.floor(Math.random()*1e6)}`}function n1(r,e){const t=Nf(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(ki(l,e??{}))return o;vr(o,"already-initialized")}return t.initialize({options:e})}function r1(r,e){const t=e?.persistence||[],s=(Array.isArray(t)?t:[t]).map(Br);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e?.popupRedirectResolver)}function s1(r,e,t){const s=jc(r);ke(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=Iv(e),{host:h,port:f}=i1(e),g=f===null?"":`:${f}`,y={url:`${l}//${h}${g}/`},v=Object.freeze({host:h,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){ke(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),ke(ki(y,s.config.emulator)&&ki(v,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=v,s.settings.appVerificationDisabledForTesting=!0,qo(h)?(Z_(`${l}//${h}${g}`),ev("Auth",!0)):o1()}function Iv(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function i1(r){const e=Iv(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:wy(s.substr(l.length+1))}}else{const[l,h]=s.split(":");return{host:l,port:wy(h)}}}function wy(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function o1(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class Sv{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ur("not implemented")}_getIdTokenResponse(e){return Ur("not implemented")}_linkToIdToken(e,t){return Ur("not implemented")}_getReauthenticationResolver(e){return Ur("not implemented")}}async function Do(r,e){return MS(r,"POST","/v1/accounts:signInWithIdp",Mf(r,e))}const a1="http://localhost";class Ni extends Sv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ni(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):vr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...l}=t;if(!s||!o)return null;const h=new Ni(s,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return Do(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Do(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Do(e,t)}buildRequest(){const e={requestUri:a1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ml(t)}return e}}class Ff{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class yl extends Ff{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class As extends yl{constructor(){super("facebook.com")}static credential(e){return Ni._fromParams({providerId:As.PROVIDER_ID,signInMethod:As.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return As.credentialFromTaggedObject(e)}static credentialFromError(e){return As.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return As.credential(e.oauthAccessToken)}catch{return null}}}As.FACEBOOK_SIGN_IN_METHOD="facebook.com";As.PROVIDER_ID="facebook.com";class Fr extends yl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ni._fromParams({providerId:Fr.PROVIDER_ID,signInMethod:Fr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Fr.credentialFromTaggedObject(e)}static credentialFromError(e){return Fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Fr.credential(t,s)}catch{return null}}}Fr.GOOGLE_SIGN_IN_METHOD="google.com";Fr.PROVIDER_ID="google.com";class Rs extends yl{constructor(){super("github.com")}static credential(e){return Ni._fromParams({providerId:Rs.PROVIDER_ID,signInMethod:Rs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Rs.credentialFromTaggedObject(e)}static credentialFromError(e){return Rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Rs.credential(e.oauthAccessToken)}catch{return null}}}Rs.GITHUB_SIGN_IN_METHOD="github.com";Rs.PROVIDER_ID="github.com";class Cs extends yl{constructor(){super("twitter.com")}static credential(e,t){return Ni._fromParams({providerId:Cs.PROVIDER_ID,signInMethod:Cs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Cs.credentialFromTaggedObject(e)}static credentialFromError(e){return Cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Cs.credential(t,s)}catch{return null}}}Cs.TWITTER_SIGN_IN_METHOD="twitter.com";Cs.PROVIDER_ID="twitter.com";class Mo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const l=await Bn._fromIdTokenResponse(e,s,o),h=Ey(s);return new Mo({user:l,providerId:h,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=Ey(s);return new Mo({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function Ey(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}class mc extends Gr{constructor(e,t,s,o){super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,mc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new mc(e,t,s,o)}}function Av(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?mc._fromErrorAndOperation(r,l,e,s):l})}async function l1(r,e,t=!1){const s=await il(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Mo._forOperation(r,"link",s)}async function u1(r,e,t=!1){const{auth:s}=r;if(Un(s.app))return Promise.reject(Ci(s));const o="reauthenticate";try{const l=await il(r,Av(s,o,e,r),t);ke(l.idToken,s,"internal-error");const h=bf(l.idToken);ke(h,s,"internal-error");const{sub:f}=h;return ke(r.uid===f,s,"user-mismatch"),Mo._forOperation(r,o,l)}catch(l){throw l?.code==="auth/user-not-found"&&vr(s,"user-mismatch"),l}}async function c1(r,e,t=!1){if(Un(r.app))return Promise.reject(Ci(r));const s="signIn",o=await Av(r,s,e),l=await Mo._fromIdTokenResponse(r,s,o);return t||await r._updateCurrentUser(l.user),l}function h1(r,e,t,s){return St(r).onIdTokenChanged(e,t,s)}function d1(r,e,t){return St(r).beforeAuthStateChanged(e,t)}function f1(r,e,t,s){return St(r).onAuthStateChanged(e,t,s)}function p1(r){return St(r).signOut()}const gc="__sak";class Rv{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(gc,"1"),this.storage.removeItem(gc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const m1=1e3,g1=10;class Cv extends Rv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ev(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,f,g)=>{this.notifyListeners(h,g)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(s);!t&&this.localCache[s]===h||this.notifyListeners(s,h)},l=this.storage.getItem(s);HS()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,g1):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},m1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Cv.type="LOCAL";const y1=Cv;class Pv extends Rv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Pv.type="SESSION";const kv=Pv;function _1(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Fc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new Fc(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!h?.size)return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const f=Array.from(h).map(async y=>y(t.origin,l)),g=await _1(f);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Fc.receivers=[];function Uf(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}class v1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((f,g)=>{const y=Uf("",20);o.port1.start();const v=setTimeout(()=>{g(new Error("unsupported_event"))},s);h={messageChannel:o,onMessage(E){const S=E;if(S.data.eventId===y)switch(S.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(S.data.response);break;default:clearTimeout(v),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}function dr(){return window}function w1(r){dr().location.href=r}function xv(){return typeof dr().WorkerGlobalScope<"u"&&typeof dr().importScripts=="function"}async function E1(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function T1(){return navigator?.serviceWorker?.controller||null}function I1(){return xv()?self:null}const Nv="firebaseLocalStorageDb",S1=1,yc="firebaseLocalStorage",Dv="fbase_key";class _l{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Uc(r,e){return r.transaction([yc],e?"readwrite":"readonly").objectStore(yc)}function A1(){const r=indexedDB.deleteDatabase(Nv);return new _l(r).toPromise()}function af(){const r=indexedDB.open(Nv,S1);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(yc,{keyPath:Dv})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(yc)?e(s):(s.close(),await A1(),e(await af()))})})}async function Ty(r,e,t){const s=Uc(r,!0).put({[Dv]:e,value:t});return new _l(s).toPromise()}async function R1(r,e){const t=Uc(r,!1).get(e),s=await new _l(t).toPromise();return s===void 0?null:s.value}function Iy(r,e){const t=Uc(r,!0).delete(e);return new _l(t).toPromise()}const C1=800,P1=3;class Vv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await af(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>P1)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return xv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Fc._getInstance(I1()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await E1(),!this.activeServiceWorker)return;this.sender=new v1(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||T1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await af();return await Ty(e,gc,"1"),await Iy(e,gc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>Ty(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>R1(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Iy(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Uc(o,!1).getAll();return new _l(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),C1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Vv.type="LOCAL";const k1=Vv;new gl(3e4,6e4);function Ov(r,e){return e?Br(e):(ke(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class Bf extends Sv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Do(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Do(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Do(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function x1(r){return c1(r.auth,new Bf(r),r.bypassAuthState)}function N1(r){const{auth:e,user:t}=r;return ke(t,e,"internal-error"),u1(t,new Bf(r),r.bypassAuthState)}async function D1(r){const{auth:e,user:t}=r;return ke(t,e,"internal-error"),l1(t,new Bf(r),r.bypassAuthState)}class Mv{constructor(e,t,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:l,error:h,type:f}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return x1;case"linkViaPopup":case"linkViaRedirect":return D1;case"reauthViaPopup":case"reauthViaRedirect":return N1;default:vr(this.auth,"internal-error")}}resolve(e){$r(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){$r(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const V1=new gl(2e3,1e4);async function O1(r,e,t){if(Un(r.app))return Promise.reject(zn(r,"operation-not-supported-in-this-environment"));const s=jc(r);PS(r,e,Ff);const o=Ov(s,t);return new Ai(s,"signInViaPopup",e,o).executeNotNull()}class Ai extends Mv{constructor(e,t,s,o,l){super(e,t,o,l),this.provider=s,this.authWindow=null,this.pollId=null,Ai.currentPopupAction&&Ai.currentPopupAction.cancel(),Ai.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ke(e,this.auth,"internal-error"),e}async onExecution(){$r(this.filter.length===1,"Popup operations only handle one event");const e=Uf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(zn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(zn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ai.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(zn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,V1.get())};e()}}Ai.currentPopupAction=null;const M1="pendingRedirect",tc=new Map;class b1 extends Mv{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=tc.get(this.auth._key());if(!e){try{const s=await L1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}tc.set(this.auth._key(),e)}return this.bypassAuthState||tc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function L1(r,e){const t=U1(e),s=F1(r);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function j1(r,e){tc.set(r._key(),e)}function F1(r){return Br(r._redirectPersistence)}function U1(r){return ec(M1,r.config.apiKey,r.name)}async function B1(r,e,t=!1){if(Un(r.app))return Promise.reject(Ci(r));const s=jc(r),o=Ov(s,e),h=await new b1(s,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await s._persistUserIfCurrent(h.user),await s._setRedirectUser(null,e)),h}const z1=600*1e3;class $1{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!q1(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!bv(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";t.onError(zn(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=z1&&this.cachedEventUids.clear(),this.cachedEventUids.has(Sy(e))}saveEventToCache(e){this.cachedEventUids.add(Sy(e)),this.lastProcessedEventTime=Date.now()}}function Sy(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function bv({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function q1(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bv(r);default:return!1}}async function W1(r,e={}){return Ho(r,"GET","/v1/projects",e)}const H1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,G1=/^https?/;async function K1(r){if(r.config.emulator)return;const{authorizedDomains:e}=await W1(r);for(const t of e)try{if(Q1(t))return}catch{}vr(r,"unauthorized-domain")}function Q1(r){const e=sf(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===s}if(!G1.test(t))return!1;if(H1.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const X1=new gl(3e4,6e4);function Ay(){const r=dr().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function J1(r){return new Promise((e,t)=>{function s(){Ay(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ay(),t(zn(r,"network-request-failed"))},timeout:X1.get()})}if(dr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(dr().gapi?.load)s();else{const o=t1("iframefcb");return dr()[o]=()=>{gapi.load?s():t(zn(r,"network-request-failed"))},ZS(`${e1()}?onload=${o}`).catch(l=>t(l))}}).catch(e=>{throw nc=null,e})}let nc=null;function Y1(r){return nc=nc||J1(r),nc}const Z1=new gl(5e3,15e3),eA="__/auth/iframe",tA="emulator/auth/iframe",nA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sA(r){const e=r.config;ke(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Of(e,tA):`https://${r.config.authDomain}/${eA}`,s={apiKey:e.apiKey,appName:r.name,v:Wo},o=rA.get(r.config.apiHost);o&&(s.eid=o);const l=r._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${ml(s).slice(1)}`}async function iA(r){const e=await Y1(r),t=dr().gapi;return ke(t,r,"internal-error"),e.open({where:document.body,url:sA(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:nA,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const h=zn(r,"network-request-failed"),f=dr().setTimeout(()=>{l(h)},Z1.get());function g(){dr().clearTimeout(f),o(s)}s.ping(g).then(g,()=>{l(h)})}))}const oA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},aA=500,lA=600,uA="_blank",cA="http://localhost";class Ry{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function hA(r,e,t,s=aA,o=lA){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const g={...oA,width:s.toString(),height:o.toString(),top:l,left:h},y=Xt().toLowerCase();t&&(f=gv(y)?uA:t),pv(y)&&(e=e||cA,g.scrollbars="yes");const v=Object.entries(g).reduce((S,[O,q])=>`${S}${O}=${q},`,"");if(WS(y)&&f!=="_self")return dA(e||"",f),new Ry(null);const E=window.open(e||"",f,v);ke(E,r,"popup-blocked");try{E.focus()}catch{}return new Ry(E)}function dA(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}const fA="__/auth/handler",pA="emulator/auth/handler",mA=encodeURIComponent("fac");async function Cy(r,e,t,s,o,l){ke(r.config.authDomain,r,"auth-domain-config-required"),ke(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:Wo,eventId:o};if(e instanceof Ff){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",pI(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))h[v]=E}if(e instanceof yl){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(h.scopes=v.join(","))}r.tenantId&&(h.tid=r.tenantId);const f=h;for(const v of Object.keys(f))f[v]===void 0&&delete f[v];const g=await r._getAppCheckToken(),y=g?`#${mA}=${encodeURIComponent(g)}`:"";return`${gA(r)}?${ml(f).slice(1)}${y}`}function gA({config:r}){return r.emulator?Of(r,pA):`https://${r.authDomain}/${fA}`}const Bd="webStorageSupport";class yA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=kv,this._completeRedirectFn=B1,this._overrideRedirectResult=j1}async _openPopup(e,t,s,o){$r(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await Cy(e,t,s,sf(),o);return hA(e,l,Uf())}async _openRedirect(e,t,s,o){await this._originValidation(e);const l=await Cy(e,t,s,sf(),o);return w1(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):($r(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await iA(e),s=new $1(e);return t.register("authEvent",o=>(ke(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Bd,{type:Bd},o=>{const l=o?.[0]?.[Bd];l!==void 0&&t(!!l),vr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=K1(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Ev()||mv()||Lf()}}const _A=yA;var Py="@firebase/auth",ky="1.12.0";class vA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function wA(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function EA(r){Oo(new xi("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:f}=s.options;ke(h&&!h.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:h,authDomain:f,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Tv(r)},y=new JS(s,o,l,g);return r1(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Oo(new xi("auth-internal",e=>{const t=jc(e.getProvider("auth").getImmediate());return(s=>new vA(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Os(Py,ky,wA(r)),Os(Py,ky,"esm2020")}const TA=300,IA=Y_("authIdTokenMaxAge")||TA;let xy=null;const SA=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>IA)return;const o=t?.token;xy!==o&&(xy=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function AA(r=sv()){const e=Nf(r,"auth");if(e.isInitialized())return e.getImmediate();const t=n1(r,{popupRedirectResolver:_A,persistence:[k1,y1,kv]}),s=Y_("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const h=SA(l.toString());d1(t,h,()=>h(t.currentUser)),h1(t,f=>h(f))}}const o=X_("auth");return o&&s1(t,`http://${o}`),t}function RA(){return document.getElementsByTagName("head")?.[0]??document}YS({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const l=zn("internal-error");l.customData=o,t(l)},s.type="text/javascript",s.charset="UTF-8",RA().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});EA("Browser");var Ny=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ms,Lv;(function(){var r;function e(A,R){function P(){}P.prototype=R.prototype,A.F=R.prototype,A.prototype=new P,A.prototype.constructor=A,A.D=function(N,k,D){for(var C=Array(arguments.length-2),se=2;se<arguments.length;se++)C[se-2]=arguments[se];return R.prototype[k].apply(N,C)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(A,R,P){P||(P=0);const N=Array(16);if(typeof R=="string")for(var k=0;k<16;++k)N[k]=R.charCodeAt(P++)|R.charCodeAt(P++)<<8|R.charCodeAt(P++)<<16|R.charCodeAt(P++)<<24;else for(k=0;k<16;++k)N[k]=R[P++]|R[P++]<<8|R[P++]<<16|R[P++]<<24;R=A.g[0],P=A.g[1],k=A.g[2];let D=A.g[3],C;C=R+(D^P&(k^D))+N[0]+3614090360&4294967295,R=P+(C<<7&4294967295|C>>>25),C=D+(k^R&(P^k))+N[1]+3905402710&4294967295,D=R+(C<<12&4294967295|C>>>20),C=k+(P^D&(R^P))+N[2]+606105819&4294967295,k=D+(C<<17&4294967295|C>>>15),C=P+(R^k&(D^R))+N[3]+3250441966&4294967295,P=k+(C<<22&4294967295|C>>>10),C=R+(D^P&(k^D))+N[4]+4118548399&4294967295,R=P+(C<<7&4294967295|C>>>25),C=D+(k^R&(P^k))+N[5]+1200080426&4294967295,D=R+(C<<12&4294967295|C>>>20),C=k+(P^D&(R^P))+N[6]+2821735955&4294967295,k=D+(C<<17&4294967295|C>>>15),C=P+(R^k&(D^R))+N[7]+4249261313&4294967295,P=k+(C<<22&4294967295|C>>>10),C=R+(D^P&(k^D))+N[8]+1770035416&4294967295,R=P+(C<<7&4294967295|C>>>25),C=D+(k^R&(P^k))+N[9]+2336552879&4294967295,D=R+(C<<12&4294967295|C>>>20),C=k+(P^D&(R^P))+N[10]+4294925233&4294967295,k=D+(C<<17&4294967295|C>>>15),C=P+(R^k&(D^R))+N[11]+2304563134&4294967295,P=k+(C<<22&4294967295|C>>>10),C=R+(D^P&(k^D))+N[12]+1804603682&4294967295,R=P+(C<<7&4294967295|C>>>25),C=D+(k^R&(P^k))+N[13]+4254626195&4294967295,D=R+(C<<12&4294967295|C>>>20),C=k+(P^D&(R^P))+N[14]+2792965006&4294967295,k=D+(C<<17&4294967295|C>>>15),C=P+(R^k&(D^R))+N[15]+1236535329&4294967295,P=k+(C<<22&4294967295|C>>>10),C=R+(k^D&(P^k))+N[1]+4129170786&4294967295,R=P+(C<<5&4294967295|C>>>27),C=D+(P^k&(R^P))+N[6]+3225465664&4294967295,D=R+(C<<9&4294967295|C>>>23),C=k+(R^P&(D^R))+N[11]+643717713&4294967295,k=D+(C<<14&4294967295|C>>>18),C=P+(D^R&(k^D))+N[0]+3921069994&4294967295,P=k+(C<<20&4294967295|C>>>12),C=R+(k^D&(P^k))+N[5]+3593408605&4294967295,R=P+(C<<5&4294967295|C>>>27),C=D+(P^k&(R^P))+N[10]+38016083&4294967295,D=R+(C<<9&4294967295|C>>>23),C=k+(R^P&(D^R))+N[15]+3634488961&4294967295,k=D+(C<<14&4294967295|C>>>18),C=P+(D^R&(k^D))+N[4]+3889429448&4294967295,P=k+(C<<20&4294967295|C>>>12),C=R+(k^D&(P^k))+N[9]+568446438&4294967295,R=P+(C<<5&4294967295|C>>>27),C=D+(P^k&(R^P))+N[14]+3275163606&4294967295,D=R+(C<<9&4294967295|C>>>23),C=k+(R^P&(D^R))+N[3]+4107603335&4294967295,k=D+(C<<14&4294967295|C>>>18),C=P+(D^R&(k^D))+N[8]+1163531501&4294967295,P=k+(C<<20&4294967295|C>>>12),C=R+(k^D&(P^k))+N[13]+2850285829&4294967295,R=P+(C<<5&4294967295|C>>>27),C=D+(P^k&(R^P))+N[2]+4243563512&4294967295,D=R+(C<<9&4294967295|C>>>23),C=k+(R^P&(D^R))+N[7]+1735328473&4294967295,k=D+(C<<14&4294967295|C>>>18),C=P+(D^R&(k^D))+N[12]+2368359562&4294967295,P=k+(C<<20&4294967295|C>>>12),C=R+(P^k^D)+N[5]+4294588738&4294967295,R=P+(C<<4&4294967295|C>>>28),C=D+(R^P^k)+N[8]+2272392833&4294967295,D=R+(C<<11&4294967295|C>>>21),C=k+(D^R^P)+N[11]+1839030562&4294967295,k=D+(C<<16&4294967295|C>>>16),C=P+(k^D^R)+N[14]+4259657740&4294967295,P=k+(C<<23&4294967295|C>>>9),C=R+(P^k^D)+N[1]+2763975236&4294967295,R=P+(C<<4&4294967295|C>>>28),C=D+(R^P^k)+N[4]+1272893353&4294967295,D=R+(C<<11&4294967295|C>>>21),C=k+(D^R^P)+N[7]+4139469664&4294967295,k=D+(C<<16&4294967295|C>>>16),C=P+(k^D^R)+N[10]+3200236656&4294967295,P=k+(C<<23&4294967295|C>>>9),C=R+(P^k^D)+N[13]+681279174&4294967295,R=P+(C<<4&4294967295|C>>>28),C=D+(R^P^k)+N[0]+3936430074&4294967295,D=R+(C<<11&4294967295|C>>>21),C=k+(D^R^P)+N[3]+3572445317&4294967295,k=D+(C<<16&4294967295|C>>>16),C=P+(k^D^R)+N[6]+76029189&4294967295,P=k+(C<<23&4294967295|C>>>9),C=R+(P^k^D)+N[9]+3654602809&4294967295,R=P+(C<<4&4294967295|C>>>28),C=D+(R^P^k)+N[12]+3873151461&4294967295,D=R+(C<<11&4294967295|C>>>21),C=k+(D^R^P)+N[15]+530742520&4294967295,k=D+(C<<16&4294967295|C>>>16),C=P+(k^D^R)+N[2]+3299628645&4294967295,P=k+(C<<23&4294967295|C>>>9),C=R+(k^(P|~D))+N[0]+4096336452&4294967295,R=P+(C<<6&4294967295|C>>>26),C=D+(P^(R|~k))+N[7]+1126891415&4294967295,D=R+(C<<10&4294967295|C>>>22),C=k+(R^(D|~P))+N[14]+2878612391&4294967295,k=D+(C<<15&4294967295|C>>>17),C=P+(D^(k|~R))+N[5]+4237533241&4294967295,P=k+(C<<21&4294967295|C>>>11),C=R+(k^(P|~D))+N[12]+1700485571&4294967295,R=P+(C<<6&4294967295|C>>>26),C=D+(P^(R|~k))+N[3]+2399980690&4294967295,D=R+(C<<10&4294967295|C>>>22),C=k+(R^(D|~P))+N[10]+4293915773&4294967295,k=D+(C<<15&4294967295|C>>>17),C=P+(D^(k|~R))+N[1]+2240044497&4294967295,P=k+(C<<21&4294967295|C>>>11),C=R+(k^(P|~D))+N[8]+1873313359&4294967295,R=P+(C<<6&4294967295|C>>>26),C=D+(P^(R|~k))+N[15]+4264355552&4294967295,D=R+(C<<10&4294967295|C>>>22),C=k+(R^(D|~P))+N[6]+2734768916&4294967295,k=D+(C<<15&4294967295|C>>>17),C=P+(D^(k|~R))+N[13]+1309151649&4294967295,P=k+(C<<21&4294967295|C>>>11),C=R+(k^(P|~D))+N[4]+4149444226&4294967295,R=P+(C<<6&4294967295|C>>>26),C=D+(P^(R|~k))+N[11]+3174756917&4294967295,D=R+(C<<10&4294967295|C>>>22),C=k+(R^(D|~P))+N[2]+718787259&4294967295,k=D+(C<<15&4294967295|C>>>17),C=P+(D^(k|~R))+N[9]+3951481745&4294967295,A.g[0]=A.g[0]+R&4294967295,A.g[1]=A.g[1]+(k+(C<<21&4294967295|C>>>11))&4294967295,A.g[2]=A.g[2]+k&4294967295,A.g[3]=A.g[3]+D&4294967295}s.prototype.v=function(A,R){R===void 0&&(R=A.length);const P=R-this.blockSize,N=this.C;let k=this.h,D=0;for(;D<R;){if(k==0)for(;D<=P;)o(this,A,D),D+=this.blockSize;if(typeof A=="string"){for(;D<R;)if(N[k++]=A.charCodeAt(D++),k==this.blockSize){o(this,N),k=0;break}}else for(;D<R;)if(N[k++]=A[D++],k==this.blockSize){o(this,N),k=0;break}}this.h=k,this.o+=R},s.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var R=1;R<A.length-8;++R)A[R]=0;R=this.o*8;for(var P=A.length-8;P<A.length;++P)A[P]=R&255,R/=256;for(this.v(A),A=Array(16),R=0,P=0;P<4;++P)for(let N=0;N<32;N+=8)A[R++]=this.g[P]>>>N&255;return A};function l(A,R){var P=f;return Object.prototype.hasOwnProperty.call(P,A)?P[A]:P[A]=R(A)}function h(A,R){this.h=R;const P=[];let N=!0;for(let k=A.length-1;k>=0;k--){const D=A[k]|0;N&&D==R||(P[k]=D,N=!1)}this.g=P}var f={};function g(A){return-128<=A&&A<128?l(A,function(R){return new h([R|0],R<0?-1:0)}):new h([A|0],A<0?-1:0)}function y(A){if(isNaN(A)||!isFinite(A))return E;if(A<0)return L(y(-A));const R=[];let P=1;for(let N=0;A>=P;N++)R[N]=A/P|0,P*=4294967296;return new h(R,0)}function v(A,R){if(A.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(A.charAt(0)=="-")return L(v(A.substring(1),R));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const P=y(Math.pow(R,8));let N=E;for(let D=0;D<A.length;D+=8){var k=Math.min(8,A.length-D);const C=parseInt(A.substring(D,D+k),R);k<8?(k=y(Math.pow(R,k)),N=N.j(k).add(y(C))):(N=N.j(P),N=N.add(y(C)))}return N}var E=g(0),S=g(1),O=g(16777216);r=h.prototype,r.m=function(){if($(this))return-L(this).m();let A=0,R=1;for(let P=0;P<this.g.length;P++){const N=this.i(P);A+=(N>=0?N:4294967296+N)*R,R*=4294967296}return A},r.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(q(this))return"0";if($(this))return"-"+L(this).toString(A);const R=y(Math.pow(A,6));var P=this;let N="";for(;;){const k=H(P,R).g;P=ne(P,k.j(R));let D=((P.g.length>0?P.g[0]:P.h)>>>0).toString(A);if(P=k,q(P))return D+N;for(;D.length<6;)D="0"+D;N=D+N}},r.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function q(A){if(A.h!=0)return!1;for(let R=0;R<A.g.length;R++)if(A.g[R]!=0)return!1;return!0}function $(A){return A.h==-1}r.l=function(A){return A=ne(this,A),$(A)?-1:q(A)?0:1};function L(A){const R=A.g.length,P=[];for(let N=0;N<R;N++)P[N]=~A.g[N];return new h(P,~A.h).add(S)}r.abs=function(){return $(this)?L(this):this},r.add=function(A){const R=Math.max(this.g.length,A.g.length),P=[];let N=0;for(let k=0;k<=R;k++){let D=N+(this.i(k)&65535)+(A.i(k)&65535),C=(D>>>16)+(this.i(k)>>>16)+(A.i(k)>>>16);N=C>>>16,D&=65535,C&=65535,P[k]=C<<16|D}return new h(P,P[P.length-1]&-2147483648?-1:0)};function ne(A,R){return A.add(L(R))}r.j=function(A){if(q(this)||q(A))return E;if($(this))return $(A)?L(this).j(L(A)):L(L(this).j(A));if($(A))return L(this.j(L(A)));if(this.l(O)<0&&A.l(O)<0)return y(this.m()*A.m());const R=this.g.length+A.g.length,P=[];for(var N=0;N<2*R;N++)P[N]=0;for(N=0;N<this.g.length;N++)for(let k=0;k<A.g.length;k++){const D=this.i(N)>>>16,C=this.i(N)&65535,se=A.i(k)>>>16,me=A.i(k)&65535;P[2*N+2*k]+=C*me,Y(P,2*N+2*k),P[2*N+2*k+1]+=D*me,Y(P,2*N+2*k+1),P[2*N+2*k+1]+=C*se,Y(P,2*N+2*k+1),P[2*N+2*k+2]+=D*se,Y(P,2*N+2*k+2)}for(A=0;A<R;A++)P[A]=P[2*A+1]<<16|P[2*A];for(A=R;A<2*R;A++)P[A]=0;return new h(P,0)};function Y(A,R){for(;(A[R]&65535)!=A[R];)A[R+1]+=A[R]>>>16,A[R]&=65535,R++}function te(A,R){this.g=A,this.h=R}function H(A,R){if(q(R))throw Error("division by zero");if(q(A))return new te(E,E);if($(A))return R=H(L(A),R),new te(L(R.g),L(R.h));if($(R))return R=H(A,L(R)),new te(L(R.g),R.h);if(A.g.length>30){if($(A)||$(R))throw Error("slowDivide_ only works with positive integers.");for(var P=S,N=R;N.l(A)<=0;)P=ie(P),N=ie(N);var k=le(P,1),D=le(N,1);for(N=le(N,2),P=le(P,2);!q(N);){var C=D.add(N);C.l(A)<=0&&(k=k.add(P),D=C),N=le(N,1),P=le(P,1)}return R=ne(A,k.j(R)),new te(k,R)}for(k=E;A.l(R)>=0;){for(P=Math.max(1,Math.floor(A.m()/R.m())),N=Math.ceil(Math.log(P)/Math.LN2),N=N<=48?1:Math.pow(2,N-48),D=y(P),C=D.j(R);$(C)||C.l(A)>0;)P-=N,D=y(P),C=D.j(R);q(D)&&(D=S),k=k.add(D),A=ne(A,C)}return new te(k,A)}r.B=function(A){return H(this,A).h},r.and=function(A){const R=Math.max(this.g.length,A.g.length),P=[];for(let N=0;N<R;N++)P[N]=this.i(N)&A.i(N);return new h(P,this.h&A.h)},r.or=function(A){const R=Math.max(this.g.length,A.g.length),P=[];for(let N=0;N<R;N++)P[N]=this.i(N)|A.i(N);return new h(P,this.h|A.h)},r.xor=function(A){const R=Math.max(this.g.length,A.g.length),P=[];for(let N=0;N<R;N++)P[N]=this.i(N)^A.i(N);return new h(P,this.h^A.h)};function ie(A){const R=A.g.length+1,P=[];for(let N=0;N<R;N++)P[N]=A.i(N)<<1|A.i(N-1)>>>31;return new h(P,A.h)}function le(A,R){const P=R>>5;R%=32;const N=A.g.length-P,k=[];for(let D=0;D<N;D++)k[D]=R>0?A.i(D+P)>>>R|A.i(D+P+1)<<32-R:A.i(D+P);return new h(k,A.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Lv=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=v,Ms=h}).apply(typeof Ny<"u"?Ny:typeof self<"u"?self:typeof window<"u"?window:{});var Hu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var jv,Ha,Fv,rc,lf,Uv,Bv,zv;(function(){var r,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hu=="object"&&Hu];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=t(this);function o(u,m){if(m)e:{var _=s;u=u.split(".");for(var I=0;I<u.length-1;I++){var F=u[I];if(!(F in _))break e;_=_[F]}u=u[u.length-1],I=_[u],m=m(I),m!=I&&m!=null&&e(_,u,{configurable:!0,writable:!0,value:m})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(m){var _=[],I;for(I in m)Object.prototype.hasOwnProperty.call(m,I)&&_.push([I,m[I]]);return _}});var l=l||{},h=this||self;function f(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function g(u,m,_){return u.call.apply(u.bind,arguments)}function y(u,m,_){return y=g,y.apply(null,arguments)}function v(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var I=_.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function E(u,m){function _(){}_.prototype=m.prototype,u.Z=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Ob=function(I,F,z){for(var re=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)re[Ve-2]=arguments[Ve];return m.prototype[F].apply(I,re)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function O(u){const m=u.length;if(m>0){const _=Array(m);for(let I=0;I<m;I++)_[I]=u[I];return _}return[]}function q(u,m){for(let I=1;I<arguments.length;I++){const F=arguments[I];var _=typeof F;if(_=_!="object"?_:F?Array.isArray(F)?"array":_:"null",_=="array"||_=="object"&&typeof F.length=="number"){_=u.length||0;const z=F.length||0;u.length=_+z;for(let re=0;re<z;re++)u[_+re]=F[re]}else u.push(F)}}class ${constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function L(u){h.setTimeout(()=>{throw u},0)}function ne(){var u=A;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class Y{constructor(){this.h=this.g=null}add(m,_){const I=te.get();I.set(m,_),this.h?this.h.next=I:this.g=I,this.h=I}}var te=new $(()=>new H,u=>u.reset());class H{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,le=!1,A=new Y,R=()=>{const u=Promise.resolve(void 0);ie=()=>{u.then(P)}};function P(){for(var u;u=ne();){try{u.h.call(u.g)}catch(_){L(_)}var m=te;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}le=!1}function N(){this.u=this.u,this.C=this.C}N.prototype.u=!1,N.prototype.dispose=function(){this.u||(this.u=!0,this.N())},N.prototype[Symbol.dispose]=function(){this.dispose()},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var D=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};h.addEventListener("test",_,m),h.removeEventListener("test",_,m)}catch{}return u})();function C(u){return/^[\s\xa0]*$/.test(u)}function se(u,m){k.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}E(se,k),se.prototype.init=function(u,m){const _=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(_=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&se.Z.h.call(this)},se.prototype.h=function(){se.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var me="closure_listenable_"+(Math.random()*1e6|0),Le=0;function Ie(u,m,_,I,F){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!I,this.ha=F,this.key=++Le,this.da=this.fa=!1}function Z(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ye(u,m,_){for(const I in u)m.call(_,u[I],I,u)}function ue(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function b(u){const m={};for(const _ in u)m[_]=u[_];return m}const G="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Re(u,m){let _,I;for(let F=1;F<arguments.length;F++){I=arguments[F];for(_ in I)u[_]=I[_];for(let z=0;z<G.length;z++)_=G[z],Object.prototype.hasOwnProperty.call(I,_)&&(u[_]=I[_])}}function xe(u){this.src=u,this.g={},this.h=0}xe.prototype.add=function(u,m,_,I,F){const z=u.toString();u=this.g[z],u||(u=this.g[z]=[],this.h++);const re=be(u,m,I,F);return re>-1?(m=u[re],_||(m.fa=!1)):(m=new Ie(m,this.src,z,!!I,F),m.fa=_,u.push(m)),m};function Me(u,m){const _=m.type;if(_ in u.g){var I=u.g[_],F=Array.prototype.indexOf.call(I,m,void 0),z;(z=F>=0)&&Array.prototype.splice.call(I,F,1),z&&(Z(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function be(u,m,_,I){for(let F=0;F<u.length;++F){const z=u[F];if(!z.da&&z.listener==m&&z.capture==!!_&&z.ha==I)return F}return-1}var oe="closure_lm_"+(Math.random()*1e6|0),De={};function Oe(u,m,_,I,F){if(Array.isArray(m)){for(let z=0;z<m.length;z++)Oe(u,m[z],_,I,F);return null}return _=Yo(_),u&&u[me]?u.J(m,_,f(I)?!!I.capture:!1,F):mt(u,m,_,!1,I,F)}function mt(u,m,_,I,F,z){if(!m)throw Error("Invalid event type");const re=f(F)?!!F.capture:!!F;let Ve=ji(u);if(Ve||(u[oe]=Ve=new xe(u)),_=Ve.add(m,_,I,re,z),_.proxy)return _;if(I=Vt(),_.proxy=I,I.src=u,I.listener=_,u.addEventListener)D||(F=re),F===void 0&&(F=!1),u.addEventListener(m.toString(),I,F);else if(u.attachEvent)u.attachEvent(Li(m.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Vt(){function u(_){return m.call(u.src,u.listener,_)}const m=kl;return u}function Wn(u,m,_,I,F){if(Array.isArray(m))for(var z=0;z<m.length;z++)Wn(u,m[z],_,I,F);else I=f(I)?!!I.capture:!!I,_=Yo(_),u&&u[me]?(u=u.i,z=String(m).toString(),z in u.g&&(m=u.g[z],_=be(m,_,I,F),_>-1&&(Z(m[_]),Array.prototype.splice.call(m,_,1),m.length==0&&(delete u.g[z],u.h--)))):u&&(u=ji(u))&&(m=u.g[m.toString()],u=-1,m&&(u=be(m,_,I,F)),(_=u>-1?m[u]:null)&&wn(_))}function wn(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[me])Me(m.i,u);else{var _=u.type,I=u.proxy;m.removeEventListener?m.removeEventListener(_,I,u.capture):m.detachEvent?m.detachEvent(Li(_),I):m.addListener&&m.removeListener&&m.removeListener(I),(_=ji(m))?(Me(_,u),_.h==0&&(_.src=null,m[oe]=null)):Z(u)}}}function Li(u){return u in De?De[u]:De[u]="on"+u}function kl(u,m){if(u.da)u=!0;else{m=new se(m,this);const _=u.listener,I=u.ha||u.src;u.fa&&wn(u),u=_.call(I,m)}return u}function ji(u){return u=u[oe],u instanceof xe?u:null}var Xs="__closure_events_fn_"+(Math.random()*1e9>>>0);function Yo(u){return typeof u=="function"?u:(u[Xs]||(u[Xs]=function(m){return u.handleEvent(m)}),u[Xs])}function gt(){N.call(this),this.i=new xe(this),this.M=this,this.G=null}E(gt,N),gt.prototype[me]=!0,gt.prototype.removeEventListener=function(u,m,_,I){Wn(this,u,m,_,I)};function ct(u,m){var _,I=u.G;if(I)for(_=[];I;I=I.G)_.push(I);if(u=u.M,I=m.type||m,typeof m=="string")m=new k(m,u);else if(m instanceof k)m.target=m.target||u;else{var F=m;m=new k(I,u),Re(m,F)}F=!0;let z,re;if(_)for(re=_.length-1;re>=0;re--)z=m.g=_[re],F=xn(z,I,!0,m)&&F;if(z=m.g=u,F=xn(z,I,!0,m)&&F,F=xn(z,I,!1,m)&&F,_)for(re=0;re<_.length;re++)z=m.g=_[re],F=xn(z,I,!1,m)&&F}gt.prototype.N=function(){if(gt.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const _=u.g[m];for(let I=0;I<_.length;I++)Z(_[I]);delete u.g[m],u.h--}}this.G=null},gt.prototype.J=function(u,m,_,I){return this.i.add(String(u),m,!1,_,I)},gt.prototype.K=function(u,m,_,I){return this.i.add(String(u),m,!0,_,I)};function xn(u,m,_,I){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let F=!0;for(let z=0;z<m.length;++z){const re=m[z];if(re&&!re.da&&re.capture==_){const Ve=re.listener,ht=re.ha||re.src;re.fa&&Me(u.i,re),F=Ve.call(ht,I)!==!1&&F}}return F&&!I.defaultPrevented}function Zo(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=y(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:h.setTimeout(u,m||0)}function ea(u){u.g=Zo(()=>{u.g=null,u.i&&(u.i=!1,ea(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class xl extends N{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:ea(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qr(u){N.call(this),this.h=u,this.g={}}E(Qr,N);var ta=[];function Fi(u){ye(u.g,function(m,_){this.g.hasOwnProperty(_)&&wn(m)},u),u.g={}}Qr.prototype.N=function(){Qr.Z.N.call(this),Fi(this)},Qr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Xr=h.JSON.stringify,Nl=h.JSON.parse,Js=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function Jr(){}function Dl(){}var Yr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ui(){k.call(this,"d")}E(Ui,k);function na(){k.call(this,"c")}E(na,k);var Nn={},Bi=null;function Zr(){return Bi=Bi||new gt}Nn.Ia="serverreachability";function zi(u){k.call(this,Nn.Ia,u)}E(zi,k);function Er(u){const m=Zr();ct(m,new zi(m))}Nn.STAT_EVENT="statevent";function Tr(u,m){k.call(this,Nn.STAT_EVENT,u),this.stat=m}E(Tr,k);function at(u){const m=Zr();ct(m,new Tr(m,u))}Nn.Ja="timingevent";function ra(u,m){k.call(this,Nn.Ja,u),this.size=m}E(ra,k);function es(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},m)}function ts(){this.g=!0}ts.prototype.ua=function(){this.g=!1};function Vl(u,m,_,I,F,z){u.info(function(){if(u.g)if(z){var re="",Ve=z.split("&");for(let Qe=0;Qe<Ve.length;Qe++){var ht=Ve[Qe].split("=");if(ht.length>1){const yt=ht[0];ht=ht[1];const fn=yt.split("_");re=fn.length>=2&&fn[1]=="type"?re+(yt+"="+ht+"&"):re+(yt+"=redacted&")}}}else re=null;else re=z;return"XMLHTTP REQ ("+I+") [attempt "+F+"]: "+m+`
`+_+`
`+re})}function Ol(u,m,_,I,F,z,re){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+F+"]: "+m+`
`+_+`
`+z+" "+re})}function Hn(u,m,_,I){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Ys(u,_)+(I?" "+I:"")})}function Ml(u,m){u.info(function(){return"TIMEOUT: "+m})}ts.prototype.info=function(){};function Ys(u,m){if(!u.g)return m;if(!m)return null;try{const z=JSON.parse(m);if(z){for(u=0;u<z.length;u++)if(Array.isArray(z[u])){var _=z[u];if(!(_.length<2)){var I=_[1];if(Array.isArray(I)&&!(I.length<1)){var F=I[0];if(F!="noop"&&F!="stop"&&F!="close")for(let re=1;re<I.length;re++)I[re]=""}}}}return Xr(z)}catch{return m}}var ns={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},rs={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},bl;function Ir(){}E(Ir,Jr),Ir.prototype.g=function(){return new XMLHttpRequest},bl=new Ir;function Gn(u){return encodeURIComponent(String(u))}function $i(u){var m=1;u=u.split(":");const _=[];for(;m>0&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function En(u,m,_,I){this.j=u,this.i=m,this.l=_,this.S=I||1,this.V=new Qr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ll}function Ll(){this.i=null,this.g="",this.h=!1}var jl={},sa={};function Dn(u,m,_){u.M=1,u.A=Ar(Tn(m)),u.u=_,u.R=!0,ia(u,null)}function ia(u,m){u.F=Date.now(),Zs(u),u.B=Tn(u.A);var _=u.B,I=u.S;Array.isArray(I)||(I=[String(I)]),ma(_.i,"t",I),u.C=0,_=u.j.L,u.h=new Ll,u.g=Kl(u.j,_?m:null,!u.u),u.P>0&&(u.O=new xl(y(u.Y,u,u.g),u.P)),m=u.V,_=u.g,I=u.ba;var F="readystatechange";Array.isArray(F)||(F&&(ta[0]=F.toString()),F=ta);for(let z=0;z<F.length;z++){const re=Oe(_,F[z],I||m.handleEvent,!1,m.h||m);if(!re)break;m.g[re.key]=re}m=u.J?b(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),Er(),Vl(u.i,u.v,u.B,u.l,u.S,u.u)}En.prototype.ba=function(u){u=u.target;const m=this.O;m&&er(u)==3?m.j():this.Y(u)},En.prototype.Y=function(u){try{if(u==this.g)e:{const Ve=er(this.g),ht=this.g.ya(),Qe=this.g.ca();if(!(Ve<3)&&(Ve!=3||this.g&&(this.h.h||this.g.la()||Hl(this.g)))){this.K||Ve!=4||ht==7||(ht==8||Qe<=0?Er(3):Er(2)),qi(this);var m=this.g.ca();this.X=m;var _=Fl(this);if(this.o=m==200,Ol(this.i,this.v,this.B,this.l,this.S,Ve,m),this.o){if(this.U&&!this.L){t:{if(this.g){var I,F=this.g;if((I=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(I)){var z=I;break t}}z=null}if(u=z)Hn(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ze(this,u);else{this.o=!1,this.m=3,at(12),Sr(this),ei(this);break e}}if(this.R){u=!0;let yt;for(;!this.K&&this.C<_.length;)if(yt=Bl(this,_),yt==sa){Ve==4&&(this.m=4,at(14),u=!1),Hn(this.i,this.l,null,"[Incomplete Response]");break}else if(yt==jl){this.m=4,at(15),Hn(this.i,this.l,_,"[Invalid Chunk]"),u=!1;break}else Hn(this.i,this.l,yt,null),Ze(this,yt);if(Ul(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ve!=4||_.length!=0||this.h.h||(this.m=1,at(16),u=!1),this.o=this.o&&u,!u)Hn(this.i,this.l,_,"[Invalid Chunked Response]"),Sr(this),ei(this);else if(_.length>0&&!this.W){this.W=!0;var re=this.j;re.g==this&&re.aa&&!re.P&&(re.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),ui(re),re.P=!0,at(11))}}else Hn(this.i,this.l,_,null),Ze(this,_);Ve==4&&Sr(this),this.o&&!this.K&&(Ve==4?eo(this.j,this):(this.o=!1,Zs(this)))}else ya(this.g),m==400&&_.indexOf("Unknown SID")>0?(this.m=3,at(12)):(this.m=0,at(13)),Sr(this),ei(this)}}}catch{}};function Fl(u){if(!Ul(u))return u.g.la();const m=Hl(u.g);if(m==="")return"";let _="";const I=m.length,F=er(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Sr(u),ei(u),"";u.h.i=new h.TextDecoder}for(let z=0;z<I;z++)u.h.h=!0,_+=u.h.i.decode(m[z],{stream:!(F&&z==I-1)});return m.length=0,u.h.g+=_,u.C=0,u.h.g}function Ul(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Bl(u,m){var _=u.C,I=m.indexOf(`
`,_);return I==-1?sa:(_=Number(m.substring(_,I)),isNaN(_)?jl:(I+=1,I+_>m.length?sa:(m=m.slice(I,I+_),u.C=I+_,m)))}En.prototype.cancel=function(){this.K=!0,Sr(this)};function Zs(u){u.T=Date.now()+u.H,oa(u,u.H)}function oa(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=es(y(u.aa,u),m)}function qi(u){u.D&&(h.clearTimeout(u.D),u.D=null)}En.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Ml(this.i,this.B),this.M!=2&&(Er(),at(17)),Sr(this),this.m=2,ei(this)):oa(this,this.T-u)};function ei(u){u.j.I==0||u.K||eo(u.j,u)}function Sr(u){qi(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,Fi(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function Ze(u,m){try{var _=u.j;if(_.I!=0&&(_.g==u||la(_.h,u))){if(!u.L&&la(_.h,u)&&_.I==3){try{var I=_.Ba.g.parse(m)}catch{I=null}if(Array.isArray(I)&&I.length==3){var F=I;if(F[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<u.F)Zi(_),hn(_);else break e;rr(_),at(18)}}else _.xa=F[1],0<_.xa-_.K&&F[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=es(y(_.Va,_),6e3));ti(_.h)<=1&&_.ta&&(_.ta=void 0)}else dn(_,11)}else if((u.L||_.g==u)&&Zi(_),!C(m))for(F=_.Ba.g.parse(m),m=0;m<F.length;m++){let Qe=F[m];const yt=Qe[0];if(!(yt<=_.K))if(_.K=yt,Qe=Qe[1],_.I==2)if(Qe[0]=="c"){_.M=Qe[1],_.ba=Qe[2];const fn=Qe[3];fn!=null&&(_.ka=fn,_.j.info("VER="+_.ka));const xr=Qe[4];xr!=null&&(_.za=xr,_.j.info("SVER="+_.za));const sr=Qe[5];sr!=null&&typeof sr=="number"&&sr>0&&(I=1.5*sr,_.O=I,_.j.info("backChannelRequestTimeoutMs_="+I)),I=_;const ir=u.g;if(ir){const ro=ir.g?ir.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ro){var z=I.h;z.g||ro.indexOf("spdy")==-1&&ro.indexOf("quic")==-1&&ro.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(Hi(z,z.h),z.h=null))}if(I.G){const wa=ir.g?ir.g.getResponseHeader("X-HTTP-Session-Id"):null;wa&&(I.wa=wa,Ke(I.J,I.G,wa))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-u.F,_.j.info("Handshake RTT: "+_.T+"ms")),I=_;var re=u;if(I.na=va(I,I.L?I.ba:null,I.W),re.L){ni(I.h,re);var Ve=re,ht=I.O;ht&&(Ve.H=ht),Ve.D&&(qi(Ve),Zs(Ve)),I.g=re}else zt(I);_.i.length>0&&kr(_)}else Qe[0]!="stop"&&Qe[0]!="close"||dn(_,7);else _.I==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?dn(_,7):Ji(_):Qe[0]!="noop"&&_.l&&_.l.qa(Qe),_.A=0)}}Er(4)}catch{}}var oh=class{constructor(u,m){this.g=u,this.map=m}};function Wi(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function aa(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ti(u){return u.h?1:u.g?u.g.size:0}function la(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Hi(u,m){u.g?u.g.add(m):u.h=m}function ni(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Wi.prototype.cancel=function(){if(this.i=ln(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function ln(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.G);return m}return O(u.i)}var zl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function un(u,m){if(u){u=u.split("&");for(let _=0;_<u.length;_++){const I=u[_].indexOf("=");let F,z=null;I>=0?(F=u[_].substring(0,I),z=u[_].substring(I+1)):F=u[_],m(F,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function Kn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof Kn?(this.l=u.l,ri(this,u.j),this.o=u.o,this.g=u.g,Qn(this,u.u),this.h=u.h,ss(this,ga(u.i)),this.m=u.m):u&&(m=String(u).match(zl))?(this.l=!1,ri(this,m[1]||"",!0),this.o=si(m[2]||""),this.g=si(m[3]||"",!0),Qn(this,m[4]),this.h=si(m[5]||"",!0),ss(this,m[6]||"",!0),this.m=si(m[7]||"")):(this.l=!1,this.i=new $e(null,this.l))}Kn.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(ii(m,ca,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(ii(m,ca,!0),"@"),u.push(Gn(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&u.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(ii(_,_.charAt(0)=="/"?oi:ha,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",ii(_,da)),u.join("")},Kn.prototype.resolve=function(u){const m=Tn(this);let _=!!u.j;_?ri(m,u.j):_=!!u.o,_?m.o=u.o:_=!!u.g,_?m.g=u.g:_=u.u!=null;var I=u.h;if(_)Qn(m,u.u);else if(_=!!u.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var F=m.h.lastIndexOf("/");F!=-1&&(I=m.h.slice(0,F+1)+I)}if(F=I,F==".."||F==".")I="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){I=F.lastIndexOf("/",0)==0,F=F.split("/");const z=[];for(let re=0;re<F.length;){const Ve=F[re++];Ve=="."?I&&re==F.length&&z.push(""):Ve==".."?((z.length>1||z.length==1&&z[0]!="")&&z.pop(),I&&re==F.length&&z.push("")):(z.push(Ve),I=!0)}I=z.join("/")}else I=F}return _?m.h=I:_=u.i.toString()!=="",_?ss(m,ga(u.i)):_=!!u.m,_&&(m.m=u.m),m};function Tn(u){return new Kn(u)}function ri(u,m,_){u.j=_?si(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Qn(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function ss(u,m,_){m instanceof $e?(u.i=m,Ki(u.i,u.l)):(_||(m=ii(m,ah)),u.i=new $e(m,u.l))}function Ke(u,m,_){u.i.set(m,_)}function Ar(u){return Ke(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function si(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ii(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,ua),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function ua(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var ca=/[#\/\?@]/g,ha=/[#\?:]/g,oi=/[#\?]/g,ah=/[#\?@]/g,da=/#/g;function $e(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Xn(u){u.g||(u.g=new Map,u.h=0,u.i&&un(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}r=$e.prototype,r.add=function(u,m){Xn(this),this.i=null,u=Jn(this,u);let _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function fa(u,m){Xn(u),m=Jn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Gi(u,m){return Xn(u),m=Jn(u,m),u.g.has(m)}r.forEach=function(u,m){Xn(this),this.g.forEach(function(_,I){_.forEach(function(F){u.call(m,F,I,this)},this)},this)};function pa(u,m){Xn(u);let _=[];if(typeof m=="string")Gi(u,m)&&(_=_.concat(u.g.get(Jn(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)_=_.concat(u[m]);return _}r.set=function(u,m){return Xn(this),this.i=null,u=Jn(this,u),Gi(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=pa(this,u),u.length>0?String(u[0]):m):m};function ma(u,m,_){fa(u,m),_.length>0&&(u.i=null,u.g.set(Jn(u,m),O(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let I=0;I<m.length;I++){var _=m[I];const F=Gn(_);_=pa(this,_);for(let z=0;z<_.length;z++){let re=F;_[z]!==""&&(re+="="+Gn(_[z])),u.push(re)}}return this.i=u.join("&")};function ga(u){const m=new $e;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function Jn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function Ki(u,m){m&&!u.j&&(Xn(u),u.i=null,u.g.forEach(function(_,I){const F=I.toLowerCase();I!=F&&(fa(this,I),ma(this,F,_))},u)),u.j=m}function Yn(u,m){const _=new ts;if(h.Image){const I=new Image;I.onload=v(Ot,_,"TestLoadImage: loaded",!0,m,I),I.onerror=v(Ot,_,"TestLoadImage: error",!1,m,I),I.onabort=v(Ot,_,"TestLoadImage: abort",!1,m,I),I.ontimeout=v(Ot,_,"TestLoadImage: timeout",!1,m,I),h.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else m(!1)}function Zn(u,m){const _=new ts,I=new AbortController,F=setTimeout(()=>{I.abort(),Ot(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:I.signal}).then(z=>{clearTimeout(F),z.ok?Ot(_,"TestPingServer: ok",!0,m):Ot(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(F),Ot(_,"TestPingServer: error",!1,m)})}function Ot(u,m,_,I,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),I(_)}catch{}}function ai(){this.g=new Js}function Rr(u){this.i=u.Sb||null,this.h=u.ab||!1}E(Rr,Jr),Rr.prototype.g=function(){return new cn(this.i,this.h)};function cn(u,m){gt.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(cn,gt),r=cn.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,Vn(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||h).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,is(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Vn(this)),this.g&&(this.readyState=3,Vn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;$l(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function $l(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?is(this):Vn(this),this.readyState==3&&$l(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,is(this))},r.Na=function(u){this.g&&(this.response=u,is(this))},r.ga=function(){this.g&&is(this)};function is(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Vn(u)}r.setRequestHeader=function(u,m){this.A.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function Vn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(cn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function ql(u){let m="";return ye(u,function(_,I){m+=I,m+=":",m+=_,m+=`\r
`}),m}function Qi(u,m,_){e:{for(I in _){var I=!1;break e}I=!0}I||(_=ql(_),typeof u=="string"?_!=null&&Gn(_):Ke(u,m,_))}function Je(u){gt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(Je,gt);var Wl=/^https?$/i,lh=["POST","PUT"];r=Je.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,m,_,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():bl.g(),this.g.onreadystatechange=S(y(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(z){os(this,z);return}if(u=_||"",_=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var F in I)_.set(F,I[F]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const z of I.keys())_.set(z,I.get(z));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(_.keys()).find(z=>z.toLowerCase()=="content-type"),F=h.FormData&&u instanceof h.FormData,!(Array.prototype.indexOf.call(lh,m,void 0)>=0)||I||F||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,re]of _)this.g.setRequestHeader(z,re);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(z){os(this,z)}};function os(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,as(u),Pr(u)}function as(u){u.A||(u.A=!0,ct(u,"complete"),ct(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,ct(this,"complete"),ct(this,"abort"),Pr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Pr(this,!0)),Je.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Cr(this):this.Xa())},r.Xa=function(){Cr(this)};function Cr(u){if(u.h&&typeof l<"u"){if(u.v&&er(u)==4)setTimeout(u.Ca.bind(u),0);else if(ct(u,"readystatechange"),er(u)==4){u.h=!1;try{const z=u.ca();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var I;if(I=z===0){let re=String(u.D).match(zl)[1]||null;!re&&h.self&&h.self.location&&(re=h.self.location.protocol.slice(0,-1)),I=!Wl.test(re?re.toLowerCase():"")}_=I}if(_)ct(u,"complete"),ct(u,"success");else{u.o=6;try{var F=er(u)>2?u.g.statusText:""}catch{F=""}u.l=F+" ["+u.ca()+"]",as(u)}}finally{Pr(u)}}}}function Pr(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const _=u.g;u.g=null,m||ct(u,"ready");try{_.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function er(u){return u.g?u.g.readyState:0}r.ca=function(){try{return er(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Nl(m)}};function Hl(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function ya(u){const m={};u=(u.g&&er(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(C(u[I]))continue;var _=$i(u[I]);const F=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const z=m[F]||[];m[F]=z,z.push(_)}ue(m,function(I){return I.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function tr(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function Xi(u){this.za=0,this.i=[],this.j=new ts,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=tr("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=tr("baseRetryDelayMs",5e3,u),this.Za=tr("retryDelaySeedMs",1e4,u),this.Ta=tr("forwardChannelMaxRetries",2,u),this.va=tr("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Wi(u&&u.concurrentRequestLimit),this.Ba=new ai,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Xi.prototype,r.ka=8,r.I=1,r.connect=function(u,m,_,I){at(0),this.W=u,this.H=m||{},_&&I!==void 0&&(this.H.OSID=_,this.H.OAID=I),this.F=this.X,this.J=va(this,null,this.W),kr(this)};function Ji(u){if(Yi(u),u.I==3){var m=u.V++,_=Tn(u.J);if(Ke(_,"SID",u.M),Ke(_,"RID",m),Ke(_,"TYPE","terminate"),nr(u,_),m=new En(u,u.j,m),m.M=2,m.A=Ar(Tn(_)),_=!1,h.navigator&&h.navigator.sendBeacon)try{_=h.navigator.sendBeacon(m.A.toString(),"")}catch{}!_&&h.Image&&(new Image().src=m.A,_=!0),_||(m.g=Kl(m.j,null),m.g.ea(m.A)),m.F=Date.now(),Zs(m)}ci(u)}function hn(u){u.g&&(ui(u),u.g.cancel(),u.g=null)}function Yi(u){hn(u),u.v&&(h.clearTimeout(u.v),u.v=null),Zi(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&h.clearTimeout(u.m),u.m=null)}function kr(u){if(!aa(u.h)&&!u.m){u.m=!0;var m=u.Ea;ie||R(),le||(ie(),le=!0),A.add(m,u),u.D=0}}function Gl(u,m){return ti(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=es(y(u.Ea,u,m),to(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const F=new En(this,this.j,u);let z=this.o;if(this.U&&(z?(z=b(z),Re(z,this.U)):z=this.U),this.u!==null||this.R||(F.J=z,z=null),this.S)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var I=this.i[_];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(m+=I,m>4096){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=_a(this,F,m),_=Tn(this.J),Ke(_,"RID",u),Ke(_,"CVER",22),this.G&&Ke(_,"X-HTTP-Session-Id",this.G),nr(this,_),z&&(this.R?m="headers="+Gn(ql(z))+"&"+m:this.u&&Qi(_,this.u,z)),Hi(this.h,F),this.Ra&&Ke(_,"TYPE","init"),this.S?(Ke(_,"$req",m),Ke(_,"SID","null"),F.U=!0,Dn(F,_,null)):Dn(F,_,m),this.I=2}}else this.I==3&&(u?li(this,u):this.i.length==0||aa(this.h)||li(this))};function li(u,m){var _;m?_=m.l:_=u.V++;const I=Tn(u.J);Ke(I,"SID",u.M),Ke(I,"RID",_),Ke(I,"AID",u.K),nr(u,I),u.u&&u.o&&Qi(I,u.u,u.o),_=new En(u,u.j,_,u.D+1),u.u===null&&(_.J=u.o),m&&(u.i=m.G.concat(u.i)),m=_a(u,_,1e3),_.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Hi(u.h,_),Dn(_,I,m)}function nr(u,m){u.H&&ye(u.H,function(_,I){Ke(m,I,_)}),u.l&&ye({},function(_,I){Ke(m,I,_)})}function _a(u,m,_){_=Math.min(u.i.length,_);const I=u.l?y(u.l.Ka,u.l,u):null;e:{var F=u.i;let Ve=-1;for(;;){const ht=["count="+_];Ve==-1?_>0?(Ve=F[0].g,ht.push("ofs="+Ve)):Ve=0:ht.push("ofs="+Ve);let Qe=!0;for(let yt=0;yt<_;yt++){var z=F[yt].g;const fn=F[yt].map;if(z-=Ve,z<0)Ve=Math.max(0,F[yt].g-100),Qe=!1;else try{z="req"+z+"_"||"";try{var re=fn instanceof Map?fn:Object.entries(fn);for(const[xr,sr]of re){let ir=sr;f(sr)&&(ir=Xr(sr)),ht.push(z+xr+"="+encodeURIComponent(ir))}}catch(xr){throw ht.push(z+"type="+encodeURIComponent("_badmap")),xr}}catch{I&&I(fn)}}if(Qe){re=ht.join("&");break e}}re=void 0}return u=u.i.splice(0,_),m.G=u,re}function zt(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;ie||R(),le||(ie(),le=!0),A.add(m,u),u.A=0}}function rr(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=es(y(u.Da,u),to(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,ls(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=es(y(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,at(10),hn(this),ls(this))};function ui(u){u.B!=null&&(h.clearTimeout(u.B),u.B=null)}function ls(u){u.g=new En(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=Tn(u.na);Ke(m,"RID","rpc"),Ke(m,"SID",u.M),Ke(m,"AID",u.K),Ke(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&Ke(m,"TO",u.ia),Ke(m,"TYPE","xmlhttp"),nr(u,m),u.u&&u.o&&Qi(m,u.u,u.o),u.O&&(u.g.H=u.O);var _=u.g;u=u.ba,_.M=1,_.A=Ar(Tn(m)),_.u=null,_.R=!0,ia(_,u)}r.Va=function(){this.C!=null&&(this.C=null,hn(this),rr(this),at(19))};function Zi(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function eo(u,m){var _=null;if(u.g==m){Zi(u),ui(u),u.g=null;var I=2}else if(la(u.h,m))_=m.G,ni(u.h,m),I=1;else return;if(u.I!=0){if(m.o)if(I==1){_=m.u?m.u.length:0,m=Date.now()-m.F;var F=u.D;I=Zr(),ct(I,new ra(I,_)),kr(u)}else zt(u);else if(F=m.m,F==3||F==0&&m.X>0||!(I==1&&Gl(u,m)||I==2&&rr(u)))switch(_&&_.length>0&&(m=u.h,m.i=m.i.concat(_)),F){case 1:dn(u,5);break;case 4:dn(u,10);break;case 3:dn(u,6);break;default:dn(u,2)}}}function to(u,m){let _=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(_*=2),_*m}function dn(u,m){if(u.j.info("Error code "+m),m==2){var _=y(u.bb,u),I=u.Ua;const F=!I;I=new Kn(I||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||ri(I,"https"),Ar(I),F?Yn(I.toString(),_):Zn(I.toString(),_)}else at(2);u.I=0,u.l&&u.l.pa(m),ci(u),Yi(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),at(2)):(this.j.info("Failed to ping google.com"),at(1))};function ci(u){if(u.I=0,u.ja=[],u.l){const m=ln(u.h);(m.length!=0||u.i.length!=0)&&(q(u.ja,m),q(u.ja,u.i),u.h.i.length=0,O(u.i),u.i.length=0),u.l.oa()}}function va(u,m,_){var I=_ instanceof Kn?Tn(_):new Kn(_);if(I.g!="")m&&(I.g=m+"."+I.g),Qn(I,I.u);else{var F=h.location;I=F.protocol,m=m?m+"."+F.hostname:F.hostname,F=+F.port;const z=new Kn(null);I&&ri(z,I),m&&(z.g=m),F&&Qn(z,F),_&&(z.h=_),I=z}return _=u.G,m=u.wa,_&&m&&Ke(I,_,m),Ke(I,"VER",u.ka),nr(u,I),I}function Kl(u,m,_){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new Je(new Rr({ab:_})):new Je(u.ma),m.Fa(u.L),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ql(){}r=Ql.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function no(){}no.prototype.g=function(u,m){return new Mt(u,m)};function Mt(u,m){gt.call(this),this.g=new Xi(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!C(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!C(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new us(this)}E(Mt,gt),Mt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Mt.prototype.close=function(){Ji(this.g)},Mt.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.v&&(_={},_.__data__=Xr(u),u=_);m.i.push(new oh(m.Ya++,u)),m.I==3&&kr(m)},Mt.prototype.N=function(){this.g.l=null,delete this.j,Ji(this.g),delete this.g,Mt.Z.N.call(this)};function Xl(u){Ui.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const _ in m){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}E(Xl,Ui);function Jl(){na.call(this),this.status=1}E(Jl,na);function us(u){this.g=u}E(us,Ql),us.prototype.ra=function(){ct(this.g,"a")},us.prototype.qa=function(u){ct(this.g,new Xl(u))},us.prototype.pa=function(u){ct(this.g,new Jl)},us.prototype.oa=function(){ct(this.g,"b")},no.prototype.createWebChannel=no.prototype.g,Mt.prototype.send=Mt.prototype.o,Mt.prototype.open=Mt.prototype.m,Mt.prototype.close=Mt.prototype.close,zv=function(){return new no},Bv=function(){return Zr()},Uv=Nn,lf={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ns.NO_ERROR=0,ns.TIMEOUT=8,ns.HTTP_ERROR=6,rc=ns,rs.COMPLETE="complete",Fv=rs,Dl.EventType=Yr,Yr.OPEN="a",Yr.CLOSE="b",Yr.ERROR="c",Yr.MESSAGE="d",gt.prototype.listen=gt.prototype.J,Ha=Dl,Je.prototype.listenOnce=Je.prototype.K,Je.prototype.getLastError=Je.prototype.Ha,Je.prototype.getLastErrorCode=Je.prototype.ya,Je.prototype.getStatus=Je.prototype.ca,Je.prototype.getResponseJson=Je.prototype.La,Je.prototype.getResponseText=Je.prototype.la,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Fa,jv=Je}).apply(typeof Hu<"u"?Hu:typeof self<"u"?self:typeof window<"u"?window:{});const Dy="@firebase/firestore",Vy="4.9.3";class Kt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Kt.UNAUTHENTICATED=new Kt(null),Kt.GOOGLE_CREDENTIALS=new Kt("google-credentials-uid"),Kt.FIRST_PARTY=new Kt("first-party-uid"),Kt.MOCK_USER=new Kt("mock-user");let Go="12.7.0";const Di=new kf("@firebase/firestore");function Ao(){return Di.logLevel}function he(r,...e){if(Di.logLevel<=Ue.DEBUG){const t=e.map(zf);Di.debug(`Firestore (${Go}): ${r}`,...t)}}function qr(r,...e){if(Di.logLevel<=Ue.ERROR){const t=e.map(zf);Di.error(`Firestore (${Go}): ${r}`,...t)}}function bo(r,...e){if(Di.logLevel<=Ue.WARN){const t=e.map(zf);Di.warn(`Firestore (${Go}): ${r}`,...t)}}function zf(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}function Te(r,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,$v(r,s,t)}function $v(r,e,t){let s=`FIRESTORE (${Go}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw qr(s),new Error(s)}function We(r,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,r||$v(e,o,s)}function Ne(r,e){return r}const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ae extends Gr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class fr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class qv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class CA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Kt.UNAUTHENTICATED)))}shutdown(){}}class PA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class kA{constructor(e){this.t=e,this.currentUser=Kt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){We(this.o===void 0,42304);let s=this.i;const o=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let l=new fr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new fr,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},f=g=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((g=>f(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?f(g):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new fr)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(We(typeof s.accessToken=="string",31837,{l:s}),new qv(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return We(e===null||typeof e=="string",2055,{h:e}),new Kt(e)}}class xA{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Kt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class NA{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new xA(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Kt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Oy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class DA{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Un(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){We(this.o===void 0,3512);const s=l=>{l.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,he("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const o=l=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Oy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(We(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Oy(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function VA(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}class $f{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=VA(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%62))}return s}}function Be(r,e){return r<e?-1:r>e?1:0}function uf(r,e){const t=Math.min(r.length,e.length);for(let s=0;s<t;s++){const o=r.charAt(s),l=e.charAt(s);if(o!==l)return zd(o)===zd(l)?Be(o,l):zd(o)?1:-1}return Be(r.length,e.length)}const OA=55296,MA=57343;function zd(r){const e=r.charCodeAt(0);return e>=OA&&e<=MA}function Lo(r,e,t){return r.length===e.length&&r.every(((s,o)=>t(s,e[o])))}const My="__name__";class hr{constructor(e,t,s){t===void 0?t=0:t>e.length&&Te(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Te(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return hr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof hr?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=hr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Be(e.length,t.length)}static compareSegments(e,t){const s=hr.isNumericId(e),o=hr.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?hr.extractNumericId(e).compare(hr.extractNumericId(t)):uf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ms.fromString(e.substring(4,e.length-2))}}class Xe extends hr{construct(e,t,s){return new Xe(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ae(W.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new Xe(t)}static emptyPath(){return new Xe([])}}const bA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ft extends hr{construct(e,t,s){return new Ft(e,t,s)}static isValidIdentifier(e){return bA.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ft.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===My}static keyField(){return new Ft([My])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new ae(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let h=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new ae(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ae(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else f==="`"?(h=!h,o++):f!=="."||h?(s+=f,o++):(l(),o++)}if(l(),h)throw new ae(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ft(t)}static emptyPath(){return new Ft([])}}class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(Xe.fromString(e))}static fromName(e){return new Ee(Xe.fromString(e).popFirst(5))}static empty(){return new Ee(Xe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Xe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Xe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new Xe(e.slice()))}}function Wv(r,e,t){if(!t)throw new ae(W.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function LA(r,e,t,s){if(e===!0&&s===!0)throw new ae(W.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function by(r){if(!Ee.isDocumentKey(r))throw new ae(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Ly(r){if(Ee.isDocumentKey(r))throw new ae(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Hv(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Bc(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Te(12329,{type:typeof r})}function kn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ae(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Bc(r);throw new ae(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function jA(r,e){if(e<=0)throw new ae(W.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}function It(r,e){const t={typeString:r};return e&&(t.value=e),t}function vl(r,e){if(!Hv(r))throw new ae(W.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){t=`JSON missing required field: '${s}'`;break}const h=r[s];if(o&&typeof h!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(l!==void 0&&h!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new ae(W.INVALID_ARGUMENT,t);return!0}const jy=-62135596800,Fy=1e6;class nt{static now(){return nt.fromMillis(Date.now())}static fromDate(e){return nt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*Fy);return new nt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ae(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ae(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<jy)throw new ae(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ae(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Fy}_compareTo(e){return this.seconds===e.seconds?Be(this.nanoseconds,e.nanoseconds):Be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:nt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(vl(e,nt._jsonSchema))return new nt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-jy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}nt._jsonSchemaVersion="firestore/timestamp/1.0",nt._jsonSchema={type:It("string",nt._jsonSchemaVersion),seconds:It("number"),nanoseconds:It("number")};class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new nt(0,0))}static max(){return new Ce(new nt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const ol=-1;function FA(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Ce.fromTimestamp(s===1e9?new nt(t+1,0):new nt(t,s));return new js(o,Ee.empty(),e)}function UA(r){return new js(r.readTime,r.key,ol)}class js{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new js(Ce.min(),Ee.empty(),ol)}static max(){return new js(Ce.max(),Ee.empty(),ol)}}function BA(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Ee.comparator(r.documentKey,e.documentKey),t!==0?t:Be(r.largestBatchId,e.largestBatchId))}const zA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $A{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Ko(r){if(r.code!==W.FAILED_PRECONDITION||r.message!==zA)throw r;he("LocalStore","Unexpectedly lost primary lease")}class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new K(((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof K?t:K.resolve(t)}catch(t){return K.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):K.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):K.reject(t)}static resolve(e){return new K(((t,s)=>{t(e)}))}static reject(e){return new K(((t,s)=>{s(e)}))}static waitFor(e){return new K(((t,s)=>{let o=0,l=0,h=!1;e.forEach((f=>{++o,f.next((()=>{++l,h&&l===o&&t()}),(g=>s(g)))})),h=!0,l===o&&t()}))}static or(e){let t=K.resolve(!1);for(const s of e)t=t.next((o=>o?K.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,l)=>{s.push(t.call(this,o,l))})),this.waitFor(s)}static mapArray(e,t){return new K(((s,o)=>{const l=e.length,h=new Array(l);let f=0;for(let g=0;g<l;g++){const y=g;t(e[y]).next((v=>{h[y]=v,++f,f===l&&s(h)}),(v=>o(v)))}}))}static doWhile(e,t){return new K(((s,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):s()};l()}))}}function qA(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Qo(r){return r.name==="IndexedDbTransactionError"}class zc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}zc.ce=-1;const qf=-1;function wl(r){return r==null}function _c(r){return r===0&&1/r==-1/0}function WA(r){return typeof r=="number"&&Number.isInteger(r)&&!_c(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const Gv="";function HA(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Uy(e)),e=GA(r.get(t),e);return Uy(e)}function GA(r,e){let t=e;const s=r.length;for(let o=0;o<s;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case Gv:t+="";break;default:t+=l}}return t}function Uy(r){return r+Gv+""}function By(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Hs(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function Kv(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class ot{constructor(e,t){this.comparator=e,this.root=t||jt.EMPTY}insert(e,t){return new ot(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,jt.BLACK,null,null))}remove(e){return new ot(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Gu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Gu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Gu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Gu(this.root,e,this.comparator,!0)}}class Gu{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class jt{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??jt.RED,this.left=o??jt.EMPTY,this.right=l??jt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new jt(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return jt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return jt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Te(27949);return e+(this.isRed()?0:1)}}jt.EMPTY=null,jt.RED=!0,jt.BLACK=!1;jt.EMPTY=new class{constructor(){this.size=0}get key(){throw Te(57766)}get value(){throw Te(16141)}get color(){throw Te(16727)}get left(){throw Te(29726)}get right(){throw Te(36894)}copy(e,t,s,o,l){return this}insert(e,t,s){return new jt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ct{constructor(e){this.comparator=e,this.data=new ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new zy(this.data.getIterator())}getIteratorFrom(e){return new zy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Ct)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ct(this.comparator);return t.data=e,t}}class zy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class _n{constructor(e){this.fields=e,e.sort(Ft.comparator)}static empty(){return new _n([])}unionWith(e){let t=new Ct(Ft.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new _n(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Lo(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}class Qv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Bt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Qv("Invalid base64 string: "+l):l}})(e);return new Bt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l})(e);return new Bt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Bt.EMPTY_BYTE_STRING=new Bt("");const KA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fs(r){if(We(!!r,39018),typeof r=="string"){let e=0;const t=KA.exec(r);if(We(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:ft(r.seconds),nanos:ft(r.nanos)}}function ft(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Us(r){return typeof r=="string"?Bt.fromBase64String(r):Bt.fromUint8Array(r)}const Xv="server_timestamp",Jv="__type__",Yv="__previous_value__",Zv="__local_write_time__";function Wf(r){return(r?.mapValue?.fields||{})[Jv]?.stringValue===Xv}function $c(r){const e=r.mapValue.fields[Yv];return Wf(e)?$c(e):e}function al(r){const e=Fs(r.mapValue.fields[Zv].timestampValue);return new nt(e.seconds,e.nanos)}class QA{constructor(e,t,s,o,l,h,f,g,y,v){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=v}}const vc="(default)";class ll{constructor(e,t){this.projectId=e,this.database=t||vc}static empty(){return new ll("","")}get isDefaultDatabase(){return this.database===vc}isEqual(e){return e instanceof ll&&e.projectId===this.projectId&&e.database===this.database}}const ew="__type__",XA="__max__",Ku={mapValue:{}},tw="__vector__",wc="value";function Bs(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Wf(r)?4:YA(r)?9007199254740991:JA(r)?10:11:Te(28295,{value:r})}function wr(r,e){if(r===e)return!0;const t=Bs(r);if(t!==Bs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return al(r).isEqual(al(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=Fs(o.timestampValue),f=Fs(l.timestampValue);return h.seconds===f.seconds&&h.nanos===f.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,l){return Us(o.bytesValue).isEqual(Us(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,l){return ft(o.geoPointValue.latitude)===ft(l.geoPointValue.latitude)&&ft(o.geoPointValue.longitude)===ft(l.geoPointValue.longitude)})(r,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return ft(o.integerValue)===ft(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=ft(o.doubleValue),f=ft(l.doubleValue);return h===f?_c(h)===_c(f):isNaN(h)&&isNaN(f)}return!1})(r,e);case 9:return Lo(r.arrayValue.values||[],e.arrayValue.values||[],wr);case 10:case 11:return(function(o,l){const h=o.mapValue.fields||{},f=l.mapValue.fields||{};if(By(h)!==By(f))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(f[g]===void 0||!wr(h[g],f[g])))return!1;return!0})(r,e);default:return Te(52216,{left:r})}}function ul(r,e){return(r.values||[]).find((t=>wr(t,e)))!==void 0}function jo(r,e){if(r===e)return 0;const t=Bs(r),s=Bs(e);if(t!==s)return Be(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Be(r.booleanValue,e.booleanValue);case 2:return(function(l,h){const f=ft(l.integerValue||l.doubleValue),g=ft(h.integerValue||h.doubleValue);return f<g?-1:f>g?1:f===g?0:isNaN(f)?isNaN(g)?0:-1:1})(r,e);case 3:return $y(r.timestampValue,e.timestampValue);case 4:return $y(al(r),al(e));case 5:return uf(r.stringValue,e.stringValue);case 6:return(function(l,h){const f=Us(l),g=Us(h);return f.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(l,h){const f=l.split("/"),g=h.split("/");for(let y=0;y<f.length&&y<g.length;y++){const v=Be(f[y],g[y]);if(v!==0)return v}return Be(f.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,h){const f=Be(ft(l.latitude),ft(h.latitude));return f!==0?f:Be(ft(l.longitude),ft(h.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return qy(r.arrayValue,e.arrayValue);case 10:return(function(l,h){const f=l.fields||{},g=h.fields||{},y=f[wc]?.arrayValue,v=g[wc]?.arrayValue,E=Be(y?.values?.length||0,v?.values?.length||0);return E!==0?E:qy(y,v)})(r.mapValue,e.mapValue);case 11:return(function(l,h){if(l===Ku.mapValue&&h===Ku.mapValue)return 0;if(l===Ku.mapValue)return 1;if(h===Ku.mapValue)return-1;const f=l.fields||{},g=Object.keys(f),y=h.fields||{},v=Object.keys(y);g.sort(),v.sort();for(let E=0;E<g.length&&E<v.length;++E){const S=uf(g[E],v[E]);if(S!==0)return S;const O=jo(f[g[E]],y[v[E]]);if(O!==0)return O}return Be(g.length,v.length)})(r.mapValue,e.mapValue);default:throw Te(23264,{he:t})}}function $y(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Be(r,e);const t=Fs(r),s=Fs(e),o=Be(t.seconds,s.seconds);return o!==0?o:Be(t.nanos,s.nanos)}function qy(r,e){const t=r.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=jo(t[o],s[o]);if(l)return l}return Be(t.length,s.length)}function Fo(r){return cf(r)}function cf(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const s=Fs(t);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Us(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return Ee.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=cf(l);return s+"]"})(r.arrayValue):"mapValue"in r?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of s)l?l=!1:o+=",",o+=`${h}:${cf(t.fields[h])}`;return o+"}"})(r.mapValue):Te(61005,{value:r})}function sc(r){switch(Bs(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=$c(r);return e?16+sc(e):16;case 5:return 2*r.stringValue.length;case 6:return Us(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,l)=>o+sc(l)),0)})(r.arrayValue);case 10:case 11:return(function(s){let o=0;return Hs(s.fields,((l,h)=>{o+=l.length+sc(h)})),o})(r.mapValue);default:throw Te(13486,{value:r})}}function Wy(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function hf(r){return!!r&&"integerValue"in r}function Hf(r){return!!r&&"arrayValue"in r}function Hy(r){return!!r&&"nullValue"in r}function Gy(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function ic(r){return!!r&&"mapValue"in r}function JA(r){return(r?.mapValue?.fields||{})[ew]?.stringValue===tw}function Ja(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Hs(r.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Ja(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ja(r.arrayValue.values[t]);return e}return{...r}}function YA(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===XA}class Zt{constructor(e){this.value=e}static empty(){return new Zt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!ic(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ja(t)}setAll(e){let t=Ft.emptyPath(),s={},o=[];e.forEach(((h,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,s,o),s={},o=[],t=f.popLast()}h?s[f.lastSegment()]=Ja(h):o.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());ic(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return wr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];ic(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){Hs(t,((o,l)=>e[o]=l));for(const o of s)delete e[o]}clone(){return new Zt(Ja(this.value))}}function nw(r){const e=[];return Hs(r.fields,((t,s)=>{const o=new Ft([t]);if(ic(s)){const l=nw(s.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)})),new _n(e)}class Dt{constructor(e,t,s,o,l,h,f){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=h,this.documentState=f}static newInvalidDocument(e){return new Dt(e,0,Ce.min(),Ce.min(),Ce.min(),Zt.empty(),0)}static newFoundDocument(e,t,s,o){return new Dt(e,1,t,Ce.min(),s,o,0)}static newNoDocument(e,t){return new Dt(e,2,t,Ce.min(),Ce.min(),Zt.empty(),0)}static newUnknownDocument(e,t){return new Dt(e,3,t,Ce.min(),Ce.min(),Zt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Dt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Dt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ec{constructor(e,t){this.position=e,this.inclusive=t}}function Ky(r,e,t){let s=0;for(let o=0;o<r.position.length;o++){const l=e[o],h=r.position[o];if(l.field.isKeyField()?s=Ee.comparator(Ee.fromName(h.referenceValue),t.key):s=jo(h,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function Qy(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!wr(r.position[t],e.position[t]))return!1;return!0}class Tc{constructor(e,t="asc"){this.field=e,this.dir=t}}function ZA(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class rw{}class Et extends rw{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new tR(e,t,s):t==="array-contains"?new sR(e,s):t==="in"?new iR(e,s):t==="not-in"?new oR(e,s):t==="array-contains-any"?new aR(e,s):new Et(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new nR(e,s):new rR(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(jo(t,this.value)):t!==null&&Bs(this.value)===Bs(t)&&this.matchesComparison(jo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class $n extends rw{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new $n(e,t)}matches(e){return sw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function sw(r){return r.op==="and"}function iw(r){return eR(r)&&sw(r)}function eR(r){for(const e of r.filters)if(e instanceof $n)return!1;return!0}function df(r){if(r instanceof Et)return r.field.canonicalString()+r.op.toString()+Fo(r.value);if(iw(r))return r.filters.map((e=>df(e))).join(",");{const e=r.filters.map((t=>df(t))).join(",");return`${r.op}(${e})`}}function ow(r,e){return r instanceof Et?(function(s,o){return o instanceof Et&&s.op===o.op&&s.field.isEqual(o.field)&&wr(s.value,o.value)})(r,e):r instanceof $n?(function(s,o){return o instanceof $n&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((l,h,f)=>l&&ow(h,o.filters[f])),!0):!1})(r,e):void Te(19439)}function aw(r){return r instanceof Et?(function(t){return`${t.field.canonicalString()} ${t.op} ${Fo(t.value)}`})(r):r instanceof $n?(function(t){return t.op.toString()+" {"+t.getFilters().map(aw).join(" ,")+"}"})(r):"Filter"}class tR extends Et{constructor(e,t,s){super(e,t,s),this.key=Ee.fromName(s.referenceValue)}matches(e){const t=Ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class nR extends Et{constructor(e,t){super(e,"in",t),this.keys=lw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class rR extends Et{constructor(e,t){super(e,"not-in",t),this.keys=lw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function lw(r,e){return(e.arrayValue?.values||[]).map((t=>Ee.fromName(t.referenceValue)))}class sR extends Et{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Hf(t)&&ul(t.arrayValue,this.value)}}class iR extends Et{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ul(this.value.arrayValue,t)}}class oR extends Et{constructor(e,t){super(e,"not-in",t)}matches(e){if(ul(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ul(this.value.arrayValue,t)}}class aR extends Et{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Hf(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>ul(this.value.arrayValue,s)))}}class lR{constructor(e,t=null,s=[],o=[],l=null,h=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=h,this.endAt=f,this.Te=null}}function Xy(r,e=null,t=[],s=[],o=null,l=null,h=null){return new lR(r,e,t,s,o,l,h)}function Gf(r){const e=Ne(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>df(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),wl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Fo(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Fo(s))).join(",")),e.Te=t}return e.Te}function Kf(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!ZA(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!ow(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Qy(r.startAt,e.startAt)&&Qy(r.endAt,e.endAt)}function ff(r){return Ee.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}class El{constructor(e,t=null,s=[],o=[],l=null,h="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=h,this.startAt=f,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function uR(r,e,t,s,o,l,h,f){return new El(r,e,t,s,o,l,h,f)}function qc(r){return new El(r)}function Jy(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function uw(r){return r.collectionGroup!==null}function Ya(r){const e=Ne(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let f=new Ct(Ft.comparator);return h.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(f=f.add(y.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Tc(l,s))})),t.has(Ft.keyField().canonicalString())||e.Ie.push(new Tc(Ft.keyField(),s))}return e.Ie}function pr(r){const e=Ne(r);return e.Ee||(e.Ee=cR(e,Ya(r))),e.Ee}function cR(r,e){if(r.limitType==="F")return Xy(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new Tc(o.field,l)}));const t=r.endAt?new Ec(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Ec(r.startAt.position,r.startAt.inclusive):null;return Xy(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function pf(r,e){const t=r.filters.concat([e]);return new El(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Ic(r,e,t){return new El(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Wc(r,e){return Kf(pr(r),pr(e))&&r.limitType===e.limitType}function cw(r){return`${Gf(pr(r))}|lt:${r.limitType}`}function Ro(r){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>aw(o))).join(", ")}]`),wl(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>Fo(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>Fo(o))).join(",")),`Target(${s})`})(pr(r))}; limitType=${r.limitType})`}function Hc(r,e){return e.isFoundDocument()&&(function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):Ee.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(r,e)&&(function(s,o){for(const l of Ya(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0})(r,e)&&(function(s,o){return!(s.startAt&&!(function(h,f,g){const y=Ky(h,f,g);return h.inclusive?y<=0:y<0})(s.startAt,Ya(s),o)||s.endAt&&!(function(h,f,g){const y=Ky(h,f,g);return h.inclusive?y>=0:y>0})(s.endAt,Ya(s),o))})(r,e)}function hR(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function hw(r){return(e,t)=>{let s=!1;for(const o of Ya(r)){const l=dR(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function dR(r,e,t){const s=r.field.isKeyField()?Ee.comparator(e.key,t.key):(function(l,h,f){const g=h.data.field(l),y=f.data.field(l);return g!==null&&y!==null?jo(g,y):Te(42886)})(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Te(19790,{direction:r.dir})}}class Mi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Hs(this.inner,((t,s)=>{for(const[o,l]of s)e(o,l)}))}isEmpty(){return Kv(this.inner)}size(){return this.innerSize}}const fR=new ot(Ee.comparator);function Wr(){return fR}const dw=new ot(Ee.comparator);function Ga(...r){let e=dw;for(const t of r)e=e.insert(t.key,t);return e}function fw(r){let e=dw;return r.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function Ri(){return Za()}function pw(){return Za()}function Za(){return new Mi((r=>r.toString()),((r,e)=>r.isEqual(e)))}const pR=new ot(Ee.comparator),mR=new Ct(Ee.comparator);function ze(...r){let e=mR;for(const t of r)e=e.add(t);return e}const gR=new Ct(Be);function yR(){return gR}function Qf(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_c(e)?"-0":e}}function mw(r){return{integerValue:""+r}}function _R(r,e){return WA(e)?mw(e):Qf(r,e)}class Gc{constructor(){this._=void 0}}function vR(r,e,t){return r instanceof cl?(function(o,l){const h={fields:{[Jv]:{stringValue:Xv},[Zv]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Wf(l)&&(l=$c(l)),l&&(h.fields[Yv]=l),{mapValue:h}})(t,e):r instanceof hl?yw(r,e):r instanceof dl?_w(r,e):(function(o,l){const h=gw(o,l),f=Yy(h)+Yy(o.Ae);return hf(h)&&hf(o.Ae)?mw(f):Qf(o.serializer,f)})(r,e)}function wR(r,e,t){return r instanceof hl?yw(r,e):r instanceof dl?_w(r,e):t}function gw(r,e){return r instanceof Sc?(function(s){return hf(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class cl extends Gc{}class hl extends Gc{constructor(e){super(),this.elements=e}}function yw(r,e){const t=vw(e);for(const s of r.elements)t.some((o=>wr(o,s)))||t.push(s);return{arrayValue:{values:t}}}class dl extends Gc{constructor(e){super(),this.elements=e}}function _w(r,e){let t=vw(e);for(const s of r.elements)t=t.filter((o=>!wr(o,s)));return{arrayValue:{values:t}}}class Sc extends Gc{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Yy(r){return ft(r.integerValue||r.doubleValue)}function vw(r){return Hf(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class ER{constructor(e,t){this.field=e,this.transform=t}}function TR(r,e){return r.field.isEqual(e.field)&&(function(s,o){return s instanceof hl&&o instanceof hl||s instanceof dl&&o instanceof dl?Lo(s.elements,o.elements,wr):s instanceof Sc&&o instanceof Sc?wr(s.Ae,o.Ae):s instanceof cl&&o instanceof cl})(r.transform,e.transform)}class IR{constructor(e,t){this.version=e,this.transformResults=t}}class Ut{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ut}static exists(e){return new Ut(void 0,e)}static updateTime(e){return new Ut(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function oc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Kc{}function ww(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Qc(r.key,Ut.none()):new Tl(r.key,r.data,Ut.none());{const t=r.data,s=Zt.empty();let o=new Ct(Ft.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?s.delete(l):s.set(l,h),o=o.add(l)}return new Gs(r.key,s,new _n(o.toArray()),Ut.none())}}function SR(r,e,t){r instanceof Tl?(function(o,l,h){const f=o.value.clone(),g=e_(o.fieldTransforms,l,h.transformResults);f.setAll(g),l.convertToFoundDocument(h.version,f).setHasCommittedMutations()})(r,e,t):r instanceof Gs?(function(o,l,h){if(!oc(o.precondition,l))return void l.convertToUnknownDocument(h.version);const f=e_(o.fieldTransforms,l,h.transformResults),g=l.data;g.setAll(Ew(o)),g.setAll(f),l.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(r,e,t):(function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function el(r,e,t,s){return r instanceof Tl?(function(l,h,f,g){if(!oc(l.precondition,h))return f;const y=l.value.clone(),v=t_(l.fieldTransforms,g,h);return y.setAll(v),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null})(r,e,t,s):r instanceof Gs?(function(l,h,f,g){if(!oc(l.precondition,h))return f;const y=t_(l.fieldTransforms,g,h),v=h.data;return v.setAll(Ew(l)),v.setAll(y),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(r,e,t,s):(function(l,h,f){return oc(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):f})(r,e,t)}function AR(r,e){let t=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),l=gw(s.transform,o||null);l!=null&&(t===null&&(t=Zt.empty()),t.set(s.field,l))}return t||null}function Zy(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Lo(s,o,((l,h)=>TR(l,h)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Tl extends Kc{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Gs extends Kc{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Ew(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}})),e}function e_(r,e,t){const s=new Map;We(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let o=0;o<t.length;o++){const l=r[o],h=l.transform,f=e.data.field(l.field);s.set(l.field,wR(h,f,t[o]))}return s}function t_(r,e,t){const s=new Map;for(const o of r){const l=o.transform,h=t.data.field(o.field);s.set(o.field,vR(l,h,e))}return s}class Qc extends Kc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Tw extends Kc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class RR{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&SR(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=el(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=el(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=pw();return this.mutations.forEach((o=>{const l=e.get(o.key),h=l.overlayedDocument;let f=this.applyToLocalView(h,l.mutatedFields);f=t.has(o.key)?null:f;const g=ww(h,f);g!==null&&s.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(Ce.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ze())}isEqual(e){return this.batchId===e.batchId&&Lo(this.mutations,e.mutations,((t,s)=>Zy(t,s)))&&Lo(this.baseMutations,e.baseMutations,((t,s)=>Zy(t,s)))}}class Xf{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){We(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return pR})();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,s[h].version);return new Xf(e,t,s,o)}}class CR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class PR{constructor(e,t){this.count=e,this.unchangedNames=t}}var vt,qe;function Iw(r){switch(r){case W.OK:return Te(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return Te(15467,{code:r})}}function Sw(r){if(r===void 0)return qr("GRPC error has no .code"),W.UNKNOWN;switch(r){case vt.OK:return W.OK;case vt.CANCELLED:return W.CANCELLED;case vt.UNKNOWN:return W.UNKNOWN;case vt.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case vt.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case vt.INTERNAL:return W.INTERNAL;case vt.UNAVAILABLE:return W.UNAVAILABLE;case vt.UNAUTHENTICATED:return W.UNAUTHENTICATED;case vt.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case vt.NOT_FOUND:return W.NOT_FOUND;case vt.ALREADY_EXISTS:return W.ALREADY_EXISTS;case vt.PERMISSION_DENIED:return W.PERMISSION_DENIED;case vt.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case vt.ABORTED:return W.ABORTED;case vt.OUT_OF_RANGE:return W.OUT_OF_RANGE;case vt.UNIMPLEMENTED:return W.UNIMPLEMENTED;case vt.DATA_LOSS:return W.DATA_LOSS;default:return Te(39323,{code:r})}}(qe=vt||(vt={}))[qe.OK=0]="OK",qe[qe.CANCELLED=1]="CANCELLED",qe[qe.UNKNOWN=2]="UNKNOWN",qe[qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qe[qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qe[qe.NOT_FOUND=5]="NOT_FOUND",qe[qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",qe[qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",qe[qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",qe[qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qe[qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qe[qe.ABORTED=10]="ABORTED",qe[qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",qe[qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",qe[qe.INTERNAL=13]="INTERNAL",qe[qe.UNAVAILABLE=14]="UNAVAILABLE",qe[qe.DATA_LOSS=15]="DATA_LOSS";function kR(){return new TextEncoder}const xR=new Ms([4294967295,4294967295],0);function n_(r){const e=kR().encode(r),t=new Lv;return t.update(e),new Uint8Array(t.digest())}function r_(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ms([t,s],0),new Ms([o,l],0)]}class Jf{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Ka(`Invalid padding: ${t}`);if(s<0)throw new Ka(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Ka(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Ka(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ms.fromNumber(this.ge)}ye(e,t,s){let o=e.add(t.multiply(Ms.fromNumber(s)));return o.compare(xR)===1&&(o=new Ms([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=n_(e),[s,o]=r_(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(s,o,l);if(!this.we(h))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new Jf(l,o,t);return s.forEach((f=>h.insert(f))),h}insert(e){if(this.ge===0)return;const t=n_(e),[s,o]=r_(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(s,o,l);this.Se(h)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Ka extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Xc{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,Il.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Xc(Ce.min(),o,new ot(Be),Wr(),ze())}}class Il{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Il(s,t,ze(),ze(),ze())}}class ac{constructor(e,t,s,o){this.be=e,this.removedTargetIds=t,this.key=s,this.De=o}}class Aw{constructor(e,t){this.targetId=e,this.Ce=t}}class Rw{constructor(e,t,s=Bt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class s_{constructor(){this.ve=0,this.Fe=i_(),this.Me=Bt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ze(),t=ze(),s=ze();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:Te(38017,{changeType:l})}})),new Il(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=i_()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,We(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class NR{constructor(e){this.Ge=e,this.ze=new Map,this.je=Wr(),this.Je=Qu(),this.He=Qu(),this.Ye=new ot(Be)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Te(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,s=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(ff(l))if(s===0){const h=new Ee(l.path);this.et(t,h,Dt.newNoDocument(h,Ce.min()))}else We(s===1,20013,{expectedCount:s});else{const h=this._t(t);if(h!==s){const f=this.ut(e),g=f?this.ct(f,e,h):1;if(g!==0){this.it(t);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let h,f;try{h=Us(s).toUint8Array()}catch(g){if(g instanceof Qv)return bo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{f=new Jf(h,o,l)}catch(g){return bo(g instanceof Ka?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return f.ge===0?null:f}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let o=0;return s.forEach((l=>{const h=this.Ge.ht(),f=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,h)=>{const f=this.ot(h);if(f){if(l.current&&ff(f.target)){const g=new Ee(f.target.path);this.It(g).has(h)||this.Et(h,g)||this.et(h,g,Dt.newNoDocument(g,e))}l.Be&&(t.set(h,l.ke()),l.qe())}}));let s=ze();this.He.forEach(((l,h)=>{let f=!0;h.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(s=s.add(l))})),this.je.forEach(((l,h)=>h.setReadTime(e)));const o=new Xc(e,t,this.Ye,this.je,s);return this.je=Wr(),this.Je=Qu(),this.He=Qu(),this.Ye=new ot(Be),o}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new s_,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Ct(Be),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Ct(Be),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||he("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new s_),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Qu(){return new ot(Ee.comparator)}function i_(){return new ot(Ee.comparator)}const DR={asc:"ASCENDING",desc:"DESCENDING"},VR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},OR={and:"AND",or:"OR"};class MR{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function mf(r,e){return r.useProto3Json||wl(e)?e:{value:e}}function Ac(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Cw(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function bR(r,e){return Ac(r,e.toTimestamp())}function vn(r){return We(!!r,49232),Ce.fromTimestamp((function(t){const s=Fs(t);return new nt(s.seconds,s.nanos)})(r))}function Yf(r,e){return gf(r,e).canonicalString()}function gf(r,e){const t=(function(o){return new Xe(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function Pw(r){const e=Xe.fromString(r);return We(Ow(e),10190,{key:e.toString()}),e}function Rc(r,e){return Yf(r.databaseId,e.path)}function tl(r,e){const t=Pw(e);if(t.get(1)!==r.databaseId.projectId)throw new ae(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new ae(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Ee(xw(t))}function kw(r,e){return Yf(r.databaseId,e)}function LR(r){const e=Pw(r);return e.length===4?Xe.emptyPath():xw(e)}function yf(r){return new Xe(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function xw(r){return We(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function o_(r,e,t){return{name:Rc(r,e),fields:t.value.mapValue.fields}}function jR(r,e){return"found"in e?(function(s,o){We(!!o.found,43571),o.found.name,o.found.updateTime;const l=tl(s,o.found.name),h=vn(o.found.updateTime),f=o.found.createTime?vn(o.found.createTime):Ce.min(),g=new Zt({mapValue:{fields:o.found.fields}});return Dt.newFoundDocument(l,h,f,g)})(r,e):"missing"in e?(function(s,o){We(!!o.missing,3894),We(!!o.readTime,22933);const l=tl(s,o.missing),h=vn(o.readTime);return Dt.newNoDocument(l,h)})(r,e):Te(7234,{result:e})}function FR(r,e){let t;if("targetChange"in e){e.targetChange;const s=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Te(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(y,v){return y.useProto3Json?(We(v===void 0||typeof v=="string",58123),Bt.fromBase64String(v||"")):(We(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Bt.fromUint8Array(v||new Uint8Array))})(r,e.targetChange.resumeToken),h=e.targetChange.cause,f=h&&(function(y){const v=y.code===void 0?W.UNKNOWN:Sw(y.code);return new ae(v,y.message||"")})(h);t=new Rw(s,o,l,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=tl(r,s.document.name),l=vn(s.document.updateTime),h=s.document.createTime?vn(s.document.createTime):Ce.min(),f=new Zt({mapValue:{fields:s.document.fields}}),g=Dt.newFoundDocument(o,l,h,f),y=s.targetIds||[],v=s.removedTargetIds||[];t=new ac(y,v,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=tl(r,s.document),l=s.readTime?vn(s.readTime):Ce.min(),h=Dt.newNoDocument(o,l),f=s.removedTargetIds||[];t=new ac([],f,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=tl(r,s.document),l=s.removedTargetIds||[];t=new ac([],l,o,null)}else{if(!("filter"in e))return Te(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,h=new PR(o,l),f=s.targetId;t=new Aw(f,h)}}return t}function Nw(r,e){let t;if(e instanceof Tl)t={update:o_(r,e.key,e.value)};else if(e instanceof Qc)t={delete:Rc(r,e.key)};else if(e instanceof Gs)t={update:o_(r,e.key,e.data),updateMask:KR(e.fieldMask)};else{if(!(e instanceof Tw))return Te(16599,{Vt:e.type});t={verify:Rc(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,h){const f=h.transform;if(f instanceof cl)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof hl)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof dl)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Sc)return{fieldPath:h.field.canonicalString(),increment:f.Ae};throw Te(20930,{transform:h.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:bR(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Te(27497)})(r,e.precondition)),t}function UR(r,e){return r&&r.length>0?(We(e!==void 0,14353),r.map((t=>(function(o,l){let h=o.updateTime?vn(o.updateTime):vn(l);return h.isEqual(Ce.min())&&(h=vn(l)),new IR(h,o.transformResults||[])})(t,e)))):[]}function BR(r,e){return{documents:[kw(r,e.path)]}}function zR(r,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=kw(r,o);const l=(function(y){if(y.length!==0)return Vw($n.create(y,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const h=(function(y){if(y.length!==0)return y.map((v=>(function(S){return{field:Co(S.field),direction:WR(S.dir)}})(v)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const f=mf(r,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:o}}function $R(r){let e=LR(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){We(s===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(E){const S=Dw(E);return S instanceof $n&&iw(S)?S.getFilters():[S]})(t.where));let h=[];t.orderBy&&(h=(function(E){return E.map((S=>(function(q){return new Tc(Po(q.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(q.direction))})(S)))})(t.orderBy));let f=null;t.limit&&(f=(function(E){let S;return S=typeof E=="object"?E.value:E,wl(S)?null:S})(t.limit));let g=null;t.startAt&&(g=(function(E){const S=!!E.before,O=E.values||[];return new Ec(O,S)})(t.startAt));let y=null;return t.endAt&&(y=(function(E){const S=!E.before,O=E.values||[];return new Ec(O,S)})(t.endAt)),uR(e,o,h,l,f,"F",g,y)}function qR(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Dw(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Po(t.unaryFilter.field);return Et.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Po(t.unaryFilter.field);return Et.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Po(t.unaryFilter.field);return Et.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Po(t.unaryFilter.field);return Et.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Te(61313);default:return Te(60726)}})(r):r.fieldFilter!==void 0?(function(t){return Et.create(Po(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Te(58110);default:return Te(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return $n.create(t.compositeFilter.filters.map((s=>Dw(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Te(1026)}})(t.compositeFilter.op))})(r):Te(30097,{filter:r})}function WR(r){return DR[r]}function HR(r){return VR[r]}function GR(r){return OR[r]}function Co(r){return{fieldPath:r.canonicalString()}}function Po(r){return Ft.fromServerFormat(r.fieldPath)}function Vw(r){return r instanceof Et?(function(t){if(t.op==="=="){if(Gy(t.value))return{unaryFilter:{field:Co(t.field),op:"IS_NAN"}};if(Hy(t.value))return{unaryFilter:{field:Co(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Gy(t.value))return{unaryFilter:{field:Co(t.field),op:"IS_NOT_NAN"}};if(Hy(t.value))return{unaryFilter:{field:Co(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Co(t.field),op:HR(t.op),value:t.value}}})(r):r instanceof $n?(function(t){const s=t.getFilters().map((o=>Vw(o)));return s.length===1?s[0]:{compositeFilter:{op:GR(t.op),filters:s}}})(r):Te(54877,{filter:r})}function KR(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Ow(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}class ks{constructor(e,t,s,o,l=Ce.min(),h=Ce.min(),f=Bt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new ks(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ks(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ks(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ks(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class QR{constructor(e){this.yt=e}}function XR(r){const e=$R({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Ic(e,e.limit,"L"):e}class JR{constructor(){this.Cn=new YR}addToCollectionParentIndex(e,t){return this.Cn.add(t),K.resolve()}getCollectionParents(e,t){return K.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return K.resolve()}deleteFieldIndex(e,t){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,t){return K.resolve()}getDocumentsMatchingTarget(e,t){return K.resolve(null)}getIndexType(e,t){return K.resolve(0)}getFieldIndexes(e,t){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,t){return K.resolve(js.min())}getMinOffsetFromCollectionGroup(e,t){return K.resolve(js.min())}updateCollectionGroup(e,t,s){return K.resolve()}updateIndexEntries(e,t){return K.resolve()}}class YR{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new Ct(Xe.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Ct(Xe.comparator)).toArray()}}const a_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Mw=41943040;class an{static withCacheSize(e){return new an(e,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}an.DEFAULT_COLLECTION_PERCENTILE=10,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,an.DEFAULT=new an(Mw,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),an.DISABLED=new an(-1,0,0);class Uo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Uo(0)}static cr(){return new Uo(-1)}}const l_="LruGarbageCollector",ZR=1048576;function u_([r,e],[t,s]){const o=Be(r,t);return o===0?Be(e,s):o}class eC{constructor(e){this.Ir=e,this.buffer=new Ct(u_),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();u_(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class tC{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){he(l_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Qo(t)?he(l_,"Ignoring IndexedDB error during garbage collection: ",t):await Ko(t)}await this.Vr(3e5)}))}}class nC{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return K.resolve(zc.ce);const s=new eC(t);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(a_)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),a_):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,o,l,h,f,g,y;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,h=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(s=E,f=Date.now(),this.removeTargets(e,s,t)))).next((E=>(l=E,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((E=>(y=Date.now(),Ao()<=Ue.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-v}ms
	Determined least recently used ${o} in `+(f-h)+`ms
	Removed ${l} targets in `+(g-f)+`ms
	Removed ${E} documents in `+(y-g)+`ms
Total Duration: ${y-v}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:E}))))}}function rC(r,e){return new nC(r,e)}class sC{constructor(){this.changes=new Mi((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Dt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?K.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class iC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class oC{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&el(s.mutation,o,_n.empty(),nt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,ze()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=ze()){const o=Ri();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((l=>{let h=Ga();return l.forEach(((f,g)=>{h=h.insert(f,g.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const s=Ri();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,ze())))}populateOverlays(e,t,s){const o=[];return s.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((h,f)=>{t.set(h,f)}))}))}computeViews(e,t,s,o){let l=Wr();const h=Za(),f=(function(){return Za()})();return t.forEach(((g,y)=>{const v=s.get(y.key);o.has(y.key)&&(v===void 0||v.mutation instanceof Gs)?l=l.insert(y.key,y):v!==void 0?(h.set(y.key,v.mutation.getFieldMask()),el(v.mutation,y,v.mutation.getFieldMask(),nt.now())):h.set(y.key,_n.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((y,v)=>h.set(y,v))),t.forEach(((y,v)=>f.set(y,new iC(v,h.get(y)??null)))),f)))}recalculateAndSaveOverlays(e,t){const s=Za();let o=new ot(((h,f)=>h-f)),l=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const f of h)f.keys().forEach((g=>{const y=t.get(g);if(y===null)return;let v=s.get(g)||_n.empty();v=f.applyToLocalView(y,v),s.set(g,v);const E=(o.get(f.batchId)||ze()).add(g);o=o.insert(f.batchId,E)}))})).next((()=>{const h=[],f=o.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),y=g.key,v=g.value,E=pw();v.forEach((S=>{if(!l.has(S)){const O=ww(t.get(S),s.get(S));O!==null&&E.set(S,O),l=l.add(S)}})),h.push(this.documentOverlayCache.saveOverlays(e,y,E))}return K.waitFor(h)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return(function(h){return Ee.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):uw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):K.resolve(Ri());let f=ol,g=l;return h.next((y=>K.forEach(y,((v,E)=>(f<E.largestBatchId&&(f=E.largestBatchId),l.get(v)?K.resolve():this.remoteDocumentCache.getEntry(e,v).next((S=>{g=g.insert(v,S)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,g,y,ze()))).next((v=>({batchId:f,changes:fw(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ee(t)).next((s=>{let o=Ga();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let h=Ga();return this.indexManager.getCollectionParents(e,l).next((f=>K.forEach(f,(g=>{const y=(function(E,S){return new El(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,s,o).next((v=>{v.forEach(((E,S)=>{h=h.insert(E,S)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o)))).next((h=>{l.forEach(((g,y)=>{const v=y.getKey();h.get(v)===null&&(h=h.insert(v,Dt.newInvalidDocument(v)))}));let f=Ga();return h.forEach(((g,y)=>{const v=l.get(g);v!==void 0&&el(v.mutation,y,_n.empty(),nt.now()),Hc(t,y)&&(f=f.insert(g,y))})),f}))}}class aC{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return K.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:vn(o.createTime)}})(t)),K.resolve()}getNamedQuery(e,t){return K.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:XR(o.bundledQuery),readTime:vn(o.readTime)}})(t)),K.resolve()}}class lC{constructor(){this.overlays=new ot(Ee.comparator),this.qr=new Map}getOverlay(e,t){return K.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Ri();return K.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&s.set(o,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,l)=>{this.St(e,t,l)})),K.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),K.resolve()}getOverlaysForCollection(e,t,s){const o=Ri(),l=t.length+1,h=new Ee(t.child("")),f=this.overlays.getIteratorFrom(h);for(;f.hasNext();){const g=f.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&g.largestBatchId>s&&o.set(g.getKey(),g)}return K.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new ot(((y,v)=>y-v));const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>s){let v=l.get(y.largestBatchId);v===null&&(v=Ri(),l=l.insert(y.largestBatchId,v)),v.set(y.getKey(),y)}}const f=Ri(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,v)=>f.set(y,v))),!(f.size()>=o)););return K.resolve(f)}St(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new CR(t,s));let l=this.qr.get(t);l===void 0&&(l=ze(),this.qr.set(t,l)),this.qr.set(t,l.add(s.key))}}class uC{constructor(){this.sessionToken=Bt.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,K.resolve()}}class Zf{constructor(){this.Qr=new Ct(Nt.$r),this.Ur=new Ct(Nt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new Nt(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new Nt(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new Ee(new Xe([])),s=new Nt(t,e),o=new Nt(t,e+1),l=[];return this.Ur.forEachInRange([s,o],(h=>{this.Gr(h),l.push(h.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ee(new Xe([])),s=new Nt(t,e),o=new Nt(t,e+1);let l=ze();return this.Ur.forEachInRange([s,o],(h=>{l=l.add(h.key)})),l}containsKey(e){const t=new Nt(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Nt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ee.comparator(e.key,t.key)||Be(e.Yr,t.Yr)}static Kr(e,t){return Be(e.Yr,t.Yr)||Ee.comparator(e.key,t.key)}}class cC{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Ct(Nt.$r)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new RR(l,t,s,o);this.mutationQueue.push(h);for(const f of o)this.Zr=this.Zr.add(new Nt(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return K.resolve(h)}lookupMutationBatch(e,t){return K.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.ei(s),l=o<0?0:o;return K.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?qf:this.tr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Nt(t,0),o=new Nt(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,o],(h=>{const f=this.Xr(h.Yr);l.push(f)})),K.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Ct(Be);return t.forEach((o=>{const l=new Nt(o,0),h=new Nt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,h],(f=>{s=s.add(f.Yr)}))})),K.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;Ee.isDocumentKey(l)||(l=l.child(""));const h=new Nt(new Ee(l),0);let f=new Ct(Be);return this.Zr.forEachWhile((g=>{const y=g.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(f=f.add(g.Yr)),!0)}),h),K.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){We(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return K.forEach(t.mutations,(o=>{const l=new Nt(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new Nt(t,0),o=this.Zr.firstAfterOrEqual(s);return K.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class hC{constructor(e){this.ri=e,this.docs=(function(){return new ot(Ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,h=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return K.resolve(s?s.document.mutableCopy():Dt.newInvalidDocument(t))}getEntries(e,t){let s=Wr();return t.forEach((o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():Dt.newInvalidDocument(o))})),K.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=Wr();const h=t.path,f=new Ee(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:y,value:{document:v}}=g.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||BA(UA(v),s)<=0||(o.has(v.key)||Hc(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return K.resolve(l)}getAllFromCollectionGroup(e,t,s,o){Te(9500)}ii(e,t){return K.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new dC(this)}getSize(e){return K.resolve(this.size)}}class dC extends sC{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),K.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class fC{constructor(e){this.persistence=e,this.si=new Mi((t=>Gf(t)),Kf),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.oi=0,this._i=new Zf,this.targetCount=0,this.ai=Uo.ur()}forEachTarget(e,t){return this.si.forEach(((s,o)=>t(o))),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),K.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Uo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,K.resolve()}updateTargetData(e,t){return this.Pr(t),K.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.si.forEach(((h,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.si.delete(h),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)})),K.waitFor(l).next((()=>o))}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return K.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),K.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((h=>{l.push(o.markPotentiallyOrphaned(e,h))})),K.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),K.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return K.resolve(s)}containsKey(e,t){return K.resolve(this._i.containsKey(t))}}class bw{constructor(e,t){this.ui={},this.overlays={},this.ci=new zc(0),this.li=!1,this.li=!0,this.hi=new uC,this.referenceDelegate=e(this),this.Pi=new fC(this),this.indexManager=new JR,this.remoteDocumentCache=(function(o){return new hC(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new QR(t),this.Ii=new aC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new lC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new cC(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){he("MemoryPersistence","Starting transaction:",e);const o=new pC(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ai(e,t){return K.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class pC extends $A{constructor(e){super(),this.currentSequenceNumber=e}}class ep{constructor(e){this.persistence=e,this.Ri=new Zf,this.Vi=null}static mi(e){return new ep(e)}get fi(){if(this.Vi)return this.Vi;throw Te(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),K.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),K.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),K.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.fi,(s=>{const o=Ee.fromPath(s);return this.gi(e,o).next((l=>{l||t.removeEntry(o,Ce.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return K.or([()=>K.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Cc{constructor(e,t){this.persistence=e,this.pi=new Mi((s=>HA(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=rC(this,t)}static mi(e,t){return new Cc(e,t)}Ei(){}di(e){return K.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return K.forEach(this.pi,((s,o)=>this.br(e,s,o).next((l=>l?K.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,(h=>this.br(e,h,t).next((f=>{f||(s++,l.removeEntry(h,Ce.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),K.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),K.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),K.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=sc(e.data.value)),t}br(e,t,s){return K.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return K.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class tp{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=o}static As(e,t){let s=ze(),o=ze();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new tp(e,t.fromCache,s,o)}}class mC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class gC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return lI()?8:qA(Xt())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.ys(e,t).next((h=>{l.result=h})).next((()=>{if(!l.result)return this.ws(e,t,o,s).next((h=>{l.result=h}))})).next((()=>{if(l.result)return;const h=new mC;return this.Ss(e,t,h).next((f=>{if(l.result=f,this.Vs)return this.bs(e,t,h,f.size)}))})).next((()=>l.result))}bs(e,t,s,o){return s.documentReadCount<this.fs?(Ao()<=Ue.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",Ro(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),K.resolve()):(Ao()<=Ue.DEBUG&&he("QueryEngine","Query:",Ro(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(Ao()<=Ue.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",Ro(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,pr(t))):K.resolve())}ys(e,t){if(Jy(t))return K.resolve(null);let s=pr(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Ic(t,null,"F"),s=pr(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const h=ze(...l);return this.ps.getDocuments(e,h).next((f=>this.indexManager.getMinOffset(e,s).next((g=>{const y=this.Ds(t,f);return this.Cs(t,y,h,g.readTime)?this.ys(e,Ic(t,null,"F")):this.vs(e,y,t,g)}))))})))))}ws(e,t,s,o){return Jy(t)||o.isEqual(Ce.min())?K.resolve(null):this.ps.getDocuments(e,s).next((l=>{const h=this.Ds(t,l);return this.Cs(t,h,s,o)?K.resolve(null):(Ao()<=Ue.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ro(t)),this.vs(e,h,t,FA(o,ol)).next((f=>f)))}))}Ds(e,t){let s=new Ct(hw(e));return t.forEach(((o,l)=>{Hc(e,l)&&(s=s.add(l))})),s}Cs(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,s){return Ao()<=Ue.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",Ro(t)),this.ps.getDocumentsMatchingQuery(e,t,js.min(),s)}vs(e,t,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((l=>(t.forEach((h=>{l=l.insert(h.key,h)})),l)))}}const np="LocalStore",yC=3e8;class _C{constructor(e,t,s,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new ot(Be),this.xs=new Mi((l=>Gf(l)),Kf),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new oC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function vC(r,e,t,s){return new _C(r,e,t,s)}async function Lw(r,e){const t=Ne(r);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((l=>(o=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const h=[],f=[];let g=ze();for(const y of o){h.push(y.batchId);for(const v of y.mutations)g=g.add(v.key)}for(const y of l){f.push(y.batchId);for(const v of y.mutations)g=g.add(v.key)}return t.localDocuments.getDocuments(s,g).next((y=>({Ls:y,removedBatchIds:h,addedBatchIds:f})))}))}))}function wC(r,e){const t=Ne(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,g,y,v){const E=y.batch,S=E.keys();let O=K.resolve();return S.forEach((q=>{O=O.next((()=>v.getEntry(g,q))).next(($=>{const L=y.docVersions.get(q);We(L!==null,48541),$.version.compareTo(L)<0&&(E.applyToRemoteDocument($,y),$.isValidDocument()&&($.setReadTime(y.commitVersion),v.addEntry($)))}))})),O.next((()=>f.mutationQueue.removeMutationBatch(g,E)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(f){let g=ze();for(let y=0;y<f.mutationResults.length;++y)f.mutationResults[y].transformResults.length>0&&(g=g.add(f.batch.mutations[y].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function jw(r){const e=Ne(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function EC(r,e){const t=Ne(r),s=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const h=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const f=[];e.targetChanges.forEach(((v,E)=>{const S=o.get(E);if(!S)return;f.push(t.Pi.removeMatchingKeys(l,v.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(l,v.addedDocuments,E))));let O=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?O=O.withResumeToken(Bt.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):v.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(v.resumeToken,s)),o=o.insert(E,O),(function($,L,ne){return $.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=yC?!0:ne.addedDocuments.size+ne.modifiedDocuments.size+ne.removedDocuments.size>0})(S,O,v)&&f.push(t.Pi.updateTargetData(l,O))}));let g=Wr(),y=ze();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),f.push(TC(l,h,e.documentUpdates).next((v=>{g=v.ks,y=v.qs}))),!s.isEqual(Ce.min())){const v=t.Pi.getLastRemoteSnapshotVersion(l).next((E=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));f.push(v)}return K.waitFor(f).next((()=>h.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,y))).next((()=>g))})).then((l=>(t.Ms=o,l)))}function TC(r,e,t){let s=ze(),o=ze();return t.forEach((l=>s=s.add(l))),e.getEntries(r,s).next((l=>{let h=Wr();return t.forEach(((f,g)=>{const y=l.get(f);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(f)),g.isNoDocument()&&g.version.isEqual(Ce.min())?(e.removeEntry(f,g.readTime),h=h.insert(f,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),h=h.insert(f,g)):he(np,"Ignoring outdated watch update for ",f,". Current version:",y.version," Watch version:",g.version)})),{ks:h,qs:o}}))}function IC(r,e){const t=Ne(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=qf),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function SC(r,e){const t=Ne(r);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.Pi.getTargetData(s,e).next((l=>l?(o=l,K.resolve(o)):t.Pi.allocateTargetId(s).next((h=>(o=new ks(e,h,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function _f(r,e,t){const s=Ne(r),o=s.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(h=>s.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!Qo(h))throw h;he(np,`Failed to update sequence numbers for target ${e}: ${h}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function c_(r,e,t){const s=Ne(r);let o=Ce.min(),l=ze();return s.persistence.runTransaction("Execute query","readwrite",(h=>(function(g,y,v){const E=Ne(g),S=E.xs.get(v);return S!==void 0?K.resolve(E.Ms.get(S)):E.Pi.getTargetData(y,v)})(s,h,pr(e)).next((f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(h,f.targetId).next((g=>{l=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(h,e,t?o:Ce.min(),t?l:ze()))).next((f=>(AC(s,hR(e),f),{documents:f,Qs:l})))))}function AC(r,e,t){let s=r.Os.get(e)||Ce.min();t.forEach(((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),r.Os.set(e,s)}class h_{constructor(){this.activeTargetIds=yR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class RC{constructor(){this.Mo=new h_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new h_,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class CC{Oo(e){}shutdown(){}}const d_="ConnectivityMonitor";class f_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){he(d_,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){he(d_,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Xu=null;function vf(){return Xu===null?Xu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Xu++,"0x"+Xu.toString(16)}const $d="RestConnection",PC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class kC{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===vc?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,t,s,o,l){const h=vf(),f=this.zo(e,t.toUriEncodedString());he($d,`Sending RPC '${e}' ${h}:`,f,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,l);const{host:y}=new URL(f),v=qo(y);return this.Jo(e,f,g,s,v).then((E=>(he($d,`Received RPC '${e}' ${h}: `,E),E)),(E=>{throw bo($d,`RPC '${e}' ${h} failed with error: `,E,"url: ",f,"request:",s),E}))}Ho(e,t,s,o,l,h){return this.Go(e,t,s,o,l)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Go})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),s&&s.headers.forEach(((o,l)=>e[l]=o))}zo(e,t){const s=PC[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}class xC{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Gt="WebChannelConnection";class NC extends kC{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,o,l){const h=vf();return new Promise(((f,g)=>{const y=new jv;y.setWithCredentials(!0),y.listenOnce(Fv.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case rc.NO_ERROR:const E=y.getResponseJson();he(Gt,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(E)),f(E);break;case rc.TIMEOUT:he(Gt,`RPC '${e}' ${h} timed out`),g(new ae(W.DEADLINE_EXCEEDED,"Request time out"));break;case rc.HTTP_ERROR:const S=y.getStatus();if(he(Gt,`RPC '${e}' ${h} failed with status:`,S,"response text:",y.getResponseText()),S>0){let O=y.getResponseJson();Array.isArray(O)&&(O=O[0]);const q=O?.error;if(q&&q.status&&q.message){const $=(function(ne){const Y=ne.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(Y)>=0?Y:W.UNKNOWN})(q.status);g(new ae($,q.message))}else g(new ae(W.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new ae(W.UNAVAILABLE,"Connection failed."));break;default:Te(9055,{l_:e,streamId:h,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{he(Gt,`RPC '${e}' ${h} completed.`)}}));const v=JSON.stringify(o);he(Gt,`RPC '${e}' ${h} sending request:`,o),y.send(t,"POST",v,s,15)}))}T_(e,t,s){const o=vf(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=zv(),f=Bv(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const v=l.join("");he(Gt,`Creating RPC '${e}' stream ${o}: ${v}`,g);const E=h.createWebChannel(v,g);this.I_(E);let S=!1,O=!1;const q=new xC({Yo:L=>{O?he(Gt,`Not sending because RPC '${e}' stream ${o} is closed:`,L):(S||(he(Gt,`Opening RPC '${e}' stream ${o} transport.`),E.open(),S=!0),he(Gt,`RPC '${e}' stream ${o} sending:`,L),E.send(L))},Zo:()=>E.close()}),$=(L,ne,Y)=>{L.listen(ne,(te=>{try{Y(te)}catch(H){setTimeout((()=>{throw H}),0)}}))};return $(E,Ha.EventType.OPEN,(()=>{O||(he(Gt,`RPC '${e}' stream ${o} transport opened.`),q.o_())})),$(E,Ha.EventType.CLOSE,(()=>{O||(O=!0,he(Gt,`RPC '${e}' stream ${o} transport closed`),q.a_(),this.E_(E))})),$(E,Ha.EventType.ERROR,(L=>{O||(O=!0,bo(Gt,`RPC '${e}' stream ${o} transport errored. Name:`,L.name,"Message:",L.message),q.a_(new ae(W.UNAVAILABLE,"The operation could not be completed")))})),$(E,Ha.EventType.MESSAGE,(L=>{if(!O){const ne=L.data[0];We(!!ne,16349);const Y=ne,te=Y?.error||Y[0]?.error;if(te){he(Gt,`RPC '${e}' stream ${o} received error:`,te);const H=te.status;let ie=(function(R){const P=vt[R];if(P!==void 0)return Sw(P)})(H),le=te.message;ie===void 0&&(ie=W.INTERNAL,le="Unknown error status: "+H+" with message "+te.message),O=!0,q.a_(new ae(ie,le)),E.close()}else he(Gt,`RPC '${e}' stream ${o} received:`,ne),q.u_(ne)}})),$(f,Uv.STAT_EVENT,(L=>{L.stat===lf.PROXY?he(Gt,`RPC '${e}' stream ${o} detected buffering proxy`):L.stat===lf.NOPROXY&&he(Gt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{q.__()}),0),q}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function qd(){return typeof document<"u"?document:null}function Jc(r){return new MR(r,!0)}class rp{constructor(e,t,s=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-s);o>0&&he("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const p_="PersistentStream";class Fw{constructor(e,t,s,o,l,h,f,g){this.Mi=e,this.S_=s,this.b_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new rp(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===W.RESOURCE_EXHAUSTED?(qr(t.toString()),qr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===t&&this.G_(s,o)}),(s=>{e((()=>{const o=new ae(W.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return he(p_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(he(p_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class DC extends Fw{constructor(e,t,s,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,h),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=FR(this.serializer,e),s=(function(l){if(!("targetChange"in l))return Ce.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Ce.min():h.readTime?vn(h.readTime):Ce.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=yf(this.serializer),t.addTarget=(function(l,h){let f;const g=h.target;if(f=ff(g)?{documents:BR(l,g)}:{query:zR(l,g).ft},f.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){f.resumeToken=Cw(l,h.resumeToken);const y=mf(l,h.expectedCount);y!==null&&(f.expectedCount=y)}else if(h.snapshotVersion.compareTo(Ce.min())>0){f.readTime=Ac(l,h.snapshotVersion.toTimestamp());const y=mf(l,h.expectedCount);y!==null&&(f.expectedCount=y)}return f})(this.serializer,e);const s=qR(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=yf(this.serializer),t.removeTarget=e,this.q_(t)}}class VC extends Fw{constructor(e,t,s,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,h),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return We(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,We(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){We(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=UR(e.writeResults,e.commitTime),s=vn(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=yf(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>Nw(this.serializer,s)))};this.q_(t)}}class OC{}class MC extends OC{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ae(W.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Go(e,gf(t,s),o,l,h))).catch((l=>{throw l.name==="FirebaseError"?(l.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ae(W.UNKNOWN,l.toString())}))}Ho(e,t,s,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,f])=>this.connection.Ho(e,gf(t,s),o,h,f,l))).catch((h=>{throw h.name==="FirebaseError"?(h.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ae(W.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class bC{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(qr(t),this.aa=!1):he("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Vi="RemoteStore";class LC{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((h=>{s.enqueueAndForget((async()=>{bi(this)&&(he(Vi,"Restarting streams for network reachability change."),await(async function(g){const y=Ne(g);y.Ea.add(4),await Sl(y),y.Ra.set("Unknown"),y.Ea.delete(4),await Yc(y)})(this))}))})),this.Ra=new bC(s,o)}}async function Yc(r){if(bi(r))for(const e of r.da)await e(!0)}async function Sl(r){for(const e of r.da)await e(!1)}function Uw(r,e){const t=Ne(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),ap(t)?op(t):Xo(t).O_()&&ip(t,e))}function sp(r,e){const t=Ne(r),s=Xo(t);t.Ia.delete(e),s.O_()&&Bw(t,e),t.Ia.size===0&&(s.O_()?s.L_():bi(t)&&t.Ra.set("Unknown"))}function ip(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Xo(r).Y_(e)}function Bw(r,e){r.Va.Ue(e),Xo(r).Z_(e)}function op(r){r.Va=new NR({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Xo(r).start(),r.Ra.ua()}function ap(r){return bi(r)&&!Xo(r).x_()&&r.Ia.size>0}function bi(r){return Ne(r).Ea.size===0}function zw(r){r.Va=void 0}async function jC(r){r.Ra.set("Online")}async function FC(r){r.Ia.forEach(((e,t)=>{ip(r,e)}))}async function UC(r,e){zw(r),ap(r)?(r.Ra.ha(e),op(r)):r.Ra.set("Unknown")}async function BC(r,e,t){if(r.Ra.set("Online"),e instanceof Rw&&e.state===2&&e.cause)try{await(async function(o,l){const h=l.cause;for(const f of l.targetIds)o.Ia.has(f)&&(await o.remoteSyncer.rejectListen(f,h),o.Ia.delete(f),o.Va.removeTarget(f))})(r,e)}catch(s){he(Vi,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Pc(r,s)}else if(e instanceof ac?r.Va.Ze(e):e instanceof Aw?r.Va.st(e):r.Va.tt(e),!t.isEqual(Ce.min()))try{const s=await jw(r.localStore);t.compareTo(s)>=0&&await(function(l,h){const f=l.Va.Tt(h);return f.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const v=l.Ia.get(y);v&&l.Ia.set(y,v.withResumeToken(g.resumeToken,h))}})),f.targetMismatches.forEach(((g,y)=>{const v=l.Ia.get(g);if(!v)return;l.Ia.set(g,v.withResumeToken(Bt.EMPTY_BYTE_STRING,v.snapshotVersion)),Bw(l,g);const E=new ks(v.target,g,y,v.sequenceNumber);ip(l,E)})),l.remoteSyncer.applyRemoteEvent(f)})(r,t)}catch(s){he(Vi,"Failed to raise snapshot:",s),await Pc(r,s)}}async function Pc(r,e,t){if(!Qo(e))throw e;r.Ea.add(1),await Sl(r),r.Ra.set("Offline"),t||(t=()=>jw(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{he(Vi,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Yc(r)}))}function $w(r,e){return e().catch((t=>Pc(r,t,e)))}async function Zc(r){const e=Ne(r),t=zs(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:qf;for(;zC(e);)try{const o=await IC(e.localStore,s);if(o===null){e.Ta.length===0&&t.L_();break}s=o.batchId,$C(e,o)}catch(o){await Pc(e,o)}qw(e)&&Ww(e)}function zC(r){return bi(r)&&r.Ta.length<10}function $C(r,e){r.Ta.push(e);const t=zs(r);t.O_()&&t.X_&&t.ea(e.mutations)}function qw(r){return bi(r)&&!zs(r).x_()&&r.Ta.length>0}function Ww(r){zs(r).start()}async function qC(r){zs(r).ra()}async function WC(r){const e=zs(r);for(const t of r.Ta)e.ea(t.mutations)}async function HC(r,e,t){const s=r.Ta.shift(),o=Xf.from(s,e,t);await $w(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Zc(r)}async function GC(r,e){e&&zs(r).X_&&await(async function(s,o){if((function(h){return Iw(h)&&h!==W.ABORTED})(o.code)){const l=s.Ta.shift();zs(s).B_(),await $w(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o))),await Zc(s)}})(r,e),qw(r)&&Ww(r)}async function m_(r,e){const t=Ne(r);t.asyncQueue.verifyOperationInProgress(),he(Vi,"RemoteStore received new credentials");const s=bi(t);t.Ea.add(3),await Sl(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Yc(t)}async function KC(r,e){const t=Ne(r);e?(t.Ea.delete(2),await Yc(t)):e||(t.Ea.add(2),await Sl(t),t.Ra.set("Unknown"))}function Xo(r){return r.ma||(r.ma=(function(t,s,o){const l=Ne(t);return l.sa(),new DC(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Xo:jC.bind(null,r),t_:FC.bind(null,r),r_:UC.bind(null,r),H_:BC.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),ap(r)?op(r):r.Ra.set("Unknown")):(await r.ma.stop(),zw(r))}))),r.ma}function zs(r){return r.fa||(r.fa=(function(t,s,o){const l=Ne(t);return l.sa(),new VC(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:qC.bind(null,r),r_:GC.bind(null,r),ta:WC.bind(null,r),na:HC.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await Zc(r)):(await r.fa.stop(),r.Ta.length>0&&(he(Vi,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class lp{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new fr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const h=Date.now()+s,f=new lp(e,t,h,o,l);return f.start(s),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ae(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function up(r,e){if(qr("AsyncQueue",`${e}: ${r}`),Qo(r))return new ae(W.UNAVAILABLE,`${e}: ${r}`);throw r}class Vo{static emptySet(e){return new Vo(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Ee.comparator(t.key,s.key):(t,s)=>Ee.comparator(t.key,s.key),this.keyedMap=Ga(),this.sortedSet=new ot(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Vo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Vo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class g_{constructor(){this.ga=new ot(Ee.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Te(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class Bo{constructor(e,t,s,o,l,h,f,g,y){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,t,s,o,l){const h=[];return t.forEach((f=>{h.push({type:0,doc:f})})),new Bo(e,t,Vo.emptySet(t),h,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}class QC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class XC{constructor(){this.queries=y_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const o=Ne(t),l=o.queries;o.queries=y_(),l.forEach(((h,f)=>{for(const g of f.Sa)g.onError(s)}))})(this,new ae(W.ABORTED,"Firestore shutting down"))}}function y_(){return new Mi((r=>cw(r)),Wc)}async function cp(r,e){const t=Ne(r);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.ba()&&e.Da()&&(s=2):(l=new QC,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const f=up(h,`Initialization of query '${Ro(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&dp(t)}async function hp(r,e){const t=Ne(r),s=e.query;let o=3;const l=t.queries.get(s);if(l){const h=l.Sa.indexOf(e);h>=0&&(l.Sa.splice(h,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function JC(r,e){const t=Ne(r);let s=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const f of h.Sa)f.Fa(o)&&(s=!0);h.wa=o}}s&&dp(t)}function YC(r,e,t){const s=Ne(r),o=s.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);s.queries.delete(e)}function dp(r){r.Ca.forEach((e=>{e.next()}))}var wf,__;(__=wf||(wf={})).Ma="default",__.Cache="cache";class fp{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Bo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Bo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==wf.Cache}}class Hw{constructor(e){this.key=e}}class Gw{constructor(e){this.key=e}}class ZC{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ze(),this.mutatedKeys=ze(),this.eu=hw(e),this.tu=new Vo(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new g_,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,f=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,E)=>{const S=o.get(v),O=Hc(this.query,E)?E:null,q=!!S&&this.mutatedKeys.has(S.key),$=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let L=!1;S&&O?S.data.isEqual(O.data)?q!==$&&(s.track({type:3,doc:O}),L=!0):this.su(S,O)||(s.track({type:2,doc:O}),L=!0,(g&&this.eu(O,g)>0||y&&this.eu(O,y)<0)&&(f=!0)):!S&&O?(s.track({type:0,doc:O}),L=!0):S&&!O&&(s.track({type:1,doc:S}),L=!0,(g||y)&&(f=!0)),L&&(O?(h=h.add(O),l=$?l.add(v):l.delete(v)):(h=h.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const v=this.query.limitType==="F"?h.last():h.first();h=h.delete(v.key),l=l.delete(v.key),s.track({type:1,doc:v})}return{tu:h,iu:s,Cs:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((v,E)=>(function(O,q){const $=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te(20277,{Rt:L})}};return $(O)-$(q)})(v.type,E.type)||this.eu(v.doc,E.doc))),this.ou(s),o=o??!1;const f=t&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,y=g!==this.Za;return this.Za=g,h.length!==0||y?{snapshot:new Bo(this.query,e.tu,l,h,e.mutatedKeys,g===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new g_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ze(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new Gw(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new Hw(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=ze();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Bo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const pp="SyncEngine";class eP{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class tP{constructor(e){this.key=e,this.hu=!1}}class nP{constructor(e,t,s,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new Mi((f=>cw(f)),Wc),this.Iu=new Map,this.Eu=new Set,this.du=new ot(Ee.comparator),this.Au=new Map,this.Ru=new Zf,this.Vu={},this.mu=new Map,this.fu=Uo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function rP(r,e,t=!0){const s=Zw(r);let o;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await Kw(s,e,t,!0),o}async function sP(r,e){const t=Zw(r);await Kw(t,e,!0,!1)}async function Kw(r,e,t,s){const o=await SC(r.localStore,pr(e)),l=o.targetId,h=r.sharedClientState.addLocalQueryTarget(l,t);let f;return s&&(f=await iP(r,e,l,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&Uw(r.remoteStore,o),f}async function iP(r,e,t,s,o){r.pu=(E,S,O)=>(async function($,L,ne,Y){let te=L.view.ru(ne);te.Cs&&(te=await c_($.localStore,L.query,!1).then((({documents:A})=>L.view.ru(A,te))));const H=Y&&Y.targetChanges.get(L.targetId),ie=Y&&Y.targetMismatches.get(L.targetId)!=null,le=L.view.applyChanges(te,$.isPrimaryClient,H,ie);return w_($,L.targetId,le.au),le.snapshot})(r,E,S,O);const l=await c_(r.localStore,e,!0),h=new ZC(e,l.Qs),f=h.ru(l.documents),g=Il.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",o),y=h.applyChanges(f,r.isPrimaryClient,g);w_(r,t,y.au);const v=new eP(e,t,h);return r.Tu.set(e,v),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),y.snapshot}async function oP(r,e,t){const s=Ne(r),o=s.Tu.get(e),l=s.Iu.get(o.targetId);if(l.length>1)return s.Iu.set(o.targetId,l.filter((h=>!Wc(h,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await _f(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&sp(s.remoteStore,o.targetId),Ef(s,o.targetId)})).catch(Ko)):(Ef(s,o.targetId),await _f(s.localStore,o.targetId,!0))}async function aP(r,e){const t=Ne(r),s=t.Tu.get(e),o=t.Iu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),sp(t.remoteStore,s.targetId))}async function lP(r,e,t){const s=mP(r);try{const o=await(function(h,f){const g=Ne(h),y=nt.now(),v=f.reduce(((O,q)=>O.add(q.key)),ze());let E,S;return g.persistence.runTransaction("Locally write mutations","readwrite",(O=>{let q=Wr(),$=ze();return g.Ns.getEntries(O,v).next((L=>{q=L,q.forEach(((ne,Y)=>{Y.isValidDocument()||($=$.add(ne))}))})).next((()=>g.localDocuments.getOverlayedDocuments(O,q))).next((L=>{E=L;const ne=[];for(const Y of f){const te=AR(Y,E.get(Y.key).overlayedDocument);te!=null&&ne.push(new Gs(Y.key,te,nw(te.value.mapValue),Ut.exists(!0)))}return g.mutationQueue.addMutationBatch(O,y,ne,f)})).next((L=>{S=L;const ne=L.applyToLocalDocumentSet(E,$);return g.documentOverlayCache.saveOverlays(O,L.batchId,ne)}))})).then((()=>({batchId:S.batchId,changes:fw(E)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(h,f,g){let y=h.Vu[h.currentUser.toKey()];y||(y=new ot(Be)),y=y.insert(f,g),h.Vu[h.currentUser.toKey()]=y})(s,o.batchId,t),await Al(s,o.changes),await Zc(s.remoteStore)}catch(o){const l=up(o,"Failed to persist write");t.reject(l)}}async function Qw(r,e){const t=Ne(r);try{const s=await EC(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const h=t.Au.get(l);h&&(We(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?We(h.hu,14607):o.removedDocuments.size>0&&(We(h.hu,42227),h.hu=!1))})),await Al(t,s,e)}catch(s){await Ko(s)}}function v_(r,e,t){const s=Ne(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Tu.forEach(((l,h)=>{const f=h.view.va(e);f.snapshot&&o.push(f.snapshot)})),(function(h,f){const g=Ne(h);g.onlineState=f;let y=!1;g.queries.forEach(((v,E)=>{for(const S of E.Sa)S.va(f)&&(y=!0)})),y&&dp(g)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function uP(r,e,t){const s=Ne(r);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Au.get(e),l=o&&o.key;if(l){let h=new ot(Ee.comparator);h=h.insert(l,Dt.newNoDocument(l,Ce.min()));const f=ze().add(l),g=new Xc(Ce.min(),new Map,new ot(Be),h,f);await Qw(s,g),s.du=s.du.remove(l),s.Au.delete(e),mp(s)}else await _f(s.localStore,e,!1).then((()=>Ef(s,e,t))).catch(Ko)}async function cP(r,e){const t=Ne(r),s=e.batch.batchId;try{const o=await wC(t.localStore,e);Jw(t,s,null),Xw(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Al(t,o)}catch(o){await Ko(o)}}async function hP(r,e,t){const s=Ne(r);try{const o=await(function(h,f){const g=Ne(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let v;return g.mutationQueue.lookupMutationBatch(y,f).next((E=>(We(E!==null,37113),v=E.keys(),g.mutationQueue.removeMutationBatch(y,E)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,v,f))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,v))).next((()=>g.localDocuments.getDocuments(y,v)))}))})(s.localStore,e);Jw(s,e,t),Xw(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Al(s,o)}catch(o){await Ko(o)}}function Xw(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function Jw(r,e,t){const s=Ne(r);let o=s.Vu[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function Ef(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),t&&r.Pu.yu(s,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((s=>{r.Ru.containsKey(s)||Yw(r,s)}))}function Yw(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(sp(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),mp(r))}function w_(r,e,t){for(const s of t)s instanceof Hw?(r.Ru.addReference(s.key,e),dP(r,s)):s instanceof Gw?(he(pp,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||Yw(r,s.key)):Te(19791,{wu:s})}function dP(r,e){const t=e.key,s=t.path.canonicalString();r.du.get(t)||r.Eu.has(s)||(he(pp,"New document in limbo: "+t),r.Eu.add(s),mp(r))}function mp(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new Ee(Xe.fromString(e)),s=r.fu.next();r.Au.set(s,new tP(t)),r.du=r.du.insert(t,s),Uw(r.remoteStore,new ks(pr(qc(t.path)),s,"TargetPurposeLimboResolution",zc.ce))}}async function Al(r,e,t){const s=Ne(r),o=[],l=[],h=[];s.Tu.isEmpty()||(s.Tu.forEach(((f,g)=>{h.push(s.pu(g,e,t).then((y=>{if((y||t)&&s.isPrimaryClient){const v=y?!y.fromCache:t?.targetChanges.get(g.targetId)?.current;s.sharedClientState.updateQueryState(g.targetId,v?"current":"not-current")}if(y){o.push(y);const v=tp.As(g.targetId,y);l.push(v)}})))})),await Promise.all(h),s.Pu.H_(o),await(async function(g,y){const v=Ne(g);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>K.forEach(y,(S=>K.forEach(S.Es,(O=>v.persistence.referenceDelegate.addReference(E,S.targetId,O))).next((()=>K.forEach(S.ds,(O=>v.persistence.referenceDelegate.removeReference(E,S.targetId,O)))))))))}catch(E){if(!Qo(E))throw E;he(np,"Failed to update sequence numbers: "+E)}for(const E of y){const S=E.targetId;if(!E.fromCache){const O=v.Ms.get(S),q=O.snapshotVersion,$=O.withLastLimboFreeSnapshotVersion(q);v.Ms=v.Ms.insert(S,$)}}})(s.localStore,l))}async function fP(r,e){const t=Ne(r);if(!t.currentUser.isEqual(e)){he(pp,"User change. New user:",e.toKey());const s=await Lw(t.localStore,e);t.currentUser=e,(function(l,h){l.mu.forEach((f=>{f.forEach((g=>{g.reject(new ae(W.CANCELLED,h))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Al(t,s.Ls)}}function pP(r,e){const t=Ne(r),s=t.Au.get(e);if(s&&s.hu)return ze().add(s.key);{let o=ze();const l=t.Iu.get(e);if(!l)return o;for(const h of l){const f=t.Tu.get(h);o=o.unionWith(f.view.nu)}return o}}function Zw(r){const e=Ne(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=Qw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=pP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=uP.bind(null,e),e.Pu.H_=JC.bind(null,e.eventManager),e.Pu.yu=YC.bind(null,e.eventManager),e}function mP(r){const e=Ne(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hP.bind(null,e),e}class kc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Jc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return vC(this.persistence,new gC,e.initialUser,this.serializer)}Cu(e){return new bw(ep.mi,this.serializer)}Du(e){return new RC}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}kc.provider={build:()=>new kc};class gP extends kc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){We(this.persistence.referenceDelegate instanceof Cc,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new tC(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?an.withCacheSize(this.cacheSizeBytes):an.DEFAULT;return new bw((s=>Cc.mi(s,t)),this.serializer)}}class Tf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>v_(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=fP.bind(null,this.syncEngine),await KC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new XC})()}createDatastore(e){const t=Jc(e.databaseInfo.databaseId),s=(function(l){return new NC(l)})(e.databaseInfo);return(function(l,h,f,g){return new MC(l,h,f,g)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,l,h,f){return new LC(s,o,l,h,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>v_(this.syncEngine,t,0)),(function(){return f_.v()?new f_:new CC})())}createSyncEngine(e,t){return(function(o,l,h,f,g,y,v){const E=new nP(o,l,h,f,g,y);return v&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const s=Ne(t);he(Vi,"RemoteStore shutting down."),s.Ea.add(5),await Sl(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Tf.provider={build:()=>new Tf};class gp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):qr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class yP{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ae(W.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(o,l){const h=Ne(o),f={documents:l.map((E=>Rc(h.serializer,E)))},g=await h.Ho("BatchGetDocuments",h.serializer.databaseId,Xe.emptyPath(),f,l.length),y=new Map;g.forEach((E=>{const S=jR(h.serializer,E);y.set(S.key.toString(),S)}));const v=[];return l.forEach((E=>{const S=y.get(E.toString());We(!!S,55234,{key:E}),v.push(S)})),v})(this.datastore,e);return t.forEach((s=>this.recordVersion(s))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new Qc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,s)=>{const o=Ee.fromPath(s);this.mutations.push(new Tw(o,this.precondition(o)))})),await(async function(s,o){const l=Ne(s),h={writes:o.map((f=>Nw(l.serializer,f)))};await l.Go("Commit",l.serializer.databaseId,Xe.emptyPath(),h)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Te(50498,{Gu:e.constructor.name});t=Ce.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new ae(W.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ce.min())?Ut.exists(!1):Ut.updateTime(t):Ut.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ce.min()))throw new ae(W.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ut.updateTime(t)}return Ut.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class _P{constructor(e,t,s,o,l){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=o,this.deferred=l,this.zu=s.maxAttempts,this.M_=new rp(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new yP(this.datastore),t=this.Hu(e);t&&t.then((s=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(s)})).catch((o=>{this.Yu(o)}))))})).catch((s=>{this.Yu(s)}))}))}Hu(e){try{const t=this.updateFunction(e);return!wl(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!Iw(t)}return!1}}const $s="FirestoreClient";class vP{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=Kt.UNAUTHENTICATED,this.clientId=$f.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async h=>{he($s,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(s,(h=>(he($s,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new fr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=up(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Wd(r,e){r.asyncQueue.verifyOperationInProgress(),he($s,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener((async o=>{s.isEqual(o)||(await Lw(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function E_(r,e){r.asyncQueue.verifyOperationInProgress();const t=await wP(r);he($s,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((s=>m_(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,o)=>m_(e.remoteStore,o))),r._onlineComponents=e}async function wP(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){he($s,"Using user provided OfflineComponentProvider");try{await Wd(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===W.FAILED_PRECONDITION||o.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;bo("Error using user provided cache. Falling back to memory cache: "+t),await Wd(r,new kc)}}else he($s,"Using default OfflineComponentProvider"),await Wd(r,new gP(void 0));return r._offlineComponents}async function yp(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(he($s,"Using user provided OnlineComponentProvider"),await E_(r,r._uninitializedComponentsProvider._online)):(he($s,"Using default OnlineComponentProvider"),await E_(r,new Tf))),r._onlineComponents}function EP(r){return yp(r).then((e=>e.syncEngine))}function TP(r){return yp(r).then((e=>e.datastore))}async function xc(r){const e=await yp(r),t=e.eventManager;return t.onListen=rP.bind(null,e.syncEngine),t.onUnlisten=oP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=sP.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=aP.bind(null,e.syncEngine),t}function IP(r,e,t={}){const s=new fr;return r.asyncQueue.enqueueAndForget((async()=>(function(l,h,f,g,y){const v=new gp({next:S=>{v.Nu(),h.enqueueAndForget((()=>hp(l,E)));const O=S.docs.has(f);!O&&S.fromCache?y.reject(new ae(W.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&S.fromCache&&g&&g.source==="server"?y.reject(new ae(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(S)},error:S=>y.reject(S)}),E=new fp(qc(f.path),v,{includeMetadataChanges:!0,qa:!0});return cp(l,E)})(await xc(r),r.asyncQueue,e,t,s))),s.promise}function SP(r,e,t={}){const s=new fr;return r.asyncQueue.enqueueAndForget((async()=>(function(l,h,f,g,y){const v=new gp({next:S=>{v.Nu(),h.enqueueAndForget((()=>hp(l,E))),S.fromCache&&g.source==="server"?y.reject(new ae(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(S)},error:S=>y.reject(S)}),E=new fp(f,v,{includeMetadataChanges:!0,qa:!0});return cp(l,E)})(await xc(r),r.asyncQueue,e,t,s))),s.promise}function eE(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const T_=new Map;const tE="firestore.googleapis.com",I_=!0;class S_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ae(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=tE,this.ssl=I_}else this.host=e.host,this.ssl=e.ssl??I_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Mw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<ZR)throw new ae(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}LA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=eE(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ae(W.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ae(W.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ae(W.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class eh{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new S_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ae(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ae(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new S_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new CA;switch(s.type){case"firstParty":return new NA(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ae(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=T_.get(t);s&&(he("ComponentProvider","Removing Datastore"),T_.delete(t),s.terminate())})(this),Promise.resolve()}}function AP(r,e,t,s={}){r=kn(r,eh);const o=qo(e),l=r._getSettings(),h={...l,emulatorOptions:r._getEmulatorOptions()},f=`${e}:${t}`;o&&(Z_(`https://${f}`),ev("Firestore",!0)),l.host!==tE&&l.host!==f&&bo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:f,ssl:o,emulatorOptions:s};if(!ki(g,h)&&(r._setSettings(g),s.mockUserToken)){let y,v;if(typeof s.mockUserToken=="string")y=s.mockUserToken,v=Kt.MOCK_USER;else{y=ZT(s.mockUserToken,r._app?.options.projectId);const E=s.mockUserToken.sub||s.mockUserToken.user_id;if(!E)throw new ae(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Kt(E)}r._authCredentials=new PA(new qv(y,v))}}class Ks{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Ks(this.firestore,e,this._query)}}class ut{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ut(this.firestore,e,this._key)}toJSON(){return{type:ut._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(vl(t,ut._jsonSchema))return new ut(e,s||null,new Ee(Xe.fromString(t.referencePath)))}}ut._jsonSchemaVersion="firestore/documentReference/1.0",ut._jsonSchema={type:It("string",ut._jsonSchemaVersion),referencePath:It("string")};class bs extends Ks{constructor(e,t,s){super(e,t,qc(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ut(this.firestore,null,new Ee(e))}withConverter(e){return new bs(this.firestore,e,this._path)}}function Tt(r,e,...t){if(r=St(r),Wv("collection","path",e),r instanceof eh){const s=Xe.fromString(e,...t);return Ly(s),new bs(r,null,s)}{if(!(r instanceof ut||r instanceof bs))throw new ae(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Xe.fromString(e,...t));return Ly(s),new bs(r.firestore,null,s)}}function Fe(r,e,...t){if(r=St(r),arguments.length===1&&(e=$f.newId()),Wv("doc","path",e),r instanceof eh){const s=Xe.fromString(e,...t);return by(s),new ut(r,null,new Ee(s))}{if(!(r instanceof ut||r instanceof bs))throw new ae(W.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Xe.fromString(e,...t));return by(s),new ut(r.firestore,r instanceof bs?r.converter:null,new Ee(s))}}const A_="AsyncQueue";class R_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new rp(this,"async_queue_retry"),this._c=()=>{const s=qd();s&&he(A_,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=qd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=qd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new fr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Qo(e))throw e;he(A_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,qr("INTERNAL UNHANDLED ERROR: ",C_(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=lp.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&Te(47125,{Pc:C_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function C_(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}function P_(r){return(function(t,s){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of s)if(l in o&&typeof o[l]=="function")return!0;return!1})(r,["next","error","complete"])}class qs extends eh{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new R_,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new R_(e),this._firestoreClient=void 0,await e}}}function RP(r,e){const t=typeof r=="object"?r:sv(),s=typeof r=="string"?r:vc,o=Nf(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=JT("firestore");l&&AP(o,...l)}return o}function Jo(r){if(r._terminated)throw new ae(W.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||CP(r),r._firestoreClient}function CP(r){const e=r._freezeSettings(),t=(function(o,l,h,f){return new QA(o,l,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,eE(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new vP(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(o){const l=o?._online.build();return{_offline:o?._offline.build(l),_online:l}})(r._componentsProvider))}class yn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new yn(Bt.fromBase64String(e))}catch(t){throw new ae(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new yn(Bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:yn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(vl(e,yn._jsonSchema))return yn.fromBase64String(e.bytes)}}yn._jsonSchemaVersion="firestore/bytes/1.0",yn._jsonSchema={type:It("string",yn._jsonSchemaVersion),bytes:It("string")};class Rl{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ae(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class th{constructor(e){this._methodName=e}}class mr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ae(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ae(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Be(this._lat,e._lat)||Be(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:mr._jsonSchemaVersion}}static fromJSON(e){if(vl(e,mr._jsonSchema))return new mr(e.latitude,e.longitude)}}mr._jsonSchemaVersion="firestore/geoPoint/1.0",mr._jsonSchema={type:It("string",mr._jsonSchemaVersion),latitude:It("number"),longitude:It("number")};class gr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:gr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(vl(e,gr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new gr(e.vectorValues);throw new ae(W.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}gr._jsonSchemaVersion="firestore/vectorValue/1.0",gr._jsonSchema={type:It("string",gr._jsonSchemaVersion),vectorValues:It("object")};const PP=/^__.*__$/;class kP{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Gs(e,this.data,this.fieldMask,t,this.fieldTransforms):new Tl(e,this.data,t,this.fieldTransforms)}}class nE{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Gs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function rE(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te(40011,{Ac:r})}}class _p{constructor(e,t,s,o,l,h){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new _p({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Nc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(rE(this.Ac)&&PP.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class xP{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Jc(e)}Cc(e,t,s,o=!1){return new _p({Ac:e,methodName:t,Dc:s,path:Ft.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function nh(r){const e=r._freezeSettings(),t=Jc(r._databaseId);return new xP(r._databaseId,!!e.ignoreUndefinedProperties,t)}function vp(r,e,t,s,o,l={}){const h=r.Cc(l.merge||l.mergeFields?2:0,e,t,o);Ep("Data must be an object, but it was:",h,s);const f=oE(s,h);let g,y;if(l.merge)g=new _n(h.fieldMask),y=h.fieldTransforms;else if(l.mergeFields){const v=[];for(const E of l.mergeFields){const S=If(e,E,t);if(!h.contains(S))throw new ae(W.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);lE(v,S)||v.push(S)}g=new _n(v),y=h.fieldTransforms.filter((E=>g.covers(E.field)))}else g=null,y=h.fieldTransforms;return new kP(new Zt(f),g,y)}class rh extends th{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof rh}}class wp extends th{_toFieldTransform(e){return new ER(e.path,new cl)}isEqual(e){return e instanceof wp}}function sE(r,e,t,s){const o=r.Cc(1,e,t);Ep("Data must be an object, but it was:",o,s);const l=[],h=Zt.empty();Hs(s,((g,y)=>{const v=Tp(e,g,t);y=St(y);const E=o.yc(v);if(y instanceof rh)l.push(v);else{const S=Cl(y,E);S!=null&&(l.push(v),h.set(v,S))}}));const f=new _n(l);return new nE(h,f,o.fieldTransforms)}function iE(r,e,t,s,o,l){const h=r.Cc(1,e,t),f=[If(e,s,t)],g=[o];if(l.length%2!=0)throw new ae(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)f.push(If(e,l[S])),g.push(l[S+1]);const y=[],v=Zt.empty();for(let S=f.length-1;S>=0;--S)if(!lE(y,f[S])){const O=f[S];let q=g[S];q=St(q);const $=h.yc(O);if(q instanceof rh)y.push(O);else{const L=Cl(q,$);L!=null&&(y.push(O),v.set(O,L))}}const E=new _n(y);return new nE(v,E,h.fieldTransforms)}function NP(r,e,t,s=!1){return Cl(t,r.Cc(s?4:3,e))}function Cl(r,e){if(aE(r=St(r)))return Ep("Unsupported field value:",e,r),oE(r,e);if(r instanceof th)return(function(s,o){if(!rE(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const l=[];let h=0;for(const f of s){let g=Cl(f,o.wc(h));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),h++}return{arrayValue:{values:l}}})(r,e)}return(function(s,o){if((s=St(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return _R(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=nt.fromDate(s);return{timestampValue:Ac(o.serializer,l)}}if(s instanceof nt){const l=new nt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Ac(o.serializer,l)}}if(s instanceof mr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof yn)return{bytesValue:Cw(o.serializer,s._byteString)};if(s instanceof ut){const l=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(l))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Yf(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof gr)return(function(h,f){return{mapValue:{fields:{[ew]:{stringValue:tw},[wc]:{arrayValue:{values:h.toArray().map((y=>{if(typeof y!="number")throw f.Sc("VectorValues must only contain numeric values.");return Qf(f.serializer,y)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${Bc(s)}`)})(r,e)}function oE(r,e){const t={};return Kv(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hs(r,((s,o)=>{const l=Cl(o,e.mc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function aE(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof nt||r instanceof mr||r instanceof yn||r instanceof ut||r instanceof th||r instanceof gr)}function Ep(r,e,t){if(!aE(t)||!Hv(t)){const s=Bc(t);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function If(r,e,t){if((e=St(e))instanceof Rl)return e._internalPath;if(typeof e=="string")return Tp(r,e);throw Nc("Field path arguments must be of type string or ",r,!1,void 0,t)}const DP=new RegExp("[~\\*/\\[\\]]");function Tp(r,e,t){if(e.search(DP)>=0)throw Nc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Rl(...e.split("."))._internalPath}catch{throw Nc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Nc(r,e,t,s,o){const l=s&&!s.isEmpty(),h=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(l||h)&&(g+=" (found",l&&(g+=` in field ${s}`),h&&(g+=` in document ${o}`),g+=")"),new ae(W.INVALID_ARGUMENT,f+r+g)}function lE(r,e){return r.some((t=>t.isEqual(e)))}class Dc{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new ut(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new VP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ip("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class VP extends Dc{data(){return super.data()}}function Ip(r,e){return typeof e=="string"?Tp(r,e):e instanceof Rl?e._internalPath:e._delegate._internalPath}function uE(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ae(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Sp{}class cE extends Sp{}function yr(r,e,...t){let s=[];e instanceof Sp&&s.push(e),s=s.concat(t),(function(l){const h=l.filter((g=>g instanceof Ap)).length,f=l.filter((g=>g instanceof sh)).length;if(h>1||h>0&&f>0)throw new ae(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)r=o._apply(r);return r}class sh extends cE{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new sh(e,t,s)}_apply(e){const t=this._parse(e);return dE(e._query,t),new Ks(e.firestore,e.converter,pf(e._query,t))}_parse(e){const t=nh(e.firestore);return(function(l,h,f,g,y,v,E){let S;if(y.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new ae(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){x_(E,v);const q=[];for(const $ of E)q.push(k_(g,l,$));S={arrayValue:{values:q}}}else S=k_(g,l,E)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||x_(E,v),S=NP(f,h,E,v==="in"||v==="not-in");return Et.create(y,v,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function _r(r,e,t){const s=e,o=Ip("where",r);return sh._create(o,s,t)}class Ap extends Sp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ap(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:$n.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let h=o;const f=l.getFlattenedFilters();for(const g of f)dE(h,g),h=pf(h,g)})(e._query,t),new Ks(e.firestore,e.converter,pf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Rp extends cE{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new Rp(e,t,s)}_apply(e){return new Ks(e.firestore,e.converter,Ic(e._query,this._limit,this._limitType))}}function hE(r){return jA("limit",r),Rp._create("limit",r,"F")}function k_(r,e,t){if(typeof(t=St(t))=="string"){if(t==="")throw new ae(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!uw(e)&&t.indexOf("/")!==-1)throw new ae(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Xe.fromString(t));if(!Ee.isDocumentKey(s))throw new ae(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Wy(r,new Ee(s))}if(t instanceof ut)return Wy(r,t._key);throw new ae(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Bc(t)}.`)}function x_(r,e){if(!Array.isArray(r)||r.length===0)throw new ae(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function dE(r,e){const t=(function(o,l){for(const h of o)for(const f of h.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ae(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ae(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class fE{convertValue(e,t="none"){switch(Bs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ft(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Us(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Te(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Hs(e,((o,l)=>{s[o]=this.convertValue(l,t)})),s}convertVectorValue(e){const t=e.fields?.[wc].arrayValue?.values?.map((s=>ft(s.doubleValue)));return new gr(t)}convertGeoPoint(e){return new mr(ft(e.latitude),ft(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=$c(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(al(e));default:return null}}convertTimestamp(e){const t=Fs(e);return new nt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Xe.fromString(e);We(Ow(s),9688,{name:e});const o=new ll(s.get(1),s.get(3)),l=new Ee(s.popFirst(5));return o.isEqual(t)||qr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function Cp(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}class OP extends fE{constructor(e){super(),this.firestore=e}convertBytes(e){return new yn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ut(this.firestore,null,t)}}class ko{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ls extends Dc{constructor(e,t,s,o,l,h){super(e,t,s,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new lc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Ip("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(W.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ls._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ls._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ls._jsonSchema={type:It("string",Ls._jsonSchemaVersion),bundleSource:It("string","DocumentSnapshot"),bundleName:It("string"),bundle:It("string")};class lc extends Ls{data(e={}){return super.data(e)}}class Pi{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new ko(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new lc(this._firestore,this._userDataWriter,s.key,s,new ko(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ae(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((f=>{const g=new lc(o._firestore,o._userDataWriter,f.doc.key,f.doc,new ko(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const g=new lc(o._firestore,o._userDataWriter,f.doc.key,f.doc,new ko(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,v=-1;return f.type!==0&&(y=h.indexOf(f.doc.key),h=h.delete(f.doc.key)),f.type!==1&&(h=h.add(f.doc),v=h.indexOf(f.doc.key)),{type:MP(f.type),doc:g,oldIndex:y,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(W.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Pi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=$f.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function MP(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te(61501,{type:r})}}function qn(r){r=kn(r,ut);const e=kn(r.firestore,qs);return IP(Jo(e),r._key).then((t=>mE(e,r,t)))}Pi._jsonSchemaVersion="firestore/querySnapshot/1.0",Pi._jsonSchema={type:It("string",Pi._jsonSchemaVersion),bundleSource:It("string","QuerySnapshot"),bundleName:It("string"),bundle:It("string")};class ih extends fE{constructor(e){super(),this.firestore=e}convertBytes(e){return new yn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ut(this.firestore,null,t)}}function Qt(r){r=kn(r,Ks);const e=kn(r.firestore,qs),t=Jo(e),s=new ih(e);return uE(r._query),SP(t,r._query).then((o=>new Pi(e,s,r,o)))}function Qs(r,e,t){r=kn(r,ut);const s=kn(r.firestore,qs),o=Cp(r.converter,e,t);return pE(s,[vp(nh(s),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,Ut.none())])}function bP(r,...e){r=St(r);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||P_(e[s])||(t=e[s++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(P_(e[s])){const g=e[s];e[s]=g.next?.bind(g),e[s+1]=g.error?.bind(g),e[s+2]=g.complete?.bind(g)}let l,h,f;if(r instanceof ut)h=kn(r.firestore,qs),f=qc(r._key.path),l={next:g=>{e[s]&&e[s](mE(h,r,g))},error:e[s+1],complete:e[s+2]};else{const g=kn(r,Ks);h=kn(g.firestore,qs),f=g._query;const y=new ih(h);l={next:v=>{e[s]&&e[s](new Pi(h,y,g,v))},error:e[s+1],complete:e[s+2]},uE(r._query)}return(function(y,v,E,S){const O=new gp(S),q=new fp(v,O,E);return y.asyncQueue.enqueueAndForget((async()=>cp(await xc(y),q))),()=>{O.Nu(),y.asyncQueue.enqueueAndForget((async()=>hp(await xc(y),q)))}})(Jo(h),f,o,l)}function pE(r,e){return(function(s,o){const l=new fr;return s.asyncQueue.enqueueAndForget((async()=>lP(await EP(s),o,l))),l.promise})(Jo(r),e)}function mE(r,e,t){const s=t.docs.get(e._key),o=new ih(r);return new Ls(r,o,e._key,s,new ko(t.hasPendingWrites,t.fromCache),e.converter)}const LP={maxAttempts:5};class jP{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=nh(e)}set(e,t,s){this._verifyNotCommitted();const o=xs(e,this._firestore),l=Cp(o.converter,t,s),h=vp(this._dataReader,"WriteBatch.set",o._key,l,o.converter!==null,s);return this._mutations.push(h.toMutation(o._key,Ut.none())),this}update(e,t,s,...o){this._verifyNotCommitted();const l=xs(e,this._firestore);let h;return h=typeof(t=St(t))=="string"||t instanceof Rl?iE(this._dataReader,"WriteBatch.update",l._key,t,s,o):sE(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(h.toMutation(l._key,Ut.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=xs(e,this._firestore);return this._mutations=this._mutations.concat(new Qc(t._key,Ut.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ae(W.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function xs(r,e){if((r=St(r)).firestore!==e)throw new ae(W.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}class FP{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=nh(e)}get(e){const t=xs(e,this._firestore),s=new OP(this._firestore);return this._transaction.lookup([t._key]).then((o=>{if(!o||o.length!==1)return Te(24041);const l=o[0];if(l.isFoundDocument())return new Dc(this._firestore,s,l.key,l,t.converter);if(l.isNoDocument())return new Dc(this._firestore,s,t._key,null,t.converter);throw Te(18433,{doc:l})}))}set(e,t,s){const o=xs(e,this._firestore),l=Cp(o.converter,t,s),h=vp(this._dataReader,"Transaction.set",o._key,l,o.converter!==null,s);return this._transaction.set(o._key,h),this}update(e,t,s,...o){const l=xs(e,this._firestore);let h;return h=typeof(t=St(t))=="string"||t instanceof Rl?iE(this._dataReader,"Transaction.update",l._key,t,s,o):sE(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,h),this}delete(e){const t=xs(e,this._firestore);return this._transaction.delete(t._key),this}}class UP extends FP{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=xs(e,this._firestore),s=new ih(this._firestore);return super.get(e).then((o=>new Ls(this._firestore,s,t._key,o._document,new ko(!1,!1),t.converter)))}}function Pl(r,e,t){r=kn(r,qs);const s={...LP,...t};return(function(l){if(l.maxAttempts<1)throw new ae(W.INVALID_ARGUMENT,"Max attempts must be at least 1")})(s),(function(l,h,f){const g=new fr;return l.asyncQueue.enqueueAndForget((async()=>{const y=await TP(l);new _P(l.asyncQueue,y,f,h,g).ju()})),g.promise})(Jo(r),(o=>e(new UP(r,o))),s)}function wt(){return new wp("serverTimestamp")}function Pp(r){return Jo(r=kn(r,qs)),new jP(r,(e=>pE(r,e)))}(function(e,t=!0){(function(o){Go=o})(Wo),Oo(new xi("firestore",((s,{instanceIdentifier:o,options:l})=>{const h=s.getProvider("app").getImmediate(),f=new qs(new kA(s.getProvider("auth-internal")),new DA(h,s.getProvider("app-check-internal")),(function(y,v){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ae(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ll(y.options.projectId,v)})(h,o),h);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),Os(Dy,Vy,e),Os(Dy,Vy,"esm2020")})();var BP="firebase",zP="12.7.0";Os(BP,zP,"app");const $P={apiKey:"AIzaSyA-TURVnsMyyBOWreei2jGLcuXmOzyr_DQ",authDomain:"gamificationcollege.firebaseapp.com",projectId:"gamificationcollege",storageBucket:"gamificationcollege.firebasestorage.app",messagingSenderId:"237003198772",appId:"1:237003198772:web:37fc8130a083377a115561"},gE=rv($P),Hd=AA(gE),qP=new Fr,ve=RP(gE),yE=we.createContext(null);function WP({children:r}){const[e,t]=we.useState(null),[s,o]=we.useState(null),[l,h]=we.useState(!0);we.useEffect(()=>{const y=f1(Hd,async v=>{if(t(v),o(null),!v){h(!1);return}const E=Fe(ve,"users",v.uid);(await qn(E)).exists()||await Qs(E,{displayName:v.displayName||"Utilisateur",role:"child",createdAt:wt()});const O=await qn(E);o(O.data()?.role||"child"),h(!1)});return()=>y()},[]);const f=async()=>{await O1(Hd,qP)},g=async()=>{await p1(Hd)};return T.jsx(yE.Provider,{value:{user:e,role:s,loading:l,signInGoogle:f,signOutUser:g},children:r})}function Kr(){const r=we.useContext(yE);if(!r)throw new Error("useAuth doit tre utilis sous <AuthProvider>");return r}function HP(){const{user:r,role:e,signOutUser:t}=Kr();return T.jsx("div",{className:"card",style:{marginBottom:14},children:T.jsxs("div",{className:"row",style:{justifyContent:"space-between"},children:[T.jsxs("div",{children:[T.jsx("div",{style:{fontWeight:900,fontSize:"1.05rem"},children:"Malo  Rvisions"}),T.jsx("div",{className:"small",children:r?T.jsxs(T.Fragment,{children:["Connect : ",T.jsx("strong",{children:r.displayName})," ",T.jsx("span",{className:"badge",children:e})]}):"Non connect"})]}),T.jsxs("div",{className:"row",style:{gap:8},children:[T.jsx(Ii,{className:"btn secondary",to:"/",children:"Accueil"}),r&&T.jsx(Ii,{className:"btn secondary",to:"/recompenses",children:"Rcompenses"}),r&&T.jsx(Ii,{className:"btn secondary",to:"/progression",children:"Progression"}),e==="parent"&&T.jsxs(T.Fragment,{children:[T.jsx(Ii,{className:"btn secondary",to:"/admin/import",children:"Import (parent)"}),T.jsx(Ii,{className:"btn secondary",to:"/admin/moderation",children:"Modration"}),T.jsx(Ii,{className:"btn secondary",to:"/admin/progression",children:"Progression"})]}),r&&T.jsx("button",{className:"btn secondary",onClick:t,children:"Dconnexion"})]})]})})}function Ju({children:r}){const{user:e,loading:t}=Kr();return t?T.jsx("div",{className:"card",children:"Chargement"}):e?T.jsx(T.Fragment,{children:r}):T.jsx(Xd,{to:"/connexion",replace:!0})}function Gd({children:r}){const{user:e,role:t,loading:s}=Kr();return s?T.jsx("div",{className:"card",children:"Chargement"}):e?t!=="parent"?T.jsx(Xd,{to:"/",replace:!0}):T.jsx(T.Fragment,{children:r}):T.jsx(Xd,{to:"/connexion",replace:!0})}function zo(r){return(r||"").toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[]/g,"'").replace(/\s+/g," ").trim()}async function GP(){return(await Qt(Tt(ve,"subjects"))).docs.map(e=>({id:e.id,...e.data()}))}async function _E(r,e){const{uid:t,includeHidden:s=!1,includeOverrides:o=!1}=e||{},l=yr(Tt(ve,"themes"),_r("subjectId","==",r)),f=(await Qt(l)).docs.map(v=>({id:v.id,...v.data()}));let g=new Map;if(t)try{const v=await Qt(Tt(ve,"users",t,"visibilityThemes"));g=new Map(v.docs.map(E=>[E.id,!!E.data().visible]))}catch{g=new Map}const y=f.filter(v=>{const E=g.get(v.id);return!(!s&&v.hidden||!s&&E===!1)});return o?y.map(v=>({...v,visibleOverride:g.get(v.id)})):y}async function vE(r,e){const{uid:t,includeHidden:s=!1,includeOverrides:o=!1}=e||{},l=yr(Tt(ve,"exercises"),_r("themeId","==",r)),f=(await Qt(l)).docs.map(v=>({id:v.id,...v.data()}));let g=new Map;if(t)try{const v=await Qt(Tt(ve,"users",t,"visibilityExercises"));g=new Map(v.docs.map(E=>[E.id,!!E.data().visible]))}catch{g=new Map}const y=f.filter(v=>{const E=g.get(v.id);return!(!s&&v.hidden||!s&&E===!1)});return o?y.map(v=>({...v,visibleOverride:g.get(v.id)})):y}async function KP(r){const e=yr(Tt(ve,"readings"),_r("themeId","==",r));try{return(await Qt(e)).docs.map(s=>({id:s.id,...s.data()}))}catch{return[]}}async function QP(r){const e=Pp(ve);for(const t of r.subjects){e.set(Fe(ve,"subjects",t.id),{title:t.title},{merge:!0});for(const s of t.themes){e.set(Fe(ve,"themes",s.id),{subjectId:t.id,title:s.title,grade:r.grade,readings:Array.isArray(s.readings)?s.readings:[]},{merge:!0});for(const o of s.exercises){const l=Fe(ve,"exercises",o.id),h={...o,themeId:s.id};h.tags=Array.isArray(h.tags)?h.tags.slice(0,3):[],h.type==="short_text"&&Array.isArray(h.expected)&&(h.expected=h.expected.map(f=>zo(f))),h.type==="fill_blank"&&Array.isArray(h.expected)&&(h.expected=h.expected.map(f=>zo(f))),e.set(l,h,{merge:!0})}if(Array.isArray(s.readings))for(const o of s.readings){if(!o.id||!o.title||!o.text||!Array.isArray(o.questions))continue;o.id,o.title,o.text,o.difficulty,Array.isArray(o.tags)&&o.tags.slice(0,3),o.questions.map(h=>({...h,type:"mcq",themeId:s.id,tags:Array.isArray(h.tags)?h.tags.slice(0,3):[]}));const l=Fe(ve,"themes",s.id);e.set(l,{readings:[...(Array.isArray(s.readings)?s.readings:[]).map(h=>({...h,themeId:s.id}))]},{merge:!0})}}}await e.commit()}async function XP(r,e){await Qs(Fe(ve,"themes",r),{hidden:e},{merge:!0})}async function JP(r,e){await Qs(Fe(ve,"exercises",r),{hidden:e},{merge:!0})}async function YP(r,e,t){await Qs(Fe(ve,"users",r,"visibilityThemes",e),{visible:t},{merge:!0})}async function ZP(r,e,t){await Qs(Fe(ve,"users",r,"visibilityExercises",e),{visible:t},{merge:!0})}async function ek(r){try{const e=Pp(ve);return e.delete(Fe(ve,"themes",r)),(await Qt(yr(Tt(ve,"exercises"),_r("themeId","==",r)))).docs.forEach(o=>e.delete(o.ref)),(await Qt(yr(Tt(ve,"readings"),_r("themeId","==",r)))).docs.forEach(o=>e.delete(o.ref)),await e.commit(),{deleted:!0}}catch{return await Qs(Fe(ve,"themes",r),{hidden:!0},{merge:!0}),{deleted:!1,hidden:!0}}}async function kp(r){const e=Fe(ve,"users",r,"stats","main"),t=await qn(e);return t.exists()?t.data():(await Qs(e,{xp:0,coins:0,streakDays:0,lastDoneDate:null,badges:[],updatedAt:wt()}),(await qn(e)).data())}function N_(r){return r.toISOString().slice(0,10)}function tk(r,e){return r===1?e?3:-1:r===2?e?5:-2:e?7:-3}function nk(r){return Math.max(0,Math.min(100,r))}function rk(r){return r>=80?"mastered":r>=60?"nearly":r>=30?"developing":"weak"}async function sk(r){const{uid:e,items:t,existingAttemptId:s}=r,o=new Date,l=N_(o),h=t.length,f=t.filter(O=>O.correct).length;if(h===0)return{xpGain:0,coinsGain:0,streakDays:0,badges:[],score:0,outOf:0};const g=new Map;t.forEach(O=>{const q=Array.isArray(O.tags)?O.tags.slice(0,3):[],$=tk(O.difficulty,O.correct);q.forEach(L=>{const ne=g.get(L)||{delta:0,correct:0,wrong:0};g.set(L,{delta:ne.delta+$,correct:ne.correct+(O.correct?1:0),wrong:ne.wrong+(O.correct?0:1)})})});const y=f*10,v=Math.max(1,Math.min(3,Math.round(f/Math.max(1,h)*3)));let E=null;const S=s?Fe(ve,"users",e,"attempts",s):Fe(Tt(ve,"users",e,"attempts"));return t.map(()=>Fe(Tt(S,"items"))),await Pl(ve,async O=>{const q=Fe(ve,"users",e,"stats","main"),$=Fe(ve,"users",e,"progressSummary","main"),L=Array.from(g.keys()).map(k=>Fe(ve,"users",e,"tagProgress",k)),[ne,Y,te]=await Promise.all([O.get(q),O.get($),Promise.all(L.map(k=>O.get(k)))]),H=ne.exists()?ne.data():{xp:0,coins:0,streakDays:0,lastDoneDate:null,badges:[]};let ie=H.streakDays||0;const le=H.lastDoneDate;if(le!==l){const k=N_(new Date(o.getTime()-864e5));ie=le===k?ie+1:1}const A=new Set(Array.isArray(H.badges)?H.badges:[]);ie>=3&&A.add("3 jours daffile"),ie>=7&&A.add("7 jours daffile"),f===h&&h>=10&&A.add("Zro faute (10+)");const R=Y.exists()?Y.data():null,P={weak:0,developing:0,nearly:0,mastered:0};for(let k=0;k<L.length;k++){const D=L[k],C=te[k],se=D.id,me=g.get(se),Le=C.exists()?C.data():null,Ie=typeof Le?.mastery=="number"?Le.mastery:0,Z=Le?.bucket,ye=nk(Ie+me.delta),ue=rk(ye);Z&&R&&(P[Z]-=1),P[ue]+=1,O.set(D,{mastery:ye,bucket:ue,correctAnswers:(Le?.correctAnswers||0)+me.correct,wrongAnswers:(Le?.wrongAnswers||0)+me.wrong,lastDelta:me.delta,updatedAt:wt()},{merge:!0})}const N=R?.masteryBuckets||{weak:0,developing:0,nearly:0,mastered:0};O.set(q,{xp:(H.xp||0)+y,coins:(H.coins||0)+v,streakDays:ie,lastDoneDate:l,badges:Array.from(A),updatedAt:wt()},{merge:!0}),O.set($,{totalAnswers:(R?.totalAnswers||0)+h,correctAnswers:(R?.correctAnswers||0)+f,totalAttempts:(R?.totalAttempts||0)+1,masteryBuckets:{weak:(N.weak||0)+P.weak,developing:(N.developing||0)+P.developing,nearly:(N.nearly||0)+P.nearly,mastered:(N.mastered||0)+P.mastered},lastAttemptId:S.id,lastDate:l,updatedAt:wt()},{merge:!0}),E={xpGain:y,coinsGain:v,streakDays:ie,badges:Array.from(A)}}),{...E||{xpGain:0,coinsGain:0,streakDays:0,badges:[]},score:f,outOf:h}}const wE=[{id:"badge_dragon",title:"Badge Dragon",description:"Un badge pique  afficher",priceCoins:10},{id:"skin_bleu",title:"Skin Bleu",description:"Personnalisation bleue de ton avatar",priceCoins:15},{id:"skin_or",title:"Skin Or",description:"Style dor rare",priceCoins:25,requiresXp:150},{id:"pack_stickers",title:"Pack Stickers",description:"Stickers virtuels  collectionner",priceCoins:8},{id:"titre_champion",title:"Titre Champion",description:"Titre spcial dans ton profil",priceCoins:20,requiresXp:100}];function ik(){return wE}async function EE(r){return(await Qt(Tt(ve,"users",r,"inventory"))).docs.map(t=>({id:t.id,...t.data()}))}async function ok(r,e){const t=wE.find(h=>h.id===e);if(!t)throw new Error("Item inconnu");const s=Fe(ve,"users",r,"stats","main"),o=Fe(ve,"users",r,"inventory",e);return await Pl(ve,async h=>{const[f,g]=await Promise.all([h.get(s),h.get(o)]),y=f.exists()?f.data():await kp(r);if(g.exists())throw new Error("Dj possd");const v=y.coins||0,E=y.xp||0;if(v<t.priceCoins)throw new Error("Pas assez de pices");if(t.requiresXp&&E<t.requiresXp)throw new Error("XP insuffisant");return h.set(o,{acquiredAt:wt(),title:t.title,description:t.description,priceCoins:t.priceCoins,requiresXp:t.requiresXp||null}),h.set(s,{coins:v-t.priceCoins,xp:E,updatedAt:wt()},{merge:!0}),{coins:v-t.priceCoins,xp:E}})}const Kd={xp:0,level:1,badges:[],masteryByTag:{}};function xp(r){const[e,t]=we.useState(Kd),[s,o]=we.useState(!!r);return we.useEffect(()=>{if(!r){t(Kd),o(!1);return}const l=Fe(ve,"users",r,"meta","rewards"),h=bP(l,f=>{f.exists()?t(f.data()):t(Kd),o(!1)},()=>o(!1));return()=>h()},[r]),{rewards:e,loading:s}}const ak=[{id:"streak_3",title:"Srie 3",description:"3 jours de suite",icon:""},{id:"streak_7",title:"Srie 7",description:"7 jours de suite",icon:""},{id:"retry_5",title:"Persvrant",description:"5 erreurs revues",icon:""},{id:"tag_master_3",title:"Matre x3",description:"3 tags matriss",icon:""},{id:"tag_master_10",title:"Matre x10",description:"10 tags matriss",icon:""},{id:"fractions_first_mastery",title:"As des fractions",description:"1er tag fractions matris",icon:""},{id:"grammar_first_mastery",title:"As de grammaire",description:"1er tag grammaire matris",icon:""},{id:"sessions_10",title:"Marathon 10",description:"10 sances termines",icon:""}],D_=[{id:"fr",title:"Franais"},{id:"math",title:"Maths"},{id:"en",title:"Anglais"},{id:"es",title:"Espagnol"},{id:"hist",title:"Histoire"}];function lk(){const{user:r}=Kr(),{rewards:e}=xp(r?.uid||null),[t,s]=we.useState([]),[o,l]=we.useState("fr"),[h,f]=we.useState([]),[g,y]=we.useState(null),[v,E]=we.useState([]);return we.useEffect(()=>{(async()=>{try{const S=await GP();s(S.length?S:D_)}catch{s(D_)}})()},[]),we.useEffect(()=>{(async()=>{const S=await _E(o,{uid:r?.uid});f(S)})()},[o,r]),we.useEffect(()=>{r&&(async()=>{const S=await kp(r.uid);y(S);const O=await EE(r.uid);E(O)})()},[r]),T.jsxs("div",{className:"container grid",children:[T.jsx("div",{className:"card",children:T.jsxs("div",{className:"row",style:{justifyContent:"space-between"},children:[T.jsxs("div",{children:[T.jsx("h2",{style:{margin:0},children:"Salut Malo "}),T.jsx("div",{className:"small",children:"Choisis une matire, puis un thme. Objectif : 10 questions par jour."})]}),g&&T.jsxs("div",{className:"kpi",children:[T.jsxs("div",{className:"pill",children:["XP: ",T.jsx("strong",{children:g.xp??0})]}),T.jsxs("div",{className:"pill",children:["Pices: ",T.jsx("strong",{children:g.coins??0})]}),T.jsxs("div",{className:"pill",children:["Srie: ",T.jsx("strong",{children:g.streakDays??0})," jours"]})]})]})}),T.jsxs("div",{className:"grid2",children:[T.jsxs("div",{className:"card",children:[T.jsx("h3",{style:{marginTop:0},children:"Matire"}),T.jsx("select",{className:"input",value:o,onChange:S=>l(S.target.value),children:t.map(S=>T.jsx("option",{value:S.id,children:S.title},S.id))}),T.jsx("div",{className:"small",style:{marginTop:8},children:"Priorits : Franais (grammaire & conjugaison) + Maths (fractions)."})]}),T.jsxs("div",{className:"card",children:[T.jsx("h3",{style:{marginTop:0},children:"Thmes"}),h.length===0?T.jsx("div",{className:"small",children:"Aucun thme pour linstant. (Parent : importe un pack JSON)"}):T.jsx("div",{className:"grid",children:h.map(S=>T.jsx(Ii,{className:"btn secondary",to:`/theme/${S.id}`,children:S.title},S.id))})]})]}),g?.badges?.length?T.jsxs("div",{className:"card",children:[T.jsx("h3",{style:{marginTop:0},children:"Badges"}),T.jsx("div",{className:"row",children:g.badges.map(S=>T.jsx("span",{className:"badge",children:S},S))})]}):null,v.length?T.jsxs("div",{className:"card",children:[T.jsx("h3",{style:{marginTop:0},children:"Inventaire"}),T.jsx("div",{className:"row",children:v.map(S=>T.jsx("span",{className:"badge",children:S.title||S.id},S.id))})]}):null,T.jsxs("div",{className:"card",children:[T.jsx("h3",{style:{marginTop:0},children:"Badges"}),T.jsx("div",{className:"grid2",children:ak.map(S=>{const O=(e.badges||[]).includes(S.id);return T.jsxs("div",{className:"pill",style:{opacity:O?1:.35,borderColor:O?"rgba(122,162,255,0.6)":"rgba(255,255,255,0.18)",display:"flex",flexDirection:"column",gap:4},children:[T.jsxs("div",{style:{fontWeight:700},children:[S.icon," ",S.title]}),T.jsx("div",{className:"small",children:S.description})]},S.id)})})]})]})}function uk(){const{user:r,signInGoogle:e}=Kr(),t=bc();return we.useEffect(()=>{r&&t("/")},[r]),T.jsx("div",{className:"container",children:T.jsxs("div",{className:"card",children:[T.jsx("h2",{style:{marginTop:0},children:"Connexion"}),T.jsx("p",{className:"small",children:"Connexion Google recommande (simple sur tablette Android)."}),T.jsx("button",{className:"btn",onClick:e,children:"Se connecter avec Google"}),T.jsx("hr",{}),T.jsxs("p",{className:"small",children:["Astuce : aprs ta premire connexion (toi), va dans Firestore et mets ",T.jsxs("code",{children:["users/","{uid}",".role"]}),'  "parent".']})]})})}function ck(r,e){return r.type==="mcq"?e===r.answerIndex:r.type==="short_text"||r.type==="fill_blank"?r.expected.includes(zo(e||"")):!1}function hk(r,e){return r===1?e?3:-1:r===2?e?5:-2:e?7:-3}function dk(r){return Math.max(0,Math.min(100,r))}function fk(r){return r>=80?"mastered":r>=60?"nearly":r>=30?"developing":"weak"}function TE(r){return r.toISOString().slice(0,10)}function pk(r,e){const t=new Date(r+"T00:00:00");return t.setDate(t.getDate()+e),TE(t)}function mk(r,e,t){const s=Math.max(0,Math.min(100,r));let o=1;return s>=81||e==="mastered"?o=10:s>=61||e==="nearly"?o=4:s>=31||e==="developing"?o=2:o=1,pk(t,o)}async function gk(r){const{uid:e,subjectId:t,themeId:s,answers:o,exercises:l,durationSec:h}=r,g=TE(new Date),y=Fe(Tt(ve,"users",e,"attempts")),v=Tt(ve,"users",e,"attemptItems"),E=Fe(ve,"users",e,"progressSummary","main"),S=l.map((se,me)=>{const Le=ck(se,o[se.id]);return{exerciseId:se.id,subjectId:t,themeId:s,difficulty:se.difficulty,tags:se.tags?.slice(0,3)||[],correct:Le,index:me,prompt:se.prompt,choices:Array.isArray(se.choices)?se.choices:null,readingContext:se.readingContext||null}}),O=S.filter(se=>se.correct).length,q=S.length,$=new Map;S.forEach(se=>{const me=hk(se.difficulty,se.correct);se.tags.forEach(Le=>{const Ie=$.get(Le)||{delta:0,correct:0,wrong:0,results:[]};Ie.delta+=me,Ie.correct+=se.correct?1:0,Ie.wrong+=se.correct?0:1,Ie.results.push(se.correct),$.set(Le,Ie)})});const L=Array.from($.keys()),ne=await Promise.all(L.map(se=>qn(Fe(ve,"users",e,"tagProgress",se)))),Y=Pp(ve),te={subjectId:t,themeId:s,score:O,outOf:q,durationSec:h,itemsCount:S.length,date:g,createdAt:wt()};Y.set(y,te),S.forEach(se=>{const me=Fe(v);Y.set(me,{...se,createdAt:wt(),answer:o[se.exerciseId]??null})});const H={weak:0,developing:0,nearly:0,mastered:0},ie={};L.forEach((se,me)=>{const Le=ne[me],Ie=Le.exists()?Le.data():null,Z=$.get(se),ue=[...Array.isArray(Ie?.last7Results)?Ie.last7Results:[],...Z.results].slice(-7),b={correct:ue.filter(Vt=>Vt).length,wrong:ue.filter(Vt=>!Vt).length};let G=Ie?.streakCorrect||0,Re=Ie?.streakWrong||0;Z.results.forEach(Vt=>{Vt?(G+=1,Re=0):(Re+=1,G=0)});const xe=typeof Ie?.mastery=="number"?Ie.mastery:0,Me=dk(xe+Z.delta),be=fk(Me),oe=Ie?.bucket;oe&&(H[oe]-=1),H[be]+=1;const De=mk(Me,be,g),Oe=Fe(ve,"users",e,"tagProgress",se),mt={tagId:se,mastery:Me,bucket:be,attempts:(Ie?.attempts||0)+Z.results.length,correctAnswers:(Ie?.correctAnswers||0)+Z.correct,wrongAnswers:(Ie?.wrongAnswers||0)+Z.wrong,last7Results:ue,last7:b,lastSeenAt:wt(),lastCorrectAt:Z.correct>0?wt():Ie?.lastCorrectAt||null,streakCorrect:G,streakWrong:Re,lastDelta:Z.delta,nextDueDate:De,updatedAt:wt()};ie[se]=mt,Y.set(Oe,mt,{merge:!0})});const le=await qn(E),A=le.exists()?le.data():null,R=A?.masteryBuckets||{weak:0,developing:0,nearly:0,mastered:0},P={weak:(R.weak||0)+H.weak,developing:(R.developing||0)+H.developing,nearly:(R.nearly||0)+H.nearly,mastered:(R.mastered||0)+H.mastered},N=Object.values(ie).sort((se,me)=>se.mastery-me.mastery).map(se=>se.tagId),k=Array.isArray(A?.topWeakTags)?A.topWeakTags:[],D=Array.from(new Set([...N,...k])).slice(0,3),C={totalAnswers:(A?.totalAnswers||0)+q,correctAnswers:(A?.correctAnswers||0)+O,totalAttempts:(A?.totalAttempts||0)+1,masteryBuckets:P,lastAttemptId:y.id,lastDate:g,updatedAt:wt(),topWeakTags:D};return Y.set(E,C,{merge:!0}),await Y.commit(),{attemptId:y.id,score:O,outOf:q,summary:C,tagsUpdated:ie}}function yk(r){const e=[];return Array.isArray(r.exercises)&&e.push(...r.exercises),Array.isArray(r.readings)&&r.readings.forEach(t=>{Array.isArray(t.questions)&&t.questions.forEach(s=>{e.push({...s,readingContext:{readingId:t.id,title:t.title,text:t.text}})})}),e}function _k(r){return 100+(Math.max(1,Math.floor(r))-1)*50}function Vc(r){let e=Math.max(0,Math.floor(r)),t=1;for(;;){const s=_k(t);if(e<s)return{level:t,xpIntoLevel:e,xpForNext:s};e-=s,t+=1}}function vk(r){return Math.max(0,r.answeredCount)*2+10}function wk(r){return r>=70?"mastered":r>=30?"progressing":"discovering"}function Ek(r){const e={...r.masteryByTag||{}},t=r.isCorrect?8:2;return r.questionTags.forEach(s=>{const o=e[s]?.score||0,l=Math.max(0,Math.min(100,o+t));e[s]={score:l,state:wk(l),updatedAt:r.timestamp}}),e}async function Tk(r){const e=Fe(ve,"users",r,"meta","rewards"),t=await qn(e);if(t.exists()){const o=t.data();return{xp:o.xp||0,level:o.level||1,badges:Array.isArray(o.badges)?o.badges:[],masteryByTag:typeof o.masteryByTag=="object"&&o.masteryByTag?o.masteryByTag:{},updatedAt:o.updatedAt}}const s={xp:0,level:1,badges:[],masteryByTag:{},updatedAt:wt()};return await Qs(e,s),s}async function Ik(r,e,t){if(t<=0)return await Tk(r);const s=Fe(ve,"users",r,"meta","rewards"),o=e?Fe(ve,"users",r,"rewardEvents",e):null;let l=null;return await Pl(ve,async h=>{const[f,g]=await Promise.all([o?h.get(o):Promise.resolve(null),h.get(s)]);if(o&&f&&f.exists()){l=g.exists()?g.data():{xp:0,level:1};return}const y=g.exists()?g.data():null,v={xp:y?.xp||0,level:y?.level||1,badges:Array.isArray(y?.badges)?y.badges:[],masteryByTag:typeof y?.masteryByTag=="object"&&y?.masteryByTag?y.masteryByTag:{},updatedAt:y?.updatedAt},E=Math.max(0,(v.xp||0)+t),S=Vc(E),O={xp:E,level:S.level,badges:v.badges||[],masteryByTag:v.masteryByTag||{},updatedAt:wt()};h.set(s,O,{merge:!0}),o&&h.set(o,{sessionId:e,deltaXp:t,awardedAt:wt()}),l=O}),l||{xp:0,level:1}}async function Sk(r){const{uid:e,sessionId:t,items:s}=r,o=Fe(ve,"users",e,"meta","rewards");await Pl(ve,async l=>{const h=await l.get(o),f=h.exists()?h.data():null,g={xp:f?.xp||0,level:f?.level||1,badges:Array.isArray(f?.badges)?f.badges:[],masteryByTag:typeof f?.masteryByTag=="object"&&f?.masteryByTag?f.masteryByTag:{},updatedAt:f?.updatedAt},y=wt(),v=s.map(O=>({item:O,evRef:Fe(ve,"users",e,"rewardEvents",`${t}_${O.exerciseId}`)})),E=await Promise.all(v.map(O=>l.get(O.evRef)));let S=g.masteryByTag||{};v.forEach((O,q)=>{if(E[q].exists())return;const L=Array.isArray(O.item.tags)?O.item.tags:[];S=Ek({masteryByTag:S,questionTags:L,isCorrect:O.item.correct,timestamp:y})}),v.forEach((O,q)=>{if(E[q].exists())return;const L=Array.isArray(O.item.tags)?O.item.tags:[];l.set(O.evRef,{sessionId:t,exerciseId:O.item.exerciseId,correct:O.item.correct,tags:L,createdAt:y})}),l.set(o,{...g,masteryByTag:S,updatedAt:wt()},{merge:!0})})}async function Ak(r){const{uid:e,rewards:t}=r,s=[],o=Array.isArray(t.badges)?t.badges:[],l=await qn(Fe(ve,"users",e,"stats","main")),h=await qn(Fe(ve,"users",e,"progressSummary","main")),f=l.exists()?l.data():{},g=h.exists()?h.data():{},y=f.streakDays||0,v=g.totalAttempts||0,E=t.masteryByTag||{},S=Object.entries(E).filter(([,Y])=>Y?.state==="mastered").map(([Y])=>Y),q=(await Qt(yr(Tt(ve,"users",e,"rewardEvents"),_r("correct","==",!1),hE(5)))).size,$=Y=>o.includes(Y)||s.includes(Y);!$("streak_3")&&y>=3&&s.push("streak_3"),!$("streak_7")&&y>=7&&s.push("streak_7"),!$("sessions_10")&&v>=10&&s.push("sessions_10"),!$("retry_5")&&q>=5&&s.push("retry_5");const L=S.length;if(!$("tag_master_3")&&L>=3&&s.push("tag_master_3"),!$("tag_master_10")&&L>=10&&s.push("tag_master_10"),!$("fractions_first_mastery")&&S.some(Y=>Y.startsWith("math_fractions"))&&s.push("fractions_first_mastery"),!$("grammar_first_mastery")&&S.some(Y=>Y.startsWith("fr_grammaire"))&&s.push("grammar_first_mastery"),!s.length)return[];const ne=Fe(ve,"users",e,"meta","rewards");return await Pl(ve,async Y=>{const te=await Y.get(ne),H=te.exists()?te.data():{},ie=Array.isArray(H.badges)?H.badges:[],le=s.filter(A=>!ie.includes(A));le.length&&(Y.set(ne,{badges:[...ie,...le],updatedAt:wt()},{merge:!0}),le.forEach(A=>{Y.set(Fe(ve,"users",e,"rewardEvents",`badge_${A}`),{type:"badge",badgeId:A,createdAt:wt()})}))}),s}function Rk({rewards:r}){const{xp:e,level:t}=r||{xp:0,level:1},s=Vc(e||0),o=Math.min(100,Math.max(0,Math.round(s.xpIntoLevel/s.xpForNext*100)));return T.jsxs("div",{className:"card",style:{display:"flex",flexDirection:"column",gap:6},children:[T.jsxs("div",{className:"row",style:{justifyContent:"space-between",alignItems:"center"},children:[T.jsxs("div",{style:{fontWeight:800,fontSize:"1.05rem"},children:["Niveau ",s.level]}),T.jsxs("div",{className:"small",children:["XP total : ",e||0]})]}),T.jsxs("div",{className:"small",children:["Prochain niveau : ",s.xpIntoLevel,"/",s.xpForNext," XP"]}),T.jsx("div",{style:{height:12,background:"rgba(255,255,255,0.08)",borderRadius:999,overflow:"hidden"},children:T.jsx("div",{style:{height:"100%",width:`${o}%`,background:"linear-gradient(90deg,#7aa2ff,#2ecc71)",transition:"width 0.6s ease"}})})]})}function Ck(r){const{accuracy:e,weakestTag:t,improvedTag:s}=r,o=t||s||"ce tag";return e<50?`On avance : demain, on reprend ${o} avec 5 minutes de rvision.`:e<80?`Bien jou : encore un effort sur ${o} et a passe.`:`Super : tu matrises bien ${s||o}, on peut monter dun cran.`}function V_(r,e){return r.type==="mcq"?e===r.answerIndex:r.type==="short_text"||r.type==="fill_blank"?r.expected.includes(zo(e||"")):!1}function Yu(r){const e=[],t=/_([^_]+)_/g;let s=0,o,l=0;for(;(o=t.exec(r))!==null;)o.index>s&&e.push(r.slice(s,o.index)),e.push(T.jsx("span",{style:{textDecoration:"underline"},children:o[1]},`u-${l++}`)),s=t.lastIndex;return s<r.length&&e.push(r.slice(s)),e}function Pk(){const{themeId:r}=gT(),e=bc(),{user:t}=Kr(),{rewards:s}=xp(t?.uid||null),[o,l]=we.useState(null),[h,f]=we.useState([]),[g,y]=we.useState({}),[v]=we.useState(()=>Date.now()),[E,S]=we.useState(null),[O,q]=we.useState([]),[$,L]=we.useState([]),[ne,Y]=we.useState(!1),[te,H]=we.useState(null),[ie,le]=we.useState(!1),[A,R]=we.useState("");we.useEffect(()=>{(async()=>{if(!r)return;const N=await qn(Fe(ve,"themes",r)),k=N.exists()?{id:r,...N.data()}:null;l(k);const D=await vE(r,{uid:t?.uid});let se=Array.isArray(k?.readings)?k.readings:[];try{const Ie=await KP(r);Ie.length&&(se=Ie)}catch{}const Le=[...yk({exercises:D,readings:se})].sort(()=>Math.random()-.5);f(Le.slice(0,10)),y({}),S(null),L([]),Y(!1)})()},[r,t]);const P=async()=>{if(!t||!r||!o)return;const N=Math.max(1,Math.round((Date.now()-v)/1e3)),k=h.map(oe=>({exerciseId:oe.id,difficulty:oe.difficulty,tags:oe.tags||[],correct:V_(oe,g[oe.id])})),D=await gk({uid:t.uid,subjectId:o.subjectId,themeId:r,answers:g,exercises:h,durationSec:N}),C=await sk({uid:t.uid,subjectId:o.subjectId,items:k,existingAttemptId:D.attemptId}),se=h.reduce((oe,De)=>{const Oe=g[De.id];return Oe==null||typeof Oe=="string"&&Oe.trim()===""?oe:oe+1},0),me=vk({answeredCount:se}),Le=s;let Ie=null,Z=!1;try{const oe=await Ik(t.uid,D.attemptId||null,me);Ie=oe,Z=(oe?.level||1)>(s?.level||1),await Sk({uid:t.uid,sessionId:D.attemptId||r,items:k}),await Ak({uid:t.uid,rewards:oe||s})}catch(oe){console.error("awardSessionRewards failed",oe)}H({deltaXp:me,levelUp:Z,newRewards:Ie,prevRewards:Le});const ye=new Set(h.flatMap(oe=>oe.tags||[])),ue=Object.values(D.tagsUpdated||{}).filter(oe=>oe&&ye.has(oe.tagId||"")).sort((oe,De)=>(oe.mastery??0)-(De.mastery??0)).slice(0,3).map(oe=>oe.tagId);q(ue),S({score:C.score,outOf:C.outOf,durationSec:N,...C});const b=k.filter(oe=>!oe.correct).flatMap(oe=>oe.tags||[]),G=new Map;k.forEach(oe=>{const De=oe.correct?8:2;(oe.tags||[]).forEach(Oe=>{G.set(Oe,(G.get(Oe)||0)+De)})});let Re;G.size&&(Re=Array.from(G.entries()).sort((oe,De)=>De[1]-oe[1])[0]?.[0]);const xe=C.outOf?C.score/C.outOf*100:0,Me=Ck({accuracy:xe,weakestTag:b[0]||O[0],improvedTag:Re}),be=h.map((oe,De)=>{const Oe=g[oe.id],mt=V_(oe,Oe);let Vt="",Wn="";if(oe.type==="mcq"){const wn=oe;Vt=wn.choices[wn.answerIndex]||"",Wn=typeof Oe=="number"&&wn.choices[Oe]||""}else(oe.type==="short_text"||oe.type==="fill_blank")&&(Vt=oe.expected[0]||"",Wn=Oe||"");return{id:oe.id,prompt:oe.prompt,correct:mt,expected:Vt||"",userAnswer:(Wn??"").toString()||"",idx:De+1}});R(Me),L(be),Y(!0),le(!0)};if(!r)return T.jsx("div",{className:"container",children:T.jsx("div",{className:"card",children:"Thme introuvable."})});if(ne&&$.length){const N=te?.prevRewards?.xp??s?.xp??0,k=te?.newRewards?.xp??N,D=N,C=k;te?.deltaXp;const se=E?(()=>{const me=E.outOf?E.score/E.outOf*100:0;return me>=80?"Super ! Continue comme a.":me>=50?"Bien jou ! On consolide et a va monter.":"Bien essay. On progresse en sentranant."})():"";return T.jsxs("div",{className:"container grid",style:{position:"relative"},children:[ie&&T.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999},children:T.jsxs("div",{className:"card",style:{maxWidth:420},children:[T.jsxs("h3",{style:{marginTop:0},children:["Bravo ",t?.displayName?.split(" ")[0]||"!"]}),T.jsxs("div",{className:"small",children:["Score ",E?.score,"/",E?.outOf]}),T.jsxs("div",{className:"small",style:{marginTop:6},children:["+",te?.deltaXp??0," XP"]}),te?.levelUp&&T.jsxs("div",{className:"small",style:{marginTop:6},children:[" Niveau ",te?.newRewards?.level]}),se&&T.jsx("div",{className:"small",style:{marginTop:8},children:se}),T.jsx("button",{className:"btn",style:{marginTop:12},onClick:()=>le(!1),children:"Voir la correction"})]})}),T.jsxs("div",{className:"card",children:[T.jsxs("h2",{style:{margin:0},children:["Corrections  ",o?.title]}),E&&T.jsxs("div",{className:"small",children:["Score ",T.jsxs("strong",{children:[E.score,"/",E.outOf]}),"  ",E.durationSec,"s  +",E.xpGain," XP  +",E.coinsGain," pices"]}),te&&T.jsxs("div",{className:"small",style:{marginTop:8},children:["+",te.deltaXp," XP ",te.levelUp?`  Niveau ${te.newRewards?.level}`:""]}),se&&T.jsx("div",{className:"small",style:{marginTop:8},children:se})]}),T.jsxs("div",{className:"card",children:[T.jsx("div",{className:"grid",children:$.map(me=>T.jsxs("div",{className:"pill",style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:6,background:me.correct?"rgba(46, 204, 113, 0.12)":"rgba(255, 90, 111, 0.12)",border:me.correct?"1px solid rgba(46, 204, 113, 0.4)":"1px solid rgba(255, 90, 111, 0.4)"},children:[T.jsxs("div",{className:"small",children:["Question ",me.idx,"  ",me.correct?T.jsx("span",{className:"badge",style:{borderColor:"rgba(46,204,113,.6)",color:"#7fffb2"},children:" Bonne rponse"}):T.jsx("span",{className:"badge",style:{borderColor:"rgba(255,90,111,.6)",color:"#ff9fb0"},children:" Mauvaise rponse"})]}),T.jsx("div",{style:{fontWeight:700},children:me.prompt}),T.jsxs("div",{className:"small",children:["Ta rponse : ",T.jsx("strong",{children:me.userAnswer})]}),!me.correct&&T.jsxs("div",{className:"small",children:["Correction : ",T.jsx("strong",{children:me.expected})]})]},me.id))}),T.jsxs("div",{className:"row",style:{marginTop:16},children:[T.jsx("button",{className:"btn",onClick:()=>e("/"),children:"Retour  laccueil"}),T.jsx("button",{className:"btn secondary",onClick:()=>{Y(!1),L([]),S(null),y({})},children:"Refaire une session"})]})]}),te&&T.jsxs("div",{className:"card",children:[T.jsx("h3",{style:{marginTop:0},children:"Progression XP"}),T.jsxs("div",{className:"small",children:["XP : ",D,"  ",C]}),(()=>{const me=Vc(D),Le=Vc(C),Ie=Math.min(100,Math.max(0,Math.round(Le.xpIntoLevel/Le.xpForNext*100)));return T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:"small",children:["Niveau : ",me.level,"  ",Le.level]}),T.jsx("div",{style:{height:12,background:"rgba(255,255,255,0.08)",borderRadius:999,overflow:"hidden",marginTop:8},children:T.jsx("div",{style:{height:"100%",width:`${Ie}%`,background:"linear-gradient(90deg,#7aa2ff,#2ecc71)",transition:"width 0.6s ease"}})})]})})()]})]})}return T.jsxs("div",{className:"container grid",children:[T.jsxs("div",{className:"card",children:[T.jsx("h2",{style:{margin:0},children:o?.title||"Session"}),T.jsx("div",{className:"small",children:"Fais de ton mieux. Objectif : rgularit "})]}),T.jsx(Rk,{rewards:s}),h.map((N,k)=>{const D=N.readingContext,C=D&&(k===0||h[k-1].readingContext?.readingId!==D.readingId);return T.jsxs("div",{className:"card",children:[C&&D&&T.jsxs("div",{style:{marginBottom:10},children:[T.jsxs("div",{className:"small",style:{marginBottom:4},children:["Lecture : ",D.title]}),T.jsx("div",{className:"small",style:{whiteSpace:"pre-wrap"},children:Yu(D.text)}),T.jsx("hr",{})]}),T.jsxs("div",{className:"small",children:["Question ",k+1," / ",h.length," ",T.jsxs("span",{className:"badge",children:["Difficult ",N.difficulty]})]}),T.jsx("div",{style:{fontWeight:800,marginTop:6},children:Yu(N.prompt)}),N.type==="mcq"&&T.jsx("div",{className:"grid",style:{marginTop:10},children:N.choices.map((se,me)=>T.jsx("button",{type:"button",className:"btn "+(g[N.id]===me?"":"secondary"),onClick:()=>y(Le=>({...Le,[N.id]:me})),style:{textAlign:"left",opacity:g[N.id]===me?1:.85},"aria-pressed":g[N.id]===me,children:Yu(se)},me))}),N.type==="short_text"&&T.jsx("div",{style:{marginTop:10},children:T.jsx("input",{className:"input",placeholder:"Ta rponse",value:g[N.id]??"",onChange:se=>y(me=>({...me,[N.id]:se.target.value}))})}),N.type==="fill_blank"&&T.jsxs("div",{style:{marginTop:10},children:[T.jsx("div",{className:"small",children:Yu(N.text)}),T.jsx("input",{className:"input",placeholder:"Le mot manquant",value:g[N.id]??"",onChange:se=>y(me=>({...me,[N.id]:se.target.value}))})]})]},N.id)}),T.jsxs("div",{className:"card",children:[T.jsxs("div",{className:"row",children:[T.jsx("button",{className:"btn",onClick:P,children:"Corriger et enregistrer"}),E&&T.jsxs("div",{className:"small",children:["Score ",T.jsxs("strong",{children:[E.score,"/",E.outOf]}),"  ",E.durationSec,"s  +",T.jsx("strong",{children:E.xpGain})," XP  +",T.jsx("strong",{children:E.coinsGain})," pices  Srie ",T.jsx("strong",{children:E.streakDays})]})]}),E?.badges?.length?T.jsx("div",{className:"row",style:{marginTop:10},children:E.badges.map(N=>T.jsx("span",{className:"badge",children:N},N))}):null,O.length?T.jsxs("div",{className:"small",style:{marginTop:10},children:["Tags  renforcer (thme) : ",O.map(N=>T.jsx("span",{className:"badge",children:N},N))]}):null]}),$.length?T.jsxs("div",{className:"card",children:[T.jsx("h3",{style:{marginTop:0},children:"Corrections"}),T.jsx("div",{className:"grid",children:$.map(N=>T.jsxs("div",{className:"pill",style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:6},children:[T.jsxs("div",{className:"small",children:["Question ",N.idx,"  ",N.correct?T.jsx("span",{className:"badge",children:" Bonne rponse"}):T.jsx("span",{className:"badge",children:" Mauvaise rponse"})]}),T.jsx("div",{style:{fontWeight:700},children:N.prompt}),T.jsxs("div",{className:"small",children:["Ta rponse : ",T.jsx("strong",{children:N.userAnswer})]}),!N.correct&&T.jsxs("div",{className:"small",children:["Correction : ",T.jsx("strong",{children:N.expected})]})]},N.id))})]}):null]})}function kk(){const[r,e]=we.useState(""),t=async s=>{if(!s)return;e("Lecture du fichier");const o=await s.text();let l;try{l=JSON.parse(o)}catch{e(" JSON invalide");return}if(!l?.subjects?.length){e(" Format inattendu (subjects manquant)");return}e("Import en cours"),await QP(l),e(" Import termin")};return T.jsx("div",{className:"container",children:T.jsxs("div",{className:"card",children:[T.jsx("h2",{style:{marginTop:0},children:"Import dexercices (Parent)"}),T.jsx("p",{className:"small",children:"Importe un pack JSON (gnr par moi) : matires  thmes  exercices."}),T.jsx("input",{className:"input",type:"file",accept:".json,application/json",onChange:s=>t(s.target.files?.[0]||null)}),r&&T.jsx("p",{className:"small",style:{marginTop:10},children:r}),T.jsx("hr",{}),T.jsx("p",{className:"small",children:"Conseil : commence par importer les packs Franais (grammaire + conjugaison) et Maths (fractions)."})]})})}const xk=[{id:"all",label:"Toutes"},{id:"fr",label:"Franais"},{id:"math",label:"Maths"},{id:"en",label:"Anglais"},{id:"es",label:"Espagnol"},{id:"hist",label:"Histoire"}];function Nk(r){if(!r)return null;const e=r.split("_")[0];return e==="fr"||e==="math"||e==="en"||e==="es"||e==="hist"?e:null}function O_(r){return r.last7?r.last7:Array.isArray(r.last7Results)?{correct:r.last7Results.filter(Boolean).length,wrong:r.last7Results.filter(e=>!e).length}:{correct:0,wrong:0}}function Dk(){const{user:r,role:e}=Kr(),[t,s]=we.useState([]),[o,l]=we.useState(""),[h,f]=we.useState([]),[g,y]=we.useState(!1),[v,E]=we.useState("fr"),[S,O]=we.useState(null),[q,$]=we.useState(""),[L,ne]=we.useState({});we.useEffect(()=>{r&&(e==="parent"?(async()=>{const R=(await Qt(yr(Tt(ve,"users"),_r("role","==","child")))).docs.map(P=>({id:P.id,displayName:P.data().displayName||"Enfant"}));s(R),R[0]&&l(R[0].id)})():l(r.uid))},[r,e]);const Y=we.useCallback(async A=>{y(!0);const P=(await Qt(Tt(ve,"users",A,"tagProgress"))).docs.map(D=>({id:D.id,tagId:D.id,...D.data()}));f(P);const k=(await Qt(Tt(ve,"users",A,"progressSummary"))).docs.find(D=>D.id==="main");O(k?.data()||null),y(!1)},[]);we.useEffect(()=>{o&&Y(o)},[o,Y]);const te=async A=>{if(!o||(q!==A&&$(A),L[A]?.items?.length||L[A]?.loading))return;ne(D=>({...D,[A]:{loading:!0,items:[]}}));let R;try{R=await Qt(yr(Tt(ve,"users",o,"attemptItems"),_r("tags","array-contains",A),hE(100)))}catch{R=await Qt(yr(Tt(ve,"users",o,"attemptItems"),_r("tags","array-contains",A)))}const P=R.docs.map(D=>({id:D.id,...D.data()})),N={};await Promise.all(Array.from(new Set(P.map(D=>D.exerciseId))).map(async D=>{const C=await qn(Fe(ve,"exercises",D));C.exists()?N[D]=C.data():N[D]={prompt:D}}));const k=P.map(D=>({...D,prompt:D.prompt||N[D.exerciseId]?.prompt||D.exerciseId,choices:D.choices||N[D.exerciseId]?.choices||null,readingContext:D.readingContext})).sort((D,C)=>{const se=D.createdAt?.toMillis?D.createdAt.toMillis():0;return(C.createdAt?.toMillis?C.createdAt.toMillis():0)-se});ne(D=>({...D,[A]:{loading:!1,items:k}}))},H=A=>{if(q===A){$("");return}te(A)},ie=h.filter(A=>v==="all"?!0:Nk(A.tagId)===v).sort((A,R)=>(A.mastery||0)-(R.mastery||0)).slice(0,20),le=()=>{const A=[["tagId","mastery","bucket","attempts","correct","wrong","last7_correct","last7_wrong","nextDueDate"]];h.forEach(D=>{const C=O_(D);A.push([D.tagId||D.id,String(D.mastery??0),D.bucket||"",String(D.attempts??0),String(D.correctAnswers??0),String(D.wrongAnswers??0),String(C.correct),String(C.wrong),D.nextDueDate||""])});const R=A.map(D=>D.map(C=>`"${(C??"").toString().replace(/"/g,'""')}"`).join(",")).join(`
`),P=new Blob([R],{type:"text/csv;charset=utf-8;"}),N=URL.createObjectURL(P),k=document.createElement("a");k.href=N,k.download=`progress-${o||"user"}.csv`,k.click(),URL.revokeObjectURL(N)};return T.jsxs("div",{className:"container",children:[T.jsxs("div",{className:"card",children:[T.jsx("h2",{style:{marginTop:0},children:"Progression par tag"}),T.jsxs("div",{className:"row",style:{gap:8,alignItems:"center"},children:[e==="parent"&&T.jsxs(T.Fragment,{children:[T.jsx("label",{className:"small",children:"Enfant"}),T.jsx("select",{className:"input",value:o,onChange:A=>l(A.target.value),children:t.map(A=>T.jsx("option",{value:A.id,children:A.displayName},A.id))})]}),T.jsx("label",{className:"small",children:"Matire"}),T.jsx("select",{className:"input",value:v,onChange:A=>E(A.target.value),children:xk.map(A=>T.jsx("option",{value:A.id,children:A.label},A.id))}),T.jsx("button",{className:"btn secondary",onClick:le,disabled:!h.length,children:"Tlcharger CSV"})]}),S&&T.jsxs("div",{className:"kpi",style:{marginTop:10},children:[T.jsxs("div",{className:"pill",children:["Rponses: ",T.jsx("strong",{children:S.totalAnswers||0})]}),T.jsxs("div",{className:"pill",children:["Taux: ",T.jsxs("strong",{children:[S.totalAnswers?Math.round((S.correctAnswers||0)/S.totalAnswers*100):0,"%"]})]}),T.jsxs("div",{className:"pill",children:["Tentatives: ",T.jsx("strong",{children:S.totalAttempts||0})]})]})]}),g?T.jsx("div",{className:"card",children:"Chargement"}):T.jsxs("div",{className:"card",children:[T.jsx("h3",{style:{marginTop:0},children:"Top 20 faibles"}),ie.length===0?T.jsx("div",{className:"small",children:"Aucun tag pour le moment."}):T.jsx("div",{className:"grid",children:ie.map(A=>{const R=O_(A),P=q===(A.tagId||A.id),N=L[A.tagId||A.id]||{loading:!1,items:[]};return T.jsxs("div",{className:"card",style:{padding:12},children:[T.jsxs("div",{className:"row",style:{justifyContent:"space-between",alignItems:"center"},children:[T.jsxs("div",{onClick:()=>H(A.tagId||A.id),style:{cursor:"pointer",flex:1},children:[T.jsx("div",{style:{fontWeight:700},children:A.tagId}),T.jsxs("div",{className:"small",children:[A.mastery??0,"/100  ",A.bucket,"  ",R.correct,"/",R.correct+R.wrong," sur 7  Prochaine: ",A.nextDueDate||""]}),T.jsx("div",{style:{height:8,background:"rgba(255,255,255,0.08)",borderRadius:999,marginTop:6,width:"100%"},children:T.jsx("div",{style:{height:8,borderRadius:999,width:`${Math.min(100,Math.max(0,A.mastery||0))}%`,background:"linear-gradient(90deg,#ff5a6f,#7aa2ff)"}})}),T.jsx("div",{className:"row",style:{marginTop:6,gap:4},children:(A.last7Results||[]).map((k,D)=>T.jsx("span",{style:{width:10,height:10,borderRadius:"50%",background:k?"#2ecc71":"#ff5a6f",opacity:.9}},D))})]}),T.jsx("button",{className:"btn secondary",style:{width:36,height:36},onClick:()=>H(A.tagId||A.id),children:P?"":"+"})]}),P&&T.jsx("div",{className:"card",style:{marginTop:10,background:"rgba(255,255,255,0.03)"},children:N.loading?T.jsx("div",{className:"small",children:"Chargement"}):N.items.length===0?T.jsx("div",{className:"small",children:"Aucune question trouve pour ce tag."}):T.jsx("div",{className:"grid",children:N.items.map(k=>T.jsxs("div",{className:"pill",style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:6},children:[T.jsxs("div",{className:"small",children:[k.createdAt?.toDate?k.createdAt.toDate().toLocaleString():"","  Diff ",k.difficulty,"  ",k.correct?"":""]}),T.jsx("div",{style:{fontWeight:700},children:k.prompt}),k.readingContext&&T.jsxs("div",{className:"small",style:{whiteSpace:"pre-wrap"},children:[T.jsxs("div",{style:{fontWeight:600,marginBottom:4},children:["Lecture : ",k.readingContext.title]}),k.readingContext.text]}),Array.isArray(k.choices)&&typeof k.answer=="number"?T.jsxs("div",{className:"small",children:["Rponse : ",T.jsx("strong",{children:k.choices[k.answer]||k.answer})]}):T.jsxs("div",{className:"small",children:["Rponse : ",T.jsx("strong",{children:k.answer??""})]})]},k.id))})})]},A.id)})})]})]})}const M_=[{id:"all",label:"Toutes"},{id:"fr",label:"Franais"},{id:"math",label:"Maths"},{id:"en",label:"Anglais"},{id:"es",label:"Espagnol"},{id:"hist",label:"Histoire"}];function Vk(){const[r,e]=we.useState([]),[t,s]=we.useState(""),[o,l]=we.useState("all"),[h,f]=we.useState([]),[g,y]=we.useState(!1),[v,E]=we.useState({}),[S,O]=we.useState(null);we.useEffect(()=>{(async()=>{const ie=(await Qt(yr(Tt(ve,"users"),_r("role","==","child")))).docs.map(le=>({id:le.id,displayName:le.data().displayName||"Enfant"}));e(ie),ie[0]&&s(ie[0].id)})()},[]),we.useEffect(()=>{t&&(y(!0),(async()=>{const H=M_.filter(R=>R.id!=="all").map(R=>R.id),ie=o==="all"?H:[o],le=[];for(const R of ie){const P=await _E(R,{uid:t,includeHidden:!0,includeOverrides:!0});le.push(...P)}const A=le.sort((R,P)=>(R.title||"").localeCompare(P.title||""));f(A),y(!1)})())},[t,o]);const q=async(H,ie)=>{t&&(await YP(t,H,ie),f(le=>le.map(A=>A.id===H?{...A,visibleOverride:ie}:A)))},$=async(H,ie)=>{await XP(H,ie),f(le=>le.map(A=>A.id===H?{...A,hidden:ie}:A))},L=async H=>{if(!window.confirm("Supprimer ce thme et toutes ses questions ?"))return;const ie=await ek(H);f(le=>le.filter(A=>A.id!==H)),E(le=>{const A={...le};return delete A[H],A}),ie.hidden&&f(le=>le.map(A=>A.id===H?{...A,hidden:!0}:A))},ne=async H=>{O(H);const ie=await vE(H,{uid:t,includeHidden:!0,includeOverrides:!0});E(le=>({...le,[H]:ie})),O(null)},Y=async(H,ie)=>{await JP(H,ie),E(le=>{const A={};return Object.keys(le).forEach(R=>{A[R]=le[R].map(P=>P.id===H?{...P,hidden:ie}:P)}),{...le,...A}})},te=async(H,ie,le)=>{t&&(await ZP(t,H,ie),E(A=>({...A,[le]:(A[le]||[]).map(R=>R.id===H?{...R,visibleOverride:ie}:R)})))};return T.jsxs("div",{className:"container",children:[T.jsxs("div",{className:"card",children:[T.jsx("h2",{style:{marginTop:0},children:"Modration contenus"}),T.jsxs("div",{className:"row",style:{gap:10},children:[T.jsxs("div",{className:"row",style:{gap:6},children:[T.jsx("span",{className:"small",children:"Enfant"}),T.jsx("select",{className:"input",value:t,onChange:H=>s(H.target.value),children:r.map(H=>T.jsx("option",{value:H.id,children:H.displayName},H.id))})]}),T.jsxs("div",{className:"row",style:{gap:6},children:[T.jsx("span",{className:"small",children:"Matire"}),T.jsx("select",{className:"input",value:o,onChange:H=>l(H.target.value),children:M_.map(H=>T.jsx("option",{value:H.id,children:H.label},H.id))})]})]})]}),g?T.jsx("div",{className:"card",children:"Chargement"}):T.jsxs("div",{className:"grid",children:[h.map(H=>{const ie=H.visibleOverride,le=ie!==void 0?ie:!H.hidden;return T.jsxs("div",{className:"card",children:[T.jsxs("div",{className:"row",style:{justifyContent:"space-between"},children:[T.jsxs("div",{children:[T.jsx("div",{style:{fontWeight:800},children:H.title}),T.jsx("div",{className:"small",children:H.subjectId}),H.hidden&&T.jsx("div",{className:"badge",children:"Masqu globalement"}),ie===!1&&T.jsx("div",{className:"badge",children:"Masqu pour lenfant"})]}),T.jsxs("div",{className:"row",children:[T.jsx("button",{className:"btn secondary",onClick:()=>q(H.id,!le),children:le?"Masquer pour lenfant":"Afficher pour lenfant"}),T.jsx("button",{className:"btn secondary",onClick:()=>$(H.id,!H.hidden),children:H.hidden?"Ractiver globalement":"Masquer globalement"}),T.jsx("button",{className:"btn secondary",onClick:()=>L(H.id),children:"Supprimer"}),T.jsx("button",{className:"btn secondary",onClick:()=>ne(H.id),children:"Voir questions"})]})]}),(v[H.id]||[]).length>0&&T.jsxs("div",{style:{marginTop:10},children:[T.jsx("div",{className:"small",style:{marginBottom:6},children:"Questions"}),T.jsx("div",{className:"grid",children:v[H.id].map(A=>{const R=A.visibleOverride,P=R!==void 0?R:!A.hidden;return T.jsxs("div",{className:"pill",style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:6},children:[T.jsxs("div",{className:"small",children:[A.prompt?.slice(0,80)||A.id," ",A.hidden&&T.jsx("span",{className:"badge",children:"Masqu global"})," ",R===!1&&T.jsx("span",{className:"badge",children:"Masqu enfant"})]}),T.jsxs("div",{className:"row",children:[T.jsx("button",{className:"btn secondary",onClick:()=>te(A.id,!P,H.id),children:P?"Masquer enfant":"Afficher enfant"}),T.jsx("button",{className:"btn secondary",onClick:()=>Y(A.id,!A.hidden),children:A.hidden?"Ractiver global":"Masquer global"})]})]},A.id)})})]}),S===H.id&&T.jsx("div",{className:"small",style:{marginTop:6},children:"Chargement des questions"})]},H.id)}),h.length===0&&T.jsx("div",{className:"card small",children:"Aucun thme."})]})]})}function Ok(){const{user:r}=Kr(),[e,t]=we.useState(null),[s,o]=we.useState({}),[l,h]=we.useState(""),[f,g]=we.useState(!1);we.useEffect(()=>{r&&(async()=>{const E=await kp(r.uid);t(E);const S=await EE(r.uid),O={};S.forEach(q=>{O[q.id]=q}),o(O)})()},[r]);const y=async E=>{if(r){h(""),g(!0);try{const S=await ok(r.uid,E.id);t(O=>({...O||{},coins:S.coins,xp:S.xp})),o(O=>({...O,[E.id]:{acquiredAt:new Date().toISOString()}}))}catch(S){h(S.message||"Erreur achat")}finally{g(!1)}}},v=ik();return T.jsxs("div",{className:"container",children:[T.jsxs("div",{className:"card",children:[T.jsx("h2",{style:{marginTop:0},children:"Rcompenses"}),T.jsx("div",{className:"small",children:"Utilise tes pices pour acheter et collectionner des items."}),e&&T.jsxs("div",{className:"kpi",style:{marginTop:8},children:[T.jsxs("div",{className:"pill",children:["Pices: ",T.jsx("strong",{children:e.coins||0})]}),T.jsxs("div",{className:"pill",children:["XP: ",T.jsx("strong",{children:e.xp||0})]})]}),l&&T.jsx("div",{className:"small",style:{color:"#ff5a6f",marginTop:8},children:l})]}),T.jsx("div",{className:"grid",children:v.map(E=>{const S=!!s[E.id],O=(e?.coins||0)>=E.priceCoins&&(!E.requiresXp||(e?.xp||0)>=E.requiresXp);return T.jsxs("div",{className:"card",style:{opacity:S?.7:1},children:[T.jsxs("div",{className:"row",style:{justifyContent:"space-between"},children:[T.jsxs("div",{children:[T.jsx("div",{style:{fontWeight:800},children:E.title}),T.jsx("div",{className:"small",children:E.description})]}),S&&T.jsx("span",{className:"badge",children:"Dj acquis"})]}),T.jsxs("div",{className:"row",style:{marginTop:10},children:[T.jsxs("div",{className:"pill",children:["Prix: ",E.priceCoins," pices"]}),E.requiresXp&&T.jsxs("div",{className:"pill",children:["Niv: ",E.requiresXp," XP"]})]}),!S&&T.jsx("button",{className:"btn",disabled:!O||f,onClick:()=>y(E),children:O?"Acheter":"Manque de pices/XP"})]},E.id)})})]})}const Mk=[{id:"all",label:"Toutes"},{id:"fr",label:"Franais"},{id:"math",label:"Maths"},{id:"en",label:"Anglais"},{id:"es",label:"Espagnol"},{id:"hist",label:"Histoire"}];function bk(r){if(!r)return null;const e=r.split("_")[0];return e==="fr"||e==="math"||e==="en"||e==="es"||e==="hist"?e:null}function Lk(){const{user:r}=Kr(),{rewards:e}=xp(r?.uid||null),[t,s]=we.useState("all"),o=e.masteryByTag||{},l=Object.entries(o).filter(([h])=>t==="all"?!0:bk(h)===t).sort((h,f)=>{const g=E=>E==="mastered"?0:E==="progressing"?1:2,y=g(h[1].state),v=g(f[1].state);return y!==v?y-v:(f[1].score||0)-(h[1].score||0)});return T.jsxs("div",{className:"container",children:[T.jsxs("div",{className:"card",children:[T.jsx("h2",{style:{marginTop:0},children:"Progression"}),T.jsxs("div",{className:"row",style:{alignItems:"center",gap:8},children:[T.jsx("span",{className:"small",children:"Matire"}),T.jsx("select",{className:"input",value:t,onChange:h=>s(h.target.value),children:Mk.map(h=>T.jsx("option",{value:h.id,children:h.label},h.id))})]})]}),T.jsx("div",{className:"grid",children:l.length===0?T.jsx("div",{className:"card small",children:"Aucune donne de matrise pour linstant."}):l.map(([h,f])=>{const g=Math.min(100,Math.max(0,Math.round(f.score||0)));return T.jsxs("div",{className:"card",style:{padding:12},children:[T.jsxs("div",{className:"row",style:{justifyContent:"space-between"},children:[T.jsxs("div",{children:[T.jsx("div",{style:{fontWeight:800},children:h}),T.jsx("div",{className:"small",children:f.state})]}),T.jsxs("div",{className:"small",children:[g,"/100"]})]}),T.jsx("div",{style:{height:10,background:"rgba(255,255,255,0.08)",borderRadius:999,marginTop:6},children:T.jsx("div",{style:{height:"100%",width:`${g}%`,background:f.state==="mastered"?"#2ecc71":f.state==="progressing"?"#7aa2ff":"#ff9f43",borderRadius:999}})})]},h)})})]})}function jk(){return T.jsx("div",{className:"container",children:T.jsx("div",{className:"card",children:"Page introuvable."})})}function Fk(){return T.jsxs(FT,{children:[T.jsx("div",{className:"container",children:T.jsx(HP,{})}),T.jsxs(DT,{children:[T.jsx(cr,{path:"/connexion",element:T.jsx(uk,{})}),T.jsx(cr,{path:"/",element:T.jsx(Ju,{children:T.jsx(lk,{})})}),T.jsx(cr,{path:"/theme/:themeId",element:T.jsx(Ju,{children:T.jsx(Pk,{})})}),T.jsx(cr,{path:"/admin/import",element:T.jsx(Gd,{children:T.jsx(kk,{})})}),T.jsx(cr,{path:"/admin/progression",element:T.jsx(Gd,{children:T.jsx(Dk,{})})}),T.jsx(cr,{path:"/admin/moderation",element:T.jsx(Gd,{children:T.jsx(Vk,{})})}),T.jsx(cr,{path:"/recompenses",element:T.jsx(Ju,{children:T.jsx(Ok,{})})}),T.jsx(cr,{path:"/progression",element:T.jsx(Ju,{children:T.jsx(Lk,{})})}),T.jsx(cr,{path:"*",element:T.jsx(jk,{})})]})]})}function Uk(){"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("${import.meta.env.BASE_URL}sw.js").catch(()=>{})})}F0.createRoot(document.getElementById("root")).render(T.jsx(we.StrictMode,{children:T.jsx(WP,{children:T.jsx(Fk,{})})}));Uk();
