function hT(r,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in r)){const l=Object.getOwnPropertyDescriptor(s,o);l&&Object.defineProperty(r,o,l.get?l:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function y_(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var yd={exports:{}},Ua={},_d={exports:{}},xe={};var Eg;function dT(){if(Eg)return xe;Eg=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),T=Symbol.iterator;function R(L){return L===null||typeof L!="object"?null:(L=T&&L[T]||L["@@iterator"],typeof L=="function"?L:null)}var F={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},W=Object.assign,q={};function D(L,G,Ie){this.props=L,this.context=G,this.refs=q,this.updater=Ie||F}D.prototype.isReactComponent={},D.prototype.setState=function(L,G){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,G,"setState")},D.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function ne(){}ne.prototype=D.prototype;function ee(L,G,Ie){this.props=L,this.context=G,this.refs=q,this.updater=Ie||F}var te=ee.prototype=new ne;te.constructor=ee,W(te,D.prototype),te.isPureReactComponent=!0;var he=Array.isArray,Te=Object.prototype.hasOwnProperty,Pe={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function I(L,G,Ie){var Re,ke={},Ne=null,je=null;if(G!=null)for(Re in G.ref!==void 0&&(je=G.ref),G.key!==void 0&&(Ne=""+G.key),G)Te.call(G,Re)&&!P.hasOwnProperty(Re)&&(ke[Re]=G[Re]);var Le=arguments.length-2;if(Le===1)ke.children=Ie;else if(1<Le){for(var We=Array(Le),St=0;St<Le;St++)We[St]=arguments[St+2];ke.children=We}if(L&&L.defaultProps)for(Re in Le=L.defaultProps,Le)ke[Re]===void 0&&(ke[Re]=Le[Re]);return{$$typeof:r,type:L,key:Ne,ref:je,props:ke,_owner:Pe.current}}function C(L,G){return{$$typeof:r,type:L.type,key:G,ref:L.ref,props:L.props,_owner:L._owner}}function x(L){return typeof L=="object"&&L!==null&&L.$$typeof===r}function k(L){var G={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(Ie){return G[Ie]})}var O=/\/+/g;function A(L,G){return typeof L=="object"&&L!==null&&L.key!=null?k(""+L.key):G.toString(36)}function pe(L,G,Ie,Re,ke){var Ne=typeof L;(Ne==="undefined"||Ne==="boolean")&&(L=null);var je=!1;if(L===null)je=!0;else switch(Ne){case"string":case"number":je=!0;break;case"object":switch(L.$$typeof){case r:case e:je=!0}}if(je)return je=L,ke=ke(je),L=Re===""?"."+A(je,0):Re,he(ke)?(Ie="",L!=null&&(Ie=L.replace(O,"$&/")+"/"),pe(ke,G,Ie,"",function(St){return St})):ke!=null&&(x(ke)&&(ke=C(ke,Ie+(!ke.key||je&&je.key===ke.key?"":(""+ke.key).replace(O,"$&/")+"/")+L)),G.push(ke)),1;if(je=0,Re=Re===""?".":Re+":",he(L))for(var Le=0;Le<L.length;Le++){Ne=L[Le];var We=Re+A(Ne,Le);je+=pe(Ne,G,Ie,We,ke)}else if(We=R(L),typeof We=="function")for(L=We.call(L),Le=0;!(Ne=L.next()).done;)Ne=Ne.value,We=Re+A(Ne,Le++),je+=pe(Ne,G,Ie,We,ke);else if(Ne==="object")throw G=String(L),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return je}function Ue(L,G,Ie){if(L==null)return L;var Re=[],ke=0;return pe(L,Re,"","",function(Ne){return G.call(Ie,Ne,ke++)}),Re}function qe(L){if(L._status===-1){var G=L._result;G=G(),G.then(function(Ie){(L._status===0||L._status===-1)&&(L._status=1,L._result=Ie)},function(Ie){(L._status===0||L._status===-1)&&(L._status=2,L._result=Ie)}),L._status===-1&&(L._status=0,L._result=G)}if(L._status===1)return L._result.default;throw L._result}var Ae={current:null},Y={transition:null},fe={ReactCurrentDispatcher:Ae,ReactCurrentBatchConfig:Y,ReactCurrentOwner:Pe};function ie(){throw Error("act(...) is not supported in production builds of React.")}return xe.Children={map:Ue,forEach:function(L,G,Ie){Ue(L,function(){G.apply(this,arguments)},Ie)},count:function(L){var G=0;return Ue(L,function(){G++}),G},toArray:function(L){return Ue(L,function(G){return G})||[]},only:function(L){if(!x(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},xe.Component=D,xe.Fragment=t,xe.Profiler=o,xe.PureComponent=ee,xe.StrictMode=s,xe.Suspense=g,xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fe,xe.act=ie,xe.cloneElement=function(L,G,Ie){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var Re=W({},L.props),ke=L.key,Ne=L.ref,je=L._owner;if(G!=null){if(G.ref!==void 0&&(Ne=G.ref,je=Pe.current),G.key!==void 0&&(ke=""+G.key),L.type&&L.type.defaultProps)var Le=L.type.defaultProps;for(We in G)Te.call(G,We)&&!P.hasOwnProperty(We)&&(Re[We]=G[We]===void 0&&Le!==void 0?Le[We]:G[We])}var We=arguments.length-2;if(We===1)Re.children=Ie;else if(1<We){Le=Array(We);for(var St=0;St<We;St++)Le[St]=arguments[St+2];Re.children=Le}return{$$typeof:r,type:L.type,key:ke,ref:Ne,props:Re,_owner:je}},xe.createContext=function(L){return L={$$typeof:h,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:l,_context:L},L.Consumer=L},xe.createElement=I,xe.createFactory=function(L){var G=I.bind(null,L);return G.type=L,G},xe.createRef=function(){return{current:null}},xe.forwardRef=function(L){return{$$typeof:p,render:L}},xe.isValidElement=x,xe.lazy=function(L){return{$$typeof:w,_payload:{_status:-1,_result:L},_init:qe}},xe.memo=function(L,G){return{$$typeof:y,type:L,compare:G===void 0?null:G}},xe.startTransition=function(L){var G=Y.transition;Y.transition={};try{L()}finally{Y.transition=G}},xe.unstable_act=ie,xe.useCallback=function(L,G){return Ae.current.useCallback(L,G)},xe.useContext=function(L){return Ae.current.useContext(L)},xe.useDebugValue=function(){},xe.useDeferredValue=function(L){return Ae.current.useDeferredValue(L)},xe.useEffect=function(L,G){return Ae.current.useEffect(L,G)},xe.useId=function(){return Ae.current.useId()},xe.useImperativeHandle=function(L,G,Ie){return Ae.current.useImperativeHandle(L,G,Ie)},xe.useInsertionEffect=function(L,G){return Ae.current.useInsertionEffect(L,G)},xe.useLayoutEffect=function(L,G){return Ae.current.useLayoutEffect(L,G)},xe.useMemo=function(L,G){return Ae.current.useMemo(L,G)},xe.useReducer=function(L,G,Ie){return Ae.current.useReducer(L,G,Ie)},xe.useRef=function(L){return Ae.current.useRef(L)},xe.useState=function(L){return Ae.current.useState(L)},xe.useSyncExternalStore=function(L,G,Ie){return Ae.current.useSyncExternalStore(L,G,Ie)},xe.useTransition=function(){return Ae.current.useTransition()},xe.version="18.3.1",xe}var Tg;function hf(){return Tg||(Tg=1,_d.exports=dT()),_d.exports}var Ig;function fT(){if(Ig)return Ua;Ig=1;var r=hf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(p,g,y){var w,T={},R=null,F=null;y!==void 0&&(R=""+y),g.key!==void 0&&(R=""+g.key),g.ref!==void 0&&(F=g.ref);for(w in g)s.call(g,w)&&!l.hasOwnProperty(w)&&(T[w]=g[w]);if(p&&p.defaultProps)for(w in g=p.defaultProps,g)T[w]===void 0&&(T[w]=g[w]);return{$$typeof:e,type:p,key:R,ref:F,props:T,_owner:o.current}}return Ua.Fragment=t,Ua.jsx=h,Ua.jsxs=h,Ua}var Sg;function pT(){return Sg||(Sg=1,yd.exports=fT()),yd.exports}var j=pT(),le=hf();const Ge=y_(le),mT=hT({__proto__:null,default:Ge},[le]);var Fu={},vd={exports:{}},tn={},wd={exports:{}},Ed={};var Ag;function gT(){return Ag||(Ag=1,(function(r){function e(Y,fe){var ie=Y.length;Y.push(fe);e:for(;0<ie;){var L=ie-1>>>1,G=Y[L];if(0<o(G,fe))Y[L]=fe,Y[ie]=G,ie=L;else break e}}function t(Y){return Y.length===0?null:Y[0]}function s(Y){if(Y.length===0)return null;var fe=Y[0],ie=Y.pop();if(ie!==fe){Y[0]=ie;e:for(var L=0,G=Y.length,Ie=G>>>1;L<Ie;){var Re=2*(L+1)-1,ke=Y[Re],Ne=Re+1,je=Y[Ne];if(0>o(ke,ie))Ne<G&&0>o(je,ke)?(Y[L]=je,Y[Ne]=ie,L=Ne):(Y[L]=ke,Y[Re]=ie,L=Re);else if(Ne<G&&0>o(je,ie))Y[L]=je,Y[Ne]=ie,L=Ne;else break e}}return fe}function o(Y,fe){var ie=Y.sortIndex-fe.sortIndex;return ie!==0?ie:Y.id-fe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var h=Date,p=h.now();r.unstable_now=function(){return h.now()-p}}var g=[],y=[],w=1,T=null,R=3,F=!1,W=!1,q=!1,D=typeof setTimeout=="function"?setTimeout:null,ne=typeof clearTimeout=="function"?clearTimeout:null,ee=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function te(Y){for(var fe=t(y);fe!==null;){if(fe.callback===null)s(y);else if(fe.startTime<=Y)s(y),fe.sortIndex=fe.expirationTime,e(g,fe);else break;fe=t(y)}}function he(Y){if(q=!1,te(Y),!W)if(t(g)!==null)W=!0,qe(Te);else{var fe=t(y);fe!==null&&Ae(he,fe.startTime-Y)}}function Te(Y,fe){W=!1,q&&(q=!1,ne(I),I=-1),F=!0;var ie=R;try{for(te(fe),T=t(g);T!==null&&(!(T.expirationTime>fe)||Y&&!k());){var L=T.callback;if(typeof L=="function"){T.callback=null,R=T.priorityLevel;var G=L(T.expirationTime<=fe);fe=r.unstable_now(),typeof G=="function"?T.callback=G:T===t(g)&&s(g),te(fe)}else s(g);T=t(g)}if(T!==null)var Ie=!0;else{var Re=t(y);Re!==null&&Ae(he,Re.startTime-fe),Ie=!1}return Ie}finally{T=null,R=ie,F=!1}}var Pe=!1,P=null,I=-1,C=5,x=-1;function k(){return!(r.unstable_now()-x<C)}function O(){if(P!==null){var Y=r.unstable_now();x=Y;var fe=!0;try{fe=P(!0,Y)}finally{fe?A():(Pe=!1,P=null)}}else Pe=!1}var A;if(typeof ee=="function")A=function(){ee(O)};else if(typeof MessageChannel<"u"){var pe=new MessageChannel,Ue=pe.port2;pe.port1.onmessage=O,A=function(){Ue.postMessage(null)}}else A=function(){D(O,0)};function qe(Y){P=Y,Pe||(Pe=!0,A())}function Ae(Y,fe){I=D(function(){Y(r.unstable_now())},fe)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Y){Y.callback=null},r.unstable_continueExecution=function(){W||F||(W=!0,qe(Te))},r.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<Y?Math.floor(1e3/Y):5},r.unstable_getCurrentPriorityLevel=function(){return R},r.unstable_getFirstCallbackNode=function(){return t(g)},r.unstable_next=function(Y){switch(R){case 1:case 2:case 3:var fe=3;break;default:fe=R}var ie=R;R=fe;try{return Y()}finally{R=ie}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(Y,fe){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var ie=R;R=Y;try{return fe()}finally{R=ie}},r.unstable_scheduleCallback=function(Y,fe,ie){var L=r.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?L+ie:L):ie=L,Y){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=ie+G,Y={id:w++,callback:fe,priorityLevel:Y,startTime:ie,expirationTime:G,sortIndex:-1},ie>L?(Y.sortIndex=ie,e(y,Y),t(g)===null&&Y===t(y)&&(q?(ne(I),I=-1):q=!0,Ae(he,ie-L))):(Y.sortIndex=G,e(g,Y),W||F||(W=!0,qe(Te))),Y},r.unstable_shouldYield=k,r.unstable_wrapCallback=function(Y){var fe=R;return function(){var ie=R;R=fe;try{return Y.apply(this,arguments)}finally{R=ie}}}})(Ed)),Ed}var Rg;function yT(){return Rg||(Rg=1,wd.exports=gT()),wd.exports}var Cg;function _T(){if(Cg)return tn;Cg=1;var r=hf(),e=yT();function t(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(n,i){h(n,i),h(n+"Capture",i)}function h(n,i){for(o[n]=i,n=0;n<i.length;n++)s.add(i[n])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},T={};function R(n){return g.call(T,n)?!0:g.call(w,n)?!1:y.test(n)?T[n]=!0:(w[n]=!0,!1)}function F(n,i,a,c){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function W(n,i,a,c){if(i===null||typeof i>"u"||F(n,i,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function q(n,i,a,c,d,f,v){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=i,this.sanitizeURL=f,this.removeEmptyString=v}var D={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){D[n]=new q(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];D[i]=new q(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){D[n]=new q(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){D[n]=new q(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){D[n]=new q(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){D[n]=new q(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){D[n]=new q(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){D[n]=new q(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){D[n]=new q(n,5,!1,n.toLowerCase(),null,!1,!1)});var ne=/[\-:]([a-z])/g;function ee(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(ne,ee);D[i]=new q(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(ne,ee);D[i]=new q(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(ne,ee);D[i]=new q(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){D[n]=new q(n,1,!1,n.toLowerCase(),null,!1,!1)}),D.xlinkHref=new q("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){D[n]=new q(n,1,!1,n.toLowerCase(),null,!0,!0)});function te(n,i,a,c){var d=D.hasOwnProperty(i)?D[i]:null;(d!==null?d.type!==0:c||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(W(i,a,d,c)&&(a=null),c||d===null?R(i)&&(a===null?n.removeAttribute(i):n.setAttribute(i,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(i=d.attributeName,c=d.attributeNamespace,a===null?n.removeAttribute(i):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?n.setAttributeNS(c,i,a):n.setAttribute(i,a))))}var he=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Te=Symbol.for("react.element"),Pe=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),k=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),pe=Symbol.for("react.suspense_list"),Ue=Symbol.for("react.memo"),qe=Symbol.for("react.lazy"),Ae=Symbol.for("react.offscreen"),Y=Symbol.iterator;function fe(n){return n===null||typeof n!="object"?null:(n=Y&&n[Y]||n["@@iterator"],typeof n=="function"?n:null)}var ie=Object.assign,L;function G(n){if(L===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);L=i&&i[1]||""}return`
`+L+n}var Ie=!1;function Re(n,i){if(!n||Ie)return"";Ie=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(z){var c=z}Reflect.construct(n,[],i)}else{try{i.call()}catch(z){c=z}n.call(i.prototype)}else{try{throw Error()}catch(z){c=z}n()}}catch(z){if(z&&c&&typeof z.stack=="string"){for(var d=z.stack.split(`
`),f=c.stack.split(`
`),v=d.length-1,S=f.length-1;1<=v&&0<=S&&d[v]!==f[S];)S--;for(;1<=v&&0<=S;v--,S--)if(d[v]!==f[S]){if(v!==1||S!==1)do if(v--,S--,0>S||d[v]!==f[S]){var N=`
`+d[v].replace(" at new "," at ");return n.displayName&&N.includes("<anonymous>")&&(N=N.replace("<anonymous>",n.displayName)),N}while(1<=v&&0<=S);break}}}finally{Ie=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?G(n):""}function ke(n){switch(n.tag){case 5:return G(n.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return n=Re(n.type,!1),n;case 11:return n=Re(n.type.render,!1),n;case 1:return n=Re(n.type,!0),n;default:return""}}function Ne(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case P:return"Fragment";case Pe:return"Portal";case C:return"Profiler";case I:return"StrictMode";case A:return"Suspense";case pe:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case k:return(n.displayName||"Context")+".Consumer";case x:return(n._context.displayName||"Context")+".Provider";case O:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Ue:return i=n.displayName||null,i!==null?i:Ne(n.type)||"Memo";case qe:i=n._payload,n=n._init;try{return Ne(n(i))}catch{}}return null}function je(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ne(i);case 8:return i===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Le(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function We(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function St(n){var i=We(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),c=""+n[i];if(!n.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,f=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return d.call(this)},set:function(v){c=""+v,f.call(this,v)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(v){c=""+v},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function gn(n){n._valueTracker||(n._valueTracker=St(n))}function Wo(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),c="";return n&&(c=We(n)?n.checked?"true":"false":n.value),n=c,n!==a?(i.setValue(n),!0):!1}function jr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Ps(n,i){var a=i.checked;return ie({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function Il(n,i){var a=i.defaultValue==null?"":i.defaultValue,c=i.checked!=null?i.checked:i.defaultChecked;a=Le(i.value!=null?i.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function ks(n,i){i=i.checked,i!=null&&te(n,"checked",i,!1)}function ji(n,i){ks(n,i);var a=Le(i.value),c=i.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?pt(n,i.type,a):i.hasOwnProperty("defaultValue")&&pt(n,i.type,Le(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function Ho(n,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var c=i.type;if(!(c!=="submit"&&c!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,a||i===n.value||(n.value=i),n.defaultValue=i}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function pt(n,i,a){(i!=="number"||jr(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var lt=Array.isArray;function An(n,i,a,c){if(n=n.options,i){i={};for(var d=0;d<a.length;d++)i["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=i.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Le(a),i=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}i!==null||n[d].disabled||(i=n[d])}i!==null&&(i.selected=!0)}}function Go(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return ie({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Ko(n,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(t(92));if(lt(a)){if(1<a.length)throw Error(t(93));a=a[0]}i=a}i==null&&(i=""),a=i}n._wrapperState={initialValue:Le(a)}}function Sl(n,i){var a=Le(i.value),c=Le(i.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),i.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function zr(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function Qo(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ns(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?Qo(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Br,Al=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,c,d){MSApp.execUnsafeLocalFunction(function(){return n(i,a,c,d)})}:n})(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(Br=Br||document.createElement("div"),Br.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Br.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function zi(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var $r={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Rl=["Webkit","ms","Moz","O"];Object.keys($r).forEach(function(n){Rl.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),$r[i]=$r[n]})});function qr(n,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||$r.hasOwnProperty(n)&&$r[n]?(""+i).trim():i+"px"}function xs(n,i){n=n.style;for(var a in i)if(i.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=qr(a,i[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,d):n[a]=d}}var Xo=ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Rn(n,i){if(i){if(Xo[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function Ds(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wr=null;function Vs(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var dr=null,fr=null,ot=null;function Yo(n){if(n=Sa(n)){if(typeof dr!="function")throw Error(t(280));var i=n.stateNode;i&&(i=Zl(i),dr(n.stateNode,n.type,i))}}function Hr(n){fr?ot?ot.push(n):ot=[n]:fr=n}function Gr(){if(fr){var n=fr,i=ot;if(ot=fr=null,Yo(n),i)for(n=0;n<i.length;n++)Yo(i[n])}}function Cl(n,i){return n(i)}function Pl(){}var jn=!1;function kl(n,i,a){if(jn)return n(i,a);jn=!0;try{return Cl(n,i,a)}finally{jn=!1,(fr!==null||ot!==null)&&(Pl(),Gr())}}function Bi(n,i){var a=n.stateNode;if(a===null)return null;var c=Zl(a);if(c===null)return null;a=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,i,typeof a));return a}var Kr=!1;if(p)try{var Qr={};Object.defineProperty(Qr,"passive",{get:function(){Kr=!0}}),window.addEventListener("test",Qr,Qr),window.removeEventListener("test",Qr,Qr)}catch{Kr=!1}function Nl(n,i,a,c,d,f,v,S,N){var z=Array.prototype.slice.call(arguments,3);try{i.apply(a,z)}catch(Q){this.onError(Q)}}var pr=!1,zn=null,Os=!1,yn=null,xl={onError:function(n){pr=!0,zn=n}};function Dl(n,i,a,c,d,f,v,S,N){pr=!1,zn=null,Nl.apply(xl,arguments)}function Jo(n,i,a,c,d,f,v,S,N){if(Dl.apply(this,arguments),pr){if(pr){var z=zn;pr=!1,zn=null}else throw Error(t(198));Os||(Os=!0,yn=z)}}function Cn(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function Zo(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function Vl(n){if(Cn(n)!==n)throw Error(t(188))}function Ol(n){var i=n.alternate;if(!i){if(i=Cn(n),i===null)throw Error(t(188));return i!==n?null:n}for(var a=n,c=i;;){var d=a.return;if(d===null)break;var f=d.alternate;if(f===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===a)return Vl(d),n;if(f===c)return Vl(d),i;f=f.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=f;else{for(var v=!1,S=d.child;S;){if(S===a){v=!0,a=d,c=f;break}if(S===c){v=!0,c=d,a=f;break}S=S.sibling}if(!v){for(S=f.child;S;){if(S===a){v=!0,a=f,c=d;break}if(S===c){v=!0,c=f,a=d;break}S=S.sibling}if(!v)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:i}function Ll(n){return n=Ol(n),n!==null?$i(n):null}function $i(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=$i(n);if(i!==null)return i;n=n.sibling}return null}var ea=e.unstable_scheduleCallback,Ls=e.unstable_cancelCallback,qi=e.unstable_shouldYield,mr=e.unstable_requestPaint,Ye=e.unstable_now,Kc=e.unstable_getCurrentPriorityLevel,Ms=e.unstable_ImmediatePriority,ta=e.unstable_UserBlockingPriority,Wi=e.unstable_NormalPriority,na=e.unstable_LowPriority,bs=e.unstable_IdlePriority,Hi=null,rn=null;function Ml(n){if(rn&&typeof rn.onCommitFiberRoot=="function")try{rn.onCommitFiberRoot(Hi,n,void 0,(n.current.flags&128)===128)}catch{}}var sn=Math.clz32?Math.clz32:Gi,Bn=Math.log,_n=Math.LN2;function Gi(n){return n>>>=0,n===0?32:31-(Bn(n)/_n|0)|0}var $n=64,Xr=4194304;function $e(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function gr(n,i){var a=n.pendingLanes;if(a===0)return 0;var c=0,d=n.suspendedLanes,f=n.pingedLanes,v=a&268435455;if(v!==0){var S=v&~d;S!==0?c=$e(S):(f&=v,f!==0&&(c=$e(f)))}else v=a&~d,v!==0?c=$e(v):f!==0&&(c=$e(f));if(c===0)return 0;if(i!==0&&i!==c&&(i&d)===0&&(d=c&-c,f=i&-i,d>=f||d===16&&(f&4194240)!==0))return i;if((c&4)!==0&&(c|=a&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=c;0<i;)a=31-sn(i),d=1<<a,c|=n[a],i&=~d;return c}function Ki(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qi(n,i){for(var a=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,f=n.pendingLanes;0<f;){var v=31-sn(f),S=1<<v,N=d[v];N===-1?((S&a)===0||(S&c)!==0)&&(d[v]=Ki(S,i)):N<=i&&(n.expiredLanes|=S),f&=~S}}function ra(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function ia(){var n=$n;return $n<<=1,($n&4194240)===0&&($n=64),n}function sa(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function Xi(n,i,a){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-sn(i),n[i]=a}function Qc(n,i){var a=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-sn(a),f=1<<d;i[d]=0,c[d]=-1,n[d]=-1,a&=~f}}function oa(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var c=31-sn(a),d=1<<c;d&i|n[c]&i&&(n[c]|=i),a&=~d}}var Me=0;function qn(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var aa,Fs,la,ua,ca,Wn=!1,Us=[],Hn=null,Gn=null,Nt=null,Yi=new Map,yr=new Map,on=[],bl="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Yr(n,i){switch(n){case"focusin":case"focusout":Hn=null;break;case"dragenter":case"dragleave":Gn=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Yi.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":yr.delete(i.pointerId)}}function Pn(n,i,a,c,d,f){return n===null||n.nativeEvent!==f?(n={blockedOn:i,domEventName:a,eventSystemFlags:c,nativeEvent:f,targetContainers:[d]},i!==null&&(i=Sa(i),i!==null&&Fs(i)),n):(n.eventSystemFlags|=c,i=n.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),n)}function Fl(n,i,a,c,d){switch(i){case"focusin":return Hn=Pn(Hn,n,i,a,c,d),!0;case"dragenter":return Gn=Pn(Gn,n,i,a,c,d),!0;case"mouseover":return Nt=Pn(Nt,n,i,a,c,d),!0;case"pointerover":var f=d.pointerId;return Yi.set(f,Pn(Yi.get(f)||null,n,i,a,c,d)),!0;case"gotpointercapture":return f=d.pointerId,yr.set(f,Pn(yr.get(f)||null,n,i,a,c,d)),!0}return!1}function js(n){var i=ts(n.target);if(i!==null){var a=Cn(i);if(a!==null){if(i=a.tag,i===13){if(i=Zo(a),i!==null){n.blockedOn=i,ca(n.priority,function(){la(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Qe(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=zs(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Wr=c,a.target.dispatchEvent(c),Wr=null}else return i=Sa(a),i!==null&&Fs(i),n.blockedOn=a,!1;i.shift()}return!0}function Ul(n,i,a){Qe(n)&&a.delete(i)}function Xc(){Wn=!1,Hn!==null&&Qe(Hn)&&(Hn=null),Gn!==null&&Qe(Gn)&&(Gn=null),Nt!==null&&Qe(Nt)&&(Nt=null),Yi.forEach(Ul),yr.forEach(Ul)}function Jr(n,i){n.blockedOn===i&&(n.blockedOn=null,Wn||(Wn=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Xc)))}function Zr(n){function i(d){return Jr(d,n)}if(0<Us.length){Jr(Us[0],n);for(var a=1;a<Us.length;a++){var c=Us[a];c.blockedOn===n&&(c.blockedOn=null)}}for(Hn!==null&&Jr(Hn,n),Gn!==null&&Jr(Gn,n),Nt!==null&&Jr(Nt,n),Yi.forEach(i),yr.forEach(i),a=0;a<on.length;a++)c=on[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<on.length&&(a=on[0],a.blockedOn===null);)js(a),a.blockedOn===null&&on.shift()}var _r=he.ReactCurrentBatchConfig,vr=!0;function Kn(n,i,a,c){var d=Me,f=_r.transition;_r.transition=null;try{Me=1,ha(n,i,a,c)}finally{Me=d,_r.transition=f}}function jl(n,i,a,c){var d=Me,f=_r.transition;_r.transition=null;try{Me=4,ha(n,i,a,c)}finally{Me=d,_r.transition=f}}function ha(n,i,a,c){if(vr){var d=zs(n,i,a,c);if(d===null)ah(n,i,c,Qn,a),Yr(n,c);else if(Fl(d,n,i,a,c))c.stopPropagation();else if(Yr(n,c),i&4&&-1<bl.indexOf(n)){for(;d!==null;){var f=Sa(d);if(f!==null&&aa(f),f=zs(n,i,a,c),f===null&&ah(n,i,c,Qn,a),f===d)break;d=f}d!==null&&c.stopPropagation()}else ah(n,i,c,null,a)}}var Qn=null;function zs(n,i,a,c){if(Qn=null,n=Vs(c),n=ts(n),n!==null)if(i=Cn(n),i===null)n=null;else if(a=i.tag,a===13){if(n=Zo(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return Qn=n,null}function Bs(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Kc()){case Ms:return 1;case ta:return 4;case Wi:case na:return 16;case bs:return 536870912;default:return 16}default:return 16}}var an=null,$s=null,wr=null;function zl(){if(wr)return wr;var n,i=$s,a=i.length,c,d="value"in an?an.value:an.textContent,f=d.length;for(n=0;n<a&&i[n]===d[n];n++);var v=a-n;for(c=1;c<=v&&i[a-c]===d[f-c];c++);return wr=d.slice(n,1<c?1-c:void 0)}function Ji(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Xn(){return!0}function da(){return!1}function Ut(n){function i(a,c,d,f,v){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=f,this.target=v,this.currentTarget=null;for(var S in n)n.hasOwnProperty(S)&&(a=n[S],this[S]=a?a(f):f[S]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Xn:da,this.isPropagationStopped=da,this}return ie(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Xn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Xn)},persist:function(){},isPersistent:Xn}),i}var Yn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zi=Ut(Yn),ei=ie({},Yn,{view:0,detail:0}),qs=Ut(ei),Ws,Hs,ln,es=ie({},ei,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ce,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ln&&(ln&&n.type==="mousemove"?(Ws=n.screenX-ln.screenX,Hs=n.screenY-ln.screenY):Hs=Ws=0,ln=n),Ws)},movementY:function(n){return"movementY"in n?n.movementY:Hs}}),fa=Ut(es),Bl=ie({},es,{dataTransfer:0}),$l=Ut(Bl),Gs=ie({},ei,{relatedTarget:0}),xt=Ut(Gs),ql=ie({},Yn,{animationName:0,elapsedTime:0,pseudoElement:0}),Wl=Ut(ql),ti=ie({},Yn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),u=Ut(ti),m=ie({},Yn,{data:0}),_=Ut(m),E={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},b={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},B={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Z(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=B[n])?!!i[n]:!1}function Ce(){return Z}var ut=ie({},ei,{key:function(n){if(n.key){var i=E[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Ji(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?b[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ce,charCode:function(n){return n.type==="keypress"?Ji(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ji(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),He=Ut(ut),mt=ie({},es,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),un=Ut(mt),Er=ie({},ei,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ce}),Jn=Ut(Er),Zn=ie({},Yn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ks=Ut(Zn),pa=ie({},es,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),sE=Ut(pa),oE=[9,13,27,32],Yc=p&&"CompositionEvent"in window,ma=null;p&&"documentMode"in document&&(ma=document.documentMode);var aE=p&&"TextEvent"in window&&!ma,fp=p&&(!Yc||ma&&8<ma&&11>=ma),pp=" ",mp=!1;function gp(n,i){switch(n){case"keyup":return oE.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yp(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Qs=!1;function lE(n,i){switch(n){case"compositionend":return yp(i);case"keypress":return i.which!==32?null:(mp=!0,pp);case"textInput":return n=i.data,n===pp&&mp?null:n;default:return null}}function uE(n,i){if(Qs)return n==="compositionend"||!Yc&&gp(n,i)?(n=zl(),wr=$s=an=null,Qs=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return fp&&i.locale!=="ko"?null:i.data;default:return null}}var cE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _p(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!cE[n.type]:i==="textarea"}function vp(n,i,a,c){Hr(c),i=Xl(i,"onChange"),0<i.length&&(a=new Zi("onChange","change",null,a,c),n.push({event:a,listeners:i}))}var ga=null,ya=null;function hE(n){bp(n,0)}function Hl(n){var i=eo(n);if(Wo(i))return n}function dE(n,i){if(n==="change")return i}var wp=!1;if(p){var Jc;if(p){var Zc="oninput"in document;if(!Zc){var Ep=document.createElement("div");Ep.setAttribute("oninput","return;"),Zc=typeof Ep.oninput=="function"}Jc=Zc}else Jc=!1;wp=Jc&&(!document.documentMode||9<document.documentMode)}function Tp(){ga&&(ga.detachEvent("onpropertychange",Ip),ya=ga=null)}function Ip(n){if(n.propertyName==="value"&&Hl(ya)){var i=[];vp(i,ya,n,Vs(n)),kl(hE,i)}}function fE(n,i,a){n==="focusin"?(Tp(),ga=i,ya=a,ga.attachEvent("onpropertychange",Ip)):n==="focusout"&&Tp()}function pE(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Hl(ya)}function mE(n,i){if(n==="click")return Hl(i)}function gE(n,i){if(n==="input"||n==="change")return Hl(i)}function yE(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var kn=typeof Object.is=="function"?Object.is:yE;function _a(n,i){if(kn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),c=Object.keys(i);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!g.call(i,d)||!kn(n[d],i[d]))return!1}return!0}function Sp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Ap(n,i){var a=Sp(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=i&&c>=i)return{node:a,offset:i-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Sp(a)}}function Rp(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Rp(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Cp(){for(var n=window,i=jr();i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=jr(n.document)}return i}function eh(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function _E(n){var i=Cp(),a=n.focusedElem,c=n.selectionRange;if(i!==a&&a&&a.ownerDocument&&Rp(a.ownerDocument.documentElement,a)){if(c!==null&&eh(a)){if(i=c.start,n=c.end,n===void 0&&(n=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(n,a.value.length);else if(n=(i=a.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,f=Math.min(c.start,d);c=c.end===void 0?f:Math.min(c.end,d),!n.extend&&f>c&&(d=c,c=f,f=d),d=Ap(a,f);var v=Ap(a,c);d&&v&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==v.node||n.focusOffset!==v.offset)&&(i=i.createRange(),i.setStart(d.node,d.offset),n.removeAllRanges(),f>c?(n.addRange(i),n.extend(v.node,v.offset)):(i.setEnd(v.node,v.offset),n.addRange(i)))}}for(i=[],n=a;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)n=i[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var vE=p&&"documentMode"in document&&11>=document.documentMode,Xs=null,th=null,va=null,nh=!1;function Pp(n,i,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;nh||Xs==null||Xs!==jr(c)||(c=Xs,"selectionStart"in c&&eh(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),va&&_a(va,c)||(va=c,c=Xl(th,"onSelect"),0<c.length&&(i=new Zi("onSelect","select",null,i,a),n.push({event:i,listeners:c}),i.target=Xs)))}function Gl(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var Ys={animationend:Gl("Animation","AnimationEnd"),animationiteration:Gl("Animation","AnimationIteration"),animationstart:Gl("Animation","AnimationStart"),transitionend:Gl("Transition","TransitionEnd")},rh={},kp={};p&&(kp=document.createElement("div").style,"AnimationEvent"in window||(delete Ys.animationend.animation,delete Ys.animationiteration.animation,delete Ys.animationstart.animation),"TransitionEvent"in window||delete Ys.transitionend.transition);function Kl(n){if(rh[n])return rh[n];if(!Ys[n])return n;var i=Ys[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in kp)return rh[n]=i[a];return n}var Np=Kl("animationend"),xp=Kl("animationiteration"),Dp=Kl("animationstart"),Vp=Kl("transitionend"),Op=new Map,Lp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ni(n,i){Op.set(n,i),l(i,[n])}for(var ih=0;ih<Lp.length;ih++){var sh=Lp[ih],wE=sh.toLowerCase(),EE=sh[0].toUpperCase()+sh.slice(1);ni(wE,"on"+EE)}ni(Np,"onAnimationEnd"),ni(xp,"onAnimationIteration"),ni(Dp,"onAnimationStart"),ni("dblclick","onDoubleClick"),ni("focusin","onFocus"),ni("focusout","onBlur"),ni(Vp,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),TE=new Set("cancel close invalid load scroll toggle".split(" ").concat(wa));function Mp(n,i,a){var c=n.type||"unknown-event";n.currentTarget=a,Jo(c,i,void 0,n),n.currentTarget=null}function bp(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],d=c.event;c=c.listeners;e:{var f=void 0;if(i)for(var v=c.length-1;0<=v;v--){var S=c[v],N=S.instance,z=S.currentTarget;if(S=S.listener,N!==f&&d.isPropagationStopped())break e;Mp(d,S,z),f=N}else for(v=0;v<c.length;v++){if(S=c[v],N=S.instance,z=S.currentTarget,S=S.listener,N!==f&&d.isPropagationStopped())break e;Mp(d,S,z),f=N}}}if(Os)throw n=yn,Os=!1,yn=null,n}function Je(n,i){var a=i[fh];a===void 0&&(a=i[fh]=new Set);var c=n+"__bubble";a.has(c)||(Fp(i,n,2,!1),a.add(c))}function oh(n,i,a){var c=0;i&&(c|=4),Fp(a,n,c,i)}var Ql="_reactListening"+Math.random().toString(36).slice(2);function Ea(n){if(!n[Ql]){n[Ql]=!0,s.forEach(function(a){a!=="selectionchange"&&(TE.has(a)||oh(a,!1,n),oh(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Ql]||(i[Ql]=!0,oh("selectionchange",!1,i))}}function Fp(n,i,a,c){switch(Bs(i)){case 1:var d=Kn;break;case 4:d=jl;break;default:d=ha}a=d.bind(null,i,a,n),d=void 0,!Kr||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(i,a,{capture:!0,passive:d}):n.addEventListener(i,a,!0):d!==void 0?n.addEventListener(i,a,{passive:d}):n.addEventListener(i,a,!1)}function ah(n,i,a,c,d){var f=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var S=c.stateNode.containerInfo;if(S===d||S.nodeType===8&&S.parentNode===d)break;if(v===4)for(v=c.return;v!==null;){var N=v.tag;if((N===3||N===4)&&(N=v.stateNode.containerInfo,N===d||N.nodeType===8&&N.parentNode===d))return;v=v.return}for(;S!==null;){if(v=ts(S),v===null)return;if(N=v.tag,N===5||N===6){c=f=v;continue e}S=S.parentNode}}c=c.return}kl(function(){var z=f,Q=Vs(a),X=[];e:{var K=Op.get(n);if(K!==void 0){var se=Zi,ue=n;switch(n){case"keypress":if(Ji(a)===0)break e;case"keydown":case"keyup":se=He;break;case"focusin":ue="focus",se=xt;break;case"focusout":ue="blur",se=xt;break;case"beforeblur":case"afterblur":se=xt;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=fa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=$l;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=Jn;break;case Np:case xp:case Dp:se=Wl;break;case Vp:se=Ks;break;case"scroll":se=qs;break;case"wheel":se=sE;break;case"copy":case"cut":case"paste":se=u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=un}var ce=(i&4)!==0,ct=!ce&&n==="scroll",M=ce?K!==null?K+"Capture":null:K;ce=[];for(var V=z,U;V!==null;){U=V;var J=U.stateNode;if(U.tag===5&&J!==null&&(U=J,M!==null&&(J=Bi(V,M),J!=null&&ce.push(Ta(V,J,U)))),ct)break;V=V.return}0<ce.length&&(K=new se(K,ue,null,a,Q),X.push({event:K,listeners:ce}))}}if((i&7)===0){e:{if(K=n==="mouseover"||n==="pointerover",se=n==="mouseout"||n==="pointerout",K&&a!==Wr&&(ue=a.relatedTarget||a.fromElement)&&(ts(ue)||ue[Tr]))break e;if((se||K)&&(K=Q.window===Q?Q:(K=Q.ownerDocument)?K.defaultView||K.parentWindow:window,se?(ue=a.relatedTarget||a.toElement,se=z,ue=ue?ts(ue):null,ue!==null&&(ct=Cn(ue),ue!==ct||ue.tag!==5&&ue.tag!==6)&&(ue=null)):(se=null,ue=z),se!==ue)){if(ce=fa,J="onMouseLeave",M="onMouseEnter",V="mouse",(n==="pointerout"||n==="pointerover")&&(ce=un,J="onPointerLeave",M="onPointerEnter",V="pointer"),ct=se==null?K:eo(se),U=ue==null?K:eo(ue),K=new ce(J,V+"leave",se,a,Q),K.target=ct,K.relatedTarget=U,J=null,ts(Q)===z&&(ce=new ce(M,V+"enter",ue,a,Q),ce.target=U,ce.relatedTarget=ct,J=ce),ct=J,se&&ue)t:{for(ce=se,M=ue,V=0,U=ce;U;U=Js(U))V++;for(U=0,J=M;J;J=Js(J))U++;for(;0<V-U;)ce=Js(ce),V--;for(;0<U-V;)M=Js(M),U--;for(;V--;){if(ce===M||M!==null&&ce===M.alternate)break t;ce=Js(ce),M=Js(M)}ce=null}else ce=null;se!==null&&Up(X,K,se,ce,!1),ue!==null&&ct!==null&&Up(X,ct,ue,ce,!0)}}e:{if(K=z?eo(z):window,se=K.nodeName&&K.nodeName.toLowerCase(),se==="select"||se==="input"&&K.type==="file")var de=dE;else if(_p(K))if(wp)de=gE;else{de=pE;var ye=fE}else(se=K.nodeName)&&se.toLowerCase()==="input"&&(K.type==="checkbox"||K.type==="radio")&&(de=mE);if(de&&(de=de(n,z))){vp(X,de,a,Q);break e}ye&&ye(n,K,z),n==="focusout"&&(ye=K._wrapperState)&&ye.controlled&&K.type==="number"&&pt(K,"number",K.value)}switch(ye=z?eo(z):window,n){case"focusin":(_p(ye)||ye.contentEditable==="true")&&(Xs=ye,th=z,va=null);break;case"focusout":va=th=Xs=null;break;case"mousedown":nh=!0;break;case"contextmenu":case"mouseup":case"dragend":nh=!1,Pp(X,a,Q);break;case"selectionchange":if(vE)break;case"keydown":case"keyup":Pp(X,a,Q)}var _e;if(Yc)e:{switch(n){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else Qs?gp(n,a)&&(we="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(we="onCompositionStart");we&&(fp&&a.locale!=="ko"&&(Qs||we!=="onCompositionStart"?we==="onCompositionEnd"&&Qs&&(_e=zl()):(an=Q,$s="value"in an?an.value:an.textContent,Qs=!0)),ye=Xl(z,we),0<ye.length&&(we=new _(we,n,null,a,Q),X.push({event:we,listeners:ye}),_e?we.data=_e:(_e=yp(a),_e!==null&&(we.data=_e)))),(_e=aE?lE(n,a):uE(n,a))&&(z=Xl(z,"onBeforeInput"),0<z.length&&(Q=new _("onBeforeInput","beforeinput",null,a,Q),X.push({event:Q,listeners:z}),Q.data=_e))}bp(X,i)})}function Ta(n,i,a){return{instance:n,listener:i,currentTarget:a}}function Xl(n,i){for(var a=i+"Capture",c=[];n!==null;){var d=n,f=d.stateNode;d.tag===5&&f!==null&&(d=f,f=Bi(n,a),f!=null&&c.unshift(Ta(n,f,d)),f=Bi(n,i),f!=null&&c.push(Ta(n,f,d))),n=n.return}return c}function Js(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Up(n,i,a,c,d){for(var f=i._reactName,v=[];a!==null&&a!==c;){var S=a,N=S.alternate,z=S.stateNode;if(N!==null&&N===c)break;S.tag===5&&z!==null&&(S=z,d?(N=Bi(a,f),N!=null&&v.unshift(Ta(a,N,S))):d||(N=Bi(a,f),N!=null&&v.push(Ta(a,N,S)))),a=a.return}v.length!==0&&n.push({event:i,listeners:v})}var IE=/\r\n?/g,SE=/\u0000|\uFFFD/g;function jp(n){return(typeof n=="string"?n:""+n).replace(IE,`
`).replace(SE,"")}function Yl(n,i,a){if(i=jp(i),jp(n)!==i&&a)throw Error(t(425))}function Jl(){}var lh=null,uh=null;function ch(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var hh=typeof setTimeout=="function"?setTimeout:void 0,AE=typeof clearTimeout=="function"?clearTimeout:void 0,zp=typeof Promise=="function"?Promise:void 0,RE=typeof queueMicrotask=="function"?queueMicrotask:typeof zp<"u"?function(n){return zp.resolve(null).then(n).catch(CE)}:hh;function CE(n){setTimeout(function(){throw n})}function dh(n,i){var a=i,c=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){n.removeChild(d),Zr(i);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);Zr(i)}function ri(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function Bp(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}var Zs=Math.random().toString(36).slice(2),er="__reactFiber$"+Zs,Ia="__reactProps$"+Zs,Tr="__reactContainer$"+Zs,fh="__reactEvents$"+Zs,PE="__reactListeners$"+Zs,kE="__reactHandles$"+Zs;function ts(n){var i=n[er];if(i)return i;for(var a=n.parentNode;a;){if(i=a[Tr]||a[er]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=Bp(n);n!==null;){if(a=n[er])return a;n=Bp(n)}return i}n=a,a=n.parentNode}return null}function Sa(n){return n=n[er]||n[Tr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function eo(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Zl(n){return n[Ia]||null}var ph=[],to=-1;function ii(n){return{current:n}}function Ze(n){0>to||(n.current=ph[to],ph[to]=null,to--)}function Xe(n,i){to++,ph[to]=n.current,n.current=i}var si={},jt=ii(si),Xt=ii(!1),ns=si;function no(n,i){var a=n.type.contextTypes;if(!a)return si;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===i)return c.__reactInternalMemoizedMaskedChildContext;var d={},f;for(f in a)d[f]=i[f];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=d),d}function Yt(n){return n=n.childContextTypes,n!=null}function eu(){Ze(Xt),Ze(jt)}function $p(n,i,a){if(jt.current!==si)throw Error(t(168));Xe(jt,i),Xe(Xt,a)}function qp(n,i,a){var c=n.stateNode;if(i=i.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in i))throw Error(t(108,je(n)||"Unknown",d));return ie({},a,c)}function tu(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||si,ns=jt.current,Xe(jt,n),Xe(Xt,Xt.current),!0}function Wp(n,i,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=qp(n,i,ns),c.__reactInternalMemoizedMergedChildContext=n,Ze(Xt),Ze(jt),Xe(jt,n)):Ze(Xt),Xe(Xt,a)}var Ir=null,nu=!1,mh=!1;function Hp(n){Ir===null?Ir=[n]:Ir.push(n)}function NE(n){nu=!0,Hp(n)}function oi(){if(!mh&&Ir!==null){mh=!0;var n=0,i=Me;try{var a=Ir;for(Me=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}Ir=null,nu=!1}catch(d){throw Ir!==null&&(Ir=Ir.slice(n+1)),ea(Ms,oi),d}finally{Me=i,mh=!1}}return null}var ro=[],io=0,ru=null,iu=0,vn=[],wn=0,rs=null,Sr=1,Ar="";function is(n,i){ro[io++]=iu,ro[io++]=ru,ru=n,iu=i}function Gp(n,i,a){vn[wn++]=Sr,vn[wn++]=Ar,vn[wn++]=rs,rs=n;var c=Sr;n=Ar;var d=32-sn(c)-1;c&=~(1<<d),a+=1;var f=32-sn(i)+d;if(30<f){var v=d-d%5;f=(c&(1<<v)-1).toString(32),c>>=v,d-=v,Sr=1<<32-sn(i)+d|a<<d|c,Ar=f+n}else Sr=1<<f|a<<d|c,Ar=n}function gh(n){n.return!==null&&(is(n,1),Gp(n,1,0))}function yh(n){for(;n===ru;)ru=ro[--io],ro[io]=null,iu=ro[--io],ro[io]=null;for(;n===rs;)rs=vn[--wn],vn[wn]=null,Ar=vn[--wn],vn[wn]=null,Sr=vn[--wn],vn[wn]=null}var cn=null,hn=null,tt=!1,Nn=null;function Kp(n,i){var a=Sn(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=n,i=n.deletions,i===null?(n.deletions=[a],n.flags|=16):i.push(a)}function Qp(n,i){switch(n.tag){case 5:var a=n.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,cn=n,hn=ri(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,cn=n,hn=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=rs!==null?{id:Sr,overflow:Ar}:null,n.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=Sn(18,null,null,0),a.stateNode=i,a.return=n,n.child=a,cn=n,hn=null,!0):!1;default:return!1}}function _h(n){return(n.mode&1)!==0&&(n.flags&128)===0}function vh(n){if(tt){var i=hn;if(i){var a=i;if(!Qp(n,i)){if(_h(n))throw Error(t(418));i=ri(a.nextSibling);var c=cn;i&&Qp(n,i)?Kp(c,a):(n.flags=n.flags&-4097|2,tt=!1,cn=n)}}else{if(_h(n))throw Error(t(418));n.flags=n.flags&-4097|2,tt=!1,cn=n}}}function Xp(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;cn=n}function su(n){if(n!==cn)return!1;if(!tt)return Xp(n),tt=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!ch(n.type,n.memoizedProps)),i&&(i=hn)){if(_h(n))throw Yp(),Error(t(418));for(;i;)Kp(n,i),i=ri(i.nextSibling)}if(Xp(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(i===0){hn=ri(n.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}n=n.nextSibling}hn=null}}else hn=cn?ri(n.stateNode.nextSibling):null;return!0}function Yp(){for(var n=hn;n;)n=ri(n.nextSibling)}function so(){hn=cn=null,tt=!1}function wh(n){Nn===null?Nn=[n]:Nn.push(n)}var xE=he.ReactCurrentBatchConfig;function Aa(n,i,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var d=c,f=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===f?i.ref:(i=function(v){var S=d.refs;v===null?delete S[f]:S[f]=v},i._stringRef=f,i)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function ou(n,i){throw n=Object.prototype.toString.call(i),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function Jp(n){var i=n._init;return i(n._payload)}function Zp(n){function i(M,V){if(n){var U=M.deletions;U===null?(M.deletions=[V],M.flags|=16):U.push(V)}}function a(M,V){if(!n)return null;for(;V!==null;)i(M,V),V=V.sibling;return null}function c(M,V){for(M=new Map;V!==null;)V.key!==null?M.set(V.key,V):M.set(V.index,V),V=V.sibling;return M}function d(M,V){return M=pi(M,V),M.index=0,M.sibling=null,M}function f(M,V,U){return M.index=U,n?(U=M.alternate,U!==null?(U=U.index,U<V?(M.flags|=2,V):U):(M.flags|=2,V)):(M.flags|=1048576,V)}function v(M){return n&&M.alternate===null&&(M.flags|=2),M}function S(M,V,U,J){return V===null||V.tag!==6?(V=hd(U,M.mode,J),V.return=M,V):(V=d(V,U),V.return=M,V)}function N(M,V,U,J){var de=U.type;return de===P?Q(M,V,U.props.children,J,U.key):V!==null&&(V.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===qe&&Jp(de)===V.type)?(J=d(V,U.props),J.ref=Aa(M,V,U),J.return=M,J):(J=Nu(U.type,U.key,U.props,null,M.mode,J),J.ref=Aa(M,V,U),J.return=M,J)}function z(M,V,U,J){return V===null||V.tag!==4||V.stateNode.containerInfo!==U.containerInfo||V.stateNode.implementation!==U.implementation?(V=dd(U,M.mode,J),V.return=M,V):(V=d(V,U.children||[]),V.return=M,V)}function Q(M,V,U,J,de){return V===null||V.tag!==7?(V=ds(U,M.mode,J,de),V.return=M,V):(V=d(V,U),V.return=M,V)}function X(M,V,U){if(typeof V=="string"&&V!==""||typeof V=="number")return V=hd(""+V,M.mode,U),V.return=M,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Te:return U=Nu(V.type,V.key,V.props,null,M.mode,U),U.ref=Aa(M,null,V),U.return=M,U;case Pe:return V=dd(V,M.mode,U),V.return=M,V;case qe:var J=V._init;return X(M,J(V._payload),U)}if(lt(V)||fe(V))return V=ds(V,M.mode,U,null),V.return=M,V;ou(M,V)}return null}function K(M,V,U,J){var de=V!==null?V.key:null;if(typeof U=="string"&&U!==""||typeof U=="number")return de!==null?null:S(M,V,""+U,J);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case Te:return U.key===de?N(M,V,U,J):null;case Pe:return U.key===de?z(M,V,U,J):null;case qe:return de=U._init,K(M,V,de(U._payload),J)}if(lt(U)||fe(U))return de!==null?null:Q(M,V,U,J,null);ou(M,U)}return null}function se(M,V,U,J,de){if(typeof J=="string"&&J!==""||typeof J=="number")return M=M.get(U)||null,S(V,M,""+J,de);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case Te:return M=M.get(J.key===null?U:J.key)||null,N(V,M,J,de);case Pe:return M=M.get(J.key===null?U:J.key)||null,z(V,M,J,de);case qe:var ye=J._init;return se(M,V,U,ye(J._payload),de)}if(lt(J)||fe(J))return M=M.get(U)||null,Q(V,M,J,de,null);ou(V,J)}return null}function ue(M,V,U,J){for(var de=null,ye=null,_e=V,we=V=0,Ct=null;_e!==null&&we<U.length;we++){_e.index>we?(Ct=_e,_e=null):Ct=_e.sibling;var Be=K(M,_e,U[we],J);if(Be===null){_e===null&&(_e=Ct);break}n&&_e&&Be.alternate===null&&i(M,_e),V=f(Be,V,we),ye===null?de=Be:ye.sibling=Be,ye=Be,_e=Ct}if(we===U.length)return a(M,_e),tt&&is(M,we),de;if(_e===null){for(;we<U.length;we++)_e=X(M,U[we],J),_e!==null&&(V=f(_e,V,we),ye===null?de=_e:ye.sibling=_e,ye=_e);return tt&&is(M,we),de}for(_e=c(M,_e);we<U.length;we++)Ct=se(_e,M,we,U[we],J),Ct!==null&&(n&&Ct.alternate!==null&&_e.delete(Ct.key===null?we:Ct.key),V=f(Ct,V,we),ye===null?de=Ct:ye.sibling=Ct,ye=Ct);return n&&_e.forEach(function(mi){return i(M,mi)}),tt&&is(M,we),de}function ce(M,V,U,J){var de=fe(U);if(typeof de!="function")throw Error(t(150));if(U=de.call(U),U==null)throw Error(t(151));for(var ye=de=null,_e=V,we=V=0,Ct=null,Be=U.next();_e!==null&&!Be.done;we++,Be=U.next()){_e.index>we?(Ct=_e,_e=null):Ct=_e.sibling;var mi=K(M,_e,Be.value,J);if(mi===null){_e===null&&(_e=Ct);break}n&&_e&&mi.alternate===null&&i(M,_e),V=f(mi,V,we),ye===null?de=mi:ye.sibling=mi,ye=mi,_e=Ct}if(Be.done)return a(M,_e),tt&&is(M,we),de;if(_e===null){for(;!Be.done;we++,Be=U.next())Be=X(M,Be.value,J),Be!==null&&(V=f(Be,V,we),ye===null?de=Be:ye.sibling=Be,ye=Be);return tt&&is(M,we),de}for(_e=c(M,_e);!Be.done;we++,Be=U.next())Be=se(_e,M,we,Be.value,J),Be!==null&&(n&&Be.alternate!==null&&_e.delete(Be.key===null?we:Be.key),V=f(Be,V,we),ye===null?de=Be:ye.sibling=Be,ye=Be);return n&&_e.forEach(function(cT){return i(M,cT)}),tt&&is(M,we),de}function ct(M,V,U,J){if(typeof U=="object"&&U!==null&&U.type===P&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case Te:e:{for(var de=U.key,ye=V;ye!==null;){if(ye.key===de){if(de=U.type,de===P){if(ye.tag===7){a(M,ye.sibling),V=d(ye,U.props.children),V.return=M,M=V;break e}}else if(ye.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===qe&&Jp(de)===ye.type){a(M,ye.sibling),V=d(ye,U.props),V.ref=Aa(M,ye,U),V.return=M,M=V;break e}a(M,ye);break}else i(M,ye);ye=ye.sibling}U.type===P?(V=ds(U.props.children,M.mode,J,U.key),V.return=M,M=V):(J=Nu(U.type,U.key,U.props,null,M.mode,J),J.ref=Aa(M,V,U),J.return=M,M=J)}return v(M);case Pe:e:{for(ye=U.key;V!==null;){if(V.key===ye)if(V.tag===4&&V.stateNode.containerInfo===U.containerInfo&&V.stateNode.implementation===U.implementation){a(M,V.sibling),V=d(V,U.children||[]),V.return=M,M=V;break e}else{a(M,V);break}else i(M,V);V=V.sibling}V=dd(U,M.mode,J),V.return=M,M=V}return v(M);case qe:return ye=U._init,ct(M,V,ye(U._payload),J)}if(lt(U))return ue(M,V,U,J);if(fe(U))return ce(M,V,U,J);ou(M,U)}return typeof U=="string"&&U!==""||typeof U=="number"?(U=""+U,V!==null&&V.tag===6?(a(M,V.sibling),V=d(V,U),V.return=M,M=V):(a(M,V),V=hd(U,M.mode,J),V.return=M,M=V),v(M)):a(M,V)}return ct}var oo=Zp(!0),em=Zp(!1),au=ii(null),lu=null,ao=null,Eh=null;function Th(){Eh=ao=lu=null}function Ih(n){var i=au.current;Ze(au),n._currentValue=i}function Sh(n,i,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),n===a)break;n=n.return}}function lo(n,i){lu=n,Eh=ao=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&i)!==0&&(Jt=!0),n.firstContext=null)}function En(n){var i=n._currentValue;if(Eh!==n)if(n={context:n,memoizedValue:i,next:null},ao===null){if(lu===null)throw Error(t(308));ao=n,lu.dependencies={lanes:0,firstContext:n}}else ao=ao.next=n;return i}var ss=null;function Ah(n){ss===null?ss=[n]:ss.push(n)}function tm(n,i,a,c){var d=i.interleaved;return d===null?(a.next=a,Ah(i)):(a.next=d.next,d.next=a),i.interleaved=a,Rr(n,c)}function Rr(n,i){n.lanes|=i;var a=n.alternate;for(a!==null&&(a.lanes|=i),a=n,n=n.return;n!==null;)n.childLanes|=i,a=n.alternate,a!==null&&(a.childLanes|=i),a=n,n=n.return;return a.tag===3?a.stateNode:null}var ai=!1;function Rh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nm(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Cr(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function li(n,i,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(ze&2)!==0){var d=c.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),c.pending=i,Rr(n,a)}return d=c.interleaved,d===null?(i.next=i,Ah(c)):(i.next=d.next,d.next=i),c.interleaved=i,Rr(n,a)}function uu(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,oa(n,a)}}function rm(n,i){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var v={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};f===null?d=f=v:f=f.next=v,a=a.next}while(a!==null);f===null?d=f=i:f=f.next=i}else d=f=i;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}function cu(n,i,a,c){var d=n.updateQueue;ai=!1;var f=d.firstBaseUpdate,v=d.lastBaseUpdate,S=d.shared.pending;if(S!==null){d.shared.pending=null;var N=S,z=N.next;N.next=null,v===null?f=z:v.next=z,v=N;var Q=n.alternate;Q!==null&&(Q=Q.updateQueue,S=Q.lastBaseUpdate,S!==v&&(S===null?Q.firstBaseUpdate=z:S.next=z,Q.lastBaseUpdate=N))}if(f!==null){var X=d.baseState;v=0,Q=z=N=null,S=f;do{var K=S.lane,se=S.eventTime;if((c&K)===K){Q!==null&&(Q=Q.next={eventTime:se,lane:0,tag:S.tag,payload:S.payload,callback:S.callback,next:null});e:{var ue=n,ce=S;switch(K=i,se=a,ce.tag){case 1:if(ue=ce.payload,typeof ue=="function"){X=ue.call(se,X,K);break e}X=ue;break e;case 3:ue.flags=ue.flags&-65537|128;case 0:if(ue=ce.payload,K=typeof ue=="function"?ue.call(se,X,K):ue,K==null)break e;X=ie({},X,K);break e;case 2:ai=!0}}S.callback!==null&&S.lane!==0&&(n.flags|=64,K=d.effects,K===null?d.effects=[S]:K.push(S))}else se={eventTime:se,lane:K,tag:S.tag,payload:S.payload,callback:S.callback,next:null},Q===null?(z=Q=se,N=X):Q=Q.next=se,v|=K;if(S=S.next,S===null){if(S=d.shared.pending,S===null)break;K=S,S=K.next,K.next=null,d.lastBaseUpdate=K,d.shared.pending=null}}while(!0);if(Q===null&&(N=X),d.baseState=N,d.firstBaseUpdate=z,d.lastBaseUpdate=Q,i=d.shared.interleaved,i!==null){d=i;do v|=d.lane,d=d.next;while(d!==i)}else f===null&&(d.shared.lanes=0);ls|=v,n.lanes=v,n.memoizedState=X}}function im(n,i,a){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var c=n[i],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var Ra={},tr=ii(Ra),Ca=ii(Ra),Pa=ii(Ra);function os(n){if(n===Ra)throw Error(t(174));return n}function Ch(n,i){switch(Xe(Pa,i),Xe(Ca,n),Xe(tr,Ra),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:Ns(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=Ns(i,n)}Ze(tr),Xe(tr,i)}function uo(){Ze(tr),Ze(Ca),Ze(Pa)}function sm(n){os(Pa.current);var i=os(tr.current),a=Ns(i,n.type);i!==a&&(Xe(Ca,n),Xe(tr,a))}function Ph(n){Ca.current===n&&(Ze(tr),Ze(Ca))}var nt=ii(0);function hu(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var kh=[];function Nh(){for(var n=0;n<kh.length;n++)kh[n]._workInProgressVersionPrimary=null;kh.length=0}var du=he.ReactCurrentDispatcher,xh=he.ReactCurrentBatchConfig,as=0,rt=null,wt=null,At=null,fu=!1,ka=!1,Na=0,DE=0;function zt(){throw Error(t(321))}function Dh(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!kn(n[a],i[a]))return!1;return!0}function Vh(n,i,a,c,d,f){if(as=f,rt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,du.current=n===null||n.memoizedState===null?ME:bE,n=a(c,d),ka){f=0;do{if(ka=!1,Na=0,25<=f)throw Error(t(301));f+=1,At=wt=null,i.updateQueue=null,du.current=FE,n=a(c,d)}while(ka)}if(du.current=gu,i=wt!==null&&wt.next!==null,as=0,At=wt=rt=null,fu=!1,i)throw Error(t(300));return n}function Oh(){var n=Na!==0;return Na=0,n}function nr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?rt.memoizedState=At=n:At=At.next=n,At}function Tn(){if(wt===null){var n=rt.alternate;n=n!==null?n.memoizedState:null}else n=wt.next;var i=At===null?rt.memoizedState:At.next;if(i!==null)At=i,wt=n;else{if(n===null)throw Error(t(310));wt=n,n={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},At===null?rt.memoizedState=At=n:At=At.next=n}return At}function xa(n,i){return typeof i=="function"?i(n):i}function Lh(n){var i=Tn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=wt,d=c.baseQueue,f=a.pending;if(f!==null){if(d!==null){var v=d.next;d.next=f.next,f.next=v}c.baseQueue=d=f,a.pending=null}if(d!==null){f=d.next,c=c.baseState;var S=v=null,N=null,z=f;do{var Q=z.lane;if((as&Q)===Q)N!==null&&(N=N.next={lane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),c=z.hasEagerState?z.eagerState:n(c,z.action);else{var X={lane:Q,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null};N===null?(S=N=X,v=c):N=N.next=X,rt.lanes|=Q,ls|=Q}z=z.next}while(z!==null&&z!==f);N===null?v=c:N.next=S,kn(c,i.memoizedState)||(Jt=!0),i.memoizedState=c,i.baseState=v,i.baseQueue=N,a.lastRenderedState=c}if(n=a.interleaved,n!==null){d=n;do f=d.lane,rt.lanes|=f,ls|=f,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function Mh(n){var i=Tn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,d=a.pending,f=i.memoizedState;if(d!==null){a.pending=null;var v=d=d.next;do f=n(f,v.action),v=v.next;while(v!==d);kn(f,i.memoizedState)||(Jt=!0),i.memoizedState=f,i.baseQueue===null&&(i.baseState=f),a.lastRenderedState=f}return[f,c]}function om(){}function am(n,i){var a=rt,c=Tn(),d=i(),f=!kn(c.memoizedState,d);if(f&&(c.memoizedState=d,Jt=!0),c=c.queue,bh(cm.bind(null,a,c,n),[n]),c.getSnapshot!==i||f||At!==null&&At.memoizedState.tag&1){if(a.flags|=2048,Da(9,um.bind(null,a,c,d,i),void 0,null),Rt===null)throw Error(t(349));(as&30)!==0||lm(a,i,d)}return d}function lm(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=rt.updateQueue,i===null?(i={lastEffect:null,stores:null},rt.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function um(n,i,a,c){i.value=a,i.getSnapshot=c,hm(i)&&dm(n)}function cm(n,i,a){return a(function(){hm(i)&&dm(n)})}function hm(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!kn(n,a)}catch{return!0}}function dm(n){var i=Rr(n,1);i!==null&&On(i,n,1,-1)}function fm(n){var i=nr();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:n},i.queue=n,n=n.dispatch=LE.bind(null,rt,n),[i.memoizedState,n]}function Da(n,i,a,c){return n={tag:n,create:i,destroy:a,deps:c,next:null},i=rt.updateQueue,i===null?(i={lastEffect:null,stores:null},rt.updateQueue=i,i.lastEffect=n.next=n):(a=i.lastEffect,a===null?i.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,i.lastEffect=n)),n}function pm(){return Tn().memoizedState}function pu(n,i,a,c){var d=nr();rt.flags|=n,d.memoizedState=Da(1|i,a,void 0,c===void 0?null:c)}function mu(n,i,a,c){var d=Tn();c=c===void 0?null:c;var f=void 0;if(wt!==null){var v=wt.memoizedState;if(f=v.destroy,c!==null&&Dh(c,v.deps)){d.memoizedState=Da(i,a,f,c);return}}rt.flags|=n,d.memoizedState=Da(1|i,a,f,c)}function mm(n,i){return pu(8390656,8,n,i)}function bh(n,i){return mu(2048,8,n,i)}function gm(n,i){return mu(4,2,n,i)}function ym(n,i){return mu(4,4,n,i)}function _m(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function vm(n,i,a){return a=a!=null?a.concat([n]):null,mu(4,4,_m.bind(null,i,n),a)}function Fh(){}function wm(n,i){var a=Tn();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&Dh(i,c[1])?c[0]:(a.memoizedState=[n,i],n)}function Em(n,i){var a=Tn();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&Dh(i,c[1])?c[0]:(n=n(),a.memoizedState=[n,i],n)}function Tm(n,i,a){return(as&21)===0?(n.baseState&&(n.baseState=!1,Jt=!0),n.memoizedState=a):(kn(a,i)||(a=ia(),rt.lanes|=a,ls|=a,n.baseState=!0),i)}function VE(n,i){var a=Me;Me=a!==0&&4>a?a:4,n(!0);var c=xh.transition;xh.transition={};try{n(!1),i()}finally{Me=a,xh.transition=c}}function Im(){return Tn().memoizedState}function OE(n,i,a){var c=di(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},Sm(n))Am(i,a);else if(a=tm(n,i,a,c),a!==null){var d=Kt();On(a,n,c,d),Rm(a,i,c)}}function LE(n,i,a){var c=di(n),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(Sm(n))Am(i,d);else{var f=n.alternate;if(n.lanes===0&&(f===null||f.lanes===0)&&(f=i.lastRenderedReducer,f!==null))try{var v=i.lastRenderedState,S=f(v,a);if(d.hasEagerState=!0,d.eagerState=S,kn(S,v)){var N=i.interleaved;N===null?(d.next=d,Ah(i)):(d.next=N.next,N.next=d),i.interleaved=d;return}}catch{}a=tm(n,i,d,c),a!==null&&(d=Kt(),On(a,n,c,d),Rm(a,i,c))}}function Sm(n){var i=n.alternate;return n===rt||i!==null&&i===rt}function Am(n,i){ka=fu=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function Rm(n,i,a){if((a&4194240)!==0){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,oa(n,a)}}var gu={readContext:En,useCallback:zt,useContext:zt,useEffect:zt,useImperativeHandle:zt,useInsertionEffect:zt,useLayoutEffect:zt,useMemo:zt,useReducer:zt,useRef:zt,useState:zt,useDebugValue:zt,useDeferredValue:zt,useTransition:zt,useMutableSource:zt,useSyncExternalStore:zt,useId:zt,unstable_isNewReconciler:!1},ME={readContext:En,useCallback:function(n,i){return nr().memoizedState=[n,i===void 0?null:i],n},useContext:En,useEffect:mm,useImperativeHandle:function(n,i,a){return a=a!=null?a.concat([n]):null,pu(4194308,4,_m.bind(null,i,n),a)},useLayoutEffect:function(n,i){return pu(4194308,4,n,i)},useInsertionEffect:function(n,i){return pu(4,2,n,i)},useMemo:function(n,i){var a=nr();return i=i===void 0?null:i,n=n(),a.memoizedState=[n,i],n},useReducer:function(n,i,a){var c=nr();return i=a!==void 0?a(i):i,c.memoizedState=c.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},c.queue=n,n=n.dispatch=OE.bind(null,rt,n),[c.memoizedState,n]},useRef:function(n){var i=nr();return n={current:n},i.memoizedState=n},useState:fm,useDebugValue:Fh,useDeferredValue:function(n){return nr().memoizedState=n},useTransition:function(){var n=fm(!1),i=n[0];return n=VE.bind(null,n[1]),nr().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,a){var c=rt,d=nr();if(tt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=i(),Rt===null)throw Error(t(349));(as&30)!==0||lm(c,i,a)}d.memoizedState=a;var f={value:a,getSnapshot:i};return d.queue=f,mm(cm.bind(null,c,f,n),[n]),c.flags|=2048,Da(9,um.bind(null,c,f,a,i),void 0,null),a},useId:function(){var n=nr(),i=Rt.identifierPrefix;if(tt){var a=Ar,c=Sr;a=(c&~(1<<32-sn(c)-1)).toString(32)+a,i=":"+i+"R"+a,a=Na++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=DE++,i=":"+i+"r"+a.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},bE={readContext:En,useCallback:wm,useContext:En,useEffect:bh,useImperativeHandle:vm,useInsertionEffect:gm,useLayoutEffect:ym,useMemo:Em,useReducer:Lh,useRef:pm,useState:function(){return Lh(xa)},useDebugValue:Fh,useDeferredValue:function(n){var i=Tn();return Tm(i,wt.memoizedState,n)},useTransition:function(){var n=Lh(xa)[0],i=Tn().memoizedState;return[n,i]},useMutableSource:om,useSyncExternalStore:am,useId:Im,unstable_isNewReconciler:!1},FE={readContext:En,useCallback:wm,useContext:En,useEffect:bh,useImperativeHandle:vm,useInsertionEffect:gm,useLayoutEffect:ym,useMemo:Em,useReducer:Mh,useRef:pm,useState:function(){return Mh(xa)},useDebugValue:Fh,useDeferredValue:function(n){var i=Tn();return wt===null?i.memoizedState=n:Tm(i,wt.memoizedState,n)},useTransition:function(){var n=Mh(xa)[0],i=Tn().memoizedState;return[n,i]},useMutableSource:om,useSyncExternalStore:am,useId:Im,unstable_isNewReconciler:!1};function xn(n,i){if(n&&n.defaultProps){i=ie({},i),n=n.defaultProps;for(var a in n)i[a]===void 0&&(i[a]=n[a]);return i}return i}function Uh(n,i,a,c){i=n.memoizedState,a=a(c,i),a=a==null?i:ie({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var yu={isMounted:function(n){return(n=n._reactInternals)?Cn(n)===n:!1},enqueueSetState:function(n,i,a){n=n._reactInternals;var c=Kt(),d=di(n),f=Cr(c,d);f.payload=i,a!=null&&(f.callback=a),i=li(n,f,d),i!==null&&(On(i,n,d,c),uu(i,n,d))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var c=Kt(),d=di(n),f=Cr(c,d);f.tag=1,f.payload=i,a!=null&&(f.callback=a),i=li(n,f,d),i!==null&&(On(i,n,d,c),uu(i,n,d))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=Kt(),c=di(n),d=Cr(a,c);d.tag=2,i!=null&&(d.callback=i),i=li(n,d,c),i!==null&&(On(i,n,c,a),uu(i,n,c))}};function Cm(n,i,a,c,d,f,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,f,v):i.prototype&&i.prototype.isPureReactComponent?!_a(a,c)||!_a(d,f):!0}function Pm(n,i,a){var c=!1,d=si,f=i.contextType;return typeof f=="object"&&f!==null?f=En(f):(d=Yt(i)?ns:jt.current,c=i.contextTypes,f=(c=c!=null)?no(n,d):si),i=new i(a,f),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=yu,n.stateNode=i,i._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=f),i}function km(n,i,a,c){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,c),i.state!==n&&yu.enqueueReplaceState(i,i.state,null)}function jh(n,i,a,c){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs={},Rh(n);var f=i.contextType;typeof f=="object"&&f!==null?d.context=En(f):(f=Yt(i)?ns:jt.current,d.context=no(n,f)),d.state=n.memoizedState,f=i.getDerivedStateFromProps,typeof f=="function"&&(Uh(n,i,f,a),d.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(i=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),i!==d.state&&yu.enqueueReplaceState(d,d.state,null),cu(n,a,d,c),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function co(n,i){try{var a="",c=i;do a+=ke(c),c=c.return;while(c);var d=a}catch(f){d=`
Error generating stack: `+f.message+`
`+f.stack}return{value:n,source:i,stack:d,digest:null}}function zh(n,i,a){return{value:n,source:null,stack:a??null,digest:i??null}}function Bh(n,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var UE=typeof WeakMap=="function"?WeakMap:Map;function Nm(n,i,a){a=Cr(-1,a),a.tag=3,a.payload={element:null};var c=i.value;return a.callback=function(){Su||(Su=!0,rd=c),Bh(n,i)},a}function xm(n,i,a){a=Cr(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=i.value;a.payload=function(){return c(d)},a.callback=function(){Bh(n,i)}}var f=n.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(a.callback=function(){Bh(n,i),typeof c!="function"&&(ci===null?ci=new Set([this]):ci.add(this));var v=i.stack;this.componentDidCatch(i.value,{componentStack:v!==null?v:""})}),a}function Dm(n,i,a){var c=n.pingCache;if(c===null){c=n.pingCache=new UE;var d=new Set;c.set(i,d)}else d=c.get(i),d===void 0&&(d=new Set,c.set(i,d));d.has(a)||(d.add(a),n=ZE.bind(null,n,i,a),i.then(n,n))}function Vm(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function Om(n,i,a,c,d){return(n.mode&1)===0?(n===i?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=Cr(-1,1),i.tag=2,li(a,i,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=d,n)}var jE=he.ReactCurrentOwner,Jt=!1;function Gt(n,i,a,c){i.child=n===null?em(i,null,a,c):oo(i,n.child,a,c)}function Lm(n,i,a,c,d){a=a.render;var f=i.ref;return lo(i,d),c=Vh(n,i,a,c,f,d),a=Oh(),n!==null&&!Jt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~d,Pr(n,i,d)):(tt&&a&&gh(i),i.flags|=1,Gt(n,i,c,d),i.child)}function Mm(n,i,a,c,d){if(n===null){var f=a.type;return typeof f=="function"&&!cd(f)&&f.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=f,bm(n,i,f,c,d)):(n=Nu(a.type,null,c,i,i.mode,d),n.ref=i.ref,n.return=i,i.child=n)}if(f=n.child,(n.lanes&d)===0){var v=f.memoizedProps;if(a=a.compare,a=a!==null?a:_a,a(v,c)&&n.ref===i.ref)return Pr(n,i,d)}return i.flags|=1,n=pi(f,c),n.ref=i.ref,n.return=i,i.child=n}function bm(n,i,a,c,d){if(n!==null){var f=n.memoizedProps;if(_a(f,c)&&n.ref===i.ref)if(Jt=!1,i.pendingProps=c=f,(n.lanes&d)!==0)(n.flags&131072)!==0&&(Jt=!0);else return i.lanes=n.lanes,Pr(n,i,d)}return $h(n,i,a,c,d)}function Fm(n,i,a){var c=i.pendingProps,d=c.children,f=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xe(fo,dn),dn|=a;else{if((a&1073741824)===0)return n=f!==null?f.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,Xe(fo,dn),dn|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=f!==null?f.baseLanes:a,Xe(fo,dn),dn|=c}else f!==null?(c=f.baseLanes|a,i.memoizedState=null):c=a,Xe(fo,dn),dn|=c;return Gt(n,i,d,a),i.child}function Um(n,i){var a=i.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function $h(n,i,a,c,d){var f=Yt(a)?ns:jt.current;return f=no(i,f),lo(i,d),a=Vh(n,i,a,c,f,d),c=Oh(),n!==null&&!Jt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~d,Pr(n,i,d)):(tt&&c&&gh(i),i.flags|=1,Gt(n,i,a,d),i.child)}function jm(n,i,a,c,d){if(Yt(a)){var f=!0;tu(i)}else f=!1;if(lo(i,d),i.stateNode===null)vu(n,i),Pm(i,a,c),jh(i,a,c,d),c=!0;else if(n===null){var v=i.stateNode,S=i.memoizedProps;v.props=S;var N=v.context,z=a.contextType;typeof z=="object"&&z!==null?z=En(z):(z=Yt(a)?ns:jt.current,z=no(i,z));var Q=a.getDerivedStateFromProps,X=typeof Q=="function"||typeof v.getSnapshotBeforeUpdate=="function";X||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==c||N!==z)&&km(i,v,c,z),ai=!1;var K=i.memoizedState;v.state=K,cu(i,c,v,d),N=i.memoizedState,S!==c||K!==N||Xt.current||ai?(typeof Q=="function"&&(Uh(i,a,Q,c),N=i.memoizedState),(S=ai||Cm(i,a,S,c,K,N,z))?(X||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(i.flags|=4194308)):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=N),v.props=c,v.state=N,v.context=z,c=S):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{v=i.stateNode,nm(n,i),S=i.memoizedProps,z=i.type===i.elementType?S:xn(i.type,S),v.props=z,X=i.pendingProps,K=v.context,N=a.contextType,typeof N=="object"&&N!==null?N=En(N):(N=Yt(a)?ns:jt.current,N=no(i,N));var se=a.getDerivedStateFromProps;(Q=typeof se=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==X||K!==N)&&km(i,v,c,N),ai=!1,K=i.memoizedState,v.state=K,cu(i,c,v,d);var ue=i.memoizedState;S!==X||K!==ue||Xt.current||ai?(typeof se=="function"&&(Uh(i,a,se,c),ue=i.memoizedState),(z=ai||Cm(i,a,z,c,K,ue,N)||!1)?(Q||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,ue,N),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,ue,N)),typeof v.componentDidUpdate=="function"&&(i.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof v.componentDidUpdate!="function"||S===n.memoizedProps&&K===n.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&K===n.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=ue),v.props=c,v.state=ue,v.context=N,c=z):(typeof v.componentDidUpdate!="function"||S===n.memoizedProps&&K===n.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&K===n.memoizedState||(i.flags|=1024),c=!1)}return qh(n,i,a,c,f,d)}function qh(n,i,a,c,d,f){Um(n,i);var v=(i.flags&128)!==0;if(!c&&!v)return d&&Wp(i,a,!1),Pr(n,i,f);c=i.stateNode,jE.current=i;var S=v&&typeof a.getDerivedStateFromError!="function"?null:c.render();return i.flags|=1,n!==null&&v?(i.child=oo(i,n.child,null,f),i.child=oo(i,null,S,f)):Gt(n,i,S,f),i.memoizedState=c.state,d&&Wp(i,a,!0),i.child}function zm(n){var i=n.stateNode;i.pendingContext?$p(n,i.pendingContext,i.pendingContext!==i.context):i.context&&$p(n,i.context,!1),Ch(n,i.containerInfo)}function Bm(n,i,a,c,d){return so(),wh(d),i.flags|=256,Gt(n,i,a,c),i.child}var Wh={dehydrated:null,treeContext:null,retryLane:0};function Hh(n){return{baseLanes:n,cachePool:null,transitions:null}}function $m(n,i,a){var c=i.pendingProps,d=nt.current,f=!1,v=(i.flags&128)!==0,S;if((S=v)||(S=n!==null&&n.memoizedState===null?!1:(d&2)!==0),S?(f=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),Xe(nt,d&1),n===null)return vh(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((i.mode&1)===0?i.lanes=1:n.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(v=c.children,n=c.fallback,f?(c=i.mode,f=i.child,v={mode:"hidden",children:v},(c&1)===0&&f!==null?(f.childLanes=0,f.pendingProps=v):f=xu(v,c,0,null),n=ds(n,c,a,null),f.return=i,n.return=i,f.sibling=n,i.child=f,i.child.memoizedState=Hh(a),i.memoizedState=Wh,n):Gh(i,v));if(d=n.memoizedState,d!==null&&(S=d.dehydrated,S!==null))return zE(n,i,v,c,S,d,a);if(f){f=c.fallback,v=i.mode,d=n.child,S=d.sibling;var N={mode:"hidden",children:c.children};return(v&1)===0&&i.child!==d?(c=i.child,c.childLanes=0,c.pendingProps=N,i.deletions=null):(c=pi(d,N),c.subtreeFlags=d.subtreeFlags&14680064),S!==null?f=pi(S,f):(f=ds(f,v,a,null),f.flags|=2),f.return=i,c.return=i,c.sibling=f,i.child=c,c=f,f=i.child,v=n.child.memoizedState,v=v===null?Hh(a):{baseLanes:v.baseLanes|a,cachePool:null,transitions:v.transitions},f.memoizedState=v,f.childLanes=n.childLanes&~a,i.memoizedState=Wh,c}return f=n.child,n=f.sibling,c=pi(f,{mode:"visible",children:c.children}),(i.mode&1)===0&&(c.lanes=a),c.return=i,c.sibling=null,n!==null&&(a=i.deletions,a===null?(i.deletions=[n],i.flags|=16):a.push(n)),i.child=c,i.memoizedState=null,c}function Gh(n,i){return i=xu({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function _u(n,i,a,c){return c!==null&&wh(c),oo(i,n.child,null,a),n=Gh(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function zE(n,i,a,c,d,f,v){if(a)return i.flags&256?(i.flags&=-257,c=zh(Error(t(422))),_u(n,i,v,c)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(f=c.fallback,d=i.mode,c=xu({mode:"visible",children:c.children},d,0,null),f=ds(f,d,v,null),f.flags|=2,c.return=i,f.return=i,c.sibling=f,i.child=c,(i.mode&1)!==0&&oo(i,n.child,null,v),i.child.memoizedState=Hh(v),i.memoizedState=Wh,f);if((i.mode&1)===0)return _u(n,i,v,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var S=c.dgst;return c=S,f=Error(t(419)),c=zh(f,c,void 0),_u(n,i,v,c)}if(S=(v&n.childLanes)!==0,Jt||S){if(c=Rt,c!==null){switch(v&-v){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|v))!==0?0:d,d!==0&&d!==f.retryLane&&(f.retryLane=d,Rr(n,d),On(c,n,d,-1))}return ud(),c=zh(Error(t(421))),_u(n,i,v,c)}return d.data==="$?"?(i.flags|=128,i.child=n.child,i=eT.bind(null,n),d._reactRetry=i,null):(n=f.treeContext,hn=ri(d.nextSibling),cn=i,tt=!0,Nn=null,n!==null&&(vn[wn++]=Sr,vn[wn++]=Ar,vn[wn++]=rs,Sr=n.id,Ar=n.overflow,rs=i),i=Gh(i,c.children),i.flags|=4096,i)}function qm(n,i,a){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i),Sh(n.return,i,a)}function Kh(n,i,a,c,d){var f=n.memoizedState;f===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(f.isBackwards=i,f.rendering=null,f.renderingStartTime=0,f.last=c,f.tail=a,f.tailMode=d)}function Wm(n,i,a){var c=i.pendingProps,d=c.revealOrder,f=c.tail;if(Gt(n,i,c.children,a),c=nt.current,(c&2)!==0)c=c&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&qm(n,a,i);else if(n.tag===19)qm(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(Xe(nt,c),(i.mode&1)===0)i.memoizedState=null;else switch(d){case"forwards":for(a=i.child,d=null;a!==null;)n=a.alternate,n!==null&&hu(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=i.child,i.child=null):(d=a.sibling,a.sibling=null),Kh(i,!1,d,a,f);break;case"backwards":for(a=null,d=i.child,i.child=null;d!==null;){if(n=d.alternate,n!==null&&hu(n)===null){i.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}Kh(i,!0,a,null,f);break;case"together":Kh(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function vu(n,i){(i.mode&1)===0&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function Pr(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),ls|=i.lanes,(a&i.childLanes)===0)return null;if(n!==null&&i.child!==n.child)throw Error(t(153));if(i.child!==null){for(n=i.child,a=pi(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=pi(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function BE(n,i,a){switch(i.tag){case 3:zm(i),so();break;case 5:sm(i);break;case 1:Yt(i.type)&&tu(i);break;case 4:Ch(i,i.stateNode.containerInfo);break;case 10:var c=i.type._context,d=i.memoizedProps.value;Xe(au,c._currentValue),c._currentValue=d;break;case 13:if(c=i.memoizedState,c!==null)return c.dehydrated!==null?(Xe(nt,nt.current&1),i.flags|=128,null):(a&i.child.childLanes)!==0?$m(n,i,a):(Xe(nt,nt.current&1),n=Pr(n,i,a),n!==null?n.sibling:null);Xe(nt,nt.current&1);break;case 19:if(c=(a&i.childLanes)!==0,(n.flags&128)!==0){if(c)return Wm(n,i,a);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Xe(nt,nt.current),c)break;return null;case 22:case 23:return i.lanes=0,Fm(n,i,a)}return Pr(n,i,a)}var Hm,Qh,Gm,Km;Hm=function(n,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Qh=function(){},Gm=function(n,i,a,c){var d=n.memoizedProps;if(d!==c){n=i.stateNode,os(tr.current);var f=null;switch(a){case"input":d=Ps(n,d),c=Ps(n,c),f=[];break;case"select":d=ie({},d,{value:void 0}),c=ie({},c,{value:void 0}),f=[];break;case"textarea":d=Go(n,d),c=Go(n,c),f=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=Jl)}Rn(a,c);var v;a=null;for(z in d)if(!c.hasOwnProperty(z)&&d.hasOwnProperty(z)&&d[z]!=null)if(z==="style"){var S=d[z];for(v in S)S.hasOwnProperty(v)&&(a||(a={}),a[v]="")}else z!=="dangerouslySetInnerHTML"&&z!=="children"&&z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&z!=="autoFocus"&&(o.hasOwnProperty(z)?f||(f=[]):(f=f||[]).push(z,null));for(z in c){var N=c[z];if(S=d?.[z],c.hasOwnProperty(z)&&N!==S&&(N!=null||S!=null))if(z==="style")if(S){for(v in S)!S.hasOwnProperty(v)||N&&N.hasOwnProperty(v)||(a||(a={}),a[v]="");for(v in N)N.hasOwnProperty(v)&&S[v]!==N[v]&&(a||(a={}),a[v]=N[v])}else a||(f||(f=[]),f.push(z,a)),a=N;else z==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,S=S?S.__html:void 0,N!=null&&S!==N&&(f=f||[]).push(z,N)):z==="children"?typeof N!="string"&&typeof N!="number"||(f=f||[]).push(z,""+N):z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&(o.hasOwnProperty(z)?(N!=null&&z==="onScroll"&&Je("scroll",n),f||S===N||(f=[])):(f=f||[]).push(z,N))}a&&(f=f||[]).push("style",a);var z=f;(i.updateQueue=z)&&(i.flags|=4)}},Km=function(n,i,a,c){a!==c&&(i.flags|=4)};function Va(n,i){if(!tt)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Bt(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(i)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=a,i}function $E(n,i,a){var c=i.pendingProps;switch(yh(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bt(i),null;case 1:return Yt(i.type)&&eu(),Bt(i),null;case 3:return c=i.stateNode,uo(),Ze(Xt),Ze(jt),Nh(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(su(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Nn!==null&&(od(Nn),Nn=null))),Qh(n,i),Bt(i),null;case 5:Ph(i);var d=os(Pa.current);if(a=i.type,n!==null&&i.stateNode!=null)Gm(n,i,a,c,d),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!c){if(i.stateNode===null)throw Error(t(166));return Bt(i),null}if(n=os(tr.current),su(i)){c=i.stateNode,a=i.type;var f=i.memoizedProps;switch(c[er]=i,c[Ia]=f,n=(i.mode&1)!==0,a){case"dialog":Je("cancel",c),Je("close",c);break;case"iframe":case"object":case"embed":Je("load",c);break;case"video":case"audio":for(d=0;d<wa.length;d++)Je(wa[d],c);break;case"source":Je("error",c);break;case"img":case"image":case"link":Je("error",c),Je("load",c);break;case"details":Je("toggle",c);break;case"input":Il(c,f),Je("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!f.multiple},Je("invalid",c);break;case"textarea":Ko(c,f),Je("invalid",c)}Rn(a,f),d=null;for(var v in f)if(f.hasOwnProperty(v)){var S=f[v];v==="children"?typeof S=="string"?c.textContent!==S&&(f.suppressHydrationWarning!==!0&&Yl(c.textContent,S,n),d=["children",S]):typeof S=="number"&&c.textContent!==""+S&&(f.suppressHydrationWarning!==!0&&Yl(c.textContent,S,n),d=["children",""+S]):o.hasOwnProperty(v)&&S!=null&&v==="onScroll"&&Je("scroll",c)}switch(a){case"input":gn(c),Ho(c,f,!0);break;case"textarea":gn(c),zr(c);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(c.onclick=Jl)}c=d,i.updateQueue=c,c!==null&&(i.flags|=4)}else{v=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Qo(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=v.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=v.createElement(a,{is:c.is}):(n=v.createElement(a),a==="select"&&(v=n,c.multiple?v.multiple=!0:c.size&&(v.size=c.size))):n=v.createElementNS(n,a),n[er]=i,n[Ia]=c,Hm(n,i,!1,!1),i.stateNode=n;e:{switch(v=Ds(a,c),a){case"dialog":Je("cancel",n),Je("close",n),d=c;break;case"iframe":case"object":case"embed":Je("load",n),d=c;break;case"video":case"audio":for(d=0;d<wa.length;d++)Je(wa[d],n);d=c;break;case"source":Je("error",n),d=c;break;case"img":case"image":case"link":Je("error",n),Je("load",n),d=c;break;case"details":Je("toggle",n),d=c;break;case"input":Il(n,c),d=Ps(n,c),Je("invalid",n);break;case"option":d=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},d=ie({},c,{value:void 0}),Je("invalid",n);break;case"textarea":Ko(n,c),d=Go(n,c),Je("invalid",n);break;default:d=c}Rn(a,d),S=d;for(f in S)if(S.hasOwnProperty(f)){var N=S[f];f==="style"?xs(n,N):f==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,N!=null&&Al(n,N)):f==="children"?typeof N=="string"?(a!=="textarea"||N!=="")&&zi(n,N):typeof N=="number"&&zi(n,""+N):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(o.hasOwnProperty(f)?N!=null&&f==="onScroll"&&Je("scroll",n):N!=null&&te(n,f,N,v))}switch(a){case"input":gn(n),Ho(n,c,!1);break;case"textarea":gn(n),zr(n);break;case"option":c.value!=null&&n.setAttribute("value",""+Le(c.value));break;case"select":n.multiple=!!c.multiple,f=c.value,f!=null?An(n,!!c.multiple,f,!1):c.defaultValue!=null&&An(n,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=Jl)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Bt(i),null;case 6:if(n&&i.stateNode!=null)Km(n,i,n.memoizedProps,c);else{if(typeof c!="string"&&i.stateNode===null)throw Error(t(166));if(a=os(Pa.current),os(tr.current),su(i)){if(c=i.stateNode,a=i.memoizedProps,c[er]=i,(f=c.nodeValue!==a)&&(n=cn,n!==null))switch(n.tag){case 3:Yl(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Yl(c.nodeValue,a,(n.mode&1)!==0)}f&&(i.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[er]=i,i.stateNode=c}return Bt(i),null;case 13:if(Ze(nt),c=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(tt&&hn!==null&&(i.mode&1)!==0&&(i.flags&128)===0)Yp(),so(),i.flags|=98560,f=!1;else if(f=su(i),c!==null&&c.dehydrated!==null){if(n===null){if(!f)throw Error(t(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(t(317));f[er]=i}else so(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Bt(i),f=!1}else Nn!==null&&(od(Nn),Nn=null),f=!0;if(!f)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=a,i):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(i.child.flags|=8192,(i.mode&1)!==0&&(n===null||(nt.current&1)!==0?Et===0&&(Et=3):ud())),i.updateQueue!==null&&(i.flags|=4),Bt(i),null);case 4:return uo(),Qh(n,i),n===null&&Ea(i.stateNode.containerInfo),Bt(i),null;case 10:return Ih(i.type._context),Bt(i),null;case 17:return Yt(i.type)&&eu(),Bt(i),null;case 19:if(Ze(nt),f=i.memoizedState,f===null)return Bt(i),null;if(c=(i.flags&128)!==0,v=f.rendering,v===null)if(c)Va(f,!1);else{if(Et!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(v=hu(n),v!==null){for(i.flags|=128,Va(f,!1),c=v.updateQueue,c!==null&&(i.updateQueue=c,i.flags|=4),i.subtreeFlags=0,c=a,a=i.child;a!==null;)f=a,n=c,f.flags&=14680066,v=f.alternate,v===null?(f.childLanes=0,f.lanes=n,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=v.childLanes,f.lanes=v.lanes,f.child=v.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=v.memoizedProps,f.memoizedState=v.memoizedState,f.updateQueue=v.updateQueue,f.type=v.type,n=v.dependencies,f.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Xe(nt,nt.current&1|2),i.child}n=n.sibling}f.tail!==null&&Ye()>po&&(i.flags|=128,c=!0,Va(f,!1),i.lanes=4194304)}else{if(!c)if(n=hu(v),n!==null){if(i.flags|=128,c=!0,a=n.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),Va(f,!0),f.tail===null&&f.tailMode==="hidden"&&!v.alternate&&!tt)return Bt(i),null}else 2*Ye()-f.renderingStartTime>po&&a!==1073741824&&(i.flags|=128,c=!0,Va(f,!1),i.lanes=4194304);f.isBackwards?(v.sibling=i.child,i.child=v):(a=f.last,a!==null?a.sibling=v:i.child=v,f.last=v)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=Ye(),i.sibling=null,a=nt.current,Xe(nt,c?a&1|2:a&1),i):(Bt(i),null);case 22:case 23:return ld(),c=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(i.flags|=8192),c&&(i.mode&1)!==0?(dn&1073741824)!==0&&(Bt(i),i.subtreeFlags&6&&(i.flags|=8192)):Bt(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function qE(n,i){switch(yh(i),i.tag){case 1:return Yt(i.type)&&eu(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return uo(),Ze(Xt),Ze(jt),Nh(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 5:return Ph(i),null;case 13:if(Ze(nt),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(t(340));so()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return Ze(nt),null;case 4:return uo(),null;case 10:return Ih(i.type._context),null;case 22:case 23:return ld(),null;case 24:return null;default:return null}}var wu=!1,$t=!1,WE=typeof WeakSet=="function"?WeakSet:Set,ae=null;function ho(n,i){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){at(n,i,c)}else a.current=null}function Xh(n,i,a){try{a()}catch(c){at(n,i,c)}}var Qm=!1;function HE(n,i){if(lh=vr,n=Cp(),eh(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,f=c.focusNode;c=c.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var v=0,S=-1,N=-1,z=0,Q=0,X=n,K=null;t:for(;;){for(var se;X!==a||d!==0&&X.nodeType!==3||(S=v+d),X!==f||c!==0&&X.nodeType!==3||(N=v+c),X.nodeType===3&&(v+=X.nodeValue.length),(se=X.firstChild)!==null;)K=X,X=se;for(;;){if(X===n)break t;if(K===a&&++z===d&&(S=v),K===f&&++Q===c&&(N=v),(se=X.nextSibling)!==null)break;X=K,K=X.parentNode}X=se}a=S===-1||N===-1?null:{start:S,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(uh={focusedElem:n,selectionRange:a},vr=!1,ae=i;ae!==null;)if(i=ae,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,ae=n;else for(;ae!==null;){i=ae;try{var ue=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(ue!==null){var ce=ue.memoizedProps,ct=ue.memoizedState,M=i.stateNode,V=M.getSnapshotBeforeUpdate(i.elementType===i.type?ce:xn(i.type,ce),ct);M.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var U=i.stateNode.containerInfo;U.nodeType===1?U.textContent="":U.nodeType===9&&U.documentElement&&U.removeChild(U.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(J){at(i,i.return,J)}if(n=i.sibling,n!==null){n.return=i.return,ae=n;break}ae=i.return}return ue=Qm,Qm=!1,ue}function Oa(n,i,a){var c=i.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&n)===n){var f=d.destroy;d.destroy=void 0,f!==void 0&&Xh(i,a,f)}d=d.next}while(d!==c)}}function Eu(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==i)}}function Yh(n){var i=n.ref;if(i!==null){var a=n.stateNode;n.tag,n=a,typeof i=="function"?i(n):i.current=n}}function Xm(n){var i=n.alternate;i!==null&&(n.alternate=null,Xm(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[er],delete i[Ia],delete i[fh],delete i[PE],delete i[kE])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Ym(n){return n.tag===5||n.tag===3||n.tag===4}function Jm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Ym(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Jh(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(n,i):a.insertBefore(n,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(n,a)):(i=a,i.appendChild(n)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Jl));else if(c!==4&&(n=n.child,n!==null))for(Jh(n,i,a),n=n.sibling;n!==null;)Jh(n,i,a),n=n.sibling}function Zh(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(Zh(n,i,a),n=n.sibling;n!==null;)Zh(n,i,a),n=n.sibling}var Dt=null,Dn=!1;function ui(n,i,a){for(a=a.child;a!==null;)Zm(n,i,a),a=a.sibling}function Zm(n,i,a){if(rn&&typeof rn.onCommitFiberUnmount=="function")try{rn.onCommitFiberUnmount(Hi,a)}catch{}switch(a.tag){case 5:$t||ho(a,i);case 6:var c=Dt,d=Dn;Dt=null,ui(n,i,a),Dt=c,Dn=d,Dt!==null&&(Dn?(n=Dt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Dt.removeChild(a.stateNode));break;case 18:Dt!==null&&(Dn?(n=Dt,a=a.stateNode,n.nodeType===8?dh(n.parentNode,a):n.nodeType===1&&dh(n,a),Zr(n)):dh(Dt,a.stateNode));break;case 4:c=Dt,d=Dn,Dt=a.stateNode.containerInfo,Dn=!0,ui(n,i,a),Dt=c,Dn=d;break;case 0:case 11:case 14:case 15:if(!$t&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var f=d,v=f.destroy;f=f.tag,v!==void 0&&((f&2)!==0||(f&4)!==0)&&Xh(a,i,v),d=d.next}while(d!==c)}ui(n,i,a);break;case 1:if(!$t&&(ho(a,i),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(S){at(a,i,S)}ui(n,i,a);break;case 21:ui(n,i,a);break;case 22:a.mode&1?($t=(c=$t)||a.memoizedState!==null,ui(n,i,a),$t=c):ui(n,i,a);break;default:ui(n,i,a)}}function eg(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new WE),i.forEach(function(c){var d=tT.bind(null,n,c);a.has(c)||(a.add(c),c.then(d,d))})}}function Vn(n,i){var a=i.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var f=n,v=i,S=v;e:for(;S!==null;){switch(S.tag){case 5:Dt=S.stateNode,Dn=!1;break e;case 3:Dt=S.stateNode.containerInfo,Dn=!0;break e;case 4:Dt=S.stateNode.containerInfo,Dn=!0;break e}S=S.return}if(Dt===null)throw Error(t(160));Zm(f,v,d),Dt=null,Dn=!1;var N=d.alternate;N!==null&&(N.return=null),d.return=null}catch(z){at(d,i,z)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)tg(i,n),i=i.sibling}function tg(n,i){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Vn(i,n),rr(n),c&4){try{Oa(3,n,n.return),Eu(3,n)}catch(ce){at(n,n.return,ce)}try{Oa(5,n,n.return)}catch(ce){at(n,n.return,ce)}}break;case 1:Vn(i,n),rr(n),c&512&&a!==null&&ho(a,a.return);break;case 5:if(Vn(i,n),rr(n),c&512&&a!==null&&ho(a,a.return),n.flags&32){var d=n.stateNode;try{zi(d,"")}catch(ce){at(n,n.return,ce)}}if(c&4&&(d=n.stateNode,d!=null)){var f=n.memoizedProps,v=a!==null?a.memoizedProps:f,S=n.type,N=n.updateQueue;if(n.updateQueue=null,N!==null)try{S==="input"&&f.type==="radio"&&f.name!=null&&ks(d,f),Ds(S,v);var z=Ds(S,f);for(v=0;v<N.length;v+=2){var Q=N[v],X=N[v+1];Q==="style"?xs(d,X):Q==="dangerouslySetInnerHTML"?Al(d,X):Q==="children"?zi(d,X):te(d,Q,X,z)}switch(S){case"input":ji(d,f);break;case"textarea":Sl(d,f);break;case"select":var K=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!f.multiple;var se=f.value;se!=null?An(d,!!f.multiple,se,!1):K!==!!f.multiple&&(f.defaultValue!=null?An(d,!!f.multiple,f.defaultValue,!0):An(d,!!f.multiple,f.multiple?[]:"",!1))}d[Ia]=f}catch(ce){at(n,n.return,ce)}}break;case 6:if(Vn(i,n),rr(n),c&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,f=n.memoizedProps;try{d.nodeValue=f}catch(ce){at(n,n.return,ce)}}break;case 3:if(Vn(i,n),rr(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Zr(i.containerInfo)}catch(ce){at(n,n.return,ce)}break;case 4:Vn(i,n),rr(n);break;case 13:Vn(i,n),rr(n),d=n.child,d.flags&8192&&(f=d.memoizedState!==null,d.stateNode.isHidden=f,!f||d.alternate!==null&&d.alternate.memoizedState!==null||(nd=Ye())),c&4&&eg(n);break;case 22:if(Q=a!==null&&a.memoizedState!==null,n.mode&1?($t=(z=$t)||Q,Vn(i,n),$t=z):Vn(i,n),rr(n),c&8192){if(z=n.memoizedState!==null,(n.stateNode.isHidden=z)&&!Q&&(n.mode&1)!==0)for(ae=n,Q=n.child;Q!==null;){for(X=ae=Q;ae!==null;){switch(K=ae,se=K.child,K.tag){case 0:case 11:case 14:case 15:Oa(4,K,K.return);break;case 1:ho(K,K.return);var ue=K.stateNode;if(typeof ue.componentWillUnmount=="function"){c=K,a=K.return;try{i=c,ue.props=i.memoizedProps,ue.state=i.memoizedState,ue.componentWillUnmount()}catch(ce){at(c,a,ce)}}break;case 5:ho(K,K.return);break;case 22:if(K.memoizedState!==null){ig(X);continue}}se!==null?(se.return=K,ae=se):ig(X)}Q=Q.sibling}e:for(Q=null,X=n;;){if(X.tag===5){if(Q===null){Q=X;try{d=X.stateNode,z?(f=d.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(S=X.stateNode,N=X.memoizedProps.style,v=N!=null&&N.hasOwnProperty("display")?N.display:null,S.style.display=qr("display",v))}catch(ce){at(n,n.return,ce)}}}else if(X.tag===6){if(Q===null)try{X.stateNode.nodeValue=z?"":X.memoizedProps}catch(ce){at(n,n.return,ce)}}else if((X.tag!==22&&X.tag!==23||X.memoizedState===null||X===n)&&X.child!==null){X.child.return=X,X=X.child;continue}if(X===n)break e;for(;X.sibling===null;){if(X.return===null||X.return===n)break e;Q===X&&(Q=null),X=X.return}Q===X&&(Q=null),X.sibling.return=X.return,X=X.sibling}}break;case 19:Vn(i,n),rr(n),c&4&&eg(n);break;case 21:break;default:Vn(i,n),rr(n)}}function rr(n){var i=n.flags;if(i&2){try{e:{for(var a=n.return;a!==null;){if(Ym(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(zi(d,""),c.flags&=-33);var f=Jm(n);Zh(n,f,d);break;case 3:case 4:var v=c.stateNode.containerInfo,S=Jm(n);Jh(n,S,v);break;default:throw Error(t(161))}}catch(N){at(n,n.return,N)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function GE(n,i,a){ae=n,ng(n)}function ng(n,i,a){for(var c=(n.mode&1)!==0;ae!==null;){var d=ae,f=d.child;if(d.tag===22&&c){var v=d.memoizedState!==null||wu;if(!v){var S=d.alternate,N=S!==null&&S.memoizedState!==null||$t;S=wu;var z=$t;if(wu=v,($t=N)&&!z)for(ae=d;ae!==null;)v=ae,N=v.child,v.tag===22&&v.memoizedState!==null?sg(d):N!==null?(N.return=v,ae=N):sg(d);for(;f!==null;)ae=f,ng(f),f=f.sibling;ae=d,wu=S,$t=z}rg(n)}else(d.subtreeFlags&8772)!==0&&f!==null?(f.return=d,ae=f):rg(n)}}function rg(n){for(;ae!==null;){var i=ae;if((i.flags&8772)!==0){var a=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:$t||Eu(5,i);break;case 1:var c=i.stateNode;if(i.flags&4&&!$t)if(a===null)c.componentDidMount();else{var d=i.elementType===i.type?a.memoizedProps:xn(i.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var f=i.updateQueue;f!==null&&im(i,f,c);break;case 3:var v=i.updateQueue;if(v!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}im(i,v,a)}break;case 5:var S=i.stateNode;if(a===null&&i.flags&4){a=S;var N=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":N.autoFocus&&a.focus();break;case"img":N.src&&(a.src=N.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var z=i.alternate;if(z!==null){var Q=z.memoizedState;if(Q!==null){var X=Q.dehydrated;X!==null&&Zr(X)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}$t||i.flags&512&&Yh(i)}catch(K){at(i,i.return,K)}}if(i===n){ae=null;break}if(a=i.sibling,a!==null){a.return=i.return,ae=a;break}ae=i.return}}function ig(n){for(;ae!==null;){var i=ae;if(i===n){ae=null;break}var a=i.sibling;if(a!==null){a.return=i.return,ae=a;break}ae=i.return}}function sg(n){for(;ae!==null;){var i=ae;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{Eu(4,i)}catch(N){at(i,a,N)}break;case 1:var c=i.stateNode;if(typeof c.componentDidMount=="function"){var d=i.return;try{c.componentDidMount()}catch(N){at(i,d,N)}}var f=i.return;try{Yh(i)}catch(N){at(i,f,N)}break;case 5:var v=i.return;try{Yh(i)}catch(N){at(i,v,N)}}}catch(N){at(i,i.return,N)}if(i===n){ae=null;break}var S=i.sibling;if(S!==null){S.return=i.return,ae=S;break}ae=i.return}}var KE=Math.ceil,Tu=he.ReactCurrentDispatcher,ed=he.ReactCurrentOwner,In=he.ReactCurrentBatchConfig,ze=0,Rt=null,gt=null,Vt=0,dn=0,fo=ii(0),Et=0,La=null,ls=0,Iu=0,td=0,Ma=null,Zt=null,nd=0,po=1/0,kr=null,Su=!1,rd=null,ci=null,Au=!1,hi=null,Ru=0,ba=0,id=null,Cu=-1,Pu=0;function Kt(){return(ze&6)!==0?Ye():Cu!==-1?Cu:Cu=Ye()}function di(n){return(n.mode&1)===0?1:(ze&2)!==0&&Vt!==0?Vt&-Vt:xE.transition!==null?(Pu===0&&(Pu=ia()),Pu):(n=Me,n!==0||(n=window.event,n=n===void 0?16:Bs(n.type)),n)}function On(n,i,a,c){if(50<ba)throw ba=0,id=null,Error(t(185));Xi(n,a,c),((ze&2)===0||n!==Rt)&&(n===Rt&&((ze&2)===0&&(Iu|=a),Et===4&&fi(n,Vt)),en(n,c),a===1&&ze===0&&(i.mode&1)===0&&(po=Ye()+500,nu&&oi()))}function en(n,i){var a=n.callbackNode;Qi(n,i);var c=gr(n,n===Rt?Vt:0);if(c===0)a!==null&&Ls(a),n.callbackNode=null,n.callbackPriority=0;else if(i=c&-c,n.callbackPriority!==i){if(a!=null&&Ls(a),i===1)n.tag===0?NE(ag.bind(null,n)):Hp(ag.bind(null,n)),RE(function(){(ze&6)===0&&oi()}),a=null;else{switch(qn(c)){case 1:a=Ms;break;case 4:a=ta;break;case 16:a=Wi;break;case 536870912:a=bs;break;default:a=Wi}a=mg(a,og.bind(null,n))}n.callbackPriority=i,n.callbackNode=a}}function og(n,i){if(Cu=-1,Pu=0,(ze&6)!==0)throw Error(t(327));var a=n.callbackNode;if(mo()&&n.callbackNode!==a)return null;var c=gr(n,n===Rt?Vt:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||i)i=ku(n,c);else{i=c;var d=ze;ze|=2;var f=ug();(Rt!==n||Vt!==i)&&(kr=null,po=Ye()+500,cs(n,i));do try{YE();break}catch(S){lg(n,S)}while(!0);Th(),Tu.current=f,ze=d,gt!==null?i=0:(Rt=null,Vt=0,i=Et)}if(i!==0){if(i===2&&(d=ra(n),d!==0&&(c=d,i=sd(n,d))),i===1)throw a=La,cs(n,0),fi(n,c),en(n,Ye()),a;if(i===6)fi(n,c);else{if(d=n.current.alternate,(c&30)===0&&!QE(d)&&(i=ku(n,c),i===2&&(f=ra(n),f!==0&&(c=f,i=sd(n,f))),i===1))throw a=La,cs(n,0),fi(n,c),en(n,Ye()),a;switch(n.finishedWork=d,n.finishedLanes=c,i){case 0:case 1:throw Error(t(345));case 2:hs(n,Zt,kr);break;case 3:if(fi(n,c),(c&130023424)===c&&(i=nd+500-Ye(),10<i)){if(gr(n,0)!==0)break;if(d=n.suspendedLanes,(d&c)!==c){Kt(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=hh(hs.bind(null,n,Zt,kr),i);break}hs(n,Zt,kr);break;case 4:if(fi(n,c),(c&4194240)===c)break;for(i=n.eventTimes,d=-1;0<c;){var v=31-sn(c);f=1<<v,v=i[v],v>d&&(d=v),c&=~f}if(c=d,c=Ye()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*KE(c/1960))-c,10<c){n.timeoutHandle=hh(hs.bind(null,n,Zt,kr),c);break}hs(n,Zt,kr);break;case 5:hs(n,Zt,kr);break;default:throw Error(t(329))}}}return en(n,Ye()),n.callbackNode===a?og.bind(null,n):null}function sd(n,i){var a=Ma;return n.current.memoizedState.isDehydrated&&(cs(n,i).flags|=256),n=ku(n,i),n!==2&&(i=Zt,Zt=a,i!==null&&od(i)),n}function od(n){Zt===null?Zt=n:Zt.push.apply(Zt,n)}function QE(n){for(var i=n;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],f=d.getSnapshot;d=d.value;try{if(!kn(f(),d))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function fi(n,i){for(i&=~td,i&=~Iu,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var a=31-sn(i),c=1<<a;n[a]=-1,i&=~c}}function ag(n){if((ze&6)!==0)throw Error(t(327));mo();var i=gr(n,0);if((i&1)===0)return en(n,Ye()),null;var a=ku(n,i);if(n.tag!==0&&a===2){var c=ra(n);c!==0&&(i=c,a=sd(n,c))}if(a===1)throw a=La,cs(n,0),fi(n,i),en(n,Ye()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,hs(n,Zt,kr),en(n,Ye()),null}function ad(n,i){var a=ze;ze|=1;try{return n(i)}finally{ze=a,ze===0&&(po=Ye()+500,nu&&oi())}}function us(n){hi!==null&&hi.tag===0&&(ze&6)===0&&mo();var i=ze;ze|=1;var a=In.transition,c=Me;try{if(In.transition=null,Me=1,n)return n()}finally{Me=c,In.transition=a,ze=i,(ze&6)===0&&oi()}}function ld(){dn=fo.current,Ze(fo)}function cs(n,i){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,AE(a)),gt!==null)for(a=gt.return;a!==null;){var c=a;switch(yh(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&eu();break;case 3:uo(),Ze(Xt),Ze(jt),Nh();break;case 5:Ph(c);break;case 4:uo();break;case 13:Ze(nt);break;case 19:Ze(nt);break;case 10:Ih(c.type._context);break;case 22:case 23:ld()}a=a.return}if(Rt=n,gt=n=pi(n.current,null),Vt=dn=i,Et=0,La=null,td=Iu=ls=0,Zt=Ma=null,ss!==null){for(i=0;i<ss.length;i++)if(a=ss[i],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,f=a.pending;if(f!==null){var v=f.next;f.next=d,c.next=v}a.pending=c}ss=null}return n}function lg(n,i){do{var a=gt;try{if(Th(),du.current=gu,fu){for(var c=rt.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}fu=!1}if(as=0,At=wt=rt=null,ka=!1,Na=0,ed.current=null,a===null||a.return===null){Et=1,La=i,gt=null;break}e:{var f=n,v=a.return,S=a,N=i;if(i=Vt,S.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){var z=N,Q=S,X=Q.tag;if((Q.mode&1)===0&&(X===0||X===11||X===15)){var K=Q.alternate;K?(Q.updateQueue=K.updateQueue,Q.memoizedState=K.memoizedState,Q.lanes=K.lanes):(Q.updateQueue=null,Q.memoizedState=null)}var se=Vm(v);if(se!==null){se.flags&=-257,Om(se,v,S,f,i),se.mode&1&&Dm(f,z,i),i=se,N=z;var ue=i.updateQueue;if(ue===null){var ce=new Set;ce.add(N),i.updateQueue=ce}else ue.add(N);break e}else{if((i&1)===0){Dm(f,z,i),ud();break e}N=Error(t(426))}}else if(tt&&S.mode&1){var ct=Vm(v);if(ct!==null){(ct.flags&65536)===0&&(ct.flags|=256),Om(ct,v,S,f,i),wh(co(N,S));break e}}f=N=co(N,S),Et!==4&&(Et=2),Ma===null?Ma=[f]:Ma.push(f),f=v;do{switch(f.tag){case 3:f.flags|=65536,i&=-i,f.lanes|=i;var M=Nm(f,N,i);rm(f,M);break e;case 1:S=N;var V=f.type,U=f.stateNode;if((f.flags&128)===0&&(typeof V.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(ci===null||!ci.has(U)))){f.flags|=65536,i&=-i,f.lanes|=i;var J=xm(f,S,i);rm(f,J);break e}}f=f.return}while(f!==null)}hg(a)}catch(de){i=de,gt===a&&a!==null&&(gt=a=a.return);continue}break}while(!0)}function ug(){var n=Tu.current;return Tu.current=gu,n===null?gu:n}function ud(){(Et===0||Et===3||Et===2)&&(Et=4),Rt===null||(ls&268435455)===0&&(Iu&268435455)===0||fi(Rt,Vt)}function ku(n,i){var a=ze;ze|=2;var c=ug();(Rt!==n||Vt!==i)&&(kr=null,cs(n,i));do try{XE();break}catch(d){lg(n,d)}while(!0);if(Th(),ze=a,Tu.current=c,gt!==null)throw Error(t(261));return Rt=null,Vt=0,Et}function XE(){for(;gt!==null;)cg(gt)}function YE(){for(;gt!==null&&!qi();)cg(gt)}function cg(n){var i=pg(n.alternate,n,dn);n.memoizedProps=n.pendingProps,i===null?hg(n):gt=i,ed.current=null}function hg(n){var i=n;do{var a=i.alternate;if(n=i.return,(i.flags&32768)===0){if(a=$E(a,i,dn),a!==null){gt=a;return}}else{if(a=qE(a,i),a!==null){a.flags&=32767,gt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Et=6,gt=null;return}}if(i=i.sibling,i!==null){gt=i;return}gt=i=n}while(i!==null);Et===0&&(Et=5)}function hs(n,i,a){var c=Me,d=In.transition;try{In.transition=null,Me=1,JE(n,i,a,c)}finally{In.transition=d,Me=c}return null}function JE(n,i,a,c){do mo();while(hi!==null);if((ze&6)!==0)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var f=a.lanes|a.childLanes;if(Qc(n,f),n===Rt&&(gt=Rt=null,Vt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Au||(Au=!0,mg(Wi,function(){return mo(),null})),f=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||f){f=In.transition,In.transition=null;var v=Me;Me=1;var S=ze;ze|=4,ed.current=null,HE(n,a),tg(a,n),_E(uh),vr=!!lh,uh=lh=null,n.current=a,GE(a),mr(),ze=S,Me=v,In.transition=f}else n.current=a;if(Au&&(Au=!1,hi=n,Ru=d),f=n.pendingLanes,f===0&&(ci=null),Ml(a.stateNode),en(n,Ye()),i!==null)for(c=n.onRecoverableError,a=0;a<i.length;a++)d=i[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(Su)throw Su=!1,n=rd,rd=null,n;return(Ru&1)!==0&&n.tag!==0&&mo(),f=n.pendingLanes,(f&1)!==0?n===id?ba++:(ba=0,id=n):ba=0,oi(),null}function mo(){if(hi!==null){var n=qn(Ru),i=In.transition,a=Me;try{if(In.transition=null,Me=16>n?16:n,hi===null)var c=!1;else{if(n=hi,hi=null,Ru=0,(ze&6)!==0)throw Error(t(331));var d=ze;for(ze|=4,ae=n.current;ae!==null;){var f=ae,v=f.child;if((ae.flags&16)!==0){var S=f.deletions;if(S!==null){for(var N=0;N<S.length;N++){var z=S[N];for(ae=z;ae!==null;){var Q=ae;switch(Q.tag){case 0:case 11:case 15:Oa(8,Q,f)}var X=Q.child;if(X!==null)X.return=Q,ae=X;else for(;ae!==null;){Q=ae;var K=Q.sibling,se=Q.return;if(Xm(Q),Q===z){ae=null;break}if(K!==null){K.return=se,ae=K;break}ae=se}}}var ue=f.alternate;if(ue!==null){var ce=ue.child;if(ce!==null){ue.child=null;do{var ct=ce.sibling;ce.sibling=null,ce=ct}while(ce!==null)}}ae=f}}if((f.subtreeFlags&2064)!==0&&v!==null)v.return=f,ae=v;else e:for(;ae!==null;){if(f=ae,(f.flags&2048)!==0)switch(f.tag){case 0:case 11:case 15:Oa(9,f,f.return)}var M=f.sibling;if(M!==null){M.return=f.return,ae=M;break e}ae=f.return}}var V=n.current;for(ae=V;ae!==null;){v=ae;var U=v.child;if((v.subtreeFlags&2064)!==0&&U!==null)U.return=v,ae=U;else e:for(v=V;ae!==null;){if(S=ae,(S.flags&2048)!==0)try{switch(S.tag){case 0:case 11:case 15:Eu(9,S)}}catch(de){at(S,S.return,de)}if(S===v){ae=null;break e}var J=S.sibling;if(J!==null){J.return=S.return,ae=J;break e}ae=S.return}}if(ze=d,oi(),rn&&typeof rn.onPostCommitFiberRoot=="function")try{rn.onPostCommitFiberRoot(Hi,n)}catch{}c=!0}return c}finally{Me=a,In.transition=i}}return!1}function dg(n,i,a){i=co(a,i),i=Nm(n,i,1),n=li(n,i,1),i=Kt(),n!==null&&(Xi(n,1,i),en(n,i))}function at(n,i,a){if(n.tag===3)dg(n,n,a);else for(;i!==null;){if(i.tag===3){dg(i,n,a);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ci===null||!ci.has(c))){n=co(a,n),n=xm(i,n,1),i=li(i,n,1),n=Kt(),i!==null&&(Xi(i,1,n),en(i,n));break}}i=i.return}}function ZE(n,i,a){var c=n.pingCache;c!==null&&c.delete(i),i=Kt(),n.pingedLanes|=n.suspendedLanes&a,Rt===n&&(Vt&a)===a&&(Et===4||Et===3&&(Vt&130023424)===Vt&&500>Ye()-nd?cs(n,0):td|=a),en(n,i)}function fg(n,i){i===0&&((n.mode&1)===0?i=1:(i=Xr,Xr<<=1,(Xr&130023424)===0&&(Xr=4194304)));var a=Kt();n=Rr(n,i),n!==null&&(Xi(n,i,a),en(n,a))}function eT(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),fg(n,a)}function tT(n,i){var a=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(i),fg(n,a)}var pg;pg=function(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps||Xt.current)Jt=!0;else{if((n.lanes&a)===0&&(i.flags&128)===0)return Jt=!1,BE(n,i,a);Jt=(n.flags&131072)!==0}else Jt=!1,tt&&(i.flags&1048576)!==0&&Gp(i,iu,i.index);switch(i.lanes=0,i.tag){case 2:var c=i.type;vu(n,i),n=i.pendingProps;var d=no(i,jt.current);lo(i,a),d=Vh(null,i,c,n,d,a);var f=Oh();return i.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Yt(c)?(f=!0,tu(i)):f=!1,i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Rh(i),d.updater=yu,i.stateNode=d,d._reactInternals=i,jh(i,c,n,a),i=qh(null,i,c,!0,f,a)):(i.tag=0,tt&&f&&gh(i),Gt(null,i,d,a),i=i.child),i;case 16:c=i.elementType;e:{switch(vu(n,i),n=i.pendingProps,d=c._init,c=d(c._payload),i.type=c,d=i.tag=rT(c),n=xn(c,n),d){case 0:i=$h(null,i,c,n,a);break e;case 1:i=jm(null,i,c,n,a);break e;case 11:i=Lm(null,i,c,n,a);break e;case 14:i=Mm(null,i,c,xn(c.type,n),a);break e}throw Error(t(306,c,""))}return i;case 0:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:xn(c,d),$h(n,i,c,d,a);case 1:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:xn(c,d),jm(n,i,c,d,a);case 3:e:{if(zm(i),n===null)throw Error(t(387));c=i.pendingProps,f=i.memoizedState,d=f.element,nm(n,i),cu(i,c,null,a);var v=i.memoizedState;if(c=v.element,f.isDehydrated)if(f={element:c,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},i.updateQueue.baseState=f,i.memoizedState=f,i.flags&256){d=co(Error(t(423)),i),i=Bm(n,i,c,a,d);break e}else if(c!==d){d=co(Error(t(424)),i),i=Bm(n,i,c,a,d);break e}else for(hn=ri(i.stateNode.containerInfo.firstChild),cn=i,tt=!0,Nn=null,a=em(i,null,c,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(so(),c===d){i=Pr(n,i,a);break e}Gt(n,i,c,a)}i=i.child}return i;case 5:return sm(i),n===null&&vh(i),c=i.type,d=i.pendingProps,f=n!==null?n.memoizedProps:null,v=d.children,ch(c,d)?v=null:f!==null&&ch(c,f)&&(i.flags|=32),Um(n,i),Gt(n,i,v,a),i.child;case 6:return n===null&&vh(i),null;case 13:return $m(n,i,a);case 4:return Ch(i,i.stateNode.containerInfo),c=i.pendingProps,n===null?i.child=oo(i,null,c,a):Gt(n,i,c,a),i.child;case 11:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:xn(c,d),Lm(n,i,c,d,a);case 7:return Gt(n,i,i.pendingProps,a),i.child;case 8:return Gt(n,i,i.pendingProps.children,a),i.child;case 12:return Gt(n,i,i.pendingProps.children,a),i.child;case 10:e:{if(c=i.type._context,d=i.pendingProps,f=i.memoizedProps,v=d.value,Xe(au,c._currentValue),c._currentValue=v,f!==null)if(kn(f.value,v)){if(f.children===d.children&&!Xt.current){i=Pr(n,i,a);break e}}else for(f=i.child,f!==null&&(f.return=i);f!==null;){var S=f.dependencies;if(S!==null){v=f.child;for(var N=S.firstContext;N!==null;){if(N.context===c){if(f.tag===1){N=Cr(-1,a&-a),N.tag=2;var z=f.updateQueue;if(z!==null){z=z.shared;var Q=z.pending;Q===null?N.next=N:(N.next=Q.next,Q.next=N),z.pending=N}}f.lanes|=a,N=f.alternate,N!==null&&(N.lanes|=a),Sh(f.return,a,i),S.lanes|=a;break}N=N.next}}else if(f.tag===10)v=f.type===i.type?null:f.child;else if(f.tag===18){if(v=f.return,v===null)throw Error(t(341));v.lanes|=a,S=v.alternate,S!==null&&(S.lanes|=a),Sh(v,a,i),v=f.sibling}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===i){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}Gt(n,i,d.children,a),i=i.child}return i;case 9:return d=i.type,c=i.pendingProps.children,lo(i,a),d=En(d),c=c(d),i.flags|=1,Gt(n,i,c,a),i.child;case 14:return c=i.type,d=xn(c,i.pendingProps),d=xn(c.type,d),Mm(n,i,c,d,a);case 15:return bm(n,i,i.type,i.pendingProps,a);case 17:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:xn(c,d),vu(n,i),i.tag=1,Yt(c)?(n=!0,tu(i)):n=!1,lo(i,a),Pm(i,c,d),jh(i,c,d,a),qh(null,i,c,!0,n,a);case 19:return Wm(n,i,a);case 22:return Fm(n,i,a)}throw Error(t(156,i.tag))};function mg(n,i){return ea(n,i)}function nT(n,i,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sn(n,i,a,c){return new nT(n,i,a,c)}function cd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function rT(n){if(typeof n=="function")return cd(n)?1:0;if(n!=null){if(n=n.$$typeof,n===O)return 11;if(n===Ue)return 14}return 2}function pi(n,i){var a=n.alternate;return a===null?(a=Sn(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Nu(n,i,a,c,d,f){var v=2;if(c=n,typeof n=="function")cd(n)&&(v=1);else if(typeof n=="string")v=5;else e:switch(n){case P:return ds(a.children,d,f,i);case I:v=8,d|=8;break;case C:return n=Sn(12,a,i,d|2),n.elementType=C,n.lanes=f,n;case A:return n=Sn(13,a,i,d),n.elementType=A,n.lanes=f,n;case pe:return n=Sn(19,a,i,d),n.elementType=pe,n.lanes=f,n;case Ae:return xu(a,d,f,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case x:v=10;break e;case k:v=9;break e;case O:v=11;break e;case Ue:v=14;break e;case qe:v=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return i=Sn(v,a,i,d),i.elementType=n,i.type=c,i.lanes=f,i}function ds(n,i,a,c){return n=Sn(7,n,c,i),n.lanes=a,n}function xu(n,i,a,c){return n=Sn(22,n,c,i),n.elementType=Ae,n.lanes=a,n.stateNode={isHidden:!1},n}function hd(n,i,a){return n=Sn(6,n,null,i),n.lanes=a,n}function dd(n,i,a){return i=Sn(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function iT(n,i,a,c,d){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=sa(0),this.expirationTimes=sa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sa(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function fd(n,i,a,c,d,f,v,S,N){return n=new iT(n,i,a,S,N),i===1?(i=1,f===!0&&(i|=8)):i=0,f=Sn(3,null,null,i),n.current=f,f.stateNode=n,f.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rh(f),n}function sT(n,i,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Pe,key:c==null?null:""+c,children:n,containerInfo:i,implementation:a}}function gg(n){if(!n)return si;n=n._reactInternals;e:{if(Cn(n)!==n||n.tag!==1)throw Error(t(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Yt(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Yt(a))return qp(n,a,i)}return i}function yg(n,i,a,c,d,f,v,S,N){return n=fd(a,c,!0,n,d,f,v,S,N),n.context=gg(null),a=n.current,c=Kt(),d=di(a),f=Cr(c,d),f.callback=i??null,li(a,f,d),n.current.lanes=d,Xi(n,d,c),en(n,c),n}function Du(n,i,a,c){var d=i.current,f=Kt(),v=di(d);return a=gg(a),i.context===null?i.context=a:i.pendingContext=a,i=Cr(f,v),i.payload={element:n},c=c===void 0?null:c,c!==null&&(i.callback=c),n=li(d,i,v),n!==null&&(On(n,d,v,f),uu(n,d,v)),v}function Vu(n){return n=n.current,n.child?(n.child.tag===5,n.child.stateNode):null}function _g(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function pd(n,i){_g(n,i),(n=n.alternate)&&_g(n,i)}function oT(){return null}var vg=typeof reportError=="function"?reportError:function(n){console.error(n)};function md(n){this._internalRoot=n}Ou.prototype.render=md.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(t(409));Du(n,i,null,null)},Ou.prototype.unmount=md.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;us(function(){Du(null,n,null,null)}),i[Tr]=null}};function Ou(n){this._internalRoot=n}Ou.prototype.unstable_scheduleHydration=function(n){if(n){var i=ua();n={blockedOn:null,target:n,priority:i};for(var a=0;a<on.length&&i!==0&&i<on[a].priority;a++);on.splice(a,0,n),a===0&&js(n)}};function gd(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Lu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function wg(){}function aT(n,i,a,c,d){if(d){if(typeof c=="function"){var f=c;c=function(){var z=Vu(v);f.call(z)}}var v=yg(i,c,n,0,null,!1,!1,"",wg);return n._reactRootContainer=v,n[Tr]=v.current,Ea(n.nodeType===8?n.parentNode:n),us(),v}for(;d=n.lastChild;)n.removeChild(d);if(typeof c=="function"){var S=c;c=function(){var z=Vu(N);S.call(z)}}var N=fd(n,0,!1,null,null,!1,!1,"",wg);return n._reactRootContainer=N,n[Tr]=N.current,Ea(n.nodeType===8?n.parentNode:n),us(function(){Du(i,N,a,c)}),N}function Mu(n,i,a,c,d){var f=a._reactRootContainer;if(f){var v=f;if(typeof d=="function"){var S=d;d=function(){var N=Vu(v);S.call(N)}}Du(i,v,n,d)}else v=aT(a,i,n,d,c);return Vu(v)}aa=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var a=$e(i.pendingLanes);a!==0&&(oa(i,a|1),en(i,Ye()),(ze&6)===0&&(po=Ye()+500,oi()))}break;case 13:us(function(){var c=Rr(n,1);if(c!==null){var d=Kt();On(c,n,1,d)}}),pd(n,1)}},Fs=function(n){if(n.tag===13){var i=Rr(n,134217728);if(i!==null){var a=Kt();On(i,n,134217728,a)}pd(n,134217728)}},la=function(n){if(n.tag===13){var i=di(n),a=Rr(n,i);if(a!==null){var c=Kt();On(a,n,i,c)}pd(n,i)}},ua=function(){return Me},ca=function(n,i){var a=Me;try{return Me=n,i()}finally{Me=a}},dr=function(n,i,a){switch(i){case"input":if(ji(n,a),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var c=a[i];if(c!==n&&c.form===n.form){var d=Zl(c);if(!d)throw Error(t(90));Wo(c),ji(c,d)}}}break;case"textarea":Sl(n,a);break;case"select":i=a.value,i!=null&&An(n,!!a.multiple,i,!1)}},Cl=ad,Pl=us;var lT={usingClientEntryPoint:!1,Events:[Sa,eo,Zl,Hr,Gr,ad]},Fa={findFiberByHostInstance:ts,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},uT={bundleType:Fa.bundleType,version:Fa.version,rendererPackageName:Fa.rendererPackageName,rendererConfig:Fa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:he.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Ll(n),n===null?null:n.stateNode},findFiberByHostInstance:Fa.findFiberByHostInstance||oT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bu.isDisabled&&bu.supportsFiber)try{Hi=bu.inject(uT),rn=bu}catch{}}return tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lT,tn.createPortal=function(n,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gd(i))throw Error(t(200));return sT(n,i,null,a)},tn.createRoot=function(n,i){if(!gd(n))throw Error(t(299));var a=!1,c="",d=vg;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onRecoverableError!==void 0&&(d=i.onRecoverableError)),i=fd(n,1,!1,null,null,a,!1,c,d),n[Tr]=i.current,Ea(n.nodeType===8?n.parentNode:n),new md(i)},tn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Ll(i),n=n===null?null:n.stateNode,n},tn.flushSync=function(n){return us(n)},tn.hydrate=function(n,i,a){if(!Lu(i))throw Error(t(200));return Mu(null,n,i,!0,a)},tn.hydrateRoot=function(n,i,a){if(!gd(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,f="",v=vg;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),i=yg(i,null,n,1,a??null,d,!1,f,v),n[Tr]=i.current,Ea(n),c)for(n=0;n<c.length;n++)a=c[n],d=a._getVersion,d=d(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,d]:i.mutableSourceEagerHydrationData.push(a,d);return new Ou(i)},tn.render=function(n,i,a){if(!Lu(i))throw Error(t(200));return Mu(null,n,i,!1,a)},tn.unmountComponentAtNode=function(n){if(!Lu(n))throw Error(t(40));return n._reactRootContainer?(us(function(){Mu(null,null,n,!1,function(){n._reactRootContainer=null,n[Tr]=null})}),!0):!1},tn.unstable_batchedUpdates=ad,tn.unstable_renderSubtreeIntoContainer=function(n,i,a,c){if(!Lu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Mu(n,i,a,!1,c)},tn.version="18.3.1-next-f1338f8080-20240426",tn}var Pg;function __(){if(Pg)return vd.exports;Pg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),vd.exports=_T(),vd.exports}var kg;function vT(){if(kg)return Fu;kg=1;var r=__();return Fu.createRoot=r.createRoot,Fu.hydrateRoot=r.hydrateRoot,Fu}var wT=vT();const ET=y_(wT);__();function Xa(){return Xa=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},Xa.apply(this,arguments)}var wi;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(wi||(wi={}));const Ng="popstate";function TT(r){r===void 0&&(r={});function e(o,l){let{pathname:h="/",search:p="",hash:g=""}=Ss(o.location.hash.substr(1));return!h.startsWith("/")&&!h.startsWith(".")&&(h="/"+h),Ld("",{pathname:h,search:p,hash:g},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(o,l){let h=o.document.querySelector("base"),p="";if(h&&h.getAttribute("href")){let g=o.location.href,y=g.indexOf("#");p=y===-1?g:g.slice(0,y)}return p+"#"+(typeof l=="string"?l:nc(l))}function s(o,l){Sc(o.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(l)+")")}return ST(e,t,s,r)}function ft(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Sc(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function IT(){return Math.random().toString(36).substr(2,8)}function xg(r,e){return{usr:r.state,key:r.key,idx:e}}function Ld(r,e,t,s){return t===void 0&&(t=null),Xa({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?Ss(e):e,{state:t,key:e&&e.key||s||IT()})}function nc(r){let{pathname:e="/",search:t="",hash:s=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function Ss(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let s=r.indexOf("?");s>=0&&(e.search=r.substr(s),r=r.substr(0,s)),r&&(e.pathname=r)}return e}function ST(r,e,t,s){s===void 0&&(s={});let{window:o=document.defaultView,v5Compat:l=!1}=s,h=o.history,p=wi.Pop,g=null,y=w();y==null&&(y=0,h.replaceState(Xa({},h.state,{idx:y}),""));function w(){return(h.state||{idx:null}).idx}function T(){p=wi.Pop;let D=w(),ne=D==null?null:D-y;y=D,g&&g({action:p,location:q.location,delta:ne})}function R(D,ne){p=wi.Push;let ee=Ld(q.location,D,ne);t&&t(ee,D),y=w()+1;let te=xg(ee,y),he=q.createHref(ee);try{h.pushState(te,"",he)}catch(Te){if(Te instanceof DOMException&&Te.name==="DataCloneError")throw Te;o.location.assign(he)}l&&g&&g({action:p,location:q.location,delta:1})}function F(D,ne){p=wi.Replace;let ee=Ld(q.location,D,ne);t&&t(ee,D),y=w();let te=xg(ee,y),he=q.createHref(ee);h.replaceState(te,"",he),l&&g&&g({action:p,location:q.location,delta:0})}function W(D){let ne=o.location.origin!=="null"?o.location.origin:o.location.href,ee=typeof D=="string"?D:nc(D);return ee=ee.replace(/ $/,"%20"),ft(ne,"No window.location.(origin|href) available to create URL for href: "+ee),new URL(ee,ne)}let q={get action(){return p},get location(){return r(o,h)},listen(D){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(Ng,T),g=D,()=>{o.removeEventListener(Ng,T),g=null}},createHref(D){return e(o,D)},createURL:W,encodeLocation(D){let ne=W(D);return{pathname:ne.pathname,search:ne.search,hash:ne.hash}},push:R,replace:F,go(D){return h.go(D)}};return q}var Dg;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(Dg||(Dg={}));function AT(r,e,t){return t===void 0&&(t="/"),RT(r,e,t)}function RT(r,e,t,s){let o=typeof e=="string"?Ss(e):e,l=df(o.pathname||"/",t);if(l==null)return null;let h=v_(r);CT(h);let p=null;for(let g=0;p==null&&g<h.length;++g){let y=UT(l);p=MT(h[g],y)}return p}function v_(r,e,t,s){e===void 0&&(e=[]),t===void 0&&(t=[]),s===void 0&&(s="");let o=(l,h,p)=>{let g={relativePath:p===void 0?l.path||"":p,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};g.relativePath.startsWith("/")&&(ft(g.relativePath.startsWith(s),'Absolute route path "'+g.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),g.relativePath=g.relativePath.slice(s.length));let y=Ii([s,g.relativePath]),w=t.concat(g);l.children&&l.children.length>0&&(ft(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+y+'".')),v_(l.children,e,w,y)),!(l.path==null&&!l.index)&&e.push({path:y,score:OT(y,l.index),routesMeta:w})};return r.forEach((l,h)=>{var p;if(l.path===""||!((p=l.path)!=null&&p.includes("?")))o(l,h);else for(let g of w_(l.path))o(l,h,g)}),e}function w_(r){let e=r.split("/");if(e.length===0)return[];let[t,...s]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(s.length===0)return o?[l,""]:[l];let h=w_(s.join("/")),p=[];return p.push(...h.map(g=>g===""?l:[l,g].join("/"))),o&&p.push(...h),p.map(g=>r.startsWith("/")&&g===""?"/":g)}function CT(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:LT(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}const PT=/^:[\w-]+$/,kT=3,NT=2,xT=1,DT=10,VT=-2,Vg=r=>r==="*";function OT(r,e){let t=r.split("/"),s=t.length;return t.some(Vg)&&(s+=VT),e&&(s+=NT),t.filter(o=>!Vg(o)).reduce((o,l)=>o+(PT.test(l)?kT:l===""?xT:DT),s)}function LT(r,e){return r.length===e.length&&r.slice(0,-1).every((s,o)=>s===e[o])?r[r.length-1]-e[e.length-1]:0}function MT(r,e,t){let{routesMeta:s}=r,o={},l="/",h=[];for(let p=0;p<s.length;++p){let g=s[p],y=p===s.length-1,w=l==="/"?e:e.slice(l.length)||"/",T=bT({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},w),R=g.route;if(!T)return null;Object.assign(o,T.params),h.push({params:o,pathname:Ii([l,T.pathname]),pathnameBase:qT(Ii([l,T.pathnameBase])),route:R}),T.pathnameBase!=="/"&&(l=Ii([l,T.pathnameBase]))}return h}function bT(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,s]=FT(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let l=o[0],h=l.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:s.reduce((y,w,T)=>{let{paramName:R,isOptional:F}=w;if(R==="*"){let q=p[T]||"";h=l.slice(0,l.length-q.length).replace(/(.)\/+$/,"$1")}const W=p[T];return F&&!W?y[R]=void 0:y[R]=(W||"").replace(/%2F/g,"/"),y},{}),pathname:l,pathnameBase:h,pattern:r}}function FT(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Sc(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,p,g)=>(s.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(s.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function UT(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Sc(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function df(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=r.charAt(t);return s&&s!=="/"?null:r.slice(t)||"/"}const jT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zT=r=>jT.test(r);function BT(r,e){e===void 0&&(e="/");let{pathname:t,search:s="",hash:o=""}=typeof r=="string"?Ss(r):r,l;if(t)if(zT(t))l=t;else{if(t.includes("//")){let h=t;t=t.replace(/\/\/+/g,"/"),Sc(!1,"Pathnames cannot have embedded double slashes - normalizing "+(h+" -> "+t))}t.startsWith("/")?l=Og(t.substring(1),"/"):l=Og(t,e)}else l=e;return{pathname:l,search:WT(s),hash:HT(o)}}function Og(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Td(r,e,t,s){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function $T(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function ff(r,e){let t=$T(r);return e?t.map((s,o)=>o===t.length-1?s.pathname:s.pathnameBase):t.map(s=>s.pathnameBase)}function pf(r,e,t,s){s===void 0&&(s=!1);let o;typeof r=="string"?o=Ss(r):(o=Xa({},r),ft(!o.pathname||!o.pathname.includes("?"),Td("?","pathname","search",o)),ft(!o.pathname||!o.pathname.includes("#"),Td("#","pathname","hash",o)),ft(!o.search||!o.search.includes("#"),Td("#","search","hash",o)));let l=r===""||o.pathname==="",h=l?"/":o.pathname,p;if(h==null)p=t;else{let T=e.length-1;if(!s&&h.startsWith("..")){let R=h.split("/");for(;R[0]==="..";)R.shift(),T-=1;o.pathname=R.join("/")}p=T>=0?e[T]:"/"}let g=BT(o,p),y=h&&h!=="/"&&h.endsWith("/"),w=(l||h===".")&&t.endsWith("/");return!g.pathname.endsWith("/")&&(y||w)&&(g.pathname+="/"),g}const Ii=r=>r.join("/").replace(/\/\/+/g,"/"),qT=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),WT=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,HT=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function GT(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const E_=["post","put","patch","delete"];new Set(E_);const KT=["get",...E_];new Set(KT);function Ya(){return Ya=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},Ya.apply(this,arguments)}const mf=le.createContext(null),QT=le.createContext(null),bi=le.createContext(null),Ac=le.createContext(null),Fr=le.createContext({outlet:null,matches:[],isDataRoute:!1}),T_=le.createContext(null);function XT(r,e){let{relative:t}=e===void 0?{}:e;Lo()||ft(!1);let{basename:s,navigator:o}=le.useContext(bi),{hash:l,pathname:h,search:p}=S_(r,{relative:t}),g=h;return s!=="/"&&(g=h==="/"?s:Ii([s,h])),o.createHref({pathname:g,search:p,hash:l})}function Lo(){return le.useContext(Ac)!=null}function al(){return Lo()||ft(!1),le.useContext(Ac).location}function I_(r){le.useContext(bi).static||le.useLayoutEffect(r)}function gf(){let{isDataRoute:r}=le.useContext(Fr);return r?c0():YT()}function YT(){Lo()||ft(!1);let r=le.useContext(mf),{basename:e,future:t,navigator:s}=le.useContext(bi),{matches:o}=le.useContext(Fr),{pathname:l}=al(),h=JSON.stringify(ff(o,t.v7_relativeSplatPath)),p=le.useRef(!1);return I_(()=>{p.current=!0}),le.useCallback(function(y,w){if(w===void 0&&(w={}),!p.current)return;if(typeof y=="number"){s.go(y);return}let T=pf(y,JSON.parse(h),l,w.relative==="path");r==null&&e!=="/"&&(T.pathname=T.pathname==="/"?e:Ii([e,T.pathname])),(w.replace?s.replace:s.push)(T,w.state,w)},[e,s,h,l,r])}function JT(){let{matches:r}=le.useContext(Fr),e=r[r.length-1];return e?e.params:{}}function S_(r,e){let{relative:t}=e===void 0?{}:e,{future:s}=le.useContext(bi),{matches:o}=le.useContext(Fr),{pathname:l}=al(),h=JSON.stringify(ff(o,s.v7_relativeSplatPath));return le.useMemo(()=>pf(r,JSON.parse(h),l,t==="path"),[r,h,l,t])}function ZT(r,e){return e0(r,e)}function e0(r,e,t,s){Lo()||ft(!1);let{navigator:o}=le.useContext(bi),{matches:l}=le.useContext(Fr),h=l[l.length-1],p=h?h.params:{};h&&h.pathname;let g=h?h.pathnameBase:"/";h&&h.route;let y=al(),w;if(e){var T;let D=typeof e=="string"?Ss(e):e;g==="/"||(T=D.pathname)!=null&&T.startsWith(g)||ft(!1),w=D}else w=y;let R=w.pathname||"/",F=R;if(g!=="/"){let D=g.replace(/^\//,"").split("/");F="/"+R.replace(/^\//,"").split("/").slice(D.length).join("/")}let W=AT(r,{pathname:F}),q=s0(W&&W.map(D=>Object.assign({},D,{params:Object.assign({},p,D.params),pathname:Ii([g,o.encodeLocation?o.encodeLocation(D.pathname).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?g:Ii([g,o.encodeLocation?o.encodeLocation(D.pathnameBase).pathname:D.pathnameBase])})),l,t,s);return e&&q?le.createElement(Ac.Provider,{value:{location:Ya({pathname:"/",search:"",hash:"",state:null,key:"default"},w),navigationType:wi.Pop}},q):q}function t0(){let r=u0(),e=GT(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return le.createElement(le.Fragment,null,le.createElement("h2",null,"Unexpected Application Error!"),le.createElement("h3",{style:{fontStyle:"italic"}},e),t?le.createElement("pre",{style:o},t):null,null)}const n0=le.createElement(t0,null);class r0 extends le.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?le.createElement(Fr.Provider,{value:this.props.routeContext},le.createElement(T_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function i0(r){let{routeContext:e,match:t,children:s}=r,o=le.useContext(mf);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),le.createElement(Fr.Provider,{value:e},s)}function s0(r,e,t,s){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),s===void 0&&(s=null),r==null){var l;if(!t)return null;if(t.errors)r=t.matches;else if((l=s)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let h=r,p=(o=t)==null?void 0:o.errors;if(p!=null){let w=h.findIndex(T=>T.route.id&&p?.[T.route.id]!==void 0);w>=0||ft(!1),h=h.slice(0,Math.min(h.length,w+1))}let g=!1,y=-1;if(t&&s&&s.v7_partialHydration)for(let w=0;w<h.length;w++){let T=h[w];if((T.route.HydrateFallback||T.route.hydrateFallbackElement)&&(y=w),T.route.id){let{loaderData:R,errors:F}=t,W=T.route.loader&&R[T.route.id]===void 0&&(!F||F[T.route.id]===void 0);if(T.route.lazy||W){g=!0,y>=0?h=h.slice(0,y+1):h=[h[0]];break}}}return h.reduceRight((w,T,R)=>{let F,W=!1,q=null,D=null;t&&(F=p&&T.route.id?p[T.route.id]:void 0,q=T.route.errorElement||n0,g&&(y<0&&R===0?(h0("route-fallback"),W=!0,D=null):y===R&&(W=!0,D=T.route.hydrateFallbackElement||null)));let ne=e.concat(h.slice(0,R+1)),ee=()=>{let te;return F?te=q:W?te=D:T.route.Component?te=le.createElement(T.route.Component,null):T.route.element?te=T.route.element:te=w,le.createElement(i0,{match:T,routeContext:{outlet:w,matches:ne,isDataRoute:t!=null},children:te})};return t&&(T.route.ErrorBoundary||T.route.errorElement||R===0)?le.createElement(r0,{location:t.location,revalidation:t.revalidation,component:q,error:F,children:ee(),routeContext:{outlet:null,matches:ne,isDataRoute:!0}}):ee()},null)}var A_=(function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r})(A_||{}),R_=(function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r})(R_||{});function o0(r){let e=le.useContext(mf);return e||ft(!1),e}function a0(r){let e=le.useContext(QT);return e||ft(!1),e}function l0(r){let e=le.useContext(Fr);return e||ft(!1),e}function C_(r){let e=l0(),t=e.matches[e.matches.length-1];return t.route.id||ft(!1),t.route.id}function u0(){var r;let e=le.useContext(T_),t=a0(),s=C_();return e!==void 0?e:(r=t.errors)==null?void 0:r[s]}function c0(){let{router:r}=o0(A_.UseNavigateStable),e=C_(R_.UseNavigateStable),t=le.useRef(!1);return I_(()=>{t.current=!0}),le.useCallback(function(o,l){l===void 0&&(l={}),t.current&&(typeof o=="number"?r.navigate(o):r.navigate(o,Ya({fromRouteId:e},l)))},[r,e])}const Lg={};function h0(r,e,t){Lg[r]||(Lg[r]=!0)}function d0(r,e){r?.v7_startTransition,r?.v7_relativeSplatPath}function Md(r){let{to:e,replace:t,state:s,relative:o}=r;Lo()||ft(!1);let{future:l,static:h}=le.useContext(bi),{matches:p}=le.useContext(Fr),{pathname:g}=al(),y=gf(),w=pf(e,ff(p,l.v7_relativeSplatPath),g,o==="path"),T=JSON.stringify(w);return le.useEffect(()=>y(JSON.parse(T),{replace:t,state:s,relative:o}),[y,T,o,t,s]),null}function fs(r){ft(!1)}function f0(r){let{basename:e="/",children:t=null,location:s,navigationType:o=wi.Pop,navigator:l,static:h=!1,future:p}=r;Lo()&&ft(!1);let g=e.replace(/^\/*/,"/"),y=le.useMemo(()=>({basename:g,navigator:l,static:h,future:Ya({v7_relativeSplatPath:!1},p)}),[g,p,l,h]);typeof s=="string"&&(s=Ss(s));let{pathname:w="/",search:T="",hash:R="",state:F=null,key:W="default"}=s,q=le.useMemo(()=>{let D=df(w,g);return D==null?null:{location:{pathname:D,search:T,hash:R,state:F,key:W},navigationType:o}},[g,w,T,R,F,W,o]);return q==null?null:le.createElement(bi.Provider,{value:y},le.createElement(Ac.Provider,{children:t,value:q}))}function p0(r){let{children:e,location:t}=r;return ZT(bd(e),t)}new Promise(()=>{});function bd(r,e){e===void 0&&(e=[]);let t=[];return le.Children.forEach(r,(s,o)=>{if(!le.isValidElement(s))return;let l=[...e,o];if(s.type===le.Fragment){t.push.apply(t,bd(s.props.children,l));return}s.type!==fs&&ft(!1),!s.props.index||!s.props.children||ft(!1);let h={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(h.children=bd(s.props.children,l)),t.push(h)}),t}function Fd(){return Fd=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},Fd.apply(this,arguments)}function m0(r,e){if(r==null)return{};var t={},s=Object.keys(r),o,l;for(l=0;l<s.length;l++)o=s[l],!(e.indexOf(o)>=0)&&(t[o]=r[o]);return t}function g0(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function y0(r,e){return r.button===0&&(!e||e==="_self")&&!g0(r)}const _0=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],v0="6";try{window.__reactRouterVersion=v0}catch{}const w0="startTransition",Mg=mT[w0];function E0(r){let{basename:e,children:t,future:s,window:o}=r,l=le.useRef();l.current==null&&(l.current=TT({window:o,v5Compat:!0}));let h=l.current,[p,g]=le.useState({action:h.action,location:h.location}),{v7_startTransition:y}=s||{},w=le.useCallback(T=>{y&&Mg?Mg(()=>g(T)):g(T)},[g,y]);return le.useLayoutEffect(()=>h.listen(w),[h,w]),le.useEffect(()=>d0(s),[s]),le.createElement(f0,{basename:e,children:t,location:p.location,navigationType:p.action,navigator:h,future:s})}const T0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",I0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Wu=le.forwardRef(function(e,t){let{onClick:s,relative:o,reloadDocument:l,replace:h,state:p,target:g,to:y,preventScrollReset:w,viewTransition:T}=e,R=m0(e,_0),{basename:F}=le.useContext(bi),W,q=!1;if(typeof y=="string"&&I0.test(y)&&(W=y,T0))try{let te=new URL(window.location.href),he=y.startsWith("//")?new URL(te.protocol+y):new URL(y),Te=df(he.pathname,F);he.origin===te.origin&&Te!=null?y=Te+he.search+he.hash:q=!0}catch{}let D=XT(y,{relative:o}),ne=S0(y,{replace:h,state:p,target:g,preventScrollReset:w,relative:o,viewTransition:T});function ee(te){s&&s(te),te.defaultPrevented||ne(te)}return le.createElement("a",Fd({},R,{href:W||D,onClick:q||l?s:ee,ref:t,target:g}))});var bg;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(bg||(bg={}));var Fg;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(Fg||(Fg={}));function S0(r,e){let{target:t,replace:s,state:o,preventScrollReset:l,relative:h,viewTransition:p}=e===void 0?{}:e,g=gf(),y=al(),w=S_(r,{relative:h});return le.useCallback(T=>{if(y0(T,t)){T.preventDefault();let R=s!==void 0?s:nc(y)===nc(w);g(r,{replace:R,state:o,preventScrollReset:l,relative:h,viewTransition:p})}},[y,g,w,s,o,t,r,l,h,p])}const A0=()=>{};var Ug={};const P_=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},R0=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const o=r[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],h=r[t++],p=r[t++],g=((o&7)<<18|(l&63)<<12|(h&63)<<6|p&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const l=r[t++],h=r[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},k_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const l=r[o],h=o+1<r.length,p=h?r[o+1]:0,g=o+2<r.length,y=g?r[o+2]:0,w=l>>2,T=(l&3)<<4|p>>4;let R=(p&15)<<2|y>>6,F=y&63;g||(F=64,h||(R=64)),s.push(t[w],t[T],t[R],t[F])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(P_(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):R0(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],p=o<r.length?t[r.charAt(o)]:0;++o;const y=o<r.length?t[r.charAt(o)]:64;++o;const T=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||p==null||y==null||T==null)throw new C0;const R=l<<2|p>>4;if(s.push(R),y!==64){const F=p<<4&240|y>>2;if(s.push(F),T!==64){const W=y<<6&192|T;s.push(W)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class C0 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const P0=function(r){const e=P_(r);return k_.encodeByteArray(e,!0)},rc=function(r){return P0(r).replace(/\./g,"")},N_=function(r){try{return k_.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function k0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const N0=()=>k0().__FIREBASE_DEFAULTS__,x0=()=>{if(typeof process>"u"||typeof Ug>"u")return;const r=Ug.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},D0=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&N_(r[1]);return e&&JSON.parse(e)},Rc=()=>{try{return A0()||N0()||x0()||D0()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},x_=r=>Rc()?.emulatorHosts?.[r],V0=r=>{const e=x_(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},D_=()=>Rc()?.config,V_=r=>Rc()?.[`_${r}`];class O0{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}function Mo(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function O_(r){return(await fetch(r,{credentials:"include"})).ok}function L0(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...r};return[rc(JSON.stringify(t)),rc(JSON.stringify(h)),""].join(".")}const $a={};function M0(){const r={prod:[],emulator:[]};for(const e of Object.keys($a))$a[e]?r.emulator.push(e):r.prod.push(e);return r}function b0(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let jg=!1;function L_(r,e){if(typeof window>"u"||typeof document>"u"||!Mo(window.location.host)||$a[r]===e||$a[r]||jg)return;$a[r]=e;function t(R){return`__firebase__banner__${R}`}const s="__firebase__banner",l=M0().prod.length>0;function h(){const R=document.getElementById(s);R&&R.remove()}function p(R){R.style.display="flex",R.style.background="#7faaf0",R.style.position="fixed",R.style.bottom="5px",R.style.left="5px",R.style.padding=".5em",R.style.borderRadius="5px",R.style.alignItems="center"}function g(R,F){R.setAttribute("width","24"),R.setAttribute("id",F),R.setAttribute("height","24"),R.setAttribute("viewBox","0 0 24 24"),R.setAttribute("fill","none"),R.style.marginLeft="-6px"}function y(){const R=document.createElement("span");return R.style.cursor="pointer",R.style.marginLeft="16px",R.style.fontSize="24px",R.innerHTML=" &times;",R.onclick=()=>{jg=!0,h()},R}function w(R,F){R.setAttribute("id",F),R.innerText="Learn more",R.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",R.setAttribute("target","__blank"),R.style.paddingLeft="5px",R.style.textDecoration="underline"}function T(){const R=b0(s),F=t("text"),W=document.getElementById(F)||document.createElement("span"),q=t("learnmore"),D=document.getElementById(q)||document.createElement("a"),ne=t("preprendIcon"),ee=document.getElementById(ne)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(R.created){const te=R.element;p(te),w(D,q);const he=y();g(ee,ne),te.append(ee,W,D,he),document.body.appendChild(te)}l?(W.innerText="Preview backend disconnected.",ee.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ee.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,W.innerText="Preview backend running in this workspace."),W.setAttribute("id",F)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}function Ht(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function F0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ht())}function U0(){const r=Rc()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function j0(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function z0(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function B0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $0(){const r=Ht();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function q0(){return!U0()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function W0(){try{return typeof indexedDB=="object"}catch{return!1}}function H0(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}const G0="FirebaseError";class Ur extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=G0,Object.setPrototypeOf(this,Ur.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ll.prototype.create)}}class ll{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?K0(l,s):"Error",p=`${this.serviceName}: ${h} (${o}).`;return new Ur(o,p,s)}}function K0(r,e){return r.replace(Q0,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const Q0=/\{\$([^}]+)}/g;function X0(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function _s(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=r[o],h=e[o];if(zg(l)&&zg(h)){if(!_s(l,h))return!1}else if(l!==h)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function zg(r){return r!==null&&typeof r=="object"}function ul(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Y0(r,e){const t=new J0(r,e);return t.subscribe.bind(t)}class J0{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");Z0(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=Id),o.error===void 0&&(o.error=Id),o.complete===void 0&&(o.complete=Id);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Z0(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Id(){}function It(r){return r&&r._delegate?r._delegate:r}class vs{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ps="[DEFAULT]";class eI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new O0;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(nI(e))try{this.getOrInitializeService({instanceIdentifier:ps})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=ps){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ps){return this.instances.has(e)}getOptions(e=ps){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,h]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(l);s===p&&h.resolve(o)}return o}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:tI(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ps){return this.component?this.component.multipleInstances?e:ps:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function tI(r){return r===ps?void 0:r}function nI(r){return r.instantiationMode==="EAGER"}class rI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new eI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var De;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(De||(De={}));const iI={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},sI=De.INFO,oI={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},aI=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=oI[e];if(o)console[o](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class yf{constructor(e){this.name=e,this._logLevel=sI,this._logHandler=aI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?iI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...e),this._logHandler(this,De.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...e),this._logHandler(this,De.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,De.INFO,...e),this._logHandler(this,De.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,De.WARN,...e),this._logHandler(this,De.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...e),this._logHandler(this,De.ERROR,...e)}}const lI=(r,e)=>e.some(t=>r instanceof t);let Bg,$g;function uI(){return Bg||(Bg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cI(){return $g||($g=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const M_=new WeakMap,Ud=new WeakMap,b_=new WeakMap,Sd=new WeakMap,_f=new WeakMap;function hI(r){const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",h)},l=()=>{t(Si(r.result)),o()},h=()=>{s(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&M_.set(t,r)}).catch(()=>{}),_f.set(e,r),e}function dI(r){if(Ud.has(r))return;const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",h),r.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",h),r.addEventListener("abort",h)});Ud.set(r,e)}let jd={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Ud.get(r);if(e==="objectStoreNames")return r.objectStoreNames||b_.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Si(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function fI(r){jd=r(jd)}function pI(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(Ad(this),e,...t);return b_.set(s,e.sort?e.sort():[e]),Si(s)}:cI().includes(r)?function(...e){return r.apply(Ad(this),e),Si(M_.get(this))}:function(...e){return Si(r.apply(Ad(this),e))}}function mI(r){return typeof r=="function"?pI(r):(r instanceof IDBTransaction&&dI(r),lI(r,uI())?new Proxy(r,jd):r)}function Si(r){if(r instanceof IDBRequest)return hI(r);if(Sd.has(r))return Sd.get(r);const e=mI(r);return e!==r&&(Sd.set(r,e),_f.set(e,r)),e}const Ad=r=>_f.get(r);function gI(r,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const h=indexedDB.open(r,e),p=Si(h);return s&&h.addEventListener("upgradeneeded",g=>{s(Si(h.result),g.oldVersion,g.newVersion,Si(h.transaction),g)}),t&&h.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),p.then(g=>{l&&g.addEventListener("close",()=>l()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const yI=["get","getKey","getAll","getAllKeys","count"],_I=["put","add","delete","clear"],Rd=new Map;function qg(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Rd.get(e))return Rd.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=_I.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||yI.includes(t)))return;const l=async function(h,...p){const g=this.transaction(h,o?"readwrite":"readonly");let y=g.store;return s&&(y=y.index(p.shift())),(await Promise.all([y[t](...p),o&&g.done]))[0]};return Rd.set(e,l),l}fI(r=>({...r,get:(e,t,s)=>qg(e,t)||r.get(e,t,s),has:(e,t)=>!!qg(e,t)||r.has(e,t)}));class vI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(wI(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function wI(r){return r.getComponent()?.type==="VERSION"}const zd="@firebase/app",Wg="0.14.6";const Vr=new yf("@firebase/app"),EI="@firebase/app-compat",TI="@firebase/analytics-compat",II="@firebase/analytics",SI="@firebase/app-check-compat",AI="@firebase/app-check",RI="@firebase/auth",CI="@firebase/auth-compat",PI="@firebase/database",kI="@firebase/data-connect",NI="@firebase/database-compat",xI="@firebase/functions",DI="@firebase/functions-compat",VI="@firebase/installations",OI="@firebase/installations-compat",LI="@firebase/messaging",MI="@firebase/messaging-compat",bI="@firebase/performance",FI="@firebase/performance-compat",UI="@firebase/remote-config",jI="@firebase/remote-config-compat",zI="@firebase/storage",BI="@firebase/storage-compat",$I="@firebase/firestore",qI="@firebase/ai",WI="@firebase/firestore-compat",HI="firebase",GI="12.6.0";const Bd="[DEFAULT]",KI={[zd]:"fire-core",[EI]:"fire-core-compat",[II]:"fire-analytics",[TI]:"fire-analytics-compat",[AI]:"fire-app-check",[SI]:"fire-app-check-compat",[RI]:"fire-auth",[CI]:"fire-auth-compat",[PI]:"fire-rtdb",[kI]:"fire-data-connect",[NI]:"fire-rtdb-compat",[xI]:"fire-fn",[DI]:"fire-fn-compat",[VI]:"fire-iid",[OI]:"fire-iid-compat",[LI]:"fire-fcm",[MI]:"fire-fcm-compat",[bI]:"fire-perf",[FI]:"fire-perf-compat",[UI]:"fire-rc",[jI]:"fire-rc-compat",[zI]:"fire-gcs",[BI]:"fire-gcs-compat",[$I]:"fire-fst",[WI]:"fire-fst-compat",[qI]:"fire-vertex","fire-js":"fire-js",[HI]:"fire-js-all"};const ic=new Map,QI=new Map,$d=new Map;function Hg(r,e){try{r.container.addComponent(e)}catch(t){Vr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Ro(r){const e=r.name;if($d.has(e))return Vr.debug(`There were multiple attempts to register component ${e}.`),!1;$d.set(e,r);for(const t of ic.values())Hg(t,r);for(const t of QI.values())Hg(t,r);return!0}function vf(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Mn(r){return r==null?!1:r.settings!==void 0}const XI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ai=new ll("app","Firebase",XI);class YI{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new vs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ai.create("app-deleted",{appName:this._name})}}const bo=GI;function F_(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s={name:Bd,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw Ai.create("bad-app-name",{appName:String(o)});if(t||(t=D_()),!t)throw Ai.create("no-options");const l=ic.get(o);if(l){if(_s(t,l.options)&&_s(s,l.config))return l;throw Ai.create("duplicate-app",{appName:o})}const h=new rI(o);for(const g of $d.values())h.addComponent(g);const p=new YI(t,s,h);return ic.set(o,p),p}function U_(r=Bd){const e=ic.get(r);if(!e&&r===Bd&&D_())return F_();if(!e)throw Ai.create("no-app",{appName:r});return e}function Ri(r,e,t){let s=KI[r]??r;t&&(s+=`-${t}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const h=[`Unable to register library "${s}" with version "${e}":`];o&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Vr.warn(h.join(" "));return}Ro(new vs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const JI="firebase-heartbeat-database",ZI=1,Ja="firebase-heartbeat-store";let Cd=null;function j_(){return Cd||(Cd=gI(JI,ZI,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Ja)}catch(t){console.warn(t)}}}}).catch(r=>{throw Ai.create("idb-open",{originalErrorMessage:r.message})})),Cd}async function eS(r){try{const t=(await j_()).transaction(Ja),s=await t.objectStore(Ja).get(z_(r));return await t.done,s}catch(e){if(e instanceof Ur)Vr.warn(e.message);else{const t=Ai.create("idb-get",{originalErrorMessage:e?.message});Vr.warn(t.message)}}}async function Gg(r,e){try{const s=(await j_()).transaction(Ja,"readwrite");await s.objectStore(Ja).put(e,z_(r)),await s.done}catch(t){if(t instanceof Ur)Vr.warn(t.message);else{const s=Ai.create("idb-set",{originalErrorMessage:t?.message});Vr.warn(s.message)}}}function z_(r){return`${r.name}!${r.options.appId}`}const tS=1024,nS=30;class rS{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new sS(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Kg();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:t}),this._heartbeatsCache.heartbeats.length>nS){const o=oS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Vr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Kg(),{heartbeatsToSend:t,unsentEntries:s}=iS(this._heartbeatsCache.heartbeats),o=rc(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Vr.warn(e),""}}}function Kg(){return new Date().toISOString().substring(0,10)}function iS(r,e=tS){const t=[];let s=r.slice();for(const o of r){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),Qg(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Qg(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class sS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return W0()?H0().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await eS(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Gg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Gg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Qg(r){return rc(JSON.stringify({version:2,heartbeats:r})).length}function oS(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}function aS(r){Ro(new vs("platform-logger",e=>new vI(e),"PRIVATE")),Ro(new vs("heartbeat",e=>new rS(e),"PRIVATE")),Ri(zd,Wg,r),Ri(zd,Wg,"esm2020"),Ri("fire-js","")}aS("");function B_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const lS=B_,$_=new ll("auth","Firebase",B_());const sc=new yf("@firebase/auth");function uS(r,...e){sc.logLevel<=De.WARN&&sc.warn(`Auth (${bo}): ${r}`,...e)}function Hu(r,...e){sc.logLevel<=De.ERROR&&sc.error(`Auth (${bo}): ${r}`,...e)}function cr(r,...e){throw Ef(r,...e)}function Fn(r,...e){return Ef(r,...e)}function wf(r,e,t){const s={...lS(),[e]:t};return new ll("auth","Firebase",s).create(e,{appName:r.name})}function ys(r){return wf(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function cS(r,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&cr(r,"argument-error"),wf(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ef(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return $_.create(r,...e)}function Ee(r,e,...t){if(!r)throw Ef(e,...t)}function xr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Hu(e),new Error(e)}function Or(r,e){r||xr(e)}function qd(){return typeof self<"u"&&self.location?.href||""}function hS(){return Xg()==="http:"||Xg()==="https:"}function Xg(){return typeof self<"u"&&self.location?.protocol||null}function dS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(hS()||z0()||"connection"in navigator)?navigator.onLine:!0}function fS(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class cl{constructor(e,t){this.shortDelay=e,this.longDelay=t,Or(t>e,"Short delay should be less than long delay!"),this.isMobile=F0()||B0()}get(){return dS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Tf(r,e){Or(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class q_{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;xr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;xr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;xr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const pS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const mS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],gS=new cl(3e4,6e4);function If(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Fo(r,e,t,s,o={}){return W_(r,o,async()=>{let l={},h={};s&&(e==="GET"?h=s:l={body:JSON.stringify(s)});const p=ul({key:r.config.apiKey,...h}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const y={method:e,headers:g,...l};return j0()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&Mo(r.emulatorConfig.host)&&(y.credentials="include"),q_.fetch()(await H_(r,r.config.apiHost,t,p),y)})}async function W_(r,e,t){r._canInitEmulator=!1;const s={...pS,...e};try{const o=new _S(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw Uu(r,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const p=l.ok?h.errorMessage:h.error.message,[g,y]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Uu(r,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw Uu(r,"email-already-in-use",h);if(g==="USER_DISABLED")throw Uu(r,"user-disabled",h);const w=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw wf(r,w,y);cr(r,w)}}catch(o){if(o instanceof Ur)throw o;cr(r,"network-request-failed",{message:String(o)})}}async function yS(r,e,t,s,o={}){const l=await Fo(r,e,t,s,o);return"mfaPendingCredential"in l&&cr(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function H_(r,e,t,s){const o=`${e}${t}?${s}`,l=r,h=l.config.emulator?Tf(r.config,o):`${r.config.apiScheme}://${o}`;return mS.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}class _S{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Fn(this.auth,"network-request-failed")),gS.get())})}}function Uu(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=Fn(r,e,s);return o.customData._tokenResponse=t,o}async function vS(r,e){return Fo(r,"POST","/v1/accounts:delete",e)}async function oc(r,e){return Fo(r,"POST","/v1/accounts:lookup",e)}function qa(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function wS(r,e=!1){const t=It(r),s=await t.getIdToken(e),o=Sf(s);Ee(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l?.sign_in_provider;return{claims:o,token:s,authTime:qa(Pd(o.auth_time)),issuedAtTime:qa(Pd(o.iat)),expirationTime:qa(Pd(o.exp)),signInProvider:h||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Pd(r){return Number(r)*1e3}function Sf(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return Hu("JWT malformed, contained fewer than 3 sections"),null;try{const o=N_(t);return o?JSON.parse(o):(Hu("Failed to decode base64 JWT payload"),null)}catch(o){return Hu("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Yg(r){const e=Sf(r);return Ee(e,"internal-error"),Ee(typeof e.exp<"u","internal-error"),Ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Za(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Ur&&ES(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function ES({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class TS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Wd{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=qa(this.lastLoginAt),this.creationTime=qa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ac(r){const e=r.auth,t=await r.getIdToken(),s=await Za(r,oc(e,{idToken:t}));Ee(s?.users.length,e,"internal-error");const o=s.users[0];r._notifyReloadListener(o);const l=o.providerUserInfo?.length?G_(o.providerUserInfo):[],h=SS(r.providerData,l),p=r.isAnonymous,g=!(r.email&&o.passwordHash)&&!h?.length,y=p?g:!1,w={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Wd(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(r,w)}async function IS(r){const e=It(r);await ac(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function SS(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function G_(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function AS(r,e){const t=await W_(r,{},async()=>{const s=ul({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,h=await H_(r,o,"/v1/token",`key=${l}`),p=await r._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:s};return r.emulatorConfig&&Mo(r.emulatorConfig.host)&&(g.credentials="include"),q_.fetch()(h,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function RS(r,e){return Fo(r,"POST","/v2/accounts:revokeToken",If(r,e))}class Eo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ee(e.idToken,"internal-error"),Ee(typeof e.idToken<"u","internal-error"),Ee(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Yg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ee(e.length!==0,"internal-error");const t=Yg(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:l}=await AS(e,t);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:l}=t,h=new Eo;return s&&(Ee(typeof s=="string","internal-error",{appName:e}),h.refreshToken=s),o&&(Ee(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(Ee(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Eo,this.toJSON())}_performRefresh(){return xr("not implemented")}}function gi(r,e){Ee(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class bn{constructor({uid:e,auth:t,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new TS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Wd(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Za(this,this.stsTokenManager.getToken(this.auth,e));return Ee(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return wS(this,e)}reload(){return IS(this)}_assign(e){this!==e&&(Ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new bn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await ac(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Mn(this.auth.app))return Promise.reject(ys(this.auth));const e=await this.getIdToken();return await Za(this,vS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,h=t.photoURL??void 0,p=t.tenantId??void 0,g=t._redirectEventId??void 0,y=t.createdAt??void 0,w=t.lastLoginAt??void 0,{uid:T,emailVerified:R,isAnonymous:F,providerData:W,stsTokenManager:q}=t;Ee(T&&q,e,"internal-error");const D=Eo.fromJSON(this.name,q);Ee(typeof T=="string",e,"internal-error"),gi(s,e.name),gi(o,e.name),Ee(typeof R=="boolean",e,"internal-error"),Ee(typeof F=="boolean",e,"internal-error"),gi(l,e.name),gi(h,e.name),gi(p,e.name),gi(g,e.name),gi(y,e.name),gi(w,e.name);const ne=new bn({uid:T,auth:e,email:o,emailVerified:R,displayName:s,isAnonymous:F,photoURL:h,phoneNumber:l,tenantId:p,stsTokenManager:D,createdAt:y,lastLoginAt:w});return W&&Array.isArray(W)&&(ne.providerData=W.map(ee=>({...ee}))),g&&(ne._redirectEventId=g),ne}static async _fromIdTokenResponse(e,t,s=!1){const o=new Eo;o.updateFromServerResponse(t);const l=new bn({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await ac(l),l}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];Ee(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?G_(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!l?.length,p=new Eo;p.updateFromIdToken(s);const g=new bn({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:h}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Wd(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!l?.length};return Object.assign(g,y),g}}const Jg=new Map;function Dr(r){Or(r instanceof Function,"Expected a class definition");let e=Jg.get(r);return e?(Or(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Jg.set(r,e),e)}class K_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}K_.type="NONE";const Zg=K_;function Gu(r,e,t){return`firebase:${r}:${e}:${t}`}class To{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=Gu(this.userKey,o.apiKey,l),this.fullPersistenceKey=Gu("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await oc(this.auth,{idToken:e}).catch(()=>{});return t?bn._fromGetAccountInfoResponse(this.auth,t,e):null}return bn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new To(Dr(Zg),e,s);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=o[0]||Dr(Zg);const h=Gu(s,e.config.apiKey,e.name);let p=null;for(const y of t)try{const w=await y._get(h);if(w){let T;if(typeof w=="string"){const R=await oc(e,{idToken:w}).catch(()=>{});if(!R)break;T=await bn._fromGetAccountInfoResponse(e,R,w)}else T=bn._fromJSON(e,w);y!==l&&(p=T),l=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new To(l,e,s):(l=g[0],p&&await l._set(h,p.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(h)}catch{}})),new To(l,e,s))}}function ey(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(J_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Q_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ev(e))return"Blackberry";if(tv(e))return"Webos";if(X_(e))return"Safari";if((e.includes("chrome/")||Y_(e))&&!e.includes("edge/"))return"Chrome";if(Z_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if(s?.length===2)return s[1]}return"Other"}function Q_(r=Ht()){return/firefox\//i.test(r)}function X_(r=Ht()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Y_(r=Ht()){return/crios\//i.test(r)}function J_(r=Ht()){return/iemobile/i.test(r)}function Z_(r=Ht()){return/android/i.test(r)}function ev(r=Ht()){return/blackberry/i.test(r)}function tv(r=Ht()){return/webos/i.test(r)}function Af(r=Ht()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function CS(r=Ht()){return Af(r)&&!!window.navigator?.standalone}function PS(){return $0()&&document.documentMode===10}function nv(r=Ht()){return Af(r)||Z_(r)||tv(r)||ev(r)||/windows phone/i.test(r)||J_(r)}function rv(r,e=[]){let t;switch(r){case"Browser":t=ey(Ht());break;case"Worker":t=`${ey(Ht())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${bo}/${s}`}class kS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((h,p)=>{try{const g=e(l);h(g)}catch(g){p(g)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function NS(r,e={}){return Fo(r,"GET","/v2/passwordPolicy",If(r,e))}const xS=6;class DS{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??xS,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class VS{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ty(this),this.idTokenSubscription=new ty(this),this.beforeStateQueue=new kS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Dr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await To.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await oc(this,{idToken:e}),s=await bn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Mn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(h,h))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,h=s?._redirectEventId,p=await this.tryRedirectSignIn(e);(!l||l===h)&&p?.user&&(s=p.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ac(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=fS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Mn(this.app))return Promise.reject(ys(this));const t=e?It(e):null;return t&&Ee(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Mn(this.app)?Promise.reject(ys(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Mn(this.app)?Promise.reject(ys(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Dr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await NS(this),t=new DS(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ll("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await RS(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Dr(e)||this._popupRedirectResolver;Ee(t,this,"argument-error"),this.redirectPersistenceManager=await To.create(this,[Dr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ee(p,this,"internal-error"),p.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,s,o);return()=>{h=!0,g()}}else{const g=e.addObserver(t);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=rv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(Mn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&uS(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Cc(r){return It(r)}class ty{constructor(e){this.auth=e,this.observer=null,this.addObserver=Y0(t=>this.observer=t)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Rf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function OS(r){Rf=r}function LS(r){return Rf.loadJS(r)}function MS(){return Rf.gapiScript}function bS(r){return`__${r}${Math.floor(Math.random()*1e6)}`}function FS(r,e){const t=vf(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(_s(l,e??{}))return o;cr(o,"already-initialized")}return t.initialize({options:e})}function US(r,e){const t=e?.persistence||[],s=(Array.isArray(t)?t:[t]).map(Dr);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e?.popupRedirectResolver)}function jS(r,e,t){const s=Cc(r);Ee(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=iv(e),{host:h,port:p}=zS(e),g=p===null?"":`:${p}`,y={url:`${l}//${h}${g}/`},w=Object.freeze({host:h,port:p,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Ee(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ee(_s(y,s.config.emulator)&&_s(w,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=w,s.settings.appVerificationDisabledForTesting=!0,Mo(h)?(O_(`${l}//${h}${g}`),L_("Auth",!0)):BS()}function iv(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function zS(r){const e=iv(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:ny(s.substr(l.length+1))}}else{const[l,h]=s.split(":");return{host:l,port:ny(h)}}}function ny(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function BS(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class sv{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return xr("not implemented")}_getIdTokenResponse(e){return xr("not implemented")}_linkToIdToken(e,t){return xr("not implemented")}_getReauthenticationResolver(e){return xr("not implemented")}}async function Io(r,e){return yS(r,"POST","/v1/accounts:signInWithIdp",If(r,e))}const $S="http://localhost";class ws extends sv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ws(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):cr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...l}=t;if(!s||!o)return null;const h=new ws(s,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return Io(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Io(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Io(e,t)}buildRequest(){const e={requestUri:$S,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ul(t)}return e}}class Cf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class hl extends Cf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class yi extends hl{constructor(){super("facebook.com")}static credential(e){return ws._fromParams({providerId:yi.PROVIDER_ID,signInMethod:yi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yi.credentialFromTaggedObject(e)}static credentialFromError(e){return yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yi.credential(e.oauthAccessToken)}catch{return null}}}yi.FACEBOOK_SIGN_IN_METHOD="facebook.com";yi.PROVIDER_ID="facebook.com";class Nr extends hl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ws._fromParams({providerId:Nr.PROVIDER_ID,signInMethod:Nr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Nr.credentialFromTaggedObject(e)}static credentialFromError(e){return Nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Nr.credential(t,s)}catch{return null}}}Nr.GOOGLE_SIGN_IN_METHOD="google.com";Nr.PROVIDER_ID="google.com";class _i extends hl{constructor(){super("github.com")}static credential(e){return ws._fromParams({providerId:_i.PROVIDER_ID,signInMethod:_i.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _i.credentialFromTaggedObject(e)}static credentialFromError(e){return _i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _i.credential(e.oauthAccessToken)}catch{return null}}}_i.GITHUB_SIGN_IN_METHOD="github.com";_i.PROVIDER_ID="github.com";class vi extends hl{constructor(){super("twitter.com")}static credential(e,t){return ws._fromParams({providerId:vi.PROVIDER_ID,signInMethod:vi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return vi.credentialFromTaggedObject(e)}static credentialFromError(e){return vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return vi.credential(t,s)}catch{return null}}}vi.TWITTER_SIGN_IN_METHOD="twitter.com";vi.PROVIDER_ID="twitter.com";class Co{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const l=await bn._fromIdTokenResponse(e,s,o),h=ry(s);return new Co({user:l,providerId:h,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=ry(s);return new Co({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function ry(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}class lc extends Ur{constructor(e,t,s,o){super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,lc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new lc(e,t,s,o)}}function ov(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?lc._fromErrorAndOperation(r,l,e,s):l})}async function qS(r,e,t=!1){const s=await Za(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Co._forOperation(r,"link",s)}async function WS(r,e,t=!1){const{auth:s}=r;if(Mn(s.app))return Promise.reject(ys(s));const o="reauthenticate";try{const l=await Za(r,ov(s,o,e,r),t);Ee(l.idToken,s,"internal-error");const h=Sf(l.idToken);Ee(h,s,"internal-error");const{sub:p}=h;return Ee(r.uid===p,s,"user-mismatch"),Co._forOperation(r,o,l)}catch(l){throw l?.code==="auth/user-not-found"&&cr(s,"user-mismatch"),l}}async function HS(r,e,t=!1){if(Mn(r.app))return Promise.reject(ys(r));const s="signIn",o=await ov(r,s,e),l=await Co._fromIdTokenResponse(r,s,o);return t||await r._updateCurrentUser(l.user),l}function GS(r,e,t,s){return It(r).onIdTokenChanged(e,t,s)}function KS(r,e,t){return It(r).beforeAuthStateChanged(e,t)}function QS(r,e,t,s){return It(r).onAuthStateChanged(e,t,s)}function XS(r){return It(r).signOut()}const uc="__sak";class av{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(uc,"1"),this.storage.removeItem(uc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const YS=1e3,JS=10;class lv extends av{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=nv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,p,g)=>{this.notifyListeners(h,g)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(s);!t&&this.localCache[s]===h||this.notifyListeners(s,h)},l=this.storage.getItem(s);PS()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,JS):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},YS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}lv.type="LOCAL";const ZS=lv;class uv extends av{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}uv.type="SESSION";const cv=uv;function e1(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Pc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new Pc(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!h?.size)return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const p=Array.from(h).map(async y=>y(t.origin,l)),g=await e1(p);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Pc.receivers=[];function Pf(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}class t1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((p,g)=>{const y=Pf("",20);o.port1.start();const w=setTimeout(()=>{g(new Error("unsupported_event"))},s);h={messageChannel:o,onMessage(T){const R=T;if(R.data.eventId===y)switch(R.data.status){case"ack":clearTimeout(w),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),p(R.data.response);break;default:clearTimeout(w),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}function sr(){return window}function n1(r){sr().location.href=r}function hv(){return typeof sr().WorkerGlobalScope<"u"&&typeof sr().importScripts=="function"}async function r1(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function i1(){return navigator?.serviceWorker?.controller||null}function s1(){return hv()?self:null}const dv="firebaseLocalStorageDb",o1=1,cc="firebaseLocalStorage",fv="fbase_key";class dl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function kc(r,e){return r.transaction([cc],e?"readwrite":"readonly").objectStore(cc)}function a1(){const r=indexedDB.deleteDatabase(dv);return new dl(r).toPromise()}function Hd(){const r=indexedDB.open(dv,o1);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(cc,{keyPath:fv})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(cc)?e(s):(s.close(),await a1(),e(await Hd()))})})}async function iy(r,e,t){const s=kc(r,!0).put({[fv]:e,value:t});return new dl(s).toPromise()}async function l1(r,e){const t=kc(r,!1).get(e),s=await new dl(t).toPromise();return s===void 0?null:s.value}function sy(r,e){const t=kc(r,!0).delete(e);return new dl(t).toPromise()}const u1=800,c1=3;class pv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Hd(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>c1)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return hv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Pc._getInstance(s1()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await r1(),!this.activeServiceWorker)return;this.sender=new t1(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||i1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Hd();return await iy(e,uc,"1"),await sy(e,uc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>iy(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>l1(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>sy(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=kc(o,!1).getAll();return new dl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),u1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}pv.type="LOCAL";const h1=pv;new cl(3e4,6e4);function mv(r,e){return e?Dr(e):(Ee(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class kf extends sv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Io(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Io(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Io(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function d1(r){return HS(r.auth,new kf(r),r.bypassAuthState)}function f1(r){const{auth:e,user:t}=r;return Ee(t,e,"internal-error"),WS(t,new kf(r),r.bypassAuthState)}async function p1(r){const{auth:e,user:t}=r;return Ee(t,e,"internal-error"),qS(t,new kf(r),r.bypassAuthState)}class gv{constructor(e,t,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:l,error:h,type:p}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return d1;case"linkViaPopup":case"linkViaRedirect":return p1;case"reauthViaPopup":case"reauthViaRedirect":return f1;default:cr(this.auth,"internal-error")}}resolve(e){Or(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Or(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const m1=new cl(2e3,1e4);async function g1(r,e,t){if(Mn(r.app))return Promise.reject(Fn(r,"operation-not-supported-in-this-environment"));const s=Cc(r);cS(r,e,Cf);const o=mv(s,t);return new ms(s,"signInViaPopup",e,o).executeNotNull()}class ms extends gv{constructor(e,t,s,o,l){super(e,t,o,l),this.provider=s,this.authWindow=null,this.pollId=null,ms.currentPopupAction&&ms.currentPopupAction.cancel(),ms.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ee(e,this.auth,"internal-error"),e}async onExecution(){Or(this.filter.length===1,"Popup operations only handle one event");const e=Pf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Fn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Fn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ms.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,m1.get())};e()}}ms.currentPopupAction=null;const y1="pendingRedirect",Ku=new Map;class _1 extends gv{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Ku.get(this.auth._key());if(!e){try{const s=await v1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Ku.set(this.auth._key(),e)}return this.bypassAuthState||Ku.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function v1(r,e){const t=T1(e),s=E1(r);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function w1(r,e){Ku.set(r._key(),e)}function E1(r){return Dr(r._redirectPersistence)}function T1(r){return Gu(y1,r.config.apiKey,r.name)}async function I1(r,e,t=!1){if(Mn(r.app))return Promise.reject(ys(r));const s=Cc(r),o=mv(s,e),h=await new _1(s,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await s._persistUserIfCurrent(h.user),await s._setRedirectUser(null,e)),h}const S1=600*1e3;class A1{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!R1(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!yv(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Fn(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=S1&&this.cachedEventUids.clear(),this.cachedEventUids.has(oy(e))}saveEventToCache(e){this.cachedEventUids.add(oy(e)),this.lastProcessedEventTime=Date.now()}}function oy(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function yv({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function R1(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yv(r);default:return!1}}async function C1(r,e={}){return Fo(r,"GET","/v1/projects",e)}const P1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,k1=/^https?/;async function N1(r){if(r.config.emulator)return;const{authorizedDomains:e}=await C1(r);for(const t of e)try{if(x1(t))return}catch{}cr(r,"unauthorized-domain")}function x1(r){const e=qd(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===s}if(!k1.test(t))return!1;if(P1.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const D1=new cl(3e4,6e4);function ay(){const r=sr().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function V1(r){return new Promise((e,t)=>{function s(){ay(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ay(),t(Fn(r,"network-request-failed"))},timeout:D1.get()})}if(sr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(sr().gapi?.load)s();else{const o=bS("iframefcb");return sr()[o]=()=>{gapi.load?s():t(Fn(r,"network-request-failed"))},LS(`${MS()}?onload=${o}`).catch(l=>t(l))}}).catch(e=>{throw Qu=null,e})}let Qu=null;function O1(r){return Qu=Qu||V1(r),Qu}const L1=new cl(5e3,15e3),M1="__/auth/iframe",b1="emulator/auth/iframe",F1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},U1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function j1(r){const e=r.config;Ee(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Tf(e,b1):`https://${r.config.authDomain}/${M1}`,s={apiKey:e.apiKey,appName:r.name,v:bo},o=U1.get(r.config.apiHost);o&&(s.eid=o);const l=r._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${ul(s).slice(1)}`}async function z1(r){const e=await O1(r),t=sr().gapi;return Ee(t,r,"internal-error"),e.open({where:document.body,url:j1(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:F1,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const h=Fn(r,"network-request-failed"),p=sr().setTimeout(()=>{l(h)},L1.get());function g(){sr().clearTimeout(p),o(s)}s.ping(g).then(g,()=>{l(h)})}))}const B1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},$1=500,q1=600,W1="_blank",H1="http://localhost";class ly{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function G1(r,e,t,s=$1,o=q1){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-s)/2,0).toString();let p="";const g={...B1,width:s.toString(),height:o.toString(),top:l,left:h},y=Ht().toLowerCase();t&&(p=Y_(y)?W1:t),Q_(y)&&(e=e||H1,g.scrollbars="yes");const w=Object.entries(g).reduce((R,[F,W])=>`${R}${F}=${W},`,"");if(CS(y)&&p!=="_self")return K1(e||"",p),new ly(null);const T=window.open(e||"",p,w);Ee(T,r,"popup-blocked");try{T.focus()}catch{}return new ly(T)}function K1(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}const Q1="__/auth/handler",X1="emulator/auth/handler",Y1=encodeURIComponent("fac");async function uy(r,e,t,s,o,l){Ee(r.config.authDomain,r,"auth-domain-config-required"),Ee(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:bo,eventId:o};if(e instanceof Cf){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",X0(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,T]of Object.entries({}))h[w]=T}if(e instanceof hl){const w=e.getScopes().filter(T=>T!=="");w.length>0&&(h.scopes=w.join(","))}r.tenantId&&(h.tid=r.tenantId);const p=h;for(const w of Object.keys(p))p[w]===void 0&&delete p[w];const g=await r._getAppCheckToken(),y=g?`#${Y1}=${encodeURIComponent(g)}`:"";return`${J1(r)}?${ul(p).slice(1)}${y}`}function J1({config:r}){return r.emulator?Tf(r,X1):`https://${r.authDomain}/${Q1}`}const kd="webStorageSupport";class Z1{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=cv,this._completeRedirectFn=I1,this._overrideRedirectResult=w1}async _openPopup(e,t,s,o){Or(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await uy(e,t,s,qd(),o);return G1(e,l,Pf())}async _openRedirect(e,t,s,o){await this._originValidation(e);const l=await uy(e,t,s,qd(),o);return n1(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Or(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await z1(e),s=new A1(e);return t.register("authEvent",o=>(Ee(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(kd,{type:kd},o=>{const l=o?.[0]?.[kd];l!==void 0&&t(!!l),cr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=N1(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return nv()||X_()||Af()}}const eA=Z1;var cy="@firebase/auth",hy="1.12.0";class tA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function nA(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function rA(r){Ro(new vs("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:p}=s.options;Ee(h&&!h.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:h,authDomain:p,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rv(r)},y=new VS(s,o,l,g);return US(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Ro(new vs("auth-internal",e=>{const t=Cc(e.getProvider("auth").getImmediate());return(s=>new tA(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ri(cy,hy,nA(r)),Ri(cy,hy,"esm2020")}const iA=300,sA=V_("authIdTokenMaxAge")||iA;let dy=null;const oA=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>sA)return;const o=t?.token;dy!==o&&(dy=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function aA(r=U_()){const e=vf(r,"auth");if(e.isInitialized())return e.getImmediate();const t=FS(r,{popupRedirectResolver:eA,persistence:[h1,ZS,cv]}),s=V_("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const h=oA(l.toString());KS(t,h,()=>h(t.currentUser)),GS(t,p=>h(p))}}const o=x_("auth");return o&&jS(t,`http://${o}`),t}function lA(){return document.getElementsByTagName("head")?.[0]??document}OS({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const l=Fn("internal-error");l.customData=o,t(l)},s.type="text/javascript",s.charset="UTF-8",lA().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});rA("Browser");var fy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ci,_v;(function(){var r;function e(P,I){function C(){}C.prototype=I.prototype,P.F=I.prototype,P.prototype=new C,P.prototype.constructor=P,P.D=function(x,k,O){for(var A=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)A[pe-2]=arguments[pe];return I.prototype[k].apply(x,A)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(P,I,C){C||(C=0);const x=Array(16);if(typeof I=="string")for(var k=0;k<16;++k)x[k]=I.charCodeAt(C++)|I.charCodeAt(C++)<<8|I.charCodeAt(C++)<<16|I.charCodeAt(C++)<<24;else for(k=0;k<16;++k)x[k]=I[C++]|I[C++]<<8|I[C++]<<16|I[C++]<<24;I=P.g[0],C=P.g[1],k=P.g[2];let O=P.g[3],A;A=I+(O^C&(k^O))+x[0]+3614090360&4294967295,I=C+(A<<7&4294967295|A>>>25),A=O+(k^I&(C^k))+x[1]+3905402710&4294967295,O=I+(A<<12&4294967295|A>>>20),A=k+(C^O&(I^C))+x[2]+606105819&4294967295,k=O+(A<<17&4294967295|A>>>15),A=C+(I^k&(O^I))+x[3]+3250441966&4294967295,C=k+(A<<22&4294967295|A>>>10),A=I+(O^C&(k^O))+x[4]+4118548399&4294967295,I=C+(A<<7&4294967295|A>>>25),A=O+(k^I&(C^k))+x[5]+1200080426&4294967295,O=I+(A<<12&4294967295|A>>>20),A=k+(C^O&(I^C))+x[6]+2821735955&4294967295,k=O+(A<<17&4294967295|A>>>15),A=C+(I^k&(O^I))+x[7]+4249261313&4294967295,C=k+(A<<22&4294967295|A>>>10),A=I+(O^C&(k^O))+x[8]+1770035416&4294967295,I=C+(A<<7&4294967295|A>>>25),A=O+(k^I&(C^k))+x[9]+2336552879&4294967295,O=I+(A<<12&4294967295|A>>>20),A=k+(C^O&(I^C))+x[10]+4294925233&4294967295,k=O+(A<<17&4294967295|A>>>15),A=C+(I^k&(O^I))+x[11]+2304563134&4294967295,C=k+(A<<22&4294967295|A>>>10),A=I+(O^C&(k^O))+x[12]+1804603682&4294967295,I=C+(A<<7&4294967295|A>>>25),A=O+(k^I&(C^k))+x[13]+4254626195&4294967295,O=I+(A<<12&4294967295|A>>>20),A=k+(C^O&(I^C))+x[14]+2792965006&4294967295,k=O+(A<<17&4294967295|A>>>15),A=C+(I^k&(O^I))+x[15]+1236535329&4294967295,C=k+(A<<22&4294967295|A>>>10),A=I+(k^O&(C^k))+x[1]+4129170786&4294967295,I=C+(A<<5&4294967295|A>>>27),A=O+(C^k&(I^C))+x[6]+3225465664&4294967295,O=I+(A<<9&4294967295|A>>>23),A=k+(I^C&(O^I))+x[11]+643717713&4294967295,k=O+(A<<14&4294967295|A>>>18),A=C+(O^I&(k^O))+x[0]+3921069994&4294967295,C=k+(A<<20&4294967295|A>>>12),A=I+(k^O&(C^k))+x[5]+3593408605&4294967295,I=C+(A<<5&4294967295|A>>>27),A=O+(C^k&(I^C))+x[10]+38016083&4294967295,O=I+(A<<9&4294967295|A>>>23),A=k+(I^C&(O^I))+x[15]+3634488961&4294967295,k=O+(A<<14&4294967295|A>>>18),A=C+(O^I&(k^O))+x[4]+3889429448&4294967295,C=k+(A<<20&4294967295|A>>>12),A=I+(k^O&(C^k))+x[9]+568446438&4294967295,I=C+(A<<5&4294967295|A>>>27),A=O+(C^k&(I^C))+x[14]+3275163606&4294967295,O=I+(A<<9&4294967295|A>>>23),A=k+(I^C&(O^I))+x[3]+4107603335&4294967295,k=O+(A<<14&4294967295|A>>>18),A=C+(O^I&(k^O))+x[8]+1163531501&4294967295,C=k+(A<<20&4294967295|A>>>12),A=I+(k^O&(C^k))+x[13]+2850285829&4294967295,I=C+(A<<5&4294967295|A>>>27),A=O+(C^k&(I^C))+x[2]+4243563512&4294967295,O=I+(A<<9&4294967295|A>>>23),A=k+(I^C&(O^I))+x[7]+1735328473&4294967295,k=O+(A<<14&4294967295|A>>>18),A=C+(O^I&(k^O))+x[12]+2368359562&4294967295,C=k+(A<<20&4294967295|A>>>12),A=I+(C^k^O)+x[5]+4294588738&4294967295,I=C+(A<<4&4294967295|A>>>28),A=O+(I^C^k)+x[8]+2272392833&4294967295,O=I+(A<<11&4294967295|A>>>21),A=k+(O^I^C)+x[11]+1839030562&4294967295,k=O+(A<<16&4294967295|A>>>16),A=C+(k^O^I)+x[14]+4259657740&4294967295,C=k+(A<<23&4294967295|A>>>9),A=I+(C^k^O)+x[1]+2763975236&4294967295,I=C+(A<<4&4294967295|A>>>28),A=O+(I^C^k)+x[4]+1272893353&4294967295,O=I+(A<<11&4294967295|A>>>21),A=k+(O^I^C)+x[7]+4139469664&4294967295,k=O+(A<<16&4294967295|A>>>16),A=C+(k^O^I)+x[10]+3200236656&4294967295,C=k+(A<<23&4294967295|A>>>9),A=I+(C^k^O)+x[13]+681279174&4294967295,I=C+(A<<4&4294967295|A>>>28),A=O+(I^C^k)+x[0]+3936430074&4294967295,O=I+(A<<11&4294967295|A>>>21),A=k+(O^I^C)+x[3]+3572445317&4294967295,k=O+(A<<16&4294967295|A>>>16),A=C+(k^O^I)+x[6]+76029189&4294967295,C=k+(A<<23&4294967295|A>>>9),A=I+(C^k^O)+x[9]+3654602809&4294967295,I=C+(A<<4&4294967295|A>>>28),A=O+(I^C^k)+x[12]+3873151461&4294967295,O=I+(A<<11&4294967295|A>>>21),A=k+(O^I^C)+x[15]+530742520&4294967295,k=O+(A<<16&4294967295|A>>>16),A=C+(k^O^I)+x[2]+3299628645&4294967295,C=k+(A<<23&4294967295|A>>>9),A=I+(k^(C|~O))+x[0]+4096336452&4294967295,I=C+(A<<6&4294967295|A>>>26),A=O+(C^(I|~k))+x[7]+1126891415&4294967295,O=I+(A<<10&4294967295|A>>>22),A=k+(I^(O|~C))+x[14]+2878612391&4294967295,k=O+(A<<15&4294967295|A>>>17),A=C+(O^(k|~I))+x[5]+4237533241&4294967295,C=k+(A<<21&4294967295|A>>>11),A=I+(k^(C|~O))+x[12]+1700485571&4294967295,I=C+(A<<6&4294967295|A>>>26),A=O+(C^(I|~k))+x[3]+2399980690&4294967295,O=I+(A<<10&4294967295|A>>>22),A=k+(I^(O|~C))+x[10]+4293915773&4294967295,k=O+(A<<15&4294967295|A>>>17),A=C+(O^(k|~I))+x[1]+2240044497&4294967295,C=k+(A<<21&4294967295|A>>>11),A=I+(k^(C|~O))+x[8]+1873313359&4294967295,I=C+(A<<6&4294967295|A>>>26),A=O+(C^(I|~k))+x[15]+4264355552&4294967295,O=I+(A<<10&4294967295|A>>>22),A=k+(I^(O|~C))+x[6]+2734768916&4294967295,k=O+(A<<15&4294967295|A>>>17),A=C+(O^(k|~I))+x[13]+1309151649&4294967295,C=k+(A<<21&4294967295|A>>>11),A=I+(k^(C|~O))+x[4]+4149444226&4294967295,I=C+(A<<6&4294967295|A>>>26),A=O+(C^(I|~k))+x[11]+3174756917&4294967295,O=I+(A<<10&4294967295|A>>>22),A=k+(I^(O|~C))+x[2]+718787259&4294967295,k=O+(A<<15&4294967295|A>>>17),A=C+(O^(k|~I))+x[9]+3951481745&4294967295,P.g[0]=P.g[0]+I&4294967295,P.g[1]=P.g[1]+(k+(A<<21&4294967295|A>>>11))&4294967295,P.g[2]=P.g[2]+k&4294967295,P.g[3]=P.g[3]+O&4294967295}s.prototype.v=function(P,I){I===void 0&&(I=P.length);const C=I-this.blockSize,x=this.C;let k=this.h,O=0;for(;O<I;){if(k==0)for(;O<=C;)o(this,P,O),O+=this.blockSize;if(typeof P=="string"){for(;O<I;)if(x[k++]=P.charCodeAt(O++),k==this.blockSize){o(this,x),k=0;break}}else for(;O<I;)if(x[k++]=P[O++],k==this.blockSize){o(this,x),k=0;break}}this.h=k,this.o+=I},s.prototype.A=function(){var P=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);P[0]=128;for(var I=1;I<P.length-8;++I)P[I]=0;I=this.o*8;for(var C=P.length-8;C<P.length;++C)P[C]=I&255,I/=256;for(this.v(P),P=Array(16),I=0,C=0;C<4;++C)for(let x=0;x<32;x+=8)P[I++]=this.g[C]>>>x&255;return P};function l(P,I){var C=p;return Object.prototype.hasOwnProperty.call(C,P)?C[P]:C[P]=I(P)}function h(P,I){this.h=I;const C=[];let x=!0;for(let k=P.length-1;k>=0;k--){const O=P[k]|0;x&&O==I||(C[k]=O,x=!1)}this.g=C}var p={};function g(P){return-128<=P&&P<128?l(P,function(I){return new h([I|0],I<0?-1:0)}):new h([P|0],P<0?-1:0)}function y(P){if(isNaN(P)||!isFinite(P))return T;if(P<0)return D(y(-P));const I=[];let C=1;for(let x=0;P>=C;x++)I[x]=P/C|0,C*=4294967296;return new h(I,0)}function w(P,I){if(P.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(P.charAt(0)=="-")return D(w(P.substring(1),I));if(P.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=y(Math.pow(I,8));let x=T;for(let O=0;O<P.length;O+=8){var k=Math.min(8,P.length-O);const A=parseInt(P.substring(O,O+k),I);k<8?(k=y(Math.pow(I,k)),x=x.j(k).add(y(A))):(x=x.j(C),x=x.add(y(A)))}return x}var T=g(0),R=g(1),F=g(16777216);r=h.prototype,r.m=function(){if(q(this))return-D(this).m();let P=0,I=1;for(let C=0;C<this.g.length;C++){const x=this.i(C);P+=(x>=0?x:4294967296+x)*I,I*=4294967296}return P},r.toString=function(P){if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(W(this))return"0";if(q(this))return"-"+D(this).toString(P);const I=y(Math.pow(P,6));var C=this;let x="";for(;;){const k=he(C,I).g;C=ne(C,k.j(I));let O=((C.g.length>0?C.g[0]:C.h)>>>0).toString(P);if(C=k,W(C))return O+x;for(;O.length<6;)O="0"+O;x=O+x}},r.i=function(P){return P<0?0:P<this.g.length?this.g[P]:this.h};function W(P){if(P.h!=0)return!1;for(let I=0;I<P.g.length;I++)if(P.g[I]!=0)return!1;return!0}function q(P){return P.h==-1}r.l=function(P){return P=ne(this,P),q(P)?-1:W(P)?0:1};function D(P){const I=P.g.length,C=[];for(let x=0;x<I;x++)C[x]=~P.g[x];return new h(C,~P.h).add(R)}r.abs=function(){return q(this)?D(this):this},r.add=function(P){const I=Math.max(this.g.length,P.g.length),C=[];let x=0;for(let k=0;k<=I;k++){let O=x+(this.i(k)&65535)+(P.i(k)&65535),A=(O>>>16)+(this.i(k)>>>16)+(P.i(k)>>>16);x=A>>>16,O&=65535,A&=65535,C[k]=A<<16|O}return new h(C,C[C.length-1]&-2147483648?-1:0)};function ne(P,I){return P.add(D(I))}r.j=function(P){if(W(this)||W(P))return T;if(q(this))return q(P)?D(this).j(D(P)):D(D(this).j(P));if(q(P))return D(this.j(D(P)));if(this.l(F)<0&&P.l(F)<0)return y(this.m()*P.m());const I=this.g.length+P.g.length,C=[];for(var x=0;x<2*I;x++)C[x]=0;for(x=0;x<this.g.length;x++)for(let k=0;k<P.g.length;k++){const O=this.i(x)>>>16,A=this.i(x)&65535,pe=P.i(k)>>>16,Ue=P.i(k)&65535;C[2*x+2*k]+=A*Ue,ee(C,2*x+2*k),C[2*x+2*k+1]+=O*Ue,ee(C,2*x+2*k+1),C[2*x+2*k+1]+=A*pe,ee(C,2*x+2*k+1),C[2*x+2*k+2]+=O*pe,ee(C,2*x+2*k+2)}for(P=0;P<I;P++)C[P]=C[2*P+1]<<16|C[2*P];for(P=I;P<2*I;P++)C[P]=0;return new h(C,0)};function ee(P,I){for(;(P[I]&65535)!=P[I];)P[I+1]+=P[I]>>>16,P[I]&=65535,I++}function te(P,I){this.g=P,this.h=I}function he(P,I){if(W(I))throw Error("division by zero");if(W(P))return new te(T,T);if(q(P))return I=he(D(P),I),new te(D(I.g),D(I.h));if(q(I))return I=he(P,D(I)),new te(D(I.g),I.h);if(P.g.length>30){if(q(P)||q(I))throw Error("slowDivide_ only works with positive integers.");for(var C=R,x=I;x.l(P)<=0;)C=Te(C),x=Te(x);var k=Pe(C,1),O=Pe(x,1);for(x=Pe(x,2),C=Pe(C,2);!W(x);){var A=O.add(x);A.l(P)<=0&&(k=k.add(C),O=A),x=Pe(x,1),C=Pe(C,1)}return I=ne(P,k.j(I)),new te(k,I)}for(k=T;P.l(I)>=0;){for(C=Math.max(1,Math.floor(P.m()/I.m())),x=Math.ceil(Math.log(C)/Math.LN2),x=x<=48?1:Math.pow(2,x-48),O=y(C),A=O.j(I);q(A)||A.l(P)>0;)C-=x,O=y(C),A=O.j(I);W(O)&&(O=R),k=k.add(O),P=ne(P,A)}return new te(k,P)}r.B=function(P){return he(this,P).h},r.and=function(P){const I=Math.max(this.g.length,P.g.length),C=[];for(let x=0;x<I;x++)C[x]=this.i(x)&P.i(x);return new h(C,this.h&P.h)},r.or=function(P){const I=Math.max(this.g.length,P.g.length),C=[];for(let x=0;x<I;x++)C[x]=this.i(x)|P.i(x);return new h(C,this.h|P.h)},r.xor=function(P){const I=Math.max(this.g.length,P.g.length),C=[];for(let x=0;x<I;x++)C[x]=this.i(x)^P.i(x);return new h(C,this.h^P.h)};function Te(P){const I=P.g.length+1,C=[];for(let x=0;x<I;x++)C[x]=P.i(x)<<1|P.i(x-1)>>>31;return new h(C,P.h)}function Pe(P,I){const C=I>>5;I%=32;const x=P.g.length-C,k=[];for(let O=0;O<x;O++)k[O]=I>0?P.i(O+C)>>>I|P.i(O+C+1)<<32-I:P.i(O+C);return new h(k,P.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,_v=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=w,Ci=h}).apply(typeof fy<"u"?fy:typeof self<"u"?self:typeof window<"u"?window:{});var ju=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var vv,ja,wv,Xu,Gd,Ev,Tv,Iv;(function(){var r,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof ju=="object"&&ju];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=t(this);function o(u,m){if(m)e:{var _=s;u=u.split(".");for(var E=0;E<u.length-1;E++){var b=u[E];if(!(b in _))break e;_=_[b]}u=u[u.length-1],E=_[u],m=m(E),m!=E&&m!=null&&e(_,u,{configurable:!0,writable:!0,value:m})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(m){var _=[],E;for(E in m)Object.prototype.hasOwnProperty.call(m,E)&&_.push([E,m[E]]);return _}});var l=l||{},h=this||self;function p(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function g(u,m,_){return u.call.apply(u.bind,arguments)}function y(u,m,_){return y=g,y.apply(null,arguments)}function w(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var E=_.slice();return E.push.apply(E,arguments),u.apply(this,E)}}function T(u,m){function _(){}_.prototype=m.prototype,u.Z=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Ob=function(E,b,B){for(var Z=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)Z[Ce-2]=arguments[Ce];return m.prototype[b].apply(E,Z)}}var R=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function F(u){const m=u.length;if(m>0){const _=Array(m);for(let E=0;E<m;E++)_[E]=u[E];return _}return[]}function W(u,m){for(let E=1;E<arguments.length;E++){const b=arguments[E];var _=typeof b;if(_=_!="object"?_:b?Array.isArray(b)?"array":_:"null",_=="array"||_=="object"&&typeof b.length=="number"){_=u.length||0;const B=b.length||0;u.length=_+B;for(let Z=0;Z<B;Z++)u[_+Z]=b[Z]}else u.push(b)}}class q{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function D(u){h.setTimeout(()=>{throw u},0)}function ne(){var u=P;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class ee{constructor(){this.h=this.g=null}add(m,_){const E=te.get();E.set(m,_),this.h?this.h.next=E:this.g=E,this.h=E}}var te=new q(()=>new he,u=>u.reset());class he{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Te,Pe=!1,P=new ee,I=()=>{const u=Promise.resolve(void 0);Te=()=>{u.then(C)}};function C(){for(var u;u=ne();){try{u.h.call(u.g)}catch(_){D(_)}var m=te;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}Pe=!1}function x(){this.u=this.u,this.C=this.C}x.prototype.u=!1,x.prototype.dispose=function(){this.u||(this.u=!0,this.N())},x.prototype[Symbol.dispose]=function(){this.dispose()},x.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var O=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};h.addEventListener("test",_,m),h.removeEventListener("test",_,m)}catch{}return u})();function A(u){return/^[\s\xa0]*$/.test(u)}function pe(u,m){k.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}T(pe,k),pe.prototype.init=function(u,m){const _=this.type=u.type,E=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(_=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&pe.Z.h.call(this)},pe.prototype.h=function(){pe.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ue="closure_listenable_"+(Math.random()*1e6|0),qe=0;function Ae(u,m,_,E,b){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!E,this.ha=b,this.key=++qe,this.da=this.fa=!1}function Y(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function fe(u,m,_){for(const E in u)m.call(_,u[E],E,u)}function ie(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function L(u){const m={};for(const _ in u)m[_]=u[_];return m}const G="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ie(u,m){let _,E;for(let b=1;b<arguments.length;b++){E=arguments[b];for(_ in E)u[_]=E[_];for(let B=0;B<G.length;B++)_=G[B],Object.prototype.hasOwnProperty.call(E,_)&&(u[_]=E[_])}}function Re(u){this.src=u,this.g={},this.h=0}Re.prototype.add=function(u,m,_,E,b){const B=u.toString();u=this.g[B],u||(u=this.g[B]=[],this.h++);const Z=Ne(u,m,E,b);return Z>-1?(m=u[Z],_||(m.fa=!1)):(m=new Ae(m,this.src,B,!!E,b),m.fa=_,u.push(m)),m};function ke(u,m){const _=m.type;if(_ in u.g){var E=u.g[_],b=Array.prototype.indexOf.call(E,m,void 0),B;(B=b>=0)&&Array.prototype.splice.call(E,b,1),B&&(Y(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Ne(u,m,_,E){for(let b=0;b<u.length;++b){const B=u[b];if(!B.da&&B.listener==m&&B.capture==!!_&&B.ha==E)return b}return-1}var je="closure_lm_"+(Math.random()*1e6|0),Le={};function We(u,m,_,E,b){if(Array.isArray(m)){for(let B=0;B<m.length;B++)We(u,m[B],_,E,b);return null}return _=Ho(_),u&&u[Ue]?u.J(m,_,p(E)?!!E.capture:!1,b):St(u,m,_,!1,E,b)}function St(u,m,_,E,b,B){if(!m)throw Error("Invalid event type");const Z=p(b)?!!b.capture:!!b;let Ce=ks(u);if(Ce||(u[je]=Ce=new Re(u)),_=Ce.add(m,_,E,Z,B),_.proxy)return _;if(E=gn(),_.proxy=E,E.src=u,E.listener=_,u.addEventListener)O||(b=Z),b===void 0&&(b=!1),u.addEventListener(m.toString(),E,b);else if(u.attachEvent)u.attachEvent(Ps(m.toString()),E);else if(u.addListener&&u.removeListener)u.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return _}function gn(){function u(_){return m.call(u.src,u.listener,_)}const m=Il;return u}function Wo(u,m,_,E,b){if(Array.isArray(m))for(var B=0;B<m.length;B++)Wo(u,m[B],_,E,b);else E=p(E)?!!E.capture:!!E,_=Ho(_),u&&u[Ue]?(u=u.i,B=String(m).toString(),B in u.g&&(m=u.g[B],_=Ne(m,_,E,b),_>-1&&(Y(m[_]),Array.prototype.splice.call(m,_,1),m.length==0&&(delete u.g[B],u.h--)))):u&&(u=ks(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Ne(m,_,E,b)),(_=u>-1?m[u]:null)&&jr(_))}function jr(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Ue])ke(m.i,u);else{var _=u.type,E=u.proxy;m.removeEventListener?m.removeEventListener(_,E,u.capture):m.detachEvent?m.detachEvent(Ps(_),E):m.addListener&&m.removeListener&&m.removeListener(E),(_=ks(m))?(ke(_,u),_.h==0&&(_.src=null,m[je]=null)):Y(u)}}}function Ps(u){return u in Le?Le[u]:Le[u]="on"+u}function Il(u,m){if(u.da)u=!0;else{m=new pe(m,this);const _=u.listener,E=u.ha||u.src;u.fa&&jr(u),u=_.call(E,m)}return u}function ks(u){return u=u[je],u instanceof Re?u:null}var ji="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ho(u){return typeof u=="function"?u:(u[ji]||(u[ji]=function(m){return u.handleEvent(m)}),u[ji])}function pt(){x.call(this),this.i=new Re(this),this.M=this,this.G=null}T(pt,x),pt.prototype[Ue]=!0,pt.prototype.removeEventListener=function(u,m,_,E){Wo(this,u,m,_,E)};function lt(u,m){var _,E=u.G;if(E)for(_=[];E;E=E.G)_.push(E);if(u=u.M,E=m.type||m,typeof m=="string")m=new k(m,u);else if(m instanceof k)m.target=m.target||u;else{var b=m;m=new k(E,u),Ie(m,b)}b=!0;let B,Z;if(_)for(Z=_.length-1;Z>=0;Z--)B=m.g=_[Z],b=An(B,E,!0,m)&&b;if(B=m.g=u,b=An(B,E,!0,m)&&b,b=An(B,E,!1,m)&&b,_)for(Z=0;Z<_.length;Z++)B=m.g=_[Z],b=An(B,E,!1,m)&&b}pt.prototype.N=function(){if(pt.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const _=u.g[m];for(let E=0;E<_.length;E++)Y(_[E]);delete u.g[m],u.h--}}this.G=null},pt.prototype.J=function(u,m,_,E){return this.i.add(String(u),m,!1,_,E)},pt.prototype.K=function(u,m,_,E){return this.i.add(String(u),m,!0,_,E)};function An(u,m,_,E){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let b=!0;for(let B=0;B<m.length;++B){const Z=m[B];if(Z&&!Z.da&&Z.capture==_){const Ce=Z.listener,ut=Z.ha||Z.src;Z.fa&&ke(u.i,Z),b=Ce.call(ut,E)!==!1&&b}}return b&&!E.defaultPrevented}function Go(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=y(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:h.setTimeout(u,m||0)}function Ko(u){u.g=Go(()=>{u.g=null,u.i&&(u.i=!1,Ko(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Sl extends x{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Ko(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zr(u){x.call(this),this.h=u,this.g={}}T(zr,x);var Qo=[];function Ns(u){fe(u.g,function(m,_){this.g.hasOwnProperty(_)&&jr(m)},u),u.g={}}zr.prototype.N=function(){zr.Z.N.call(this),Ns(this)},zr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Br=h.JSON.stringify,Al=h.JSON.parse,zi=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function $r(){}function Rl(){}var qr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function xs(){k.call(this,"d")}T(xs,k);function Xo(){k.call(this,"c")}T(Xo,k);var Rn={},Ds=null;function Wr(){return Ds=Ds||new pt}Rn.Ia="serverreachability";function Vs(u){k.call(this,Rn.Ia,u)}T(Vs,k);function dr(u){const m=Wr();lt(m,new Vs(m))}Rn.STAT_EVENT="statevent";function fr(u,m){k.call(this,Rn.STAT_EVENT,u),this.stat=m}T(fr,k);function ot(u){const m=Wr();lt(m,new fr(m,u))}Rn.Ja="timingevent";function Yo(u,m){k.call(this,Rn.Ja,u),this.size=m}T(Yo,k);function Hr(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},m)}function Gr(){this.g=!0}Gr.prototype.ua=function(){this.g=!1};function Cl(u,m,_,E,b,B){u.info(function(){if(u.g)if(B){var Z="",Ce=B.split("&");for(let He=0;He<Ce.length;He++){var ut=Ce[He].split("=");if(ut.length>1){const mt=ut[0];ut=ut[1];const un=mt.split("_");Z=un.length>=2&&un[1]=="type"?Z+(mt+"="+ut+"&"):Z+(mt+"=redacted&")}}}else Z=null;else Z=B;return"XMLHTTP REQ ("+E+") [attempt "+b+"]: "+m+`
`+_+`
`+Z})}function Pl(u,m,_,E,b,B,Z){u.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+b+"]: "+m+`
`+_+`
`+B+" "+Z})}function jn(u,m,_,E){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Bi(u,_)+(E?" "+E:"")})}function kl(u,m){u.info(function(){return"TIMEOUT: "+m})}Gr.prototype.info=function(){};function Bi(u,m){if(!u.g)return m;if(!m)return null;try{const B=JSON.parse(m);if(B){for(u=0;u<B.length;u++)if(Array.isArray(B[u])){var _=B[u];if(!(_.length<2)){var E=_[1];if(Array.isArray(E)&&!(E.length<1)){var b=E[0];if(b!="noop"&&b!="stop"&&b!="close")for(let Z=1;Z<E.length;Z++)E[Z]=""}}}}return Br(B)}catch{return m}}var Kr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Qr={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Nl;function pr(){}T(pr,$r),pr.prototype.g=function(){return new XMLHttpRequest},Nl=new pr;function zn(u){return encodeURIComponent(String(u))}function Os(u){var m=1;u=u.split(":");const _=[];for(;m>0&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function yn(u,m,_,E){this.j=u,this.i=m,this.l=_,this.S=E||1,this.V=new zr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new xl}function xl(){this.i=null,this.g="",this.h=!1}var Dl={},Jo={};function Cn(u,m,_){u.M=1,u.A=gr(_n(m)),u.u=_,u.R=!0,Zo(u,null)}function Zo(u,m){u.F=Date.now(),$i(u),u.B=_n(u.A);var _=u.B,E=u.S;Array.isArray(E)||(E=[String(E)]),ua(_.i,"t",E),u.C=0,_=u.j.L,u.h=new xl,u.g=Bl(u.j,_?m:null,!u.u),u.P>0&&(u.O=new Sl(y(u.Y,u,u.g),u.P)),m=u.V,_=u.g,E=u.ba;var b="readystatechange";Array.isArray(b)||(b&&(Qo[0]=b.toString()),b=Qo);for(let B=0;B<b.length;B++){const Z=We(_,b[B],E||m.handleEvent,!1,m.h||m);if(!Z)break;m.g[Z.key]=Z}m=u.J?L(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),dr(),Cl(u.i,u.v,u.B,u.l,u.S,u.u)}yn.prototype.ba=function(u){u=u.target;const m=this.O;m&&Kn(u)==3?m.j():this.Y(u)},yn.prototype.Y=function(u){try{if(u==this.g)e:{const Ce=Kn(this.g),ut=this.g.ya(),He=this.g.ca();if(!(Ce<3)&&(Ce!=3||this.g&&(this.h.h||this.g.la()||jl(this.g)))){this.K||Ce!=4||ut==7||(ut==8||He<=0?dr(3):dr(2)),Ls(this);var m=this.g.ca();this.X=m;var _=Vl(this);if(this.o=m==200,Pl(this.i,this.v,this.B,this.l,this.S,Ce,m),this.o){if(this.U&&!this.L){t:{if(this.g){var E,b=this.g;if((E=b.g?b.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(E)){var B=E;break t}}B=null}if(u=B)jn(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ye(this,u);else{this.o=!1,this.m=3,ot(12),mr(this),qi(this);break e}}if(this.R){u=!0;let mt;for(;!this.K&&this.C<_.length;)if(mt=Ll(this,_),mt==Jo){Ce==4&&(this.m=4,ot(14),u=!1),jn(this.i,this.l,null,"[Incomplete Response]");break}else if(mt==Dl){this.m=4,ot(15),jn(this.i,this.l,_,"[Invalid Chunk]"),u=!1;break}else jn(this.i,this.l,mt,null),Ye(this,mt);if(Ol(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ce!=4||_.length!=0||this.h.h||(this.m=1,ot(16),u=!1),this.o=this.o&&u,!u)jn(this.i,this.l,_,"[Invalid Chunked Response]"),mr(this),qi(this);else if(_.length>0&&!this.W){this.W=!0;var Z=this.j;Z.g==this&&Z.aa&&!Z.P&&(Z.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),Zi(Z),Z.P=!0,ot(11))}}else jn(this.i,this.l,_,null),Ye(this,_);Ce==4&&mr(this),this.o&&!this.K&&(Ce==4?Ws(this.j,this):(this.o=!1,$i(this)))}else ha(this.g),m==400&&_.indexOf("Unknown SID")>0?(this.m=3,ot(12)):(this.m=0,ot(13)),mr(this),qi(this)}}}catch{}};function Vl(u){if(!Ol(u))return u.g.la();const m=jl(u.g);if(m==="")return"";let _="";const E=m.length,b=Kn(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return mr(u),qi(u),"";u.h.i=new h.TextDecoder}for(let B=0;B<E;B++)u.h.h=!0,_+=u.h.i.decode(m[B],{stream:!(b&&B==E-1)});return m.length=0,u.h.g+=_,u.C=0,u.h.g}function Ol(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Ll(u,m){var _=u.C,E=m.indexOf(`
`,_);return E==-1?Jo:(_=Number(m.substring(_,E)),isNaN(_)?Dl:(E+=1,E+_>m.length?Jo:(m=m.slice(E,E+_),u.C=E+_,m)))}yn.prototype.cancel=function(){this.K=!0,mr(this)};function $i(u){u.T=Date.now()+u.H,ea(u,u.H)}function ea(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Hr(y(u.aa,u),m)}function Ls(u){u.D&&(h.clearTimeout(u.D),u.D=null)}yn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(kl(this.i,this.B),this.M!=2&&(dr(),ot(17)),mr(this),this.m=2,qi(this)):ea(this,this.T-u)};function qi(u){u.j.I==0||u.K||Ws(u.j,u)}function mr(u){Ls(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,Ns(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function Ye(u,m){try{var _=u.j;if(_.I!=0&&(_.g==u||na(_.h,u))){if(!u.L&&na(_.h,u)&&_.I==3){try{var E=_.Ba.g.parse(m)}catch{E=null}if(Array.isArray(E)&&E.length==3){var b=E;if(b[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<u.F)qs(_),an(_);else break e;Yn(_),ot(18)}}else _.xa=b[1],0<_.xa-_.K&&b[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=Hr(y(_.Va,_),6e3));Wi(_.h)<=1&&_.ta&&(_.ta=void 0)}else ln(_,11)}else if((u.L||_.g==u)&&qs(_),!A(m))for(b=_.Ba.g.parse(m),m=0;m<b.length;m++){let He=b[m];const mt=He[0];if(!(mt<=_.K))if(_.K=mt,He=He[1],_.I==2)if(He[0]=="c"){_.M=He[1],_.ba=He[2];const un=He[3];un!=null&&(_.ka=un,_.j.info("VER="+_.ka));const Er=He[4];Er!=null&&(_.za=Er,_.j.info("SVER="+_.za));const Jn=He[5];Jn!=null&&typeof Jn=="number"&&Jn>0&&(E=1.5*Jn,_.O=E,_.j.info("backChannelRequestTimeoutMs_="+E)),E=_;const Zn=u.g;if(Zn){const Ks=Zn.g?Zn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ks){var B=E.h;B.g||Ks.indexOf("spdy")==-1&&Ks.indexOf("quic")==-1&&Ks.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(bs(B,B.h),B.h=null))}if(E.G){const pa=Zn.g?Zn.g.getResponseHeader("X-HTTP-Session-Id"):null;pa&&(E.wa=pa,$e(E.J,E.G,pa))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-u.F,_.j.info("Handshake RTT: "+_.T+"ms")),E=_;var Z=u;if(E.na=fa(E,E.L?E.ba:null,E.W),Z.L){Hi(E.h,Z);var Ce=Z,ut=E.O;ut&&(Ce.H=ut),Ce.D&&(Ls(Ce),$i(Ce)),E.g=Z}else Ut(E);_.i.length>0&&wr(_)}else He[0]!="stop"&&He[0]!="close"||ln(_,7);else _.I==3&&(He[0]=="stop"||He[0]=="close"?He[0]=="stop"?ln(_,7):Bs(_):He[0]!="noop"&&_.l&&_.l.qa(He),_.A=0)}}dr(4)}catch{}}var Kc=class{constructor(u,m){this.g=u,this.map=m}};function Ms(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ta(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Wi(u){return u.h?1:u.g?u.g.size:0}function na(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function bs(u,m){u.g?u.g.add(m):u.h=m}function Hi(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Ms.prototype.cancel=function(){if(this.i=rn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function rn(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.G);return m}return F(u.i)}var Ml=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sn(u,m){if(u){u=u.split("&");for(let _=0;_<u.length;_++){const E=u[_].indexOf("=");let b,B=null;E>=0?(b=u[_].substring(0,E),B=u[_].substring(E+1)):b=u[_],m(b,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function Bn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof Bn?(this.l=u.l,Gi(this,u.j),this.o=u.o,this.g=u.g,$n(this,u.u),this.h=u.h,Xr(this,ca(u.i)),this.m=u.m):u&&(m=String(u).match(Ml))?(this.l=!1,Gi(this,m[1]||"",!0),this.o=Ki(m[2]||""),this.g=Ki(m[3]||"",!0),$n(this,m[4]),this.h=Ki(m[5]||"",!0),Xr(this,m[6]||"",!0),this.m=Ki(m[7]||"")):(this.l=!1,this.i=new Me(null,this.l))}Bn.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(Qi(m,ia,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Qi(m,ia,!0),"@"),u.push(zn(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&u.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(Qi(_,_.charAt(0)=="/"?Xi:sa,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",Qi(_,oa)),u.join("")},Bn.prototype.resolve=function(u){const m=_n(this);let _=!!u.j;_?Gi(m,u.j):_=!!u.o,_?m.o=u.o:_=!!u.g,_?m.g=u.g:_=u.u!=null;var E=u.h;if(_)$n(m,u.u);else if(_=!!u.h){if(E.charAt(0)!="/")if(this.g&&!this.h)E="/"+E;else{var b=m.h.lastIndexOf("/");b!=-1&&(E=m.h.slice(0,b+1)+E)}if(b=E,b==".."||b==".")E="";else if(b.indexOf("./")!=-1||b.indexOf("/.")!=-1){E=b.lastIndexOf("/",0)==0,b=b.split("/");const B=[];for(let Z=0;Z<b.length;){const Ce=b[Z++];Ce=="."?E&&Z==b.length&&B.push(""):Ce==".."?((B.length>1||B.length==1&&B[0]!="")&&B.pop(),E&&Z==b.length&&B.push("")):(B.push(Ce),E=!0)}E=B.join("/")}else E=b}return _?m.h=E:_=u.i.toString()!=="",_?Xr(m,ca(u.i)):_=!!u.m,_&&(m.m=u.m),m};function _n(u){return new Bn(u)}function Gi(u,m,_){u.j=_?Ki(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function $n(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function Xr(u,m,_){m instanceof Me?(u.i=m,Us(u.i,u.l)):(_||(m=Qi(m,Qc)),u.i=new Me(m,u.l))}function $e(u,m,_){u.i.set(m,_)}function gr(u){return $e(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Ki(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Qi(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,ra),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function ra(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var ia=/[#\/\?@]/g,sa=/[#\?:]/g,Xi=/[#\?]/g,Qc=/[#\?@]/g,oa=/#/g;function Me(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function qn(u){u.g||(u.g=new Map,u.h=0,u.i&&sn(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}r=Me.prototype,r.add=function(u,m){qn(this),this.i=null,u=Wn(this,u);let _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function aa(u,m){qn(u),m=Wn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Fs(u,m){return qn(u),m=Wn(u,m),u.g.has(m)}r.forEach=function(u,m){qn(this),this.g.forEach(function(_,E){_.forEach(function(b){u.call(m,b,E,this)},this)},this)};function la(u,m){qn(u);let _=[];if(typeof m=="string")Fs(u,m)&&(_=_.concat(u.g.get(Wn(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)_=_.concat(u[m]);return _}r.set=function(u,m){return qn(this),this.i=null,u=Wn(this,u),Fs(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=la(this,u),u.length>0?String(u[0]):m):m};function ua(u,m,_){aa(u,m),_.length>0&&(u.i=null,u.g.set(Wn(u,m),F(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let E=0;E<m.length;E++){var _=m[E];const b=zn(_);_=la(this,_);for(let B=0;B<_.length;B++){let Z=b;_[B]!==""&&(Z+="="+zn(_[B])),u.push(Z)}}return this.i=u.join("&")};function ca(u){const m=new Me;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function Wn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function Us(u,m){m&&!u.j&&(qn(u),u.i=null,u.g.forEach(function(_,E){const b=E.toLowerCase();E!=b&&(aa(this,E),ua(this,b,_))},u)),u.j=m}function Hn(u,m){const _=new Gr;if(h.Image){const E=new Image;E.onload=w(Nt,_,"TestLoadImage: loaded",!0,m,E),E.onerror=w(Nt,_,"TestLoadImage: error",!1,m,E),E.onabort=w(Nt,_,"TestLoadImage: abort",!1,m,E),E.ontimeout=w(Nt,_,"TestLoadImage: timeout",!1,m,E),h.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=u}else m(!1)}function Gn(u,m){const _=new Gr,E=new AbortController,b=setTimeout(()=>{E.abort(),Nt(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:E.signal}).then(B=>{clearTimeout(b),B.ok?Nt(_,"TestPingServer: ok",!0,m):Nt(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(b),Nt(_,"TestPingServer: error",!1,m)})}function Nt(u,m,_,E,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),E(_)}catch{}}function Yi(){this.g=new zi}function yr(u){this.i=u.Sb||null,this.h=u.ab||!1}T(yr,$r),yr.prototype.g=function(){return new on(this.i,this.h)};function on(u,m){pt.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(on,pt),r=on.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,Pn(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||h).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Yr(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Pn(this)),this.g&&(this.readyState=3,Pn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;bl(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function bl(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Yr(this):Pn(this),this.readyState==3&&bl(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,Yr(this))},r.Na=function(u){this.g&&(this.response=u,Yr(this))},r.ga=function(){this.g&&Yr(this)};function Yr(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Pn(u)}r.setRequestHeader=function(u,m){this.A.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function Pn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(on.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Fl(u){let m="";return fe(u,function(_,E){m+=E,m+=":",m+=_,m+=`\r
`}),m}function js(u,m,_){e:{for(E in _){var E=!1;break e}E=!0}E||(_=Fl(_),typeof u=="string"?_!=null&&zn(_):$e(u,m,_))}function Qe(u){pt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(Qe,pt);var Ul=/^https?$/i,Xc=["POST","PUT"];r=Qe.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,m,_,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Nl.g(),this.g.onreadystatechange=R(y(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(B){Jr(this,B);return}if(u=_||"",_=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var b in E)_.set(b,E[b]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const B of E.keys())_.set(B,E.get(B));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(_.keys()).find(B=>B.toLowerCase()=="content-type"),b=h.FormData&&u instanceof h.FormData,!(Array.prototype.indexOf.call(Xc,m,void 0)>=0)||E||b||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,Z]of _)this.g.setRequestHeader(B,Z);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(B){Jr(this,B)}};function Jr(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,Zr(u),vr(u)}function Zr(u){u.A||(u.A=!0,lt(u,"complete"),lt(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,lt(this,"complete"),lt(this,"abort"),vr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),vr(this,!0)),Qe.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?_r(this):this.Xa())},r.Xa=function(){_r(this)};function _r(u){if(u.h&&typeof l<"u"){if(u.v&&Kn(u)==4)setTimeout(u.Ca.bind(u),0);else if(lt(u,"readystatechange"),Kn(u)==4){u.h=!1;try{const B=u.ca();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var E;if(E=B===0){let Z=String(u.D).match(Ml)[1]||null;!Z&&h.self&&h.self.location&&(Z=h.self.location.protocol.slice(0,-1)),E=!Ul.test(Z?Z.toLowerCase():"")}_=E}if(_)lt(u,"complete"),lt(u,"success");else{u.o=6;try{var b=Kn(u)>2?u.g.statusText:""}catch{b=""}u.l=b+" ["+u.ca()+"]",Zr(u)}}finally{vr(u)}}}}function vr(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const _=u.g;u.g=null,m||lt(u,"ready");try{_.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Kn(u){return u.g?u.g.readyState:0}r.ca=function(){try{return Kn(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Al(m)}};function jl(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function ha(u){const m={};u=(u.g&&Kn(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<u.length;E++){if(A(u[E]))continue;var _=Os(u[E]);const b=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const B=m[b]||[];m[b]=B,B.push(_)}ie(m,function(E){return E.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Qn(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function zs(u){this.za=0,this.i=[],this.j=new Gr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Qn("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Qn("baseRetryDelayMs",5e3,u),this.Za=Qn("retryDelaySeedMs",1e4,u),this.Ta=Qn("forwardChannelMaxRetries",2,u),this.va=Qn("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Ms(u&&u.concurrentRequestLimit),this.Ba=new Yi,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=zs.prototype,r.ka=8,r.I=1,r.connect=function(u,m,_,E){ot(0),this.W=u,this.H=m||{},_&&E!==void 0&&(this.H.OSID=_,this.H.OAID=E),this.F=this.X,this.J=fa(this,null,this.W),wr(this)};function Bs(u){if($s(u),u.I==3){var m=u.V++,_=_n(u.J);if($e(_,"SID",u.M),$e(_,"RID",m),$e(_,"TYPE","terminate"),Xn(u,_),m=new yn(u,u.j,m),m.M=2,m.A=gr(_n(_)),_=!1,h.navigator&&h.navigator.sendBeacon)try{_=h.navigator.sendBeacon(m.A.toString(),"")}catch{}!_&&h.Image&&(new Image().src=m.A,_=!0),_||(m.g=Bl(m.j,null),m.g.ea(m.A)),m.F=Date.now(),$i(m)}es(u)}function an(u){u.g&&(Zi(u),u.g.cancel(),u.g=null)}function $s(u){an(u),u.v&&(h.clearTimeout(u.v),u.v=null),qs(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&h.clearTimeout(u.m),u.m=null)}function wr(u){if(!ta(u.h)&&!u.m){u.m=!0;var m=u.Ea;Te||I(),Pe||(Te(),Pe=!0),P.add(m,u),u.D=0}}function zl(u,m){return Wi(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Hr(y(u.Ea,u,m),Hs(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const b=new yn(this,this.j,u);let B=this.o;if(this.U&&(B?(B=L(B),Ie(B,this.U)):B=this.U),this.u!==null||this.R||(b.J=B,B=null),this.S)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var E=this.i[_];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(m+=E,m>4096){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=da(this,b,m),_=_n(this.J),$e(_,"RID",u),$e(_,"CVER",22),this.G&&$e(_,"X-HTTP-Session-Id",this.G),Xn(this,_),B&&(this.R?m="headers="+zn(Fl(B))+"&"+m:this.u&&js(_,this.u,B)),bs(this.h,b),this.Ra&&$e(_,"TYPE","init"),this.S?($e(_,"$req",m),$e(_,"SID","null"),b.U=!0,Cn(b,_,null)):Cn(b,_,m),this.I=2}}else this.I==3&&(u?Ji(this,u):this.i.length==0||ta(this.h)||Ji(this))};function Ji(u,m){var _;m?_=m.l:_=u.V++;const E=_n(u.J);$e(E,"SID",u.M),$e(E,"RID",_),$e(E,"AID",u.K),Xn(u,E),u.u&&u.o&&js(E,u.u,u.o),_=new yn(u,u.j,_,u.D+1),u.u===null&&(_.J=u.o),m&&(u.i=m.G.concat(u.i)),m=da(u,_,1e3),_.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),bs(u.h,_),Cn(_,E,m)}function Xn(u,m){u.H&&fe(u.H,function(_,E){$e(m,E,_)}),u.l&&fe({},function(_,E){$e(m,E,_)})}function da(u,m,_){_=Math.min(u.i.length,_);const E=u.l?y(u.l.Ka,u.l,u):null;e:{var b=u.i;let Ce=-1;for(;;){const ut=["count="+_];Ce==-1?_>0?(Ce=b[0].g,ut.push("ofs="+Ce)):Ce=0:ut.push("ofs="+Ce);let He=!0;for(let mt=0;mt<_;mt++){var B=b[mt].g;const un=b[mt].map;if(B-=Ce,B<0)Ce=Math.max(0,b[mt].g-100),He=!1;else try{B="req"+B+"_"||"";try{var Z=un instanceof Map?un:Object.entries(un);for(const[Er,Jn]of Z){let Zn=Jn;p(Jn)&&(Zn=Br(Jn)),ut.push(B+Er+"="+encodeURIComponent(Zn))}}catch(Er){throw ut.push(B+"type="+encodeURIComponent("_badmap")),Er}}catch{E&&E(un)}}if(He){Z=ut.join("&");break e}}Z=void 0}return u=u.i.splice(0,_),m.G=u,Z}function Ut(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;Te||I(),Pe||(Te(),Pe=!0),P.add(m,u),u.A=0}}function Yn(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Hr(y(u.Da,u),Hs(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,ei(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Hr(y(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ot(10),an(this),ei(this))};function Zi(u){u.B!=null&&(h.clearTimeout(u.B),u.B=null)}function ei(u){u.g=new yn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=_n(u.na);$e(m,"RID","rpc"),$e(m,"SID",u.M),$e(m,"AID",u.K),$e(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&$e(m,"TO",u.ia),$e(m,"TYPE","xmlhttp"),Xn(u,m),u.u&&u.o&&js(m,u.u,u.o),u.O&&(u.g.H=u.O);var _=u.g;u=u.ba,_.M=1,_.A=gr(_n(m)),_.u=null,_.R=!0,Zo(_,u)}r.Va=function(){this.C!=null&&(this.C=null,an(this),Yn(this),ot(19))};function qs(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function Ws(u,m){var _=null;if(u.g==m){qs(u),Zi(u),u.g=null;var E=2}else if(na(u.h,m))_=m.G,Hi(u.h,m),E=1;else return;if(u.I!=0){if(m.o)if(E==1){_=m.u?m.u.length:0,m=Date.now()-m.F;var b=u.D;E=Wr(),lt(E,new Yo(E,_)),wr(u)}else Ut(u);else if(b=m.m,b==3||b==0&&m.X>0||!(E==1&&zl(u,m)||E==2&&Yn(u)))switch(_&&_.length>0&&(m=u.h,m.i=m.i.concat(_)),b){case 1:ln(u,5);break;case 4:ln(u,10);break;case 3:ln(u,6);break;default:ln(u,2)}}}function Hs(u,m){let _=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(_*=2),_*m}function ln(u,m){if(u.j.info("Error code "+m),m==2){var _=y(u.bb,u),E=u.Ua;const b=!E;E=new Bn(E||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Gi(E,"https"),gr(E),b?Hn(E.toString(),_):Gn(E.toString(),_)}else ot(2);u.I=0,u.l&&u.l.pa(m),es(u),$s(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),ot(2)):(this.j.info("Failed to ping google.com"),ot(1))};function es(u){if(u.I=0,u.ja=[],u.l){const m=rn(u.h);(m.length!=0||u.i.length!=0)&&(W(u.ja,m),W(u.ja,u.i),u.h.i.length=0,F(u.i),u.i.length=0),u.l.oa()}}function fa(u,m,_){var E=_ instanceof Bn?_n(_):new Bn(_);if(E.g!="")m&&(E.g=m+"."+E.g),$n(E,E.u);else{var b=h.location;E=b.protocol,m=m?m+"."+b.hostname:b.hostname,b=+b.port;const B=new Bn(null);E&&Gi(B,E),m&&(B.g=m),b&&$n(B,b),_&&(B.h=_),E=B}return _=u.G,m=u.wa,_&&m&&$e(E,_,m),$e(E,"VER",u.ka),Xn(u,E),E}function Bl(u,m,_){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new Qe(new yr({ab:_})):new Qe(u.ma),m.Fa(u.L),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function $l(){}r=$l.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Gs(){}Gs.prototype.g=function(u,m){return new xt(u,m)};function xt(u,m){pt.call(this),this.g=new zs(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!A(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!A(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new ti(this)}T(xt,pt),xt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},xt.prototype.close=function(){Bs(this.g)},xt.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.v&&(_={},_.__data__=Br(u),u=_);m.i.push(new Kc(m.Ya++,u)),m.I==3&&wr(m)},xt.prototype.N=function(){this.g.l=null,delete this.j,Bs(this.g),delete this.g,xt.Z.N.call(this)};function ql(u){xs.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const _ in m){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}T(ql,xs);function Wl(){Xo.call(this),this.status=1}T(Wl,Xo);function ti(u){this.g=u}T(ti,$l),ti.prototype.ra=function(){lt(this.g,"a")},ti.prototype.qa=function(u){lt(this.g,new ql(u))},ti.prototype.pa=function(u){lt(this.g,new Wl)},ti.prototype.oa=function(){lt(this.g,"b")},Gs.prototype.createWebChannel=Gs.prototype.g,xt.prototype.send=xt.prototype.o,xt.prototype.open=xt.prototype.m,xt.prototype.close=xt.prototype.close,Iv=function(){return new Gs},Tv=function(){return Wr()},Ev=Rn,Gd={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Kr.NO_ERROR=0,Kr.TIMEOUT=8,Kr.HTTP_ERROR=6,Xu=Kr,Qr.COMPLETE="complete",wv=Qr,Rl.EventType=qr,qr.OPEN="a",qr.CLOSE="b",qr.ERROR="c",qr.MESSAGE="d",pt.prototype.listen=pt.prototype.J,ja=Rl,Qe.prototype.listenOnce=Qe.prototype.K,Qe.prototype.getLastError=Qe.prototype.Ha,Qe.prototype.getLastErrorCode=Qe.prototype.ya,Qe.prototype.getStatus=Qe.prototype.ca,Qe.prototype.getResponseJson=Qe.prototype.La,Qe.prototype.getResponseText=Qe.prototype.la,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Fa,vv=Qe}).apply(typeof ju<"u"?ju:typeof self<"u"?self:typeof window<"u"?window:{});const py="@firebase/firestore",my="4.9.3";class Wt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Wt.UNAUTHENTICATED=new Wt(null),Wt.GOOGLE_CREDENTIALS=new Wt("google-credentials-uid"),Wt.FIRST_PARTY=new Wt("first-party-uid"),Wt.MOCK_USER=new Wt("mock-user");let Uo="12.7.0";const Es=new yf("@firebase/firestore");function go(){return Es.logLevel}function oe(r,...e){if(Es.logLevel<=De.DEBUG){const t=e.map(Nf);Es.debug(`Firestore (${Uo}): ${r}`,...t)}}function Lr(r,...e){if(Es.logLevel<=De.ERROR){const t=e.map(Nf);Es.error(`Firestore (${Uo}): ${r}`,...t)}}function Po(r,...e){if(Es.logLevel<=De.WARN){const t=e.map(Nf);Es.warn(`Firestore (${Uo}): ${r}`,...t)}}function Nf(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}function ge(r,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,Sv(r,s,t)}function Sv(r,e,t){let s=`FIRESTORE (${Uo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Lr(s),new Error(s)}function Fe(r,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,r||Sv(e,o,s)}function Se(r,e){return r}const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class re extends Ur{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class or{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Av{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class uA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Wt.UNAUTHENTICATED)))}shutdown(){}}class cA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class hA{constructor(e){this.t=e,this.currentUser=Wt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Fe(this.o===void 0,42304);let s=this.i;const o=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let l=new or;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new or,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},p=g=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new or)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Fe(typeof s.accessToken=="string",31837,{l:s}),new Av(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Fe(e===null||typeof e=="string",2055,{h:e}),new Wt(e)}}class dA{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Wt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class fA{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new dA(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Wt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class gy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pA{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Mn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Fe(this.o===void 0,3512);const s=l=>{l.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,oe("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const o=l=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new gy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Fe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new gy(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function mA(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}class xf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=mA(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%62))}return s}}function Ve(r,e){return r<e?-1:r>e?1:0}function Kd(r,e){const t=Math.min(r.length,e.length);for(let s=0;s<t;s++){const o=r.charAt(s),l=e.charAt(s);if(o!==l)return Nd(o)===Nd(l)?Ve(o,l):Nd(o)?1:-1}return Ve(r.length,e.length)}const gA=55296,yA=57343;function Nd(r){const e=r.charCodeAt(0);return e>=gA&&e<=yA}function ko(r,e,t){return r.length===e.length&&r.every(((s,o)=>t(s,e[o])))}const yy="__name__";class ir{constructor(e,t,s){t===void 0?t=0:t>e.length&&ge(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&ge(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return ir.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ir?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=ir.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Ve(e.length,t.length)}static compareSegments(e,t){const s=ir.isNumericId(e),o=ir.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?ir.extractNumericId(e).compare(ir.extractNumericId(t)):Kd(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ci.fromString(e.substring(4,e.length-2))}}class Ke extends ir{construct(e,t,s){return new Ke(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new re($.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new Ke(t)}static emptyPath(){return new Ke([])}}const _A=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mt extends ir{construct(e,t,s){return new Mt(e,t,s)}static isValidIdentifier(e){return _A.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===yy}static keyField(){return new Mt([yy])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new re($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let h=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new re($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new re($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else p==="`"?(h=!h,o++):p!=="."||h?(s+=p,o++):(l(),o++)}if(l(),h)throw new re($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mt(t)}static emptyPath(){return new Mt([])}}class me{constructor(e){this.path=e}static fromPath(e){return new me(Ke.fromString(e))}static fromName(e){return new me(Ke.fromString(e).popFirst(5))}static empty(){return new me(Ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ke.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ke.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new me(new Ke(e.slice()))}}function Rv(r,e,t){if(!t)throw new re($.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function vA(r,e,t,s){if(e===!0&&s===!0)throw new re($.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function _y(r){if(!me.isDocumentKey(r))throw new re($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function vy(r){if(me.isDocumentKey(r))throw new re($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Cv(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Nc(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":ge(12329,{type:typeof r})}function Mr(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new re($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Nc(r);throw new re($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function vt(r,e){const t={typeString:r};return e&&(t.value=e),t}function fl(r,e){if(!Cv(r))throw new re($.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){t=`JSON missing required field: '${s}'`;break}const h=r[s];if(o&&typeof h!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(l!==void 0&&h!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new re($.INVALID_ARGUMENT,t);return!0}const wy=-62135596800,Ey=1e6;class et{static now(){return et.fromMillis(Date.now())}static fromDate(e){return et.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*Ey);return new et(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new re($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new re($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<wy)throw new re($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new re($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ey}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:et._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(fl(e,et._jsonSchema))return new et(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-wy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}et._jsonSchemaVersion="firestore/timestamp/1.0",et._jsonSchema={type:vt("string",et._jsonSchemaVersion),seconds:vt("number"),nanoseconds:vt("number")};class ve{static fromTimestamp(e){return new ve(e)}static min(){return new ve(new et(0,0))}static max(){return new ve(new et(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const el=-1;function wA(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=ve.fromTimestamp(s===1e9?new et(t+1,0):new et(t,s));return new Ni(o,me.empty(),e)}function EA(r){return new Ni(r.readTime,r.key,el)}class Ni{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Ni(ve.min(),me.empty(),el)}static max(){return new Ni(ve.max(),me.empty(),el)}}function TA(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=me.comparator(r.documentKey,e.documentKey),t!==0?t:Ve(r.largestBatchId,e.largestBatchId))}const IA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class SA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function jo(r){if(r.code!==$.FAILED_PRECONDITION||r.message!==IA)throw r;oe("LocalStore","Unexpectedly lost primary lease")}class H{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ge(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new H(((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof H?t:H.resolve(t)}catch(t){return H.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):H.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):H.reject(t)}static resolve(e){return new H(((t,s)=>{t(e)}))}static reject(e){return new H(((t,s)=>{s(e)}))}static waitFor(e){return new H(((t,s)=>{let o=0,l=0,h=!1;e.forEach((p=>{++o,p.next((()=>{++l,h&&l===o&&t()}),(g=>s(g)))})),h=!0,l===o&&t()}))}static or(e){let t=H.resolve(!1);for(const s of e)t=t.next((o=>o?H.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,l)=>{s.push(t.call(this,o,l))})),this.waitFor(s)}static mapArray(e,t){return new H(((s,o)=>{const l=e.length,h=new Array(l);let p=0;for(let g=0;g<l;g++){const y=g;t(e[y]).next((w=>{h[y]=w,++p,p===l&&s(h)}),(w=>o(w)))}}))}static doWhile(e,t){return new H(((s,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):s()};l()}))}}function AA(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function zo(r){return r.name==="IndexedDbTransactionError"}class xc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}xc.ce=-1;const Df=-1;function pl(r){return r==null}function hc(r){return r===0&&1/r==-1/0}function RA(r){return typeof r=="number"&&Number.isInteger(r)&&!hc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const Pv="";function CA(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Ty(e)),e=PA(r.get(t),e);return Ty(e)}function PA(r,e){let t=e;const s=r.length;for(let o=0;o<s;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case Pv:t+="";break;default:t+=l}}return t}function Ty(r){return r+Pv+""}function Iy(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Fi(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function kv(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class st{constructor(e,t){this.comparator=e,this.root=t||Ot.EMPTY}insert(e,t){return new st(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ot.BLACK,null,null))}remove(e){return new st(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ot.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zu(this.root,e,this.comparator,!1)}getReverseIterator(){return new zu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zu(this.root,e,this.comparator,!0)}}class zu{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ot{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??Ot.RED,this.left=o??Ot.EMPTY,this.right=l??Ot.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new Ot(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ot.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Ot.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ot.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ot.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ge(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ge(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ge(27949);return e+(this.isRed()?0:1)}}Ot.EMPTY=null,Ot.RED=!0,Ot.BLACK=!1;Ot.EMPTY=new class{constructor(){this.size=0}get key(){throw ge(57766)}get value(){throw ge(16141)}get color(){throw ge(16727)}get left(){throw ge(29726)}get right(){throw ge(36894)}copy(e,t,s,o,l){return this}insert(e,t,s){return new Ot(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Tt{constructor(e){this.comparator=e,this.data=new st(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Sy(this.data.getIterator())}getIteratorFrom(e){return new Sy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Tt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Tt(this.comparator);return t.data=e,t}}class Sy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class pn{constructor(e){this.fields=e,e.sort(Mt.comparator)}static empty(){return new pn([])}unionWith(e){let t=new Tt(Mt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new pn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ko(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}class Nv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ft{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Nv("Invalid base64 string: "+l):l}})(e);return new Ft(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l})(e);return new Ft(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ft.EMPTY_BYTE_STRING=new Ft("");const kA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xi(r){if(Fe(!!r,39018),typeof r=="string"){let e=0;const t=kA.exec(r);if(Fe(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:ht(r.seconds),nanos:ht(r.nanos)}}function ht(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Di(r){return typeof r=="string"?Ft.fromBase64String(r):Ft.fromUint8Array(r)}const xv="server_timestamp",Dv="__type__",Vv="__previous_value__",Ov="__local_write_time__";function Vf(r){return(r?.mapValue?.fields||{})[Dv]?.stringValue===xv}function Dc(r){const e=r.mapValue.fields[Vv];return Vf(e)?Dc(e):e}function tl(r){const e=xi(r.mapValue.fields[Ov].timestampValue);return new et(e.seconds,e.nanos)}class NA{constructor(e,t,s,o,l,h,p,g,y,w){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=w}}const dc="(default)";class nl{constructor(e,t){this.projectId=e,this.database=t||dc}static empty(){return new nl("","")}get isDefaultDatabase(){return this.database===dc}isEqual(e){return e instanceof nl&&e.projectId===this.projectId&&e.database===this.database}}const Lv="__type__",xA="__max__",Bu={mapValue:{}},Mv="__vector__",fc="value";function Vi(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Vf(r)?4:VA(r)?9007199254740991:DA(r)?10:11:ge(28295,{value:r})}function hr(r,e){if(r===e)return!0;const t=Vi(r);if(t!==Vi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return tl(r).isEqual(tl(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=xi(o.timestampValue),p=xi(l.timestampValue);return h.seconds===p.seconds&&h.nanos===p.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,l){return Di(o.bytesValue).isEqual(Di(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,l){return ht(o.geoPointValue.latitude)===ht(l.geoPointValue.latitude)&&ht(o.geoPointValue.longitude)===ht(l.geoPointValue.longitude)})(r,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return ht(o.integerValue)===ht(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=ht(o.doubleValue),p=ht(l.doubleValue);return h===p?hc(h)===hc(p):isNaN(h)&&isNaN(p)}return!1})(r,e);case 9:return ko(r.arrayValue.values||[],e.arrayValue.values||[],hr);case 10:case 11:return(function(o,l){const h=o.mapValue.fields||{},p=l.mapValue.fields||{};if(Iy(h)!==Iy(p))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(p[g]===void 0||!hr(h[g],p[g])))return!1;return!0})(r,e);default:return ge(52216,{left:r})}}function rl(r,e){return(r.values||[]).find((t=>hr(t,e)))!==void 0}function No(r,e){if(r===e)return 0;const t=Vi(r),s=Vi(e);if(t!==s)return Ve(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ve(r.booleanValue,e.booleanValue);case 2:return(function(l,h){const p=ht(l.integerValue||l.doubleValue),g=ht(h.integerValue||h.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(r,e);case 3:return Ay(r.timestampValue,e.timestampValue);case 4:return Ay(tl(r),tl(e));case 5:return Kd(r.stringValue,e.stringValue);case 6:return(function(l,h){const p=Di(l),g=Di(h);return p.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(l,h){const p=l.split("/"),g=h.split("/");for(let y=0;y<p.length&&y<g.length;y++){const w=Ve(p[y],g[y]);if(w!==0)return w}return Ve(p.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,h){const p=Ve(ht(l.latitude),ht(h.latitude));return p!==0?p:Ve(ht(l.longitude),ht(h.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Ry(r.arrayValue,e.arrayValue);case 10:return(function(l,h){const p=l.fields||{},g=h.fields||{},y=p[fc]?.arrayValue,w=g[fc]?.arrayValue,T=Ve(y?.values?.length||0,w?.values?.length||0);return T!==0?T:Ry(y,w)})(r.mapValue,e.mapValue);case 11:return(function(l,h){if(l===Bu.mapValue&&h===Bu.mapValue)return 0;if(l===Bu.mapValue)return 1;if(h===Bu.mapValue)return-1;const p=l.fields||{},g=Object.keys(p),y=h.fields||{},w=Object.keys(y);g.sort(),w.sort();for(let T=0;T<g.length&&T<w.length;++T){const R=Kd(g[T],w[T]);if(R!==0)return R;const F=No(p[g[T]],y[w[T]]);if(F!==0)return F}return Ve(g.length,w.length)})(r.mapValue,e.mapValue);default:throw ge(23264,{he:t})}}function Ay(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Ve(r,e);const t=xi(r),s=xi(e),o=Ve(t.seconds,s.seconds);return o!==0?o:Ve(t.nanos,s.nanos)}function Ry(r,e){const t=r.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=No(t[o],s[o]);if(l)return l}return Ve(t.length,s.length)}function xo(r){return Qd(r)}function Qd(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const s=xi(t);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Di(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return me.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=Qd(l);return s+"]"})(r.arrayValue):"mapValue"in r?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of s)l?l=!1:o+=",",o+=`${h}:${Qd(t.fields[h])}`;return o+"}"})(r.mapValue):ge(61005,{value:r})}function Yu(r){switch(Vi(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Dc(r);return e?16+Yu(e):16;case 5:return 2*r.stringValue.length;case 6:return Di(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,l)=>o+Yu(l)),0)})(r.arrayValue);case 10:case 11:return(function(s){let o=0;return Fi(s.fields,((l,h)=>{o+=l.length+Yu(h)})),o})(r.mapValue);default:throw ge(13486,{value:r})}}function Cy(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Xd(r){return!!r&&"integerValue"in r}function Of(r){return!!r&&"arrayValue"in r}function Py(r){return!!r&&"nullValue"in r}function ky(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Ju(r){return!!r&&"mapValue"in r}function DA(r){return(r?.mapValue?.fields||{})[Lv]?.stringValue===Mv}function Wa(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Fi(r.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Wa(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Wa(r.arrayValue.values[t]);return e}return{...r}}function VA(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===xA}class Qt{constructor(e){this.value=e}static empty(){return new Qt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Ju(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wa(t)}setAll(e){let t=Mt.emptyPath(),s={},o=[];e.forEach(((h,p)=>{if(!t.isImmediateParentOf(p)){const g=this.getFieldsMap(t);this.applyChanges(g,s,o),s={},o=[],t=p.popLast()}h?s[p.lastSegment()]=Wa(h):o.push(p.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());Ju(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return hr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];Ju(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){Fi(t,((o,l)=>e[o]=l));for(const o of s)delete e[o]}clone(){return new Qt(Wa(this.value))}}function bv(r){const e=[];return Fi(r.fields,((t,s)=>{const o=new Mt([t]);if(Ju(s)){const l=bv(s.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)})),new pn(e)}class kt{constructor(e,t,s,o,l,h,p){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=h,this.documentState=p}static newInvalidDocument(e){return new kt(e,0,ve.min(),ve.min(),ve.min(),Qt.empty(),0)}static newFoundDocument(e,t,s,o){return new kt(e,1,t,ve.min(),s,o,0)}static newNoDocument(e,t){return new kt(e,2,t,ve.min(),ve.min(),Qt.empty(),0)}static newUnknownDocument(e,t){return new kt(e,3,t,ve.min(),ve.min(),Qt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof kt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new kt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class pc{constructor(e,t){this.position=e,this.inclusive=t}}function Ny(r,e,t){let s=0;for(let o=0;o<r.position.length;o++){const l=e[o],h=r.position[o];if(l.field.isKeyField()?s=me.comparator(me.fromName(h.referenceValue),t.key):s=No(h,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function xy(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!hr(r.position[t],e.position[t]))return!1;return!0}class mc{constructor(e,t="asc"){this.field=e,this.dir=t}}function OA(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class Fv{}class _t extends Fv{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new MA(e,t,s):t==="array-contains"?new UA(e,s):t==="in"?new jA(e,s):t==="not-in"?new zA(e,s):t==="array-contains-any"?new BA(e,s):new _t(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new bA(e,s):new FA(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(No(t,this.value)):t!==null&&Vi(this.value)===Vi(t)&&this.matchesComparison(No(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ge(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Un extends Fv{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Un(e,t)}matches(e){return Uv(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Uv(r){return r.op==="and"}function jv(r){return LA(r)&&Uv(r)}function LA(r){for(const e of r.filters)if(e instanceof Un)return!1;return!0}function Yd(r){if(r instanceof _t)return r.field.canonicalString()+r.op.toString()+xo(r.value);if(jv(r))return r.filters.map((e=>Yd(e))).join(",");{const e=r.filters.map((t=>Yd(t))).join(",");return`${r.op}(${e})`}}function zv(r,e){return r instanceof _t?(function(s,o){return o instanceof _t&&s.op===o.op&&s.field.isEqual(o.field)&&hr(s.value,o.value)})(r,e):r instanceof Un?(function(s,o){return o instanceof Un&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((l,h,p)=>l&&zv(h,o.filters[p])),!0):!1})(r,e):void ge(19439)}function Bv(r){return r instanceof _t?(function(t){return`${t.field.canonicalString()} ${t.op} ${xo(t.value)}`})(r):r instanceof Un?(function(t){return t.op.toString()+" {"+t.getFilters().map(Bv).join(" ,")+"}"})(r):"Filter"}class MA extends _t{constructor(e,t,s){super(e,t,s),this.key=me.fromName(s.referenceValue)}matches(e){const t=me.comparator(e.key,this.key);return this.matchesComparison(t)}}class bA extends _t{constructor(e,t){super(e,"in",t),this.keys=$v("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class FA extends _t{constructor(e,t){super(e,"not-in",t),this.keys=$v("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function $v(r,e){return(e.arrayValue?.values||[]).map((t=>me.fromName(t.referenceValue)))}class UA extends _t{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Of(t)&&rl(t.arrayValue,this.value)}}class jA extends _t{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&rl(this.value.arrayValue,t)}}class zA extends _t{constructor(e,t){super(e,"not-in",t)}matches(e){if(rl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!rl(this.value.arrayValue,t)}}class BA extends _t{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Of(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>rl(this.value.arrayValue,s)))}}class $A{constructor(e,t=null,s=[],o=[],l=null,h=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=h,this.endAt=p,this.Te=null}}function Dy(r,e=null,t=[],s=[],o=null,l=null,h=null){return new $A(r,e,t,s,o,l,h)}function Lf(r){const e=Se(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Yd(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),pl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>xo(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>xo(s))).join(",")),e.Te=t}return e.Te}function Mf(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!OA(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!zv(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!xy(r.startAt,e.startAt)&&xy(r.endAt,e.endAt)}function Jd(r){return me.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}class ml{constructor(e,t=null,s=[],o=[],l=null,h="F",p=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=h,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function qA(r,e,t,s,o,l,h,p){return new ml(r,e,t,s,o,l,h,p)}function bf(r){return new ml(r)}function Vy(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function qv(r){return r.collectionGroup!==null}function Ha(r){const e=Se(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let p=new Tt(Mt.comparator);return h.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new mc(l,s))})),t.has(Mt.keyField().canonicalString())||e.Ie.push(new mc(Mt.keyField(),s))}return e.Ie}function ar(r){const e=Se(r);return e.Ee||(e.Ee=WA(e,Ha(r))),e.Ee}function WA(r,e){if(r.limitType==="F")return Dy(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new mc(o.field,l)}));const t=r.endAt?new pc(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new pc(r.startAt.position,r.startAt.inclusive):null;return Dy(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function Zd(r,e){const t=r.filters.concat([e]);return new ml(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function ef(r,e,t){return new ml(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Vc(r,e){return Mf(ar(r),ar(e))&&r.limitType===e.limitType}function Wv(r){return`${Lf(ar(r))}|lt:${r.limitType}`}function yo(r){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>Bv(o))).join(", ")}]`),pl(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>xo(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>xo(o))).join(",")),`Target(${s})`})(ar(r))}; limitType=${r.limitType})`}function Oc(r,e){return e.isFoundDocument()&&(function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):me.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(r,e)&&(function(s,o){for(const l of Ha(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0})(r,e)&&(function(s,o){return!(s.startAt&&!(function(h,p,g){const y=Ny(h,p,g);return h.inclusive?y<=0:y<0})(s.startAt,Ha(s),o)||s.endAt&&!(function(h,p,g){const y=Ny(h,p,g);return h.inclusive?y>=0:y>0})(s.endAt,Ha(s),o))})(r,e)}function HA(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Hv(r){return(e,t)=>{let s=!1;for(const o of Ha(r)){const l=GA(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function GA(r,e,t){const s=r.field.isKeyField()?me.comparator(e.key,t.key):(function(l,h,p){const g=h.data.field(l),y=p.data.field(l);return g!==null&&y!==null?No(g,y):ge(42886)})(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return ge(19790,{direction:r.dir})}}class As{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Fi(this.inner,((t,s)=>{for(const[o,l]of s)e(o,l)}))}isEmpty(){return kv(this.inner)}size(){return this.innerSize}}const KA=new st(me.comparator);function br(){return KA}const Gv=new st(me.comparator);function za(...r){let e=Gv;for(const t of r)e=e.insert(t.key,t);return e}function Kv(r){let e=Gv;return r.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function gs(){return Ga()}function Qv(){return Ga()}function Ga(){return new As((r=>r.toString()),((r,e)=>r.isEqual(e)))}const QA=new st(me.comparator),XA=new Tt(me.comparator);function Oe(...r){let e=XA;for(const t of r)e=e.add(t);return e}const YA=new Tt(Ve);function JA(){return YA}function Ff(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hc(e)?"-0":e}}function Xv(r){return{integerValue:""+r}}function ZA(r,e){return RA(e)?Xv(e):Ff(r,e)}class Lc{constructor(){this._=void 0}}function eR(r,e,t){return r instanceof il?(function(o,l){const h={fields:{[Dv]:{stringValue:xv},[Ov]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Vf(l)&&(l=Dc(l)),l&&(h.fields[Vv]=l),{mapValue:h}})(t,e):r instanceof sl?Jv(r,e):r instanceof ol?Zv(r,e):(function(o,l){const h=Yv(o,l),p=Oy(h)+Oy(o.Ae);return Xd(h)&&Xd(o.Ae)?Xv(p):Ff(o.serializer,p)})(r,e)}function tR(r,e,t){return r instanceof sl?Jv(r,e):r instanceof ol?Zv(r,e):t}function Yv(r,e){return r instanceof gc?(function(s){return Xd(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class il extends Lc{}class sl extends Lc{constructor(e){super(),this.elements=e}}function Jv(r,e){const t=ew(e);for(const s of r.elements)t.some((o=>hr(o,s)))||t.push(s);return{arrayValue:{values:t}}}class ol extends Lc{constructor(e){super(),this.elements=e}}function Zv(r,e){let t=ew(e);for(const s of r.elements)t=t.filter((o=>!hr(o,s)));return{arrayValue:{values:t}}}class gc extends Lc{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Oy(r){return ht(r.integerValue||r.doubleValue)}function ew(r){return Of(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class nR{constructor(e,t){this.field=e,this.transform=t}}function rR(r,e){return r.field.isEqual(e.field)&&(function(s,o){return s instanceof sl&&o instanceof sl||s instanceof ol&&o instanceof ol?ko(s.elements,o.elements,hr):s instanceof gc&&o instanceof gc?hr(s.Ae,o.Ae):s instanceof il&&o instanceof il})(r.transform,e.transform)}class iR{constructor(e,t){this.version=e,this.transformResults=t}}class bt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new bt}static exists(e){return new bt(void 0,e)}static updateTime(e){return new bt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Zu(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Mc{}function tw(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new bc(r.key,bt.none()):new gl(r.key,r.data,bt.none());{const t=r.data,s=Qt.empty();let o=new Tt(Mt.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?s.delete(l):s.set(l,h),o=o.add(l)}return new Ui(r.key,s,new pn(o.toArray()),bt.none())}}function sR(r,e,t){r instanceof gl?(function(o,l,h){const p=o.value.clone(),g=My(o.fieldTransforms,l,h.transformResults);p.setAll(g),l.convertToFoundDocument(h.version,p).setHasCommittedMutations()})(r,e,t):r instanceof Ui?(function(o,l,h){if(!Zu(o.precondition,l))return void l.convertToUnknownDocument(h.version);const p=My(o.fieldTransforms,l,h.transformResults),g=l.data;g.setAll(nw(o)),g.setAll(p),l.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(r,e,t):(function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function Ka(r,e,t,s){return r instanceof gl?(function(l,h,p,g){if(!Zu(l.precondition,h))return p;const y=l.value.clone(),w=by(l.fieldTransforms,g,h);return y.setAll(w),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null})(r,e,t,s):r instanceof Ui?(function(l,h,p,g){if(!Zu(l.precondition,h))return p;const y=by(l.fieldTransforms,g,h),w=h.data;return w.setAll(nw(l)),w.setAll(y),h.convertToFoundDocument(h.version,w).setHasLocalMutations(),p===null?null:p.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((T=>T.field)))})(r,e,t,s):(function(l,h,p){return Zu(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):p})(r,e,t)}function oR(r,e){let t=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),l=Yv(s.transform,o||null);l!=null&&(t===null&&(t=Qt.empty()),t.set(s.field,l))}return t||null}function Ly(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&ko(s,o,((l,h)=>rR(l,h)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class gl extends Mc{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ui extends Mc{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function nw(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}})),e}function My(r,e,t){const s=new Map;Fe(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let o=0;o<t.length;o++){const l=r[o],h=l.transform,p=e.data.field(l.field);s.set(l.field,tR(h,p,t[o]))}return s}function by(r,e,t){const s=new Map;for(const o of r){const l=o.transform,h=t.data.field(o.field);s.set(o.field,eR(l,h,e))}return s}class bc extends Mc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rw extends Mc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class aR{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&sR(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Ka(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Ka(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=Qv();return this.mutations.forEach((o=>{const l=e.get(o.key),h=l.overlayedDocument;let p=this.applyToLocalView(h,l.mutatedFields);p=t.has(o.key)?null:p;const g=tw(h,p);g!==null&&s.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(ve.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Oe())}isEqual(e){return this.batchId===e.batchId&&ko(this.mutations,e.mutations,((t,s)=>Ly(t,s)))&&ko(this.baseMutations,e.baseMutations,((t,s)=>Ly(t,s)))}}class Uf{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){Fe(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return QA})();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,s[h].version);return new Uf(e,t,s,o)}}class lR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class uR{constructor(e,t){this.count=e,this.unchangedNames=t}}var yt,be;function iw(r){switch(r){case $.OK:return ge(64938);case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0;default:return ge(15467,{code:r})}}function sw(r){if(r===void 0)return Lr("GRPC error has no .code"),$.UNKNOWN;switch(r){case yt.OK:return $.OK;case yt.CANCELLED:return $.CANCELLED;case yt.UNKNOWN:return $.UNKNOWN;case yt.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case yt.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case yt.INTERNAL:return $.INTERNAL;case yt.UNAVAILABLE:return $.UNAVAILABLE;case yt.UNAUTHENTICATED:return $.UNAUTHENTICATED;case yt.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case yt.NOT_FOUND:return $.NOT_FOUND;case yt.ALREADY_EXISTS:return $.ALREADY_EXISTS;case yt.PERMISSION_DENIED:return $.PERMISSION_DENIED;case yt.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case yt.ABORTED:return $.ABORTED;case yt.OUT_OF_RANGE:return $.OUT_OF_RANGE;case yt.UNIMPLEMENTED:return $.UNIMPLEMENTED;case yt.DATA_LOSS:return $.DATA_LOSS;default:return ge(39323,{code:r})}}(be=yt||(yt={}))[be.OK=0]="OK",be[be.CANCELLED=1]="CANCELLED",be[be.UNKNOWN=2]="UNKNOWN",be[be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",be[be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",be[be.NOT_FOUND=5]="NOT_FOUND",be[be.ALREADY_EXISTS=6]="ALREADY_EXISTS",be[be.PERMISSION_DENIED=7]="PERMISSION_DENIED",be[be.UNAUTHENTICATED=16]="UNAUTHENTICATED",be[be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",be[be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",be[be.ABORTED=10]="ABORTED",be[be.OUT_OF_RANGE=11]="OUT_OF_RANGE",be[be.UNIMPLEMENTED=12]="UNIMPLEMENTED",be[be.INTERNAL=13]="INTERNAL",be[be.UNAVAILABLE=14]="UNAVAILABLE",be[be.DATA_LOSS=15]="DATA_LOSS";function cR(){return new TextEncoder}const hR=new Ci([4294967295,4294967295],0);function Fy(r){const e=cR().encode(r),t=new _v;return t.update(e),new Uint8Array(t.digest())}function Uy(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ci([t,s],0),new Ci([o,l],0)]}class jf{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Ba(`Invalid padding: ${t}`);if(s<0)throw new Ba(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Ba(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Ba(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ci.fromNumber(this.ge)}ye(e,t,s){let o=e.add(t.multiply(Ci.fromNumber(s)));return o.compare(hR)===1&&(o=new Ci([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Fy(e),[s,o]=Uy(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(s,o,l);if(!this.we(h))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new jf(l,o,t);return s.forEach((p=>h.insert(p))),h}insert(e){if(this.ge===0)return;const t=Fy(e),[s,o]=Uy(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(s,o,l);this.Se(h)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Ba extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Fc{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,yl.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Fc(ve.min(),o,new st(Ve),br(),Oe())}}class yl{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new yl(s,t,Oe(),Oe(),Oe())}}class ec{constructor(e,t,s,o){this.be=e,this.removedTargetIds=t,this.key=s,this.De=o}}class ow{constructor(e,t){this.targetId=e,this.Ce=t}}class aw{constructor(e,t,s=Ft.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class jy{constructor(){this.ve=0,this.Fe=zy(),this.Me=Ft.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Oe(),t=Oe(),s=Oe();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:ge(38017,{changeType:l})}})),new yl(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=zy()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Fe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class dR{constructor(e){this.Ge=e,this.ze=new Map,this.je=br(),this.Je=$u(),this.He=$u(),this.Ye=new st(Ve)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:ge(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,s=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(Jd(l))if(s===0){const h=new me(l.path);this.et(t,h,kt.newNoDocument(h,ve.min()))}else Fe(s===1,20013,{expectedCount:s});else{const h=this._t(t);if(h!==s){const p=this.ut(e),g=p?this.ct(p,e,h):1;if(g!==0){this.it(t);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let h,p;try{h=Di(s).toUint8Array()}catch(g){if(g instanceof Nv)return Po("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new jf(h,o,l)}catch(g){return Po(g instanceof Ba?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let o=0;return s.forEach((l=>{const h=this.Ge.ht(),p=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(p)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,h)=>{const p=this.ot(h);if(p){if(l.current&&Jd(p.target)){const g=new me(p.target.path);this.It(g).has(h)||this.Et(h,g)||this.et(h,g,kt.newNoDocument(g,e))}l.Be&&(t.set(h,l.ke()),l.qe())}}));let s=Oe();this.He.forEach(((l,h)=>{let p=!0;h.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(s=s.add(l))})),this.je.forEach(((l,h)=>h.setReadTime(e)));const o=new Fc(e,t,this.Ye,this.je,s);return this.je=br(),this.Je=$u(),this.He=$u(),this.Ye=new st(Ve),o}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new jy,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Tt(Ve),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Tt(Ve),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||oe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new jy),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function $u(){return new st(me.comparator)}function zy(){return new st(me.comparator)}const fR={asc:"ASCENDING",desc:"DESCENDING"},pR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mR={and:"AND",or:"OR"};class gR{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function tf(r,e){return r.useProto3Json||pl(e)?e:{value:e}}function yc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function lw(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function yR(r,e){return yc(r,e.toTimestamp())}function mn(r){return Fe(!!r,49232),ve.fromTimestamp((function(t){const s=xi(t);return new et(s.seconds,s.nanos)})(r))}function zf(r,e){return nf(r,e).canonicalString()}function nf(r,e){const t=(function(o){return new Ke(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function uw(r){const e=Ke.fromString(r);return Fe(mw(e),10190,{key:e.toString()}),e}function _c(r,e){return zf(r.databaseId,e.path)}function Qa(r,e){const t=uw(e);if(t.get(1)!==r.databaseId.projectId)throw new re($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new re($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new me(hw(t))}function cw(r,e){return zf(r.databaseId,e)}function _R(r){const e=uw(r);return e.length===4?Ke.emptyPath():hw(e)}function rf(r){return new Ke(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function hw(r){return Fe(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function By(r,e,t){return{name:_c(r,e),fields:t.value.mapValue.fields}}function vR(r,e){return"found"in e?(function(s,o){Fe(!!o.found,43571),o.found.name,o.found.updateTime;const l=Qa(s,o.found.name),h=mn(o.found.updateTime),p=o.found.createTime?mn(o.found.createTime):ve.min(),g=new Qt({mapValue:{fields:o.found.fields}});return kt.newFoundDocument(l,h,p,g)})(r,e):"missing"in e?(function(s,o){Fe(!!o.missing,3894),Fe(!!o.readTime,22933);const l=Qa(s,o.missing),h=mn(o.readTime);return kt.newNoDocument(l,h)})(r,e):ge(7234,{result:e})}function wR(r,e){let t;if("targetChange"in e){e.targetChange;const s=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:ge(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(y,w){return y.useProto3Json?(Fe(w===void 0||typeof w=="string",58123),Ft.fromBase64String(w||"")):(Fe(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),Ft.fromUint8Array(w||new Uint8Array))})(r,e.targetChange.resumeToken),h=e.targetChange.cause,p=h&&(function(y){const w=y.code===void 0?$.UNKNOWN:sw(y.code);return new re(w,y.message||"")})(h);t=new aw(s,o,l,p||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Qa(r,s.document.name),l=mn(s.document.updateTime),h=s.document.createTime?mn(s.document.createTime):ve.min(),p=new Qt({mapValue:{fields:s.document.fields}}),g=kt.newFoundDocument(o,l,h,p),y=s.targetIds||[],w=s.removedTargetIds||[];t=new ec(y,w,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Qa(r,s.document),l=s.readTime?mn(s.readTime):ve.min(),h=kt.newNoDocument(o,l),p=s.removedTargetIds||[];t=new ec([],p,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Qa(r,s.document),l=s.removedTargetIds||[];t=new ec([],l,o,null)}else{if(!("filter"in e))return ge(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,h=new uR(o,l),p=s.targetId;t=new ow(p,h)}}return t}function dw(r,e){let t;if(e instanceof gl)t={update:By(r,e.key,e.value)};else if(e instanceof bc)t={delete:_c(r,e.key)};else if(e instanceof Ui)t={update:By(r,e.key,e.data),updateMask:kR(e.fieldMask)};else{if(!(e instanceof rw))return ge(16599,{Vt:e.type});t={verify:_c(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,h){const p=h.transform;if(p instanceof il)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof sl)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof ol)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof gc)return{fieldPath:h.field.canonicalString(),increment:p.Ae};throw ge(20930,{transform:h.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:yR(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:ge(27497)})(r,e.precondition)),t}function ER(r,e){return r&&r.length>0?(Fe(e!==void 0,14353),r.map((t=>(function(o,l){let h=o.updateTime?mn(o.updateTime):mn(l);return h.isEqual(ve.min())&&(h=mn(l)),new iR(h,o.transformResults||[])})(t,e)))):[]}function TR(r,e){return{documents:[cw(r,e.path)]}}function IR(r,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=cw(r,o);const l=(function(y){if(y.length!==0)return pw(Un.create(y,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const h=(function(y){if(y.length!==0)return y.map((w=>(function(R){return{field:_o(R.field),direction:RR(R.dir)}})(w)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const p=tf(r,e.limit);return p!==null&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:o}}function SR(r){let e=_R(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){Fe(s===1,65062);const w=t.from[0];w.allDescendants?o=w.collectionId:e=e.child(w.collectionId)}let l=[];t.where&&(l=(function(T){const R=fw(T);return R instanceof Un&&jv(R)?R.getFilters():[R]})(t.where));let h=[];t.orderBy&&(h=(function(T){return T.map((R=>(function(W){return new mc(vo(W.field),(function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(W.direction))})(R)))})(t.orderBy));let p=null;t.limit&&(p=(function(T){let R;return R=typeof T=="object"?T.value:T,pl(R)?null:R})(t.limit));let g=null;t.startAt&&(g=(function(T){const R=!!T.before,F=T.values||[];return new pc(F,R)})(t.startAt));let y=null;return t.endAt&&(y=(function(T){const R=!T.before,F=T.values||[];return new pc(F,R)})(t.endAt)),qA(e,o,h,l,p,"F",g,y)}function AR(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ge(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function fw(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=vo(t.unaryFilter.field);return _t.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=vo(t.unaryFilter.field);return _t.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=vo(t.unaryFilter.field);return _t.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=vo(t.unaryFilter.field);return _t.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ge(61313);default:return ge(60726)}})(r):r.fieldFilter!==void 0?(function(t){return _t.create(vo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ge(58110);default:return ge(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return Un.create(t.compositeFilter.filters.map((s=>fw(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return ge(1026)}})(t.compositeFilter.op))})(r):ge(30097,{filter:r})}function RR(r){return fR[r]}function CR(r){return pR[r]}function PR(r){return mR[r]}function _o(r){return{fieldPath:r.canonicalString()}}function vo(r){return Mt.fromServerFormat(r.fieldPath)}function pw(r){return r instanceof _t?(function(t){if(t.op==="=="){if(ky(t.value))return{unaryFilter:{field:_o(t.field),op:"IS_NAN"}};if(Py(t.value))return{unaryFilter:{field:_o(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(ky(t.value))return{unaryFilter:{field:_o(t.field),op:"IS_NOT_NAN"}};if(Py(t.value))return{unaryFilter:{field:_o(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_o(t.field),op:CR(t.op),value:t.value}}})(r):r instanceof Un?(function(t){const s=t.getFilters().map((o=>pw(o)));return s.length===1?s[0]:{compositeFilter:{op:PR(t.op),filters:s}}})(r):ge(54877,{filter:r})}function kR(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function mw(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}class Ei{constructor(e,t,s,o,l=ve.min(),h=ve.min(),p=Ft.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new Ei(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ei(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ei(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ei(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class NR{constructor(e){this.yt=e}}function xR(r){const e=SR({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?ef(e,e.limit,"L"):e}class DR{constructor(){this.Cn=new VR}addToCollectionParentIndex(e,t){return this.Cn.add(t),H.resolve()}getCollectionParents(e,t){return H.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return H.resolve()}deleteFieldIndex(e,t){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,t){return H.resolve()}getDocumentsMatchingTarget(e,t){return H.resolve(null)}getIndexType(e,t){return H.resolve(0)}getFieldIndexes(e,t){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,t){return H.resolve(Ni.min())}getMinOffsetFromCollectionGroup(e,t){return H.resolve(Ni.min())}updateCollectionGroup(e,t,s){return H.resolve()}updateIndexEntries(e,t){return H.resolve()}}class VR{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new Tt(Ke.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Tt(Ke.comparator)).toArray()}}const $y={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},gw=41943040;class nn{static withCacheSize(e){return new nn(e,nn.DEFAULT_COLLECTION_PERCENTILE,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}nn.DEFAULT_COLLECTION_PERCENTILE=10,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nn.DEFAULT=new nn(gw,nn.DEFAULT_COLLECTION_PERCENTILE,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nn.DISABLED=new nn(-1,0,0);class Do{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Do(0)}static cr(){return new Do(-1)}}const qy="LruGarbageCollector",OR=1048576;function Wy([r,e],[t,s]){const o=Ve(r,t);return o===0?Ve(e,s):o}class LR{constructor(e){this.Ir=e,this.buffer=new Tt(Wy),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Wy(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class MR{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){oe(qy,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){zo(t)?oe(qy,"Ignoring IndexedDB error during garbage collection: ",t):await jo(t)}await this.Vr(3e5)}))}}class bR{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return H.resolve(xc.ce);const s=new LR(t);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),H.resolve($y)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$y):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,o,l,h,p,g,y;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,h=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(s=T,p=Date.now(),this.removeTargets(e,s,t)))).next((T=>(l=T,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((T=>(y=Date.now(),go()<=De.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-w}ms
	Determined least recently used ${o} in `+(p-h)+`ms
	Removed ${l} targets in `+(g-p)+`ms
	Removed ${T} documents in `+(y-g)+`ms
Total Duration: ${y-w}ms`),H.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:T}))))}}function FR(r,e){return new bR(r,e)}class UR{constructor(){this.changes=new As((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,kt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?H.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class jR{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class zR{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&Ka(s.mutation,o,pn.empty(),et.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,Oe()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=Oe()){const o=gs();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((l=>{let h=za();return l.forEach(((p,g)=>{h=h.insert(p,g.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const s=gs();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,Oe())))}populateOverlays(e,t,s){const o=[];return s.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((h,p)=>{t.set(h,p)}))}))}computeViews(e,t,s,o){let l=br();const h=Ga(),p=(function(){return Ga()})();return t.forEach(((g,y)=>{const w=s.get(y.key);o.has(y.key)&&(w===void 0||w.mutation instanceof Ui)?l=l.insert(y.key,y):w!==void 0?(h.set(y.key,w.mutation.getFieldMask()),Ka(w.mutation,y,w.mutation.getFieldMask(),et.now())):h.set(y.key,pn.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((y,w)=>h.set(y,w))),t.forEach(((y,w)=>p.set(y,new jR(w,h.get(y)??null)))),p)))}recalculateAndSaveOverlays(e,t){const s=Ga();let o=new st(((h,p)=>h-p)),l=Oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const p of h)p.keys().forEach((g=>{const y=t.get(g);if(y===null)return;let w=s.get(g)||pn.empty();w=p.applyToLocalView(y,w),s.set(g,w);const T=(o.get(p.batchId)||Oe()).add(g);o=o.insert(p.batchId,T)}))})).next((()=>{const h=[],p=o.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),y=g.key,w=g.value,T=Qv();w.forEach((R=>{if(!l.has(R)){const F=tw(t.get(R),s.get(R));F!==null&&T.set(R,F),l=l.add(R)}})),h.push(this.documentOverlayCache.saveOverlays(e,y,T))}return H.waitFor(h)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return(function(h){return me.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):qv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):H.resolve(gs());let p=el,g=l;return h.next((y=>H.forEach(y,((w,T)=>(p<T.largestBatchId&&(p=T.largestBatchId),l.get(w)?H.resolve():this.remoteDocumentCache.getEntry(e,w).next((R=>{g=g.insert(w,R)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,g,y,Oe()))).next((w=>({batchId:p,changes:Kv(w)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new me(t)).next((s=>{let o=za();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let h=za();return this.indexManager.getCollectionParents(e,l).next((p=>H.forEach(p,(g=>{const y=(function(T,R){return new ml(R,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,s,o).next((w=>{w.forEach(((T,R)=>{h=h.insert(T,R)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o)))).next((h=>{l.forEach(((g,y)=>{const w=y.getKey();h.get(w)===null&&(h=h.insert(w,kt.newInvalidDocument(w)))}));let p=za();return h.forEach(((g,y)=>{const w=l.get(g);w!==void 0&&Ka(w.mutation,y,pn.empty(),et.now()),Oc(t,y)&&(p=p.insert(g,y))})),p}))}}class BR{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return H.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:mn(o.createTime)}})(t)),H.resolve()}getNamedQuery(e,t){return H.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:xR(o.bundledQuery),readTime:mn(o.readTime)}})(t)),H.resolve()}}class $R{constructor(){this.overlays=new st(me.comparator),this.qr=new Map}getOverlay(e,t){return H.resolve(this.overlays.get(t))}getOverlays(e,t){const s=gs();return H.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&s.set(o,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,l)=>{this.St(e,t,l)})),H.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),H.resolve()}getOverlaysForCollection(e,t,s){const o=gs(),l=t.length+1,h=new me(t.child("")),p=this.overlays.getIteratorFrom(h);for(;p.hasNext();){const g=p.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&g.largestBatchId>s&&o.set(g.getKey(),g)}return H.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new st(((y,w)=>y-w));const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>s){let w=l.get(y.largestBatchId);w===null&&(w=gs(),l=l.insert(y.largestBatchId,w)),w.set(y.getKey(),y)}}const p=gs(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,w)=>p.set(y,w))),!(p.size()>=o)););return H.resolve(p)}St(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new lR(t,s));let l=this.qr.get(t);l===void 0&&(l=Oe(),this.qr.set(t,l)),this.qr.set(t,l.add(s.key))}}class qR{constructor(){this.sessionToken=Ft.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,H.resolve()}}class Bf{constructor(){this.Qr=new Tt(Pt.$r),this.Ur=new Tt(Pt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new Pt(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new Pt(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new me(new Ke([])),s=new Pt(t,e),o=new Pt(t,e+1),l=[];return this.Ur.forEachInRange([s,o],(h=>{this.Gr(h),l.push(h.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new me(new Ke([])),s=new Pt(t,e),o=new Pt(t,e+1);let l=Oe();return this.Ur.forEachInRange([s,o],(h=>{l=l.add(h.key)})),l}containsKey(e){const t=new Pt(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Pt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return me.comparator(e.key,t.key)||Ve(e.Yr,t.Yr)}static Kr(e,t){return Ve(e.Yr,t.Yr)||me.comparator(e.key,t.key)}}class WR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Tt(Pt.$r)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new aR(l,t,s,o);this.mutationQueue.push(h);for(const p of o)this.Zr=this.Zr.add(new Pt(p.key,l)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return H.resolve(h)}lookupMutationBatch(e,t){return H.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.ei(s),l=o<0?0:o;return H.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?Df:this.tr-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Pt(t,0),o=new Pt(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,o],(h=>{const p=this.Xr(h.Yr);l.push(p)})),H.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Tt(Ve);return t.forEach((o=>{const l=new Pt(o,0),h=new Pt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,h],(p=>{s=s.add(p.Yr)}))})),H.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;me.isDocumentKey(l)||(l=l.child(""));const h=new Pt(new me(l),0);let p=new Tt(Ve);return this.Zr.forEachWhile((g=>{const y=g.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(p=p.add(g.Yr)),!0)}),h),H.resolve(this.ti(p))}ti(e){const t=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Fe(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return H.forEach(t.mutations,(o=>{const l=new Pt(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new Pt(t,0),o=this.Zr.firstAfterOrEqual(s);return H.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class HR{constructor(e){this.ri=e,this.docs=(function(){return new st(me.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,h=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return H.resolve(s?s.document.mutableCopy():kt.newInvalidDocument(t))}getEntries(e,t){let s=br();return t.forEach((o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():kt.newInvalidDocument(o))})),H.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=br();const h=t.path,p=new me(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:y,value:{document:w}}=g.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||TA(EA(w),s)<=0||(o.has(w.key)||Oc(t,w))&&(l=l.insert(w.key,w.mutableCopy()))}return H.resolve(l)}getAllFromCollectionGroup(e,t,s,o){ge(9500)}ii(e,t){return H.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new GR(this)}getSize(e){return H.resolve(this.size)}}class GR extends UR{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),H.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class KR{constructor(e){this.persistence=e,this.si=new As((t=>Lf(t)),Mf),this.lastRemoteSnapshotVersion=ve.min(),this.highestTargetId=0,this.oi=0,this._i=new Bf,this.targetCount=0,this.ai=Do.ur()}forEachTarget(e,t){return this.si.forEach(((s,o)=>t(o))),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),H.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Do(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,H.resolve()}updateTargetData(e,t){return this.Pr(t),H.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.si.forEach(((h,p)=>{p.sequenceNumber<=t&&s.get(p.targetId)===null&&(this.si.delete(h),l.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),H.waitFor(l).next((()=>o))}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return H.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),H.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((h=>{l.push(o.markPotentiallyOrphaned(e,h))})),H.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),H.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return H.resolve(s)}containsKey(e,t){return H.resolve(this._i.containsKey(t))}}class yw{constructor(e,t){this.ui={},this.overlays={},this.ci=new xc(0),this.li=!1,this.li=!0,this.hi=new qR,this.referenceDelegate=e(this),this.Pi=new KR(this),this.indexManager=new DR,this.remoteDocumentCache=(function(o){return new HR(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new NR(t),this.Ii=new BR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new $R,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new WR(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){oe("MemoryPersistence","Starting transaction:",e);const o=new QR(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ai(e,t){return H.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class QR extends SA{constructor(e){super(),this.currentSequenceNumber=e}}class $f{constructor(e){this.persistence=e,this.Ri=new Bf,this.Vi=null}static mi(e){return new $f(e)}get fi(){if(this.Vi)return this.Vi;throw ge(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),H.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),H.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),H.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.fi,(s=>{const o=me.fromPath(s);return this.gi(e,o).next((l=>{l||t.removeEntry(o,ve.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return H.or([()=>H.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class vc{constructor(e,t){this.persistence=e,this.pi=new As((s=>CA(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=FR(this,t)}static mi(e,t){return new vc(e,t)}Ei(){}di(e){return H.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return H.forEach(this.pi,((s,o)=>this.br(e,s,o).next((l=>l?H.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,(h=>this.br(e,h,t).next((p=>{p||(s++,l.removeEntry(h,ve.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),H.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),H.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),H.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),H.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Yu(e.data.value)),t}br(e,t,s){return H.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return H.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class qf{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=o}static As(e,t){let s=Oe(),o=Oe();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new qf(e,t.fromCache,s,o)}}class XR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class YR{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return q0()?8:AA(Ht())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.ys(e,t).next((h=>{l.result=h})).next((()=>{if(!l.result)return this.ws(e,t,o,s).next((h=>{l.result=h}))})).next((()=>{if(l.result)return;const h=new XR;return this.Ss(e,t,h).next((p=>{if(l.result=p,this.Vs)return this.bs(e,t,h,p.size)}))})).next((()=>l.result))}bs(e,t,s,o){return s.documentReadCount<this.fs?(go()<=De.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",yo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),H.resolve()):(go()<=De.DEBUG&&oe("QueryEngine","Query:",yo(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(go()<=De.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",yo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ar(t))):H.resolve())}ys(e,t){if(Vy(t))return H.resolve(null);let s=ar(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=ef(t,null,"F"),s=ar(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const h=Oe(...l);return this.ps.getDocuments(e,h).next((p=>this.indexManager.getMinOffset(e,s).next((g=>{const y=this.Ds(t,p);return this.Cs(t,y,h,g.readTime)?this.ys(e,ef(t,null,"F")):this.vs(e,y,t,g)}))))})))))}ws(e,t,s,o){return Vy(t)||o.isEqual(ve.min())?H.resolve(null):this.ps.getDocuments(e,s).next((l=>{const h=this.Ds(t,l);return this.Cs(t,h,s,o)?H.resolve(null):(go()<=De.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),yo(t)),this.vs(e,h,t,wA(o,el)).next((p=>p)))}))}Ds(e,t){let s=new Tt(Hv(e));return t.forEach(((o,l)=>{Oc(e,l)&&(s=s.add(l))})),s}Cs(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,s){return go()<=De.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",yo(t)),this.ps.getDocumentsMatchingQuery(e,t,Ni.min(),s)}vs(e,t,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((l=>(t.forEach((h=>{l=l.insert(h.key,h)})),l)))}}const Wf="LocalStore",JR=3e8;class ZR{constructor(e,t,s,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new st(Ve),this.xs=new As((l=>Lf(l)),Mf),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zR(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function eC(r,e,t,s){return new ZR(r,e,t,s)}async function _w(r,e){const t=Se(r);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((l=>(o=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const h=[],p=[];let g=Oe();for(const y of o){h.push(y.batchId);for(const w of y.mutations)g=g.add(w.key)}for(const y of l){p.push(y.batchId);for(const w of y.mutations)g=g.add(w.key)}return t.localDocuments.getDocuments(s,g).next((y=>({Ls:y,removedBatchIds:h,addedBatchIds:p})))}))}))}function tC(r,e){const t=Se(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,g,y,w){const T=y.batch,R=T.keys();let F=H.resolve();return R.forEach((W=>{F=F.next((()=>w.getEntry(g,W))).next((q=>{const D=y.docVersions.get(W);Fe(D!==null,48541),q.version.compareTo(D)<0&&(T.applyToRemoteDocument(q,y),q.isValidDocument()&&(q.setReadTime(y.commitVersion),w.addEntry(q)))}))})),F.next((()=>p.mutationQueue.removeMutationBatch(g,T)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(p){let g=Oe();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(g=g.add(p.batch.mutations[y].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function vw(r){const e=Se(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function nC(r,e){const t=Se(r),s=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const h=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const p=[];e.targetChanges.forEach(((w,T)=>{const R=o.get(T);if(!R)return;p.push(t.Pi.removeMatchingKeys(l,w.removedDocuments,T).next((()=>t.Pi.addMatchingKeys(l,w.addedDocuments,T))));let F=R.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?F=F.withResumeToken(Ft.EMPTY_BYTE_STRING,ve.min()).withLastLimboFreeSnapshotVersion(ve.min()):w.resumeToken.approximateByteSize()>0&&(F=F.withResumeToken(w.resumeToken,s)),o=o.insert(T,F),(function(q,D,ne){return q.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=JR?!0:ne.addedDocuments.size+ne.modifiedDocuments.size+ne.removedDocuments.size>0})(R,F,w)&&p.push(t.Pi.updateTargetData(l,F))}));let g=br(),y=Oe();if(e.documentUpdates.forEach((w=>{e.resolvedLimboDocuments.has(w)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(l,w))})),p.push(rC(l,h,e.documentUpdates).next((w=>{g=w.ks,y=w.qs}))),!s.isEqual(ve.min())){const w=t.Pi.getLastRemoteSnapshotVersion(l).next((T=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));p.push(w)}return H.waitFor(p).next((()=>h.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,y))).next((()=>g))})).then((l=>(t.Ms=o,l)))}function rC(r,e,t){let s=Oe(),o=Oe();return t.forEach((l=>s=s.add(l))),e.getEntries(r,s).next((l=>{let h=br();return t.forEach(((p,g)=>{const y=l.get(p);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(p)),g.isNoDocument()&&g.version.isEqual(ve.min())?(e.removeEntry(p,g.readTime),h=h.insert(p,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),h=h.insert(p,g)):oe(Wf,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",g.version)})),{ks:h,qs:o}}))}function iC(r,e){const t=Se(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Df),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function sC(r,e){const t=Se(r);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.Pi.getTargetData(s,e).next((l=>l?(o=l,H.resolve(o)):t.Pi.allocateTargetId(s).next((h=>(o=new Ei(e,h,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function sf(r,e,t){const s=Se(r),o=s.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(h=>s.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!zo(h))throw h;oe(Wf,`Failed to update sequence numbers for target ${e}: ${h}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function Hy(r,e,t){const s=Se(r);let o=ve.min(),l=Oe();return s.persistence.runTransaction("Execute query","readwrite",(h=>(function(g,y,w){const T=Se(g),R=T.xs.get(w);return R!==void 0?H.resolve(T.Ms.get(R)):T.Pi.getTargetData(y,w)})(s,h,ar(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(h,p.targetId).next((g=>{l=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(h,e,t?o:ve.min(),t?l:Oe()))).next((p=>(oC(s,HA(e),p),{documents:p,Qs:l})))))}function oC(r,e,t){let s=r.Os.get(e)||ve.min();t.forEach(((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),r.Os.set(e,s)}class Gy{constructor(){this.activeTargetIds=JA()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class aC{constructor(){this.Mo=new Gy,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Gy,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class lC{Oo(e){}shutdown(){}}const Ky="ConnectivityMonitor";class Qy{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){oe(Ky,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){oe(Ky,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let qu=null;function of(){return qu===null?qu=(function(){return 268435456+Math.round(2147483648*Math.random())})():qu++,"0x"+qu.toString(16)}const xd="RestConnection",uC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class cC{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===dc?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,t,s,o,l){const h=of(),p=this.zo(e,t.toUriEncodedString());oe(xd,`Sending RPC '${e}' ${h}:`,p,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,l);const{host:y}=new URL(p),w=Mo(y);return this.Jo(e,p,g,s,w).then((T=>(oe(xd,`Received RPC '${e}' ${h}: `,T),T)),(T=>{throw Po(xd,`RPC '${e}' ${h} failed with error: `,T,"url: ",p,"request:",s),T}))}Ho(e,t,s,o,l,h){return this.Go(e,t,s,o,l)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Uo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),s&&s.headers.forEach(((o,l)=>e[l]=o))}zo(e,t){const s=uC[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}class hC{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const qt="WebChannelConnection";class dC extends cC{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,o,l){const h=of();return new Promise(((p,g)=>{const y=new vv;y.setWithCredentials(!0),y.listenOnce(wv.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Xu.NO_ERROR:const T=y.getResponseJson();oe(qt,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(T)),p(T);break;case Xu.TIMEOUT:oe(qt,`RPC '${e}' ${h} timed out`),g(new re($.DEADLINE_EXCEEDED,"Request time out"));break;case Xu.HTTP_ERROR:const R=y.getStatus();if(oe(qt,`RPC '${e}' ${h} failed with status:`,R,"response text:",y.getResponseText()),R>0){let F=y.getResponseJson();Array.isArray(F)&&(F=F[0]);const W=F?.error;if(W&&W.status&&W.message){const q=(function(ne){const ee=ne.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(ee)>=0?ee:$.UNKNOWN})(W.status);g(new re(q,W.message))}else g(new re($.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new re($.UNAVAILABLE,"Connection failed."));break;default:ge(9055,{l_:e,streamId:h,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{oe(qt,`RPC '${e}' ${h} completed.`)}}));const w=JSON.stringify(o);oe(qt,`RPC '${e}' ${h} sending request:`,o),y.send(t,"POST",w,s,15)}))}T_(e,t,s){const o=of(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=Iv(),p=Tv(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const w=l.join("");oe(qt,`Creating RPC '${e}' stream ${o}: ${w}`,g);const T=h.createWebChannel(w,g);this.I_(T);let R=!1,F=!1;const W=new hC({Yo:D=>{F?oe(qt,`Not sending because RPC '${e}' stream ${o} is closed:`,D):(R||(oe(qt,`Opening RPC '${e}' stream ${o} transport.`),T.open(),R=!0),oe(qt,`RPC '${e}' stream ${o} sending:`,D),T.send(D))},Zo:()=>T.close()}),q=(D,ne,ee)=>{D.listen(ne,(te=>{try{ee(te)}catch(he){setTimeout((()=>{throw he}),0)}}))};return q(T,ja.EventType.OPEN,(()=>{F||(oe(qt,`RPC '${e}' stream ${o} transport opened.`),W.o_())})),q(T,ja.EventType.CLOSE,(()=>{F||(F=!0,oe(qt,`RPC '${e}' stream ${o} transport closed`),W.a_(),this.E_(T))})),q(T,ja.EventType.ERROR,(D=>{F||(F=!0,Po(qt,`RPC '${e}' stream ${o} transport errored. Name:`,D.name,"Message:",D.message),W.a_(new re($.UNAVAILABLE,"The operation could not be completed")))})),q(T,ja.EventType.MESSAGE,(D=>{if(!F){const ne=D.data[0];Fe(!!ne,16349);const ee=ne,te=ee?.error||ee[0]?.error;if(te){oe(qt,`RPC '${e}' stream ${o} received error:`,te);const he=te.status;let Te=(function(I){const C=yt[I];if(C!==void 0)return sw(C)})(he),Pe=te.message;Te===void 0&&(Te=$.INTERNAL,Pe="Unknown error status: "+he+" with message "+te.message),F=!0,W.a_(new re(Te,Pe)),T.close()}else oe(qt,`RPC '${e}' stream ${o} received:`,ne),W.u_(ne)}})),q(p,Ev.STAT_EVENT,(D=>{D.stat===Gd.PROXY?oe(qt,`RPC '${e}' stream ${o} detected buffering proxy`):D.stat===Gd.NOPROXY&&oe(qt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{W.__()}),0),W}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Dd(){return typeof document<"u"?document:null}function Uc(r){return new gR(r,!0)}class Hf{constructor(e,t,s=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-s);o>0&&oe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Xy="PersistentStream";class ww{constructor(e,t,s,o,l,h,p,g){this.Mi=e,this.S_=s,this.b_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Hf(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===$.RESOURCE_EXHAUSTED?(Lr(t.toString()),Lr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===t&&this.G_(s,o)}),(s=>{e((()=>{const o=new re($.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return oe(Xy,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(oe(Xy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class fC extends ww{constructor(e,t,s,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,h),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=wR(this.serializer,e),s=(function(l){if(!("targetChange"in l))return ve.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?ve.min():h.readTime?mn(h.readTime):ve.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=rf(this.serializer),t.addTarget=(function(l,h){let p;const g=h.target;if(p=Jd(g)?{documents:TR(l,g)}:{query:IR(l,g).ft},p.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){p.resumeToken=lw(l,h.resumeToken);const y=tf(l,h.expectedCount);y!==null&&(p.expectedCount=y)}else if(h.snapshotVersion.compareTo(ve.min())>0){p.readTime=yc(l,h.snapshotVersion.toTimestamp());const y=tf(l,h.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,e);const s=AR(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=rf(this.serializer),t.removeTarget=e,this.q_(t)}}class pC extends ww{constructor(e,t,s,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,h),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Fe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Fe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Fe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=ER(e.writeResults,e.commitTime),s=mn(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=rf(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>dw(this.serializer,s)))};this.q_(t)}}class mC{}class gC extends mC{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new re($.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Go(e,nf(t,s),o,l,h))).catch((l=>{throw l.name==="FirebaseError"?(l.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new re($.UNKNOWN,l.toString())}))}Ho(e,t,s,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,p])=>this.connection.Ho(e,nf(t,s),o,h,p,l))).catch((h=>{throw h.name==="FirebaseError"?(h.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new re($.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class yC{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Lr(t),this.aa=!1):oe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Ts="RemoteStore";class _C{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((h=>{s.enqueueAndForget((async()=>{Rs(this)&&(oe(Ts,"Restarting streams for network reachability change."),await(async function(g){const y=Se(g);y.Ea.add(4),await _l(y),y.Ra.set("Unknown"),y.Ea.delete(4),await jc(y)})(this))}))})),this.Ra=new yC(s,o)}}async function jc(r){if(Rs(r))for(const e of r.da)await e(!0)}async function _l(r){for(const e of r.da)await e(!1)}function Ew(r,e){const t=Se(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Xf(t)?Qf(t):Bo(t).O_()&&Kf(t,e))}function Gf(r,e){const t=Se(r),s=Bo(t);t.Ia.delete(e),s.O_()&&Tw(t,e),t.Ia.size===0&&(s.O_()?s.L_():Rs(t)&&t.Ra.set("Unknown"))}function Kf(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ve.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Bo(r).Y_(e)}function Tw(r,e){r.Va.Ue(e),Bo(r).Z_(e)}function Qf(r){r.Va=new dR({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Bo(r).start(),r.Ra.ua()}function Xf(r){return Rs(r)&&!Bo(r).x_()&&r.Ia.size>0}function Rs(r){return Se(r).Ea.size===0}function Iw(r){r.Va=void 0}async function vC(r){r.Ra.set("Online")}async function wC(r){r.Ia.forEach(((e,t)=>{Kf(r,e)}))}async function EC(r,e){Iw(r),Xf(r)?(r.Ra.ha(e),Qf(r)):r.Ra.set("Unknown")}async function TC(r,e,t){if(r.Ra.set("Online"),e instanceof aw&&e.state===2&&e.cause)try{await(async function(o,l){const h=l.cause;for(const p of l.targetIds)o.Ia.has(p)&&(await o.remoteSyncer.rejectListen(p,h),o.Ia.delete(p),o.Va.removeTarget(p))})(r,e)}catch(s){oe(Ts,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await wc(r,s)}else if(e instanceof ec?r.Va.Ze(e):e instanceof ow?r.Va.st(e):r.Va.tt(e),!t.isEqual(ve.min()))try{const s=await vw(r.localStore);t.compareTo(s)>=0&&await(function(l,h){const p=l.Va.Tt(h);return p.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const w=l.Ia.get(y);w&&l.Ia.set(y,w.withResumeToken(g.resumeToken,h))}})),p.targetMismatches.forEach(((g,y)=>{const w=l.Ia.get(g);if(!w)return;l.Ia.set(g,w.withResumeToken(Ft.EMPTY_BYTE_STRING,w.snapshotVersion)),Tw(l,g);const T=new Ei(w.target,g,y,w.sequenceNumber);Kf(l,T)})),l.remoteSyncer.applyRemoteEvent(p)})(r,t)}catch(s){oe(Ts,"Failed to raise snapshot:",s),await wc(r,s)}}async function wc(r,e,t){if(!zo(e))throw e;r.Ea.add(1),await _l(r),r.Ra.set("Offline"),t||(t=()=>vw(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{oe(Ts,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await jc(r)}))}function Sw(r,e){return e().catch((t=>wc(r,t,e)))}async function zc(r){const e=Se(r),t=Oi(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Df;for(;IC(e);)try{const o=await iC(e.localStore,s);if(o===null){e.Ta.length===0&&t.L_();break}s=o.batchId,SC(e,o)}catch(o){await wc(e,o)}Aw(e)&&Rw(e)}function IC(r){return Rs(r)&&r.Ta.length<10}function SC(r,e){r.Ta.push(e);const t=Oi(r);t.O_()&&t.X_&&t.ea(e.mutations)}function Aw(r){return Rs(r)&&!Oi(r).x_()&&r.Ta.length>0}function Rw(r){Oi(r).start()}async function AC(r){Oi(r).ra()}async function RC(r){const e=Oi(r);for(const t of r.Ta)e.ea(t.mutations)}async function CC(r,e,t){const s=r.Ta.shift(),o=Uf.from(s,e,t);await Sw(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await zc(r)}async function PC(r,e){e&&Oi(r).X_&&await(async function(s,o){if((function(h){return iw(h)&&h!==$.ABORTED})(o.code)){const l=s.Ta.shift();Oi(s).B_(),await Sw(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o))),await zc(s)}})(r,e),Aw(r)&&Rw(r)}async function Yy(r,e){const t=Se(r);t.asyncQueue.verifyOperationInProgress(),oe(Ts,"RemoteStore received new credentials");const s=Rs(t);t.Ea.add(3),await _l(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await jc(t)}async function kC(r,e){const t=Se(r);e?(t.Ea.delete(2),await jc(t)):e||(t.Ea.add(2),await _l(t),t.Ra.set("Unknown"))}function Bo(r){return r.ma||(r.ma=(function(t,s,o){const l=Se(t);return l.sa(),new fC(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Xo:vC.bind(null,r),t_:wC.bind(null,r),r_:EC.bind(null,r),H_:TC.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),Xf(r)?Qf(r):r.Ra.set("Unknown")):(await r.ma.stop(),Iw(r))}))),r.ma}function Oi(r){return r.fa||(r.fa=(function(t,s,o){const l=Se(t);return l.sa(),new pC(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:AC.bind(null,r),r_:PC.bind(null,r),ta:RC.bind(null,r),na:CC.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await zc(r)):(await r.fa.stop(),r.Ta.length>0&&(oe(Ts,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class Yf{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const h=Date.now()+s,p=new Yf(e,t,h,o,l);return p.start(s),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new re($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jf(r,e){if(Lr("AsyncQueue",`${e}: ${r}`),zo(r))return new re($.UNAVAILABLE,`${e}: ${r}`);throw r}class So{static emptySet(e){return new So(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||me.comparator(t.key,s.key):(t,s)=>me.comparator(t.key,s.key),this.keyedMap=za(),this.sortedSet=new st(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof So)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new So;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class Jy{constructor(){this.ga=new st(me.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ge(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class Vo{constructor(e,t,s,o,l,h,p,g,y){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,t,s,o,l){const h=[];return t.forEach((p=>{h.push({type:0,doc:p})})),new Vo(e,t,So.emptySet(t),h,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}class NC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class xC{constructor(){this.queries=Zy(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const o=Se(t),l=o.queries;o.queries=Zy(),l.forEach(((h,p)=>{for(const g of p.Sa)g.onError(s)}))})(this,new re($.ABORTED,"Firestore shutting down"))}}function Zy(){return new As((r=>Wv(r)),Vc)}async function Cw(r,e){const t=Se(r);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.ba()&&e.Da()&&(s=2):(l=new NC,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const p=Jf(h,`Initialization of query '${yo(e.query)}' failed`);return void e.onError(p)}t.queries.set(o,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Zf(t)}async function Pw(r,e){const t=Se(r),s=e.query;let o=3;const l=t.queries.get(s);if(l){const h=l.Sa.indexOf(e);h>=0&&(l.Sa.splice(h,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function DC(r,e){const t=Se(r);let s=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const p of h.Sa)p.Fa(o)&&(s=!0);h.wa=o}}s&&Zf(t)}function VC(r,e,t){const s=Se(r),o=s.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);s.queries.delete(e)}function Zf(r){r.Ca.forEach((e=>{e.next()}))}var af,e_;(e_=af||(af={})).Ma="default",e_.Cache="cache";class kw{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Vo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Vo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==af.Cache}}class Nw{constructor(e){this.key=e}}class xw{constructor(e){this.key=e}}class OC{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Oe(),this.mutatedKeys=Oe(),this.eu=Hv(e),this.tu=new So(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new Jy,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,p=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((w,T)=>{const R=o.get(w),F=Oc(this.query,T)?T:null,W=!!R&&this.mutatedKeys.has(R.key),q=!!F&&(F.hasLocalMutations||this.mutatedKeys.has(F.key)&&F.hasCommittedMutations);let D=!1;R&&F?R.data.isEqual(F.data)?W!==q&&(s.track({type:3,doc:F}),D=!0):this.su(R,F)||(s.track({type:2,doc:F}),D=!0,(g&&this.eu(F,g)>0||y&&this.eu(F,y)<0)&&(p=!0)):!R&&F?(s.track({type:0,doc:F}),D=!0):R&&!F&&(s.track({type:1,doc:R}),D=!0,(g||y)&&(p=!0)),D&&(F?(h=h.add(F),l=q?l.add(w):l.delete(w)):(h=h.delete(w),l=l.delete(w)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const w=this.query.limitType==="F"?h.last():h.first();h=h.delete(w.key),l=l.delete(w.key),s.track({type:1,doc:w})}return{tu:h,iu:s,Cs:p,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((w,T)=>(function(F,W){const q=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ge(20277,{Rt:D})}};return q(F)-q(W)})(w.type,T.type)||this.eu(w.doc,T.doc))),this.ou(s),o=o??!1;const p=t&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,y=g!==this.Za;return this.Za=g,h.length!==0||y?{snapshot:new Vo(this.query,e.tu,l,h,e.mutatedKeys,g===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Jy,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Oe(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new xw(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new Nw(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=Oe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Vo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ep="SyncEngine";class LC{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class MC{constructor(e){this.key=e,this.hu=!1}}class bC{constructor(e,t,s,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new As((p=>Wv(p)),Vc),this.Iu=new Map,this.Eu=new Set,this.du=new st(me.comparator),this.Au=new Map,this.Ru=new Bf,this.Vu={},this.mu=new Map,this.fu=Do.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function FC(r,e,t=!0){const s=bw(r);let o;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await Dw(s,e,t,!0),o}async function UC(r,e){const t=bw(r);await Dw(t,e,!0,!1)}async function Dw(r,e,t,s){const o=await sC(r.localStore,ar(e)),l=o.targetId,h=r.sharedClientState.addLocalQueryTarget(l,t);let p;return s&&(p=await jC(r,e,l,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&Ew(r.remoteStore,o),p}async function jC(r,e,t,s,o){r.pu=(T,R,F)=>(async function(q,D,ne,ee){let te=D.view.ru(ne);te.Cs&&(te=await Hy(q.localStore,D.query,!1).then((({documents:P})=>D.view.ru(P,te))));const he=ee&&ee.targetChanges.get(D.targetId),Te=ee&&ee.targetMismatches.get(D.targetId)!=null,Pe=D.view.applyChanges(te,q.isPrimaryClient,he,Te);return n_(q,D.targetId,Pe.au),Pe.snapshot})(r,T,R,F);const l=await Hy(r.localStore,e,!0),h=new OC(e,l.Qs),p=h.ru(l.documents),g=yl.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",o),y=h.applyChanges(p,r.isPrimaryClient,g);n_(r,t,y.au);const w=new LC(e,t,h);return r.Tu.set(e,w),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),y.snapshot}async function zC(r,e,t){const s=Se(r),o=s.Tu.get(e),l=s.Iu.get(o.targetId);if(l.length>1)return s.Iu.set(o.targetId,l.filter((h=>!Vc(h,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await sf(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&Gf(s.remoteStore,o.targetId),lf(s,o.targetId)})).catch(jo)):(lf(s,o.targetId),await sf(s.localStore,o.targetId,!0))}async function BC(r,e){const t=Se(r),s=t.Tu.get(e),o=t.Iu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Gf(t.remoteStore,s.targetId))}async function $C(r,e,t){const s=XC(r);try{const o=await(function(h,p){const g=Se(h),y=et.now(),w=p.reduce(((F,W)=>F.add(W.key)),Oe());let T,R;return g.persistence.runTransaction("Locally write mutations","readwrite",(F=>{let W=br(),q=Oe();return g.Ns.getEntries(F,w).next((D=>{W=D,W.forEach(((ne,ee)=>{ee.isValidDocument()||(q=q.add(ne))}))})).next((()=>g.localDocuments.getOverlayedDocuments(F,W))).next((D=>{T=D;const ne=[];for(const ee of p){const te=oR(ee,T.get(ee.key).overlayedDocument);te!=null&&ne.push(new Ui(ee.key,te,bv(te.value.mapValue),bt.exists(!0)))}return g.mutationQueue.addMutationBatch(F,y,ne,p)})).next((D=>{R=D;const ne=D.applyToLocalDocumentSet(T,q);return g.documentOverlayCache.saveOverlays(F,D.batchId,ne)}))})).then((()=>({batchId:R.batchId,changes:Kv(T)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(h,p,g){let y=h.Vu[h.currentUser.toKey()];y||(y=new st(Ve)),y=y.insert(p,g),h.Vu[h.currentUser.toKey()]=y})(s,o.batchId,t),await vl(s,o.changes),await zc(s.remoteStore)}catch(o){const l=Jf(o,"Failed to persist write");t.reject(l)}}async function Vw(r,e){const t=Se(r);try{const s=await nC(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const h=t.Au.get(l);h&&(Fe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?Fe(h.hu,14607):o.removedDocuments.size>0&&(Fe(h.hu,42227),h.hu=!1))})),await vl(t,s,e)}catch(s){await jo(s)}}function t_(r,e,t){const s=Se(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Tu.forEach(((l,h)=>{const p=h.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(h,p){const g=Se(h);g.onlineState=p;let y=!1;g.queries.forEach(((w,T)=>{for(const R of T.Sa)R.va(p)&&(y=!0)})),y&&Zf(g)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function qC(r,e,t){const s=Se(r);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Au.get(e),l=o&&o.key;if(l){let h=new st(me.comparator);h=h.insert(l,kt.newNoDocument(l,ve.min()));const p=Oe().add(l),g=new Fc(ve.min(),new Map,new st(Ve),h,p);await Vw(s,g),s.du=s.du.remove(l),s.Au.delete(e),tp(s)}else await sf(s.localStore,e,!1).then((()=>lf(s,e,t))).catch(jo)}async function WC(r,e){const t=Se(r),s=e.batch.batchId;try{const o=await tC(t.localStore,e);Lw(t,s,null),Ow(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await vl(t,o)}catch(o){await jo(o)}}async function HC(r,e,t){const s=Se(r);try{const o=await(function(h,p){const g=Se(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let w;return g.mutationQueue.lookupMutationBatch(y,p).next((T=>(Fe(T!==null,37113),w=T.keys(),g.mutationQueue.removeMutationBatch(y,T)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,w,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,w))).next((()=>g.localDocuments.getDocuments(y,w)))}))})(s.localStore,e);Lw(s,e,t),Ow(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await vl(s,o)}catch(o){await jo(o)}}function Ow(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function Lw(r,e,t){const s=Se(r);let o=s.Vu[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function lf(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),t&&r.Pu.yu(s,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((s=>{r.Ru.containsKey(s)||Mw(r,s)}))}function Mw(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(Gf(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),tp(r))}function n_(r,e,t){for(const s of t)s instanceof Nw?(r.Ru.addReference(s.key,e),GC(r,s)):s instanceof xw?(oe(ep,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||Mw(r,s.key)):ge(19791,{wu:s})}function GC(r,e){const t=e.key,s=t.path.canonicalString();r.du.get(t)||r.Eu.has(s)||(oe(ep,"New document in limbo: "+t),r.Eu.add(s),tp(r))}function tp(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new me(Ke.fromString(e)),s=r.fu.next();r.Au.set(s,new MC(t)),r.du=r.du.insert(t,s),Ew(r.remoteStore,new Ei(ar(bf(t.path)),s,"TargetPurposeLimboResolution",xc.ce))}}async function vl(r,e,t){const s=Se(r),o=[],l=[],h=[];s.Tu.isEmpty()||(s.Tu.forEach(((p,g)=>{h.push(s.pu(g,e,t).then((y=>{if((y||t)&&s.isPrimaryClient){const w=y?!y.fromCache:t?.targetChanges.get(g.targetId)?.current;s.sharedClientState.updateQueryState(g.targetId,w?"current":"not-current")}if(y){o.push(y);const w=qf.As(g.targetId,y);l.push(w)}})))})),await Promise.all(h),s.Pu.H_(o),await(async function(g,y){const w=Se(g);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>H.forEach(y,(R=>H.forEach(R.Es,(F=>w.persistence.referenceDelegate.addReference(T,R.targetId,F))).next((()=>H.forEach(R.ds,(F=>w.persistence.referenceDelegate.removeReference(T,R.targetId,F)))))))))}catch(T){if(!zo(T))throw T;oe(Wf,"Failed to update sequence numbers: "+T)}for(const T of y){const R=T.targetId;if(!T.fromCache){const F=w.Ms.get(R),W=F.snapshotVersion,q=F.withLastLimboFreeSnapshotVersion(W);w.Ms=w.Ms.insert(R,q)}}})(s.localStore,l))}async function KC(r,e){const t=Se(r);if(!t.currentUser.isEqual(e)){oe(ep,"User change. New user:",e.toKey());const s=await _w(t.localStore,e);t.currentUser=e,(function(l,h){l.mu.forEach((p=>{p.forEach((g=>{g.reject(new re($.CANCELLED,h))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await vl(t,s.Ls)}}function QC(r,e){const t=Se(r),s=t.Au.get(e);if(s&&s.hu)return Oe().add(s.key);{let o=Oe();const l=t.Iu.get(e);if(!l)return o;for(const h of l){const p=t.Tu.get(h);o=o.unionWith(p.view.nu)}return o}}function bw(r){const e=Se(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=Vw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=QC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qC.bind(null,e),e.Pu.H_=DC.bind(null,e.eventManager),e.Pu.yu=VC.bind(null,e.eventManager),e}function XC(r){const e=Se(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=WC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=HC.bind(null,e),e}class Ec{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Uc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return eC(this.persistence,new YR,e.initialUser,this.serializer)}Cu(e){return new yw($f.mi,this.serializer)}Du(e){return new aC}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ec.provider={build:()=>new Ec};class YC extends Ec{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Fe(this.persistence.referenceDelegate instanceof vc,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new MR(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?nn.withCacheSize(this.cacheSizeBytes):nn.DEFAULT;return new yw((s=>vc.mi(s,t)),this.serializer)}}class uf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>t_(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=KC.bind(null,this.syncEngine),await kC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new xC})()}createDatastore(e){const t=Uc(e.databaseInfo.databaseId),s=(function(l){return new dC(l)})(e.databaseInfo);return(function(l,h,p,g){return new gC(l,h,p,g)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,l,h,p){return new _C(s,o,l,h,p)})(this.localStore,this.datastore,e.asyncQueue,(t=>t_(this.syncEngine,t,0)),(function(){return Qy.v()?new Qy:new lC})())}createSyncEngine(e,t){return(function(o,l,h,p,g,y,w){const T=new bC(o,l,h,p,g,y);return w&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const s=Se(t);oe(Ts,"RemoteStore shutting down."),s.Ea.add(5),await _l(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}uf.provider={build:()=>new uf};class Fw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Lr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class JC{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new re($.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(o,l){const h=Se(o),p={documents:l.map((T=>_c(h.serializer,T)))},g=await h.Ho("BatchGetDocuments",h.serializer.databaseId,Ke.emptyPath(),p,l.length),y=new Map;g.forEach((T=>{const R=vR(h.serializer,T);y.set(R.key.toString(),R)}));const w=[];return l.forEach((T=>{const R=y.get(T.toString());Fe(!!R,55234,{key:T}),w.push(R)})),w})(this.datastore,e);return t.forEach((s=>this.recordVersion(s))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new bc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,s)=>{const o=me.fromPath(s);this.mutations.push(new rw(o,this.precondition(o)))})),await(async function(s,o){const l=Se(s),h={writes:o.map((p=>dw(l.serializer,p)))};await l.Go("Commit",l.serializer.databaseId,Ke.emptyPath(),h)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ge(50498,{Gu:e.constructor.name});t=ve.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new re($.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ve.min())?bt.exists(!1):bt.updateTime(t):bt.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ve.min()))throw new re($.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return bt.updateTime(t)}return bt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class ZC{constructor(e,t,s,o,l){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=o,this.deferred=l,this.zu=s.maxAttempts,this.M_=new Hf(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new JC(this.datastore),t=this.Hu(e);t&&t.then((s=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(s)})).catch((o=>{this.Yu(o)}))))})).catch((s=>{this.Yu(s)}))}))}Hu(e){try{const t=this.updateFunction(e);return!pl(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!iw(t)}return!1}}const Li="FirestoreClient";class eP{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=Wt.UNAUTHENTICATED,this.clientId=xf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async h=>{oe(Li,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(s,(h=>(oe(Li,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Jf(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Vd(r,e){r.asyncQueue.verifyOperationInProgress(),oe(Li,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener((async o=>{s.isEqual(o)||(await _w(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function r_(r,e){r.asyncQueue.verifyOperationInProgress();const t=await tP(r);oe(Li,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((s=>Yy(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,o)=>Yy(e.remoteStore,o))),r._onlineComponents=e}async function tP(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){oe(Li,"Using user provided OfflineComponentProvider");try{await Vd(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===$.FAILED_PRECONDITION||o.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Po("Error using user provided cache. Falling back to memory cache: "+t),await Vd(r,new Ec)}}else oe(Li,"Using default OfflineComponentProvider"),await Vd(r,new YC(void 0));return r._offlineComponents}async function np(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(oe(Li,"Using user provided OnlineComponentProvider"),await r_(r,r._uninitializedComponentsProvider._online)):(oe(Li,"Using default OnlineComponentProvider"),await r_(r,new uf))),r._onlineComponents}function nP(r){return np(r).then((e=>e.syncEngine))}function rP(r){return np(r).then((e=>e.datastore))}async function Uw(r){const e=await np(r),t=e.eventManager;return t.onListen=FC.bind(null,e.syncEngine),t.onUnlisten=zC.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=UC.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=BC.bind(null,e.syncEngine),t}function iP(r,e,t={}){const s=new or;return r.asyncQueue.enqueueAndForget((async()=>(function(l,h,p,g,y){const w=new Fw({next:R=>{w.Nu(),h.enqueueAndForget((()=>Pw(l,T)));const F=R.docs.has(p);!F&&R.fromCache?y.reject(new re($.UNAVAILABLE,"Failed to get document because the client is offline.")):F&&R.fromCache&&g&&g.source==="server"?y.reject(new re($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(R)},error:R=>y.reject(R)}),T=new kw(bf(p.path),w,{includeMetadataChanges:!0,qa:!0});return Cw(l,T)})(await Uw(r),r.asyncQueue,e,t,s))),s.promise}function sP(r,e,t={}){const s=new or;return r.asyncQueue.enqueueAndForget((async()=>(function(l,h,p,g,y){const w=new Fw({next:R=>{w.Nu(),h.enqueueAndForget((()=>Pw(l,T))),R.fromCache&&g.source==="server"?y.reject(new re($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(R)},error:R=>y.reject(R)}),T=new kw(p,w,{includeMetadataChanges:!0,qa:!0});return Cw(l,T)})(await Uw(r),r.asyncQueue,e,t,s))),s.promise}function jw(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const i_=new Map;const zw="firestore.googleapis.com",s_=!0;class o_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new re($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=zw,this.ssl=s_}else this.host=e.host,this.ssl=e.ssl??s_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=gw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<OR)throw new re($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}vA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jw(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new re($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new re($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new re($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Bc{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new o_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new re($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new re($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new o_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new uA;switch(s.type){case"firstParty":return new fA(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new re($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=i_.get(t);s&&(oe("ComponentProvider","Removing Datastore"),i_.delete(t),s.terminate())})(this),Promise.resolve()}}function oP(r,e,t,s={}){r=Mr(r,Bc);const o=Mo(e),l=r._getSettings(),h={...l,emulatorOptions:r._getEmulatorOptions()},p=`${e}:${t}`;o&&(O_(`https://${p}`),L_("Firestore",!0)),l.host!==zw&&l.host!==p&&Po("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:p,ssl:o,emulatorOptions:s};if(!_s(g,h)&&(r._setSettings(g),s.mockUserToken)){let y,w;if(typeof s.mockUserToken=="string")y=s.mockUserToken,w=Wt.MOCK_USER;else{y=L0(s.mockUserToken,r._app?.options.projectId);const T=s.mockUserToken.sub||s.mockUserToken.user_id;if(!T)throw new re($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new Wt(T)}r._authCredentials=new cA(new Av(y,w))}}class $o{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new $o(this.firestore,e,this._query)}}class dt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new dt(this.firestore,e,this._key)}toJSON(){return{type:dt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(fl(t,dt._jsonSchema))return new dt(e,s||null,new me(Ke.fromString(t.referencePath)))}}dt._jsonSchemaVersion="firestore/documentReference/1.0",dt._jsonSchema={type:vt("string",dt._jsonSchemaVersion),referencePath:vt("string")};class Pi extends $o{constructor(e,t,s){super(e,t,bf(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new dt(this.firestore,null,new me(e))}withConverter(e){return new Pi(this.firestore,e,this._path)}}function Mi(r,e,...t){if(r=It(r),Rv("collection","path",e),r instanceof Bc){const s=Ke.fromString(e,...t);return vy(s),new Pi(r,null,s)}{if(!(r instanceof dt||r instanceof Pi))throw new re($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Ke.fromString(e,...t));return vy(s),new Pi(r.firestore,null,s)}}function Lt(r,e,...t){if(r=It(r),arguments.length===1&&(e=xf.newId()),Rv("doc","path",e),r instanceof Bc){const s=Ke.fromString(e,...t);return _y(s),new dt(r,null,new me(s))}{if(!(r instanceof dt||r instanceof Pi))throw new re($.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Ke.fromString(e,...t));return _y(s),new dt(r.firestore,r instanceof Pi?r.converter:null,new me(s))}}const a_="AsyncQueue";class l_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Hf(this,"async_queue_retry"),this._c=()=>{const s=Dd();s&&oe(a_,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=Dd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Dd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new or;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!zo(e))throw e;oe(a_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Lr("INTERNAL UNHANDLED ERROR: ",u_(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Yf.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&ge(47125,{Pc:u_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function u_(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class qo extends Bc{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new l_,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new l_(e),this._firestoreClient=void 0,await e}}}function aP(r,e){const t=typeof r=="object"?r:U_(),s=typeof r=="string"?r:dc,o=vf(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=V0("firestore");l&&oP(o,...l)}return o}function wl(r){if(r._terminated)throw new re($.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||lP(r),r._firestoreClient}function lP(r){const e=r._freezeSettings(),t=(function(o,l,h,p){return new NA(o,l,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,jw(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new eP(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(o){const l=o?._online.build();return{_offline:o?._offline.build(l),_online:l}})(r._componentsProvider))}class fn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fn(Ft.fromBase64String(e))}catch(t){throw new re($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new fn(Ft.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:fn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(fl(e,fn._jsonSchema))return fn.fromBase64String(e.bytes)}}fn._jsonSchemaVersion="firestore/bytes/1.0",fn._jsonSchema={type:vt("string",fn._jsonSchemaVersion),bytes:vt("string")};class El{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new re($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class $c{constructor(e){this._methodName=e}}class lr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new re($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new re($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:lr._jsonSchemaVersion}}static fromJSON(e){if(fl(e,lr._jsonSchema))return new lr(e.latitude,e.longitude)}}lr._jsonSchemaVersion="firestore/geoPoint/1.0",lr._jsonSchema={type:vt("string",lr._jsonSchemaVersion),latitude:vt("number"),longitude:vt("number")};class ur{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ur._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(fl(e,ur._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ur(e.vectorValues);throw new re($.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ur._jsonSchemaVersion="firestore/vectorValue/1.0",ur._jsonSchema={type:vt("string",ur._jsonSchemaVersion),vectorValues:vt("object")};const uP=/^__.*__$/;class cP{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Ui(e,this.data,this.fieldMask,t,this.fieldTransforms):new gl(e,this.data,t,this.fieldTransforms)}}class Bw{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Ui(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function $w(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ge(40011,{Ac:r})}}class rp{constructor(e,t,s,o,l,h){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new rp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Tc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if($w(this.Ac)&&uP.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class hP{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Uc(e)}Cc(e,t,s,o=!1){return new rp({Ac:e,methodName:t,Dc:s,path:Mt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qc(r){const e=r._freezeSettings(),t=Uc(r._databaseId);return new hP(r._databaseId,!!e.ignoreUndefinedProperties,t)}function ip(r,e,t,s,o,l={}){const h=r.Cc(l.merge||l.mergeFields?2:0,e,t,o);op("Data must be an object, but it was:",h,s);const p=Hw(s,h);let g,y;if(l.merge)g=new pn(h.fieldMask),y=h.fieldTransforms;else if(l.mergeFields){const w=[];for(const T of l.mergeFields){const R=cf(e,T,t);if(!h.contains(R))throw new re($.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);Kw(w,R)||w.push(R)}g=new pn(w),y=h.fieldTransforms.filter((T=>g.covers(T.field)))}else g=null,y=h.fieldTransforms;return new cP(new Qt(p),g,y)}class Wc extends $c{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Wc}}class sp extends $c{_toFieldTransform(e){return new nR(e.path,new il)}isEqual(e){return e instanceof sp}}function qw(r,e,t,s){const o=r.Cc(1,e,t);op("Data must be an object, but it was:",o,s);const l=[],h=Qt.empty();Fi(s,((g,y)=>{const w=ap(e,g,t);y=It(y);const T=o.yc(w);if(y instanceof Wc)l.push(w);else{const R=Tl(y,T);R!=null&&(l.push(w),h.set(w,R))}}));const p=new pn(l);return new Bw(h,p,o.fieldTransforms)}function Ww(r,e,t,s,o,l){const h=r.Cc(1,e,t),p=[cf(e,s,t)],g=[o];if(l.length%2!=0)throw new re($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<l.length;R+=2)p.push(cf(e,l[R])),g.push(l[R+1]);const y=[],w=Qt.empty();for(let R=p.length-1;R>=0;--R)if(!Kw(y,p[R])){const F=p[R];let W=g[R];W=It(W);const q=h.yc(F);if(W instanceof Wc)y.push(F);else{const D=Tl(W,q);D!=null&&(y.push(F),w.set(F,D))}}const T=new pn(y);return new Bw(w,T,h.fieldTransforms)}function dP(r,e,t,s=!1){return Tl(t,r.Cc(s?4:3,e))}function Tl(r,e){if(Gw(r=It(r)))return op("Unsupported field value:",e,r),Hw(r,e);if(r instanceof $c)return(function(s,o){if(!$w(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const l=[];let h=0;for(const p of s){let g=Tl(p,o.wc(h));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),h++}return{arrayValue:{values:l}}})(r,e)}return(function(s,o){if((s=It(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return ZA(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=et.fromDate(s);return{timestampValue:yc(o.serializer,l)}}if(s instanceof et){const l=new et(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:yc(o.serializer,l)}}if(s instanceof lr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof fn)return{bytesValue:lw(o.serializer,s._byteString)};if(s instanceof dt){const l=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(l))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:zf(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof ur)return(function(h,p){return{mapValue:{fields:{[Lv]:{stringValue:Mv},[fc]:{arrayValue:{values:h.toArray().map((y=>{if(typeof y!="number")throw p.Sc("VectorValues must only contain numeric values.");return Ff(p.serializer,y)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${Nc(s)}`)})(r,e)}function Hw(r,e){const t={};return kv(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fi(r,((s,o)=>{const l=Tl(o,e.mc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function Gw(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof et||r instanceof lr||r instanceof fn||r instanceof dt||r instanceof $c||r instanceof ur)}function op(r,e,t){if(!Gw(t)||!Cv(t)){const s=Nc(t);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function cf(r,e,t){if((e=It(e))instanceof El)return e._internalPath;if(typeof e=="string")return ap(r,e);throw Tc("Field path arguments must be of type string or ",r,!1,void 0,t)}const fP=new RegExp("[~\\*/\\[\\]]");function ap(r,e,t){if(e.search(fP)>=0)throw Tc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new El(...e.split("."))._internalPath}catch{throw Tc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Tc(r,e,t,s,o){const l=s&&!s.isEmpty(),h=o!==void 0;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(l||h)&&(g+=" (found",l&&(g+=` in field ${s}`),h&&(g+=` in document ${o}`),g+=")"),new re($.INVALID_ARGUMENT,p+r+g)}function Kw(r,e){return r.some((t=>t.isEqual(e)))}class Ic{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new dt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new pP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(lp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class pP extends Ic{data(){return super.data()}}function lp(r,e){return typeof e=="string"?ap(r,e):e instanceof El?e._internalPath:e._delegate._internalPath}function mP(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new re($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class up{}class gP extends up{}function Qw(r,e,...t){let s=[];e instanceof up&&s.push(e),s=s.concat(t),(function(l){const h=l.filter((g=>g instanceof cp)).length,p=l.filter((g=>g instanceof Hc)).length;if(h>1||h>0&&p>0)throw new re($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)r=o._apply(r);return r}class Hc extends gP{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Hc(e,t,s)}_apply(e){const t=this._parse(e);return Yw(e._query,t),new $o(e.firestore,e.converter,Zd(e._query,t))}_parse(e){const t=qc(e.firestore);return(function(l,h,p,g,y,w,T){let R;if(y.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new re($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){h_(T,w);const W=[];for(const q of T)W.push(c_(g,l,q));R={arrayValue:{values:W}}}else R=c_(g,l,T)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||h_(T,w),R=dP(p,h,T,w==="in"||w==="not-in");return _t.create(y,w,R)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Xw(r,e,t){const s=e,o=lp("where",r);return Hc._create(o,s,t)}class cp extends up{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new cp(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:Un.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let h=o;const p=l.getFlattenedFilters();for(const g of p)Yw(h,g),h=Zd(h,g)})(e._query,t),new $o(e.firestore,e.converter,Zd(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function c_(r,e,t){if(typeof(t=It(t))=="string"){if(t==="")throw new re($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qv(e)&&t.indexOf("/")!==-1)throw new re($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Ke.fromString(t));if(!me.isDocumentKey(s))throw new re($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Cy(r,new me(s))}if(t instanceof dt)return Cy(r,t._key);throw new re($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Nc(t)}.`)}function h_(r,e){if(!Array.isArray(r)||r.length===0)throw new re($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Yw(r,e){const t=(function(o,l){for(const h of o)for(const p of h.getFlattenedFilters())if(l.indexOf(p.op)>=0)return p.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new re($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new re($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Jw{convertValue(e,t="none"){switch(Vi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Di(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ge(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Fi(e,((o,l)=>{s[o]=this.convertValue(l,t)})),s}convertVectorValue(e){const t=e.fields?.[fc].arrayValue?.values?.map((s=>ht(s.doubleValue)));return new ur(t)}convertGeoPoint(e){return new lr(ht(e.latitude),ht(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Dc(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(tl(e));default:return null}}convertTimestamp(e){const t=xi(e);return new et(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Ke.fromString(e);Fe(mw(s),9688,{name:e});const o=new nl(s.get(1),s.get(3)),l=new me(s.popFirst(5));return o.isEqual(t)||Lr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function hp(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}class yP extends Jw{constructor(e){super(),this.firestore=e}convertBytes(e){return new fn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new dt(this.firestore,null,t)}}class wo{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ki extends Ic{constructor(e,t,s,o,l,h){super(e,t,s,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new tc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(lp("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new re($.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ki._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ki._jsonSchemaVersion="firestore/documentSnapshot/1.0",ki._jsonSchema={type:vt("string",ki._jsonSchemaVersion),bundleSource:vt("string","DocumentSnapshot"),bundleName:vt("string"),bundle:vt("string")};class tc extends ki{data(e={}){return super.data(e)}}class Ao{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new wo(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new tc(this._firestore,this._userDataWriter,s.key,s,new wo(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new re($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((p=>{const g=new tc(o._firestore,o._userDataWriter,p.doc.key,p.doc,new wo(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>l||p.type!==3)).map((p=>{const g=new tc(o._firestore,o._userDataWriter,p.doc.key,p.doc,new wo(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,w=-1;return p.type!==0&&(y=h.indexOf(p.doc.key),h=h.delete(p.doc.key)),p.type!==1&&(h=h.add(p.doc),w=h.indexOf(p.doc.key)),{type:_P(p.type),doc:g,oldIndex:y,newIndex:w}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new re($.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ao._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=xf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function _P(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ge(61501,{type:r})}}function Is(r){r=Mr(r,dt);const e=Mr(r.firestore,qo);return iP(wl(e),r._key).then((t=>vP(e,r,t)))}Ao._jsonSchemaVersion="firestore/querySnapshot/1.0",Ao._jsonSchema={type:vt("string",Ao._jsonSchemaVersion),bundleSource:vt("string","QuerySnapshot"),bundleName:vt("string"),bundle:vt("string")};class dp extends Jw{constructor(e){super(),this.firestore=e}convertBytes(e){return new fn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new dt(this.firestore,null,t)}}function Gc(r){r=Mr(r,$o);const e=Mr(r.firestore,qo),t=wl(e),s=new dp(e);return mP(r._query),sP(t,r._query).then((o=>new Ao(e,s,r,o)))}function Zw(r,e,t){r=Mr(r,dt);const s=Mr(r.firestore,qo),o=hp(r.converter,e,t);return eE(s,[ip(qc(s),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,bt.none())])}function eE(r,e){return(function(s,o){const l=new or;return s.asyncQueue.enqueueAndForget((async()=>$C(await nP(s),o,l))),l.promise})(wl(r),e)}function vP(r,e,t){const s=t.docs.get(e._key),o=new dp(r);return new ki(r,o,e._key,s,new wo(t.hasPendingWrites,t.fromCache),e.converter)}const wP={maxAttempts:5};class EP{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=qc(e)}set(e,t,s){this._verifyNotCommitted();const o=Ti(e,this._firestore),l=hp(o.converter,t,s),h=ip(this._dataReader,"WriteBatch.set",o._key,l,o.converter!==null,s);return this._mutations.push(h.toMutation(o._key,bt.none())),this}update(e,t,s,...o){this._verifyNotCommitted();const l=Ti(e,this._firestore);let h;return h=typeof(t=It(t))=="string"||t instanceof El?Ww(this._dataReader,"WriteBatch.update",l._key,t,s,o):qw(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(h.toMutation(l._key,bt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ti(e,this._firestore);return this._mutations=this._mutations.concat(new bc(t._key,bt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new re($.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ti(r,e){if((r=It(r)).firestore!==e)throw new re($.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}class TP{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=qc(e)}get(e){const t=Ti(e,this._firestore),s=new yP(this._firestore);return this._transaction.lookup([t._key]).then((o=>{if(!o||o.length!==1)return ge(24041);const l=o[0];if(l.isFoundDocument())return new Ic(this._firestore,s,l.key,l,t.converter);if(l.isNoDocument())return new Ic(this._firestore,s,t._key,null,t.converter);throw ge(18433,{doc:l})}))}set(e,t,s){const o=Ti(e,this._firestore),l=hp(o.converter,t,s),h=ip(this._dataReader,"Transaction.set",o._key,l,o.converter!==null,s);return this._transaction.set(o._key,h),this}update(e,t,s,...o){const l=Ti(e,this._firestore);let h;return h=typeof(t=It(t))=="string"||t instanceof El?Ww(this._dataReader,"Transaction.update",l._key,t,s,o):qw(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,h),this}delete(e){const t=Ti(e,this._firestore);return this._transaction.delete(t._key),this}}class IP extends TP{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ti(e,this._firestore),s=new dp(this._firestore);return super.get(e).then((o=>new ki(this._firestore,s,t._key,o._document,new wo(!1,!1),t.converter)))}}function SP(r,e,t){r=Mr(r,qo);const s={...wP,...t};return(function(l){if(l.maxAttempts<1)throw new re($.INVALID_ARGUMENT,"Max attempts must be at least 1")})(s),(function(l,h,p){const g=new or;return l.asyncQueue.enqueueAndForget((async()=>{const y=await rP(l);new ZC(l.asyncQueue,y,p,h,g).ju()})),g.promise})(wl(r),(o=>e(new IP(r,o))),s)}function Ln(){return new sp("serverTimestamp")}function tE(r){return wl(r=Mr(r,qo)),new EP(r,(e=>eE(r,e)))}(function(e,t=!0){(function(o){Uo=o})(bo),Ro(new vs("firestore",((s,{instanceIdentifier:o,options:l})=>{const h=s.getProvider("app").getImmediate(),p=new qo(new hA(s.getProvider("auth-internal")),new pA(h,s.getProvider("app-check-internal")),(function(y,w){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new re($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nl(y.options.projectId,w)})(h,o),h);return l={useFetchStreams:t,...l},p._setSettings(l),p}),"PUBLIC").setMultipleInstances(!0)),Ri(py,my,e),Ri(py,my,"esm2020")})();var AP="firebase",RP="12.7.0";Ri(AP,RP,"app");const CP={apiKey:"AIzaSyA-TURVnsMyyBOWreei2jGLcuXmOzyr_DQ",authDomain:"gamificationcollege.firebaseapp.com",projectId:"gamificationcollege",storageBucket:"gamificationcollege.firebasestorage.app",messagingSenderId:"237003198772",appId:"1:237003198772:web:37fc8130a083377a115561"},nE=F_(CP),Od=aA(nE),PP=new Nr,it=aP(nE),rE=Ge.createContext(null);function kP({children:r}){const[e,t]=Ge.useState(null),[s,o]=Ge.useState(null),[l,h]=Ge.useState(!0);Ge.useEffect(()=>{const y=QS(Od,async w=>{if(t(w),o(null),!w){h(!1);return}const T=Lt(it,"users",w.uid);(await Is(T)).exists()||await Zw(T,{displayName:w.displayName||"Utilisateur",role:"child",createdAt:Ln()});const F=await Is(T);o(F.data()?.role||"child"),h(!1)});return()=>y()},[]);const p=async()=>{await g1(Od,PP)},g=async()=>{await XS(Od)};return j.jsx(rE.Provider,{value:{user:e,role:s,loading:l,signInGoogle:p,signOutUser:g},children:r})}function Cs(){const r=Ge.useContext(rE);if(!r)throw new Error("useAuth doit tre utilis sous <AuthProvider>");return r}function NP(){const{user:r,role:e,signOutUser:t}=Cs();return j.jsx("div",{className:"card",style:{marginBottom:14},children:j.jsxs("div",{className:"row",style:{justifyContent:"space-between"},children:[j.jsxs("div",{children:[j.jsx("div",{style:{fontWeight:900,fontSize:"1.05rem"},children:"Malo  Rvisions"}),j.jsx("div",{className:"small",children:r?j.jsxs(j.Fragment,{children:["Connect : ",j.jsx("strong",{children:r.displayName})," ",j.jsx("span",{className:"badge",children:e})]}):"Non connect"})]}),j.jsxs("div",{className:"row",style:{gap:8},children:[j.jsx(Wu,{className:"btn secondary",to:"/",children:"Accueil"}),e==="parent"&&j.jsxs(j.Fragment,{children:[j.jsx(Wu,{className:"btn secondary",to:"/admin/import",children:"Import (parent)"}),j.jsx(Wu,{className:"btn secondary",to:"/admin/progression",children:"Progression"})]}),r&&j.jsx("button",{className:"btn secondary",onClick:t,children:"Dconnexion"})]})]})})}function d_({children:r}){const{user:e,loading:t}=Cs();return t?j.jsx("div",{className:"card",children:"Chargement"}):e?j.jsx(j.Fragment,{children:r}):j.jsx(Md,{to:"/connexion",replace:!0})}function f_({children:r}){const{user:e,role:t,loading:s}=Cs();return s?j.jsx("div",{className:"card",children:"Chargement"}):e?t!=="parent"?j.jsx(Md,{to:"/",replace:!0}):j.jsx(j.Fragment,{children:r}):j.jsx(Md,{to:"/connexion",replace:!0})}function Oo(r){return(r||"").toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[]/g,"'").replace(/\s+/g," ").trim()}async function xP(){return(await Gc(Mi(it,"subjects"))).docs.map(e=>({id:e.id,...e.data()}))}async function DP(r){const e=Qw(Mi(it,"themes"),Xw("subjectId","==",r));return(await Gc(e)).docs.map(s=>({id:s.id,...s.data()}))}async function VP(r){const e=Qw(Mi(it,"exercises"),Xw("themeId","==",r));return(await Gc(e)).docs.map(s=>({id:s.id,...s.data()}))}async function OP(r){const e=tE(it);for(const t of r.subjects){e.set(Lt(it,"subjects",t.id),{title:t.title},{merge:!0});for(const s of t.themes){e.set(Lt(it,"themes",s.id),{subjectId:t.id,title:s.title,grade:r.grade},{merge:!0});for(const o of s.exercises){const l=Lt(it,"exercises",o.id),h={...o,themeId:s.id};h.tags=Array.isArray(h.tags)?h.tags.slice(0,3):[],h.type==="short_text"&&Array.isArray(h.expected)&&(h.expected=h.expected.map(p=>Oo(p))),h.type==="fill_blank"&&Array.isArray(h.expected)&&(h.expected=h.expected.map(p=>Oo(p))),e.set(l,h,{merge:!0})}}}await e.commit()}async function LP(r){const e=Lt(it,"users",r,"stats","main"),t=await Is(e);return t.exists()?t.data():(await Zw(e,{xp:0,coins:0,streakDays:0,lastDoneDate:null,badges:[],updatedAt:Ln()}),(await Is(e)).data())}function p_(r){return r.toISOString().slice(0,10)}function MP(r,e){return r===1?e?3:-1:r===2?e?5:-2:e?7:-3}function bP(r){return Math.max(0,Math.min(100,r))}function FP(r){return r>=80?"mastered":r>=60?"nearly":r>=30?"developing":"weak"}async function UP(r){const{uid:e,items:t,existingAttemptId:s}=r,o=new Date,l=p_(o),h=t.length,p=t.filter(F=>F.correct).length;if(h===0)return{xpGain:0,coinsGain:0,streakDays:0,badges:[],score:0,outOf:0};const g=new Map;t.forEach(F=>{const W=Array.isArray(F.tags)?F.tags.slice(0,3):[],q=MP(F.difficulty,F.correct);W.forEach(D=>{const ne=g.get(D)||{delta:0,correct:0,wrong:0};g.set(D,{delta:ne.delta+q,correct:ne.correct+(F.correct?1:0),wrong:ne.wrong+(F.correct?0:1)})})});const y=p*10,w=Math.max(1,Math.min(3,Math.round(p/Math.max(1,h)*3)));let T=null;const R=s?Lt(it,"users",e,"attempts",s):Lt(Mi(it,"users",e,"attempts"));return t.map(()=>Lt(Mi(R,"items"))),await SP(it,async F=>{const W=Lt(it,"users",e,"stats","main"),q=Lt(it,"users",e,"progressSummary","main"),D=Array.from(g.keys()).map(k=>Lt(it,"users",e,"tagProgress",k)),[ne,ee,te]=await Promise.all([F.get(W),F.get(q),Promise.all(D.map(k=>F.get(k)))]),he=ne.exists()?ne.data():{xp:0,coins:0,streakDays:0,lastDoneDate:null,badges:[]};let Te=he.streakDays||0;const Pe=he.lastDoneDate;if(Pe!==l){const k=p_(new Date(o.getTime()-864e5));Te=Pe===k?Te+1:1}const P=new Set(Array.isArray(he.badges)?he.badges:[]);Te>=3&&P.add("3 jours daffile"),Te>=7&&P.add("7 jours daffile"),p===h&&h>=10&&P.add("Zro faute (10+)");const I=ee.exists()?ee.data():null,C={weak:0,developing:0,nearly:0,mastered:0};for(let k=0;k<D.length;k++){const O=D[k],A=te[k],pe=O.id,Ue=g.get(pe),qe=A.exists()?A.data():null,Ae=typeof qe?.mastery=="number"?qe.mastery:0,Y=qe?.bucket,fe=bP(Ae+Ue.delta),ie=FP(fe);Y&&I&&(C[Y]-=1),C[ie]+=1,F.set(O,{mastery:fe,bucket:ie,correctAnswers:(qe?.correctAnswers||0)+Ue.correct,wrongAnswers:(qe?.wrongAnswers||0)+Ue.wrong,lastDelta:Ue.delta,updatedAt:Ln()},{merge:!0})}const x=I?.masteryBuckets||{weak:0,developing:0,nearly:0,mastered:0};F.set(W,{xp:(he.xp||0)+y,coins:(he.coins||0)+w,streakDays:Te,lastDoneDate:l,badges:Array.from(P),updatedAt:Ln()},{merge:!0}),F.set(q,{totalAnswers:(I?.totalAnswers||0)+h,correctAnswers:(I?.correctAnswers||0)+p,totalAttempts:(I?.totalAttempts||0)+1,masteryBuckets:{weak:(x.weak||0)+C.weak,developing:(x.developing||0)+C.developing,nearly:(x.nearly||0)+C.nearly,mastered:(x.mastered||0)+C.mastered},lastAttemptId:R.id,lastDate:l,updatedAt:Ln()},{merge:!0}),T={xpGain:y,coinsGain:w,streakDays:Te,badges:Array.from(P)}}),{...T||{xpGain:0,coinsGain:0,streakDays:0,badges:[]},score:p,outOf:h}}const m_=[{id:"fr",title:"Franais"},{id:"math",title:"Maths"},{id:"en",title:"Anglais"},{id:"es",title:"Espagnol"},{id:"hist",title:"Histoire"}];function jP(){const{user:r}=Cs(),[e,t]=Ge.useState([]),[s,o]=Ge.useState("fr"),[l,h]=Ge.useState([]),[p,g]=Ge.useState(null);return Ge.useEffect(()=>{(async()=>{try{const y=await xP();t(y.length?y:m_)}catch{t(m_)}})()},[]),Ge.useEffect(()=>{(async()=>{const y=await DP(s);h(y)})()},[s]),Ge.useEffect(()=>{r&&(async()=>{const y=await LP(r.uid);g(y)})()},[r]),j.jsxs("div",{className:"container grid",children:[j.jsx("div",{className:"card",children:j.jsxs("div",{className:"row",style:{justifyContent:"space-between"},children:[j.jsxs("div",{children:[j.jsx("h2",{style:{margin:0},children:"Salut Malo "}),j.jsx("div",{className:"small",children:"Choisis une matire, puis un thme. Objectif : 10 questions par jour."})]}),p&&j.jsxs("div",{className:"kpi",children:[j.jsxs("div",{className:"pill",children:["XP: ",j.jsx("strong",{children:p.xp??0})]}),j.jsxs("div",{className:"pill",children:["Pices: ",j.jsx("strong",{children:p.coins??0})]}),j.jsxs("div",{className:"pill",children:["Srie: ",j.jsx("strong",{children:p.streakDays??0})," jours"]})]})]})}),j.jsxs("div",{className:"grid2",children:[j.jsxs("div",{className:"card",children:[j.jsx("h3",{style:{marginTop:0},children:"Matire"}),j.jsx("select",{className:"input",value:s,onChange:y=>o(y.target.value),children:e.map(y=>j.jsx("option",{value:y.id,children:y.title},y.id))}),j.jsx("div",{className:"small",style:{marginTop:8},children:"Priorits : Franais (grammaire & conjugaison) + Maths (fractions)."})]}),j.jsxs("div",{className:"card",children:[j.jsx("h3",{style:{marginTop:0},children:"Thmes"}),l.length===0?j.jsx("div",{className:"small",children:"Aucun thme pour linstant. (Parent : importe un pack JSON)"}):j.jsx("div",{className:"grid",children:l.map(y=>j.jsx(Wu,{className:"btn secondary",to:`/theme/${y.id}`,children:y.title},y.id))})]})]}),p?.badges?.length?j.jsxs("div",{className:"card",children:[j.jsx("h3",{style:{marginTop:0},children:"Badges"}),j.jsx("div",{className:"row",children:p.badges.map(y=>j.jsx("span",{className:"badge",children:y},y))})]}):null]})}function zP(){const{user:r,signInGoogle:e}=Cs(),t=gf();return Ge.useEffect(()=>{r&&t("/")},[r]),j.jsx("div",{className:"container",children:j.jsxs("div",{className:"card",children:[j.jsx("h2",{style:{marginTop:0},children:"Connexion"}),j.jsx("p",{className:"small",children:"Connexion Google recommande (simple sur tablette Android)."}),j.jsx("button",{className:"btn",onClick:e,children:"Se connecter avec Google"}),j.jsx("hr",{}),j.jsxs("p",{className:"small",children:["Astuce : aprs ta premire connexion (toi), va dans Firestore et mets ",j.jsxs("code",{children:["users/","{uid}",".role"]}),'  "parent".']})]})})}function BP(r,e){return r.type==="mcq"?e===r.answerIndex:r.type==="short_text"||r.type==="fill_blank"?r.expected.includes(Oo(e||"")):!1}function $P(r,e){return r===1?e?3:-1:r===2?e?5:-2:e?7:-3}function qP(r){return Math.max(0,Math.min(100,r))}function WP(r){return r>=80?"mastered":r>=60?"nearly":r>=30?"developing":"weak"}function iE(r){return r.toISOString().slice(0,10)}function HP(r,e){const t=new Date(r+"T00:00:00");return t.setDate(t.getDate()+e),iE(t)}function GP(r,e,t){const s=Math.max(0,Math.min(100,r));let o=1;return s>=81||e==="mastered"?o=10:s>=61||e==="nearly"?o=4:s>=31||e==="developing"?o=2:o=1,HP(t,o)}async function KP(r){const{uid:e,subjectId:t,themeId:s,answers:o,exercises:l,durationSec:h}=r,g=iE(new Date),y=Lt(Mi(it,"users",e,"attempts")),w=Mi(it,"users",e,"attemptItems"),T=Lt(it,"users",e,"progressSummary","main"),R=l.map((pe,Ue)=>{const qe=BP(pe,o[pe.id]);return{exerciseId:pe.id,subjectId:t,themeId:s,difficulty:pe.difficulty,tags:pe.tags?.slice(0,3)||[],correct:qe,index:Ue}}),F=R.filter(pe=>pe.correct).length,W=R.length,q=new Map;R.forEach(pe=>{const Ue=$P(pe.difficulty,pe.correct);pe.tags.forEach(qe=>{const Ae=q.get(qe)||{delta:0,correct:0,wrong:0,results:[]};Ae.delta+=Ue,Ae.correct+=pe.correct?1:0,Ae.wrong+=pe.correct?0:1,Ae.results.push(pe.correct),q.set(qe,Ae)})});const D=Array.from(q.keys()),ne=await Promise.all(D.map(pe=>Is(Lt(it,"users",e,"tagProgress",pe)))),ee=tE(it),te={subjectId:t,themeId:s,score:F,outOf:W,durationSec:h,itemsCount:R.length,date:g,createdAt:Ln()};ee.set(y,te),R.forEach(pe=>{const Ue=Lt(w);ee.set(Ue,{...pe,createdAt:Ln(),answer:o[pe.exerciseId]??null})});const he={weak:0,developing:0,nearly:0,mastered:0},Te={};D.forEach((pe,Ue)=>{const qe=ne[Ue],Ae=qe.exists()?qe.data():null,Y=q.get(pe),ie=[...Array.isArray(Ae?.last7Results)?Ae.last7Results:[],...Y.results].slice(-7),L={correct:ie.filter(gn=>gn).length,wrong:ie.filter(gn=>!gn).length};let G=Ae?.streakCorrect||0,Ie=Ae?.streakWrong||0;Y.results.forEach(gn=>{gn?(G+=1,Ie=0):(Ie+=1,G=0)});const Re=typeof Ae?.mastery=="number"?Ae.mastery:0,ke=qP(Re+Y.delta),Ne=WP(ke),je=Ae?.bucket;je&&(he[je]-=1),he[Ne]+=1;const Le=GP(ke,Ne,g),We=Lt(it,"users",e,"tagProgress",pe),St={tagId:pe,mastery:ke,bucket:Ne,attempts:(Ae?.attempts||0)+Y.results.length,correctAnswers:(Ae?.correctAnswers||0)+Y.correct,wrongAnswers:(Ae?.wrongAnswers||0)+Y.wrong,last7Results:ie,last7:L,lastSeenAt:Ln(),lastCorrectAt:Y.correct>0?Ln():Ae?.lastCorrectAt||null,streakCorrect:G,streakWrong:Ie,lastDelta:Y.delta,nextDueDate:Le,updatedAt:Ln()};Te[pe]=St,ee.set(We,St,{merge:!0})});const Pe=await Is(T),P=Pe.exists()?Pe.data():null,I=P?.masteryBuckets||{weak:0,developing:0,nearly:0,mastered:0},C={weak:(I.weak||0)+he.weak,developing:(I.developing||0)+he.developing,nearly:(I.nearly||0)+he.nearly,mastered:(I.mastered||0)+he.mastered},x=Object.values(Te).sort((pe,Ue)=>pe.mastery-Ue.mastery).map(pe=>pe.tagId),k=Array.isArray(P?.topWeakTags)?P.topWeakTags:[],O=Array.from(new Set([...x,...k])).slice(0,3),A={totalAnswers:(P?.totalAnswers||0)+W,correctAnswers:(P?.correctAnswers||0)+F,totalAttempts:(P?.totalAttempts||0)+1,masteryBuckets:C,lastAttemptId:y.id,lastDate:g,updatedAt:Ln(),topWeakTags:O};return ee.set(T,A,{merge:!0}),await ee.commit(),{attemptId:y.id,score:F,outOf:W,summary:A,tagsUpdated:Te}}function g_(r,e){return r.type==="mcq"?e===r.answerIndex:r.type==="short_text"||r.type==="fill_blank"?r.expected.includes(Oo(e||"")):!1}function QP(){const{themeId:r}=JT(),{user:e}=Cs(),[t,s]=Ge.useState(null),[o,l]=Ge.useState([]),[h,p]=Ge.useState({}),[g]=Ge.useState(()=>Date.now()),[y,w]=Ge.useState(null),[T,R]=Ge.useState([]),[F,W]=Ge.useState([]);Ge.useEffect(()=>{(async()=>{if(!r)return;const D=await Is(Lt(it,"themes",r));s(D.exists()?{id:r,...D.data()}:null);const ee=[...await VP(r)].sort(()=>Math.random()-.5);l(ee.slice(0,10)),p({}),w(null)})()},[r]);const q=async()=>{if(!e||!r||!t)return;const D=Math.max(1,Math.round((Date.now()-g)/1e3)),ne=o.map(P=>({exerciseId:P.id,difficulty:P.difficulty,tags:P.tags||[],correct:g_(P,h[P.id])})),ee=await KP({uid:e.uid,subjectId:t.subjectId,themeId:r,answers:h,exercises:o,durationSec:D}),te=await UP({uid:e.uid,subjectId:t.subjectId,items:ne,existingAttemptId:ee.attemptId}),he=new Set(o.flatMap(P=>P.tags||[])),Te=Object.values(ee.tagsUpdated||{}).filter(P=>P&&he.has(P.tagId||"")).sort((P,I)=>(P.mastery??0)-(I.mastery??0)).slice(0,3).map(P=>P.tagId);R(Te),w({score:te.score,outOf:te.outOf,durationSec:D,...te});const Pe=o.map((P,I)=>{const C=h[P.id],x=g_(P,C);let k="",O="";if(P.type==="mcq"){const A=P;k=A.choices[A.answerIndex]||"",O=typeof C=="number"&&A.choices[C]||""}else(P.type==="short_text"||P.type==="fill_blank")&&(k=P.expected[0]||"",O=C||"");return{id:P.id,prompt:P.prompt,correct:x,expected:k||"",userAnswer:(O??"").toString()||"",idx:I+1}});W(Pe)};return r?j.jsxs("div",{className:"container grid",children:[j.jsxs("div",{className:"card",children:[j.jsx("h2",{style:{margin:0},children:t?.title||"Session"}),j.jsx("div",{className:"small",children:"Fais de ton mieux. Objectif : rgularit "})]}),o.map((D,ne)=>j.jsxs("div",{className:"card",children:[j.jsxs("div",{className:"small",children:["Question ",ne+1," / ",o.length," ",j.jsxs("span",{className:"badge",children:["Difficult ",D.difficulty]})]}),j.jsx("div",{style:{fontWeight:800,marginTop:6},children:D.prompt}),D.type==="mcq"&&j.jsx("div",{className:"grid",style:{marginTop:10},children:D.choices.map((ee,te)=>j.jsx("button",{type:"button",className:"btn "+(h[D.id]===te?"":"secondary"),onClick:()=>p(he=>({...he,[D.id]:te})),style:{textAlign:"left",opacity:h[D.id]===te?1:.85},"aria-pressed":h[D.id]===te,children:ee},te))}),D.type==="short_text"&&j.jsx("div",{style:{marginTop:10},children:j.jsx("input",{className:"input",placeholder:"Ta rponse",value:h[D.id]??"",onChange:ee=>p(te=>({...te,[D.id]:ee.target.value}))})}),D.type==="fill_blank"&&j.jsxs("div",{style:{marginTop:10},children:[j.jsx("div",{className:"small",children:D.text}),j.jsx("input",{className:"input",placeholder:"Le mot manquant",value:h[D.id]??"",onChange:ee=>p(te=>({...te,[D.id]:ee.target.value}))})]})]},D.id)),j.jsxs("div",{className:"card",children:[j.jsxs("div",{className:"row",children:[j.jsx("button",{className:"btn",onClick:q,children:"Corriger et enregistrer"}),y&&j.jsxs("div",{className:"small",children:["Score ",j.jsxs("strong",{children:[y.score,"/",y.outOf]}),"  ",y.durationSec,"s  +",j.jsx("strong",{children:y.xpGain})," XP  +",j.jsx("strong",{children:y.coinsGain})," pices  Srie ",j.jsx("strong",{children:y.streakDays})]})]}),y?.badges?.length?j.jsx("div",{className:"row",style:{marginTop:10},children:y.badges.map(D=>j.jsx("span",{className:"badge",children:D},D))}):null,T.length?j.jsxs("div",{className:"small",style:{marginTop:10},children:["Tags  renforcer (thme) : ",T.map(D=>j.jsx("span",{className:"badge",children:D},D))]}):null]}),F.length?j.jsxs("div",{className:"card",children:[j.jsx("h3",{style:{marginTop:0},children:"Corrections"}),j.jsx("div",{className:"grid",children:F.map(D=>j.jsxs("div",{className:"pill",style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:6},children:[j.jsxs("div",{className:"small",children:["Question ",D.idx,"  ",D.correct?j.jsx("span",{className:"badge",children:" Bonne rponse"}):j.jsx("span",{className:"badge",children:" Mauvaise rponse"})]}),j.jsx("div",{style:{fontWeight:700},children:D.prompt}),j.jsxs("div",{className:"small",children:["Ta rponse : ",j.jsx("strong",{children:D.userAnswer})]}),!D.correct&&j.jsxs("div",{className:"small",children:["Correction : ",j.jsx("strong",{children:D.expected})]})]},D.id))})]}):null]}):j.jsx("div",{className:"container",children:j.jsx("div",{className:"card",children:"Thme introuvable."})})}function XP(){const[r,e]=Ge.useState(""),t=async s=>{if(!s)return;e("Lecture du fichier");const o=await s.text();let l;try{l=JSON.parse(o)}catch{e(" JSON invalide");return}if(!l?.subjects?.length){e(" Format inattendu (subjects manquant)");return}e("Import en cours"),await OP(l),e(" Import termin")};return j.jsx("div",{className:"container",children:j.jsxs("div",{className:"card",children:[j.jsx("h2",{style:{marginTop:0},children:"Import dexercices (Parent)"}),j.jsx("p",{className:"small",children:"Importe un pack JSON (gnr par moi) : matires  thmes  exercices."}),j.jsx("input",{className:"input",type:"file",accept:".json,application/json",onChange:s=>t(s.target.files?.[0]||null)}),r&&j.jsx("p",{className:"small",style:{marginTop:10},children:r}),j.jsx("hr",{}),j.jsx("p",{className:"small",children:"Conseil : commence par importer les packs Franais (grammaire + conjugaison) et Maths (fractions)."})]})})}const YP=[{id:"all",label:"Toutes"},{id:"fr",label:"Franais"},{id:"math",label:"Maths"},{id:"en",label:"Anglais"},{id:"es",label:"Espagnol"},{id:"hist",label:"Histoire"}];function JP(r){if(!r)return null;const e=r.split("_")[0];return e==="fr"||e==="math"||e==="en"||e==="es"||e==="hist"?e:null}function ZP(r){return r.last7?r.last7:Array.isArray(r.last7Results)?{correct:r.last7Results.filter(Boolean).length,wrong:r.last7Results.filter(e=>!e).length}:{correct:0,wrong:0}}function ek(){const{user:r}=Cs(),[e,t]=Ge.useState([]),[s,o]=Ge.useState(!1),[l,h]=Ge.useState("fr");Ge.useEffect(()=>{r&&(o(!0),(async()=>{const y=(await Gc(Mi(it,"users",r.uid,"tagProgress"))).docs.map(w=>({id:w.id,tagId:w.id,...w.data()}));t(y),o(!1)})())},[r]);const p=e.filter(g=>l==="all"?!0:JP(g.tagId)===l).sort((g,y)=>(g.mastery||0)-(y.mastery||0)).slice(0,20);return j.jsxs("div",{className:"container",children:[j.jsxs("div",{className:"card",children:[j.jsx("h2",{style:{marginTop:0},children:"Progression par tag"}),j.jsxs("div",{className:"row",style:{gap:8,alignItems:"center"},children:[j.jsx("label",{className:"small",children:"Matire"}),j.jsx("select",{className:"input",value:l,onChange:g=>h(g.target.value),children:YP.map(g=>j.jsx("option",{value:g.id,children:g.label},g.id))})]})]}),s?j.jsx("div",{className:"card",children:"Chargement"}):j.jsxs("div",{className:"card",children:[j.jsx("h3",{style:{marginTop:0},children:"Top 20 faibles"}),p.length===0?j.jsx("div",{className:"small",children:"Aucun tag pour le moment."}):j.jsx("div",{className:"grid",children:p.map(g=>{const y=ZP(g);return j.jsx("div",{className:"pill",style:{justifyContent:"space-between",display:"flex",alignItems:"center"},children:j.jsxs("div",{children:[j.jsx("div",{style:{fontWeight:700},children:g.tagId}),j.jsxs("div",{className:"small",children:[g.mastery??0,"/100  ",g.bucket,"  ",y.correct,"/",y.correct+y.wrong," sur 7  Prochaine: ",g.nextDueDate||""]})]})},g.id)})})]})]})}function tk(){return j.jsx("div",{className:"container",children:j.jsx("div",{className:"card",children:"Page introuvable."})})}function nk(){return j.jsxs(E0,{children:[j.jsx("div",{className:"container",children:j.jsx(NP,{})}),j.jsxs(p0,{children:[j.jsx(fs,{path:"/connexion",element:j.jsx(zP,{})}),j.jsx(fs,{path:"/",element:j.jsx(d_,{children:j.jsx(jP,{})})}),j.jsx(fs,{path:"/theme/:themeId",element:j.jsx(d_,{children:j.jsx(QP,{})})}),j.jsx(fs,{path:"/admin/import",element:j.jsx(f_,{children:j.jsx(XP,{})})}),j.jsx(fs,{path:"/admin/progression",element:j.jsx(f_,{children:j.jsx(ek,{})})}),j.jsx(fs,{path:"*",element:j.jsx(tk,{})})]})]})}function rk(){"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("${import.meta.env.BASE_URL}sw.js").catch(()=>{})})}ET.createRoot(document.getElementById("root")).render(j.jsx(Ge.StrictMode,{children:j.jsx(kP,{children:j.jsx(nk,{})})}));rk();
