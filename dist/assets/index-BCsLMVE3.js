function C0(r,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in r)){const l=Object.getOwnPropertyDescriptor(s,o);l&&Object.defineProperty(r,o,l.get?l:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function M_(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Cd={exports:{}},Wa={},Pd={exports:{}},Ve={};var jg;function P0(){if(jg)return Ve;jg=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),v=Symbol.iterator;function R(L){return L===null||typeof L!="object"?null:(L=v&&L[v]||L["@@iterator"],typeof L=="function"?L:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,$={};function b(L,K,Te){this.props=L,this.context=K,this.refs=$,this.updater=Te||M}b.prototype.isReactComponent={},b.prototype.setState=function(L,K){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,K,"setState")},b.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function re(){}re.prototype=b.prototype;function se(L,K,Te){this.props=L,this.context=K,this.refs=$,this.updater=Te||M}var ie=se.prototype=new re;ie.constructor=se,q(ie,b.prototype),ie.isPureReactComponent=!0;var G=Array.isArray,ae=Object.prototype.hasOwnProperty,Q={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function S(L,K,Te){var Ae,Ne={},De=null,ze=null;if(K!=null)for(Ae in K.ref!==void 0&&(ze=K.ref),K.key!==void 0&&(De=""+K.key),K)ae.call(K,Ae)&&!I.hasOwnProperty(Ae)&&(Ne[Ae]=K[Ae]);var je=arguments.length-2;if(je===1)Ne.children=Te;else if(1<je){for(var Ke=Array(je),Rt=0;Rt<je;Rt++)Ke[Rt]=arguments[Rt+2];Ne.children=Ke}if(L&&L.defaultProps)for(Ae in je=L.defaultProps,je)Ne[Ae]===void 0&&(Ne[Ae]=je[Ae]);return{$$typeof:r,type:L,key:De,ref:ze,props:Ne,_owner:Q.current}}function C(L,K){return{$$typeof:r,type:L.type,key:K,ref:L.ref,props:L.props,_owner:L._owner}}function D(L){return typeof L=="object"&&L!==null&&L.$$typeof===r}function P(L){var K={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(Te){return K[Te]})}var N=/\/+/g;function k(L,K){return typeof L=="object"&&L!==null&&L.key!=null?P(""+L.key):K.toString(36)}function de(L,K,Te,Ae,Ne){var De=typeof L;(De==="undefined"||De==="boolean")&&(L=null);var ze=!1;if(L===null)ze=!0;else switch(De){case"string":case"number":ze=!0;break;case"object":switch(L.$$typeof){case r:case e:ze=!0}}if(ze)return ze=L,Ne=Ne(ze),L=Ae===""?"."+k(ze,0):Ae,G(Ne)?(Te="",L!=null&&(Te=L.replace(N,"$&/")+"/"),de(Ne,K,Te,"",function(Rt){return Rt})):Ne!=null&&(D(Ne)&&(Ne=C(Ne,Te+(!Ne.key||ze&&ze.key===Ne.key?"":(""+Ne.key).replace(N,"$&/")+"/")+L)),K.push(Ne)),1;if(ze=0,Ae=Ae===""?".":Ae+":",G(L))for(var je=0;je<L.length;je++){De=L[je];var Ke=Ae+k(De,je);ze+=de(De,K,Te,Ke,Ne)}else if(Ke=R(L),typeof Ke=="function")for(L=Ke.call(L),je=0;!(De=L.next()).done;)De=De.value,Ke=Ae+k(De,je++),ze+=de(De,K,Te,Ke,Ne);else if(De==="object")throw K=String(L),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.");return ze}function Oe(L,K,Te){if(L==null)return L;var Ae=[],Ne=0;return de(L,Ae,"","",function(De){return K.call(Te,De,Ne++)}),Ae}function qe(L){if(L._status===-1){var K=L._result;K=K(),K.then(function(Te){(L._status===0||L._status===-1)&&(L._status=1,L._result=Te)},function(Te){(L._status===0||L._status===-1)&&(L._status=2,L._result=Te)}),L._status===-1&&(L._status=0,L._result=K)}if(L._status===1)return L._result.default;throw L._result}var Pe={current:null},W={transition:null},fe={ReactCurrentDispatcher:Pe,ReactCurrentBatchConfig:W,ReactCurrentOwner:Q};function te(){throw Error("act(...) is not supported in production builds of React.")}return Ve.Children={map:Oe,forEach:function(L,K,Te){Oe(L,function(){K.apply(this,arguments)},Te)},count:function(L){var K=0;return Oe(L,function(){K++}),K},toArray:function(L){return Oe(L,function(K){return K})||[]},only:function(L){if(!D(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Ve.Component=b,Ve.Fragment=t,Ve.Profiler=o,Ve.PureComponent=se,Ve.StrictMode=s,Ve.Suspense=g,Ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fe,Ve.act=te,Ve.cloneElement=function(L,K,Te){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var Ae=q({},L.props),Ne=L.key,De=L.ref,ze=L._owner;if(K!=null){if(K.ref!==void 0&&(De=K.ref,ze=Q.current),K.key!==void 0&&(Ne=""+K.key),L.type&&L.type.defaultProps)var je=L.type.defaultProps;for(Ke in K)ae.call(K,Ke)&&!I.hasOwnProperty(Ke)&&(Ae[Ke]=K[Ke]===void 0&&je!==void 0?je[Ke]:K[Ke])}var Ke=arguments.length-2;if(Ke===1)Ae.children=Te;else if(1<Ke){je=Array(Ke);for(var Rt=0;Rt<Ke;Rt++)je[Rt]=arguments[Rt+2];Ae.children=je}return{$$typeof:r,type:L.type,key:Ne,ref:De,props:Ae,_owner:ze}},Ve.createContext=function(L){return L={$$typeof:h,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:l,_context:L},L.Consumer=L},Ve.createElement=S,Ve.createFactory=function(L){var K=S.bind(null,L);return K.type=L,K},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(L){return{$$typeof:f,render:L}},Ve.isValidElement=D,Ve.lazy=function(L){return{$$typeof:E,_payload:{_status:-1,_result:L},_init:qe}},Ve.memo=function(L,K){return{$$typeof:y,type:L,compare:K===void 0?null:K}},Ve.startTransition=function(L){var K=W.transition;W.transition={};try{L()}finally{W.transition=K}},Ve.unstable_act=te,Ve.useCallback=function(L,K){return Pe.current.useCallback(L,K)},Ve.useContext=function(L){return Pe.current.useContext(L)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(L){return Pe.current.useDeferredValue(L)},Ve.useEffect=function(L,K){return Pe.current.useEffect(L,K)},Ve.useId=function(){return Pe.current.useId()},Ve.useImperativeHandle=function(L,K,Te){return Pe.current.useImperativeHandle(L,K,Te)},Ve.useInsertionEffect=function(L,K){return Pe.current.useInsertionEffect(L,K)},Ve.useLayoutEffect=function(L,K){return Pe.current.useLayoutEffect(L,K)},Ve.useMemo=function(L,K){return Pe.current.useMemo(L,K)},Ve.useReducer=function(L,K,Te){return Pe.current.useReducer(L,K,Te)},Ve.useRef=function(L){return Pe.current.useRef(L)},Ve.useState=function(L){return Pe.current.useState(L)},Ve.useSyncExternalStore=function(L,K,Te){return Pe.current.useSyncExternalStore(L,K,Te)},Ve.useTransition=function(){return Pe.current.useTransition()},Ve.version="18.3.1",Ve}var Fg;function If(){return Fg||(Fg=1,Pd.exports=P0()),Pd.exports}var Ug;function k0(){if(Ug)return Wa;Ug=1;var r=If(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(f,g,y){var E,v={},R=null,M=null;y!==void 0&&(R=""+y),g.key!==void 0&&(R=""+g.key),g.ref!==void 0&&(M=g.ref);for(E in g)s.call(g,E)&&!l.hasOwnProperty(E)&&(v[E]=g[E]);if(f&&f.defaultProps)for(E in g=f.defaultProps,g)v[E]===void 0&&(v[E]=g[E]);return{$$typeof:e,type:f,key:R,ref:M,props:v,_owner:o.current}}return Wa.Fragment=t,Wa.jsx=h,Wa.jsxs=h,Wa}var Bg;function x0(){return Bg||(Bg=1,Cd.exports=k0()),Cd.exports}var A=x0(),he=If();const ye=M_(he),N0=C0({__proto__:null,default:ye},[he]);var $u={},kd={exports:{}},sn={},xd={exports:{}},Nd={};var zg;function D0(){return zg||(zg=1,(function(r){function e(W,fe){var te=W.length;W.push(fe);e:for(;0<te;){var L=te-1>>>1,K=W[L];if(0<o(K,fe))W[L]=fe,W[te]=K,te=L;else break e}}function t(W){return W.length===0?null:W[0]}function s(W){if(W.length===0)return null;var fe=W[0],te=W.pop();if(te!==fe){W[0]=te;e:for(var L=0,K=W.length,Te=K>>>1;L<Te;){var Ae=2*(L+1)-1,Ne=W[Ae],De=Ae+1,ze=W[De];if(0>o(Ne,te))De<K&&0>o(ze,Ne)?(W[L]=ze,W[De]=te,L=De):(W[L]=Ne,W[Ae]=te,L=Ae);else if(De<K&&0>o(ze,te))W[L]=ze,W[De]=te,L=De;else break e}}return fe}function o(W,fe){var te=W.sortIndex-fe.sortIndex;return te!==0?te:W.id-fe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var h=Date,f=h.now();r.unstable_now=function(){return h.now()-f}}var g=[],y=[],E=1,v=null,R=3,M=!1,q=!1,$=!1,b=typeof setTimeout=="function"?setTimeout:null,re=typeof clearTimeout=="function"?clearTimeout:null,se=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ie(W){for(var fe=t(y);fe!==null;){if(fe.callback===null)s(y);else if(fe.startTime<=W)s(y),fe.sortIndex=fe.expirationTime,e(g,fe);else break;fe=t(y)}}function G(W){if($=!1,ie(W),!q)if(t(g)!==null)q=!0,qe(ae);else{var fe=t(y);fe!==null&&Pe(G,fe.startTime-W)}}function ae(W,fe){q=!1,$&&($=!1,re(S),S=-1),M=!0;var te=R;try{for(ie(fe),v=t(g);v!==null&&(!(v.expirationTime>fe)||W&&!P());){var L=v.callback;if(typeof L=="function"){v.callback=null,R=v.priorityLevel;var K=L(v.expirationTime<=fe);fe=r.unstable_now(),typeof K=="function"?v.callback=K:v===t(g)&&s(g),ie(fe)}else s(g);v=t(g)}if(v!==null)var Te=!0;else{var Ae=t(y);Ae!==null&&Pe(G,Ae.startTime-fe),Te=!1}return Te}finally{v=null,R=te,M=!1}}var Q=!1,I=null,S=-1,C=5,D=-1;function P(){return!(r.unstable_now()-D<C)}function N(){if(I!==null){var W=r.unstable_now();D=W;var fe=!0;try{fe=I(!0,W)}finally{fe?k():(Q=!1,I=null)}}else Q=!1}var k;if(typeof se=="function")k=function(){se(N)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,Oe=de.port2;de.port1.onmessage=N,k=function(){Oe.postMessage(null)}}else k=function(){b(N,0)};function qe(W){I=W,Q||(Q=!0,k())}function Pe(W,fe){S=b(function(){W(r.unstable_now())},fe)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(W){W.callback=null},r.unstable_continueExecution=function(){q||M||(q=!0,qe(ae))},r.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<W?Math.floor(1e3/W):5},r.unstable_getCurrentPriorityLevel=function(){return R},r.unstable_getFirstCallbackNode=function(){return t(g)},r.unstable_next=function(W){switch(R){case 1:case 2:case 3:var fe=3;break;default:fe=R}var te=R;R=fe;try{return W()}finally{R=te}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(W,fe){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var te=R;R=W;try{return fe()}finally{R=te}},r.unstable_scheduleCallback=function(W,fe,te){var L=r.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?L+te:L):te=L,W){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=te+K,W={id:E++,callback:fe,priorityLevel:W,startTime:te,expirationTime:K,sortIndex:-1},te>L?(W.sortIndex=te,e(y,W),t(g)===null&&W===t(y)&&($?(re(S),S=-1):$=!0,Pe(G,te-L))):(W.sortIndex=K,e(g,W),q||M||(q=!0,qe(ae))),W},r.unstable_shouldYield=P,r.unstable_wrapCallback=function(W){var fe=R;return function(){var te=R;R=fe;try{return W.apply(this,arguments)}finally{R=te}}}})(Nd)),Nd}var $g;function V0(){return $g||($g=1,xd.exports=D0()),xd.exports}var qg;function O0(){if(qg)return sn;qg=1;var r=If(),e=V0();function t(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(n,i){h(n,i),h(n+"Capture",i)}function h(n,i){for(o[n]=i,n=0;n<i.length;n++)s.add(i[n])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E={},v={};function R(n){return g.call(v,n)?!0:g.call(E,n)?!1:y.test(n)?v[n]=!0:(E[n]=!0,!1)}function M(n,i,a,c){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function q(n,i,a,c){if(i===null||typeof i>"u"||M(n,i,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function $(n,i,a,c,d,p,w){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=i,this.sanitizeURL=p,this.removeEmptyString=w}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){b[n]=new $(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];b[i]=new $(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){b[n]=new $(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){b[n]=new $(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){b[n]=new $(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){b[n]=new $(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){b[n]=new $(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){b[n]=new $(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){b[n]=new $(n,5,!1,n.toLowerCase(),null,!1,!1)});var re=/[\-:]([a-z])/g;function se(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(re,se);b[i]=new $(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(re,se);b[i]=new $(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(re,se);b[i]=new $(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){b[n]=new $(n,1,!1,n.toLowerCase(),null,!1,!1)}),b.xlinkHref=new $("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){b[n]=new $(n,1,!1,n.toLowerCase(),null,!0,!0)});function ie(n,i,a,c){var d=b.hasOwnProperty(i)?b[i]:null;(d!==null?d.type!==0:c||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(q(i,a,d,c)&&(a=null),c||d===null?R(i)&&(a===null?n.removeAttribute(i):n.setAttribute(i,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(i=d.attributeName,c=d.attributeNamespace,a===null?n.removeAttribute(i):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?n.setAttributeNS(c,i,a):n.setAttribute(i,a))))}var G=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ae=Symbol.for("react.element"),Q=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),P=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),de=Symbol.for("react.suspense_list"),Oe=Symbol.for("react.memo"),qe=Symbol.for("react.lazy"),Pe=Symbol.for("react.offscreen"),W=Symbol.iterator;function fe(n){return n===null||typeof n!="object"?null:(n=W&&n[W]||n["@@iterator"],typeof n=="function"?n:null)}var te=Object.assign,L;function K(n){if(L===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);L=i&&i[1]||""}return`
`+L+n}var Te=!1;function Ae(n,i){if(!n||Te)return"";Te=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(B){var c=B}Reflect.construct(n,[],i)}else{try{i.call()}catch(B){c=B}n.call(i.prototype)}else{try{throw Error()}catch(B){c=B}n()}}catch(B){if(B&&c&&typeof B.stack=="string"){for(var d=B.stack.split(`
`),p=c.stack.split(`
`),w=d.length-1,x=p.length-1;1<=w&&0<=x&&d[w]!==p[x];)x--;for(;1<=w&&0<=x;w--,x--)if(d[w]!==p[x]){if(w!==1||x!==1)do if(w--,x--,0>x||d[w]!==p[x]){var V=`
`+d[w].replace(" at new "," at ");return n.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",n.displayName)),V}while(1<=w&&0<=x);break}}}finally{Te=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?K(n):""}function Ne(n){switch(n.tag){case 5:return K(n.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return n=Ae(n.type,!1),n;case 11:return n=Ae(n.type.render,!1),n;case 1:return n=Ae(n.type,!0),n;default:return""}}function De(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case I:return"Fragment";case Q:return"Portal";case C:return"Profiler";case S:return"StrictMode";case k:return"Suspense";case de:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case P:return(n.displayName||"Context")+".Consumer";case D:return(n._context.displayName||"Context")+".Provider";case N:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Oe:return i=n.displayName||null,i!==null?i:De(n.type)||"Memo";case qe:i=n._payload,n=n._init;try{return De(n(i))}catch{}}return null}function ze(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return De(i);case 8:return i===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function je(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ke(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Rt(n){var i=Ke(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),c=""+n[i];if(!n.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,p=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return d.call(this)},set:function(w){c=""+w,p.call(this,w)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function vn(n){n._valueTracker||(n._valueTracker=Rt(n))}function Yo(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),c="";return n&&(c=Ke(n)?n.checked?"true":"false":n.value),n=c,n!==a?(i.setValue(n),!0):!1}function Hr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Mi(n,i){var a=i.checked;return te({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function Pl(n,i){var a=i.defaultValue==null?"":i.defaultValue,c=i.checked!=null?i.checked:i.defaultChecked;a=je(i.value!=null?i.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Li(n,i){i=i.checked,i!=null&&ie(n,"checked",i,!1)}function Qs(n,i){Li(n,i);var a=je(i.value),c=i.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?mt(n,i.type,a):i.hasOwnProperty("defaultValue")&&mt(n,i.type,je(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function Jo(n,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var c=i.type;if(!(c!=="submit"&&c!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,a||i===n.value||(n.value=i),n.defaultValue=i}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function mt(n,i,a){(i!=="number"||Hr(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var ct=Array.isArray;function kn(n,i,a,c){if(n=n.options,i){i={};for(var d=0;d<a.length;d++)i["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=i.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&c&&(n[a].defaultSelected=!0)}else{for(a=""+je(a),i=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}i!==null||n[d].disabled||(i=n[d])}i!==null&&(i.selected=!0)}}function Zo(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return te({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function ea(n,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(t(92));if(ct(a)){if(1<a.length)throw Error(t(93));a=a[0]}i=a}i==null&&(i=""),a=i}n._wrapperState={initialValue:je(a)}}function kl(n,i){var a=je(i.value),c=je(i.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),i.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function Gr(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function ta(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function bi(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?ta(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Kr,xl=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,c,d){MSApp.execUnsafeLocalFunction(function(){return n(i,a,c,d)})}:n})(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(Kr=Kr||document.createElement("div"),Kr.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Kr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function Xs(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var Qr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Nl=["Webkit","ms","Moz","O"];Object.keys(Qr).forEach(function(n){Nl.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),Qr[i]=Qr[n]})});function Xr(n,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||Qr.hasOwnProperty(n)&&Qr[n]?(""+i).trim():i+"px"}function ji(n,i){n=n.style;for(var a in i)if(i.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=Xr(a,i[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,d):n[a]=d}}var na=te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xn(n,i){if(i){if(na[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function Fi(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yr=null;function Ui(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var mr=null,gr=null,at=null;function ra(n){if(n=xa(n)){if(typeof mr!="function")throw Error(t(280));var i=n.stateNode;i&&(i=su(i),mr(n.stateNode,n.type,i))}}function Jr(n){gr?at?at.push(n):at=[n]:gr=n}function Zr(){if(gr){var n=gr,i=at;if(at=gr=null,ra(n),i)for(n=0;n<i.length;n++)ra(i[n])}}function Dl(n,i){return n(i)}function Vl(){}var $n=!1;function Ol(n,i,a){if($n)return n(i,a);$n=!0;try{return Dl(n,i,a)}finally{$n=!1,(gr!==null||at!==null)&&(Vl(),Zr())}}function Ys(n,i){var a=n.stateNode;if(a===null)return null;var c=su(a);if(c===null)return null;a=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,i,typeof a));return a}var es=!1;if(f)try{var ts={};Object.defineProperty(ts,"passive",{get:function(){es=!0}}),window.addEventListener("test",ts,ts),window.removeEventListener("test",ts,ts)}catch{es=!1}function Ml(n,i,a,c,d,p,w,x,V){var B=Array.prototype.slice.call(arguments,3);try{i.apply(a,B)}catch(J){this.onError(J)}}var yr=!1,qn=null,Bi=!1,wn=null,Ll={onError:function(n){yr=!0,qn=n}};function bl(n,i,a,c,d,p,w,x,V){yr=!1,qn=null,Ml.apply(Ll,arguments)}function sa(n,i,a,c,d,p,w,x,V){if(bl.apply(this,arguments),yr){if(yr){var B=qn;yr=!1,qn=null}else throw Error(t(198));Bi||(Bi=!0,wn=B)}}function Nn(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function ia(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function jl(n){if(Nn(n)!==n)throw Error(t(188))}function Fl(n){var i=n.alternate;if(!i){if(i=Nn(n),i===null)throw Error(t(188));return i!==n?null:n}for(var a=n,c=i;;){var d=a.return;if(d===null)break;var p=d.alternate;if(p===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===a)return jl(d),n;if(p===c)return jl(d),i;p=p.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=p;else{for(var w=!1,x=d.child;x;){if(x===a){w=!0,a=d,c=p;break}if(x===c){w=!0,c=d,a=p;break}x=x.sibling}if(!w){for(x=p.child;x;){if(x===a){w=!0,a=p,c=d;break}if(x===c){w=!0,c=p,a=d;break}x=x.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:i}function Ul(n){return n=Fl(n),n!==null?Js(n):null}function Js(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=Js(n);if(i!==null)return i;n=n.sibling}return null}var oa=e.unstable_scheduleCallback,zi=e.unstable_cancelCallback,Zs=e.unstable_shouldYield,_r=e.unstable_requestPaint,Ze=e.unstable_now,sh=e.unstable_getCurrentPriorityLevel,$i=e.unstable_ImmediatePriority,aa=e.unstable_UserBlockingPriority,ei=e.unstable_NormalPriority,la=e.unstable_LowPriority,qi=e.unstable_IdlePriority,ti=null,an=null;function Bl(n){if(an&&typeof an.onCommitFiberRoot=="function")try{an.onCommitFiberRoot(ti,n,void 0,(n.current.flags&128)===128)}catch{}}var ln=Math.clz32?Math.clz32:ni,Wn=Math.log,En=Math.LN2;function ni(n){return n>>>=0,n===0?32:31-(Wn(n)/En|0)|0}var Hn=64,ns=4194304;function He(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function vr(n,i){var a=n.pendingLanes;if(a===0)return 0;var c=0,d=n.suspendedLanes,p=n.pingedLanes,w=a&268435455;if(w!==0){var x=w&~d;x!==0?c=He(x):(p&=w,p!==0&&(c=He(p)))}else w=a&~d,w!==0?c=He(w):p!==0&&(c=He(p));if(c===0)return 0;if(i!==0&&i!==c&&(i&d)===0&&(d=c&-c,p=i&-i,d>=p||d===16&&(p&4194240)!==0))return i;if((c&4)!==0&&(c|=a&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=c;0<i;)a=31-ln(i),d=1<<a,c|=n[a],i&=~d;return c}function ri(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function si(n,i){for(var a=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,p=n.pendingLanes;0<p;){var w=31-ln(p),x=1<<w,V=d[w];V===-1?((x&a)===0||(x&c)!==0)&&(d[w]=ri(x,i)):V<=i&&(n.expiredLanes|=x),p&=~x}}function ua(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function ca(){var n=Hn;return Hn<<=1,(Hn&4194240)===0&&(Hn=64),n}function ha(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function ii(n,i,a){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-ln(i),n[i]=a}function ih(n,i){var a=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-ln(a),p=1<<d;i[d]=0,c[d]=-1,n[d]=-1,a&=~p}}function da(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var c=31-ln(a),d=1<<c;d&i|n[c]&i&&(n[c]|=i),a&=~d}}var Fe=0;function Gn(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var fa,Wi,pa,ma,ga,Kn=!1,Hi=[],Qn=null,Xn=null,Dt=null,oi=new Map,wr=new Map,un=[],zl="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rs(n,i){switch(n){case"focusin":case"focusout":Qn=null;break;case"dragenter":case"dragleave":Xn=null;break;case"mouseover":case"mouseout":Dt=null;break;case"pointerover":case"pointerout":oi.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":wr.delete(i.pointerId)}}function Dn(n,i,a,c,d,p){return n===null||n.nativeEvent!==p?(n={blockedOn:i,domEventName:a,eventSystemFlags:c,nativeEvent:p,targetContainers:[d]},i!==null&&(i=xa(i),i!==null&&Wi(i)),n):(n.eventSystemFlags|=c,i=n.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),n)}function $l(n,i,a,c,d){switch(i){case"focusin":return Qn=Dn(Qn,n,i,a,c,d),!0;case"dragenter":return Xn=Dn(Xn,n,i,a,c,d),!0;case"mouseover":return Dt=Dn(Dt,n,i,a,c,d),!0;case"pointerover":var p=d.pointerId;return oi.set(p,Dn(oi.get(p)||null,n,i,a,c,d)),!0;case"gotpointercapture":return p=d.pointerId,wr.set(p,Dn(wr.get(p)||null,n,i,a,c,d)),!0}return!1}function Gi(n){var i=ci(n.target);if(i!==null){var a=Nn(i);if(a!==null){if(i=a.tag,i===13){if(i=ia(a),i!==null){n.blockedOn=i,ga(n.priority,function(){pa(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ye(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=Ki(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Yr=c,a.target.dispatchEvent(c),Yr=null}else return i=xa(a),i!==null&&Wi(i),n.blockedOn=a,!1;i.shift()}return!0}function ql(n,i,a){Ye(n)&&a.delete(i)}function oh(){Kn=!1,Qn!==null&&Ye(Qn)&&(Qn=null),Xn!==null&&Ye(Xn)&&(Xn=null),Dt!==null&&Ye(Dt)&&(Dt=null),oi.forEach(ql),wr.forEach(ql)}function ss(n,i){n.blockedOn===i&&(n.blockedOn=null,Kn||(Kn=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,oh)))}function is(n){function i(d){return ss(d,n)}if(0<Hi.length){ss(Hi[0],n);for(var a=1;a<Hi.length;a++){var c=Hi[a];c.blockedOn===n&&(c.blockedOn=null)}}for(Qn!==null&&ss(Qn,n),Xn!==null&&ss(Xn,n),Dt!==null&&ss(Dt,n),oi.forEach(i),wr.forEach(i),a=0;a<un.length;a++)c=un[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<un.length&&(a=un[0],a.blockedOn===null);)Gi(a),a.blockedOn===null&&un.shift()}var Er=G.ReactCurrentBatchConfig,Tr=!0;function Yn(n,i,a,c){var d=Fe,p=Er.transition;Er.transition=null;try{Fe=1,ya(n,i,a,c)}finally{Fe=d,Er.transition=p}}function Wl(n,i,a,c){var d=Fe,p=Er.transition;Er.transition=null;try{Fe=4,ya(n,i,a,c)}finally{Fe=d,Er.transition=p}}function ya(n,i,a,c){if(Tr){var d=Ki(n,i,a,c);if(d===null)yh(n,i,c,Jn,a),rs(n,c);else if($l(d,n,i,a,c))c.stopPropagation();else if(rs(n,c),i&4&&-1<zl.indexOf(n)){for(;d!==null;){var p=xa(d);if(p!==null&&fa(p),p=Ki(n,i,a,c),p===null&&yh(n,i,c,Jn,a),p===d)break;d=p}d!==null&&c.stopPropagation()}else yh(n,i,c,null,a)}}var Jn=null;function Ki(n,i,a,c){if(Jn=null,n=Ui(c),n=ci(n),n!==null)if(i=Nn(n),i===null)n=null;else if(a=i.tag,a===13){if(n=ia(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return Jn=n,null}function Qi(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(sh()){case $i:return 1;case aa:return 4;case ei:case la:return 16;case qi:return 536870912;default:return 16}default:return 16}}var cn=null,Xi=null,Ir=null;function Hl(){if(Ir)return Ir;var n,i=Xi,a=i.length,c,d="value"in cn?cn.value:cn.textContent,p=d.length;for(n=0;n<a&&i[n]===d[n];n++);var w=a-n;for(c=1;c<=w&&i[a-c]===d[p-c];c++);return Ir=d.slice(n,1<c?1-c:void 0)}function ai(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Zn(){return!0}function _a(){return!1}function Ut(n){function i(a,c,d,p,w){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=p,this.target=w,this.currentTarget=null;for(var x in n)n.hasOwnProperty(x)&&(a=n[x],this[x]=a?a(p):p[x]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Zn:_a,this.isPropagationStopped=_a,this}return te(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Zn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Zn)},persist:function(){},isPersistent:Zn}),i}var er={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},li=Ut(er),os=te({},er,{view:0,detail:0}),Yi=Ut(os),Ji,Zi,hn,ui=te({},os,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xe,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==hn&&(hn&&n.type==="mousemove"?(Ji=n.screenX-hn.screenX,Zi=n.screenY-hn.screenY):Zi=Ji=0,hn=n),Ji)},movementY:function(n){return"movementY"in n?n.movementY:Zi}}),va=Ut(ui),Gl=te({},ui,{dataTransfer:0}),Kl=Ut(Gl),eo=te({},os,{relatedTarget:0}),Vt=Ut(eo),Ql=te({},er,{animationName:0,elapsedTime:0,pseudoElement:0}),Xl=Ut(Ql),as=te({},er,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),u=Ut(as),m=te({},er,{data:0}),_=Ut(m),T={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},F={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},z={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ne(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=z[n])?!!i[n]:!1}function xe(){return ne}var ht=te({},os,{key:function(n){if(n.key){var i=T[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=ai(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?F[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xe,charCode:function(n){return n.type==="keypress"?ai(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ai(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Qe=Ut(ht),gt=te({},ui,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dn=Ut(gt),Sr=te({},os,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xe}),tr=Ut(Sr),nr=te({},er,{propertyName:0,elapsedTime:0,pseudoElement:0}),to=Ut(nr),wa=te({},ui,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),EE=Ut(wa),TE=[9,13,27,32],ah=f&&"CompositionEvent"in window,Ea=null;f&&"documentMode"in document&&(Ea=document.documentMode);var IE=f&&"TextEvent"in window&&!Ea,xp=f&&(!ah||Ea&&8<Ea&&11>=Ea),Np=" ",Dp=!1;function Vp(n,i){switch(n){case"keyup":return TE.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Op(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var no=!1;function SE(n,i){switch(n){case"compositionend":return Op(i);case"keypress":return i.which!==32?null:(Dp=!0,Np);case"textInput":return n=i.data,n===Np&&Dp?null:n;default:return null}}function AE(n,i){if(no)return n==="compositionend"||!ah&&Vp(n,i)?(n=Hl(),Ir=Xi=cn=null,no=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return xp&&i.locale!=="ko"?null:i.data;default:return null}}var RE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mp(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!RE[n.type]:i==="textarea"}function Lp(n,i,a,c){Jr(c),i=tu(i,"onChange"),0<i.length&&(a=new li("onChange","change",null,a,c),n.push({event:a,listeners:i}))}var Ta=null,Ia=null;function CE(n){em(n,0)}function Yl(n){var i=ao(n);if(Yo(i))return n}function PE(n,i){if(n==="change")return i}var bp=!1;if(f){var lh;if(f){var uh="oninput"in document;if(!uh){var jp=document.createElement("div");jp.setAttribute("oninput","return;"),uh=typeof jp.oninput=="function"}lh=uh}else lh=!1;bp=lh&&(!document.documentMode||9<document.documentMode)}function Fp(){Ta&&(Ta.detachEvent("onpropertychange",Up),Ia=Ta=null)}function Up(n){if(n.propertyName==="value"&&Yl(Ia)){var i=[];Lp(i,Ia,n,Ui(n)),Ol(CE,i)}}function kE(n,i,a){n==="focusin"?(Fp(),Ta=i,Ia=a,Ta.attachEvent("onpropertychange",Up)):n==="focusout"&&Fp()}function xE(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Yl(Ia)}function NE(n,i){if(n==="click")return Yl(i)}function DE(n,i){if(n==="input"||n==="change")return Yl(i)}function VE(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Vn=typeof Object.is=="function"?Object.is:VE;function Sa(n,i){if(Vn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),c=Object.keys(i);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!g.call(i,d)||!Vn(n[d],i[d]))return!1}return!0}function Bp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function zp(n,i){var a=Bp(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=i&&c>=i)return{node:a,offset:i-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Bp(a)}}function $p(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?$p(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function qp(){for(var n=window,i=Hr();i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=Hr(n.document)}return i}function ch(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function OE(n){var i=qp(),a=n.focusedElem,c=n.selectionRange;if(i!==a&&a&&a.ownerDocument&&$p(a.ownerDocument.documentElement,a)){if(c!==null&&ch(a)){if(i=c.start,n=c.end,n===void 0&&(n=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(n,a.value.length);else if(n=(i=a.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,p=Math.min(c.start,d);c=c.end===void 0?p:Math.min(c.end,d),!n.extend&&p>c&&(d=c,c=p,p=d),d=zp(a,p);var w=zp(a,c);d&&w&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==w.node||n.focusOffset!==w.offset)&&(i=i.createRange(),i.setStart(d.node,d.offset),n.removeAllRanges(),p>c?(n.addRange(i),n.extend(w.node,w.offset)):(i.setEnd(w.node,w.offset),n.addRange(i)))}}for(i=[],n=a;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)n=i[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var ME=f&&"documentMode"in document&&11>=document.documentMode,ro=null,hh=null,Aa=null,dh=!1;function Wp(n,i,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;dh||ro==null||ro!==Hr(c)||(c=ro,"selectionStart"in c&&ch(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Aa&&Sa(Aa,c)||(Aa=c,c=tu(hh,"onSelect"),0<c.length&&(i=new li("onSelect","select",null,i,a),n.push({event:i,listeners:c}),i.target=ro)))}function Jl(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var so={animationend:Jl("Animation","AnimationEnd"),animationiteration:Jl("Animation","AnimationIteration"),animationstart:Jl("Animation","AnimationStart"),transitionend:Jl("Transition","TransitionEnd")},fh={},Hp={};f&&(Hp=document.createElement("div").style,"AnimationEvent"in window||(delete so.animationend.animation,delete so.animationiteration.animation,delete so.animationstart.animation),"TransitionEvent"in window||delete so.transitionend.transition);function Zl(n){if(fh[n])return fh[n];if(!so[n])return n;var i=so[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in Hp)return fh[n]=i[a];return n}var Gp=Zl("animationend"),Kp=Zl("animationiteration"),Qp=Zl("animationstart"),Xp=Zl("transitionend"),Yp=new Map,Jp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ls(n,i){Yp.set(n,i),l(i,[n])}for(var ph=0;ph<Jp.length;ph++){var mh=Jp[ph],LE=mh.toLowerCase(),bE=mh[0].toUpperCase()+mh.slice(1);ls(LE,"on"+bE)}ls(Gp,"onAnimationEnd"),ls(Kp,"onAnimationIteration"),ls(Qp,"onAnimationStart"),ls("dblclick","onDoubleClick"),ls("focusin","onFocus"),ls("focusout","onBlur"),ls(Xp,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ra="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ra));function Zp(n,i,a){var c=n.type||"unknown-event";n.currentTarget=a,sa(c,i,void 0,n),n.currentTarget=null}function em(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],d=c.event;c=c.listeners;e:{var p=void 0;if(i)for(var w=c.length-1;0<=w;w--){var x=c[w],V=x.instance,B=x.currentTarget;if(x=x.listener,V!==p&&d.isPropagationStopped())break e;Zp(d,x,B),p=V}else for(w=0;w<c.length;w++){if(x=c[w],V=x.instance,B=x.currentTarget,x=x.listener,V!==p&&d.isPropagationStopped())break e;Zp(d,x,B),p=V}}}if(Bi)throw n=wn,Bi=!1,wn=null,n}function et(n,i){var a=i[Ih];a===void 0&&(a=i[Ih]=new Set);var c=n+"__bubble";a.has(c)||(tm(i,n,2,!1),a.add(c))}function gh(n,i,a){var c=0;i&&(c|=4),tm(a,n,c,i)}var eu="_reactListening"+Math.random().toString(36).slice(2);function Ca(n){if(!n[eu]){n[eu]=!0,s.forEach(function(a){a!=="selectionchange"&&(jE.has(a)||gh(a,!1,n),gh(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[eu]||(i[eu]=!0,gh("selectionchange",!1,i))}}function tm(n,i,a,c){switch(Qi(i)){case 1:var d=Yn;break;case 4:d=Wl;break;default:d=ya}a=d.bind(null,i,a,n),d=void 0,!es||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(i,a,{capture:!0,passive:d}):n.addEventListener(i,a,!0):d!==void 0?n.addEventListener(i,a,{passive:d}):n.addEventListener(i,a,!1)}function yh(n,i,a,c,d){var p=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var x=c.stateNode.containerInfo;if(x===d||x.nodeType===8&&x.parentNode===d)break;if(w===4)for(w=c.return;w!==null;){var V=w.tag;if((V===3||V===4)&&(V=w.stateNode.containerInfo,V===d||V.nodeType===8&&V.parentNode===d))return;w=w.return}for(;x!==null;){if(w=ci(x),w===null)return;if(V=w.tag,V===5||V===6){c=p=w;continue e}x=x.parentNode}}c=c.return}Ol(function(){var B=p,J=Ui(a),Z=[];e:{var Y=Yp.get(n);if(Y!==void 0){var le=li,pe=n;switch(n){case"keypress":if(ai(a)===0)break e;case"keydown":case"keyup":le=Qe;break;case"focusin":pe="focus",le=Vt;break;case"focusout":pe="blur",le=Vt;break;case"beforeblur":case"afterblur":le=Vt;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=va;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=Kl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=tr;break;case Gp:case Kp:case Qp:le=Xl;break;case Xp:le=to;break;case"scroll":le=Yi;break;case"wheel":le=EE;break;case"copy":case"cut":case"paste":le=u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=dn}var me=(i&4)!==0,dt=!me&&n==="scroll",j=me?Y!==null?Y+"Capture":null:Y;me=[];for(var O=B,U;O!==null;){U=O;var ee=U.stateNode;if(U.tag===5&&ee!==null&&(U=ee,j!==null&&(ee=Ys(O,j),ee!=null&&me.push(Pa(O,ee,U)))),dt)break;O=O.return}0<me.length&&(Y=new le(Y,pe,null,a,J),Z.push({event:Y,listeners:me}))}}if((i&7)===0){e:{if(Y=n==="mouseover"||n==="pointerover",le=n==="mouseout"||n==="pointerout",Y&&a!==Yr&&(pe=a.relatedTarget||a.fromElement)&&(ci(pe)||pe[Ar]))break e;if((le||Y)&&(Y=J.window===J?J:(Y=J.ownerDocument)?Y.defaultView||Y.parentWindow:window,le?(pe=a.relatedTarget||a.toElement,le=B,pe=pe?ci(pe):null,pe!==null&&(dt=Nn(pe),pe!==dt||pe.tag!==5&&pe.tag!==6)&&(pe=null)):(le=null,pe=B),le!==pe)){if(me=va,ee="onMouseLeave",j="onMouseEnter",O="mouse",(n==="pointerout"||n==="pointerover")&&(me=dn,ee="onPointerLeave",j="onPointerEnter",O="pointer"),dt=le==null?Y:ao(le),U=pe==null?Y:ao(pe),Y=new me(ee,O+"leave",le,a,J),Y.target=dt,Y.relatedTarget=U,ee=null,ci(J)===B&&(me=new me(j,O+"enter",pe,a,J),me.target=U,me.relatedTarget=dt,ee=me),dt=ee,le&&pe)t:{for(me=le,j=pe,O=0,U=me;U;U=io(U))O++;for(U=0,ee=j;ee;ee=io(ee))U++;for(;0<O-U;)me=io(me),O--;for(;0<U-O;)j=io(j),U--;for(;O--;){if(me===j||j!==null&&me===j.alternate)break t;me=io(me),j=io(j)}me=null}else me=null;le!==null&&nm(Z,Y,le,me,!1),pe!==null&&dt!==null&&nm(Z,dt,pe,me,!0)}}e:{if(Y=B?ao(B):window,le=Y.nodeName&&Y.nodeName.toLowerCase(),le==="select"||le==="input"&&Y.type==="file")var ge=PE;else if(Mp(Y))if(bp)ge=DE;else{ge=xE;var we=kE}else(le=Y.nodeName)&&le.toLowerCase()==="input"&&(Y.type==="checkbox"||Y.type==="radio")&&(ge=NE);if(ge&&(ge=ge(n,B))){Lp(Z,ge,a,J);break e}we&&we(n,Y,B),n==="focusout"&&(we=Y._wrapperState)&&we.controlled&&Y.type==="number"&&mt(Y,"number",Y.value)}switch(we=B?ao(B):window,n){case"focusin":(Mp(we)||we.contentEditable==="true")&&(ro=we,hh=B,Aa=null);break;case"focusout":Aa=hh=ro=null;break;case"mousedown":dh=!0;break;case"contextmenu":case"mouseup":case"dragend":dh=!1,Wp(Z,a,J);break;case"selectionchange":if(ME)break;case"keydown":case"keyup":Wp(Z,a,J)}var Ee;if(ah)e:{switch(n){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else no?Vp(n,a)&&(Re="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Re="onCompositionStart");Re&&(xp&&a.locale!=="ko"&&(no||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&no&&(Ee=Hl()):(cn=J,Xi="value"in cn?cn.value:cn.textContent,no=!0)),we=tu(B,Re),0<we.length&&(Re=new _(Re,n,null,a,J),Z.push({event:Re,listeners:we}),Ee?Re.data=Ee:(Ee=Op(a),Ee!==null&&(Re.data=Ee)))),(Ee=IE?SE(n,a):AE(n,a))&&(B=tu(B,"onBeforeInput"),0<B.length&&(J=new _("onBeforeInput","beforeinput",null,a,J),Z.push({event:J,listeners:B}),J.data=Ee))}em(Z,i)})}function Pa(n,i,a){return{instance:n,listener:i,currentTarget:a}}function tu(n,i){for(var a=i+"Capture",c=[];n!==null;){var d=n,p=d.stateNode;d.tag===5&&p!==null&&(d=p,p=Ys(n,a),p!=null&&c.unshift(Pa(n,p,d)),p=Ys(n,i),p!=null&&c.push(Pa(n,p,d))),n=n.return}return c}function io(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function nm(n,i,a,c,d){for(var p=i._reactName,w=[];a!==null&&a!==c;){var x=a,V=x.alternate,B=x.stateNode;if(V!==null&&V===c)break;x.tag===5&&B!==null&&(x=B,d?(V=Ys(a,p),V!=null&&w.unshift(Pa(a,V,x))):d||(V=Ys(a,p),V!=null&&w.push(Pa(a,V,x)))),a=a.return}w.length!==0&&n.push({event:i,listeners:w})}var FE=/\r\n?/g,UE=/\u0000|\uFFFD/g;function rm(n){return(typeof n=="string"?n:""+n).replace(FE,`
`).replace(UE,"")}function nu(n,i,a){if(i=rm(i),rm(n)!==i&&a)throw Error(t(425))}function ru(){}var _h=null,vh=null;function wh(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Eh=typeof setTimeout=="function"?setTimeout:void 0,BE=typeof clearTimeout=="function"?clearTimeout:void 0,sm=typeof Promise=="function"?Promise:void 0,zE=typeof queueMicrotask=="function"?queueMicrotask:typeof sm<"u"?function(n){return sm.resolve(null).then(n).catch($E)}:Eh;function $E(n){setTimeout(function(){throw n})}function Th(n,i){var a=i,c=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){n.removeChild(d),is(i);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);is(i)}function us(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function im(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}var oo=Math.random().toString(36).slice(2),rr="__reactFiber$"+oo,ka="__reactProps$"+oo,Ar="__reactContainer$"+oo,Ih="__reactEvents$"+oo,qE="__reactListeners$"+oo,WE="__reactHandles$"+oo;function ci(n){var i=n[rr];if(i)return i;for(var a=n.parentNode;a;){if(i=a[Ar]||a[rr]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=im(n);n!==null;){if(a=n[rr])return a;n=im(n)}return i}n=a,a=n.parentNode}return null}function xa(n){return n=n[rr]||n[Ar],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function ao(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function su(n){return n[ka]||null}var Sh=[],lo=-1;function cs(n){return{current:n}}function tt(n){0>lo||(n.current=Sh[lo],Sh[lo]=null,lo--)}function Je(n,i){lo++,Sh[lo]=n.current,n.current=i}var hs={},Bt=cs(hs),Zt=cs(!1),hi=hs;function uo(n,i){var a=n.type.contextTypes;if(!a)return hs;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===i)return c.__reactInternalMemoizedMaskedChildContext;var d={},p;for(p in a)d[p]=i[p];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=d),d}function en(n){return n=n.childContextTypes,n!=null}function iu(){tt(Zt),tt(Bt)}function om(n,i,a){if(Bt.current!==hs)throw Error(t(168));Je(Bt,i),Je(Zt,a)}function am(n,i,a){var c=n.stateNode;if(i=i.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in i))throw Error(t(108,ze(n)||"Unknown",d));return te({},a,c)}function ou(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||hs,hi=Bt.current,Je(Bt,n),Je(Zt,Zt.current),!0}function lm(n,i,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=am(n,i,hi),c.__reactInternalMemoizedMergedChildContext=n,tt(Zt),tt(Bt),Je(Bt,n)):tt(Zt),Je(Zt,a)}var Rr=null,au=!1,Ah=!1;function um(n){Rr===null?Rr=[n]:Rr.push(n)}function HE(n){au=!0,um(n)}function ds(){if(!Ah&&Rr!==null){Ah=!0;var n=0,i=Fe;try{var a=Rr;for(Fe=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}Rr=null,au=!1}catch(d){throw Rr!==null&&(Rr=Rr.slice(n+1)),oa($i,ds),d}finally{Fe=i,Ah=!1}}return null}var co=[],ho=0,lu=null,uu=0,Tn=[],In=0,di=null,Cr=1,Pr="";function fi(n,i){co[ho++]=uu,co[ho++]=lu,lu=n,uu=i}function cm(n,i,a){Tn[In++]=Cr,Tn[In++]=Pr,Tn[In++]=di,di=n;var c=Cr;n=Pr;var d=32-ln(c)-1;c&=~(1<<d),a+=1;var p=32-ln(i)+d;if(30<p){var w=d-d%5;p=(c&(1<<w)-1).toString(32),c>>=w,d-=w,Cr=1<<32-ln(i)+d|a<<d|c,Pr=p+n}else Cr=1<<p|a<<d|c,Pr=n}function Rh(n){n.return!==null&&(fi(n,1),cm(n,1,0))}function Ch(n){for(;n===lu;)lu=co[--ho],co[ho]=null,uu=co[--ho],co[ho]=null;for(;n===di;)di=Tn[--In],Tn[In]=null,Pr=Tn[--In],Tn[In]=null,Cr=Tn[--In],Tn[In]=null}var fn=null,pn=null,rt=!1,On=null;function hm(n,i){var a=Cn(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=n,i=n.deletions,i===null?(n.deletions=[a],n.flags|=16):i.push(a)}function dm(n,i){switch(n.tag){case 5:var a=n.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,fn=n,pn=us(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,fn=n,pn=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=di!==null?{id:Cr,overflow:Pr}:null,n.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=Cn(18,null,null,0),a.stateNode=i,a.return=n,n.child=a,fn=n,pn=null,!0):!1;default:return!1}}function Ph(n){return(n.mode&1)!==0&&(n.flags&128)===0}function kh(n){if(rt){var i=pn;if(i){var a=i;if(!dm(n,i)){if(Ph(n))throw Error(t(418));i=us(a.nextSibling);var c=fn;i&&dm(n,i)?hm(c,a):(n.flags=n.flags&-4097|2,rt=!1,fn=n)}}else{if(Ph(n))throw Error(t(418));n.flags=n.flags&-4097|2,rt=!1,fn=n}}}function fm(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;fn=n}function cu(n){if(n!==fn)return!1;if(!rt)return fm(n),rt=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!wh(n.type,n.memoizedProps)),i&&(i=pn)){if(Ph(n))throw pm(),Error(t(418));for(;i;)hm(n,i),i=us(i.nextSibling)}if(fm(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(i===0){pn=us(n.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}n=n.nextSibling}pn=null}}else pn=fn?us(n.stateNode.nextSibling):null;return!0}function pm(){for(var n=pn;n;)n=us(n.nextSibling)}function fo(){pn=fn=null,rt=!1}function xh(n){On===null?On=[n]:On.push(n)}var GE=G.ReactCurrentBatchConfig;function Na(n,i,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var d=c,p=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===p?i.ref:(i=function(w){var x=d.refs;w===null?delete x[p]:x[p]=w},i._stringRef=p,i)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function hu(n,i){throw n=Object.prototype.toString.call(i),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function mm(n){var i=n._init;return i(n._payload)}function gm(n){function i(j,O){if(n){var U=j.deletions;U===null?(j.deletions=[O],j.flags|=16):U.push(O)}}function a(j,O){if(!n)return null;for(;O!==null;)i(j,O),O=O.sibling;return null}function c(j,O){for(j=new Map;O!==null;)O.key!==null?j.set(O.key,O):j.set(O.index,O),O=O.sibling;return j}function d(j,O){return j=ws(j,O),j.index=0,j.sibling=null,j}function p(j,O,U){return j.index=U,n?(U=j.alternate,U!==null?(U=U.index,U<O?(j.flags|=2,O):U):(j.flags|=2,O)):(j.flags|=1048576,O)}function w(j){return n&&j.alternate===null&&(j.flags|=2),j}function x(j,O,U,ee){return O===null||O.tag!==6?(O=Ed(U,j.mode,ee),O.return=j,O):(O=d(O,U),O.return=j,O)}function V(j,O,U,ee){var ge=U.type;return ge===I?J(j,O,U.props.children,ee,U.key):O!==null&&(O.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===qe&&mm(ge)===O.type)?(ee=d(O,U.props),ee.ref=Na(j,O,U),ee.return=j,ee):(ee=Mu(U.type,U.key,U.props,null,j.mode,ee),ee.ref=Na(j,O,U),ee.return=j,ee)}function B(j,O,U,ee){return O===null||O.tag!==4||O.stateNode.containerInfo!==U.containerInfo||O.stateNode.implementation!==U.implementation?(O=Td(U,j.mode,ee),O.return=j,O):(O=d(O,U.children||[]),O.return=j,O)}function J(j,O,U,ee,ge){return O===null||O.tag!==7?(O=Ei(U,j.mode,ee,ge),O.return=j,O):(O=d(O,U),O.return=j,O)}function Z(j,O,U){if(typeof O=="string"&&O!==""||typeof O=="number")return O=Ed(""+O,j.mode,U),O.return=j,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case ae:return U=Mu(O.type,O.key,O.props,null,j.mode,U),U.ref=Na(j,null,O),U.return=j,U;case Q:return O=Td(O,j.mode,U),O.return=j,O;case qe:var ee=O._init;return Z(j,ee(O._payload),U)}if(ct(O)||fe(O))return O=Ei(O,j.mode,U,null),O.return=j,O;hu(j,O)}return null}function Y(j,O,U,ee){var ge=O!==null?O.key:null;if(typeof U=="string"&&U!==""||typeof U=="number")return ge!==null?null:x(j,O,""+U,ee);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case ae:return U.key===ge?V(j,O,U,ee):null;case Q:return U.key===ge?B(j,O,U,ee):null;case qe:return ge=U._init,Y(j,O,ge(U._payload),ee)}if(ct(U)||fe(U))return ge!==null?null:J(j,O,U,ee,null);hu(j,U)}return null}function le(j,O,U,ee,ge){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return j=j.get(U)||null,x(O,j,""+ee,ge);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case ae:return j=j.get(ee.key===null?U:ee.key)||null,V(O,j,ee,ge);case Q:return j=j.get(ee.key===null?U:ee.key)||null,B(O,j,ee,ge);case qe:var we=ee._init;return le(j,O,U,we(ee._payload),ge)}if(ct(ee)||fe(ee))return j=j.get(U)||null,J(O,j,ee,ge,null);hu(O,ee)}return null}function pe(j,O,U,ee){for(var ge=null,we=null,Ee=O,Re=O=0,kt=null;Ee!==null&&Re<U.length;Re++){Ee.index>Re?(kt=Ee,Ee=null):kt=Ee.sibling;var We=Y(j,Ee,U[Re],ee);if(We===null){Ee===null&&(Ee=kt);break}n&&Ee&&We.alternate===null&&i(j,Ee),O=p(We,O,Re),we===null?ge=We:we.sibling=We,we=We,Ee=kt}if(Re===U.length)return a(j,Ee),rt&&fi(j,Re),ge;if(Ee===null){for(;Re<U.length;Re++)Ee=Z(j,U[Re],ee),Ee!==null&&(O=p(Ee,O,Re),we===null?ge=Ee:we.sibling=Ee,we=Ee);return rt&&fi(j,Re),ge}for(Ee=c(j,Ee);Re<U.length;Re++)kt=le(Ee,j,Re,U[Re],ee),kt!==null&&(n&&kt.alternate!==null&&Ee.delete(kt.key===null?Re:kt.key),O=p(kt,O,Re),we===null?ge=kt:we.sibling=kt,we=kt);return n&&Ee.forEach(function(Es){return i(j,Es)}),rt&&fi(j,Re),ge}function me(j,O,U,ee){var ge=fe(U);if(typeof ge!="function")throw Error(t(150));if(U=ge.call(U),U==null)throw Error(t(151));for(var we=ge=null,Ee=O,Re=O=0,kt=null,We=U.next();Ee!==null&&!We.done;Re++,We=U.next()){Ee.index>Re?(kt=Ee,Ee=null):kt=Ee.sibling;var Es=Y(j,Ee,We.value,ee);if(Es===null){Ee===null&&(Ee=kt);break}n&&Ee&&Es.alternate===null&&i(j,Ee),O=p(Es,O,Re),we===null?ge=Es:we.sibling=Es,we=Es,Ee=kt}if(We.done)return a(j,Ee),rt&&fi(j,Re),ge;if(Ee===null){for(;!We.done;Re++,We=U.next())We=Z(j,We.value,ee),We!==null&&(O=p(We,O,Re),we===null?ge=We:we.sibling=We,we=We);return rt&&fi(j,Re),ge}for(Ee=c(j,Ee);!We.done;Re++,We=U.next())We=le(Ee,j,Re,We.value,ee),We!==null&&(n&&We.alternate!==null&&Ee.delete(We.key===null?Re:We.key),O=p(We,O,Re),we===null?ge=We:we.sibling=We,we=We);return n&&Ee.forEach(function(R0){return i(j,R0)}),rt&&fi(j,Re),ge}function dt(j,O,U,ee){if(typeof U=="object"&&U!==null&&U.type===I&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case ae:e:{for(var ge=U.key,we=O;we!==null;){if(we.key===ge){if(ge=U.type,ge===I){if(we.tag===7){a(j,we.sibling),O=d(we,U.props.children),O.return=j,j=O;break e}}else if(we.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===qe&&mm(ge)===we.type){a(j,we.sibling),O=d(we,U.props),O.ref=Na(j,we,U),O.return=j,j=O;break e}a(j,we);break}else i(j,we);we=we.sibling}U.type===I?(O=Ei(U.props.children,j.mode,ee,U.key),O.return=j,j=O):(ee=Mu(U.type,U.key,U.props,null,j.mode,ee),ee.ref=Na(j,O,U),ee.return=j,j=ee)}return w(j);case Q:e:{for(we=U.key;O!==null;){if(O.key===we)if(O.tag===4&&O.stateNode.containerInfo===U.containerInfo&&O.stateNode.implementation===U.implementation){a(j,O.sibling),O=d(O,U.children||[]),O.return=j,j=O;break e}else{a(j,O);break}else i(j,O);O=O.sibling}O=Td(U,j.mode,ee),O.return=j,j=O}return w(j);case qe:return we=U._init,dt(j,O,we(U._payload),ee)}if(ct(U))return pe(j,O,U,ee);if(fe(U))return me(j,O,U,ee);hu(j,U)}return typeof U=="string"&&U!==""||typeof U=="number"?(U=""+U,O!==null&&O.tag===6?(a(j,O.sibling),O=d(O,U),O.return=j,j=O):(a(j,O),O=Ed(U,j.mode,ee),O.return=j,j=O),w(j)):a(j,O)}return dt}var po=gm(!0),ym=gm(!1),du=cs(null),fu=null,mo=null,Nh=null;function Dh(){Nh=mo=fu=null}function Vh(n){var i=du.current;tt(du),n._currentValue=i}function Oh(n,i,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),n===a)break;n=n.return}}function go(n,i){fu=n,Nh=mo=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&i)!==0&&(tn=!0),n.firstContext=null)}function Sn(n){var i=n._currentValue;if(Nh!==n)if(n={context:n,memoizedValue:i,next:null},mo===null){if(fu===null)throw Error(t(308));mo=n,fu.dependencies={lanes:0,firstContext:n}}else mo=mo.next=n;return i}var pi=null;function Mh(n){pi===null?pi=[n]:pi.push(n)}function _m(n,i,a,c){var d=i.interleaved;return d===null?(a.next=a,Mh(i)):(a.next=d.next,d.next=a),i.interleaved=a,kr(n,c)}function kr(n,i){n.lanes|=i;var a=n.alternate;for(a!==null&&(a.lanes|=i),a=n,n=n.return;n!==null;)n.childLanes|=i,a=n.alternate,a!==null&&(a.childLanes|=i),a=n,n=n.return;return a.tag===3?a.stateNode:null}var fs=!1;function Lh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vm(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function xr(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function ps(n,i,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,($e&2)!==0){var d=c.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),c.pending=i,kr(n,a)}return d=c.interleaved,d===null?(i.next=i,Mh(c)):(i.next=d.next,d.next=i),c.interleaved=i,kr(n,a)}function pu(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,da(n,a)}}function wm(n,i){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};p===null?d=p=w:p=p.next=w,a=a.next}while(a!==null);p===null?d=p=i:p=p.next=i}else d=p=i;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}function mu(n,i,a,c){var d=n.updateQueue;fs=!1;var p=d.firstBaseUpdate,w=d.lastBaseUpdate,x=d.shared.pending;if(x!==null){d.shared.pending=null;var V=x,B=V.next;V.next=null,w===null?p=B:w.next=B,w=V;var J=n.alternate;J!==null&&(J=J.updateQueue,x=J.lastBaseUpdate,x!==w&&(x===null?J.firstBaseUpdate=B:x.next=B,J.lastBaseUpdate=V))}if(p!==null){var Z=d.baseState;w=0,J=B=V=null,x=p;do{var Y=x.lane,le=x.eventTime;if((c&Y)===Y){J!==null&&(J=J.next={eventTime:le,lane:0,tag:x.tag,payload:x.payload,callback:x.callback,next:null});e:{var pe=n,me=x;switch(Y=i,le=a,me.tag){case 1:if(pe=me.payload,typeof pe=="function"){Z=pe.call(le,Z,Y);break e}Z=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=me.payload,Y=typeof pe=="function"?pe.call(le,Z,Y):pe,Y==null)break e;Z=te({},Z,Y);break e;case 2:fs=!0}}x.callback!==null&&x.lane!==0&&(n.flags|=64,Y=d.effects,Y===null?d.effects=[x]:Y.push(x))}else le={eventTime:le,lane:Y,tag:x.tag,payload:x.payload,callback:x.callback,next:null},J===null?(B=J=le,V=Z):J=J.next=le,w|=Y;if(x=x.next,x===null){if(x=d.shared.pending,x===null)break;Y=x,x=Y.next,Y.next=null,d.lastBaseUpdate=Y,d.shared.pending=null}}while(!0);if(J===null&&(V=Z),d.baseState=V,d.firstBaseUpdate=B,d.lastBaseUpdate=J,i=d.shared.interleaved,i!==null){d=i;do w|=d.lane,d=d.next;while(d!==i)}else p===null&&(d.shared.lanes=0);yi|=w,n.lanes=w,n.memoizedState=Z}}function Em(n,i,a){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var c=n[i],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var Da={},sr=cs(Da),Va=cs(Da),Oa=cs(Da);function mi(n){if(n===Da)throw Error(t(174));return n}function bh(n,i){switch(Je(Oa,i),Je(Va,n),Je(sr,Da),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:bi(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=bi(i,n)}tt(sr),Je(sr,i)}function yo(){tt(sr),tt(Va),tt(Oa)}function Tm(n){mi(Oa.current);var i=mi(sr.current),a=bi(i,n.type);i!==a&&(Je(Va,n),Je(sr,a))}function jh(n){Va.current===n&&(tt(sr),tt(Va))}var st=cs(0);function gu(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Fh=[];function Uh(){for(var n=0;n<Fh.length;n++)Fh[n]._workInProgressVersionPrimary=null;Fh.length=0}var yu=G.ReactCurrentDispatcher,Bh=G.ReactCurrentBatchConfig,gi=0,it=null,Tt=null,Ct=null,_u=!1,Ma=!1,La=0,KE=0;function zt(){throw Error(t(321))}function zh(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!Vn(n[a],i[a]))return!1;return!0}function $h(n,i,a,c,d,p){if(gi=p,it=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,yu.current=n===null||n.memoizedState===null?JE:ZE,n=a(c,d),Ma){p=0;do{if(Ma=!1,La=0,25<=p)throw Error(t(301));p+=1,Ct=Tt=null,i.updateQueue=null,yu.current=e0,n=a(c,d)}while(Ma)}if(yu.current=Eu,i=Tt!==null&&Tt.next!==null,gi=0,Ct=Tt=it=null,_u=!1,i)throw Error(t(300));return n}function qh(){var n=La!==0;return La=0,n}function ir(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?it.memoizedState=Ct=n:Ct=Ct.next=n,Ct}function An(){if(Tt===null){var n=it.alternate;n=n!==null?n.memoizedState:null}else n=Tt.next;var i=Ct===null?it.memoizedState:Ct.next;if(i!==null)Ct=i,Tt=n;else{if(n===null)throw Error(t(310));Tt=n,n={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},Ct===null?it.memoizedState=Ct=n:Ct=Ct.next=n}return Ct}function ba(n,i){return typeof i=="function"?i(n):i}function Wh(n){var i=An(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=Tt,d=c.baseQueue,p=a.pending;if(p!==null){if(d!==null){var w=d.next;d.next=p.next,p.next=w}c.baseQueue=d=p,a.pending=null}if(d!==null){p=d.next,c=c.baseState;var x=w=null,V=null,B=p;do{var J=B.lane;if((gi&J)===J)V!==null&&(V=V.next={lane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),c=B.hasEagerState?B.eagerState:n(c,B.action);else{var Z={lane:J,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null};V===null?(x=V=Z,w=c):V=V.next=Z,it.lanes|=J,yi|=J}B=B.next}while(B!==null&&B!==p);V===null?w=c:V.next=x,Vn(c,i.memoizedState)||(tn=!0),i.memoizedState=c,i.baseState=w,i.baseQueue=V,a.lastRenderedState=c}if(n=a.interleaved,n!==null){d=n;do p=d.lane,it.lanes|=p,yi|=p,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function Hh(n){var i=An(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,d=a.pending,p=i.memoizedState;if(d!==null){a.pending=null;var w=d=d.next;do p=n(p,w.action),w=w.next;while(w!==d);Vn(p,i.memoizedState)||(tn=!0),i.memoizedState=p,i.baseQueue===null&&(i.baseState=p),a.lastRenderedState=p}return[p,c]}function Im(){}function Sm(n,i){var a=it,c=An(),d=i(),p=!Vn(c.memoizedState,d);if(p&&(c.memoizedState=d,tn=!0),c=c.queue,Gh(Cm.bind(null,a,c,n),[n]),c.getSnapshot!==i||p||Ct!==null&&Ct.memoizedState.tag&1){if(a.flags|=2048,ja(9,Rm.bind(null,a,c,d,i),void 0,null),Pt===null)throw Error(t(349));(gi&30)!==0||Am(a,i,d)}return d}function Am(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=it.updateQueue,i===null?(i={lastEffect:null,stores:null},it.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function Rm(n,i,a,c){i.value=a,i.getSnapshot=c,Pm(i)&&km(n)}function Cm(n,i,a){return a(function(){Pm(i)&&km(n)})}function Pm(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!Vn(n,a)}catch{return!0}}function km(n){var i=kr(n,1);i!==null&&jn(i,n,1,-1)}function xm(n){var i=ir();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:n},i.queue=n,n=n.dispatch=YE.bind(null,it,n),[i.memoizedState,n]}function ja(n,i,a,c){return n={tag:n,create:i,destroy:a,deps:c,next:null},i=it.updateQueue,i===null?(i={lastEffect:null,stores:null},it.updateQueue=i,i.lastEffect=n.next=n):(a=i.lastEffect,a===null?i.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,i.lastEffect=n)),n}function Nm(){return An().memoizedState}function vu(n,i,a,c){var d=ir();it.flags|=n,d.memoizedState=ja(1|i,a,void 0,c===void 0?null:c)}function wu(n,i,a,c){var d=An();c=c===void 0?null:c;var p=void 0;if(Tt!==null){var w=Tt.memoizedState;if(p=w.destroy,c!==null&&zh(c,w.deps)){d.memoizedState=ja(i,a,p,c);return}}it.flags|=n,d.memoizedState=ja(1|i,a,p,c)}function Dm(n,i){return vu(8390656,8,n,i)}function Gh(n,i){return wu(2048,8,n,i)}function Vm(n,i){return wu(4,2,n,i)}function Om(n,i){return wu(4,4,n,i)}function Mm(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Lm(n,i,a){return a=a!=null?a.concat([n]):null,wu(4,4,Mm.bind(null,i,n),a)}function Kh(){}function bm(n,i){var a=An();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&zh(i,c[1])?c[0]:(a.memoizedState=[n,i],n)}function jm(n,i){var a=An();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&zh(i,c[1])?c[0]:(n=n(),a.memoizedState=[n,i],n)}function Fm(n,i,a){return(gi&21)===0?(n.baseState&&(n.baseState=!1,tn=!0),n.memoizedState=a):(Vn(a,i)||(a=ca(),it.lanes|=a,yi|=a,n.baseState=!0),i)}function QE(n,i){var a=Fe;Fe=a!==0&&4>a?a:4,n(!0);var c=Bh.transition;Bh.transition={};try{n(!1),i()}finally{Fe=a,Bh.transition=c}}function Um(){return An().memoizedState}function XE(n,i,a){var c=_s(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},Bm(n))zm(i,a);else if(a=_m(n,i,a,c),a!==null){var d=Xt();jn(a,n,c,d),$m(a,i,c)}}function YE(n,i,a){var c=_s(n),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(Bm(n))zm(i,d);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=i.lastRenderedReducer,p!==null))try{var w=i.lastRenderedState,x=p(w,a);if(d.hasEagerState=!0,d.eagerState=x,Vn(x,w)){var V=i.interleaved;V===null?(d.next=d,Mh(i)):(d.next=V.next,V.next=d),i.interleaved=d;return}}catch{}a=_m(n,i,d,c),a!==null&&(d=Xt(),jn(a,n,c,d),$m(a,i,c))}}function Bm(n){var i=n.alternate;return n===it||i!==null&&i===it}function zm(n,i){Ma=_u=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function $m(n,i,a){if((a&4194240)!==0){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,da(n,a)}}var Eu={readContext:Sn,useCallback:zt,useContext:zt,useEffect:zt,useImperativeHandle:zt,useInsertionEffect:zt,useLayoutEffect:zt,useMemo:zt,useReducer:zt,useRef:zt,useState:zt,useDebugValue:zt,useDeferredValue:zt,useTransition:zt,useMutableSource:zt,useSyncExternalStore:zt,useId:zt,unstable_isNewReconciler:!1},JE={readContext:Sn,useCallback:function(n,i){return ir().memoizedState=[n,i===void 0?null:i],n},useContext:Sn,useEffect:Dm,useImperativeHandle:function(n,i,a){return a=a!=null?a.concat([n]):null,vu(4194308,4,Mm.bind(null,i,n),a)},useLayoutEffect:function(n,i){return vu(4194308,4,n,i)},useInsertionEffect:function(n,i){return vu(4,2,n,i)},useMemo:function(n,i){var a=ir();return i=i===void 0?null:i,n=n(),a.memoizedState=[n,i],n},useReducer:function(n,i,a){var c=ir();return i=a!==void 0?a(i):i,c.memoizedState=c.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},c.queue=n,n=n.dispatch=XE.bind(null,it,n),[c.memoizedState,n]},useRef:function(n){var i=ir();return n={current:n},i.memoizedState=n},useState:xm,useDebugValue:Kh,useDeferredValue:function(n){return ir().memoizedState=n},useTransition:function(){var n=xm(!1),i=n[0];return n=QE.bind(null,n[1]),ir().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,a){var c=it,d=ir();if(rt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=i(),Pt===null)throw Error(t(349));(gi&30)!==0||Am(c,i,a)}d.memoizedState=a;var p={value:a,getSnapshot:i};return d.queue=p,Dm(Cm.bind(null,c,p,n),[n]),c.flags|=2048,ja(9,Rm.bind(null,c,p,a,i),void 0,null),a},useId:function(){var n=ir(),i=Pt.identifierPrefix;if(rt){var a=Pr,c=Cr;a=(c&~(1<<32-ln(c)-1)).toString(32)+a,i=":"+i+"R"+a,a=La++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=KE++,i=":"+i+"r"+a.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},ZE={readContext:Sn,useCallback:bm,useContext:Sn,useEffect:Gh,useImperativeHandle:Lm,useInsertionEffect:Vm,useLayoutEffect:Om,useMemo:jm,useReducer:Wh,useRef:Nm,useState:function(){return Wh(ba)},useDebugValue:Kh,useDeferredValue:function(n){var i=An();return Fm(i,Tt.memoizedState,n)},useTransition:function(){var n=Wh(ba)[0],i=An().memoizedState;return[n,i]},useMutableSource:Im,useSyncExternalStore:Sm,useId:Um,unstable_isNewReconciler:!1},e0={readContext:Sn,useCallback:bm,useContext:Sn,useEffect:Gh,useImperativeHandle:Lm,useInsertionEffect:Vm,useLayoutEffect:Om,useMemo:jm,useReducer:Hh,useRef:Nm,useState:function(){return Hh(ba)},useDebugValue:Kh,useDeferredValue:function(n){var i=An();return Tt===null?i.memoizedState=n:Fm(i,Tt.memoizedState,n)},useTransition:function(){var n=Hh(ba)[0],i=An().memoizedState;return[n,i]},useMutableSource:Im,useSyncExternalStore:Sm,useId:Um,unstable_isNewReconciler:!1};function Mn(n,i){if(n&&n.defaultProps){i=te({},i),n=n.defaultProps;for(var a in n)i[a]===void 0&&(i[a]=n[a]);return i}return i}function Qh(n,i,a,c){i=n.memoizedState,a=a(c,i),a=a==null?i:te({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Tu={isMounted:function(n){return(n=n._reactInternals)?Nn(n)===n:!1},enqueueSetState:function(n,i,a){n=n._reactInternals;var c=Xt(),d=_s(n),p=xr(c,d);p.payload=i,a!=null&&(p.callback=a),i=ps(n,p,d),i!==null&&(jn(i,n,d,c),pu(i,n,d))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var c=Xt(),d=_s(n),p=xr(c,d);p.tag=1,p.payload=i,a!=null&&(p.callback=a),i=ps(n,p,d),i!==null&&(jn(i,n,d,c),pu(i,n,d))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=Xt(),c=_s(n),d=xr(a,c);d.tag=2,i!=null&&(d.callback=i),i=ps(n,d,c),i!==null&&(jn(i,n,c,a),pu(i,n,c))}};function qm(n,i,a,c,d,p,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,p,w):i.prototype&&i.prototype.isPureReactComponent?!Sa(a,c)||!Sa(d,p):!0}function Wm(n,i,a){var c=!1,d=hs,p=i.contextType;return typeof p=="object"&&p!==null?p=Sn(p):(d=en(i)?hi:Bt.current,c=i.contextTypes,p=(c=c!=null)?uo(n,d):hs),i=new i(a,p),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Tu,n.stateNode=i,i._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=p),i}function Hm(n,i,a,c){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,c),i.state!==n&&Tu.enqueueReplaceState(i,i.state,null)}function Xh(n,i,a,c){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs={},Lh(n);var p=i.contextType;typeof p=="object"&&p!==null?d.context=Sn(p):(p=en(i)?hi:Bt.current,d.context=uo(n,p)),d.state=n.memoizedState,p=i.getDerivedStateFromProps,typeof p=="function"&&(Qh(n,i,p,a),d.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(i=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),i!==d.state&&Tu.enqueueReplaceState(d,d.state,null),mu(n,a,d,c),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function _o(n,i){try{var a="",c=i;do a+=Ne(c),c=c.return;while(c);var d=a}catch(p){d=`
Error generating stack: `+p.message+`
`+p.stack}return{value:n,source:i,stack:d,digest:null}}function Yh(n,i,a){return{value:n,source:null,stack:a??null,digest:i??null}}function Jh(n,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var t0=typeof WeakMap=="function"?WeakMap:Map;function Gm(n,i,a){a=xr(-1,a),a.tag=3,a.payload={element:null};var c=i.value;return a.callback=function(){ku||(ku=!0,fd=c),Jh(n,i)},a}function Km(n,i,a){a=xr(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=i.value;a.payload=function(){return c(d)},a.callback=function(){Jh(n,i)}}var p=n.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(a.callback=function(){Jh(n,i),typeof c!="function"&&(gs===null?gs=new Set([this]):gs.add(this));var w=i.stack;this.componentDidCatch(i.value,{componentStack:w!==null?w:""})}),a}function Qm(n,i,a){var c=n.pingCache;if(c===null){c=n.pingCache=new t0;var d=new Set;c.set(i,d)}else d=c.get(i),d===void 0&&(d=new Set,c.set(i,d));d.has(a)||(d.add(a),n=m0.bind(null,n,i,a),i.then(n,n))}function Xm(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function Ym(n,i,a,c,d){return(n.mode&1)===0?(n===i?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=xr(-1,1),i.tag=2,ps(a,i,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=d,n)}var n0=G.ReactCurrentOwner,tn=!1;function Qt(n,i,a,c){i.child=n===null?ym(i,null,a,c):po(i,n.child,a,c)}function Jm(n,i,a,c,d){a=a.render;var p=i.ref;return go(i,d),c=$h(n,i,a,c,p,d),a=qh(),n!==null&&!tn?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~d,Nr(n,i,d)):(rt&&a&&Rh(i),i.flags|=1,Qt(n,i,c,d),i.child)}function Zm(n,i,a,c,d){if(n===null){var p=a.type;return typeof p=="function"&&!wd(p)&&p.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=p,eg(n,i,p,c,d)):(n=Mu(a.type,null,c,i,i.mode,d),n.ref=i.ref,n.return=i,i.child=n)}if(p=n.child,(n.lanes&d)===0){var w=p.memoizedProps;if(a=a.compare,a=a!==null?a:Sa,a(w,c)&&n.ref===i.ref)return Nr(n,i,d)}return i.flags|=1,n=ws(p,c),n.ref=i.ref,n.return=i,i.child=n}function eg(n,i,a,c,d){if(n!==null){var p=n.memoizedProps;if(Sa(p,c)&&n.ref===i.ref)if(tn=!1,i.pendingProps=c=p,(n.lanes&d)!==0)(n.flags&131072)!==0&&(tn=!0);else return i.lanes=n.lanes,Nr(n,i,d)}return Zh(n,i,a,c,d)}function tg(n,i,a){var c=i.pendingProps,d=c.children,p=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Je(wo,mn),mn|=a;else{if((a&1073741824)===0)return n=p!==null?p.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,Je(wo,mn),mn|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=p!==null?p.baseLanes:a,Je(wo,mn),mn|=c}else p!==null?(c=p.baseLanes|a,i.memoizedState=null):c=a,Je(wo,mn),mn|=c;return Qt(n,i,d,a),i.child}function ng(n,i){var a=i.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function Zh(n,i,a,c,d){var p=en(a)?hi:Bt.current;return p=uo(i,p),go(i,d),a=$h(n,i,a,c,p,d),c=qh(),n!==null&&!tn?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~d,Nr(n,i,d)):(rt&&c&&Rh(i),i.flags|=1,Qt(n,i,a,d),i.child)}function rg(n,i,a,c,d){if(en(a)){var p=!0;ou(i)}else p=!1;if(go(i,d),i.stateNode===null)Su(n,i),Wm(i,a,c),Xh(i,a,c,d),c=!0;else if(n===null){var w=i.stateNode,x=i.memoizedProps;w.props=x;var V=w.context,B=a.contextType;typeof B=="object"&&B!==null?B=Sn(B):(B=en(a)?hi:Bt.current,B=uo(i,B));var J=a.getDerivedStateFromProps,Z=typeof J=="function"||typeof w.getSnapshotBeforeUpdate=="function";Z||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(x!==c||V!==B)&&Hm(i,w,c,B),fs=!1;var Y=i.memoizedState;w.state=Y,mu(i,c,w,d),V=i.memoizedState,x!==c||Y!==V||Zt.current||fs?(typeof J=="function"&&(Qh(i,a,J,c),V=i.memoizedState),(x=fs||qm(i,a,x,c,Y,V,B))?(Z||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(i.flags|=4194308)):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=V),w.props=c,w.state=V,w.context=B,c=x):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{w=i.stateNode,vm(n,i),x=i.memoizedProps,B=i.type===i.elementType?x:Mn(i.type,x),w.props=B,Z=i.pendingProps,Y=w.context,V=a.contextType,typeof V=="object"&&V!==null?V=Sn(V):(V=en(a)?hi:Bt.current,V=uo(i,V));var le=a.getDerivedStateFromProps;(J=typeof le=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(x!==Z||Y!==V)&&Hm(i,w,c,V),fs=!1,Y=i.memoizedState,w.state=Y,mu(i,c,w,d);var pe=i.memoizedState;x!==Z||Y!==pe||Zt.current||fs?(typeof le=="function"&&(Qh(i,a,le,c),pe=i.memoizedState),(B=fs||qm(i,a,B,c,Y,pe,V)||!1)?(J||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(c,pe,V),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(c,pe,V)),typeof w.componentDidUpdate=="function"&&(i.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof w.componentDidUpdate!="function"||x===n.memoizedProps&&Y===n.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||x===n.memoizedProps&&Y===n.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=pe),w.props=c,w.state=pe,w.context=V,c=B):(typeof w.componentDidUpdate!="function"||x===n.memoizedProps&&Y===n.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||x===n.memoizedProps&&Y===n.memoizedState||(i.flags|=1024),c=!1)}return ed(n,i,a,c,p,d)}function ed(n,i,a,c,d,p){ng(n,i);var w=(i.flags&128)!==0;if(!c&&!w)return d&&lm(i,a,!1),Nr(n,i,p);c=i.stateNode,n0.current=i;var x=w&&typeof a.getDerivedStateFromError!="function"?null:c.render();return i.flags|=1,n!==null&&w?(i.child=po(i,n.child,null,p),i.child=po(i,null,x,p)):Qt(n,i,x,p),i.memoizedState=c.state,d&&lm(i,a,!0),i.child}function sg(n){var i=n.stateNode;i.pendingContext?om(n,i.pendingContext,i.pendingContext!==i.context):i.context&&om(n,i.context,!1),bh(n,i.containerInfo)}function ig(n,i,a,c,d){return fo(),xh(d),i.flags|=256,Qt(n,i,a,c),i.child}var td={dehydrated:null,treeContext:null,retryLane:0};function nd(n){return{baseLanes:n,cachePool:null,transitions:null}}function og(n,i,a){var c=i.pendingProps,d=st.current,p=!1,w=(i.flags&128)!==0,x;if((x=w)||(x=n!==null&&n.memoizedState===null?!1:(d&2)!==0),x?(p=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),Je(st,d&1),n===null)return kh(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((i.mode&1)===0?i.lanes=1:n.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(w=c.children,n=c.fallback,p?(c=i.mode,p=i.child,w={mode:"hidden",children:w},(c&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=w):p=Lu(w,c,0,null),n=Ei(n,c,a,null),p.return=i,n.return=i,p.sibling=n,i.child=p,i.child.memoizedState=nd(a),i.memoizedState=td,n):rd(i,w));if(d=n.memoizedState,d!==null&&(x=d.dehydrated,x!==null))return r0(n,i,w,c,x,d,a);if(p){p=c.fallback,w=i.mode,d=n.child,x=d.sibling;var V={mode:"hidden",children:c.children};return(w&1)===0&&i.child!==d?(c=i.child,c.childLanes=0,c.pendingProps=V,i.deletions=null):(c=ws(d,V),c.subtreeFlags=d.subtreeFlags&14680064),x!==null?p=ws(x,p):(p=Ei(p,w,a,null),p.flags|=2),p.return=i,c.return=i,c.sibling=p,i.child=c,c=p,p=i.child,w=n.child.memoizedState,w=w===null?nd(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},p.memoizedState=w,p.childLanes=n.childLanes&~a,i.memoizedState=td,c}return p=n.child,n=p.sibling,c=ws(p,{mode:"visible",children:c.children}),(i.mode&1)===0&&(c.lanes=a),c.return=i,c.sibling=null,n!==null&&(a=i.deletions,a===null?(i.deletions=[n],i.flags|=16):a.push(n)),i.child=c,i.memoizedState=null,c}function rd(n,i){return i=Lu({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function Iu(n,i,a,c){return c!==null&&xh(c),po(i,n.child,null,a),n=rd(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function r0(n,i,a,c,d,p,w){if(a)return i.flags&256?(i.flags&=-257,c=Yh(Error(t(422))),Iu(n,i,w,c)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(p=c.fallback,d=i.mode,c=Lu({mode:"visible",children:c.children},d,0,null),p=Ei(p,d,w,null),p.flags|=2,c.return=i,p.return=i,c.sibling=p,i.child=c,(i.mode&1)!==0&&po(i,n.child,null,w),i.child.memoizedState=nd(w),i.memoizedState=td,p);if((i.mode&1)===0)return Iu(n,i,w,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var x=c.dgst;return c=x,p=Error(t(419)),c=Yh(p,c,void 0),Iu(n,i,w,c)}if(x=(w&n.childLanes)!==0,tn||x){if(c=Pt,c!==null){switch(w&-w){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|w))!==0?0:d,d!==0&&d!==p.retryLane&&(p.retryLane=d,kr(n,d),jn(c,n,d,-1))}return vd(),c=Yh(Error(t(421))),Iu(n,i,w,c)}return d.data==="$?"?(i.flags|=128,i.child=n.child,i=g0.bind(null,n),d._reactRetry=i,null):(n=p.treeContext,pn=us(d.nextSibling),fn=i,rt=!0,On=null,n!==null&&(Tn[In++]=Cr,Tn[In++]=Pr,Tn[In++]=di,Cr=n.id,Pr=n.overflow,di=i),i=rd(i,c.children),i.flags|=4096,i)}function ag(n,i,a){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i),Oh(n.return,i,a)}function sd(n,i,a,c,d){var p=n.memoizedState;p===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(p.isBackwards=i,p.rendering=null,p.renderingStartTime=0,p.last=c,p.tail=a,p.tailMode=d)}function lg(n,i,a){var c=i.pendingProps,d=c.revealOrder,p=c.tail;if(Qt(n,i,c.children,a),c=st.current,(c&2)!==0)c=c&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&ag(n,a,i);else if(n.tag===19)ag(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(Je(st,c),(i.mode&1)===0)i.memoizedState=null;else switch(d){case"forwards":for(a=i.child,d=null;a!==null;)n=a.alternate,n!==null&&gu(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=i.child,i.child=null):(d=a.sibling,a.sibling=null),sd(i,!1,d,a,p);break;case"backwards":for(a=null,d=i.child,i.child=null;d!==null;){if(n=d.alternate,n!==null&&gu(n)===null){i.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}sd(i,!0,a,null,p);break;case"together":sd(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Su(n,i){(i.mode&1)===0&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function Nr(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),yi|=i.lanes,(a&i.childLanes)===0)return null;if(n!==null&&i.child!==n.child)throw Error(t(153));if(i.child!==null){for(n=i.child,a=ws(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=ws(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function s0(n,i,a){switch(i.tag){case 3:sg(i),fo();break;case 5:Tm(i);break;case 1:en(i.type)&&ou(i);break;case 4:bh(i,i.stateNode.containerInfo);break;case 10:var c=i.type._context,d=i.memoizedProps.value;Je(du,c._currentValue),c._currentValue=d;break;case 13:if(c=i.memoizedState,c!==null)return c.dehydrated!==null?(Je(st,st.current&1),i.flags|=128,null):(a&i.child.childLanes)!==0?og(n,i,a):(Je(st,st.current&1),n=Nr(n,i,a),n!==null?n.sibling:null);Je(st,st.current&1);break;case 19:if(c=(a&i.childLanes)!==0,(n.flags&128)!==0){if(c)return lg(n,i,a);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Je(st,st.current),c)break;return null;case 22:case 23:return i.lanes=0,tg(n,i,a)}return Nr(n,i,a)}var ug,id,cg,hg;ug=function(n,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},id=function(){},cg=function(n,i,a,c){var d=n.memoizedProps;if(d!==c){n=i.stateNode,mi(sr.current);var p=null;switch(a){case"input":d=Mi(n,d),c=Mi(n,c),p=[];break;case"select":d=te({},d,{value:void 0}),c=te({},c,{value:void 0}),p=[];break;case"textarea":d=Zo(n,d),c=Zo(n,c),p=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=ru)}xn(a,c);var w;a=null;for(B in d)if(!c.hasOwnProperty(B)&&d.hasOwnProperty(B)&&d[B]!=null)if(B==="style"){var x=d[B];for(w in x)x.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else B!=="dangerouslySetInnerHTML"&&B!=="children"&&B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&B!=="autoFocus"&&(o.hasOwnProperty(B)?p||(p=[]):(p=p||[]).push(B,null));for(B in c){var V=c[B];if(x=d?.[B],c.hasOwnProperty(B)&&V!==x&&(V!=null||x!=null))if(B==="style")if(x){for(w in x)!x.hasOwnProperty(w)||V&&V.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in V)V.hasOwnProperty(w)&&x[w]!==V[w]&&(a||(a={}),a[w]=V[w])}else a||(p||(p=[]),p.push(B,a)),a=V;else B==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,x=x?x.__html:void 0,V!=null&&x!==V&&(p=p||[]).push(B,V)):B==="children"?typeof V!="string"&&typeof V!="number"||(p=p||[]).push(B,""+V):B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&(o.hasOwnProperty(B)?(V!=null&&B==="onScroll"&&et("scroll",n),p||x===V||(p=[])):(p=p||[]).push(B,V))}a&&(p=p||[]).push("style",a);var B=p;(i.updateQueue=B)&&(i.flags|=4)}},hg=function(n,i,a,c){a!==c&&(i.flags|=4)};function Fa(n,i){if(!rt)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function $t(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(i)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=a,i}function i0(n,i,a){var c=i.pendingProps;switch(Ch(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(i),null;case 1:return en(i.type)&&iu(),$t(i),null;case 3:return c=i.stateNode,yo(),tt(Zt),tt(Bt),Uh(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(cu(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,On!==null&&(gd(On),On=null))),id(n,i),$t(i),null;case 5:jh(i);var d=mi(Oa.current);if(a=i.type,n!==null&&i.stateNode!=null)cg(n,i,a,c,d),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!c){if(i.stateNode===null)throw Error(t(166));return $t(i),null}if(n=mi(sr.current),cu(i)){c=i.stateNode,a=i.type;var p=i.memoizedProps;switch(c[rr]=i,c[ka]=p,n=(i.mode&1)!==0,a){case"dialog":et("cancel",c),et("close",c);break;case"iframe":case"object":case"embed":et("load",c);break;case"video":case"audio":for(d=0;d<Ra.length;d++)et(Ra[d],c);break;case"source":et("error",c);break;case"img":case"image":case"link":et("error",c),et("load",c);break;case"details":et("toggle",c);break;case"input":Pl(c,p),et("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!p.multiple},et("invalid",c);break;case"textarea":ea(c,p),et("invalid",c)}xn(a,p),d=null;for(var w in p)if(p.hasOwnProperty(w)){var x=p[w];w==="children"?typeof x=="string"?c.textContent!==x&&(p.suppressHydrationWarning!==!0&&nu(c.textContent,x,n),d=["children",x]):typeof x=="number"&&c.textContent!==""+x&&(p.suppressHydrationWarning!==!0&&nu(c.textContent,x,n),d=["children",""+x]):o.hasOwnProperty(w)&&x!=null&&w==="onScroll"&&et("scroll",c)}switch(a){case"input":vn(c),Jo(c,p,!0);break;case"textarea":vn(c),Gr(c);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(c.onclick=ru)}c=d,i.updateQueue=c,c!==null&&(i.flags|=4)}else{w=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=ta(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=w.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=w.createElement(a,{is:c.is}):(n=w.createElement(a),a==="select"&&(w=n,c.multiple?w.multiple=!0:c.size&&(w.size=c.size))):n=w.createElementNS(n,a),n[rr]=i,n[ka]=c,ug(n,i,!1,!1),i.stateNode=n;e:{switch(w=Fi(a,c),a){case"dialog":et("cancel",n),et("close",n),d=c;break;case"iframe":case"object":case"embed":et("load",n),d=c;break;case"video":case"audio":for(d=0;d<Ra.length;d++)et(Ra[d],n);d=c;break;case"source":et("error",n),d=c;break;case"img":case"image":case"link":et("error",n),et("load",n),d=c;break;case"details":et("toggle",n),d=c;break;case"input":Pl(n,c),d=Mi(n,c),et("invalid",n);break;case"option":d=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},d=te({},c,{value:void 0}),et("invalid",n);break;case"textarea":ea(n,c),d=Zo(n,c),et("invalid",n);break;default:d=c}xn(a,d),x=d;for(p in x)if(x.hasOwnProperty(p)){var V=x[p];p==="style"?ji(n,V):p==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,V!=null&&xl(n,V)):p==="children"?typeof V=="string"?(a!=="textarea"||V!=="")&&Xs(n,V):typeof V=="number"&&Xs(n,""+V):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(o.hasOwnProperty(p)?V!=null&&p==="onScroll"&&et("scroll",n):V!=null&&ie(n,p,V,w))}switch(a){case"input":vn(n),Jo(n,c,!1);break;case"textarea":vn(n),Gr(n);break;case"option":c.value!=null&&n.setAttribute("value",""+je(c.value));break;case"select":n.multiple=!!c.multiple,p=c.value,p!=null?kn(n,!!c.multiple,p,!1):c.defaultValue!=null&&kn(n,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=ru)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return $t(i),null;case 6:if(n&&i.stateNode!=null)hg(n,i,n.memoizedProps,c);else{if(typeof c!="string"&&i.stateNode===null)throw Error(t(166));if(a=mi(Oa.current),mi(sr.current),cu(i)){if(c=i.stateNode,a=i.memoizedProps,c[rr]=i,(p=c.nodeValue!==a)&&(n=fn,n!==null))switch(n.tag){case 3:nu(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&nu(c.nodeValue,a,(n.mode&1)!==0)}p&&(i.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[rr]=i,i.stateNode=c}return $t(i),null;case 13:if(tt(st),c=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(rt&&pn!==null&&(i.mode&1)!==0&&(i.flags&128)===0)pm(),fo(),i.flags|=98560,p=!1;else if(p=cu(i),c!==null&&c.dehydrated!==null){if(n===null){if(!p)throw Error(t(318));if(p=i.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(t(317));p[rr]=i}else fo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;$t(i),p=!1}else On!==null&&(gd(On),On=null),p=!0;if(!p)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=a,i):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(i.child.flags|=8192,(i.mode&1)!==0&&(n===null||(st.current&1)!==0?It===0&&(It=3):vd())),i.updateQueue!==null&&(i.flags|=4),$t(i),null);case 4:return yo(),id(n,i),n===null&&Ca(i.stateNode.containerInfo),$t(i),null;case 10:return Vh(i.type._context),$t(i),null;case 17:return en(i.type)&&iu(),$t(i),null;case 19:if(tt(st),p=i.memoizedState,p===null)return $t(i),null;if(c=(i.flags&128)!==0,w=p.rendering,w===null)if(c)Fa(p,!1);else{if(It!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(w=gu(n),w!==null){for(i.flags|=128,Fa(p,!1),c=w.updateQueue,c!==null&&(i.updateQueue=c,i.flags|=4),i.subtreeFlags=0,c=a,a=i.child;a!==null;)p=a,n=c,p.flags&=14680066,w=p.alternate,w===null?(p.childLanes=0,p.lanes=n,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=w.childLanes,p.lanes=w.lanes,p.child=w.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=w.memoizedProps,p.memoizedState=w.memoizedState,p.updateQueue=w.updateQueue,p.type=w.type,n=w.dependencies,p.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Je(st,st.current&1|2),i.child}n=n.sibling}p.tail!==null&&Ze()>Eo&&(i.flags|=128,c=!0,Fa(p,!1),i.lanes=4194304)}else{if(!c)if(n=gu(w),n!==null){if(i.flags|=128,c=!0,a=n.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),Fa(p,!0),p.tail===null&&p.tailMode==="hidden"&&!w.alternate&&!rt)return $t(i),null}else 2*Ze()-p.renderingStartTime>Eo&&a!==1073741824&&(i.flags|=128,c=!0,Fa(p,!1),i.lanes=4194304);p.isBackwards?(w.sibling=i.child,i.child=w):(a=p.last,a!==null?a.sibling=w:i.child=w,p.last=w)}return p.tail!==null?(i=p.tail,p.rendering=i,p.tail=i.sibling,p.renderingStartTime=Ze(),i.sibling=null,a=st.current,Je(st,c?a&1|2:a&1),i):($t(i),null);case 22:case 23:return _d(),c=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(i.flags|=8192),c&&(i.mode&1)!==0?(mn&1073741824)!==0&&($t(i),i.subtreeFlags&6&&(i.flags|=8192)):$t(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function o0(n,i){switch(Ch(i),i.tag){case 1:return en(i.type)&&iu(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return yo(),tt(Zt),tt(Bt),Uh(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 5:return jh(i),null;case 13:if(tt(st),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(t(340));fo()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return tt(st),null;case 4:return yo(),null;case 10:return Vh(i.type._context),null;case 22:case 23:return _d(),null;case 24:return null;default:return null}}var Au=!1,qt=!1,a0=typeof WeakSet=="function"?WeakSet:Set,ce=null;function vo(n,i){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){lt(n,i,c)}else a.current=null}function od(n,i,a){try{a()}catch(c){lt(n,i,c)}}var dg=!1;function l0(n,i){if(_h=Tr,n=qp(),ch(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break e}var w=0,x=-1,V=-1,B=0,J=0,Z=n,Y=null;t:for(;;){for(var le;Z!==a||d!==0&&Z.nodeType!==3||(x=w+d),Z!==p||c!==0&&Z.nodeType!==3||(V=w+c),Z.nodeType===3&&(w+=Z.nodeValue.length),(le=Z.firstChild)!==null;)Y=Z,Z=le;for(;;){if(Z===n)break t;if(Y===a&&++B===d&&(x=w),Y===p&&++J===c&&(V=w),(le=Z.nextSibling)!==null)break;Z=Y,Y=Z.parentNode}Z=le}a=x===-1||V===-1?null:{start:x,end:V}}else a=null}a=a||{start:0,end:0}}else a=null;for(vh={focusedElem:n,selectionRange:a},Tr=!1,ce=i;ce!==null;)if(i=ce,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,ce=n;else for(;ce!==null;){i=ce;try{var pe=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(pe!==null){var me=pe.memoizedProps,dt=pe.memoizedState,j=i.stateNode,O=j.getSnapshotBeforeUpdate(i.elementType===i.type?me:Mn(i.type,me),dt);j.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var U=i.stateNode.containerInfo;U.nodeType===1?U.textContent="":U.nodeType===9&&U.documentElement&&U.removeChild(U.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ee){lt(i,i.return,ee)}if(n=i.sibling,n!==null){n.return=i.return,ce=n;break}ce=i.return}return pe=dg,dg=!1,pe}function Ua(n,i,a){var c=i.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&n)===n){var p=d.destroy;d.destroy=void 0,p!==void 0&&od(i,a,p)}d=d.next}while(d!==c)}}function Ru(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==i)}}function ad(n){var i=n.ref;if(i!==null){var a=n.stateNode;n.tag,n=a,typeof i=="function"?i(n):i.current=n}}function fg(n){var i=n.alternate;i!==null&&(n.alternate=null,fg(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[rr],delete i[ka],delete i[Ih],delete i[qE],delete i[WE])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function pg(n){return n.tag===5||n.tag===3||n.tag===4}function mg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||pg(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function ld(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(n,i):a.insertBefore(n,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(n,a)):(i=a,i.appendChild(n)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=ru));else if(c!==4&&(n=n.child,n!==null))for(ld(n,i,a),n=n.sibling;n!==null;)ld(n,i,a),n=n.sibling}function ud(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(ud(n,i,a),n=n.sibling;n!==null;)ud(n,i,a),n=n.sibling}var Ot=null,Ln=!1;function ms(n,i,a){for(a=a.child;a!==null;)gg(n,i,a),a=a.sibling}function gg(n,i,a){if(an&&typeof an.onCommitFiberUnmount=="function")try{an.onCommitFiberUnmount(ti,a)}catch{}switch(a.tag){case 5:qt||vo(a,i);case 6:var c=Ot,d=Ln;Ot=null,ms(n,i,a),Ot=c,Ln=d,Ot!==null&&(Ln?(n=Ot,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Ot.removeChild(a.stateNode));break;case 18:Ot!==null&&(Ln?(n=Ot,a=a.stateNode,n.nodeType===8?Th(n.parentNode,a):n.nodeType===1&&Th(n,a),is(n)):Th(Ot,a.stateNode));break;case 4:c=Ot,d=Ln,Ot=a.stateNode.containerInfo,Ln=!0,ms(n,i,a),Ot=c,Ln=d;break;case 0:case 11:case 14:case 15:if(!qt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var p=d,w=p.destroy;p=p.tag,w!==void 0&&((p&2)!==0||(p&4)!==0)&&od(a,i,w),d=d.next}while(d!==c)}ms(n,i,a);break;case 1:if(!qt&&(vo(a,i),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(x){lt(a,i,x)}ms(n,i,a);break;case 21:ms(n,i,a);break;case 22:a.mode&1?(qt=(c=qt)||a.memoizedState!==null,ms(n,i,a),qt=c):ms(n,i,a);break;default:ms(n,i,a)}}function yg(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new a0),i.forEach(function(c){var d=y0.bind(null,n,c);a.has(c)||(a.add(c),c.then(d,d))})}}function bn(n,i){var a=i.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var p=n,w=i,x=w;e:for(;x!==null;){switch(x.tag){case 5:Ot=x.stateNode,Ln=!1;break e;case 3:Ot=x.stateNode.containerInfo,Ln=!0;break e;case 4:Ot=x.stateNode.containerInfo,Ln=!0;break e}x=x.return}if(Ot===null)throw Error(t(160));gg(p,w,d),Ot=null,Ln=!1;var V=d.alternate;V!==null&&(V.return=null),d.return=null}catch(B){lt(d,i,B)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)_g(i,n),i=i.sibling}function _g(n,i){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(bn(i,n),or(n),c&4){try{Ua(3,n,n.return),Ru(3,n)}catch(me){lt(n,n.return,me)}try{Ua(5,n,n.return)}catch(me){lt(n,n.return,me)}}break;case 1:bn(i,n),or(n),c&512&&a!==null&&vo(a,a.return);break;case 5:if(bn(i,n),or(n),c&512&&a!==null&&vo(a,a.return),n.flags&32){var d=n.stateNode;try{Xs(d,"")}catch(me){lt(n,n.return,me)}}if(c&4&&(d=n.stateNode,d!=null)){var p=n.memoizedProps,w=a!==null?a.memoizedProps:p,x=n.type,V=n.updateQueue;if(n.updateQueue=null,V!==null)try{x==="input"&&p.type==="radio"&&p.name!=null&&Li(d,p),Fi(x,w);var B=Fi(x,p);for(w=0;w<V.length;w+=2){var J=V[w],Z=V[w+1];J==="style"?ji(d,Z):J==="dangerouslySetInnerHTML"?xl(d,Z):J==="children"?Xs(d,Z):ie(d,J,Z,B)}switch(x){case"input":Qs(d,p);break;case"textarea":kl(d,p);break;case"select":var Y=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!p.multiple;var le=p.value;le!=null?kn(d,!!p.multiple,le,!1):Y!==!!p.multiple&&(p.defaultValue!=null?kn(d,!!p.multiple,p.defaultValue,!0):kn(d,!!p.multiple,p.multiple?[]:"",!1))}d[ka]=p}catch(me){lt(n,n.return,me)}}break;case 6:if(bn(i,n),or(n),c&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,p=n.memoizedProps;try{d.nodeValue=p}catch(me){lt(n,n.return,me)}}break;case 3:if(bn(i,n),or(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{is(i.containerInfo)}catch(me){lt(n,n.return,me)}break;case 4:bn(i,n),or(n);break;case 13:bn(i,n),or(n),d=n.child,d.flags&8192&&(p=d.memoizedState!==null,d.stateNode.isHidden=p,!p||d.alternate!==null&&d.alternate.memoizedState!==null||(dd=Ze())),c&4&&yg(n);break;case 22:if(J=a!==null&&a.memoizedState!==null,n.mode&1?(qt=(B=qt)||J,bn(i,n),qt=B):bn(i,n),or(n),c&8192){if(B=n.memoizedState!==null,(n.stateNode.isHidden=B)&&!J&&(n.mode&1)!==0)for(ce=n,J=n.child;J!==null;){for(Z=ce=J;ce!==null;){switch(Y=ce,le=Y.child,Y.tag){case 0:case 11:case 14:case 15:Ua(4,Y,Y.return);break;case 1:vo(Y,Y.return);var pe=Y.stateNode;if(typeof pe.componentWillUnmount=="function"){c=Y,a=Y.return;try{i=c,pe.props=i.memoizedProps,pe.state=i.memoizedState,pe.componentWillUnmount()}catch(me){lt(c,a,me)}}break;case 5:vo(Y,Y.return);break;case 22:if(Y.memoizedState!==null){Eg(Z);continue}}le!==null?(le.return=Y,ce=le):Eg(Z)}J=J.sibling}e:for(J=null,Z=n;;){if(Z.tag===5){if(J===null){J=Z;try{d=Z.stateNode,B?(p=d.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(x=Z.stateNode,V=Z.memoizedProps.style,w=V!=null&&V.hasOwnProperty("display")?V.display:null,x.style.display=Xr("display",w))}catch(me){lt(n,n.return,me)}}}else if(Z.tag===6){if(J===null)try{Z.stateNode.nodeValue=B?"":Z.memoizedProps}catch(me){lt(n,n.return,me)}}else if((Z.tag!==22&&Z.tag!==23||Z.memoizedState===null||Z===n)&&Z.child!==null){Z.child.return=Z,Z=Z.child;continue}if(Z===n)break e;for(;Z.sibling===null;){if(Z.return===null||Z.return===n)break e;J===Z&&(J=null),Z=Z.return}J===Z&&(J=null),Z.sibling.return=Z.return,Z=Z.sibling}}break;case 19:bn(i,n),or(n),c&4&&yg(n);break;case 21:break;default:bn(i,n),or(n)}}function or(n){var i=n.flags;if(i&2){try{e:{for(var a=n.return;a!==null;){if(pg(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(Xs(d,""),c.flags&=-33);var p=mg(n);ud(n,p,d);break;case 3:case 4:var w=c.stateNode.containerInfo,x=mg(n);ld(n,x,w);break;default:throw Error(t(161))}}catch(V){lt(n,n.return,V)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function u0(n,i,a){ce=n,vg(n)}function vg(n,i,a){for(var c=(n.mode&1)!==0;ce!==null;){var d=ce,p=d.child;if(d.tag===22&&c){var w=d.memoizedState!==null||Au;if(!w){var x=d.alternate,V=x!==null&&x.memoizedState!==null||qt;x=Au;var B=qt;if(Au=w,(qt=V)&&!B)for(ce=d;ce!==null;)w=ce,V=w.child,w.tag===22&&w.memoizedState!==null?Tg(d):V!==null?(V.return=w,ce=V):Tg(d);for(;p!==null;)ce=p,vg(p),p=p.sibling;ce=d,Au=x,qt=B}wg(n)}else(d.subtreeFlags&8772)!==0&&p!==null?(p.return=d,ce=p):wg(n)}}function wg(n){for(;ce!==null;){var i=ce;if((i.flags&8772)!==0){var a=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:qt||Ru(5,i);break;case 1:var c=i.stateNode;if(i.flags&4&&!qt)if(a===null)c.componentDidMount();else{var d=i.elementType===i.type?a.memoizedProps:Mn(i.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var p=i.updateQueue;p!==null&&Em(i,p,c);break;case 3:var w=i.updateQueue;if(w!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}Em(i,w,a)}break;case 5:var x=i.stateNode;if(a===null&&i.flags&4){a=x;var V=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":V.autoFocus&&a.focus();break;case"img":V.src&&(a.src=V.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var B=i.alternate;if(B!==null){var J=B.memoizedState;if(J!==null){var Z=J.dehydrated;Z!==null&&is(Z)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}qt||i.flags&512&&ad(i)}catch(Y){lt(i,i.return,Y)}}if(i===n){ce=null;break}if(a=i.sibling,a!==null){a.return=i.return,ce=a;break}ce=i.return}}function Eg(n){for(;ce!==null;){var i=ce;if(i===n){ce=null;break}var a=i.sibling;if(a!==null){a.return=i.return,ce=a;break}ce=i.return}}function Tg(n){for(;ce!==null;){var i=ce;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{Ru(4,i)}catch(V){lt(i,a,V)}break;case 1:var c=i.stateNode;if(typeof c.componentDidMount=="function"){var d=i.return;try{c.componentDidMount()}catch(V){lt(i,d,V)}}var p=i.return;try{ad(i)}catch(V){lt(i,p,V)}break;case 5:var w=i.return;try{ad(i)}catch(V){lt(i,w,V)}}}catch(V){lt(i,i.return,V)}if(i===n){ce=null;break}var x=i.sibling;if(x!==null){x.return=i.return,ce=x;break}ce=i.return}}var c0=Math.ceil,Cu=G.ReactCurrentDispatcher,cd=G.ReactCurrentOwner,Rn=G.ReactCurrentBatchConfig,$e=0,Pt=null,yt=null,Mt=0,mn=0,wo=cs(0),It=0,Ba=null,yi=0,Pu=0,hd=0,za=null,nn=null,dd=0,Eo=1/0,Dr=null,ku=!1,fd=null,gs=null,xu=!1,ys=null,Nu=0,$a=0,pd=null,Du=-1,Vu=0;function Xt(){return($e&6)!==0?Ze():Du!==-1?Du:Du=Ze()}function _s(n){return(n.mode&1)===0?1:($e&2)!==0&&Mt!==0?Mt&-Mt:GE.transition!==null?(Vu===0&&(Vu=ca()),Vu):(n=Fe,n!==0||(n=window.event,n=n===void 0?16:Qi(n.type)),n)}function jn(n,i,a,c){if(50<$a)throw $a=0,pd=null,Error(t(185));ii(n,a,c),(($e&2)===0||n!==Pt)&&(n===Pt&&(($e&2)===0&&(Pu|=a),It===4&&vs(n,Mt)),rn(n,c),a===1&&$e===0&&(i.mode&1)===0&&(Eo=Ze()+500,au&&ds()))}function rn(n,i){var a=n.callbackNode;si(n,i);var c=vr(n,n===Pt?Mt:0);if(c===0)a!==null&&zi(a),n.callbackNode=null,n.callbackPriority=0;else if(i=c&-c,n.callbackPriority!==i){if(a!=null&&zi(a),i===1)n.tag===0?HE(Sg.bind(null,n)):um(Sg.bind(null,n)),zE(function(){($e&6)===0&&ds()}),a=null;else{switch(Gn(c)){case 1:a=$i;break;case 4:a=aa;break;case 16:a=ei;break;case 536870912:a=qi;break;default:a=ei}a=Dg(a,Ig.bind(null,n))}n.callbackPriority=i,n.callbackNode=a}}function Ig(n,i){if(Du=-1,Vu=0,($e&6)!==0)throw Error(t(327));var a=n.callbackNode;if(To()&&n.callbackNode!==a)return null;var c=vr(n,n===Pt?Mt:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||i)i=Ou(n,c);else{i=c;var d=$e;$e|=2;var p=Rg();(Pt!==n||Mt!==i)&&(Dr=null,Eo=Ze()+500,vi(n,i));do try{f0();break}catch(x){Ag(n,x)}while(!0);Dh(),Cu.current=p,$e=d,yt!==null?i=0:(Pt=null,Mt=0,i=It)}if(i!==0){if(i===2&&(d=ua(n),d!==0&&(c=d,i=md(n,d))),i===1)throw a=Ba,vi(n,0),vs(n,c),rn(n,Ze()),a;if(i===6)vs(n,c);else{if(d=n.current.alternate,(c&30)===0&&!h0(d)&&(i=Ou(n,c),i===2&&(p=ua(n),p!==0&&(c=p,i=md(n,p))),i===1))throw a=Ba,vi(n,0),vs(n,c),rn(n,Ze()),a;switch(n.finishedWork=d,n.finishedLanes=c,i){case 0:case 1:throw Error(t(345));case 2:wi(n,nn,Dr);break;case 3:if(vs(n,c),(c&130023424)===c&&(i=dd+500-Ze(),10<i)){if(vr(n,0)!==0)break;if(d=n.suspendedLanes,(d&c)!==c){Xt(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=Eh(wi.bind(null,n,nn,Dr),i);break}wi(n,nn,Dr);break;case 4:if(vs(n,c),(c&4194240)===c)break;for(i=n.eventTimes,d=-1;0<c;){var w=31-ln(c);p=1<<w,w=i[w],w>d&&(d=w),c&=~p}if(c=d,c=Ze()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*c0(c/1960))-c,10<c){n.timeoutHandle=Eh(wi.bind(null,n,nn,Dr),c);break}wi(n,nn,Dr);break;case 5:wi(n,nn,Dr);break;default:throw Error(t(329))}}}return rn(n,Ze()),n.callbackNode===a?Ig.bind(null,n):null}function md(n,i){var a=za;return n.current.memoizedState.isDehydrated&&(vi(n,i).flags|=256),n=Ou(n,i),n!==2&&(i=nn,nn=a,i!==null&&gd(i)),n}function gd(n){nn===null?nn=n:nn.push.apply(nn,n)}function h0(n){for(var i=n;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],p=d.getSnapshot;d=d.value;try{if(!Vn(p(),d))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function vs(n,i){for(i&=~hd,i&=~Pu,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var a=31-ln(i),c=1<<a;n[a]=-1,i&=~c}}function Sg(n){if(($e&6)!==0)throw Error(t(327));To();var i=vr(n,0);if((i&1)===0)return rn(n,Ze()),null;var a=Ou(n,i);if(n.tag!==0&&a===2){var c=ua(n);c!==0&&(i=c,a=md(n,c))}if(a===1)throw a=Ba,vi(n,0),vs(n,i),rn(n,Ze()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,wi(n,nn,Dr),rn(n,Ze()),null}function yd(n,i){var a=$e;$e|=1;try{return n(i)}finally{$e=a,$e===0&&(Eo=Ze()+500,au&&ds())}}function _i(n){ys!==null&&ys.tag===0&&($e&6)===0&&To();var i=$e;$e|=1;var a=Rn.transition,c=Fe;try{if(Rn.transition=null,Fe=1,n)return n()}finally{Fe=c,Rn.transition=a,$e=i,($e&6)===0&&ds()}}function _d(){mn=wo.current,tt(wo)}function vi(n,i){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,BE(a)),yt!==null)for(a=yt.return;a!==null;){var c=a;switch(Ch(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&iu();break;case 3:yo(),tt(Zt),tt(Bt),Uh();break;case 5:jh(c);break;case 4:yo();break;case 13:tt(st);break;case 19:tt(st);break;case 10:Vh(c.type._context);break;case 22:case 23:_d()}a=a.return}if(Pt=n,yt=n=ws(n.current,null),Mt=mn=i,It=0,Ba=null,hd=Pu=yi=0,nn=za=null,pi!==null){for(i=0;i<pi.length;i++)if(a=pi[i],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,p=a.pending;if(p!==null){var w=p.next;p.next=d,c.next=w}a.pending=c}pi=null}return n}function Ag(n,i){do{var a=yt;try{if(Dh(),yu.current=Eu,_u){for(var c=it.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}_u=!1}if(gi=0,Ct=Tt=it=null,Ma=!1,La=0,cd.current=null,a===null||a.return===null){It=1,Ba=i,yt=null;break}e:{var p=n,w=a.return,x=a,V=i;if(i=Mt,x.flags|=32768,V!==null&&typeof V=="object"&&typeof V.then=="function"){var B=V,J=x,Z=J.tag;if((J.mode&1)===0&&(Z===0||Z===11||Z===15)){var Y=J.alternate;Y?(J.updateQueue=Y.updateQueue,J.memoizedState=Y.memoizedState,J.lanes=Y.lanes):(J.updateQueue=null,J.memoizedState=null)}var le=Xm(w);if(le!==null){le.flags&=-257,Ym(le,w,x,p,i),le.mode&1&&Qm(p,B,i),i=le,V=B;var pe=i.updateQueue;if(pe===null){var me=new Set;me.add(V),i.updateQueue=me}else pe.add(V);break e}else{if((i&1)===0){Qm(p,B,i),vd();break e}V=Error(t(426))}}else if(rt&&x.mode&1){var dt=Xm(w);if(dt!==null){(dt.flags&65536)===0&&(dt.flags|=256),Ym(dt,w,x,p,i),xh(_o(V,x));break e}}p=V=_o(V,x),It!==4&&(It=2),za===null?za=[p]:za.push(p),p=w;do{switch(p.tag){case 3:p.flags|=65536,i&=-i,p.lanes|=i;var j=Gm(p,V,i);wm(p,j);break e;case 1:x=V;var O=p.type,U=p.stateNode;if((p.flags&128)===0&&(typeof O.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(gs===null||!gs.has(U)))){p.flags|=65536,i&=-i,p.lanes|=i;var ee=Km(p,x,i);wm(p,ee);break e}}p=p.return}while(p!==null)}Pg(a)}catch(ge){i=ge,yt===a&&a!==null&&(yt=a=a.return);continue}break}while(!0)}function Rg(){var n=Cu.current;return Cu.current=Eu,n===null?Eu:n}function vd(){(It===0||It===3||It===2)&&(It=4),Pt===null||(yi&268435455)===0&&(Pu&268435455)===0||vs(Pt,Mt)}function Ou(n,i){var a=$e;$e|=2;var c=Rg();(Pt!==n||Mt!==i)&&(Dr=null,vi(n,i));do try{d0();break}catch(d){Ag(n,d)}while(!0);if(Dh(),$e=a,Cu.current=c,yt!==null)throw Error(t(261));return Pt=null,Mt=0,It}function d0(){for(;yt!==null;)Cg(yt)}function f0(){for(;yt!==null&&!Zs();)Cg(yt)}function Cg(n){var i=Ng(n.alternate,n,mn);n.memoizedProps=n.pendingProps,i===null?Pg(n):yt=i,cd.current=null}function Pg(n){var i=n;do{var a=i.alternate;if(n=i.return,(i.flags&32768)===0){if(a=i0(a,i,mn),a!==null){yt=a;return}}else{if(a=o0(a,i),a!==null){a.flags&=32767,yt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{It=6,yt=null;return}}if(i=i.sibling,i!==null){yt=i;return}yt=i=n}while(i!==null);It===0&&(It=5)}function wi(n,i,a){var c=Fe,d=Rn.transition;try{Rn.transition=null,Fe=1,p0(n,i,a,c)}finally{Rn.transition=d,Fe=c}return null}function p0(n,i,a,c){do To();while(ys!==null);if(($e&6)!==0)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var p=a.lanes|a.childLanes;if(ih(n,p),n===Pt&&(yt=Pt=null,Mt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||xu||(xu=!0,Dg(ei,function(){return To(),null})),p=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||p){p=Rn.transition,Rn.transition=null;var w=Fe;Fe=1;var x=$e;$e|=4,cd.current=null,l0(n,a),_g(a,n),OE(vh),Tr=!!_h,vh=_h=null,n.current=a,u0(a),_r(),$e=x,Fe=w,Rn.transition=p}else n.current=a;if(xu&&(xu=!1,ys=n,Nu=d),p=n.pendingLanes,p===0&&(gs=null),Bl(a.stateNode),rn(n,Ze()),i!==null)for(c=n.onRecoverableError,a=0;a<i.length;a++)d=i[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(ku)throw ku=!1,n=fd,fd=null,n;return(Nu&1)!==0&&n.tag!==0&&To(),p=n.pendingLanes,(p&1)!==0?n===pd?$a++:($a=0,pd=n):$a=0,ds(),null}function To(){if(ys!==null){var n=Gn(Nu),i=Rn.transition,a=Fe;try{if(Rn.transition=null,Fe=16>n?16:n,ys===null)var c=!1;else{if(n=ys,ys=null,Nu=0,($e&6)!==0)throw Error(t(331));var d=$e;for($e|=4,ce=n.current;ce!==null;){var p=ce,w=p.child;if((ce.flags&16)!==0){var x=p.deletions;if(x!==null){for(var V=0;V<x.length;V++){var B=x[V];for(ce=B;ce!==null;){var J=ce;switch(J.tag){case 0:case 11:case 15:Ua(8,J,p)}var Z=J.child;if(Z!==null)Z.return=J,ce=Z;else for(;ce!==null;){J=ce;var Y=J.sibling,le=J.return;if(fg(J),J===B){ce=null;break}if(Y!==null){Y.return=le,ce=Y;break}ce=le}}}var pe=p.alternate;if(pe!==null){var me=pe.child;if(me!==null){pe.child=null;do{var dt=me.sibling;me.sibling=null,me=dt}while(me!==null)}}ce=p}}if((p.subtreeFlags&2064)!==0&&w!==null)w.return=p,ce=w;else e:for(;ce!==null;){if(p=ce,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:Ua(9,p,p.return)}var j=p.sibling;if(j!==null){j.return=p.return,ce=j;break e}ce=p.return}}var O=n.current;for(ce=O;ce!==null;){w=ce;var U=w.child;if((w.subtreeFlags&2064)!==0&&U!==null)U.return=w,ce=U;else e:for(w=O;ce!==null;){if(x=ce,(x.flags&2048)!==0)try{switch(x.tag){case 0:case 11:case 15:Ru(9,x)}}catch(ge){lt(x,x.return,ge)}if(x===w){ce=null;break e}var ee=x.sibling;if(ee!==null){ee.return=x.return,ce=ee;break e}ce=x.return}}if($e=d,ds(),an&&typeof an.onPostCommitFiberRoot=="function")try{an.onPostCommitFiberRoot(ti,n)}catch{}c=!0}return c}finally{Fe=a,Rn.transition=i}}return!1}function kg(n,i,a){i=_o(a,i),i=Gm(n,i,1),n=ps(n,i,1),i=Xt(),n!==null&&(ii(n,1,i),rn(n,i))}function lt(n,i,a){if(n.tag===3)kg(n,n,a);else for(;i!==null;){if(i.tag===3){kg(i,n,a);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(gs===null||!gs.has(c))){n=_o(a,n),n=Km(i,n,1),i=ps(i,n,1),n=Xt(),i!==null&&(ii(i,1,n),rn(i,n));break}}i=i.return}}function m0(n,i,a){var c=n.pingCache;c!==null&&c.delete(i),i=Xt(),n.pingedLanes|=n.suspendedLanes&a,Pt===n&&(Mt&a)===a&&(It===4||It===3&&(Mt&130023424)===Mt&&500>Ze()-dd?vi(n,0):hd|=a),rn(n,i)}function xg(n,i){i===0&&((n.mode&1)===0?i=1:(i=ns,ns<<=1,(ns&130023424)===0&&(ns=4194304)));var a=Xt();n=kr(n,i),n!==null&&(ii(n,i,a),rn(n,a))}function g0(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),xg(n,a)}function y0(n,i){var a=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(i),xg(n,a)}var Ng;Ng=function(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps||Zt.current)tn=!0;else{if((n.lanes&a)===0&&(i.flags&128)===0)return tn=!1,s0(n,i,a);tn=(n.flags&131072)!==0}else tn=!1,rt&&(i.flags&1048576)!==0&&cm(i,uu,i.index);switch(i.lanes=0,i.tag){case 2:var c=i.type;Su(n,i),n=i.pendingProps;var d=uo(i,Bt.current);go(i,a),d=$h(null,i,c,n,d,a);var p=qh();return i.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,en(c)?(p=!0,ou(i)):p=!1,i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Lh(i),d.updater=Tu,i.stateNode=d,d._reactInternals=i,Xh(i,c,n,a),i=ed(null,i,c,!0,p,a)):(i.tag=0,rt&&p&&Rh(i),Qt(null,i,d,a),i=i.child),i;case 16:c=i.elementType;e:{switch(Su(n,i),n=i.pendingProps,d=c._init,c=d(c._payload),i.type=c,d=i.tag=v0(c),n=Mn(c,n),d){case 0:i=Zh(null,i,c,n,a);break e;case 1:i=rg(null,i,c,n,a);break e;case 11:i=Jm(null,i,c,n,a);break e;case 14:i=Zm(null,i,c,Mn(c.type,n),a);break e}throw Error(t(306,c,""))}return i;case 0:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:Mn(c,d),Zh(n,i,c,d,a);case 1:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:Mn(c,d),rg(n,i,c,d,a);case 3:e:{if(sg(i),n===null)throw Error(t(387));c=i.pendingProps,p=i.memoizedState,d=p.element,vm(n,i),mu(i,c,null,a);var w=i.memoizedState;if(c=w.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){d=_o(Error(t(423)),i),i=ig(n,i,c,a,d);break e}else if(c!==d){d=_o(Error(t(424)),i),i=ig(n,i,c,a,d);break e}else for(pn=us(i.stateNode.containerInfo.firstChild),fn=i,rt=!0,On=null,a=ym(i,null,c,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(fo(),c===d){i=Nr(n,i,a);break e}Qt(n,i,c,a)}i=i.child}return i;case 5:return Tm(i),n===null&&kh(i),c=i.type,d=i.pendingProps,p=n!==null?n.memoizedProps:null,w=d.children,wh(c,d)?w=null:p!==null&&wh(c,p)&&(i.flags|=32),ng(n,i),Qt(n,i,w,a),i.child;case 6:return n===null&&kh(i),null;case 13:return og(n,i,a);case 4:return bh(i,i.stateNode.containerInfo),c=i.pendingProps,n===null?i.child=po(i,null,c,a):Qt(n,i,c,a),i.child;case 11:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:Mn(c,d),Jm(n,i,c,d,a);case 7:return Qt(n,i,i.pendingProps,a),i.child;case 8:return Qt(n,i,i.pendingProps.children,a),i.child;case 12:return Qt(n,i,i.pendingProps.children,a),i.child;case 10:e:{if(c=i.type._context,d=i.pendingProps,p=i.memoizedProps,w=d.value,Je(du,c._currentValue),c._currentValue=w,p!==null)if(Vn(p.value,w)){if(p.children===d.children&&!Zt.current){i=Nr(n,i,a);break e}}else for(p=i.child,p!==null&&(p.return=i);p!==null;){var x=p.dependencies;if(x!==null){w=p.child;for(var V=x.firstContext;V!==null;){if(V.context===c){if(p.tag===1){V=xr(-1,a&-a),V.tag=2;var B=p.updateQueue;if(B!==null){B=B.shared;var J=B.pending;J===null?V.next=V:(V.next=J.next,J.next=V),B.pending=V}}p.lanes|=a,V=p.alternate,V!==null&&(V.lanes|=a),Oh(p.return,a,i),x.lanes|=a;break}V=V.next}}else if(p.tag===10)w=p.type===i.type?null:p.child;else if(p.tag===18){if(w=p.return,w===null)throw Error(t(341));w.lanes|=a,x=w.alternate,x!==null&&(x.lanes|=a),Oh(w,a,i),w=p.sibling}else w=p.child;if(w!==null)w.return=p;else for(w=p;w!==null;){if(w===i){w=null;break}if(p=w.sibling,p!==null){p.return=w.return,w=p;break}w=w.return}p=w}Qt(n,i,d.children,a),i=i.child}return i;case 9:return d=i.type,c=i.pendingProps.children,go(i,a),d=Sn(d),c=c(d),i.flags|=1,Qt(n,i,c,a),i.child;case 14:return c=i.type,d=Mn(c,i.pendingProps),d=Mn(c.type,d),Zm(n,i,c,d,a);case 15:return eg(n,i,i.type,i.pendingProps,a);case 17:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:Mn(c,d),Su(n,i),i.tag=1,en(c)?(n=!0,ou(i)):n=!1,go(i,a),Wm(i,c,d),Xh(i,c,d,a),ed(null,i,c,!0,n,a);case 19:return lg(n,i,a);case 22:return tg(n,i,a)}throw Error(t(156,i.tag))};function Dg(n,i){return oa(n,i)}function _0(n,i,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cn(n,i,a,c){return new _0(n,i,a,c)}function wd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function v0(n){if(typeof n=="function")return wd(n)?1:0;if(n!=null){if(n=n.$$typeof,n===N)return 11;if(n===Oe)return 14}return 2}function ws(n,i){var a=n.alternate;return a===null?(a=Cn(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Mu(n,i,a,c,d,p){var w=2;if(c=n,typeof n=="function")wd(n)&&(w=1);else if(typeof n=="string")w=5;else e:switch(n){case I:return Ei(a.children,d,p,i);case S:w=8,d|=8;break;case C:return n=Cn(12,a,i,d|2),n.elementType=C,n.lanes=p,n;case k:return n=Cn(13,a,i,d),n.elementType=k,n.lanes=p,n;case de:return n=Cn(19,a,i,d),n.elementType=de,n.lanes=p,n;case Pe:return Lu(a,d,p,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case D:w=10;break e;case P:w=9;break e;case N:w=11;break e;case Oe:w=14;break e;case qe:w=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return i=Cn(w,a,i,d),i.elementType=n,i.type=c,i.lanes=p,i}function Ei(n,i,a,c){return n=Cn(7,n,c,i),n.lanes=a,n}function Lu(n,i,a,c){return n=Cn(22,n,c,i),n.elementType=Pe,n.lanes=a,n.stateNode={isHidden:!1},n}function Ed(n,i,a){return n=Cn(6,n,null,i),n.lanes=a,n}function Td(n,i,a){return i=Cn(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function w0(n,i,a,c,d){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ha(0),this.expirationTimes=ha(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ha(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Id(n,i,a,c,d,p,w,x,V){return n=new w0(n,i,a,x,V),i===1?(i=1,p===!0&&(i|=8)):i=0,p=Cn(3,null,null,i),n.current=p,p.stateNode=n,p.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lh(p),n}function E0(n,i,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Q,key:c==null?null:""+c,children:n,containerInfo:i,implementation:a}}function Vg(n){if(!n)return hs;n=n._reactInternals;e:{if(Nn(n)!==n||n.tag!==1)throw Error(t(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(en(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(en(a))return am(n,a,i)}return i}function Og(n,i,a,c,d,p,w,x,V){return n=Id(a,c,!0,n,d,p,w,x,V),n.context=Vg(null),a=n.current,c=Xt(),d=_s(a),p=xr(c,d),p.callback=i??null,ps(a,p,d),n.current.lanes=d,ii(n,d,c),rn(n,c),n}function bu(n,i,a,c){var d=i.current,p=Xt(),w=_s(d);return a=Vg(a),i.context===null?i.context=a:i.pendingContext=a,i=xr(p,w),i.payload={element:n},c=c===void 0?null:c,c!==null&&(i.callback=c),n=ps(d,i,w),n!==null&&(jn(n,d,w,p),pu(n,d,w)),w}function ju(n){return n=n.current,n.child?(n.child.tag===5,n.child.stateNode):null}function Mg(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function Sd(n,i){Mg(n,i),(n=n.alternate)&&Mg(n,i)}function T0(){return null}var Lg=typeof reportError=="function"?reportError:function(n){console.error(n)};function Ad(n){this._internalRoot=n}Fu.prototype.render=Ad.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(t(409));bu(n,i,null,null)},Fu.prototype.unmount=Ad.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;_i(function(){bu(null,n,null,null)}),i[Ar]=null}};function Fu(n){this._internalRoot=n}Fu.prototype.unstable_scheduleHydration=function(n){if(n){var i=ma();n={blockedOn:null,target:n,priority:i};for(var a=0;a<un.length&&i!==0&&i<un[a].priority;a++);un.splice(a,0,n),a===0&&Gi(n)}};function Rd(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Uu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function bg(){}function I0(n,i,a,c,d){if(d){if(typeof c=="function"){var p=c;c=function(){var B=ju(w);p.call(B)}}var w=Og(i,c,n,0,null,!1,!1,"",bg);return n._reactRootContainer=w,n[Ar]=w.current,Ca(n.nodeType===8?n.parentNode:n),_i(),w}for(;d=n.lastChild;)n.removeChild(d);if(typeof c=="function"){var x=c;c=function(){var B=ju(V);x.call(B)}}var V=Id(n,0,!1,null,null,!1,!1,"",bg);return n._reactRootContainer=V,n[Ar]=V.current,Ca(n.nodeType===8?n.parentNode:n),_i(function(){bu(i,V,a,c)}),V}function Bu(n,i,a,c,d){var p=a._reactRootContainer;if(p){var w=p;if(typeof d=="function"){var x=d;d=function(){var V=ju(w);x.call(V)}}bu(i,w,n,d)}else w=I0(a,i,n,d,c);return ju(w)}fa=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var a=He(i.pendingLanes);a!==0&&(da(i,a|1),rn(i,Ze()),($e&6)===0&&(Eo=Ze()+500,ds()))}break;case 13:_i(function(){var c=kr(n,1);if(c!==null){var d=Xt();jn(c,n,1,d)}}),Sd(n,1)}},Wi=function(n){if(n.tag===13){var i=kr(n,134217728);if(i!==null){var a=Xt();jn(i,n,134217728,a)}Sd(n,134217728)}},pa=function(n){if(n.tag===13){var i=_s(n),a=kr(n,i);if(a!==null){var c=Xt();jn(a,n,i,c)}Sd(n,i)}},ma=function(){return Fe},ga=function(n,i){var a=Fe;try{return Fe=n,i()}finally{Fe=a}},mr=function(n,i,a){switch(i){case"input":if(Qs(n,a),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var c=a[i];if(c!==n&&c.form===n.form){var d=su(c);if(!d)throw Error(t(90));Yo(c),Qs(c,d)}}}break;case"textarea":kl(n,a);break;case"select":i=a.value,i!=null&&kn(n,!!a.multiple,i,!1)}},Dl=yd,Vl=_i;var S0={usingClientEntryPoint:!1,Events:[xa,ao,su,Jr,Zr,yd]},qa={findFiberByHostInstance:ci,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},A0={bundleType:qa.bundleType,version:qa.version,rendererPackageName:qa.rendererPackageName,rendererConfig:qa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:G.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Ul(n),n===null?null:n.stateNode},findFiberByHostInstance:qa.findFiberByHostInstance||T0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zu.isDisabled&&zu.supportsFiber)try{ti=zu.inject(A0),an=zu}catch{}}return sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=S0,sn.createPortal=function(n,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Rd(i))throw Error(t(200));return E0(n,i,null,a)},sn.createRoot=function(n,i){if(!Rd(n))throw Error(t(299));var a=!1,c="",d=Lg;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onRecoverableError!==void 0&&(d=i.onRecoverableError)),i=Id(n,1,!1,null,null,a,!1,c,d),n[Ar]=i.current,Ca(n.nodeType===8?n.parentNode:n),new Ad(i)},sn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Ul(i),n=n===null?null:n.stateNode,n},sn.flushSync=function(n){return _i(n)},sn.hydrate=function(n,i,a){if(!Uu(i))throw Error(t(200));return Bu(null,n,i,!0,a)},sn.hydrateRoot=function(n,i,a){if(!Rd(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,p="",w=Lg;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),i=Og(i,null,n,1,a??null,d,!1,p,w),n[Ar]=i.current,Ca(n),c)for(n=0;n<c.length;n++)a=c[n],d=a._getVersion,d=d(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,d]:i.mutableSourceEagerHydrationData.push(a,d);return new Fu(i)},sn.render=function(n,i,a){if(!Uu(i))throw Error(t(200));return Bu(null,n,i,!1,a)},sn.unmountComponentAtNode=function(n){if(!Uu(n))throw Error(t(40));return n._reactRootContainer?(_i(function(){Bu(null,null,n,!1,function(){n._reactRootContainer=null,n[Ar]=null})}),!0):!1},sn.unstable_batchedUpdates=yd,sn.unstable_renderSubtreeIntoContainer=function(n,i,a,c){if(!Uu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Bu(n,i,a,!1,c)},sn.version="18.3.1-next-f1338f8080-20240426",sn}var Wg;function L_(){if(Wg)return kd.exports;Wg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),kd.exports=O0(),kd.exports}var Hg;function M0(){if(Hg)return $u;Hg=1;var r=L_();return $u.createRoot=r.createRoot,$u.hydrateRoot=r.hydrateRoot,$u}var L0=M0();const b0=M_(L0);L_();function nl(){return nl=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},nl.apply(this,arguments)}var Rs;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(Rs||(Rs={}));const Gg="popstate";function j0(r){r===void 0&&(r={});function e(o,l){let{pathname:h="/",search:f="",hash:g=""}=Di(o.location.hash.substr(1));return!h.startsWith("/")&&!h.startsWith(".")&&(h="/"+h),Kd("",{pathname:h,search:f,hash:g},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(o,l){let h=o.document.querySelector("base"),f="";if(h&&h.getAttribute("href")){let g=o.location.href,y=g.indexOf("#");f=y===-1?g:g.slice(0,y)}return f+"#"+(typeof l=="string"?l:ac(l))}function s(o,l){Dc(o.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(l)+")")}return U0(e,t,s,r)}function pt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Dc(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function F0(){return Math.random().toString(36).substr(2,8)}function Kg(r,e){return{usr:r.state,key:r.key,idx:e}}function Kd(r,e,t,s){return t===void 0&&(t=null),nl({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?Di(e):e,{state:t,key:e&&e.key||s||F0()})}function ac(r){let{pathname:e="/",search:t="",hash:s=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function Di(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let s=r.indexOf("?");s>=0&&(e.search=r.substr(s),r=r.substr(0,s)),r&&(e.pathname=r)}return e}function U0(r,e,t,s){s===void 0&&(s={});let{window:o=document.defaultView,v5Compat:l=!1}=s,h=o.history,f=Rs.Pop,g=null,y=E();y==null&&(y=0,h.replaceState(nl({},h.state,{idx:y}),""));function E(){return(h.state||{idx:null}).idx}function v(){f=Rs.Pop;let b=E(),re=b==null?null:b-y;y=b,g&&g({action:f,location:$.location,delta:re})}function R(b,re){f=Rs.Push;let se=Kd($.location,b,re);t&&t(se,b),y=E()+1;let ie=Kg(se,y),G=$.createHref(se);try{h.pushState(ie,"",G)}catch(ae){if(ae instanceof DOMException&&ae.name==="DataCloneError")throw ae;o.location.assign(G)}l&&g&&g({action:f,location:$.location,delta:1})}function M(b,re){f=Rs.Replace;let se=Kd($.location,b,re);t&&t(se,b),y=E();let ie=Kg(se,y),G=$.createHref(se);h.replaceState(ie,"",G),l&&g&&g({action:f,location:$.location,delta:0})}function q(b){let re=o.location.origin!=="null"?o.location.origin:o.location.href,se=typeof b=="string"?b:ac(b);return se=se.replace(/ $/,"%20"),pt(re,"No window.location.(origin|href) available to create URL for href: "+se),new URL(se,re)}let $={get action(){return f},get location(){return r(o,h)},listen(b){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(Gg,v),g=b,()=>{o.removeEventListener(Gg,v),g=null}},createHref(b){return e(o,b)},createURL:q,encodeLocation(b){let re=q(b);return{pathname:re.pathname,search:re.search,hash:re.hash}},push:R,replace:M,go(b){return h.go(b)}};return $}var Qg;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(Qg||(Qg={}));function B0(r,e,t){return t===void 0&&(t="/"),z0(r,e,t)}function z0(r,e,t,s){let o=typeof e=="string"?Di(e):e,l=Sf(o.pathname||"/",t);if(l==null)return null;let h=b_(r);$0(h);let f=null;for(let g=0;f==null&&g<h.length;++g){let y=tT(l);f=J0(h[g],y)}return f}function b_(r,e,t,s){e===void 0&&(e=[]),t===void 0&&(t=[]),s===void 0&&(s="");let o=(l,h,f)=>{let g={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};g.relativePath.startsWith("/")&&(pt(g.relativePath.startsWith(s),'Absolute route path "'+g.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),g.relativePath=g.relativePath.slice(s.length));let y=ks([s,g.relativePath]),E=t.concat(g);l.children&&l.children.length>0&&(pt(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+y+'".')),b_(l.children,e,E,y)),!(l.path==null&&!l.index)&&e.push({path:y,score:X0(y,l.index),routesMeta:E})};return r.forEach((l,h)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))o(l,h);else for(let g of j_(l.path))o(l,h,g)}),e}function j_(r){let e=r.split("/");if(e.length===0)return[];let[t,...s]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(s.length===0)return o?[l,""]:[l];let h=j_(s.join("/")),f=[];return f.push(...h.map(g=>g===""?l:[l,g].join("/"))),o&&f.push(...h),f.map(g=>r.startsWith("/")&&g===""?"/":g)}function $0(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:Y0(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}const q0=/^:[\w-]+$/,W0=3,H0=2,G0=1,K0=10,Q0=-2,Xg=r=>r==="*";function X0(r,e){let t=r.split("/"),s=t.length;return t.some(Xg)&&(s+=Q0),e&&(s+=H0),t.filter(o=>!Xg(o)).reduce((o,l)=>o+(q0.test(l)?W0:l===""?G0:K0),s)}function Y0(r,e){return r.length===e.length&&r.slice(0,-1).every((s,o)=>s===e[o])?r[r.length-1]-e[e.length-1]:0}function J0(r,e,t){let{routesMeta:s}=r,o={},l="/",h=[];for(let f=0;f<s.length;++f){let g=s[f],y=f===s.length-1,E=l==="/"?e:e.slice(l.length)||"/",v=Z0({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},E),R=g.route;if(!v)return null;Object.assign(o,v.params),h.push({params:o,pathname:ks([l,v.pathname]),pathnameBase:oT(ks([l,v.pathnameBase])),route:R}),v.pathnameBase!=="/"&&(l=ks([l,v.pathnameBase]))}return h}function Z0(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,s]=eT(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let l=o[0],h=l.replace(/(.)\/+$/,"$1"),f=o.slice(1);return{params:s.reduce((y,E,v)=>{let{paramName:R,isOptional:M}=E;if(R==="*"){let $=f[v]||"";h=l.slice(0,l.length-$.length).replace(/(.)\/+$/,"$1")}const q=f[v];return M&&!q?y[R]=void 0:y[R]=(q||"").replace(/%2F/g,"/"),y},{}),pathname:l,pathnameBase:h,pattern:r}}function eT(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Dc(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,f,g)=>(s.push({paramName:f,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(s.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function tT(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Dc(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function Sf(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=r.charAt(t);return s&&s!=="/"?null:r.slice(t)||"/"}const nT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rT=r=>nT.test(r);function sT(r,e){e===void 0&&(e="/");let{pathname:t,search:s="",hash:o=""}=typeof r=="string"?Di(r):r,l;if(t)if(rT(t))l=t;else{if(t.includes("//")){let h=t;t=t.replace(/\/\/+/g,"/"),Dc(!1,"Pathnames cannot have embedded double slashes - normalizing "+(h+" -> "+t))}t.startsWith("/")?l=Yg(t.substring(1),"/"):l=Yg(t,e)}else l=e;return{pathname:l,search:aT(s),hash:lT(o)}}function Yg(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Dd(r,e,t,s){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function iT(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Af(r,e){let t=iT(r);return e?t.map((s,o)=>o===t.length-1?s.pathname:s.pathnameBase):t.map(s=>s.pathnameBase)}function Rf(r,e,t,s){s===void 0&&(s=!1);let o;typeof r=="string"?o=Di(r):(o=nl({},r),pt(!o.pathname||!o.pathname.includes("?"),Dd("?","pathname","search",o)),pt(!o.pathname||!o.pathname.includes("#"),Dd("#","pathname","hash",o)),pt(!o.search||!o.search.includes("#"),Dd("#","search","hash",o)));let l=r===""||o.pathname==="",h=l?"/":o.pathname,f;if(h==null)f=t;else{let v=e.length-1;if(!s&&h.startsWith("..")){let R=h.split("/");for(;R[0]==="..";)R.shift(),v-=1;o.pathname=R.join("/")}f=v>=0?e[v]:"/"}let g=sT(o,f),y=h&&h!=="/"&&h.endsWith("/"),E=(l||h===".")&&t.endsWith("/");return!g.pathname.endsWith("/")&&(y||E)&&(g.pathname+="/"),g}const ks=r=>r.join("/").replace(/\/\/+/g,"/"),oT=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),aT=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,lT=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function uT(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const F_=["post","put","patch","delete"];new Set(F_);const cT=["get",...F_];new Set(cT);function rl(){return rl=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},rl.apply(this,arguments)}const Cf=he.createContext(null),hT=he.createContext(null),$s=he.createContext(null),Vc=he.createContext(null),qr=he.createContext({outlet:null,matches:[],isDataRoute:!1}),U_=he.createContext(null);function dT(r,e){let{relative:t}=e===void 0?{}:e;zo()||pt(!1);let{basename:s,navigator:o}=he.useContext($s),{hash:l,pathname:h,search:f}=z_(r,{relative:t}),g=h;return s!=="/"&&(g=h==="/"?s:ks([s,h])),o.createHref({pathname:g,search:f,hash:l})}function zo(){return he.useContext(Vc)!=null}function fl(){return zo()||pt(!1),he.useContext(Vc).location}function B_(r){he.useContext($s).static||he.useLayoutEffect(r)}function Oc(){let{isDataRoute:r}=he.useContext(qr);return r?RT():fT()}function fT(){zo()||pt(!1);let r=he.useContext(Cf),{basename:e,future:t,navigator:s}=he.useContext($s),{matches:o}=he.useContext(qr),{pathname:l}=fl(),h=JSON.stringify(Af(o,t.v7_relativeSplatPath)),f=he.useRef(!1);return B_(()=>{f.current=!0}),he.useCallback(function(y,E){if(E===void 0&&(E={}),!f.current)return;if(typeof y=="number"){s.go(y);return}let v=Rf(y,JSON.parse(h),l,E.relative==="path");r==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:ks([e,v.pathname])),(E.replace?s.replace:s.push)(v,E.state,E)},[e,s,h,l,r])}function pT(){let{matches:r}=he.useContext(qr),e=r[r.length-1];return e?e.params:{}}function z_(r,e){let{relative:t}=e===void 0?{}:e,{future:s}=he.useContext($s),{matches:o}=he.useContext(qr),{pathname:l}=fl(),h=JSON.stringify(Af(o,s.v7_relativeSplatPath));return he.useMemo(()=>Rf(r,JSON.parse(h),l,t==="path"),[r,h,l,t])}function mT(r,e){return gT(r,e)}function gT(r,e,t,s){zo()||pt(!1);let{navigator:o}=he.useContext($s),{matches:l}=he.useContext(qr),h=l[l.length-1],f=h?h.params:{};h&&h.pathname;let g=h?h.pathnameBase:"/";h&&h.route;let y=fl(),E;if(e){var v;let b=typeof e=="string"?Di(e):e;g==="/"||(v=b.pathname)!=null&&v.startsWith(g)||pt(!1),E=b}else E=y;let R=E.pathname||"/",M=R;if(g!=="/"){let b=g.replace(/^\//,"").split("/");M="/"+R.replace(/^\//,"").split("/").slice(b.length).join("/")}let q=B0(r,{pathname:M}),$=ET(q&&q.map(b=>Object.assign({},b,{params:Object.assign({},f,b.params),pathname:ks([g,o.encodeLocation?o.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?g:ks([g,o.encodeLocation?o.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),l,t,s);return e&&$?he.createElement(Vc.Provider,{value:{location:rl({pathname:"/",search:"",hash:"",state:null,key:"default"},E),navigationType:Rs.Pop}},$):$}function yT(){let r=AT(),e=uT(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return he.createElement(he.Fragment,null,he.createElement("h2",null,"Unexpected Application Error!"),he.createElement("h3",{style:{fontStyle:"italic"}},e),t?he.createElement("pre",{style:o},t):null,null)}const _T=he.createElement(yT,null);class vT extends he.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?he.createElement(qr.Provider,{value:this.props.routeContext},he.createElement(U_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function wT(r){let{routeContext:e,match:t,children:s}=r,o=he.useContext(Cf);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),he.createElement(qr.Provider,{value:e},s)}function ET(r,e,t,s){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),s===void 0&&(s=null),r==null){var l;if(!t)return null;if(t.errors)r=t.matches;else if((l=s)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let h=r,f=(o=t)==null?void 0:o.errors;if(f!=null){let E=h.findIndex(v=>v.route.id&&f?.[v.route.id]!==void 0);E>=0||pt(!1),h=h.slice(0,Math.min(h.length,E+1))}let g=!1,y=-1;if(t&&s&&s.v7_partialHydration)for(let E=0;E<h.length;E++){let v=h[E];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(y=E),v.route.id){let{loaderData:R,errors:M}=t,q=v.route.loader&&R[v.route.id]===void 0&&(!M||M[v.route.id]===void 0);if(v.route.lazy||q){g=!0,y>=0?h=h.slice(0,y+1):h=[h[0]];break}}}return h.reduceRight((E,v,R)=>{let M,q=!1,$=null,b=null;t&&(M=f&&v.route.id?f[v.route.id]:void 0,$=v.route.errorElement||_T,g&&(y<0&&R===0?(CT("route-fallback"),q=!0,b=null):y===R&&(q=!0,b=v.route.hydrateFallbackElement||null)));let re=e.concat(h.slice(0,R+1)),se=()=>{let ie;return M?ie=$:q?ie=b:v.route.Component?ie=he.createElement(v.route.Component,null):v.route.element?ie=v.route.element:ie=E,he.createElement(wT,{match:v,routeContext:{outlet:E,matches:re,isDataRoute:t!=null},children:ie})};return t&&(v.route.ErrorBoundary||v.route.errorElement||R===0)?he.createElement(vT,{location:t.location,revalidation:t.revalidation,component:$,error:M,children:se(),routeContext:{outlet:null,matches:re,isDataRoute:!0}}):se()},null)}var $_=(function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r})($_||{}),q_=(function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r})(q_||{});function TT(r){let e=he.useContext(Cf);return e||pt(!1),e}function IT(r){let e=he.useContext(hT);return e||pt(!1),e}function ST(r){let e=he.useContext(qr);return e||pt(!1),e}function W_(r){let e=ST(),t=e.matches[e.matches.length-1];return t.route.id||pt(!1),t.route.id}function AT(){var r;let e=he.useContext(U_),t=IT(),s=W_();return e!==void 0?e:(r=t.errors)==null?void 0:r[s]}function RT(){let{router:r}=TT($_.UseNavigateStable),e=W_(q_.UseNavigateStable),t=he.useRef(!1);return B_(()=>{t.current=!0}),he.useCallback(function(o,l){l===void 0&&(l={}),t.current&&(typeof o=="number"?r.navigate(o):r.navigate(o,rl({fromRouteId:e},l)))},[r,e])}const Jg={};function CT(r,e,t){Jg[r]||(Jg[r]=!0)}function PT(r,e){r?.v7_startTransition,r?.v7_relativeSplatPath}function Qd(r){let{to:e,replace:t,state:s,relative:o}=r;zo()||pt(!1);let{future:l,static:h}=he.useContext($s),{matches:f}=he.useContext(qr),{pathname:g}=fl(),y=Oc(),E=Rf(e,Af(f,l.v7_relativeSplatPath),g,o==="path"),v=JSON.stringify(E);return he.useEffect(()=>y(JSON.parse(v),{replace:t,state:s,relative:o}),[y,v,o,t,s]),null}function Vr(r){pt(!1)}function kT(r){let{basename:e="/",children:t=null,location:s,navigationType:o=Rs.Pop,navigator:l,static:h=!1,future:f}=r;zo()&&pt(!1);let g=e.replace(/^\/*/,"/"),y=he.useMemo(()=>({basename:g,navigator:l,static:h,future:rl({v7_relativeSplatPath:!1},f)}),[g,f,l,h]);typeof s=="string"&&(s=Di(s));let{pathname:E="/",search:v="",hash:R="",state:M=null,key:q="default"}=s,$=he.useMemo(()=>{let b=Sf(E,g);return b==null?null:{location:{pathname:b,search:v,hash:R,state:M,key:q},navigationType:o}},[g,E,v,R,M,q,o]);return $==null?null:he.createElement($s.Provider,{value:y},he.createElement(Vc.Provider,{children:t,value:$}))}function xT(r){let{children:e,location:t}=r;return mT(Xd(e),t)}new Promise(()=>{});function Xd(r,e){e===void 0&&(e=[]);let t=[];return he.Children.forEach(r,(s,o)=>{if(!he.isValidElement(s))return;let l=[...e,o];if(s.type===he.Fragment){t.push.apply(t,Xd(s.props.children,l));return}s.type!==Vr&&pt(!1),!s.props.index||!s.props.children||pt(!1);let h={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(h.children=Xd(s.props.children,l)),t.push(h)}),t}function Yd(){return Yd=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},Yd.apply(this,arguments)}function NT(r,e){if(r==null)return{};var t={},s=Object.keys(r),o,l;for(l=0;l<s.length;l++)o=s[l],!(e.indexOf(o)>=0)&&(t[o]=r[o]);return t}function DT(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function VT(r,e){return r.button===0&&(!e||e==="_self")&&!DT(r)}const OT=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],MT="6";try{window.__reactRouterVersion=MT}catch{}const LT="startTransition",Zg=N0[LT];function bT(r){let{basename:e,children:t,future:s,window:o}=r,l=he.useRef();l.current==null&&(l.current=j0({window:o,v5Compat:!0}));let h=l.current,[f,g]=he.useState({action:h.action,location:h.location}),{v7_startTransition:y}=s||{},E=he.useCallback(v=>{y&&Zg?Zg(()=>g(v)):g(v)},[g,y]);return he.useLayoutEffect(()=>h.listen(E),[h,E]),he.useEffect(()=>PT(s),[s]),he.createElement(kT,{basename:e,children:t,location:f.location,navigationType:f.action,navigator:h,future:s})}const jT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",FT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Io=he.forwardRef(function(e,t){let{onClick:s,relative:o,reloadDocument:l,replace:h,state:f,target:g,to:y,preventScrollReset:E,viewTransition:v}=e,R=NT(e,OT),{basename:M}=he.useContext($s),q,$=!1;if(typeof y=="string"&&FT.test(y)&&(q=y,jT))try{let ie=new URL(window.location.href),G=y.startsWith("//")?new URL(ie.protocol+y):new URL(y),ae=Sf(G.pathname,M);G.origin===ie.origin&&ae!=null?y=ae+G.search+G.hash:$=!0}catch{}let b=dT(y,{relative:o}),re=UT(y,{replace:h,state:f,target:g,preventScrollReset:E,relative:o,viewTransition:v});function se(ie){s&&s(ie),ie.defaultPrevented||re(ie)}return he.createElement("a",Yd({},R,{href:q||b,onClick:$||l?s:se,ref:t,target:g}))});var ey;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(ey||(ey={}));var ty;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(ty||(ty={}));function UT(r,e){let{target:t,replace:s,state:o,preventScrollReset:l,relative:h,viewTransition:f}=e===void 0?{}:e,g=Oc(),y=fl(),E=z_(r,{relative:h});return he.useCallback(v=>{if(VT(v,t)){v.preventDefault();let R=s!==void 0?s:ac(y)===ac(E);g(r,{replace:R,state:o,preventScrollReset:l,relative:h,viewTransition:f})}},[y,g,E,s,o,t,r,l,h,f])}const BT=()=>{};var ny={};const H_=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},zT=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const o=r[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],h=r[t++],f=r[t++],g=((o&7)<<18|(l&63)<<12|(h&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const l=r[t++],h=r[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},G_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const l=r[o],h=o+1<r.length,f=h?r[o+1]:0,g=o+2<r.length,y=g?r[o+2]:0,E=l>>2,v=(l&3)<<4|f>>4;let R=(f&15)<<2|y>>6,M=y&63;g||(M=64,h||(R=64)),s.push(t[E],t[v],t[R],t[M])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(H_(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):zT(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],f=o<r.length?t[r.charAt(o)]:0;++o;const y=o<r.length?t[r.charAt(o)]:64;++o;const v=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||f==null||y==null||v==null)throw new $T;const R=l<<2|f>>4;if(s.push(R),y!==64){const M=f<<4&240|y>>2;if(s.push(M),v!==64){const q=y<<6&192|v;s.push(q)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class $T extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const qT=function(r){const e=H_(r);return G_.encodeByteArray(e,!0)},lc=function(r){return qT(r).replace(/\./g,"")},K_=function(r){try{return G_.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function WT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const HT=()=>WT().__FIREBASE_DEFAULTS__,GT=()=>{if(typeof process>"u"||typeof ny>"u")return;const r=ny.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},KT=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&K_(r[1]);return e&&JSON.parse(e)},Mc=()=>{try{return BT()||HT()||GT()||KT()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Q_=r=>Mc()?.emulatorHosts?.[r],QT=r=>{const e=Q_(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},X_=()=>Mc()?.config,Y_=r=>Mc()?.[`_${r}`];class XT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}function $o(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function J_(r){return(await fetch(r,{credentials:"include"})).ok}function YT(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...r};return[lc(JSON.stringify(t)),lc(JSON.stringify(h)),""].join(".")}const Qa={};function JT(){const r={prod:[],emulator:[]};for(const e of Object.keys(Qa))Qa[e]?r.emulator.push(e):r.prod.push(e);return r}function ZT(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let ry=!1;function Z_(r,e){if(typeof window>"u"||typeof document>"u"||!$o(window.location.host)||Qa[r]===e||Qa[r]||ry)return;Qa[r]=e;function t(R){return`__firebase__banner__${R}`}const s="__firebase__banner",l=JT().prod.length>0;function h(){const R=document.getElementById(s);R&&R.remove()}function f(R){R.style.display="flex",R.style.background="#7faaf0",R.style.position="fixed",R.style.bottom="5px",R.style.left="5px",R.style.padding=".5em",R.style.borderRadius="5px",R.style.alignItems="center"}function g(R,M){R.setAttribute("width","24"),R.setAttribute("id",M),R.setAttribute("height","24"),R.setAttribute("viewBox","0 0 24 24"),R.setAttribute("fill","none"),R.style.marginLeft="-6px"}function y(){const R=document.createElement("span");return R.style.cursor="pointer",R.style.marginLeft="16px",R.style.fontSize="24px",R.innerHTML=" &times;",R.onclick=()=>{ry=!0,h()},R}function E(R,M){R.setAttribute("id",M),R.innerText="Learn more",R.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",R.setAttribute("target","__blank"),R.style.paddingLeft="5px",R.style.textDecoration="underline"}function v(){const R=ZT(s),M=t("text"),q=document.getElementById(M)||document.createElement("span"),$=t("learnmore"),b=document.getElementById($)||document.createElement("a"),re=t("preprendIcon"),se=document.getElementById(re)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(R.created){const ie=R.element;f(ie),E(b,$);const G=y();g(se,re),ie.append(se,q,b,G),document.body.appendChild(ie)}l?(q.innerText="Preview backend disconnected.",se.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(se.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,q.innerText="Preview backend running in this workspace."),q.setAttribute("id",M)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}function Kt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function eI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Kt())}function tI(){const r=Mc()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function rI(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function sI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function iI(){const r=Kt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function oI(){return!tI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function aI(){try{return typeof indexedDB=="object"}catch{return!1}}function lI(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}const uI="FirebaseError";class Wr extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=uI,Object.setPrototypeOf(this,Wr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pl.prototype.create)}}class pl{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?cI(l,s):"Error",f=`${this.serviceName}: ${h} (${o}).`;return new Wr(o,f,s)}}function cI(r,e){return r.replace(hI,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const hI=/\{\$([^}]+)}/g;function dI(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Ci(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=r[o],h=e[o];if(sy(l)&&sy(h)){if(!Ci(l,h))return!1}else if(l!==h)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function sy(r){return r!==null&&typeof r=="object"}function ml(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function fI(r,e){const t=new pI(r,e);return t.subscribe.bind(t)}class pI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");mI(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=Vd),o.error===void 0&&(o.error=Vd),o.complete===void 0&&(o.complete=Vd);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mI(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Vd(){}function Et(r){return r&&r._delegate?r._delegate:r}class Pi{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ti="[DEFAULT]";class gI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new XT;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_I(e))try{this.getOrInitializeService({instanceIdentifier:Ti})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=Ti){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ti){return this.instances.has(e)}getOptions(e=Ti){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,h]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);s===f&&h.resolve(o)}return o}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:yI(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ti){return this.component?this.component.multipleInstances?e:Ti:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function yI(r){return r===Ti?void 0:r}function _I(r){return r.instantiationMode==="EAGER"}class vI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new gI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Me;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Me||(Me={}));const wI={debug:Me.DEBUG,verbose:Me.VERBOSE,info:Me.INFO,warn:Me.WARN,error:Me.ERROR,silent:Me.SILENT},EI=Me.INFO,TI={[Me.DEBUG]:"log",[Me.VERBOSE]:"log",[Me.INFO]:"info",[Me.WARN]:"warn",[Me.ERROR]:"error"},II=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=TI[e];if(o)console[o](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Pf{constructor(e){this.name=e,this._logLevel=EI,this._logHandler=II,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?wI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Me.DEBUG,...e),this._logHandler(this,Me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Me.VERBOSE,...e),this._logHandler(this,Me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Me.INFO,...e),this._logHandler(this,Me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Me.WARN,...e),this._logHandler(this,Me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Me.ERROR,...e),this._logHandler(this,Me.ERROR,...e)}}const SI=(r,e)=>e.some(t=>r instanceof t);let iy,oy;function AI(){return iy||(iy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function RI(){return oy||(oy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ev=new WeakMap,Jd=new WeakMap,tv=new WeakMap,Od=new WeakMap,kf=new WeakMap;function CI(r){const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",h)},l=()=>{t(xs(r.result)),o()},h=()=>{s(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&ev.set(t,r)}).catch(()=>{}),kf.set(e,r),e}function PI(r){if(Jd.has(r))return;const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",h),r.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",h),r.addEventListener("abort",h)});Jd.set(r,e)}let Zd={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Jd.get(r);if(e==="objectStoreNames")return r.objectStoreNames||tv.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return xs(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function kI(r){Zd=r(Zd)}function xI(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(Md(this),e,...t);return tv.set(s,e.sort?e.sort():[e]),xs(s)}:RI().includes(r)?function(...e){return r.apply(Md(this),e),xs(ev.get(this))}:function(...e){return xs(r.apply(Md(this),e))}}function NI(r){return typeof r=="function"?xI(r):(r instanceof IDBTransaction&&PI(r),SI(r,AI())?new Proxy(r,Zd):r)}function xs(r){if(r instanceof IDBRequest)return CI(r);if(Od.has(r))return Od.get(r);const e=NI(r);return e!==r&&(Od.set(r,e),kf.set(e,r)),e}const Md=r=>kf.get(r);function DI(r,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const h=indexedDB.open(r,e),f=xs(h);return s&&h.addEventListener("upgradeneeded",g=>{s(xs(h.result),g.oldVersion,g.newVersion,xs(h.transaction),g)}),t&&h.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),f.then(g=>{l&&g.addEventListener("close",()=>l()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),f}const VI=["get","getKey","getAll","getAllKeys","count"],OI=["put","add","delete","clear"],Ld=new Map;function ay(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Ld.get(e))return Ld.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=OI.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||VI.includes(t)))return;const l=async function(h,...f){const g=this.transaction(h,o?"readwrite":"readonly");let y=g.store;return s&&(y=y.index(f.shift())),(await Promise.all([y[t](...f),o&&g.done]))[0]};return Ld.set(e,l),l}kI(r=>({...r,get:(e,t,s)=>ay(e,t)||r.get(e,t,s),has:(e,t)=>!!ay(e,t)||r.has(e,t)}));class MI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(LI(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function LI(r){return r.getComponent()?.type==="VERSION"}const ef="@firebase/app",ly="0.14.6";const Fr=new Pf("@firebase/app"),bI="@firebase/app-compat",jI="@firebase/analytics-compat",FI="@firebase/analytics",UI="@firebase/app-check-compat",BI="@firebase/app-check",zI="@firebase/auth",$I="@firebase/auth-compat",qI="@firebase/database",WI="@firebase/data-connect",HI="@firebase/database-compat",GI="@firebase/functions",KI="@firebase/functions-compat",QI="@firebase/installations",XI="@firebase/installations-compat",YI="@firebase/messaging",JI="@firebase/messaging-compat",ZI="@firebase/performance",eS="@firebase/performance-compat",tS="@firebase/remote-config",nS="@firebase/remote-config-compat",rS="@firebase/storage",sS="@firebase/storage-compat",iS="@firebase/firestore",oS="@firebase/ai",aS="@firebase/firestore-compat",lS="firebase",uS="12.6.0";const tf="[DEFAULT]",cS={[ef]:"fire-core",[bI]:"fire-core-compat",[FI]:"fire-analytics",[jI]:"fire-analytics-compat",[BI]:"fire-app-check",[UI]:"fire-app-check-compat",[zI]:"fire-auth",[$I]:"fire-auth-compat",[qI]:"fire-rtdb",[WI]:"fire-data-connect",[HI]:"fire-rtdb-compat",[GI]:"fire-fn",[KI]:"fire-fn-compat",[QI]:"fire-iid",[XI]:"fire-iid-compat",[YI]:"fire-fcm",[JI]:"fire-fcm-compat",[ZI]:"fire-perf",[eS]:"fire-perf-compat",[tS]:"fire-rc",[nS]:"fire-rc-compat",[rS]:"fire-gcs",[sS]:"fire-gcs-compat",[iS]:"fire-fst",[aS]:"fire-fst-compat",[oS]:"fire-vertex","fire-js":"fire-js",[lS]:"fire-js-all"};const uc=new Map,hS=new Map,nf=new Map;function uy(r,e){try{r.container.addComponent(e)}catch(t){Fr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Vo(r){const e=r.name;if(nf.has(e))return Fr.debug(`There were multiple attempts to register component ${e}.`),!1;nf.set(e,r);for(const t of uc.values())uy(t,r);for(const t of hS.values())uy(t,r);return!0}function xf(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Fn(r){return r==null?!1:r.settings!==void 0}const dS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ns=new pl("app","Firebase",dS);class fS{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Pi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ns.create("app-deleted",{appName:this._name})}}const qo=uS;function nv(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s={name:tf,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw Ns.create("bad-app-name",{appName:String(o)});if(t||(t=X_()),!t)throw Ns.create("no-options");const l=uc.get(o);if(l){if(Ci(t,l.options)&&Ci(s,l.config))return l;throw Ns.create("duplicate-app",{appName:o})}const h=new vI(o);for(const g of nf.values())h.addComponent(g);const f=new fS(t,s,h);return uc.set(o,f),f}function rv(r=tf){const e=uc.get(r);if(!e&&r===tf&&X_())return nv();if(!e)throw Ns.create("no-app",{appName:r});return e}function Ds(r,e,t){let s=cS[r]??r;t&&(s+=`-${t}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const h=[`Unable to register library "${s}" with version "${e}":`];o&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fr.warn(h.join(" "));return}Vo(new Pi(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const pS="firebase-heartbeat-database",mS=1,sl="firebase-heartbeat-store";let bd=null;function sv(){return bd||(bd=DI(pS,mS,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(sl)}catch(t){console.warn(t)}}}}).catch(r=>{throw Ns.create("idb-open",{originalErrorMessage:r.message})})),bd}async function gS(r){try{const t=(await sv()).transaction(sl),s=await t.objectStore(sl).get(iv(r));return await t.done,s}catch(e){if(e instanceof Wr)Fr.warn(e.message);else{const t=Ns.create("idb-get",{originalErrorMessage:e?.message});Fr.warn(t.message)}}}async function cy(r,e){try{const s=(await sv()).transaction(sl,"readwrite");await s.objectStore(sl).put(e,iv(r)),await s.done}catch(t){if(t instanceof Wr)Fr.warn(t.message);else{const s=Ns.create("idb-set",{originalErrorMessage:t?.message});Fr.warn(s.message)}}}function iv(r){return`${r.name}!${r.options.appId}`}const yS=1024,_S=30;class vS{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ES(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=hy();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:t}),this._heartbeatsCache.heartbeats.length>_S){const o=TS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Fr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=hy(),{heartbeatsToSend:t,unsentEntries:s}=wS(this._heartbeatsCache.heartbeats),o=lc(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Fr.warn(e),""}}}function hy(){return new Date().toISOString().substring(0,10)}function wS(r,e=yS){const t=[];let s=r.slice();for(const o of r){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),dy(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),dy(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class ES{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return aI()?lI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await gS(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return cy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return cy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function dy(r){return lc(JSON.stringify({version:2,heartbeats:r})).length}function TS(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}function IS(r){Vo(new Pi("platform-logger",e=>new MI(e),"PRIVATE")),Vo(new Pi("heartbeat",e=>new vS(e),"PRIVATE")),Ds(ef,ly,r),Ds(ef,ly,"esm2020"),Ds("fire-js","")}IS("");function ov(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const SS=ov,av=new pl("auth","Firebase",ov());const cc=new Pf("@firebase/auth");function AS(r,...e){cc.logLevel<=Me.WARN&&cc.warn(`Auth (${qo}): ${r}`,...e)}function Yu(r,...e){cc.logLevel<=Me.ERROR&&cc.error(`Auth (${qo}): ${r}`,...e)}function fr(r,...e){throw Df(r,...e)}function Bn(r,...e){return Df(r,...e)}function Nf(r,e,t){const s={...SS(),[e]:t};return new pl("auth","Firebase",s).create(e,{appName:r.name})}function Ai(r){return Nf(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function RS(r,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&fr(r,"argument-error"),Nf(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Df(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return av.create(r,...e)}function Ce(r,e,...t){if(!r)throw Df(e,...t)}function Mr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Yu(e),new Error(e)}function Ur(r,e){r||Mr(e)}function rf(){return typeof self<"u"&&self.location?.href||""}function CS(){return fy()==="http:"||fy()==="https:"}function fy(){return typeof self<"u"&&self.location?.protocol||null}function PS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(CS()||rI()||"connection"in navigator)?navigator.onLine:!0}function kS(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class gl{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ur(t>e,"Short delay should be less than long delay!"),this.isMobile=eI()||sI()}get(){return PS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Vf(r,e){Ur(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class lv{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Mr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Mr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Mr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const xS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const NS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],DS=new gl(3e4,6e4);function Of(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Wo(r,e,t,s,o={}){return uv(r,o,async()=>{let l={},h={};s&&(e==="GET"?h=s:l={body:JSON.stringify(s)});const f=ml({key:r.config.apiKey,...h}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const y={method:e,headers:g,...l};return nI()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&$o(r.emulatorConfig.host)&&(y.credentials="include"),lv.fetch()(await cv(r,r.config.apiHost,t,f),y)})}async function uv(r,e,t){r._canInitEmulator=!1;const s={...xS,...e};try{const o=new OS(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw qu(r,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const f=l.ok?h.errorMessage:h.error.message,[g,y]=f.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw qu(r,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw qu(r,"email-already-in-use",h);if(g==="USER_DISABLED")throw qu(r,"user-disabled",h);const E=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Nf(r,E,y);fr(r,E)}}catch(o){if(o instanceof Wr)throw o;fr(r,"network-request-failed",{message:String(o)})}}async function VS(r,e,t,s,o={}){const l=await Wo(r,e,t,s,o);return"mfaPendingCredential"in l&&fr(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function cv(r,e,t,s){const o=`${e}${t}?${s}`,l=r,h=l.config.emulator?Vf(r.config,o):`${r.config.apiScheme}://${o}`;return NS.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}class OS{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Bn(this.auth,"network-request-failed")),DS.get())})}}function qu(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=Bn(r,e,s);return o.customData._tokenResponse=t,o}async function MS(r,e){return Wo(r,"POST","/v1/accounts:delete",e)}async function hc(r,e){return Wo(r,"POST","/v1/accounts:lookup",e)}function Xa(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function LS(r,e=!1){const t=Et(r),s=await t.getIdToken(e),o=Mf(s);Ce(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l?.sign_in_provider;return{claims:o,token:s,authTime:Xa(jd(o.auth_time)),issuedAtTime:Xa(jd(o.iat)),expirationTime:Xa(jd(o.exp)),signInProvider:h||null,signInSecondFactor:l?.sign_in_second_factor||null}}function jd(r){return Number(r)*1e3}function Mf(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return Yu("JWT malformed, contained fewer than 3 sections"),null;try{const o=K_(t);return o?JSON.parse(o):(Yu("Failed to decode base64 JWT payload"),null)}catch(o){return Yu("Caught error parsing JWT payload as JSON",o?.toString()),null}}function py(r){const e=Mf(r);return Ce(e,"internal-error"),Ce(typeof e.exp<"u","internal-error"),Ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function il(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Wr&&bS(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function bS({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class jS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class sf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xa(this.lastLoginAt),this.creationTime=Xa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function dc(r){const e=r.auth,t=await r.getIdToken(),s=await il(r,hc(e,{idToken:t}));Ce(s?.users.length,e,"internal-error");const o=s.users[0];r._notifyReloadListener(o);const l=o.providerUserInfo?.length?hv(o.providerUserInfo):[],h=US(r.providerData,l),f=r.isAnonymous,g=!(r.email&&o.passwordHash)&&!h?.length,y=f?g:!1,E={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new sf(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(r,E)}async function FS(r){const e=Et(r);await dc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function US(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function hv(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function BS(r,e){const t=await uv(r,{},async()=>{const s=ml({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,h=await cv(r,o,"/v1/token",`key=${l}`),f=await r._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:f,body:s};return r.emulatorConfig&&$o(r.emulatorConfig.host)&&(g.credentials="include"),lv.fetch()(h,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function zS(r,e){return Wo(r,"POST","/v2/accounts:revokeToken",Of(r,e))}class ko{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ce(e.idToken,"internal-error"),Ce(typeof e.idToken<"u","internal-error"),Ce(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):py(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ce(e.length!==0,"internal-error");const t=py(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:l}=await BS(e,t);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:l}=t,h=new ko;return s&&(Ce(typeof s=="string","internal-error",{appName:e}),h.refreshToken=s),o&&(Ce(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(Ce(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ko,this.toJSON())}_performRefresh(){return Mr("not implemented")}}function Ts(r,e){Ce(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Un{constructor({uid:e,auth:t,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new jS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new sf(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await il(this,this.stsTokenManager.getToken(this.auth,e));return Ce(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return LS(this,e)}reload(){return FS(this)}_assign(e){this!==e&&(Ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Un({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await dc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Fn(this.auth.app))return Promise.reject(Ai(this.auth));const e=await this.getIdToken();return await il(this,MS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,h=t.photoURL??void 0,f=t.tenantId??void 0,g=t._redirectEventId??void 0,y=t.createdAt??void 0,E=t.lastLoginAt??void 0,{uid:v,emailVerified:R,isAnonymous:M,providerData:q,stsTokenManager:$}=t;Ce(v&&$,e,"internal-error");const b=ko.fromJSON(this.name,$);Ce(typeof v=="string",e,"internal-error"),Ts(s,e.name),Ts(o,e.name),Ce(typeof R=="boolean",e,"internal-error"),Ce(typeof M=="boolean",e,"internal-error"),Ts(l,e.name),Ts(h,e.name),Ts(f,e.name),Ts(g,e.name),Ts(y,e.name),Ts(E,e.name);const re=new Un({uid:v,auth:e,email:o,emailVerified:R,displayName:s,isAnonymous:M,photoURL:h,phoneNumber:l,tenantId:f,stsTokenManager:b,createdAt:y,lastLoginAt:E});return q&&Array.isArray(q)&&(re.providerData=q.map(se=>({...se}))),g&&(re._redirectEventId=g),re}static async _fromIdTokenResponse(e,t,s=!1){const o=new ko;o.updateFromServerResponse(t);const l=new Un({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await dc(l),l}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];Ce(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?hv(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!l?.length,f=new ko;f.updateFromIdToken(s);const g=new Un({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:h}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new sf(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!l?.length};return Object.assign(g,y),g}}const my=new Map;function Lr(r){Ur(r instanceof Function,"Expected a class definition");let e=my.get(r);return e?(Ur(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,my.set(r,e),e)}class dv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}dv.type="NONE";const gy=dv;function Ju(r,e,t){return`firebase:${r}:${e}:${t}`}class xo{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=Ju(this.userKey,o.apiKey,l),this.fullPersistenceKey=Ju("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await hc(this.auth,{idToken:e}).catch(()=>{});return t?Un._fromGetAccountInfoResponse(this.auth,t,e):null}return Un._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new xo(Lr(gy),e,s);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=o[0]||Lr(gy);const h=Ju(s,e.config.apiKey,e.name);let f=null;for(const y of t)try{const E=await y._get(h);if(E){let v;if(typeof E=="string"){const R=await hc(e,{idToken:E}).catch(()=>{});if(!R)break;v=await Un._fromGetAccountInfoResponse(e,R,E)}else v=Un._fromJSON(e,E);y!==l&&(f=v),l=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new xo(l,e,s):(l=g[0],f&&await l._set(h,f.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(h)}catch{}})),new xo(l,e,s))}}function yy(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(gv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(fv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_v(e))return"Blackberry";if(vv(e))return"Webos";if(pv(e))return"Safari";if((e.includes("chrome/")||mv(e))&&!e.includes("edge/"))return"Chrome";if(yv(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if(s?.length===2)return s[1]}return"Other"}function fv(r=Kt()){return/firefox\//i.test(r)}function pv(r=Kt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function mv(r=Kt()){return/crios\//i.test(r)}function gv(r=Kt()){return/iemobile/i.test(r)}function yv(r=Kt()){return/android/i.test(r)}function _v(r=Kt()){return/blackberry/i.test(r)}function vv(r=Kt()){return/webos/i.test(r)}function Lf(r=Kt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function $S(r=Kt()){return Lf(r)&&!!window.navigator?.standalone}function qS(){return iI()&&document.documentMode===10}function wv(r=Kt()){return Lf(r)||yv(r)||vv(r)||_v(r)||/windows phone/i.test(r)||gv(r)}function Ev(r,e=[]){let t;switch(r){case"Browser":t=yy(Kt());break;case"Worker":t=`${yy(Kt())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${qo}/${s}`}class WS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((h,f)=>{try{const g=e(l);h(g)}catch(g){f(g)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function HS(r,e={}){return Wo(r,"GET","/v2/passwordPolicy",Of(r,e))}const GS=6;class KS{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??GS,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class QS{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _y(this),this.idTokenSubscription=new _y(this),this.beforeStateQueue=new WS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=av,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Lr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await xo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await hc(this,{idToken:e}),s=await Un._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Fn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(h,h))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,h=s?._redirectEventId,f=await this.tryRedirectSignIn(e);(!l||l===h)&&f?.user&&(s=f.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await dc(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=kS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Fn(this.app))return Promise.reject(Ai(this));const t=e?Et(e):null;return t&&Ce(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Fn(this.app)?Promise.reject(Ai(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Fn(this.app)?Promise.reject(Ai(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Lr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await HS(this),t=new KS(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new pl("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await zS(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Lr(e)||this._popupRedirectResolver;Ce(t,this,"argument-error"),this.redirectPersistenceManager=await xo.create(this,[Lr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ce(f,this,"internal-error"),f.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,s,o);return()=>{h=!0,g()}}else{const g=e.addObserver(t);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ev(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(Fn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&AS(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Lc(r){return Et(r)}class _y{constructor(e){this.auth=e,this.observer=null,this.addObserver=fI(t=>this.observer=t)}get next(){return Ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let bf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function XS(r){bf=r}function YS(r){return bf.loadJS(r)}function JS(){return bf.gapiScript}function ZS(r){return`__${r}${Math.floor(Math.random()*1e6)}`}function e1(r,e){const t=xf(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(Ci(l,e??{}))return o;fr(o,"already-initialized")}return t.initialize({options:e})}function t1(r,e){const t=e?.persistence||[],s=(Array.isArray(t)?t:[t]).map(Lr);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e?.popupRedirectResolver)}function n1(r,e,t){const s=Lc(r);Ce(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=Tv(e),{host:h,port:f}=r1(e),g=f===null?"":`:${f}`,y={url:`${l}//${h}${g}/`},E=Object.freeze({host:h,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Ce(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ce(Ci(y,s.config.emulator)&&Ci(E,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=E,s.settings.appVerificationDisabledForTesting=!0,$o(h)?(J_(`${l}//${h}${g}`),Z_("Auth",!0)):s1()}function Tv(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function r1(r){const e=Tv(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:vy(s.substr(l.length+1))}}else{const[l,h]=s.split(":");return{host:l,port:vy(h)}}}function vy(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function s1(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class Iv{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Mr("not implemented")}_getIdTokenResponse(e){return Mr("not implemented")}_linkToIdToken(e,t){return Mr("not implemented")}_getReauthenticationResolver(e){return Mr("not implemented")}}async function No(r,e){return VS(r,"POST","/v1/accounts:signInWithIdp",Of(r,e))}const i1="http://localhost";class ki extends Iv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ki(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):fr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...l}=t;if(!s||!o)return null;const h=new ki(s,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return No(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,No(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,No(e,t)}buildRequest(){const e={requestUri:i1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ml(t)}return e}}class jf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class yl extends jf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Is extends yl{constructor(){super("facebook.com")}static credential(e){return ki._fromParams({providerId:Is.PROVIDER_ID,signInMethod:Is.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Is.credentialFromTaggedObject(e)}static credentialFromError(e){return Is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Is.credential(e.oauthAccessToken)}catch{return null}}}Is.FACEBOOK_SIGN_IN_METHOD="facebook.com";Is.PROVIDER_ID="facebook.com";class Or extends yl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ki._fromParams({providerId:Or.PROVIDER_ID,signInMethod:Or.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Or.credentialFromTaggedObject(e)}static credentialFromError(e){return Or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Or.credential(t,s)}catch{return null}}}Or.GOOGLE_SIGN_IN_METHOD="google.com";Or.PROVIDER_ID="google.com";class Ss extends yl{constructor(){super("github.com")}static credential(e){return ki._fromParams({providerId:Ss.PROVIDER_ID,signInMethod:Ss.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ss.credentialFromTaggedObject(e)}static credentialFromError(e){return Ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ss.credential(e.oauthAccessToken)}catch{return null}}}Ss.GITHUB_SIGN_IN_METHOD="github.com";Ss.PROVIDER_ID="github.com";class As extends yl{constructor(){super("twitter.com")}static credential(e,t){return ki._fromParams({providerId:As.PROVIDER_ID,signInMethod:As.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return As.credentialFromTaggedObject(e)}static credentialFromError(e){return As.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return As.credential(t,s)}catch{return null}}}As.TWITTER_SIGN_IN_METHOD="twitter.com";As.PROVIDER_ID="twitter.com";class Oo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const l=await Un._fromIdTokenResponse(e,s,o),h=wy(s);return new Oo({user:l,providerId:h,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=wy(s);return new Oo({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function wy(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}class fc extends Wr{constructor(e,t,s,o){super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,fc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new fc(e,t,s,o)}}function Sv(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?fc._fromErrorAndOperation(r,l,e,s):l})}async function o1(r,e,t=!1){const s=await il(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Oo._forOperation(r,"link",s)}async function a1(r,e,t=!1){const{auth:s}=r;if(Fn(s.app))return Promise.reject(Ai(s));const o="reauthenticate";try{const l=await il(r,Sv(s,o,e,r),t);Ce(l.idToken,s,"internal-error");const h=Mf(l.idToken);Ce(h,s,"internal-error");const{sub:f}=h;return Ce(r.uid===f,s,"user-mismatch"),Oo._forOperation(r,o,l)}catch(l){throw l?.code==="auth/user-not-found"&&fr(s,"user-mismatch"),l}}async function l1(r,e,t=!1){if(Fn(r.app))return Promise.reject(Ai(r));const s="signIn",o=await Sv(r,s,e),l=await Oo._fromIdTokenResponse(r,s,o);return t||await r._updateCurrentUser(l.user),l}function u1(r,e,t,s){return Et(r).onIdTokenChanged(e,t,s)}function c1(r,e,t){return Et(r).beforeAuthStateChanged(e,t)}function h1(r,e,t,s){return Et(r).onAuthStateChanged(e,t,s)}function d1(r){return Et(r).signOut()}const pc="__sak";class Av{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(pc,"1"),this.storage.removeItem(pc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const f1=1e3,p1=10;class Rv extends Av{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=wv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,f,g)=>{this.notifyListeners(h,g)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(s);!t&&this.localCache[s]===h||this.notifyListeners(s,h)},l=this.storage.getItem(s);qS()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,p1):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},f1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Rv.type="LOCAL";const m1=Rv;class Cv extends Av{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Cv.type="SESSION";const Pv=Cv;function g1(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class bc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new bc(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!h?.size)return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const f=Array.from(h).map(async y=>y(t.origin,l)),g=await g1(f);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}bc.receivers=[];function Ff(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}class y1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((f,g)=>{const y=Ff("",20);o.port1.start();const E=setTimeout(()=>{g(new Error("unsupported_event"))},s);h={messageChannel:o,onMessage(v){const R=v;if(R.data.eventId===y)switch(R.data.status){case"ack":clearTimeout(E),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(R.data.response);break;default:clearTimeout(E),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}function lr(){return window}function _1(r){lr().location.href=r}function kv(){return typeof lr().WorkerGlobalScope<"u"&&typeof lr().importScripts=="function"}async function v1(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function w1(){return navigator?.serviceWorker?.controller||null}function E1(){return kv()?self:null}const xv="firebaseLocalStorageDb",T1=1,mc="firebaseLocalStorage",Nv="fbase_key";class _l{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function jc(r,e){return r.transaction([mc],e?"readwrite":"readonly").objectStore(mc)}function I1(){const r=indexedDB.deleteDatabase(xv);return new _l(r).toPromise()}function of(){const r=indexedDB.open(xv,T1);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(mc,{keyPath:Nv})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(mc)?e(s):(s.close(),await I1(),e(await of()))})})}async function Ey(r,e,t){const s=jc(r,!0).put({[Nv]:e,value:t});return new _l(s).toPromise()}async function S1(r,e){const t=jc(r,!1).get(e),s=await new _l(t).toPromise();return s===void 0?null:s.value}function Ty(r,e){const t=jc(r,!0).delete(e);return new _l(t).toPromise()}const A1=800,R1=3;class Dv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await of(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>R1)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return kv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=bc._getInstance(E1()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await v1(),!this.activeServiceWorker)return;this.sender=new y1(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||w1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await of();return await Ey(e,pc,"1"),await Ty(e,pc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>Ey(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>S1(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Ty(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=jc(o,!1).getAll();return new _l(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),A1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Dv.type="LOCAL";const C1=Dv;new gl(3e4,6e4);function Vv(r,e){return e?Lr(e):(Ce(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class Uf extends Iv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return No(e,this._buildIdpRequest())}_linkToIdToken(e,t){return No(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return No(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function P1(r){return l1(r.auth,new Uf(r),r.bypassAuthState)}function k1(r){const{auth:e,user:t}=r;return Ce(t,e,"internal-error"),a1(t,new Uf(r),r.bypassAuthState)}async function x1(r){const{auth:e,user:t}=r;return Ce(t,e,"internal-error"),o1(t,new Uf(r),r.bypassAuthState)}class Ov{constructor(e,t,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:l,error:h,type:f}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return P1;case"linkViaPopup":case"linkViaRedirect":return x1;case"reauthViaPopup":case"reauthViaRedirect":return k1;default:fr(this.auth,"internal-error")}}resolve(e){Ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const N1=new gl(2e3,1e4);async function D1(r,e,t){if(Fn(r.app))return Promise.reject(Bn(r,"operation-not-supported-in-this-environment"));const s=Lc(r);RS(r,e,jf);const o=Vv(s,t);return new Ii(s,"signInViaPopup",e,o).executeNotNull()}class Ii extends Ov{constructor(e,t,s,o,l){super(e,t,o,l),this.provider=s,this.authWindow=null,this.pollId=null,Ii.currentPopupAction&&Ii.currentPopupAction.cancel(),Ii.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ce(e,this.auth,"internal-error"),e}async onExecution(){Ur(this.filter.length===1,"Popup operations only handle one event");const e=Ff();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Bn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Bn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ii.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Bn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,N1.get())};e()}}Ii.currentPopupAction=null;const V1="pendingRedirect",Zu=new Map;class O1 extends Ov{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Zu.get(this.auth._key());if(!e){try{const s=await M1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Zu.set(this.auth._key(),e)}return this.bypassAuthState||Zu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function M1(r,e){const t=j1(e),s=b1(r);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function L1(r,e){Zu.set(r._key(),e)}function b1(r){return Lr(r._redirectPersistence)}function j1(r){return Ju(V1,r.config.apiKey,r.name)}async function F1(r,e,t=!1){if(Fn(r.app))return Promise.reject(Ai(r));const s=Lc(r),o=Vv(s,e),h=await new O1(s,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await s._persistUserIfCurrent(h.user),await s._setRedirectUser(null,e)),h}const U1=600*1e3;class B1{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!z1(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Mv(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Bn(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=U1&&this.cachedEventUids.clear(),this.cachedEventUids.has(Iy(e))}saveEventToCache(e){this.cachedEventUids.add(Iy(e)),this.lastProcessedEventTime=Date.now()}}function Iy(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Mv({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function z1(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Mv(r);default:return!1}}async function $1(r,e={}){return Wo(r,"GET","/v1/projects",e)}const q1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,W1=/^https?/;async function H1(r){if(r.config.emulator)return;const{authorizedDomains:e}=await $1(r);for(const t of e)try{if(G1(t))return}catch{}fr(r,"unauthorized-domain")}function G1(r){const e=rf(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===s}if(!W1.test(t))return!1;if(q1.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const K1=new gl(3e4,6e4);function Sy(){const r=lr().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function Q1(r){return new Promise((e,t)=>{function s(){Sy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Sy(),t(Bn(r,"network-request-failed"))},timeout:K1.get()})}if(lr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(lr().gapi?.load)s();else{const o=ZS("iframefcb");return lr()[o]=()=>{gapi.load?s():t(Bn(r,"network-request-failed"))},YS(`${JS()}?onload=${o}`).catch(l=>t(l))}}).catch(e=>{throw ec=null,e})}let ec=null;function X1(r){return ec=ec||Q1(r),ec}const Y1=new gl(5e3,15e3),J1="__/auth/iframe",Z1="emulator/auth/iframe",eA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nA(r){const e=r.config;Ce(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Vf(e,Z1):`https://${r.config.authDomain}/${J1}`,s={apiKey:e.apiKey,appName:r.name,v:qo},o=tA.get(r.config.apiHost);o&&(s.eid=o);const l=r._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${ml(s).slice(1)}`}async function rA(r){const e=await X1(r),t=lr().gapi;return Ce(t,r,"internal-error"),e.open({where:document.body,url:nA(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:eA,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const h=Bn(r,"network-request-failed"),f=lr().setTimeout(()=>{l(h)},Y1.get());function g(){lr().clearTimeout(f),o(s)}s.ping(g).then(g,()=>{l(h)})}))}const sA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},iA=500,oA=600,aA="_blank",lA="http://localhost";class Ay{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function uA(r,e,t,s=iA,o=oA){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const g={...sA,width:s.toString(),height:o.toString(),top:l,left:h},y=Kt().toLowerCase();t&&(f=mv(y)?aA:t),fv(y)&&(e=e||lA,g.scrollbars="yes");const E=Object.entries(g).reduce((R,[M,q])=>`${R}${M}=${q},`,"");if($S(y)&&f!=="_self")return cA(e||"",f),new Ay(null);const v=window.open(e||"",f,E);Ce(v,r,"popup-blocked");try{v.focus()}catch{}return new Ay(v)}function cA(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}const hA="__/auth/handler",dA="emulator/auth/handler",fA=encodeURIComponent("fac");async function Ry(r,e,t,s,o,l){Ce(r.config.authDomain,r,"auth-domain-config-required"),Ce(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:qo,eventId:o};if(e instanceof jf){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",dI(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,v]of Object.entries({}))h[E]=v}if(e instanceof yl){const E=e.getScopes().filter(v=>v!=="");E.length>0&&(h.scopes=E.join(","))}r.tenantId&&(h.tid=r.tenantId);const f=h;for(const E of Object.keys(f))f[E]===void 0&&delete f[E];const g=await r._getAppCheckToken(),y=g?`#${fA}=${encodeURIComponent(g)}`:"";return`${pA(r)}?${ml(f).slice(1)}${y}`}function pA({config:r}){return r.emulator?Vf(r,dA):`https://${r.authDomain}/${hA}`}const Fd="webStorageSupport";class mA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Pv,this._completeRedirectFn=F1,this._overrideRedirectResult=L1}async _openPopup(e,t,s,o){Ur(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await Ry(e,t,s,rf(),o);return uA(e,l,Ff())}async _openRedirect(e,t,s,o){await this._originValidation(e);const l=await Ry(e,t,s,rf(),o);return _1(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Ur(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await rA(e),s=new B1(e);return t.register("authEvent",o=>(Ce(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Fd,{type:Fd},o=>{const l=o?.[0]?.[Fd];l!==void 0&&t(!!l),fr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=H1(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return wv()||pv()||Lf()}}const gA=mA;var Cy="@firebase/auth",Py="1.12.0";class yA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function _A(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function vA(r){Vo(new Pi("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:f}=s.options;Ce(h&&!h.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:h,authDomain:f,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ev(r)},y=new QS(s,o,l,g);return t1(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Vo(new Pi("auth-internal",e=>{const t=Lc(e.getProvider("auth").getImmediate());return(s=>new yA(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ds(Cy,Py,_A(r)),Ds(Cy,Py,"esm2020")}const wA=300,EA=Y_("authIdTokenMaxAge")||wA;let ky=null;const TA=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>EA)return;const o=t?.token;ky!==o&&(ky=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function IA(r=rv()){const e=xf(r,"auth");if(e.isInitialized())return e.getImmediate();const t=e1(r,{popupRedirectResolver:gA,persistence:[C1,m1,Pv]}),s=Y_("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const h=TA(l.toString());c1(t,h,()=>h(t.currentUser)),u1(t,f=>h(f))}}const o=Q_("auth");return o&&n1(t,`http://${o}`),t}function SA(){return document.getElementsByTagName("head")?.[0]??document}XS({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const l=Bn("internal-error");l.customData=o,t(l)},s.type="text/javascript",s.charset="UTF-8",SA().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});vA("Browser");var xy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Vs,Lv;(function(){var r;function e(I,S){function C(){}C.prototype=S.prototype,I.F=S.prototype,I.prototype=new C,I.prototype.constructor=I,I.D=function(D,P,N){for(var k=Array(arguments.length-2),de=2;de<arguments.length;de++)k[de-2]=arguments[de];return S.prototype[P].apply(D,k)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(I,S,C){C||(C=0);const D=Array(16);if(typeof S=="string")for(var P=0;P<16;++P)D[P]=S.charCodeAt(C++)|S.charCodeAt(C++)<<8|S.charCodeAt(C++)<<16|S.charCodeAt(C++)<<24;else for(P=0;P<16;++P)D[P]=S[C++]|S[C++]<<8|S[C++]<<16|S[C++]<<24;S=I.g[0],C=I.g[1],P=I.g[2];let N=I.g[3],k;k=S+(N^C&(P^N))+D[0]+3614090360&4294967295,S=C+(k<<7&4294967295|k>>>25),k=N+(P^S&(C^P))+D[1]+3905402710&4294967295,N=S+(k<<12&4294967295|k>>>20),k=P+(C^N&(S^C))+D[2]+606105819&4294967295,P=N+(k<<17&4294967295|k>>>15),k=C+(S^P&(N^S))+D[3]+3250441966&4294967295,C=P+(k<<22&4294967295|k>>>10),k=S+(N^C&(P^N))+D[4]+4118548399&4294967295,S=C+(k<<7&4294967295|k>>>25),k=N+(P^S&(C^P))+D[5]+1200080426&4294967295,N=S+(k<<12&4294967295|k>>>20),k=P+(C^N&(S^C))+D[6]+2821735955&4294967295,P=N+(k<<17&4294967295|k>>>15),k=C+(S^P&(N^S))+D[7]+4249261313&4294967295,C=P+(k<<22&4294967295|k>>>10),k=S+(N^C&(P^N))+D[8]+1770035416&4294967295,S=C+(k<<7&4294967295|k>>>25),k=N+(P^S&(C^P))+D[9]+2336552879&4294967295,N=S+(k<<12&4294967295|k>>>20),k=P+(C^N&(S^C))+D[10]+4294925233&4294967295,P=N+(k<<17&4294967295|k>>>15),k=C+(S^P&(N^S))+D[11]+2304563134&4294967295,C=P+(k<<22&4294967295|k>>>10),k=S+(N^C&(P^N))+D[12]+1804603682&4294967295,S=C+(k<<7&4294967295|k>>>25),k=N+(P^S&(C^P))+D[13]+4254626195&4294967295,N=S+(k<<12&4294967295|k>>>20),k=P+(C^N&(S^C))+D[14]+2792965006&4294967295,P=N+(k<<17&4294967295|k>>>15),k=C+(S^P&(N^S))+D[15]+1236535329&4294967295,C=P+(k<<22&4294967295|k>>>10),k=S+(P^N&(C^P))+D[1]+4129170786&4294967295,S=C+(k<<5&4294967295|k>>>27),k=N+(C^P&(S^C))+D[6]+3225465664&4294967295,N=S+(k<<9&4294967295|k>>>23),k=P+(S^C&(N^S))+D[11]+643717713&4294967295,P=N+(k<<14&4294967295|k>>>18),k=C+(N^S&(P^N))+D[0]+3921069994&4294967295,C=P+(k<<20&4294967295|k>>>12),k=S+(P^N&(C^P))+D[5]+3593408605&4294967295,S=C+(k<<5&4294967295|k>>>27),k=N+(C^P&(S^C))+D[10]+38016083&4294967295,N=S+(k<<9&4294967295|k>>>23),k=P+(S^C&(N^S))+D[15]+3634488961&4294967295,P=N+(k<<14&4294967295|k>>>18),k=C+(N^S&(P^N))+D[4]+3889429448&4294967295,C=P+(k<<20&4294967295|k>>>12),k=S+(P^N&(C^P))+D[9]+568446438&4294967295,S=C+(k<<5&4294967295|k>>>27),k=N+(C^P&(S^C))+D[14]+3275163606&4294967295,N=S+(k<<9&4294967295|k>>>23),k=P+(S^C&(N^S))+D[3]+4107603335&4294967295,P=N+(k<<14&4294967295|k>>>18),k=C+(N^S&(P^N))+D[8]+1163531501&4294967295,C=P+(k<<20&4294967295|k>>>12),k=S+(P^N&(C^P))+D[13]+2850285829&4294967295,S=C+(k<<5&4294967295|k>>>27),k=N+(C^P&(S^C))+D[2]+4243563512&4294967295,N=S+(k<<9&4294967295|k>>>23),k=P+(S^C&(N^S))+D[7]+1735328473&4294967295,P=N+(k<<14&4294967295|k>>>18),k=C+(N^S&(P^N))+D[12]+2368359562&4294967295,C=P+(k<<20&4294967295|k>>>12),k=S+(C^P^N)+D[5]+4294588738&4294967295,S=C+(k<<4&4294967295|k>>>28),k=N+(S^C^P)+D[8]+2272392833&4294967295,N=S+(k<<11&4294967295|k>>>21),k=P+(N^S^C)+D[11]+1839030562&4294967295,P=N+(k<<16&4294967295|k>>>16),k=C+(P^N^S)+D[14]+4259657740&4294967295,C=P+(k<<23&4294967295|k>>>9),k=S+(C^P^N)+D[1]+2763975236&4294967295,S=C+(k<<4&4294967295|k>>>28),k=N+(S^C^P)+D[4]+1272893353&4294967295,N=S+(k<<11&4294967295|k>>>21),k=P+(N^S^C)+D[7]+4139469664&4294967295,P=N+(k<<16&4294967295|k>>>16),k=C+(P^N^S)+D[10]+3200236656&4294967295,C=P+(k<<23&4294967295|k>>>9),k=S+(C^P^N)+D[13]+681279174&4294967295,S=C+(k<<4&4294967295|k>>>28),k=N+(S^C^P)+D[0]+3936430074&4294967295,N=S+(k<<11&4294967295|k>>>21),k=P+(N^S^C)+D[3]+3572445317&4294967295,P=N+(k<<16&4294967295|k>>>16),k=C+(P^N^S)+D[6]+76029189&4294967295,C=P+(k<<23&4294967295|k>>>9),k=S+(C^P^N)+D[9]+3654602809&4294967295,S=C+(k<<4&4294967295|k>>>28),k=N+(S^C^P)+D[12]+3873151461&4294967295,N=S+(k<<11&4294967295|k>>>21),k=P+(N^S^C)+D[15]+530742520&4294967295,P=N+(k<<16&4294967295|k>>>16),k=C+(P^N^S)+D[2]+3299628645&4294967295,C=P+(k<<23&4294967295|k>>>9),k=S+(P^(C|~N))+D[0]+4096336452&4294967295,S=C+(k<<6&4294967295|k>>>26),k=N+(C^(S|~P))+D[7]+1126891415&4294967295,N=S+(k<<10&4294967295|k>>>22),k=P+(S^(N|~C))+D[14]+2878612391&4294967295,P=N+(k<<15&4294967295|k>>>17),k=C+(N^(P|~S))+D[5]+4237533241&4294967295,C=P+(k<<21&4294967295|k>>>11),k=S+(P^(C|~N))+D[12]+1700485571&4294967295,S=C+(k<<6&4294967295|k>>>26),k=N+(C^(S|~P))+D[3]+2399980690&4294967295,N=S+(k<<10&4294967295|k>>>22),k=P+(S^(N|~C))+D[10]+4293915773&4294967295,P=N+(k<<15&4294967295|k>>>17),k=C+(N^(P|~S))+D[1]+2240044497&4294967295,C=P+(k<<21&4294967295|k>>>11),k=S+(P^(C|~N))+D[8]+1873313359&4294967295,S=C+(k<<6&4294967295|k>>>26),k=N+(C^(S|~P))+D[15]+4264355552&4294967295,N=S+(k<<10&4294967295|k>>>22),k=P+(S^(N|~C))+D[6]+2734768916&4294967295,P=N+(k<<15&4294967295|k>>>17),k=C+(N^(P|~S))+D[13]+1309151649&4294967295,C=P+(k<<21&4294967295|k>>>11),k=S+(P^(C|~N))+D[4]+4149444226&4294967295,S=C+(k<<6&4294967295|k>>>26),k=N+(C^(S|~P))+D[11]+3174756917&4294967295,N=S+(k<<10&4294967295|k>>>22),k=P+(S^(N|~C))+D[2]+718787259&4294967295,P=N+(k<<15&4294967295|k>>>17),k=C+(N^(P|~S))+D[9]+3951481745&4294967295,I.g[0]=I.g[0]+S&4294967295,I.g[1]=I.g[1]+(P+(k<<21&4294967295|k>>>11))&4294967295,I.g[2]=I.g[2]+P&4294967295,I.g[3]=I.g[3]+N&4294967295}s.prototype.v=function(I,S){S===void 0&&(S=I.length);const C=S-this.blockSize,D=this.C;let P=this.h,N=0;for(;N<S;){if(P==0)for(;N<=C;)o(this,I,N),N+=this.blockSize;if(typeof I=="string"){for(;N<S;)if(D[P++]=I.charCodeAt(N++),P==this.blockSize){o(this,D),P=0;break}}else for(;N<S;)if(D[P++]=I[N++],P==this.blockSize){o(this,D),P=0;break}}this.h=P,this.o+=S},s.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var S=1;S<I.length-8;++S)I[S]=0;S=this.o*8;for(var C=I.length-8;C<I.length;++C)I[C]=S&255,S/=256;for(this.v(I),I=Array(16),S=0,C=0;C<4;++C)for(let D=0;D<32;D+=8)I[S++]=this.g[C]>>>D&255;return I};function l(I,S){var C=f;return Object.prototype.hasOwnProperty.call(C,I)?C[I]:C[I]=S(I)}function h(I,S){this.h=S;const C=[];let D=!0;for(let P=I.length-1;P>=0;P--){const N=I[P]|0;D&&N==S||(C[P]=N,D=!1)}this.g=C}var f={};function g(I){return-128<=I&&I<128?l(I,function(S){return new h([S|0],S<0?-1:0)}):new h([I|0],I<0?-1:0)}function y(I){if(isNaN(I)||!isFinite(I))return v;if(I<0)return b(y(-I));const S=[];let C=1;for(let D=0;I>=C;D++)S[D]=I/C|0,C*=4294967296;return new h(S,0)}function E(I,S){if(I.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(I.charAt(0)=="-")return b(E(I.substring(1),S));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=y(Math.pow(S,8));let D=v;for(let N=0;N<I.length;N+=8){var P=Math.min(8,I.length-N);const k=parseInt(I.substring(N,N+P),S);P<8?(P=y(Math.pow(S,P)),D=D.j(P).add(y(k))):(D=D.j(C),D=D.add(y(k)))}return D}var v=g(0),R=g(1),M=g(16777216);r=h.prototype,r.m=function(){if($(this))return-b(this).m();let I=0,S=1;for(let C=0;C<this.g.length;C++){const D=this.i(C);I+=(D>=0?D:4294967296+D)*S,S*=4294967296}return I},r.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(q(this))return"0";if($(this))return"-"+b(this).toString(I);const S=y(Math.pow(I,6));var C=this;let D="";for(;;){const P=G(C,S).g;C=re(C,P.j(S));let N=((C.g.length>0?C.g[0]:C.h)>>>0).toString(I);if(C=P,q(C))return N+D;for(;N.length<6;)N="0"+N;D=N+D}},r.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function q(I){if(I.h!=0)return!1;for(let S=0;S<I.g.length;S++)if(I.g[S]!=0)return!1;return!0}function $(I){return I.h==-1}r.l=function(I){return I=re(this,I),$(I)?-1:q(I)?0:1};function b(I){const S=I.g.length,C=[];for(let D=0;D<S;D++)C[D]=~I.g[D];return new h(C,~I.h).add(R)}r.abs=function(){return $(this)?b(this):this},r.add=function(I){const S=Math.max(this.g.length,I.g.length),C=[];let D=0;for(let P=0;P<=S;P++){let N=D+(this.i(P)&65535)+(I.i(P)&65535),k=(N>>>16)+(this.i(P)>>>16)+(I.i(P)>>>16);D=k>>>16,N&=65535,k&=65535,C[P]=k<<16|N}return new h(C,C[C.length-1]&-2147483648?-1:0)};function re(I,S){return I.add(b(S))}r.j=function(I){if(q(this)||q(I))return v;if($(this))return $(I)?b(this).j(b(I)):b(b(this).j(I));if($(I))return b(this.j(b(I)));if(this.l(M)<0&&I.l(M)<0)return y(this.m()*I.m());const S=this.g.length+I.g.length,C=[];for(var D=0;D<2*S;D++)C[D]=0;for(D=0;D<this.g.length;D++)for(let P=0;P<I.g.length;P++){const N=this.i(D)>>>16,k=this.i(D)&65535,de=I.i(P)>>>16,Oe=I.i(P)&65535;C[2*D+2*P]+=k*Oe,se(C,2*D+2*P),C[2*D+2*P+1]+=N*Oe,se(C,2*D+2*P+1),C[2*D+2*P+1]+=k*de,se(C,2*D+2*P+1),C[2*D+2*P+2]+=N*de,se(C,2*D+2*P+2)}for(I=0;I<S;I++)C[I]=C[2*I+1]<<16|C[2*I];for(I=S;I<2*S;I++)C[I]=0;return new h(C,0)};function se(I,S){for(;(I[S]&65535)!=I[S];)I[S+1]+=I[S]>>>16,I[S]&=65535,S++}function ie(I,S){this.g=I,this.h=S}function G(I,S){if(q(S))throw Error("division by zero");if(q(I))return new ie(v,v);if($(I))return S=G(b(I),S),new ie(b(S.g),b(S.h));if($(S))return S=G(I,b(S)),new ie(b(S.g),S.h);if(I.g.length>30){if($(I)||$(S))throw Error("slowDivide_ only works with positive integers.");for(var C=R,D=S;D.l(I)<=0;)C=ae(C),D=ae(D);var P=Q(C,1),N=Q(D,1);for(D=Q(D,2),C=Q(C,2);!q(D);){var k=N.add(D);k.l(I)<=0&&(P=P.add(C),N=k),D=Q(D,1),C=Q(C,1)}return S=re(I,P.j(S)),new ie(P,S)}for(P=v;I.l(S)>=0;){for(C=Math.max(1,Math.floor(I.m()/S.m())),D=Math.ceil(Math.log(C)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),N=y(C),k=N.j(S);$(k)||k.l(I)>0;)C-=D,N=y(C),k=N.j(S);q(N)&&(N=R),P=P.add(N),I=re(I,k)}return new ie(P,I)}r.B=function(I){return G(this,I).h},r.and=function(I){const S=Math.max(this.g.length,I.g.length),C=[];for(let D=0;D<S;D++)C[D]=this.i(D)&I.i(D);return new h(C,this.h&I.h)},r.or=function(I){const S=Math.max(this.g.length,I.g.length),C=[];for(let D=0;D<S;D++)C[D]=this.i(D)|I.i(D);return new h(C,this.h|I.h)},r.xor=function(I){const S=Math.max(this.g.length,I.g.length),C=[];for(let D=0;D<S;D++)C[D]=this.i(D)^I.i(D);return new h(C,this.h^I.h)};function ae(I){const S=I.g.length+1,C=[];for(let D=0;D<S;D++)C[D]=I.i(D)<<1|I.i(D-1)>>>31;return new h(C,I.h)}function Q(I,S){const C=S>>5;S%=32;const D=I.g.length-C,P=[];for(let N=0;N<D;N++)P[N]=S>0?I.i(N+C)>>>S|I.i(N+C+1)<<32-S:I.i(N+C);return new h(P,I.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Lv=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=E,Vs=h}).apply(typeof xy<"u"?xy:typeof self<"u"?self:typeof window<"u"?window:{});var Wu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var bv,Ha,jv,tc,af,Fv,Uv,Bv;(function(){var r,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wu=="object"&&Wu];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=t(this);function o(u,m){if(m)e:{var _=s;u=u.split(".");for(var T=0;T<u.length-1;T++){var F=u[T];if(!(F in _))break e;_=_[F]}u=u[u.length-1],T=_[u],m=m(T),m!=T&&m!=null&&e(_,u,{configurable:!0,writable:!0,value:m})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(m){var _=[],T;for(T in m)Object.prototype.hasOwnProperty.call(m,T)&&_.push([T,m[T]]);return _}});var l=l||{},h=this||self;function f(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function g(u,m,_){return u.call.apply(u.bind,arguments)}function y(u,m,_){return y=g,y.apply(null,arguments)}function E(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var T=_.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function v(u,m){function _(){}_.prototype=m.prototype,u.Z=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Ob=function(T,F,z){for(var ne=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)ne[xe-2]=arguments[xe];return m.prototype[F].apply(T,ne)}}var R=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function M(u){const m=u.length;if(m>0){const _=Array(m);for(let T=0;T<m;T++)_[T]=u[T];return _}return[]}function q(u,m){for(let T=1;T<arguments.length;T++){const F=arguments[T];var _=typeof F;if(_=_!="object"?_:F?Array.isArray(F)?"array":_:"null",_=="array"||_=="object"&&typeof F.length=="number"){_=u.length||0;const z=F.length||0;u.length=_+z;for(let ne=0;ne<z;ne++)u[_+ne]=F[ne]}else u.push(F)}}class ${constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function b(u){h.setTimeout(()=>{throw u},0)}function re(){var u=I;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class se{constructor(){this.h=this.g=null}add(m,_){const T=ie.get();T.set(m,_),this.h?this.h.next=T:this.g=T,this.h=T}}var ie=new $(()=>new G,u=>u.reset());class G{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,Q=!1,I=new se,S=()=>{const u=Promise.resolve(void 0);ae=()=>{u.then(C)}};function C(){for(var u;u=re();){try{u.h.call(u.g)}catch(_){b(_)}var m=ie;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}Q=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var N=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};h.addEventListener("test",_,m),h.removeEventListener("test",_,m)}catch{}return u})();function k(u){return/^[\s\xa0]*$/.test(u)}function de(u,m){P.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}v(de,P),de.prototype.init=function(u,m){const _=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(_=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&de.Z.h.call(this)},de.prototype.h=function(){de.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Oe="closure_listenable_"+(Math.random()*1e6|0),qe=0;function Pe(u,m,_,T,F){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!T,this.ha=F,this.key=++qe,this.da=this.fa=!1}function W(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function fe(u,m,_){for(const T in u)m.call(_,u[T],T,u)}function te(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function L(u){const m={};for(const _ in u)m[_]=u[_];return m}const K="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Te(u,m){let _,T;for(let F=1;F<arguments.length;F++){T=arguments[F];for(_ in T)u[_]=T[_];for(let z=0;z<K.length;z++)_=K[z],Object.prototype.hasOwnProperty.call(T,_)&&(u[_]=T[_])}}function Ae(u){this.src=u,this.g={},this.h=0}Ae.prototype.add=function(u,m,_,T,F){const z=u.toString();u=this.g[z],u||(u=this.g[z]=[],this.h++);const ne=De(u,m,T,F);return ne>-1?(m=u[ne],_||(m.fa=!1)):(m=new Pe(m,this.src,z,!!T,F),m.fa=_,u.push(m)),m};function Ne(u,m){const _=m.type;if(_ in u.g){var T=u.g[_],F=Array.prototype.indexOf.call(T,m,void 0),z;(z=F>=0)&&Array.prototype.splice.call(T,F,1),z&&(W(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function De(u,m,_,T){for(let F=0;F<u.length;++F){const z=u[F];if(!z.da&&z.listener==m&&z.capture==!!_&&z.ha==T)return F}return-1}var ze="closure_lm_"+(Math.random()*1e6|0),je={};function Ke(u,m,_,T,F){if(Array.isArray(m)){for(let z=0;z<m.length;z++)Ke(u,m[z],_,T,F);return null}return _=Jo(_),u&&u[Oe]?u.J(m,_,f(T)?!!T.capture:!1,F):Rt(u,m,_,!1,T,F)}function Rt(u,m,_,T,F,z){if(!m)throw Error("Invalid event type");const ne=f(F)?!!F.capture:!!F;let xe=Li(u);if(xe||(u[ze]=xe=new Ae(u)),_=xe.add(m,_,T,ne,z),_.proxy)return _;if(T=vn(),_.proxy=T,T.src=u,T.listener=_,u.addEventListener)N||(F=ne),F===void 0&&(F=!1),u.addEventListener(m.toString(),T,F);else if(u.attachEvent)u.attachEvent(Mi(m.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return _}function vn(){function u(_){return m.call(u.src,u.listener,_)}const m=Pl;return u}function Yo(u,m,_,T,F){if(Array.isArray(m))for(var z=0;z<m.length;z++)Yo(u,m[z],_,T,F);else T=f(T)?!!T.capture:!!T,_=Jo(_),u&&u[Oe]?(u=u.i,z=String(m).toString(),z in u.g&&(m=u.g[z],_=De(m,_,T,F),_>-1&&(W(m[_]),Array.prototype.splice.call(m,_,1),m.length==0&&(delete u.g[z],u.h--)))):u&&(u=Li(u))&&(m=u.g[m.toString()],u=-1,m&&(u=De(m,_,T,F)),(_=u>-1?m[u]:null)&&Hr(_))}function Hr(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Oe])Ne(m.i,u);else{var _=u.type,T=u.proxy;m.removeEventListener?m.removeEventListener(_,T,u.capture):m.detachEvent?m.detachEvent(Mi(_),T):m.addListener&&m.removeListener&&m.removeListener(T),(_=Li(m))?(Ne(_,u),_.h==0&&(_.src=null,m[ze]=null)):W(u)}}}function Mi(u){return u in je?je[u]:je[u]="on"+u}function Pl(u,m){if(u.da)u=!0;else{m=new de(m,this);const _=u.listener,T=u.ha||u.src;u.fa&&Hr(u),u=_.call(T,m)}return u}function Li(u){return u=u[ze],u instanceof Ae?u:null}var Qs="__closure_events_fn_"+(Math.random()*1e9>>>0);function Jo(u){return typeof u=="function"?u:(u[Qs]||(u[Qs]=function(m){return u.handleEvent(m)}),u[Qs])}function mt(){D.call(this),this.i=new Ae(this),this.M=this,this.G=null}v(mt,D),mt.prototype[Oe]=!0,mt.prototype.removeEventListener=function(u,m,_,T){Yo(this,u,m,_,T)};function ct(u,m){var _,T=u.G;if(T)for(_=[];T;T=T.G)_.push(T);if(u=u.M,T=m.type||m,typeof m=="string")m=new P(m,u);else if(m instanceof P)m.target=m.target||u;else{var F=m;m=new P(T,u),Te(m,F)}F=!0;let z,ne;if(_)for(ne=_.length-1;ne>=0;ne--)z=m.g=_[ne],F=kn(z,T,!0,m)&&F;if(z=m.g=u,F=kn(z,T,!0,m)&&F,F=kn(z,T,!1,m)&&F,_)for(ne=0;ne<_.length;ne++)z=m.g=_[ne],F=kn(z,T,!1,m)&&F}mt.prototype.N=function(){if(mt.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const _=u.g[m];for(let T=0;T<_.length;T++)W(_[T]);delete u.g[m],u.h--}}this.G=null},mt.prototype.J=function(u,m,_,T){return this.i.add(String(u),m,!1,_,T)},mt.prototype.K=function(u,m,_,T){return this.i.add(String(u),m,!0,_,T)};function kn(u,m,_,T){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let F=!0;for(let z=0;z<m.length;++z){const ne=m[z];if(ne&&!ne.da&&ne.capture==_){const xe=ne.listener,ht=ne.ha||ne.src;ne.fa&&Ne(u.i,ne),F=xe.call(ht,T)!==!1&&F}}return F&&!T.defaultPrevented}function Zo(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=y(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:h.setTimeout(u,m||0)}function ea(u){u.g=Zo(()=>{u.g=null,u.i&&(u.i=!1,ea(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class kl extends D{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:ea(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gr(u){D.call(this),this.h=u,this.g={}}v(Gr,D);var ta=[];function bi(u){fe(u.g,function(m,_){this.g.hasOwnProperty(_)&&Hr(m)},u),u.g={}}Gr.prototype.N=function(){Gr.Z.N.call(this),bi(this)},Gr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Kr=h.JSON.stringify,xl=h.JSON.parse,Xs=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function Qr(){}function Nl(){}var Xr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ji(){P.call(this,"d")}v(ji,P);function na(){P.call(this,"c")}v(na,P);var xn={},Fi=null;function Yr(){return Fi=Fi||new mt}xn.Ia="serverreachability";function Ui(u){P.call(this,xn.Ia,u)}v(Ui,P);function mr(u){const m=Yr();ct(m,new Ui(m))}xn.STAT_EVENT="statevent";function gr(u,m){P.call(this,xn.STAT_EVENT,u),this.stat=m}v(gr,P);function at(u){const m=Yr();ct(m,new gr(m,u))}xn.Ja="timingevent";function ra(u,m){P.call(this,xn.Ja,u),this.size=m}v(ra,P);function Jr(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},m)}function Zr(){this.g=!0}Zr.prototype.ua=function(){this.g=!1};function Dl(u,m,_,T,F,z){u.info(function(){if(u.g)if(z){var ne="",xe=z.split("&");for(let Qe=0;Qe<xe.length;Qe++){var ht=xe[Qe].split("=");if(ht.length>1){const gt=ht[0];ht=ht[1];const dn=gt.split("_");ne=dn.length>=2&&dn[1]=="type"?ne+(gt+"="+ht+"&"):ne+(gt+"=redacted&")}}}else ne=null;else ne=z;return"XMLHTTP REQ ("+T+") [attempt "+F+"]: "+m+`
`+_+`
`+ne})}function Vl(u,m,_,T,F,z,ne){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+F+"]: "+m+`
`+_+`
`+z+" "+ne})}function $n(u,m,_,T){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Ys(u,_)+(T?" "+T:"")})}function Ol(u,m){u.info(function(){return"TIMEOUT: "+m})}Zr.prototype.info=function(){};function Ys(u,m){if(!u.g)return m;if(!m)return null;try{const z=JSON.parse(m);if(z){for(u=0;u<z.length;u++)if(Array.isArray(z[u])){var _=z[u];if(!(_.length<2)){var T=_[1];if(Array.isArray(T)&&!(T.length<1)){var F=T[0];if(F!="noop"&&F!="stop"&&F!="close")for(let ne=1;ne<T.length;ne++)T[ne]=""}}}}return Kr(z)}catch{return m}}var es={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ts={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ml;function yr(){}v(yr,Qr),yr.prototype.g=function(){return new XMLHttpRequest},Ml=new yr;function qn(u){return encodeURIComponent(String(u))}function Bi(u){var m=1;u=u.split(":");const _=[];for(;m>0&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function wn(u,m,_,T){this.j=u,this.i=m,this.l=_,this.S=T||1,this.V=new Gr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ll}function Ll(){this.i=null,this.g="",this.h=!1}var bl={},sa={};function Nn(u,m,_){u.M=1,u.A=vr(En(m)),u.u=_,u.R=!0,ia(u,null)}function ia(u,m){u.F=Date.now(),Js(u),u.B=En(u.A);var _=u.B,T=u.S;Array.isArray(T)||(T=[String(T)]),ma(_.i,"t",T),u.C=0,_=u.j.L,u.h=new Ll,u.g=Gl(u.j,_?m:null,!u.u),u.P>0&&(u.O=new kl(y(u.Y,u,u.g),u.P)),m=u.V,_=u.g,T=u.ba;var F="readystatechange";Array.isArray(F)||(F&&(ta[0]=F.toString()),F=ta);for(let z=0;z<F.length;z++){const ne=Ke(_,F[z],T||m.handleEvent,!1,m.h||m);if(!ne)break;m.g[ne.key]=ne}m=u.J?L(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),mr(),Dl(u.i,u.v,u.B,u.l,u.S,u.u)}wn.prototype.ba=function(u){u=u.target;const m=this.O;m&&Yn(u)==3?m.j():this.Y(u)},wn.prototype.Y=function(u){try{if(u==this.g)e:{const xe=Yn(this.g),ht=this.g.ya(),Qe=this.g.ca();if(!(xe<3)&&(xe!=3||this.g&&(this.h.h||this.g.la()||Wl(this.g)))){this.K||xe!=4||ht==7||(ht==8||Qe<=0?mr(3):mr(2)),zi(this);var m=this.g.ca();this.X=m;var _=jl(this);if(this.o=m==200,Vl(this.i,this.v,this.B,this.l,this.S,xe,m),this.o){if(this.U&&!this.L){t:{if(this.g){var T,F=this.g;if((T=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(T)){var z=T;break t}}z=null}if(u=z)$n(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ze(this,u);else{this.o=!1,this.m=3,at(12),_r(this),Zs(this);break e}}if(this.R){u=!0;let gt;for(;!this.K&&this.C<_.length;)if(gt=Ul(this,_),gt==sa){xe==4&&(this.m=4,at(14),u=!1),$n(this.i,this.l,null,"[Incomplete Response]");break}else if(gt==bl){this.m=4,at(15),$n(this.i,this.l,_,"[Invalid Chunk]"),u=!1;break}else $n(this.i,this.l,gt,null),Ze(this,gt);if(Fl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xe!=4||_.length!=0||this.h.h||(this.m=1,at(16),u=!1),this.o=this.o&&u,!u)$n(this.i,this.l,_,"[Invalid Chunked Response]"),_r(this),Zs(this);else if(_.length>0&&!this.W){this.W=!0;var ne=this.j;ne.g==this&&ne.aa&&!ne.P&&(ne.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),li(ne),ne.P=!0,at(11))}}else $n(this.i,this.l,_,null),Ze(this,_);xe==4&&_r(this),this.o&&!this.K&&(xe==4?Ji(this.j,this):(this.o=!1,Js(this)))}else ya(this.g),m==400&&_.indexOf("Unknown SID")>0?(this.m=3,at(12)):(this.m=0,at(13)),_r(this),Zs(this)}}}catch{}};function jl(u){if(!Fl(u))return u.g.la();const m=Wl(u.g);if(m==="")return"";let _="";const T=m.length,F=Yn(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return _r(u),Zs(u),"";u.h.i=new h.TextDecoder}for(let z=0;z<T;z++)u.h.h=!0,_+=u.h.i.decode(m[z],{stream:!(F&&z==T-1)});return m.length=0,u.h.g+=_,u.C=0,u.h.g}function Fl(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Ul(u,m){var _=u.C,T=m.indexOf(`
`,_);return T==-1?sa:(_=Number(m.substring(_,T)),isNaN(_)?bl:(T+=1,T+_>m.length?sa:(m=m.slice(T,T+_),u.C=T+_,m)))}wn.prototype.cancel=function(){this.K=!0,_r(this)};function Js(u){u.T=Date.now()+u.H,oa(u,u.H)}function oa(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Jr(y(u.aa,u),m)}function zi(u){u.D&&(h.clearTimeout(u.D),u.D=null)}wn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Ol(this.i,this.B),this.M!=2&&(mr(),at(17)),_r(this),this.m=2,Zs(this)):oa(this,this.T-u)};function Zs(u){u.j.I==0||u.K||Ji(u.j,u)}function _r(u){zi(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,bi(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function Ze(u,m){try{var _=u.j;if(_.I!=0&&(_.g==u||la(_.h,u))){if(!u.L&&la(_.h,u)&&_.I==3){try{var T=_.Ba.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var F=T;if(F[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<u.F)Yi(_),cn(_);else break e;er(_),at(18)}}else _.xa=F[1],0<_.xa-_.K&&F[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=Jr(y(_.Va,_),6e3));ei(_.h)<=1&&_.ta&&(_.ta=void 0)}else hn(_,11)}else if((u.L||_.g==u)&&Yi(_),!k(m))for(F=_.Ba.g.parse(m),m=0;m<F.length;m++){let Qe=F[m];const gt=Qe[0];if(!(gt<=_.K))if(_.K=gt,Qe=Qe[1],_.I==2)if(Qe[0]=="c"){_.M=Qe[1],_.ba=Qe[2];const dn=Qe[3];dn!=null&&(_.ka=dn,_.j.info("VER="+_.ka));const Sr=Qe[4];Sr!=null&&(_.za=Sr,_.j.info("SVER="+_.za));const tr=Qe[5];tr!=null&&typeof tr=="number"&&tr>0&&(T=1.5*tr,_.O=T,_.j.info("backChannelRequestTimeoutMs_="+T)),T=_;const nr=u.g;if(nr){const to=nr.g?nr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(to){var z=T.h;z.g||to.indexOf("spdy")==-1&&to.indexOf("quic")==-1&&to.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(qi(z,z.h),z.h=null))}if(T.G){const wa=nr.g?nr.g.getResponseHeader("X-HTTP-Session-Id"):null;wa&&(T.wa=wa,He(T.J,T.G,wa))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-u.F,_.j.info("Handshake RTT: "+_.T+"ms")),T=_;var ne=u;if(T.na=va(T,T.L?T.ba:null,T.W),ne.L){ti(T.h,ne);var xe=ne,ht=T.O;ht&&(xe.H=ht),xe.D&&(zi(xe),Js(xe)),T.g=ne}else Ut(T);_.i.length>0&&Ir(_)}else Qe[0]!="stop"&&Qe[0]!="close"||hn(_,7);else _.I==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?hn(_,7):Qi(_):Qe[0]!="noop"&&_.l&&_.l.qa(Qe),_.A=0)}}mr(4)}catch{}}var sh=class{constructor(u,m){this.g=u,this.map=m}};function $i(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function aa(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ei(u){return u.h?1:u.g?u.g.size:0}function la(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function qi(u,m){u.g?u.g.add(m):u.h=m}function ti(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}$i.prototype.cancel=function(){if(this.i=an(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function an(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.G);return m}return M(u.i)}var Bl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ln(u,m){if(u){u=u.split("&");for(let _=0;_<u.length;_++){const T=u[_].indexOf("=");let F,z=null;T>=0?(F=u[_].substring(0,T),z=u[_].substring(T+1)):F=u[_],m(F,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function Wn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof Wn?(this.l=u.l,ni(this,u.j),this.o=u.o,this.g=u.g,Hn(this,u.u),this.h=u.h,ns(this,ga(u.i)),this.m=u.m):u&&(m=String(u).match(Bl))?(this.l=!1,ni(this,m[1]||"",!0),this.o=ri(m[2]||""),this.g=ri(m[3]||"",!0),Hn(this,m[4]),this.h=ri(m[5]||"",!0),ns(this,m[6]||"",!0),this.m=ri(m[7]||"")):(this.l=!1,this.i=new Fe(null,this.l))}Wn.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(si(m,ca,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(si(m,ca,!0),"@"),u.push(qn(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&u.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(si(_,_.charAt(0)=="/"?ii:ha,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",si(_,da)),u.join("")},Wn.prototype.resolve=function(u){const m=En(this);let _=!!u.j;_?ni(m,u.j):_=!!u.o,_?m.o=u.o:_=!!u.g,_?m.g=u.g:_=u.u!=null;var T=u.h;if(_)Hn(m,u.u);else if(_=!!u.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var F=m.h.lastIndexOf("/");F!=-1&&(T=m.h.slice(0,F+1)+T)}if(F=T,F==".."||F==".")T="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){T=F.lastIndexOf("/",0)==0,F=F.split("/");const z=[];for(let ne=0;ne<F.length;){const xe=F[ne++];xe=="."?T&&ne==F.length&&z.push(""):xe==".."?((z.length>1||z.length==1&&z[0]!="")&&z.pop(),T&&ne==F.length&&z.push("")):(z.push(xe),T=!0)}T=z.join("/")}else T=F}return _?m.h=T:_=u.i.toString()!=="",_?ns(m,ga(u.i)):_=!!u.m,_&&(m.m=u.m),m};function En(u){return new Wn(u)}function ni(u,m,_){u.j=_?ri(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Hn(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function ns(u,m,_){m instanceof Fe?(u.i=m,Hi(u.i,u.l)):(_||(m=si(m,ih)),u.i=new Fe(m,u.l))}function He(u,m,_){u.i.set(m,_)}function vr(u){return He(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function ri(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function si(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,ua),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function ua(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var ca=/[#\/\?@]/g,ha=/[#\?:]/g,ii=/[#\?]/g,ih=/[#\?@]/g,da=/#/g;function Fe(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Gn(u){u.g||(u.g=new Map,u.h=0,u.i&&ln(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}r=Fe.prototype,r.add=function(u,m){Gn(this),this.i=null,u=Kn(this,u);let _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function fa(u,m){Gn(u),m=Kn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Wi(u,m){return Gn(u),m=Kn(u,m),u.g.has(m)}r.forEach=function(u,m){Gn(this),this.g.forEach(function(_,T){_.forEach(function(F){u.call(m,F,T,this)},this)},this)};function pa(u,m){Gn(u);let _=[];if(typeof m=="string")Wi(u,m)&&(_=_.concat(u.g.get(Kn(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)_=_.concat(u[m]);return _}r.set=function(u,m){return Gn(this),this.i=null,u=Kn(this,u),Wi(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=pa(this,u),u.length>0?String(u[0]):m):m};function ma(u,m,_){fa(u,m),_.length>0&&(u.i=null,u.g.set(Kn(u,m),M(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let T=0;T<m.length;T++){var _=m[T];const F=qn(_);_=pa(this,_);for(let z=0;z<_.length;z++){let ne=F;_[z]!==""&&(ne+="="+qn(_[z])),u.push(ne)}}return this.i=u.join("&")};function ga(u){const m=new Fe;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function Kn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function Hi(u,m){m&&!u.j&&(Gn(u),u.i=null,u.g.forEach(function(_,T){const F=T.toLowerCase();T!=F&&(fa(this,T),ma(this,F,_))},u)),u.j=m}function Qn(u,m){const _=new Zr;if(h.Image){const T=new Image;T.onload=E(Dt,_,"TestLoadImage: loaded",!0,m,T),T.onerror=E(Dt,_,"TestLoadImage: error",!1,m,T),T.onabort=E(Dt,_,"TestLoadImage: abort",!1,m,T),T.ontimeout=E(Dt,_,"TestLoadImage: timeout",!1,m,T),h.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else m(!1)}function Xn(u,m){const _=new Zr,T=new AbortController,F=setTimeout(()=>{T.abort(),Dt(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:T.signal}).then(z=>{clearTimeout(F),z.ok?Dt(_,"TestPingServer: ok",!0,m):Dt(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(F),Dt(_,"TestPingServer: error",!1,m)})}function Dt(u,m,_,T,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),T(_)}catch{}}function oi(){this.g=new Xs}function wr(u){this.i=u.Sb||null,this.h=u.ab||!1}v(wr,Qr),wr.prototype.g=function(){return new un(this.i,this.h)};function un(u,m){mt.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(un,mt),r=un.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,Dn(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||h).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,rs(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Dn(this)),this.g&&(this.readyState=3,Dn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;zl(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function zl(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?rs(this):Dn(this),this.readyState==3&&zl(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,rs(this))},r.Na=function(u){this.g&&(this.response=u,rs(this))},r.ga=function(){this.g&&rs(this)};function rs(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Dn(u)}r.setRequestHeader=function(u,m){this.A.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function Dn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(un.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function $l(u){let m="";return fe(u,function(_,T){m+=T,m+=":",m+=_,m+=`\r
`}),m}function Gi(u,m,_){e:{for(T in _){var T=!1;break e}T=!0}T||(_=$l(_),typeof u=="string"?_!=null&&qn(_):He(u,m,_))}function Ye(u){mt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(Ye,mt);var ql=/^https?$/i,oh=["POST","PUT"];r=Ye.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,m,_,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ml.g(),this.g.onreadystatechange=R(y(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(z){ss(this,z);return}if(u=_||"",_=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var F in T)_.set(F,T[F]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const z of T.keys())_.set(z,T.get(z));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(_.keys()).find(z=>z.toLowerCase()=="content-type"),F=h.FormData&&u instanceof h.FormData,!(Array.prototype.indexOf.call(oh,m,void 0)>=0)||T||F||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,ne]of _)this.g.setRequestHeader(z,ne);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(z){ss(this,z)}};function ss(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,is(u),Tr(u)}function is(u){u.A||(u.A=!0,ct(u,"complete"),ct(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,ct(this,"complete"),ct(this,"abort"),Tr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Tr(this,!0)),Ye.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Er(this):this.Xa())},r.Xa=function(){Er(this)};function Er(u){if(u.h&&typeof l<"u"){if(u.v&&Yn(u)==4)setTimeout(u.Ca.bind(u),0);else if(ct(u,"readystatechange"),Yn(u)==4){u.h=!1;try{const z=u.ca();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var T;if(T=z===0){let ne=String(u.D).match(Bl)[1]||null;!ne&&h.self&&h.self.location&&(ne=h.self.location.protocol.slice(0,-1)),T=!ql.test(ne?ne.toLowerCase():"")}_=T}if(_)ct(u,"complete"),ct(u,"success");else{u.o=6;try{var F=Yn(u)>2?u.g.statusText:""}catch{F=""}u.l=F+" ["+u.ca()+"]",is(u)}}finally{Tr(u)}}}}function Tr(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const _=u.g;u.g=null,m||ct(u,"ready");try{_.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Yn(u){return u.g?u.g.readyState:0}r.ca=function(){try{return Yn(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),xl(m)}};function Wl(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function ya(u){const m={};u=(u.g&&Yn(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(k(u[T]))continue;var _=Bi(u[T]);const F=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const z=m[F]||[];m[F]=z,z.push(_)}te(m,function(T){return T.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Jn(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function Ki(u){this.za=0,this.i=[],this.j=new Zr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Jn("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Jn("baseRetryDelayMs",5e3,u),this.Za=Jn("retryDelaySeedMs",1e4,u),this.Ta=Jn("forwardChannelMaxRetries",2,u),this.va=Jn("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new $i(u&&u.concurrentRequestLimit),this.Ba=new oi,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Ki.prototype,r.ka=8,r.I=1,r.connect=function(u,m,_,T){at(0),this.W=u,this.H=m||{},_&&T!==void 0&&(this.H.OSID=_,this.H.OAID=T),this.F=this.X,this.J=va(this,null,this.W),Ir(this)};function Qi(u){if(Xi(u),u.I==3){var m=u.V++,_=En(u.J);if(He(_,"SID",u.M),He(_,"RID",m),He(_,"TYPE","terminate"),Zn(u,_),m=new wn(u,u.j,m),m.M=2,m.A=vr(En(_)),_=!1,h.navigator&&h.navigator.sendBeacon)try{_=h.navigator.sendBeacon(m.A.toString(),"")}catch{}!_&&h.Image&&(new Image().src=m.A,_=!0),_||(m.g=Gl(m.j,null),m.g.ea(m.A)),m.F=Date.now(),Js(m)}ui(u)}function cn(u){u.g&&(li(u),u.g.cancel(),u.g=null)}function Xi(u){cn(u),u.v&&(h.clearTimeout(u.v),u.v=null),Yi(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&h.clearTimeout(u.m),u.m=null)}function Ir(u){if(!aa(u.h)&&!u.m){u.m=!0;var m=u.Ea;ae||S(),Q||(ae(),Q=!0),I.add(m,u),u.D=0}}function Hl(u,m){return ei(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Jr(y(u.Ea,u,m),Zi(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const F=new wn(this,this.j,u);let z=this.o;if(this.U&&(z?(z=L(z),Te(z,this.U)):z=this.U),this.u!==null||this.R||(F.J=z,z=null),this.S)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var T=this.i[_];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(m+=T,m>4096){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=_a(this,F,m),_=En(this.J),He(_,"RID",u),He(_,"CVER",22),this.G&&He(_,"X-HTTP-Session-Id",this.G),Zn(this,_),z&&(this.R?m="headers="+qn($l(z))+"&"+m:this.u&&Gi(_,this.u,z)),qi(this.h,F),this.Ra&&He(_,"TYPE","init"),this.S?(He(_,"$req",m),He(_,"SID","null"),F.U=!0,Nn(F,_,null)):Nn(F,_,m),this.I=2}}else this.I==3&&(u?ai(this,u):this.i.length==0||aa(this.h)||ai(this))};function ai(u,m){var _;m?_=m.l:_=u.V++;const T=En(u.J);He(T,"SID",u.M),He(T,"RID",_),He(T,"AID",u.K),Zn(u,T),u.u&&u.o&&Gi(T,u.u,u.o),_=new wn(u,u.j,_,u.D+1),u.u===null&&(_.J=u.o),m&&(u.i=m.G.concat(u.i)),m=_a(u,_,1e3),_.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),qi(u.h,_),Nn(_,T,m)}function Zn(u,m){u.H&&fe(u.H,function(_,T){He(m,T,_)}),u.l&&fe({},function(_,T){He(m,T,_)})}function _a(u,m,_){_=Math.min(u.i.length,_);const T=u.l?y(u.l.Ka,u.l,u):null;e:{var F=u.i;let xe=-1;for(;;){const ht=["count="+_];xe==-1?_>0?(xe=F[0].g,ht.push("ofs="+xe)):xe=0:ht.push("ofs="+xe);let Qe=!0;for(let gt=0;gt<_;gt++){var z=F[gt].g;const dn=F[gt].map;if(z-=xe,z<0)xe=Math.max(0,F[gt].g-100),Qe=!1;else try{z="req"+z+"_"||"";try{var ne=dn instanceof Map?dn:Object.entries(dn);for(const[Sr,tr]of ne){let nr=tr;f(tr)&&(nr=Kr(tr)),ht.push(z+Sr+"="+encodeURIComponent(nr))}}catch(Sr){throw ht.push(z+"type="+encodeURIComponent("_badmap")),Sr}}catch{T&&T(dn)}}if(Qe){ne=ht.join("&");break e}}ne=void 0}return u=u.i.splice(0,_),m.G=u,ne}function Ut(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;ae||S(),Q||(ae(),Q=!0),I.add(m,u),u.A=0}}function er(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Jr(y(u.Da,u),Zi(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,os(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Jr(y(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,at(10),cn(this),os(this))};function li(u){u.B!=null&&(h.clearTimeout(u.B),u.B=null)}function os(u){u.g=new wn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=En(u.na);He(m,"RID","rpc"),He(m,"SID",u.M),He(m,"AID",u.K),He(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&He(m,"TO",u.ia),He(m,"TYPE","xmlhttp"),Zn(u,m),u.u&&u.o&&Gi(m,u.u,u.o),u.O&&(u.g.H=u.O);var _=u.g;u=u.ba,_.M=1,_.A=vr(En(m)),_.u=null,_.R=!0,ia(_,u)}r.Va=function(){this.C!=null&&(this.C=null,cn(this),er(this),at(19))};function Yi(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function Ji(u,m){var _=null;if(u.g==m){Yi(u),li(u),u.g=null;var T=2}else if(la(u.h,m))_=m.G,ti(u.h,m),T=1;else return;if(u.I!=0){if(m.o)if(T==1){_=m.u?m.u.length:0,m=Date.now()-m.F;var F=u.D;T=Yr(),ct(T,new ra(T,_)),Ir(u)}else Ut(u);else if(F=m.m,F==3||F==0&&m.X>0||!(T==1&&Hl(u,m)||T==2&&er(u)))switch(_&&_.length>0&&(m=u.h,m.i=m.i.concat(_)),F){case 1:hn(u,5);break;case 4:hn(u,10);break;case 3:hn(u,6);break;default:hn(u,2)}}}function Zi(u,m){let _=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(_*=2),_*m}function hn(u,m){if(u.j.info("Error code "+m),m==2){var _=y(u.bb,u),T=u.Ua;const F=!T;T=new Wn(T||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||ni(T,"https"),vr(T),F?Qn(T.toString(),_):Xn(T.toString(),_)}else at(2);u.I=0,u.l&&u.l.pa(m),ui(u),Xi(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),at(2)):(this.j.info("Failed to ping google.com"),at(1))};function ui(u){if(u.I=0,u.ja=[],u.l){const m=an(u.h);(m.length!=0||u.i.length!=0)&&(q(u.ja,m),q(u.ja,u.i),u.h.i.length=0,M(u.i),u.i.length=0),u.l.oa()}}function va(u,m,_){var T=_ instanceof Wn?En(_):new Wn(_);if(T.g!="")m&&(T.g=m+"."+T.g),Hn(T,T.u);else{var F=h.location;T=F.protocol,m=m?m+"."+F.hostname:F.hostname,F=+F.port;const z=new Wn(null);T&&ni(z,T),m&&(z.g=m),F&&Hn(z,F),_&&(z.h=_),T=z}return _=u.G,m=u.wa,_&&m&&He(T,_,m),He(T,"VER",u.ka),Zn(u,T),T}function Gl(u,m,_){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new Ye(new wr({ab:_})):new Ye(u.ma),m.Fa(u.L),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Kl(){}r=Kl.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function eo(){}eo.prototype.g=function(u,m){return new Vt(u,m)};function Vt(u,m){mt.call(this),this.g=new Ki(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!k(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!k(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new as(this)}v(Vt,mt),Vt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Vt.prototype.close=function(){Qi(this.g)},Vt.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.v&&(_={},_.__data__=Kr(u),u=_);m.i.push(new sh(m.Ya++,u)),m.I==3&&Ir(m)},Vt.prototype.N=function(){this.g.l=null,delete this.j,Qi(this.g),delete this.g,Vt.Z.N.call(this)};function Ql(u){ji.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const _ in m){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}v(Ql,ji);function Xl(){na.call(this),this.status=1}v(Xl,na);function as(u){this.g=u}v(as,Kl),as.prototype.ra=function(){ct(this.g,"a")},as.prototype.qa=function(u){ct(this.g,new Ql(u))},as.prototype.pa=function(u){ct(this.g,new Xl)},as.prototype.oa=function(){ct(this.g,"b")},eo.prototype.createWebChannel=eo.prototype.g,Vt.prototype.send=Vt.prototype.o,Vt.prototype.open=Vt.prototype.m,Vt.prototype.close=Vt.prototype.close,Bv=function(){return new eo},Uv=function(){return Yr()},Fv=xn,af={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},es.NO_ERROR=0,es.TIMEOUT=8,es.HTTP_ERROR=6,tc=es,ts.COMPLETE="complete",jv=ts,Nl.EventType=Xr,Xr.OPEN="a",Xr.CLOSE="b",Xr.ERROR="c",Xr.MESSAGE="d",mt.prototype.listen=mt.prototype.J,Ha=Nl,Ye.prototype.listenOnce=Ye.prototype.K,Ye.prototype.getLastError=Ye.prototype.Ha,Ye.prototype.getLastErrorCode=Ye.prototype.ya,Ye.prototype.getStatus=Ye.prototype.ca,Ye.prototype.getResponseJson=Ye.prototype.La,Ye.prototype.getResponseText=Ye.prototype.la,Ye.prototype.send=Ye.prototype.ea,Ye.prototype.setWithCredentials=Ye.prototype.Fa,bv=Ye}).apply(typeof Wu<"u"?Wu:typeof self<"u"?self:typeof window<"u"?window:{});const Ny="@firebase/firestore",Dy="4.9.3";class Ht{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ht.UNAUTHENTICATED=new Ht(null),Ht.GOOGLE_CREDENTIALS=new Ht("google-credentials-uid"),Ht.FIRST_PARTY=new Ht("first-party-uid"),Ht.MOCK_USER=new Ht("mock-user");let Ho="12.7.0";const xi=new Pf("@firebase/firestore");function So(){return xi.logLevel}function ue(r,...e){if(xi.logLevel<=Me.DEBUG){const t=e.map(Bf);xi.debug(`Firestore (${Ho}): ${r}`,...t)}}function Br(r,...e){if(xi.logLevel<=Me.ERROR){const t=e.map(Bf);xi.error(`Firestore (${Ho}): ${r}`,...t)}}function Mo(r,...e){if(xi.logLevel<=Me.WARN){const t=e.map(Bf);xi.warn(`Firestore (${Ho}): ${r}`,...t)}}function Bf(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}function ve(r,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,zv(r,s,t)}function zv(r,e,t){let s=`FIRESTORE (${Ho}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Br(s),new Error(s)}function Be(r,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,r||zv(e,o,s)}function ke(r,e){return r}const H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oe extends Wr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ur{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class $v{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class AA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ht.UNAUTHENTICATED)))}shutdown(){}}class RA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class CA{constructor(e){this.t=e,this.currentUser=Ht.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Be(this.o===void 0,42304);let s=this.i;const o=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let l=new ur;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ur,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},f=g=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((g=>f(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?f(g):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ur)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Be(typeof s.accessToken=="string",31837,{l:s}),new $v(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Be(e===null||typeof e=="string",2055,{h:e}),new Ht(e)}}class PA{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Ht.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class kA{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new PA(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Ht.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Vy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class xA{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Fn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Be(this.o===void 0,3512);const s=l=>{l.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,ue("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const o=l=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Vy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Be(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Vy(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function NA(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}class zf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=NA(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%62))}return s}}function Le(r,e){return r<e?-1:r>e?1:0}function lf(r,e){const t=Math.min(r.length,e.length);for(let s=0;s<t;s++){const o=r.charAt(s),l=e.charAt(s);if(o!==l)return Ud(o)===Ud(l)?Le(o,l):Ud(o)?1:-1}return Le(r.length,e.length)}const DA=55296,VA=57343;function Ud(r){const e=r.charCodeAt(0);return e>=DA&&e<=VA}function Lo(r,e,t){return r.length===e.length&&r.every(((s,o)=>t(s,e[o])))}const Oy="__name__";class ar{constructor(e,t,s){t===void 0?t=0:t>e.length&&ve(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&ve(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return ar.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ar?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=ar.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Le(e.length,t.length)}static compareSegments(e,t){const s=ar.isNumericId(e),o=ar.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?ar.extractNumericId(e).compare(ar.extractNumericId(t)):lf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Vs.fromString(e.substring(4,e.length-2))}}class Xe extends ar{construct(e,t,s){return new Xe(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new oe(H.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new Xe(t)}static emptyPath(){return new Xe([])}}const OA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class bt extends ar{construct(e,t,s){return new bt(e,t,s)}static isValidIdentifier(e){return OA.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),bt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Oy}static keyField(){return new bt([Oy])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new oe(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let h=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new oe(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new oe(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else f==="`"?(h=!h,o++):f!=="."||h?(s+=f,o++):(l(),o++)}if(l(),h)throw new oe(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new bt(t)}static emptyPath(){return new bt([])}}class _e{constructor(e){this.path=e}static fromPath(e){return new _e(Xe.fromString(e))}static fromName(e){return new _e(Xe.fromString(e).popFirst(5))}static empty(){return new _e(Xe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Xe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Xe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new Xe(e.slice()))}}function qv(r,e,t){if(!t)throw new oe(H.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function MA(r,e,t,s){if(e===!0&&s===!0)throw new oe(H.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function My(r){if(!_e.isDocumentKey(r))throw new oe(H.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Ly(r){if(_e.isDocumentKey(r))throw new oe(H.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Wv(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Fc(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":ve(12329,{type:typeof r})}function Pn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new oe(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Fc(r);throw new oe(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function wt(r,e){const t={typeString:r};return e&&(t.value=e),t}function vl(r,e){if(!Wv(r))throw new oe(H.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){t=`JSON missing required field: '${s}'`;break}const h=r[s];if(o&&typeof h!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(l!==void 0&&h!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new oe(H.INVALID_ARGUMENT,t);return!0}const by=-62135596800,jy=1e6;class nt{static now(){return nt.fromMillis(Date.now())}static fromDate(e){return nt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*jy);return new nt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new oe(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new oe(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<by)throw new oe(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oe(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/jy}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:nt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(vl(e,nt._jsonSchema))return new nt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-by;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}nt._jsonSchemaVersion="firestore/timestamp/1.0",nt._jsonSchema={type:wt("string",nt._jsonSchemaVersion),seconds:wt("number"),nanoseconds:wt("number")};class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new nt(0,0))}static max(){return new Se(new nt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const ol=-1;function LA(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Se.fromTimestamp(s===1e9?new nt(t+1,0):new nt(t,s));return new Ls(o,_e.empty(),e)}function bA(r){return new Ls(r.readTime,r.key,ol)}class Ls{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Ls(Se.min(),_e.empty(),ol)}static max(){return new Ls(Se.max(),_e.empty(),ol)}}function jA(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=_e.comparator(r.documentKey,e.documentKey),t!==0?t:Le(r.largestBatchId,e.largestBatchId))}const FA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class UA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Go(r){if(r.code!==H.FAILED_PRECONDITION||r.message!==FA)throw r;ue("LocalStore","Unexpectedly lost primary lease")}class X{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ve(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new X(((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof X?t:X.resolve(t)}catch(t){return X.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):X.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):X.reject(t)}static resolve(e){return new X(((t,s)=>{t(e)}))}static reject(e){return new X(((t,s)=>{s(e)}))}static waitFor(e){return new X(((t,s)=>{let o=0,l=0,h=!1;e.forEach((f=>{++o,f.next((()=>{++l,h&&l===o&&t()}),(g=>s(g)))})),h=!0,l===o&&t()}))}static or(e){let t=X.resolve(!1);for(const s of e)t=t.next((o=>o?X.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,l)=>{s.push(t.call(this,o,l))})),this.waitFor(s)}static mapArray(e,t){return new X(((s,o)=>{const l=e.length,h=new Array(l);let f=0;for(let g=0;g<l;g++){const y=g;t(e[y]).next((E=>{h[y]=E,++f,f===l&&s(h)}),(E=>o(E)))}}))}static doWhile(e,t){return new X(((s,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):s()};l()}))}}function BA(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ko(r){return r.name==="IndexedDbTransactionError"}class Uc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Uc.ce=-1;const $f=-1;function wl(r){return r==null}function gc(r){return r===0&&1/r==-1/0}function zA(r){return typeof r=="number"&&Number.isInteger(r)&&!gc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const Hv="";function $A(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Fy(e)),e=qA(r.get(t),e);return Fy(e)}function qA(r,e){let t=e;const s=r.length;for(let o=0;o<s;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case Hv:t+="";break;default:t+=l}}return t}function Fy(r){return r+Hv+""}function Uy(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function qs(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function Gv(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class ot{constructor(e,t){this.comparator=e,this.root=t||Lt.EMPTY}insert(e,t){return new ot(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Lt.BLACK,null,null))}remove(e){return new ot(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Lt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hu(this.root,e,this.comparator,!0)}}class Hu{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Lt{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??Lt.RED,this.left=o??Lt.EMPTY,this.right=l??Lt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new Lt(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Lt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Lt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Lt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Lt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ve(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ve(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ve(27949);return e+(this.isRed()?0:1)}}Lt.EMPTY=null,Lt.RED=!0,Lt.BLACK=!1;Lt.EMPTY=new class{constructor(){this.size=0}get key(){throw ve(57766)}get value(){throw ve(16141)}get color(){throw ve(16727)}get left(){throw ve(29726)}get right(){throw ve(36894)}copy(e,t,s,o,l){return this}insert(e,t,s){return new Lt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class At{constructor(e){this.comparator=e,this.data=new ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new By(this.data.getIterator())}getIteratorFrom(e){return new By(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof At)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new At(this.comparator);return t.data=e,t}}class By{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class yn{constructor(e){this.fields=e,e.sort(bt.comparator)}static empty(){return new yn([])}unionWith(e){let t=new At(bt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new yn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Lo(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}class Kv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ft{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Kv("Invalid base64 string: "+l):l}})(e);return new Ft(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l})(e);return new Ft(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ft.EMPTY_BYTE_STRING=new Ft("");const WA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bs(r){if(Be(!!r,39018),typeof r=="string"){let e=0;const t=WA.exec(r);if(Be(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:ft(r.seconds),nanos:ft(r.nanos)}}function ft(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function js(r){return typeof r=="string"?Ft.fromBase64String(r):Ft.fromUint8Array(r)}const Qv="server_timestamp",Xv="__type__",Yv="__previous_value__",Jv="__local_write_time__";function qf(r){return(r?.mapValue?.fields||{})[Xv]?.stringValue===Qv}function Bc(r){const e=r.mapValue.fields[Yv];return qf(e)?Bc(e):e}function al(r){const e=bs(r.mapValue.fields[Jv].timestampValue);return new nt(e.seconds,e.nanos)}class HA{constructor(e,t,s,o,l,h,f,g,y,E){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=E}}const yc="(default)";class ll{constructor(e,t){this.projectId=e,this.database=t||yc}static empty(){return new ll("","")}get isDefaultDatabase(){return this.database===yc}isEqual(e){return e instanceof ll&&e.projectId===this.projectId&&e.database===this.database}}const Zv="__type__",GA="__max__",Gu={mapValue:{}},ew="__vector__",_c="value";function Fs(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?qf(r)?4:QA(r)?9007199254740991:KA(r)?10:11:ve(28295,{value:r})}function pr(r,e){if(r===e)return!0;const t=Fs(r);if(t!==Fs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return al(r).isEqual(al(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=bs(o.timestampValue),f=bs(l.timestampValue);return h.seconds===f.seconds&&h.nanos===f.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,l){return js(o.bytesValue).isEqual(js(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,l){return ft(o.geoPointValue.latitude)===ft(l.geoPointValue.latitude)&&ft(o.geoPointValue.longitude)===ft(l.geoPointValue.longitude)})(r,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return ft(o.integerValue)===ft(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=ft(o.doubleValue),f=ft(l.doubleValue);return h===f?gc(h)===gc(f):isNaN(h)&&isNaN(f)}return!1})(r,e);case 9:return Lo(r.arrayValue.values||[],e.arrayValue.values||[],pr);case 10:case 11:return(function(o,l){const h=o.mapValue.fields||{},f=l.mapValue.fields||{};if(Uy(h)!==Uy(f))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(f[g]===void 0||!pr(h[g],f[g])))return!1;return!0})(r,e);default:return ve(52216,{left:r})}}function ul(r,e){return(r.values||[]).find((t=>pr(t,e)))!==void 0}function bo(r,e){if(r===e)return 0;const t=Fs(r),s=Fs(e);if(t!==s)return Le(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Le(r.booleanValue,e.booleanValue);case 2:return(function(l,h){const f=ft(l.integerValue||l.doubleValue),g=ft(h.integerValue||h.doubleValue);return f<g?-1:f>g?1:f===g?0:isNaN(f)?isNaN(g)?0:-1:1})(r,e);case 3:return zy(r.timestampValue,e.timestampValue);case 4:return zy(al(r),al(e));case 5:return lf(r.stringValue,e.stringValue);case 6:return(function(l,h){const f=js(l),g=js(h);return f.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(l,h){const f=l.split("/"),g=h.split("/");for(let y=0;y<f.length&&y<g.length;y++){const E=Le(f[y],g[y]);if(E!==0)return E}return Le(f.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,h){const f=Le(ft(l.latitude),ft(h.latitude));return f!==0?f:Le(ft(l.longitude),ft(h.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return $y(r.arrayValue,e.arrayValue);case 10:return(function(l,h){const f=l.fields||{},g=h.fields||{},y=f[_c]?.arrayValue,E=g[_c]?.arrayValue,v=Le(y?.values?.length||0,E?.values?.length||0);return v!==0?v:$y(y,E)})(r.mapValue,e.mapValue);case 11:return(function(l,h){if(l===Gu.mapValue&&h===Gu.mapValue)return 0;if(l===Gu.mapValue)return 1;if(h===Gu.mapValue)return-1;const f=l.fields||{},g=Object.keys(f),y=h.fields||{},E=Object.keys(y);g.sort(),E.sort();for(let v=0;v<g.length&&v<E.length;++v){const R=lf(g[v],E[v]);if(R!==0)return R;const M=bo(f[g[v]],y[E[v]]);if(M!==0)return M}return Le(g.length,E.length)})(r.mapValue,e.mapValue);default:throw ve(23264,{he:t})}}function zy(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Le(r,e);const t=bs(r),s=bs(e),o=Le(t.seconds,s.seconds);return o!==0?o:Le(t.nanos,s.nanos)}function $y(r,e){const t=r.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=bo(t[o],s[o]);if(l)return l}return Le(t.length,s.length)}function jo(r){return uf(r)}function uf(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const s=bs(t);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return js(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return _e.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=uf(l);return s+"]"})(r.arrayValue):"mapValue"in r?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of s)l?l=!1:o+=",",o+=`${h}:${uf(t.fields[h])}`;return o+"}"})(r.mapValue):ve(61005,{value:r})}function nc(r){switch(Fs(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Bc(r);return e?16+nc(e):16;case 5:return 2*r.stringValue.length;case 6:return js(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,l)=>o+nc(l)),0)})(r.arrayValue);case 10:case 11:return(function(s){let o=0;return qs(s.fields,((l,h)=>{o+=l.length+nc(h)})),o})(r.mapValue);default:throw ve(13486,{value:r})}}function qy(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function cf(r){return!!r&&"integerValue"in r}function Wf(r){return!!r&&"arrayValue"in r}function Wy(r){return!!r&&"nullValue"in r}function Hy(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function rc(r){return!!r&&"mapValue"in r}function KA(r){return(r?.mapValue?.fields||{})[Zv]?.stringValue===ew}function Ya(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return qs(r.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Ya(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ya(r.arrayValue.values[t]);return e}return{...r}}function QA(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===GA}class Yt{constructor(e){this.value=e}static empty(){return new Yt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!rc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ya(t)}setAll(e){let t=bt.emptyPath(),s={},o=[];e.forEach(((h,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,s,o),s={},o=[],t=f.popLast()}h?s[f.lastSegment()]=Ya(h):o.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());rc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return pr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];rc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){qs(t,((o,l)=>e[o]=l));for(const o of s)delete e[o]}clone(){return new Yt(Ya(this.value))}}function tw(r){const e=[];return qs(r.fields,((t,s)=>{const o=new bt([t]);if(rc(s)){const l=tw(s.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)})),new yn(e)}class Nt{constructor(e,t,s,o,l,h,f){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=h,this.documentState=f}static newInvalidDocument(e){return new Nt(e,0,Se.min(),Se.min(),Se.min(),Yt.empty(),0)}static newFoundDocument(e,t,s,o){return new Nt(e,1,t,Se.min(),s,o,0)}static newNoDocument(e,t){return new Nt(e,2,t,Se.min(),Se.min(),Yt.empty(),0)}static newUnknownDocument(e,t){return new Nt(e,3,t,Se.min(),Se.min(),Yt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Yt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Yt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Nt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Nt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class vc{constructor(e,t){this.position=e,this.inclusive=t}}function Gy(r,e,t){let s=0;for(let o=0;o<r.position.length;o++){const l=e[o],h=r.position[o];if(l.field.isKeyField()?s=_e.comparator(_e.fromName(h.referenceValue),t.key):s=bo(h,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function Ky(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!pr(r.position[t],e.position[t]))return!1;return!0}class wc{constructor(e,t="asc"){this.field=e,this.dir=t}}function XA(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class nw{}class vt extends nw{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new JA(e,t,s):t==="array-contains"?new tR(e,s):t==="in"?new nR(e,s):t==="not-in"?new rR(e,s):t==="array-contains-any"?new sR(e,s):new vt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new ZA(e,s):new eR(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(bo(t,this.value)):t!==null&&Fs(this.value)===Fs(t)&&this.matchesComparison(bo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ve(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class zn extends nw{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new zn(e,t)}matches(e){return rw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function rw(r){return r.op==="and"}function sw(r){return YA(r)&&rw(r)}function YA(r){for(const e of r.filters)if(e instanceof zn)return!1;return!0}function hf(r){if(r instanceof vt)return r.field.canonicalString()+r.op.toString()+jo(r.value);if(sw(r))return r.filters.map((e=>hf(e))).join(",");{const e=r.filters.map((t=>hf(t))).join(",");return`${r.op}(${e})`}}function iw(r,e){return r instanceof vt?(function(s,o){return o instanceof vt&&s.op===o.op&&s.field.isEqual(o.field)&&pr(s.value,o.value)})(r,e):r instanceof zn?(function(s,o){return o instanceof zn&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((l,h,f)=>l&&iw(h,o.filters[f])),!0):!1})(r,e):void ve(19439)}function ow(r){return r instanceof vt?(function(t){return`${t.field.canonicalString()} ${t.op} ${jo(t.value)}`})(r):r instanceof zn?(function(t){return t.op.toString()+" {"+t.getFilters().map(ow).join(" ,")+"}"})(r):"Filter"}class JA extends vt{constructor(e,t,s){super(e,t,s),this.key=_e.fromName(s.referenceValue)}matches(e){const t=_e.comparator(e.key,this.key);return this.matchesComparison(t)}}class ZA extends vt{constructor(e,t){super(e,"in",t),this.keys=aw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class eR extends vt{constructor(e,t){super(e,"not-in",t),this.keys=aw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function aw(r,e){return(e.arrayValue?.values||[]).map((t=>_e.fromName(t.referenceValue)))}class tR extends vt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Wf(t)&&ul(t.arrayValue,this.value)}}class nR extends vt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ul(this.value.arrayValue,t)}}class rR extends vt{constructor(e,t){super(e,"not-in",t)}matches(e){if(ul(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ul(this.value.arrayValue,t)}}class sR extends vt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Wf(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>ul(this.value.arrayValue,s)))}}class iR{constructor(e,t=null,s=[],o=[],l=null,h=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=h,this.endAt=f,this.Te=null}}function Qy(r,e=null,t=[],s=[],o=null,l=null,h=null){return new iR(r,e,t,s,o,l,h)}function Hf(r){const e=ke(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>hf(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),wl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>jo(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>jo(s))).join(",")),e.Te=t}return e.Te}function Gf(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!XA(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!iw(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Ky(r.startAt,e.startAt)&&Ky(r.endAt,e.endAt)}function df(r){return _e.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}class El{constructor(e,t=null,s=[],o=[],l=null,h="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=h,this.startAt=f,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function oR(r,e,t,s,o,l,h,f){return new El(r,e,t,s,o,l,h,f)}function zc(r){return new El(r)}function Xy(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function lw(r){return r.collectionGroup!==null}function Ja(r){const e=ke(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let f=new At(bt.comparator);return h.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(f=f.add(y.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new wc(l,s))})),t.has(bt.keyField().canonicalString())||e.Ie.push(new wc(bt.keyField(),s))}return e.Ie}function cr(r){const e=ke(r);return e.Ee||(e.Ee=aR(e,Ja(r))),e.Ee}function aR(r,e){if(r.limitType==="F")return Qy(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new wc(o.field,l)}));const t=r.endAt?new vc(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new vc(r.startAt.position,r.startAt.inclusive):null;return Qy(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function ff(r,e){const t=r.filters.concat([e]);return new El(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Ec(r,e,t){return new El(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function $c(r,e){return Gf(cr(r),cr(e))&&r.limitType===e.limitType}function uw(r){return`${Hf(cr(r))}|lt:${r.limitType}`}function Ao(r){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>ow(o))).join(", ")}]`),wl(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>jo(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>jo(o))).join(",")),`Target(${s})`})(cr(r))}; limitType=${r.limitType})`}function qc(r,e){return e.isFoundDocument()&&(function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):_e.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(r,e)&&(function(s,o){for(const l of Ja(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0})(r,e)&&(function(s,o){return!(s.startAt&&!(function(h,f,g){const y=Gy(h,f,g);return h.inclusive?y<=0:y<0})(s.startAt,Ja(s),o)||s.endAt&&!(function(h,f,g){const y=Gy(h,f,g);return h.inclusive?y>=0:y>0})(s.endAt,Ja(s),o))})(r,e)}function lR(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function cw(r){return(e,t)=>{let s=!1;for(const o of Ja(r)){const l=uR(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function uR(r,e,t){const s=r.field.isKeyField()?_e.comparator(e.key,t.key):(function(l,h,f){const g=h.data.field(l),y=f.data.field(l);return g!==null&&y!==null?bo(g,y):ve(42886)})(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return ve(19790,{direction:r.dir})}}class Vi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){qs(this.inner,((t,s)=>{for(const[o,l]of s)e(o,l)}))}isEmpty(){return Gv(this.inner)}size(){return this.innerSize}}const cR=new ot(_e.comparator);function zr(){return cR}const hw=new ot(_e.comparator);function Ga(...r){let e=hw;for(const t of r)e=e.insert(t.key,t);return e}function dw(r){let e=hw;return r.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function Si(){return Za()}function fw(){return Za()}function Za(){return new Vi((r=>r.toString()),((r,e)=>r.isEqual(e)))}const hR=new ot(_e.comparator),dR=new At(_e.comparator);function be(...r){let e=dR;for(const t of r)e=e.add(t);return e}const fR=new At(Le);function pR(){return fR}function Kf(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gc(e)?"-0":e}}function pw(r){return{integerValue:""+r}}function mR(r,e){return zA(e)?pw(e):Kf(r,e)}class Wc{constructor(){this._=void 0}}function gR(r,e,t){return r instanceof cl?(function(o,l){const h={fields:{[Xv]:{stringValue:Qv},[Jv]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&qf(l)&&(l=Bc(l)),l&&(h.fields[Yv]=l),{mapValue:h}})(t,e):r instanceof hl?gw(r,e):r instanceof dl?yw(r,e):(function(o,l){const h=mw(o,l),f=Yy(h)+Yy(o.Ae);return cf(h)&&cf(o.Ae)?pw(f):Kf(o.serializer,f)})(r,e)}function yR(r,e,t){return r instanceof hl?gw(r,e):r instanceof dl?yw(r,e):t}function mw(r,e){return r instanceof Tc?(function(s){return cf(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class cl extends Wc{}class hl extends Wc{constructor(e){super(),this.elements=e}}function gw(r,e){const t=_w(e);for(const s of r.elements)t.some((o=>pr(o,s)))||t.push(s);return{arrayValue:{values:t}}}class dl extends Wc{constructor(e){super(),this.elements=e}}function yw(r,e){let t=_w(e);for(const s of r.elements)t=t.filter((o=>!pr(o,s)));return{arrayValue:{values:t}}}class Tc extends Wc{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Yy(r){return ft(r.integerValue||r.doubleValue)}function _w(r){return Wf(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class _R{constructor(e,t){this.field=e,this.transform=t}}function vR(r,e){return r.field.isEqual(e.field)&&(function(s,o){return s instanceof hl&&o instanceof hl||s instanceof dl&&o instanceof dl?Lo(s.elements,o.elements,pr):s instanceof Tc&&o instanceof Tc?pr(s.Ae,o.Ae):s instanceof cl&&o instanceof cl})(r.transform,e.transform)}class wR{constructor(e,t){this.version=e,this.transformResults=t}}class jt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new jt}static exists(e){return new jt(void 0,e)}static updateTime(e){return new jt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Hc{}function vw(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Gc(r.key,jt.none()):new Tl(r.key,r.data,jt.none());{const t=r.data,s=Yt.empty();let o=new At(bt.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?s.delete(l):s.set(l,h),o=o.add(l)}return new Ws(r.key,s,new yn(o.toArray()),jt.none())}}function ER(r,e,t){r instanceof Tl?(function(o,l,h){const f=o.value.clone(),g=Zy(o.fieldTransforms,l,h.transformResults);f.setAll(g),l.convertToFoundDocument(h.version,f).setHasCommittedMutations()})(r,e,t):r instanceof Ws?(function(o,l,h){if(!sc(o.precondition,l))return void l.convertToUnknownDocument(h.version);const f=Zy(o.fieldTransforms,l,h.transformResults),g=l.data;g.setAll(ww(o)),g.setAll(f),l.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(r,e,t):(function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function el(r,e,t,s){return r instanceof Tl?(function(l,h,f,g){if(!sc(l.precondition,h))return f;const y=l.value.clone(),E=e_(l.fieldTransforms,g,h);return y.setAll(E),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null})(r,e,t,s):r instanceof Ws?(function(l,h,f,g){if(!sc(l.precondition,h))return f;const y=e_(l.fieldTransforms,g,h),E=h.data;return E.setAll(ww(l)),E.setAll(y),h.convertToFoundDocument(h.version,E).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((v=>v.field)))})(r,e,t,s):(function(l,h,f){return sc(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):f})(r,e,t)}function TR(r,e){let t=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),l=mw(s.transform,o||null);l!=null&&(t===null&&(t=Yt.empty()),t.set(s.field,l))}return t||null}function Jy(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Lo(s,o,((l,h)=>vR(l,h)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Tl extends Hc{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ws extends Hc{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function ww(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}})),e}function Zy(r,e,t){const s=new Map;Be(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let o=0;o<t.length;o++){const l=r[o],h=l.transform,f=e.data.field(l.field);s.set(l.field,yR(h,f,t[o]))}return s}function e_(r,e,t){const s=new Map;for(const o of r){const l=o.transform,h=t.data.field(o.field);s.set(o.field,gR(l,h,e))}return s}class Gc extends Hc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ew extends Hc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class IR{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&ER(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=el(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=el(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=fw();return this.mutations.forEach((o=>{const l=e.get(o.key),h=l.overlayedDocument;let f=this.applyToLocalView(h,l.mutatedFields);f=t.has(o.key)?null:f;const g=vw(h,f);g!==null&&s.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(Se.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),be())}isEqual(e){return this.batchId===e.batchId&&Lo(this.mutations,e.mutations,((t,s)=>Jy(t,s)))&&Lo(this.baseMutations,e.baseMutations,((t,s)=>Jy(t,s)))}}class Qf{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){Be(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return hR})();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,s[h].version);return new Qf(e,t,s,o)}}class SR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class AR{constructor(e,t){this.count=e,this.unchangedNames=t}}var _t,Ue;function Tw(r){switch(r){case H.OK:return ve(64938);case H.CANCELLED:case H.UNKNOWN:case H.DEADLINE_EXCEEDED:case H.RESOURCE_EXHAUSTED:case H.INTERNAL:case H.UNAVAILABLE:case H.UNAUTHENTICATED:return!1;case H.INVALID_ARGUMENT:case H.NOT_FOUND:case H.ALREADY_EXISTS:case H.PERMISSION_DENIED:case H.FAILED_PRECONDITION:case H.ABORTED:case H.OUT_OF_RANGE:case H.UNIMPLEMENTED:case H.DATA_LOSS:return!0;default:return ve(15467,{code:r})}}function Iw(r){if(r===void 0)return Br("GRPC error has no .code"),H.UNKNOWN;switch(r){case _t.OK:return H.OK;case _t.CANCELLED:return H.CANCELLED;case _t.UNKNOWN:return H.UNKNOWN;case _t.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case _t.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case _t.INTERNAL:return H.INTERNAL;case _t.UNAVAILABLE:return H.UNAVAILABLE;case _t.UNAUTHENTICATED:return H.UNAUTHENTICATED;case _t.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case _t.NOT_FOUND:return H.NOT_FOUND;case _t.ALREADY_EXISTS:return H.ALREADY_EXISTS;case _t.PERMISSION_DENIED:return H.PERMISSION_DENIED;case _t.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case _t.ABORTED:return H.ABORTED;case _t.OUT_OF_RANGE:return H.OUT_OF_RANGE;case _t.UNIMPLEMENTED:return H.UNIMPLEMENTED;case _t.DATA_LOSS:return H.DATA_LOSS;default:return ve(39323,{code:r})}}(Ue=_t||(_t={}))[Ue.OK=0]="OK",Ue[Ue.CANCELLED=1]="CANCELLED",Ue[Ue.UNKNOWN=2]="UNKNOWN",Ue[Ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ue[Ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ue[Ue.NOT_FOUND=5]="NOT_FOUND",Ue[Ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ue[Ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ue[Ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ue[Ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ue[Ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ue[Ue.ABORTED=10]="ABORTED",Ue[Ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ue[Ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ue[Ue.INTERNAL=13]="INTERNAL",Ue[Ue.UNAVAILABLE=14]="UNAVAILABLE",Ue[Ue.DATA_LOSS=15]="DATA_LOSS";function RR(){return new TextEncoder}const CR=new Vs([4294967295,4294967295],0);function t_(r){const e=RR().encode(r),t=new Lv;return t.update(e),new Uint8Array(t.digest())}function n_(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Vs([t,s],0),new Vs([o,l],0)]}class Xf{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Ka(`Invalid padding: ${t}`);if(s<0)throw new Ka(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Ka(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Ka(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Vs.fromNumber(this.ge)}ye(e,t,s){let o=e.add(t.multiply(Vs.fromNumber(s)));return o.compare(CR)===1&&(o=new Vs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=t_(e),[s,o]=n_(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(s,o,l);if(!this.we(h))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new Xf(l,o,t);return s.forEach((f=>h.insert(f))),h}insert(e){if(this.ge===0)return;const t=t_(e),[s,o]=n_(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(s,o,l);this.Se(h)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Ka extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Kc{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,Il.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Kc(Se.min(),o,new ot(Le),zr(),be())}}class Il{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Il(s,t,be(),be(),be())}}class ic{constructor(e,t,s,o){this.be=e,this.removedTargetIds=t,this.key=s,this.De=o}}class Sw{constructor(e,t){this.targetId=e,this.Ce=t}}class Aw{constructor(e,t,s=Ft.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class r_{constructor(){this.ve=0,this.Fe=s_(),this.Me=Ft.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=be(),t=be(),s=be();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:ve(38017,{changeType:l})}})),new Il(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=s_()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Be(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class PR{constructor(e){this.Ge=e,this.ze=new Map,this.je=zr(),this.Je=Ku(),this.He=Ku(),this.Ye=new ot(Le)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:ve(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,s=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(df(l))if(s===0){const h=new _e(l.path);this.et(t,h,Nt.newNoDocument(h,Se.min()))}else Be(s===1,20013,{expectedCount:s});else{const h=this._t(t);if(h!==s){const f=this.ut(e),g=f?this.ct(f,e,h):1;if(g!==0){this.it(t);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let h,f;try{h=js(s).toUint8Array()}catch(g){if(g instanceof Kv)return Mo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{f=new Xf(h,o,l)}catch(g){return Mo(g instanceof Ka?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return f.ge===0?null:f}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let o=0;return s.forEach((l=>{const h=this.Ge.ht(),f=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,h)=>{const f=this.ot(h);if(f){if(l.current&&df(f.target)){const g=new _e(f.target.path);this.It(g).has(h)||this.Et(h,g)||this.et(h,g,Nt.newNoDocument(g,e))}l.Be&&(t.set(h,l.ke()),l.qe())}}));let s=be();this.He.forEach(((l,h)=>{let f=!0;h.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(s=s.add(l))})),this.je.forEach(((l,h)=>h.setReadTime(e)));const o=new Kc(e,t,this.Ye,this.je,s);return this.je=zr(),this.Je=Ku(),this.He=Ku(),this.Ye=new ot(Le),o}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new r_,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new At(Le),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new At(Le),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ue("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new r_),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Ku(){return new ot(_e.comparator)}function s_(){return new ot(_e.comparator)}const kR={asc:"ASCENDING",desc:"DESCENDING"},xR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},NR={and:"AND",or:"OR"};class DR{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function pf(r,e){return r.useProto3Json||wl(e)?e:{value:e}}function Ic(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Rw(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function VR(r,e){return Ic(r,e.toTimestamp())}function _n(r){return Be(!!r,49232),Se.fromTimestamp((function(t){const s=bs(t);return new nt(s.seconds,s.nanos)})(r))}function Yf(r,e){return mf(r,e).canonicalString()}function mf(r,e){const t=(function(o){return new Xe(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function Cw(r){const e=Xe.fromString(r);return Be(Vw(e),10190,{key:e.toString()}),e}function Sc(r,e){return Yf(r.databaseId,e.path)}function tl(r,e){const t=Cw(e);if(t.get(1)!==r.databaseId.projectId)throw new oe(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new oe(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new _e(kw(t))}function Pw(r,e){return Yf(r.databaseId,e)}function OR(r){const e=Cw(r);return e.length===4?Xe.emptyPath():kw(e)}function gf(r){return new Xe(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function kw(r){return Be(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function i_(r,e,t){return{name:Sc(r,e),fields:t.value.mapValue.fields}}function MR(r,e){return"found"in e?(function(s,o){Be(!!o.found,43571),o.found.name,o.found.updateTime;const l=tl(s,o.found.name),h=_n(o.found.updateTime),f=o.found.createTime?_n(o.found.createTime):Se.min(),g=new Yt({mapValue:{fields:o.found.fields}});return Nt.newFoundDocument(l,h,f,g)})(r,e):"missing"in e?(function(s,o){Be(!!o.missing,3894),Be(!!o.readTime,22933);const l=tl(s,o.missing),h=_n(o.readTime);return Nt.newNoDocument(l,h)})(r,e):ve(7234,{result:e})}function LR(r,e){let t;if("targetChange"in e){e.targetChange;const s=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:ve(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(y,E){return y.useProto3Json?(Be(E===void 0||typeof E=="string",58123),Ft.fromBase64String(E||"")):(Be(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),Ft.fromUint8Array(E||new Uint8Array))})(r,e.targetChange.resumeToken),h=e.targetChange.cause,f=h&&(function(y){const E=y.code===void 0?H.UNKNOWN:Iw(y.code);return new oe(E,y.message||"")})(h);t=new Aw(s,o,l,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=tl(r,s.document.name),l=_n(s.document.updateTime),h=s.document.createTime?_n(s.document.createTime):Se.min(),f=new Yt({mapValue:{fields:s.document.fields}}),g=Nt.newFoundDocument(o,l,h,f),y=s.targetIds||[],E=s.removedTargetIds||[];t=new ic(y,E,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=tl(r,s.document),l=s.readTime?_n(s.readTime):Se.min(),h=Nt.newNoDocument(o,l),f=s.removedTargetIds||[];t=new ic([],f,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=tl(r,s.document),l=s.removedTargetIds||[];t=new ic([],l,o,null)}else{if(!("filter"in e))return ve(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,h=new AR(o,l),f=s.targetId;t=new Sw(f,h)}}return t}function xw(r,e){let t;if(e instanceof Tl)t={update:i_(r,e.key,e.value)};else if(e instanceof Gc)t={delete:Sc(r,e.key)};else if(e instanceof Ws)t={update:i_(r,e.key,e.data),updateMask:WR(e.fieldMask)};else{if(!(e instanceof Ew))return ve(16599,{Vt:e.type});t={verify:Sc(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,h){const f=h.transform;if(f instanceof cl)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof hl)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof dl)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Tc)return{fieldPath:h.field.canonicalString(),increment:f.Ae};throw ve(20930,{transform:h.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:VR(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:ve(27497)})(r,e.precondition)),t}function bR(r,e){return r&&r.length>0?(Be(e!==void 0,14353),r.map((t=>(function(o,l){let h=o.updateTime?_n(o.updateTime):_n(l);return h.isEqual(Se.min())&&(h=_n(l)),new wR(h,o.transformResults||[])})(t,e)))):[]}function jR(r,e){return{documents:[Pw(r,e.path)]}}function FR(r,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=Pw(r,o);const l=(function(y){if(y.length!==0)return Dw(zn.create(y,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const h=(function(y){if(y.length!==0)return y.map((E=>(function(R){return{field:Ro(R.field),direction:zR(R.dir)}})(E)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const f=pf(r,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:o}}function UR(r){let e=OR(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){Be(s===1,65062);const E=t.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let l=[];t.where&&(l=(function(v){const R=Nw(v);return R instanceof zn&&sw(R)?R.getFilters():[R]})(t.where));let h=[];t.orderBy&&(h=(function(v){return v.map((R=>(function(q){return new wc(Co(q.field),(function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(q.direction))})(R)))})(t.orderBy));let f=null;t.limit&&(f=(function(v){let R;return R=typeof v=="object"?v.value:v,wl(R)?null:R})(t.limit));let g=null;t.startAt&&(g=(function(v){const R=!!v.before,M=v.values||[];return new vc(M,R)})(t.startAt));let y=null;return t.endAt&&(y=(function(v){const R=!v.before,M=v.values||[];return new vc(M,R)})(t.endAt)),oR(e,o,h,l,f,"F",g,y)}function BR(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ve(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Nw(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Co(t.unaryFilter.field);return vt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Co(t.unaryFilter.field);return vt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Co(t.unaryFilter.field);return vt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Co(t.unaryFilter.field);return vt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ve(61313);default:return ve(60726)}})(r):r.fieldFilter!==void 0?(function(t){return vt.create(Co(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ve(58110);default:return ve(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return zn.create(t.compositeFilter.filters.map((s=>Nw(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return ve(1026)}})(t.compositeFilter.op))})(r):ve(30097,{filter:r})}function zR(r){return kR[r]}function $R(r){return xR[r]}function qR(r){return NR[r]}function Ro(r){return{fieldPath:r.canonicalString()}}function Co(r){return bt.fromServerFormat(r.fieldPath)}function Dw(r){return r instanceof vt?(function(t){if(t.op==="=="){if(Hy(t.value))return{unaryFilter:{field:Ro(t.field),op:"IS_NAN"}};if(Wy(t.value))return{unaryFilter:{field:Ro(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Hy(t.value))return{unaryFilter:{field:Ro(t.field),op:"IS_NOT_NAN"}};if(Wy(t.value))return{unaryFilter:{field:Ro(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ro(t.field),op:$R(t.op),value:t.value}}})(r):r instanceof zn?(function(t){const s=t.getFilters().map((o=>Dw(o)));return s.length===1?s[0]:{compositeFilter:{op:qR(t.op),filters:s}}})(r):ve(54877,{filter:r})}function WR(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Vw(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}class Cs{constructor(e,t,s,o,l=Se.min(),h=Se.min(),f=Ft.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new Cs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Cs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class HR{constructor(e){this.yt=e}}function GR(r){const e=UR({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Ec(e,e.limit,"L"):e}class KR{constructor(){this.Cn=new QR}addToCollectionParentIndex(e,t){return this.Cn.add(t),X.resolve()}getCollectionParents(e,t){return X.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return X.resolve()}deleteFieldIndex(e,t){return X.resolve()}deleteAllFieldIndexes(e){return X.resolve()}createTargetIndexes(e,t){return X.resolve()}getDocumentsMatchingTarget(e,t){return X.resolve(null)}getIndexType(e,t){return X.resolve(0)}getFieldIndexes(e,t){return X.resolve([])}getNextCollectionGroupToUpdate(e){return X.resolve(null)}getMinOffset(e,t){return X.resolve(Ls.min())}getMinOffsetFromCollectionGroup(e,t){return X.resolve(Ls.min())}updateCollectionGroup(e,t,s){return X.resolve()}updateIndexEntries(e,t){return X.resolve()}}class QR{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new At(Xe.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new At(Xe.comparator)).toArray()}}const o_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ow=41943040;class on{static withCacheSize(e){return new on(e,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}on.DEFAULT_COLLECTION_PERCENTILE=10,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,on.DEFAULT=new on(Ow,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),on.DISABLED=new on(-1,0,0);class Fo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Fo(0)}static cr(){return new Fo(-1)}}const a_="LruGarbageCollector",XR=1048576;function l_([r,e],[t,s]){const o=Le(r,t);return o===0?Le(e,s):o}class YR{constructor(e){this.Ir=e,this.buffer=new At(l_),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();l_(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class JR{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ue(a_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ko(t)?ue(a_,"Ignoring IndexedDB error during garbage collection: ",t):await Go(t)}await this.Vr(3e5)}))}}class ZR{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return X.resolve(Uc.ce);const s=new YR(t);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),X.resolve(o_)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),o_):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,o,l,h,f,g,y;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),o=this.params.maximumSequenceNumbersToCollect):o=v,h=Date.now(),this.nthSequenceNumber(e,o)))).next((v=>(s=v,f=Date.now(),this.removeTargets(e,s,t)))).next((v=>(l=v,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((v=>(y=Date.now(),So()<=Me.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-E}ms
	Determined least recently used ${o} in `+(f-h)+`ms
	Removed ${l} targets in `+(g-f)+`ms
	Removed ${v} documents in `+(y-g)+`ms
Total Duration: ${y-E}ms`),X.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:v}))))}}function eC(r,e){return new ZR(r,e)}class tC{constructor(){this.changes=new Vi((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Nt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?X.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class nC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class rC{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&el(s.mutation,o,yn.empty(),nt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,be()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=be()){const o=Si();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((l=>{let h=Ga();return l.forEach(((f,g)=>{h=h.insert(f,g.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const s=Si();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,be())))}populateOverlays(e,t,s){const o=[];return s.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((h,f)=>{t.set(h,f)}))}))}computeViews(e,t,s,o){let l=zr();const h=Za(),f=(function(){return Za()})();return t.forEach(((g,y)=>{const E=s.get(y.key);o.has(y.key)&&(E===void 0||E.mutation instanceof Ws)?l=l.insert(y.key,y):E!==void 0?(h.set(y.key,E.mutation.getFieldMask()),el(E.mutation,y,E.mutation.getFieldMask(),nt.now())):h.set(y.key,yn.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((y,E)=>h.set(y,E))),t.forEach(((y,E)=>f.set(y,new nC(E,h.get(y)??null)))),f)))}recalculateAndSaveOverlays(e,t){const s=Za();let o=new ot(((h,f)=>h-f)),l=be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const f of h)f.keys().forEach((g=>{const y=t.get(g);if(y===null)return;let E=s.get(g)||yn.empty();E=f.applyToLocalView(y,E),s.set(g,E);const v=(o.get(f.batchId)||be()).add(g);o=o.insert(f.batchId,v)}))})).next((()=>{const h=[],f=o.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),y=g.key,E=g.value,v=fw();E.forEach((R=>{if(!l.has(R)){const M=vw(t.get(R),s.get(R));M!==null&&v.set(R,M),l=l.add(R)}})),h.push(this.documentOverlayCache.saveOverlays(e,y,v))}return X.waitFor(h)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return(function(h){return _e.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):lw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):X.resolve(Si());let f=ol,g=l;return h.next((y=>X.forEach(y,((E,v)=>(f<v.largestBatchId&&(f=v.largestBatchId),l.get(E)?X.resolve():this.remoteDocumentCache.getEntry(e,E).next((R=>{g=g.insert(E,R)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,g,y,be()))).next((E=>({batchId:f,changes:dw(E)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new _e(t)).next((s=>{let o=Ga();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let h=Ga();return this.indexManager.getCollectionParents(e,l).next((f=>X.forEach(f,(g=>{const y=(function(v,R){return new El(R,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,s,o).next((E=>{E.forEach(((v,R)=>{h=h.insert(v,R)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o)))).next((h=>{l.forEach(((g,y)=>{const E=y.getKey();h.get(E)===null&&(h=h.insert(E,Nt.newInvalidDocument(E)))}));let f=Ga();return h.forEach(((g,y)=>{const E=l.get(g);E!==void 0&&el(E.mutation,y,yn.empty(),nt.now()),qc(t,y)&&(f=f.insert(g,y))})),f}))}}class sC{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return X.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:_n(o.createTime)}})(t)),X.resolve()}getNamedQuery(e,t){return X.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:GR(o.bundledQuery),readTime:_n(o.readTime)}})(t)),X.resolve()}}class iC{constructor(){this.overlays=new ot(_e.comparator),this.qr=new Map}getOverlay(e,t){return X.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Si();return X.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&s.set(o,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,l)=>{this.St(e,t,l)})),X.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),X.resolve()}getOverlaysForCollection(e,t,s){const o=Si(),l=t.length+1,h=new _e(t.child("")),f=this.overlays.getIteratorFrom(h);for(;f.hasNext();){const g=f.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&g.largestBatchId>s&&o.set(g.getKey(),g)}return X.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new ot(((y,E)=>y-E));const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>s){let E=l.get(y.largestBatchId);E===null&&(E=Si(),l=l.insert(y.largestBatchId,E)),E.set(y.getKey(),y)}}const f=Si(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,E)=>f.set(y,E))),!(f.size()>=o)););return X.resolve(f)}St(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new SR(t,s));let l=this.qr.get(t);l===void 0&&(l=be(),this.qr.set(t,l)),this.qr.set(t,l.add(s.key))}}class oC{constructor(){this.sessionToken=Ft.EMPTY_BYTE_STRING}getSessionToken(e){return X.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,X.resolve()}}class Jf{constructor(){this.Qr=new At(xt.$r),this.Ur=new At(xt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new xt(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new xt(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new _e(new Xe([])),s=new xt(t,e),o=new xt(t,e+1),l=[];return this.Ur.forEachInRange([s,o],(h=>{this.Gr(h),l.push(h.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new _e(new Xe([])),s=new xt(t,e),o=new xt(t,e+1);let l=be();return this.Ur.forEachInRange([s,o],(h=>{l=l.add(h.key)})),l}containsKey(e){const t=new xt(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class xt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return _e.comparator(e.key,t.key)||Le(e.Yr,t.Yr)}static Kr(e,t){return Le(e.Yr,t.Yr)||_e.comparator(e.key,t.key)}}class aC{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new At(xt.$r)}checkEmpty(e){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new IR(l,t,s,o);this.mutationQueue.push(h);for(const f of o)this.Zr=this.Zr.add(new xt(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return X.resolve(h)}lookupMutationBatch(e,t){return X.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.ei(s),l=o<0?0:o;return X.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?$f:this.tr-1)}getAllMutationBatches(e){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new xt(t,0),o=new xt(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,o],(h=>{const f=this.Xr(h.Yr);l.push(f)})),X.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new At(Le);return t.forEach((o=>{const l=new xt(o,0),h=new xt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,h],(f=>{s=s.add(f.Yr)}))})),X.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;_e.isDocumentKey(l)||(l=l.child(""));const h=new xt(new _e(l),0);let f=new At(Le);return this.Zr.forEachWhile((g=>{const y=g.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(f=f.add(g.Yr)),!0)}),h),X.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Be(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return X.forEach(t.mutations,(o=>{const l=new xt(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new xt(t,0),o=this.Zr.firstAfterOrEqual(s);return X.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,X.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class lC{constructor(e){this.ri=e,this.docs=(function(){return new ot(_e.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,h=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return X.resolve(s?s.document.mutableCopy():Nt.newInvalidDocument(t))}getEntries(e,t){let s=zr();return t.forEach((o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():Nt.newInvalidDocument(o))})),X.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=zr();const h=t.path,f=new _e(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:y,value:{document:E}}=g.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||jA(bA(E),s)<=0||(o.has(E.key)||qc(t,E))&&(l=l.insert(E.key,E.mutableCopy()))}return X.resolve(l)}getAllFromCollectionGroup(e,t,s,o){ve(9500)}ii(e,t){return X.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new uC(this)}getSize(e){return X.resolve(this.size)}}class uC extends tC{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),X.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class cC{constructor(e){this.persistence=e,this.si=new Vi((t=>Hf(t)),Gf),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.oi=0,this._i=new Jf,this.targetCount=0,this.ai=Fo.ur()}forEachTarget(e,t){return this.si.forEach(((s,o)=>t(o))),X.resolve()}getLastRemoteSnapshotVersion(e){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return X.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),X.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Fo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,X.resolve()}updateTargetData(e,t){return this.Pr(t),X.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,X.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.si.forEach(((h,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.si.delete(h),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)})),X.waitFor(l).next((()=>o))}getTargetCount(e){return X.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return X.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),X.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((h=>{l.push(o.markPotentiallyOrphaned(e,h))})),X.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),X.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return X.resolve(s)}containsKey(e,t){return X.resolve(this._i.containsKey(t))}}class Mw{constructor(e,t){this.ui={},this.overlays={},this.ci=new Uc(0),this.li=!1,this.li=!0,this.hi=new oC,this.referenceDelegate=e(this),this.Pi=new cC(this),this.indexManager=new KR,this.remoteDocumentCache=(function(o){return new lC(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new HR(t),this.Ii=new sC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new iC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new aC(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){ue("MemoryPersistence","Starting transaction:",e);const o=new hC(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ai(e,t){return X.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class hC extends UA{constructor(e){super(),this.currentSequenceNumber=e}}class Zf{constructor(e){this.persistence=e,this.Ri=new Jf,this.Vi=null}static mi(e){return new Zf(e)}get fi(){if(this.Vi)return this.Vi;throw ve(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),X.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),X.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),X.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.fi,(s=>{const o=_e.fromPath(s);return this.gi(e,o).next((l=>{l||t.removeEntry(o,Se.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return X.or([()=>X.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Ac{constructor(e,t){this.persistence=e,this.pi=new Vi((s=>$A(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=eC(this,t)}static mi(e,t){return new Ac(e,t)}Ei(){}di(e){return X.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return X.forEach(this.pi,((s,o)=>this.br(e,s,o).next((l=>l?X.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,(h=>this.br(e,h,t).next((f=>{f||(s++,l.removeEntry(h,Se.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),X.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),X.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),X.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),X.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=nc(e.data.value)),t}br(e,t,s){return X.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return X.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class ep{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=o}static As(e,t){let s=be(),o=be();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new ep(e,t.fromCache,s,o)}}class dC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class fC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return oI()?8:BA(Kt())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.ys(e,t).next((h=>{l.result=h})).next((()=>{if(!l.result)return this.ws(e,t,o,s).next((h=>{l.result=h}))})).next((()=>{if(l.result)return;const h=new dC;return this.Ss(e,t,h).next((f=>{if(l.result=f,this.Vs)return this.bs(e,t,h,f.size)}))})).next((()=>l.result))}bs(e,t,s,o){return s.documentReadCount<this.fs?(So()<=Me.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",Ao(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),X.resolve()):(So()<=Me.DEBUG&&ue("QueryEngine","Query:",Ao(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(So()<=Me.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",Ao(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,cr(t))):X.resolve())}ys(e,t){if(Xy(t))return X.resolve(null);let s=cr(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Ec(t,null,"F"),s=cr(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const h=be(...l);return this.ps.getDocuments(e,h).next((f=>this.indexManager.getMinOffset(e,s).next((g=>{const y=this.Ds(t,f);return this.Cs(t,y,h,g.readTime)?this.ys(e,Ec(t,null,"F")):this.vs(e,y,t,g)}))))})))))}ws(e,t,s,o){return Xy(t)||o.isEqual(Se.min())?X.resolve(null):this.ps.getDocuments(e,s).next((l=>{const h=this.Ds(t,l);return this.Cs(t,h,s,o)?X.resolve(null):(So()<=Me.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ao(t)),this.vs(e,h,t,LA(o,ol)).next((f=>f)))}))}Ds(e,t){let s=new At(cw(e));return t.forEach(((o,l)=>{qc(e,l)&&(s=s.add(l))})),s}Cs(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,s){return So()<=Me.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",Ao(t)),this.ps.getDocumentsMatchingQuery(e,t,Ls.min(),s)}vs(e,t,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((l=>(t.forEach((h=>{l=l.insert(h.key,h)})),l)))}}const tp="LocalStore",pC=3e8;class mC{constructor(e,t,s,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new ot(Le),this.xs=new Vi((l=>Hf(l)),Gf),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new rC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function gC(r,e,t,s){return new mC(r,e,t,s)}async function Lw(r,e){const t=ke(r);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((l=>(o=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const h=[],f=[];let g=be();for(const y of o){h.push(y.batchId);for(const E of y.mutations)g=g.add(E.key)}for(const y of l){f.push(y.batchId);for(const E of y.mutations)g=g.add(E.key)}return t.localDocuments.getDocuments(s,g).next((y=>({Ls:y,removedBatchIds:h,addedBatchIds:f})))}))}))}function yC(r,e){const t=ke(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,g,y,E){const v=y.batch,R=v.keys();let M=X.resolve();return R.forEach((q=>{M=M.next((()=>E.getEntry(g,q))).next(($=>{const b=y.docVersions.get(q);Be(b!==null,48541),$.version.compareTo(b)<0&&(v.applyToRemoteDocument($,y),$.isValidDocument()&&($.setReadTime(y.commitVersion),E.addEntry($)))}))})),M.next((()=>f.mutationQueue.removeMutationBatch(g,v)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(f){let g=be();for(let y=0;y<f.mutationResults.length;++y)f.mutationResults[y].transformResults.length>0&&(g=g.add(f.batch.mutations[y].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function bw(r){const e=ke(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function _C(r,e){const t=ke(r),s=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const h=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const f=[];e.targetChanges.forEach(((E,v)=>{const R=o.get(v);if(!R)return;f.push(t.Pi.removeMatchingKeys(l,E.removedDocuments,v).next((()=>t.Pi.addMatchingKeys(l,E.addedDocuments,v))));let M=R.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(v)!==null?M=M.withResumeToken(Ft.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):E.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(E.resumeToken,s)),o=o.insert(v,M),(function($,b,re){return $.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=pC?!0:re.addedDocuments.size+re.modifiedDocuments.size+re.removedDocuments.size>0})(R,M,E)&&f.push(t.Pi.updateTargetData(l,M))}));let g=zr(),y=be();if(e.documentUpdates.forEach((E=>{e.resolvedLimboDocuments.has(E)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,E))})),f.push(vC(l,h,e.documentUpdates).next((E=>{g=E.ks,y=E.qs}))),!s.isEqual(Se.min())){const E=t.Pi.getLastRemoteSnapshotVersion(l).next((v=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));f.push(E)}return X.waitFor(f).next((()=>h.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,y))).next((()=>g))})).then((l=>(t.Ms=o,l)))}function vC(r,e,t){let s=be(),o=be();return t.forEach((l=>s=s.add(l))),e.getEntries(r,s).next((l=>{let h=zr();return t.forEach(((f,g)=>{const y=l.get(f);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(f)),g.isNoDocument()&&g.version.isEqual(Se.min())?(e.removeEntry(f,g.readTime),h=h.insert(f,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),h=h.insert(f,g)):ue(tp,"Ignoring outdated watch update for ",f,". Current version:",y.version," Watch version:",g.version)})),{ks:h,qs:o}}))}function wC(r,e){const t=ke(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=$f),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function EC(r,e){const t=ke(r);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.Pi.getTargetData(s,e).next((l=>l?(o=l,X.resolve(o)):t.Pi.allocateTargetId(s).next((h=>(o=new Cs(e,h,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function yf(r,e,t){const s=ke(r),o=s.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(h=>s.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!Ko(h))throw h;ue(tp,`Failed to update sequence numbers for target ${e}: ${h}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function u_(r,e,t){const s=ke(r);let o=Se.min(),l=be();return s.persistence.runTransaction("Execute query","readwrite",(h=>(function(g,y,E){const v=ke(g),R=v.xs.get(E);return R!==void 0?X.resolve(v.Ms.get(R)):v.Pi.getTargetData(y,E)})(s,h,cr(e)).next((f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(h,f.targetId).next((g=>{l=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(h,e,t?o:Se.min(),t?l:be()))).next((f=>(TC(s,lR(e),f),{documents:f,Qs:l})))))}function TC(r,e,t){let s=r.Os.get(e)||Se.min();t.forEach(((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),r.Os.set(e,s)}class c_{constructor(){this.activeTargetIds=pR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class IC{constructor(){this.Mo=new c_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new c_,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class SC{Oo(e){}shutdown(){}}const h_="ConnectivityMonitor";class d_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ue(h_,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ue(h_,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Qu=null;function _f(){return Qu===null?Qu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Qu++,"0x"+Qu.toString(16)}const Bd="RestConnection",AC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class RC{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===yc?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,t,s,o,l){const h=_f(),f=this.zo(e,t.toUriEncodedString());ue(Bd,`Sending RPC '${e}' ${h}:`,f,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,l);const{host:y}=new URL(f),E=$o(y);return this.Jo(e,f,g,s,E).then((v=>(ue(Bd,`Received RPC '${e}' ${h}: `,v),v)),(v=>{throw Mo(Bd,`RPC '${e}' ${h} failed with error: `,v,"url: ",f,"request:",s),v}))}Ho(e,t,s,o,l,h){return this.Go(e,t,s,o,l)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ho})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),s&&s.headers.forEach(((o,l)=>e[l]=o))}zo(e,t){const s=AC[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}class CC{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Wt="WebChannelConnection";class PC extends RC{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,o,l){const h=_f();return new Promise(((f,g)=>{const y=new bv;y.setWithCredentials(!0),y.listenOnce(jv.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case tc.NO_ERROR:const v=y.getResponseJson();ue(Wt,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(v)),f(v);break;case tc.TIMEOUT:ue(Wt,`RPC '${e}' ${h} timed out`),g(new oe(H.DEADLINE_EXCEEDED,"Request time out"));break;case tc.HTTP_ERROR:const R=y.getStatus();if(ue(Wt,`RPC '${e}' ${h} failed with status:`,R,"response text:",y.getResponseText()),R>0){let M=y.getResponseJson();Array.isArray(M)&&(M=M[0]);const q=M?.error;if(q&&q.status&&q.message){const $=(function(re){const se=re.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(se)>=0?se:H.UNKNOWN})(q.status);g(new oe($,q.message))}else g(new oe(H.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new oe(H.UNAVAILABLE,"Connection failed."));break;default:ve(9055,{l_:e,streamId:h,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{ue(Wt,`RPC '${e}' ${h} completed.`)}}));const E=JSON.stringify(o);ue(Wt,`RPC '${e}' ${h} sending request:`,o),y.send(t,"POST",E,s,15)}))}T_(e,t,s){const o=_f(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=Bv(),f=Uv(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const E=l.join("");ue(Wt,`Creating RPC '${e}' stream ${o}: ${E}`,g);const v=h.createWebChannel(E,g);this.I_(v);let R=!1,M=!1;const q=new CC({Yo:b=>{M?ue(Wt,`Not sending because RPC '${e}' stream ${o} is closed:`,b):(R||(ue(Wt,`Opening RPC '${e}' stream ${o} transport.`),v.open(),R=!0),ue(Wt,`RPC '${e}' stream ${o} sending:`,b),v.send(b))},Zo:()=>v.close()}),$=(b,re,se)=>{b.listen(re,(ie=>{try{se(ie)}catch(G){setTimeout((()=>{throw G}),0)}}))};return $(v,Ha.EventType.OPEN,(()=>{M||(ue(Wt,`RPC '${e}' stream ${o} transport opened.`),q.o_())})),$(v,Ha.EventType.CLOSE,(()=>{M||(M=!0,ue(Wt,`RPC '${e}' stream ${o} transport closed`),q.a_(),this.E_(v))})),$(v,Ha.EventType.ERROR,(b=>{M||(M=!0,Mo(Wt,`RPC '${e}' stream ${o} transport errored. Name:`,b.name,"Message:",b.message),q.a_(new oe(H.UNAVAILABLE,"The operation could not be completed")))})),$(v,Ha.EventType.MESSAGE,(b=>{if(!M){const re=b.data[0];Be(!!re,16349);const se=re,ie=se?.error||se[0]?.error;if(ie){ue(Wt,`RPC '${e}' stream ${o} received error:`,ie);const G=ie.status;let ae=(function(S){const C=_t[S];if(C!==void 0)return Iw(C)})(G),Q=ie.message;ae===void 0&&(ae=H.INTERNAL,Q="Unknown error status: "+G+" with message "+ie.message),M=!0,q.a_(new oe(ae,Q)),v.close()}else ue(Wt,`RPC '${e}' stream ${o} received:`,re),q.u_(re)}})),$(f,Fv.STAT_EVENT,(b=>{b.stat===af.PROXY?ue(Wt,`RPC '${e}' stream ${o} detected buffering proxy`):b.stat===af.NOPROXY&&ue(Wt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{q.__()}),0),q}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function zd(){return typeof document<"u"?document:null}function Qc(r){return new DR(r,!0)}class np{constructor(e,t,s=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-s);o>0&&ue("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const f_="PersistentStream";class jw{constructor(e,t,s,o,l,h,f,g){this.Mi=e,this.S_=s,this.b_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new np(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===H.RESOURCE_EXHAUSTED?(Br(t.toString()),Br("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===t&&this.G_(s,o)}),(s=>{e((()=>{const o=new oe(H.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ue(f_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ue(f_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class kC extends jw{constructor(e,t,s,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,h),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=LR(this.serializer,e),s=(function(l){if(!("targetChange"in l))return Se.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Se.min():h.readTime?_n(h.readTime):Se.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=gf(this.serializer),t.addTarget=(function(l,h){let f;const g=h.target;if(f=df(g)?{documents:jR(l,g)}:{query:FR(l,g).ft},f.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){f.resumeToken=Rw(l,h.resumeToken);const y=pf(l,h.expectedCount);y!==null&&(f.expectedCount=y)}else if(h.snapshotVersion.compareTo(Se.min())>0){f.readTime=Ic(l,h.snapshotVersion.toTimestamp());const y=pf(l,h.expectedCount);y!==null&&(f.expectedCount=y)}return f})(this.serializer,e);const s=BR(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=gf(this.serializer),t.removeTarget=e,this.q_(t)}}class xC extends jw{constructor(e,t,s,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,h),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Be(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Be(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Be(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=bR(e.writeResults,e.commitTime),s=_n(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=gf(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>xw(this.serializer,s)))};this.q_(t)}}class NC{}class DC extends NC{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new oe(H.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Go(e,mf(t,s),o,l,h))).catch((l=>{throw l.name==="FirebaseError"?(l.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new oe(H.UNKNOWN,l.toString())}))}Ho(e,t,s,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,f])=>this.connection.Ho(e,mf(t,s),o,h,f,l))).catch((h=>{throw h.name==="FirebaseError"?(h.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new oe(H.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class VC{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Br(t),this.aa=!1):ue("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Ni="RemoteStore";class OC{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((h=>{s.enqueueAndForget((async()=>{Oi(this)&&(ue(Ni,"Restarting streams for network reachability change."),await(async function(g){const y=ke(g);y.Ea.add(4),await Sl(y),y.Ra.set("Unknown"),y.Ea.delete(4),await Xc(y)})(this))}))})),this.Ra=new VC(s,o)}}async function Xc(r){if(Oi(r))for(const e of r.da)await e(!0)}async function Sl(r){for(const e of r.da)await e(!1)}function Fw(r,e){const t=ke(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),op(t)?ip(t):Qo(t).O_()&&sp(t,e))}function rp(r,e){const t=ke(r),s=Qo(t);t.Ia.delete(e),s.O_()&&Uw(t,e),t.Ia.size===0&&(s.O_()?s.L_():Oi(t)&&t.Ra.set("Unknown"))}function sp(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Qo(r).Y_(e)}function Uw(r,e){r.Va.Ue(e),Qo(r).Z_(e)}function ip(r){r.Va=new PR({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Qo(r).start(),r.Ra.ua()}function op(r){return Oi(r)&&!Qo(r).x_()&&r.Ia.size>0}function Oi(r){return ke(r).Ea.size===0}function Bw(r){r.Va=void 0}async function MC(r){r.Ra.set("Online")}async function LC(r){r.Ia.forEach(((e,t)=>{sp(r,e)}))}async function bC(r,e){Bw(r),op(r)?(r.Ra.ha(e),ip(r)):r.Ra.set("Unknown")}async function jC(r,e,t){if(r.Ra.set("Online"),e instanceof Aw&&e.state===2&&e.cause)try{await(async function(o,l){const h=l.cause;for(const f of l.targetIds)o.Ia.has(f)&&(await o.remoteSyncer.rejectListen(f,h),o.Ia.delete(f),o.Va.removeTarget(f))})(r,e)}catch(s){ue(Ni,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Rc(r,s)}else if(e instanceof ic?r.Va.Ze(e):e instanceof Sw?r.Va.st(e):r.Va.tt(e),!t.isEqual(Se.min()))try{const s=await bw(r.localStore);t.compareTo(s)>=0&&await(function(l,h){const f=l.Va.Tt(h);return f.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const E=l.Ia.get(y);E&&l.Ia.set(y,E.withResumeToken(g.resumeToken,h))}})),f.targetMismatches.forEach(((g,y)=>{const E=l.Ia.get(g);if(!E)return;l.Ia.set(g,E.withResumeToken(Ft.EMPTY_BYTE_STRING,E.snapshotVersion)),Uw(l,g);const v=new Cs(E.target,g,y,E.sequenceNumber);sp(l,v)})),l.remoteSyncer.applyRemoteEvent(f)})(r,t)}catch(s){ue(Ni,"Failed to raise snapshot:",s),await Rc(r,s)}}async function Rc(r,e,t){if(!Ko(e))throw e;r.Ea.add(1),await Sl(r),r.Ra.set("Offline"),t||(t=()=>bw(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ue(Ni,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Xc(r)}))}function zw(r,e){return e().catch((t=>Rc(r,t,e)))}async function Yc(r){const e=ke(r),t=Us(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:$f;for(;FC(e);)try{const o=await wC(e.localStore,s);if(o===null){e.Ta.length===0&&t.L_();break}s=o.batchId,UC(e,o)}catch(o){await Rc(e,o)}$w(e)&&qw(e)}function FC(r){return Oi(r)&&r.Ta.length<10}function UC(r,e){r.Ta.push(e);const t=Us(r);t.O_()&&t.X_&&t.ea(e.mutations)}function $w(r){return Oi(r)&&!Us(r).x_()&&r.Ta.length>0}function qw(r){Us(r).start()}async function BC(r){Us(r).ra()}async function zC(r){const e=Us(r);for(const t of r.Ta)e.ea(t.mutations)}async function $C(r,e,t){const s=r.Ta.shift(),o=Qf.from(s,e,t);await zw(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Yc(r)}async function qC(r,e){e&&Us(r).X_&&await(async function(s,o){if((function(h){return Tw(h)&&h!==H.ABORTED})(o.code)){const l=s.Ta.shift();Us(s).B_(),await zw(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o))),await Yc(s)}})(r,e),$w(r)&&qw(r)}async function p_(r,e){const t=ke(r);t.asyncQueue.verifyOperationInProgress(),ue(Ni,"RemoteStore received new credentials");const s=Oi(t);t.Ea.add(3),await Sl(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Xc(t)}async function WC(r,e){const t=ke(r);e?(t.Ea.delete(2),await Xc(t)):e||(t.Ea.add(2),await Sl(t),t.Ra.set("Unknown"))}function Qo(r){return r.ma||(r.ma=(function(t,s,o){const l=ke(t);return l.sa(),new kC(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Xo:MC.bind(null,r),t_:LC.bind(null,r),r_:bC.bind(null,r),H_:jC.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),op(r)?ip(r):r.Ra.set("Unknown")):(await r.ma.stop(),Bw(r))}))),r.ma}function Us(r){return r.fa||(r.fa=(function(t,s,o){const l=ke(t);return l.sa(),new xC(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:BC.bind(null,r),r_:qC.bind(null,r),ta:zC.bind(null,r),na:$C.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await Yc(r)):(await r.fa.stop(),r.Ta.length>0&&(ue(Ni,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class ap{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new ur,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const h=Date.now()+s,f=new ap(e,t,h,o,l);return f.start(s),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new oe(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function lp(r,e){if(Br("AsyncQueue",`${e}: ${r}`),Ko(r))return new oe(H.UNAVAILABLE,`${e}: ${r}`);throw r}class Do{static emptySet(e){return new Do(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||_e.comparator(t.key,s.key):(t,s)=>_e.comparator(t.key,s.key),this.keyedMap=Ga(),this.sortedSet=new ot(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Do)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Do;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class m_{constructor(){this.ga=new ot(_e.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ve(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class Uo{constructor(e,t,s,o,l,h,f,g,y){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,t,s,o,l){const h=[];return t.forEach((f=>{h.push({type:0,doc:f})})),new Uo(e,t,Do.emptySet(t),h,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$c(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}class HC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class GC{constructor(){this.queries=g_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const o=ke(t),l=o.queries;o.queries=g_(),l.forEach(((h,f)=>{for(const g of f.Sa)g.onError(s)}))})(this,new oe(H.ABORTED,"Firestore shutting down"))}}function g_(){return new Vi((r=>uw(r)),$c)}async function up(r,e){const t=ke(r);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.ba()&&e.Da()&&(s=2):(l=new HC,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const f=lp(h,`Initialization of query '${Ao(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&hp(t)}async function cp(r,e){const t=ke(r),s=e.query;let o=3;const l=t.queries.get(s);if(l){const h=l.Sa.indexOf(e);h>=0&&(l.Sa.splice(h,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function KC(r,e){const t=ke(r);let s=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const f of h.Sa)f.Fa(o)&&(s=!0);h.wa=o}}s&&hp(t)}function QC(r,e,t){const s=ke(r),o=s.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);s.queries.delete(e)}function hp(r){r.Ca.forEach((e=>{e.next()}))}var vf,y_;(y_=vf||(vf={})).Ma="default",y_.Cache="cache";class dp{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Uo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Uo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==vf.Cache}}class Ww{constructor(e){this.key=e}}class Hw{constructor(e){this.key=e}}class XC{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=be(),this.mutatedKeys=be(),this.eu=cw(e),this.tu=new Do(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new m_,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,f=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((E,v)=>{const R=o.get(E),M=qc(this.query,v)?v:null,q=!!R&&this.mutatedKeys.has(R.key),$=!!M&&(M.hasLocalMutations||this.mutatedKeys.has(M.key)&&M.hasCommittedMutations);let b=!1;R&&M?R.data.isEqual(M.data)?q!==$&&(s.track({type:3,doc:M}),b=!0):this.su(R,M)||(s.track({type:2,doc:M}),b=!0,(g&&this.eu(M,g)>0||y&&this.eu(M,y)<0)&&(f=!0)):!R&&M?(s.track({type:0,doc:M}),b=!0):R&&!M&&(s.track({type:1,doc:R}),b=!0,(g||y)&&(f=!0)),b&&(M?(h=h.add(M),l=$?l.add(E):l.delete(E)):(h=h.delete(E),l=l.delete(E)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const E=this.query.limitType==="F"?h.last():h.first();h=h.delete(E.key),l=l.delete(E.key),s.track({type:1,doc:E})}return{tu:h,iu:s,Cs:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((E,v)=>(function(M,q){const $=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ve(20277,{Rt:b})}};return $(M)-$(q)})(E.type,v.type)||this.eu(E.doc,v.doc))),this.ou(s),o=o??!1;const f=t&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,y=g!==this.Za;return this.Za=g,h.length!==0||y?{snapshot:new Uo(this.query,e.tu,l,h,e.mutatedKeys,g===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new m_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=be(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new Hw(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new Ww(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=be();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Uo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const fp="SyncEngine";class YC{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class JC{constructor(e){this.key=e,this.hu=!1}}class ZC{constructor(e,t,s,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new Vi((f=>uw(f)),$c),this.Iu=new Map,this.Eu=new Set,this.du=new ot(_e.comparator),this.Au=new Map,this.Ru=new Jf,this.Vu={},this.mu=new Map,this.fu=Fo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function eP(r,e,t=!0){const s=Jw(r);let o;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await Gw(s,e,t,!0),o}async function tP(r,e){const t=Jw(r);await Gw(t,e,!0,!1)}async function Gw(r,e,t,s){const o=await EC(r.localStore,cr(e)),l=o.targetId,h=r.sharedClientState.addLocalQueryTarget(l,t);let f;return s&&(f=await nP(r,e,l,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&Fw(r.remoteStore,o),f}async function nP(r,e,t,s,o){r.pu=(v,R,M)=>(async function($,b,re,se){let ie=b.view.ru(re);ie.Cs&&(ie=await u_($.localStore,b.query,!1).then((({documents:I})=>b.view.ru(I,ie))));const G=se&&se.targetChanges.get(b.targetId),ae=se&&se.targetMismatches.get(b.targetId)!=null,Q=b.view.applyChanges(ie,$.isPrimaryClient,G,ae);return v_($,b.targetId,Q.au),Q.snapshot})(r,v,R,M);const l=await u_(r.localStore,e,!0),h=new XC(e,l.Qs),f=h.ru(l.documents),g=Il.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",o),y=h.applyChanges(f,r.isPrimaryClient,g);v_(r,t,y.au);const E=new YC(e,t,h);return r.Tu.set(e,E),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),y.snapshot}async function rP(r,e,t){const s=ke(r),o=s.Tu.get(e),l=s.Iu.get(o.targetId);if(l.length>1)return s.Iu.set(o.targetId,l.filter((h=>!$c(h,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await yf(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&rp(s.remoteStore,o.targetId),wf(s,o.targetId)})).catch(Go)):(wf(s,o.targetId),await yf(s.localStore,o.targetId,!0))}async function sP(r,e){const t=ke(r),s=t.Tu.get(e),o=t.Iu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),rp(t.remoteStore,s.targetId))}async function iP(r,e,t){const s=dP(r);try{const o=await(function(h,f){const g=ke(h),y=nt.now(),E=f.reduce(((M,q)=>M.add(q.key)),be());let v,R;return g.persistence.runTransaction("Locally write mutations","readwrite",(M=>{let q=zr(),$=be();return g.Ns.getEntries(M,E).next((b=>{q=b,q.forEach(((re,se)=>{se.isValidDocument()||($=$.add(re))}))})).next((()=>g.localDocuments.getOverlayedDocuments(M,q))).next((b=>{v=b;const re=[];for(const se of f){const ie=TR(se,v.get(se.key).overlayedDocument);ie!=null&&re.push(new Ws(se.key,ie,tw(ie.value.mapValue),jt.exists(!0)))}return g.mutationQueue.addMutationBatch(M,y,re,f)})).next((b=>{R=b;const re=b.applyToLocalDocumentSet(v,$);return g.documentOverlayCache.saveOverlays(M,b.batchId,re)}))})).then((()=>({batchId:R.batchId,changes:dw(v)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(h,f,g){let y=h.Vu[h.currentUser.toKey()];y||(y=new ot(Le)),y=y.insert(f,g),h.Vu[h.currentUser.toKey()]=y})(s,o.batchId,t),await Al(s,o.changes),await Yc(s.remoteStore)}catch(o){const l=lp(o,"Failed to persist write");t.reject(l)}}async function Kw(r,e){const t=ke(r);try{const s=await _C(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const h=t.Au.get(l);h&&(Be(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?Be(h.hu,14607):o.removedDocuments.size>0&&(Be(h.hu,42227),h.hu=!1))})),await Al(t,s,e)}catch(s){await Go(s)}}function __(r,e,t){const s=ke(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Tu.forEach(((l,h)=>{const f=h.view.va(e);f.snapshot&&o.push(f.snapshot)})),(function(h,f){const g=ke(h);g.onlineState=f;let y=!1;g.queries.forEach(((E,v)=>{for(const R of v.Sa)R.va(f)&&(y=!0)})),y&&hp(g)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function oP(r,e,t){const s=ke(r);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Au.get(e),l=o&&o.key;if(l){let h=new ot(_e.comparator);h=h.insert(l,Nt.newNoDocument(l,Se.min()));const f=be().add(l),g=new Kc(Se.min(),new Map,new ot(Le),h,f);await Kw(s,g),s.du=s.du.remove(l),s.Au.delete(e),pp(s)}else await yf(s.localStore,e,!1).then((()=>wf(s,e,t))).catch(Go)}async function aP(r,e){const t=ke(r),s=e.batch.batchId;try{const o=await yC(t.localStore,e);Xw(t,s,null),Qw(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Al(t,o)}catch(o){await Go(o)}}async function lP(r,e,t){const s=ke(r);try{const o=await(function(h,f){const g=ke(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let E;return g.mutationQueue.lookupMutationBatch(y,f).next((v=>(Be(v!==null,37113),E=v.keys(),g.mutationQueue.removeMutationBatch(y,v)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,E,f))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,E))).next((()=>g.localDocuments.getDocuments(y,E)))}))})(s.localStore,e);Xw(s,e,t),Qw(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Al(s,o)}catch(o){await Go(o)}}function Qw(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function Xw(r,e,t){const s=ke(r);let o=s.Vu[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function wf(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),t&&r.Pu.yu(s,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((s=>{r.Ru.containsKey(s)||Yw(r,s)}))}function Yw(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(rp(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),pp(r))}function v_(r,e,t){for(const s of t)s instanceof Ww?(r.Ru.addReference(s.key,e),uP(r,s)):s instanceof Hw?(ue(fp,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||Yw(r,s.key)):ve(19791,{wu:s})}function uP(r,e){const t=e.key,s=t.path.canonicalString();r.du.get(t)||r.Eu.has(s)||(ue(fp,"New document in limbo: "+t),r.Eu.add(s),pp(r))}function pp(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new _e(Xe.fromString(e)),s=r.fu.next();r.Au.set(s,new JC(t)),r.du=r.du.insert(t,s),Fw(r.remoteStore,new Cs(cr(zc(t.path)),s,"TargetPurposeLimboResolution",Uc.ce))}}async function Al(r,e,t){const s=ke(r),o=[],l=[],h=[];s.Tu.isEmpty()||(s.Tu.forEach(((f,g)=>{h.push(s.pu(g,e,t).then((y=>{if((y||t)&&s.isPrimaryClient){const E=y?!y.fromCache:t?.targetChanges.get(g.targetId)?.current;s.sharedClientState.updateQueryState(g.targetId,E?"current":"not-current")}if(y){o.push(y);const E=ep.As(g.targetId,y);l.push(E)}})))})),await Promise.all(h),s.Pu.H_(o),await(async function(g,y){const E=ke(g);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>X.forEach(y,(R=>X.forEach(R.Es,(M=>E.persistence.referenceDelegate.addReference(v,R.targetId,M))).next((()=>X.forEach(R.ds,(M=>E.persistence.referenceDelegate.removeReference(v,R.targetId,M)))))))))}catch(v){if(!Ko(v))throw v;ue(tp,"Failed to update sequence numbers: "+v)}for(const v of y){const R=v.targetId;if(!v.fromCache){const M=E.Ms.get(R),q=M.snapshotVersion,$=M.withLastLimboFreeSnapshotVersion(q);E.Ms=E.Ms.insert(R,$)}}})(s.localStore,l))}async function cP(r,e){const t=ke(r);if(!t.currentUser.isEqual(e)){ue(fp,"User change. New user:",e.toKey());const s=await Lw(t.localStore,e);t.currentUser=e,(function(l,h){l.mu.forEach((f=>{f.forEach((g=>{g.reject(new oe(H.CANCELLED,h))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Al(t,s.Ls)}}function hP(r,e){const t=ke(r),s=t.Au.get(e);if(s&&s.hu)return be().add(s.key);{let o=be();const l=t.Iu.get(e);if(!l)return o;for(const h of l){const f=t.Tu.get(h);o=o.unionWith(f.view.nu)}return o}}function Jw(r){const e=ke(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=Kw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=oP.bind(null,e),e.Pu.H_=KC.bind(null,e.eventManager),e.Pu.yu=QC.bind(null,e.eventManager),e}function dP(r){const e=ke(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=aP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lP.bind(null,e),e}class Cc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Qc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return gC(this.persistence,new fC,e.initialUser,this.serializer)}Cu(e){return new Mw(Zf.mi,this.serializer)}Du(e){return new IC}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Cc.provider={build:()=>new Cc};class fP extends Cc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Be(this.persistence.referenceDelegate instanceof Ac,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new JR(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?on.withCacheSize(this.cacheSizeBytes):on.DEFAULT;return new Mw((s=>Ac.mi(s,t)),this.serializer)}}class Ef{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>__(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=cP.bind(null,this.syncEngine),await WC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new GC})()}createDatastore(e){const t=Qc(e.databaseInfo.databaseId),s=(function(l){return new PC(l)})(e.databaseInfo);return(function(l,h,f,g){return new DC(l,h,f,g)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,l,h,f){return new OC(s,o,l,h,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>__(this.syncEngine,t,0)),(function(){return d_.v()?new d_:new SC})())}createSyncEngine(e,t){return(function(o,l,h,f,g,y,E){const v=new ZC(o,l,h,f,g,y);return E&&(v.gu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const s=ke(t);ue(Ni,"RemoteStore shutting down."),s.Ea.add(5),await Sl(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Ef.provider={build:()=>new Ef};class mp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Br("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class pP{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new oe(H.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(o,l){const h=ke(o),f={documents:l.map((v=>Sc(h.serializer,v)))},g=await h.Ho("BatchGetDocuments",h.serializer.databaseId,Xe.emptyPath(),f,l.length),y=new Map;g.forEach((v=>{const R=MR(h.serializer,v);y.set(R.key.toString(),R)}));const E=[];return l.forEach((v=>{const R=y.get(v.toString());Be(!!R,55234,{key:v}),E.push(R)})),E})(this.datastore,e);return t.forEach((s=>this.recordVersion(s))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new Gc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,s)=>{const o=_e.fromPath(s);this.mutations.push(new Ew(o,this.precondition(o)))})),await(async function(s,o){const l=ke(s),h={writes:o.map((f=>xw(l.serializer,f)))};await l.Go("Commit",l.serializer.databaseId,Xe.emptyPath(),h)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ve(50498,{Gu:e.constructor.name});t=Se.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new oe(H.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Se.min())?jt.exists(!1):jt.updateTime(t):jt.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Se.min()))throw new oe(H.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return jt.updateTime(t)}return jt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class mP{constructor(e,t,s,o,l){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=o,this.deferred=l,this.zu=s.maxAttempts,this.M_=new np(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new pP(this.datastore),t=this.Hu(e);t&&t.then((s=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(s)})).catch((o=>{this.Yu(o)}))))})).catch((s=>{this.Yu(s)}))}))}Hu(e){try{const t=this.updateFunction(e);return!wl(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!Tw(t)}return!1}}const Bs="FirestoreClient";class gP{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=Ht.UNAUTHENTICATED,this.clientId=zf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async h=>{ue(Bs,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(s,(h=>(ue(Bs,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ur;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=lp(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function $d(r,e){r.asyncQueue.verifyOperationInProgress(),ue(Bs,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener((async o=>{s.isEqual(o)||(await Lw(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function w_(r,e){r.asyncQueue.verifyOperationInProgress();const t=await yP(r);ue(Bs,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((s=>p_(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,o)=>p_(e.remoteStore,o))),r._onlineComponents=e}async function yP(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ue(Bs,"Using user provided OfflineComponentProvider");try{await $d(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===H.FAILED_PRECONDITION||o.code===H.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Mo("Error using user provided cache. Falling back to memory cache: "+t),await $d(r,new Cc)}}else ue(Bs,"Using default OfflineComponentProvider"),await $d(r,new fP(void 0));return r._offlineComponents}async function gp(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ue(Bs,"Using user provided OnlineComponentProvider"),await w_(r,r._uninitializedComponentsProvider._online)):(ue(Bs,"Using default OnlineComponentProvider"),await w_(r,new Ef))),r._onlineComponents}function _P(r){return gp(r).then((e=>e.syncEngine))}function vP(r){return gp(r).then((e=>e.datastore))}async function Pc(r){const e=await gp(r),t=e.eventManager;return t.onListen=eP.bind(null,e.syncEngine),t.onUnlisten=rP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=tP.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=sP.bind(null,e.syncEngine),t}function wP(r,e,t={}){const s=new ur;return r.asyncQueue.enqueueAndForget((async()=>(function(l,h,f,g,y){const E=new mp({next:R=>{E.Nu(),h.enqueueAndForget((()=>cp(l,v)));const M=R.docs.has(f);!M&&R.fromCache?y.reject(new oe(H.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&R.fromCache&&g&&g.source==="server"?y.reject(new oe(H.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(R)},error:R=>y.reject(R)}),v=new dp(zc(f.path),E,{includeMetadataChanges:!0,qa:!0});return up(l,v)})(await Pc(r),r.asyncQueue,e,t,s))),s.promise}function EP(r,e,t={}){const s=new ur;return r.asyncQueue.enqueueAndForget((async()=>(function(l,h,f,g,y){const E=new mp({next:R=>{E.Nu(),h.enqueueAndForget((()=>cp(l,v))),R.fromCache&&g.source==="server"?y.reject(new oe(H.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(R)},error:R=>y.reject(R)}),v=new dp(f,E,{includeMetadataChanges:!0,qa:!0});return up(l,v)})(await Pc(r),r.asyncQueue,e,t,s))),s.promise}function Zw(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const E_=new Map;const eE="firestore.googleapis.com",T_=!0;class I_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new oe(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=eE,this.ssl=T_}else this.host=e.host,this.ssl=e.ssl??T_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Ow;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<XR)throw new oe(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}MA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Zw(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new oe(H.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new oe(H.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new oe(H.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Jc{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new I_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new oe(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new oe(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new I_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new AA;switch(s.type){case"firstParty":return new kA(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new oe(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=E_.get(t);s&&(ue("ComponentProvider","Removing Datastore"),E_.delete(t),s.terminate())})(this),Promise.resolve()}}function TP(r,e,t,s={}){r=Pn(r,Jc);const o=$o(e),l=r._getSettings(),h={...l,emulatorOptions:r._getEmulatorOptions()},f=`${e}:${t}`;o&&(J_(`https://${f}`),Z_("Firestore",!0)),l.host!==eE&&l.host!==f&&Mo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:f,ssl:o,emulatorOptions:s};if(!Ci(g,h)&&(r._setSettings(g),s.mockUserToken)){let y,E;if(typeof s.mockUserToken=="string")y=s.mockUserToken,E=Ht.MOCK_USER;else{y=YT(s.mockUserToken,r._app?.options.projectId);const v=s.mockUserToken.sub||s.mockUserToken.user_id;if(!v)throw new oe(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new Ht(v)}r._authCredentials=new RA(new $v(y,E))}}class Hs{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Hs(this.firestore,e,this._query)}}class ut{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Os(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ut(this.firestore,e,this._key)}toJSON(){return{type:ut._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(vl(t,ut._jsonSchema))return new ut(e,s||null,new _e(Xe.fromString(t.referencePath)))}}ut._jsonSchemaVersion="firestore/documentReference/1.0",ut._jsonSchema={type:wt("string",ut._jsonSchemaVersion),referencePath:wt("string")};class Os extends Hs{constructor(e,t,s){super(e,t,zc(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ut(this.firestore,null,new _e(e))}withConverter(e){return new Os(this.firestore,e,this._path)}}function St(r,e,...t){if(r=Et(r),qv("collection","path",e),r instanceof Jc){const s=Xe.fromString(e,...t);return Ly(s),new Os(r,null,s)}{if(!(r instanceof ut||r instanceof Os))throw new oe(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Xe.fromString(e,...t));return Ly(s),new Os(r.firestore,null,s)}}function Ge(r,e,...t){if(r=Et(r),arguments.length===1&&(e=zf.newId()),qv("doc","path",e),r instanceof Jc){const s=Xe.fromString(e,...t);return My(s),new ut(r,null,new _e(s))}{if(!(r instanceof ut||r instanceof Os))throw new oe(H.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Xe.fromString(e,...t));return My(s),new ut(r.firestore,r instanceof Os?r.converter:null,new _e(s))}}const S_="AsyncQueue";class A_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new np(this,"async_queue_retry"),this._c=()=>{const s=zd();s&&ue(S_,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=zd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=zd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ur;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ko(e))throw e;ue(S_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Br("INTERNAL UNHANDLED ERROR: ",R_(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=ap.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&ve(47125,{Pc:R_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function R_(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}function C_(r){return(function(t,s){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of s)if(l in o&&typeof o[l]=="function")return!0;return!1})(r,["next","error","complete"])}class zs extends Jc{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new A_,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new A_(e),this._firestoreClient=void 0,await e}}}function IP(r,e){const t=typeof r=="object"?r:rv(),s=typeof r=="string"?r:yc,o=xf(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=QT("firestore");l&&TP(o,...l)}return o}function Xo(r){if(r._terminated)throw new oe(H.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||SP(r),r._firestoreClient}function SP(r){const e=r._freezeSettings(),t=(function(o,l,h,f){return new HA(o,l,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,Zw(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new gP(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(o){const l=o?._online.build();return{_offline:o?._offline.build(l),_online:l}})(r._componentsProvider))}class gn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new gn(Ft.fromBase64String(e))}catch(t){throw new oe(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new gn(Ft.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:gn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(vl(e,gn._jsonSchema))return gn.fromBase64String(e.bytes)}}gn._jsonSchemaVersion="firestore/bytes/1.0",gn._jsonSchema={type:wt("string",gn._jsonSchemaVersion),bytes:wt("string")};class Rl{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new oe(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Zc{constructor(e){this._methodName=e}}class hr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new oe(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new oe(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:hr._jsonSchemaVersion}}static fromJSON(e){if(vl(e,hr._jsonSchema))return new hr(e.latitude,e.longitude)}}hr._jsonSchemaVersion="firestore/geoPoint/1.0",hr._jsonSchema={type:wt("string",hr._jsonSchemaVersion),latitude:wt("number"),longitude:wt("number")};class dr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:dr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(vl(e,dr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new dr(e.vectorValues);throw new oe(H.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}dr._jsonSchemaVersion="firestore/vectorValue/1.0",dr._jsonSchema={type:wt("string",dr._jsonSchemaVersion),vectorValues:wt("object")};const AP=/^__.*__$/;class RP{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Ws(e,this.data,this.fieldMask,t,this.fieldTransforms):new Tl(e,this.data,t,this.fieldTransforms)}}class tE{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Ws(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function nE(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ve(40011,{Ac:r})}}class yp{constructor(e,t,s,o,l,h){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new yp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return kc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(nE(this.Ac)&&AP.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class CP{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Qc(e)}Cc(e,t,s,o=!1){return new yp({Ac:e,methodName:t,Dc:s,path:bt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function eh(r){const e=r._freezeSettings(),t=Qc(r._databaseId);return new CP(r._databaseId,!!e.ignoreUndefinedProperties,t)}function _p(r,e,t,s,o,l={}){const h=r.Cc(l.merge||l.mergeFields?2:0,e,t,o);wp("Data must be an object, but it was:",h,s);const f=iE(s,h);let g,y;if(l.merge)g=new yn(h.fieldMask),y=h.fieldTransforms;else if(l.mergeFields){const E=[];for(const v of l.mergeFields){const R=Tf(e,v,t);if(!h.contains(R))throw new oe(H.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);aE(E,R)||E.push(R)}g=new yn(E),y=h.fieldTransforms.filter((v=>g.covers(v.field)))}else g=null,y=h.fieldTransforms;return new RP(new Yt(f),g,y)}class th extends Zc{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof th}}class vp extends Zc{_toFieldTransform(e){return new _R(e.path,new cl)}isEqual(e){return e instanceof vp}}function rE(r,e,t,s){const o=r.Cc(1,e,t);wp("Data must be an object, but it was:",o,s);const l=[],h=Yt.empty();qs(s,((g,y)=>{const E=Ep(e,g,t);y=Et(y);const v=o.yc(E);if(y instanceof th)l.push(E);else{const R=Cl(y,v);R!=null&&(l.push(E),h.set(E,R))}}));const f=new yn(l);return new tE(h,f,o.fieldTransforms)}function sE(r,e,t,s,o,l){const h=r.Cc(1,e,t),f=[Tf(e,s,t)],g=[o];if(l.length%2!=0)throw new oe(H.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<l.length;R+=2)f.push(Tf(e,l[R])),g.push(l[R+1]);const y=[],E=Yt.empty();for(let R=f.length-1;R>=0;--R)if(!aE(y,f[R])){const M=f[R];let q=g[R];q=Et(q);const $=h.yc(M);if(q instanceof th)y.push(M);else{const b=Cl(q,$);b!=null&&(y.push(M),E.set(M,b))}}const v=new yn(y);return new tE(E,v,h.fieldTransforms)}function PP(r,e,t,s=!1){return Cl(t,r.Cc(s?4:3,e))}function Cl(r,e){if(oE(r=Et(r)))return wp("Unsupported field value:",e,r),iE(r,e);if(r instanceof Zc)return(function(s,o){if(!nE(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const l=[];let h=0;for(const f of s){let g=Cl(f,o.wc(h));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),h++}return{arrayValue:{values:l}}})(r,e)}return(function(s,o){if((s=Et(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return mR(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=nt.fromDate(s);return{timestampValue:Ic(o.serializer,l)}}if(s instanceof nt){const l=new nt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Ic(o.serializer,l)}}if(s instanceof hr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof gn)return{bytesValue:Rw(o.serializer,s._byteString)};if(s instanceof ut){const l=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(l))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Yf(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof dr)return(function(h,f){return{mapValue:{fields:{[Zv]:{stringValue:ew},[_c]:{arrayValue:{values:h.toArray().map((y=>{if(typeof y!="number")throw f.Sc("VectorValues must only contain numeric values.");return Kf(f.serializer,y)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${Fc(s)}`)})(r,e)}function iE(r,e){const t={};return Gv(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qs(r,((s,o)=>{const l=Cl(o,e.mc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function oE(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof nt||r instanceof hr||r instanceof gn||r instanceof ut||r instanceof Zc||r instanceof dr)}function wp(r,e,t){if(!oE(t)||!Wv(t)){const s=Fc(t);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function Tf(r,e,t){if((e=Et(e))instanceof Rl)return e._internalPath;if(typeof e=="string")return Ep(r,e);throw kc("Field path arguments must be of type string or ",r,!1,void 0,t)}const kP=new RegExp("[~\\*/\\[\\]]");function Ep(r,e,t){if(e.search(kP)>=0)throw kc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Rl(...e.split("."))._internalPath}catch{throw kc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function kc(r,e,t,s,o){const l=s&&!s.isEmpty(),h=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(l||h)&&(g+=" (found",l&&(g+=` in field ${s}`),h&&(g+=` in document ${o}`),g+=")"),new oe(H.INVALID_ARGUMENT,f+r+g)}function aE(r,e){return r.some((t=>t.isEqual(e)))}class xc{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new ut(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new xP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Tp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class xP extends xc{data(){return super.data()}}function Tp(r,e){return typeof e=="string"?Ep(r,e):e instanceof Rl?e._internalPath:e._delegate._internalPath}function lE(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new oe(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ip{}class uE extends Ip{}function br(r,e,...t){let s=[];e instanceof Ip&&s.push(e),s=s.concat(t),(function(l){const h=l.filter((g=>g instanceof Sp)).length,f=l.filter((g=>g instanceof nh)).length;if(h>1||h>0&&f>0)throw new oe(H.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)r=o._apply(r);return r}class nh extends uE{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new nh(e,t,s)}_apply(e){const t=this._parse(e);return cE(e._query,t),new Hs(e.firestore,e.converter,ff(e._query,t))}_parse(e){const t=eh(e.firestore);return(function(l,h,f,g,y,E,v){let R;if(y.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new oe(H.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){k_(v,E);const q=[];for(const $ of v)q.push(P_(g,l,$));R={arrayValue:{values:q}}}else R=P_(g,l,v)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||k_(v,E),R=PP(f,h,v,E==="in"||E==="not-in");return vt.create(y,E,R)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function jr(r,e,t){const s=e,o=Tp("where",r);return nh._create(o,s,t)}class Sp extends Ip{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Sp(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:zn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let h=o;const f=l.getFlattenedFilters();for(const g of f)cE(h,g),h=ff(h,g)})(e._query,t),new Hs(e.firestore,e.converter,ff(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ap extends uE{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new Ap(e,t,s)}_apply(e){return new Hs(e.firestore,e.converter,Ec(e._query,this._limit,this._limitType))}}function NP(r){return Ap._create("limit",r,"F")}function P_(r,e,t){if(typeof(t=Et(t))=="string"){if(t==="")throw new oe(H.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!lw(e)&&t.indexOf("/")!==-1)throw new oe(H.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Xe.fromString(t));if(!_e.isDocumentKey(s))throw new oe(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return qy(r,new _e(s))}if(t instanceof ut)return qy(r,t._key);throw new oe(H.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Fc(t)}.`)}function k_(r,e){if(!Array.isArray(r)||r.length===0)throw new oe(H.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function cE(r,e){const t=(function(o,l){for(const h of o)for(const f of h.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new oe(H.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new oe(H.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class hE{convertValue(e,t="none"){switch(Fs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ft(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(js(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ve(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return qs(e,((o,l)=>{s[o]=this.convertValue(l,t)})),s}convertVectorValue(e){const t=e.fields?.[_c].arrayValue?.values?.map((s=>ft(s.doubleValue)));return new dr(t)}convertGeoPoint(e){return new hr(ft(e.latitude),ft(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Bc(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(al(e));default:return null}}convertTimestamp(e){const t=bs(e);return new nt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Xe.fromString(e);Be(Vw(s),9688,{name:e});const o=new ll(s.get(1),s.get(3)),l=new _e(s.popFirst(5));return o.isEqual(t)||Br(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function Rp(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}class DP extends hE{constructor(e){super(),this.firestore=e}convertBytes(e){return new gn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ut(this.firestore,null,t)}}class Po{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ms extends xc{constructor(e,t,s,o,l,h){super(e,t,s,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new oc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Tp("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(H.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ms._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ms._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ms._jsonSchema={type:wt("string",Ms._jsonSchemaVersion),bundleSource:wt("string","DocumentSnapshot"),bundleName:wt("string"),bundle:wt("string")};class oc extends Ms{data(e={}){return super.data(e)}}class Ri{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Po(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new oc(this._firestore,this._userDataWriter,s.key,s,new Po(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new oe(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((f=>{const g=new oc(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Po(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const g=new oc(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Po(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,E=-1;return f.type!==0&&(y=h.indexOf(f.doc.key),h=h.delete(f.doc.key)),f.type!==1&&(h=h.add(f.doc),E=h.indexOf(f.doc.key)),{type:VP(f.type),doc:g,oldIndex:y,newIndex:E}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(H.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ri._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=zf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function VP(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ve(61501,{type:r})}}function $r(r){r=Pn(r,ut);const e=Pn(r.firestore,zs);return wP(Xo(e),r._key).then((t=>fE(e,r,t)))}Ri._jsonSchemaVersion="firestore/querySnapshot/1.0",Ri._jsonSchema={type:wt("string",Ri._jsonSchemaVersion),bundleSource:wt("string","QuerySnapshot"),bundleName:wt("string"),bundle:wt("string")};class rh extends hE{constructor(e){super(),this.firestore=e}convertBytes(e){return new gn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ut(this.firestore,null,t)}}function Jt(r){r=Pn(r,Hs);const e=Pn(r.firestore,zs),t=Xo(e),s=new rh(e);return lE(r._query),EP(t,r._query).then((o=>new Ri(e,s,r,o)))}function Gs(r,e,t){r=Pn(r,ut);const s=Pn(r.firestore,zs),o=Rp(r.converter,e,t);return dE(s,[_p(eh(s),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,jt.none())])}function OP(r,...e){r=Et(r);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||C_(e[s])||(t=e[s++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(C_(e[s])){const g=e[s];e[s]=g.next?.bind(g),e[s+1]=g.error?.bind(g),e[s+2]=g.complete?.bind(g)}let l,h,f;if(r instanceof ut)h=Pn(r.firestore,zs),f=zc(r._key.path),l={next:g=>{e[s]&&e[s](fE(h,r,g))},error:e[s+1],complete:e[s+2]};else{const g=Pn(r,Hs);h=Pn(g.firestore,zs),f=g._query;const y=new rh(h);l={next:E=>{e[s]&&e[s](new Ri(h,y,g,E))},error:e[s+1],complete:e[s+2]},lE(r._query)}return(function(y,E,v,R){const M=new mp(R),q=new dp(E,M,v);return y.asyncQueue.enqueueAndForget((async()=>up(await Pc(y),q))),()=>{M.Nu(),y.asyncQueue.enqueueAndForget((async()=>cp(await Pc(y),q)))}})(Xo(h),f,o,l)}function dE(r,e){return(function(s,o){const l=new ur;return s.asyncQueue.enqueueAndForget((async()=>iP(await _P(s),o,l))),l.promise})(Xo(r),e)}function fE(r,e,t){const s=t.docs.get(e._key),o=new rh(r);return new Ms(r,o,e._key,s,new Po(t.hasPendingWrites,t.fromCache),e.converter)}const MP={maxAttempts:5};class LP{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=eh(e)}set(e,t,s){this._verifyNotCommitted();const o=Ps(e,this._firestore),l=Rp(o.converter,t,s),h=_p(this._dataReader,"WriteBatch.set",o._key,l,o.converter!==null,s);return this._mutations.push(h.toMutation(o._key,jt.none())),this}update(e,t,s,...o){this._verifyNotCommitted();const l=Ps(e,this._firestore);let h;return h=typeof(t=Et(t))=="string"||t instanceof Rl?sE(this._dataReader,"WriteBatch.update",l._key,t,s,o):rE(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(h.toMutation(l._key,jt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ps(e,this._firestore);return this._mutations=this._mutations.concat(new Gc(t._key,jt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new oe(H.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ps(r,e){if((r=Et(r)).firestore!==e)throw new oe(H.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}class bP{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=eh(e)}get(e){const t=Ps(e,this._firestore),s=new DP(this._firestore);return this._transaction.lookup([t._key]).then((o=>{if(!o||o.length!==1)return ve(24041);const l=o[0];if(l.isFoundDocument())return new xc(this._firestore,s,l.key,l,t.converter);if(l.isNoDocument())return new xc(this._firestore,s,t._key,null,t.converter);throw ve(18433,{doc:l})}))}set(e,t,s){const o=Ps(e,this._firestore),l=Rp(o.converter,t,s),h=_p(this._dataReader,"Transaction.set",o._key,l,o.converter!==null,s);return this._transaction.set(o._key,h),this}update(e,t,s,...o){const l=Ps(e,this._firestore);let h;return h=typeof(t=Et(t))=="string"||t instanceof Rl?sE(this._dataReader,"Transaction.update",l._key,t,s,o):rE(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,h),this}delete(e){const t=Ps(e,this._firestore);return this._transaction.delete(t._key),this}}class jP extends bP{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ps(e,this._firestore),s=new rh(this._firestore);return super.get(e).then((o=>new Ms(this._firestore,s,t._key,o._document,new Po(!1,!1),t.converter)))}}function Cp(r,e,t){r=Pn(r,zs);const s={...MP,...t};return(function(l){if(l.maxAttempts<1)throw new oe(H.INVALID_ARGUMENT,"Max attempts must be at least 1")})(s),(function(l,h,f){const g=new ur;return l.asyncQueue.enqueueAndForget((async()=>{const y=await vP(l);new mP(l.asyncQueue,y,f,h,g).ju()})),g.promise})(Xo(r),(o=>e(new jP(r,o))),s)}function Gt(){return new vp("serverTimestamp")}function Pp(r){return Xo(r=Pn(r,zs)),new LP(r,(e=>dE(r,e)))}(function(e,t=!0){(function(o){Ho=o})(qo),Vo(new Pi("firestore",((s,{instanceIdentifier:o,options:l})=>{const h=s.getProvider("app").getImmediate(),f=new zs(new CA(s.getProvider("auth-internal")),new xA(h,s.getProvider("app-check-internal")),(function(y,E){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new oe(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ll(y.options.projectId,E)})(h,o),h);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),Ds(Ny,Dy,e),Ds(Ny,Dy,"esm2020")})();var FP="firebase",UP="12.7.0";Ds(FP,UP,"app");const BP={apiKey:"AIzaSyA-TURVnsMyyBOWreei2jGLcuXmOzyr_DQ",authDomain:"gamificationcollege.firebaseapp.com",projectId:"gamificationcollege",storageBucket:"gamificationcollege.firebasestorage.app",messagingSenderId:"237003198772",appId:"1:237003198772:web:37fc8130a083377a115561"},pE=nv(BP),qd=IA(pE),zP=new Or,Ie=IP(pE),mE=ye.createContext(null);function $P({children:r}){const[e,t]=ye.useState(null),[s,o]=ye.useState(null),[l,h]=ye.useState(!0);ye.useEffect(()=>{const y=h1(qd,async E=>{if(t(E),o(null),!E){h(!1);return}const v=Ge(Ie,"users",E.uid);(await $r(v)).exists()||await Gs(v,{displayName:E.displayName||"Utilisateur",role:"child",createdAt:Gt()});const M=await $r(v);o(M.data()?.role||"child"),h(!1)});return()=>y()},[]);const f=async()=>{await D1(qd,zP)},g=async()=>{await d1(qd)};return A.jsx(mE.Provider,{value:{user:e,role:s,loading:l,signInGoogle:f,signOutUser:g},children:r})}function Ks(){const r=ye.useContext(mE);if(!r)throw new Error("useAuth doit tre utilis sous <AuthProvider>");return r}function qP(){const{user:r,role:e,signOutUser:t}=Ks();return A.jsx("div",{className:"card",style:{marginBottom:14},children:A.jsxs("div",{className:"row",style:{justifyContent:"space-between"},children:[A.jsxs("div",{children:[A.jsx("div",{style:{fontWeight:900,fontSize:"1.05rem"},children:"Malo  Rvisions"}),A.jsx("div",{className:"small",children:r?A.jsxs(A.Fragment,{children:["Connect : ",A.jsx("strong",{children:r.displayName})," ",A.jsx("span",{className:"badge",children:e})]}):"Non connect"})]}),A.jsxs("div",{className:"row",style:{gap:8},children:[A.jsx(Io,{className:"btn secondary",to:"/",children:"Accueil"}),r&&A.jsx(Io,{className:"btn secondary",to:"/recompenses",children:"Rcompenses"}),e==="parent"&&A.jsxs(A.Fragment,{children:[A.jsx(Io,{className:"btn secondary",to:"/admin/import",children:"Import (parent)"}),A.jsx(Io,{className:"btn secondary",to:"/admin/moderation",children:"Modration"}),A.jsx(Io,{className:"btn secondary",to:"/admin/progression",children:"Progression"})]}),r&&A.jsx("button",{className:"btn secondary",onClick:t,children:"Dconnexion"})]})]})})}function Wd({children:r}){const{user:e,loading:t}=Ks();return t?A.jsx("div",{className:"card",children:"Chargement"}):e?A.jsx(A.Fragment,{children:r}):A.jsx(Qd,{to:"/connexion",replace:!0})}function Hd({children:r}){const{user:e,role:t,loading:s}=Ks();return s?A.jsx("div",{className:"card",children:"Chargement"}):e?t!=="parent"?A.jsx(Qd,{to:"/",replace:!0}):A.jsx(A.Fragment,{children:r}):A.jsx(Qd,{to:"/connexion",replace:!0})}function Bo(r){return(r||"").toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[]/g,"'").replace(/\s+/g," ").trim()}async function WP(){return(await Jt(St(Ie,"subjects"))).docs.map(e=>({id:e.id,...e.data()}))}async function gE(r,e){const{uid:t,includeHidden:s=!1,includeOverrides:o=!1}=e||{},l=br(St(Ie,"themes"),jr("subjectId","==",r)),f=(await Jt(l)).docs.map(E=>({id:E.id,...E.data()}));let g=new Map;if(t)try{const E=await Jt(St(Ie,"users",t,"visibilityThemes"));g=new Map(E.docs.map(v=>[v.id,!!v.data().visible]))}catch{g=new Map}const y=f.filter(E=>{const v=g.get(E.id);return!(!s&&E.hidden||!s&&v===!1)});return o?y.map(E=>({...E,visibleOverride:g.get(E.id)})):y}async function yE(r,e){const{uid:t,includeHidden:s=!1,includeOverrides:o=!1}=e||{},l=br(St(Ie,"exercises"),jr("themeId","==",r)),f=(await Jt(l)).docs.map(E=>({id:E.id,...E.data()}));let g=new Map;if(t)try{const E=await Jt(St(Ie,"users",t,"visibilityExercises"));g=new Map(E.docs.map(v=>[v.id,!!v.data().visible]))}catch{g=new Map}const y=f.filter(E=>{const v=g.get(E.id);return!(!s&&E.hidden||!s&&v===!1)});return o?y.map(E=>({...E,visibleOverride:g.get(E.id)})):y}async function HP(r){const e=br(St(Ie,"readings"),jr("themeId","==",r));try{return(await Jt(e)).docs.map(s=>({id:s.id,...s.data()}))}catch{return[]}}async function GP(r){const e=Pp(Ie);for(const t of r.subjects){e.set(Ge(Ie,"subjects",t.id),{title:t.title},{merge:!0});for(const s of t.themes){e.set(Ge(Ie,"themes",s.id),{subjectId:t.id,title:s.title,grade:r.grade,readings:Array.isArray(s.readings)?s.readings:[]},{merge:!0});for(const o of s.exercises){const l=Ge(Ie,"exercises",o.id),h={...o,themeId:s.id};h.tags=Array.isArray(h.tags)?h.tags.slice(0,3):[],h.type==="short_text"&&Array.isArray(h.expected)&&(h.expected=h.expected.map(f=>Bo(f))),h.type==="fill_blank"&&Array.isArray(h.expected)&&(h.expected=h.expected.map(f=>Bo(f))),e.set(l,h,{merge:!0})}if(Array.isArray(s.readings))for(const o of s.readings){if(!o.id||!o.title||!o.text||!Array.isArray(o.questions))continue;o.id,o.title,o.text,o.difficulty,Array.isArray(o.tags)&&o.tags.slice(0,3),o.questions.map(h=>({...h,type:"mcq",themeId:s.id,tags:Array.isArray(h.tags)?h.tags.slice(0,3):[]}));const l=Ge(Ie,"themes",s.id);e.set(l,{readings:[...(Array.isArray(s.readings)?s.readings:[]).map(h=>({...h,themeId:s.id}))]},{merge:!0})}}}await e.commit()}async function KP(r,e){await Gs(Ge(Ie,"themes",r),{hidden:e},{merge:!0})}async function QP(r,e){await Gs(Ge(Ie,"exercises",r),{hidden:e},{merge:!0})}async function XP(r,e,t){await Gs(Ge(Ie,"users",r,"visibilityThemes",e),{visible:t},{merge:!0})}async function YP(r,e,t){await Gs(Ge(Ie,"users",r,"visibilityExercises",e),{visible:t},{merge:!0})}async function JP(r){try{const e=Pp(Ie);return e.delete(Ge(Ie,"themes",r)),(await Jt(br(St(Ie,"exercises"),jr("themeId","==",r)))).docs.forEach(o=>e.delete(o.ref)),(await Jt(br(St(Ie,"readings"),jr("themeId","==",r)))).docs.forEach(o=>e.delete(o.ref)),await e.commit(),{deleted:!0}}catch{return await Gs(Ge(Ie,"themes",r),{hidden:!0},{merge:!0}),{deleted:!1,hidden:!0}}}async function kp(r){const e=Ge(Ie,"users",r,"stats","main"),t=await $r(e);return t.exists()?t.data():(await Gs(e,{xp:0,coins:0,streakDays:0,lastDoneDate:null,badges:[],updatedAt:Gt()}),(await $r(e)).data())}function x_(r){return r.toISOString().slice(0,10)}function ZP(r,e){return r===1?e?3:-1:r===2?e?5:-2:e?7:-3}function ek(r){return Math.max(0,Math.min(100,r))}function tk(r){return r>=80?"mastered":r>=60?"nearly":r>=30?"developing":"weak"}async function nk(r){const{uid:e,items:t,existingAttemptId:s}=r,o=new Date,l=x_(o),h=t.length,f=t.filter(M=>M.correct).length;if(h===0)return{xpGain:0,coinsGain:0,streakDays:0,badges:[],score:0,outOf:0};const g=new Map;t.forEach(M=>{const q=Array.isArray(M.tags)?M.tags.slice(0,3):[],$=ZP(M.difficulty,M.correct);q.forEach(b=>{const re=g.get(b)||{delta:0,correct:0,wrong:0};g.set(b,{delta:re.delta+$,correct:re.correct+(M.correct?1:0),wrong:re.wrong+(M.correct?0:1)})})});const y=f*10,E=Math.max(1,Math.min(3,Math.round(f/Math.max(1,h)*3)));let v=null;const R=s?Ge(Ie,"users",e,"attempts",s):Ge(St(Ie,"users",e,"attempts"));return t.map(()=>Ge(St(R,"items"))),await Cp(Ie,async M=>{const q=Ge(Ie,"users",e,"stats","main"),$=Ge(Ie,"users",e,"progressSummary","main"),b=Array.from(g.keys()).map(P=>Ge(Ie,"users",e,"tagProgress",P)),[re,se,ie]=await Promise.all([M.get(q),M.get($),Promise.all(b.map(P=>M.get(P)))]),G=re.exists()?re.data():{xp:0,coins:0,streakDays:0,lastDoneDate:null,badges:[]};let ae=G.streakDays||0;const Q=G.lastDoneDate;if(Q!==l){const P=x_(new Date(o.getTime()-864e5));ae=Q===P?ae+1:1}const I=new Set(Array.isArray(G.badges)?G.badges:[]);ae>=3&&I.add("3 jours daffile"),ae>=7&&I.add("7 jours daffile"),f===h&&h>=10&&I.add("Zro faute (10+)");const S=se.exists()?se.data():null,C={weak:0,developing:0,nearly:0,mastered:0};for(let P=0;P<b.length;P++){const N=b[P],k=ie[P],de=N.id,Oe=g.get(de),qe=k.exists()?k.data():null,Pe=typeof qe?.mastery=="number"?qe.mastery:0,W=qe?.bucket,fe=ek(Pe+Oe.delta),te=tk(fe);W&&S&&(C[W]-=1),C[te]+=1,M.set(N,{mastery:fe,bucket:te,correctAnswers:(qe?.correctAnswers||0)+Oe.correct,wrongAnswers:(qe?.wrongAnswers||0)+Oe.wrong,lastDelta:Oe.delta,updatedAt:Gt()},{merge:!0})}const D=S?.masteryBuckets||{weak:0,developing:0,nearly:0,mastered:0};M.set(q,{xp:(G.xp||0)+y,coins:(G.coins||0)+E,streakDays:ae,lastDoneDate:l,badges:Array.from(I),updatedAt:Gt()},{merge:!0}),M.set($,{totalAnswers:(S?.totalAnswers||0)+h,correctAnswers:(S?.correctAnswers||0)+f,totalAttempts:(S?.totalAttempts||0)+1,masteryBuckets:{weak:(D.weak||0)+C.weak,developing:(D.developing||0)+C.developing,nearly:(D.nearly||0)+C.nearly,mastered:(D.mastered||0)+C.mastered},lastAttemptId:R.id,lastDate:l,updatedAt:Gt()},{merge:!0}),v={xpGain:y,coinsGain:E,streakDays:ae,badges:Array.from(I)}}),{...v||{xpGain:0,coinsGain:0,streakDays:0,badges:[]},score:f,outOf:h}}const _E=[{id:"badge_dragon",title:"Badge Dragon",description:"Un badge pique  afficher",priceCoins:10},{id:"skin_bleu",title:"Skin Bleu",description:"Personnalisation bleue de ton avatar",priceCoins:15},{id:"skin_or",title:"Skin Or",description:"Style dor rare",priceCoins:25,requiresXp:150},{id:"pack_stickers",title:"Pack Stickers",description:"Stickers virtuels  collectionner",priceCoins:8},{id:"titre_champion",title:"Titre Champion",description:"Titre spcial dans ton profil",priceCoins:20,requiresXp:100}];function rk(){return _E}async function vE(r){return(await Jt(St(Ie,"users",r,"inventory"))).docs.map(t=>({id:t.id,...t.data()}))}async function sk(r,e){const t=_E.find(h=>h.id===e);if(!t)throw new Error("Item inconnu");const s=Ge(Ie,"users",r,"stats","main"),o=Ge(Ie,"users",r,"inventory",e);return await Cp(Ie,async h=>{const[f,g]=await Promise.all([h.get(s),h.get(o)]),y=f.exists()?f.data():await kp(r);if(g.exists())throw new Error("Dj possd");const E=y.coins||0,v=y.xp||0;if(E<t.priceCoins)throw new Error("Pas assez de pices");if(t.requiresXp&&v<t.requiresXp)throw new Error("XP insuffisant");return h.set(o,{acquiredAt:Gt(),title:t.title,description:t.description,priceCoins:t.priceCoins,requiresXp:t.requiresXp||null}),h.set(s,{coins:E-t.priceCoins,xp:v,updatedAt:Gt()},{merge:!0}),{coins:E-t.priceCoins,xp:v}})}const N_=[{id:"fr",title:"Franais"},{id:"math",title:"Maths"},{id:"en",title:"Anglais"},{id:"es",title:"Espagnol"},{id:"hist",title:"Histoire"}];function ik(){const{user:r}=Ks(),[e,t]=ye.useState([]),[s,o]=ye.useState("fr"),[l,h]=ye.useState([]),[f,g]=ye.useState(null),[y,E]=ye.useState([]);return ye.useEffect(()=>{(async()=>{try{const v=await WP();t(v.length?v:N_)}catch{t(N_)}})()},[]),ye.useEffect(()=>{(async()=>{const v=await gE(s,{uid:r?.uid});h(v)})()},[s,r]),ye.useEffect(()=>{r&&(async()=>{const v=await kp(r.uid);g(v);const R=await vE(r.uid);E(R)})()},[r]),A.jsxs("div",{className:"container grid",children:[A.jsx("div",{className:"card",children:A.jsxs("div",{className:"row",style:{justifyContent:"space-between"},children:[A.jsxs("div",{children:[A.jsx("h2",{style:{margin:0},children:"Salut Malo "}),A.jsx("div",{className:"small",children:"Choisis une matire, puis un thme. Objectif : 10 questions par jour."})]}),f&&A.jsxs("div",{className:"kpi",children:[A.jsxs("div",{className:"pill",children:["XP: ",A.jsx("strong",{children:f.xp??0})]}),A.jsxs("div",{className:"pill",children:["Pices: ",A.jsx("strong",{children:f.coins??0})]}),A.jsxs("div",{className:"pill",children:["Srie: ",A.jsx("strong",{children:f.streakDays??0})," jours"]})]})]})}),A.jsxs("div",{className:"grid2",children:[A.jsxs("div",{className:"card",children:[A.jsx("h3",{style:{marginTop:0},children:"Matire"}),A.jsx("select",{className:"input",value:s,onChange:v=>o(v.target.value),children:e.map(v=>A.jsx("option",{value:v.id,children:v.title},v.id))}),A.jsx("div",{className:"small",style:{marginTop:8},children:"Priorits : Franais (grammaire & conjugaison) + Maths (fractions)."})]}),A.jsxs("div",{className:"card",children:[A.jsx("h3",{style:{marginTop:0},children:"Thmes"}),l.length===0?A.jsx("div",{className:"small",children:"Aucun thme pour linstant. (Parent : importe un pack JSON)"}):A.jsx("div",{className:"grid",children:l.map(v=>A.jsx(Io,{className:"btn secondary",to:`/theme/${v.id}`,children:v.title},v.id))})]})]}),f?.badges?.length?A.jsxs("div",{className:"card",children:[A.jsx("h3",{style:{marginTop:0},children:"Badges"}),A.jsx("div",{className:"row",children:f.badges.map(v=>A.jsx("span",{className:"badge",children:v},v))})]}):null,y.length?A.jsxs("div",{className:"card",children:[A.jsx("h3",{style:{marginTop:0},children:"Inventaire"}),A.jsx("div",{className:"row",children:y.map(v=>A.jsx("span",{className:"badge",children:v.title||v.id},v.id))})]}):null]})}function ok(){const{user:r,signInGoogle:e}=Ks(),t=Oc();return ye.useEffect(()=>{r&&t("/")},[r]),A.jsx("div",{className:"container",children:A.jsxs("div",{className:"card",children:[A.jsx("h2",{style:{marginTop:0},children:"Connexion"}),A.jsx("p",{className:"small",children:"Connexion Google recommande (simple sur tablette Android)."}),A.jsx("button",{className:"btn",onClick:e,children:"Se connecter avec Google"}),A.jsx("hr",{}),A.jsxs("p",{className:"small",children:["Astuce : aprs ta premire connexion (toi), va dans Firestore et mets ",A.jsxs("code",{children:["users/","{uid}",".role"]}),'  "parent".']})]})})}function ak(r,e){return r.type==="mcq"?e===r.answerIndex:r.type==="short_text"||r.type==="fill_blank"?r.expected.includes(Bo(e||"")):!1}function lk(r,e){return r===1?e?3:-1:r===2?e?5:-2:e?7:-3}function uk(r){return Math.max(0,Math.min(100,r))}function ck(r){return r>=80?"mastered":r>=60?"nearly":r>=30?"developing":"weak"}function wE(r){return r.toISOString().slice(0,10)}function hk(r,e){const t=new Date(r+"T00:00:00");return t.setDate(t.getDate()+e),wE(t)}function dk(r,e,t){const s=Math.max(0,Math.min(100,r));let o=1;return s>=81||e==="mastered"?o=10:s>=61||e==="nearly"?o=4:s>=31||e==="developing"?o=2:o=1,hk(t,o)}async function fk(r){const{uid:e,subjectId:t,themeId:s,answers:o,exercises:l,durationSec:h}=r,g=wE(new Date),y=Ge(St(Ie,"users",e,"attempts")),E=St(Ie,"users",e,"attemptItems"),v=Ge(Ie,"users",e,"progressSummary","main"),R=l.map((de,Oe)=>{const qe=ak(de,o[de.id]);return{exerciseId:de.id,subjectId:t,themeId:s,difficulty:de.difficulty,tags:de.tags?.slice(0,3)||[],correct:qe,index:Oe,prompt:de.prompt,choices:de.choices,readingContext:de.readingContext}}),M=R.filter(de=>de.correct).length,q=R.length,$=new Map;R.forEach(de=>{const Oe=lk(de.difficulty,de.correct);de.tags.forEach(qe=>{const Pe=$.get(qe)||{delta:0,correct:0,wrong:0,results:[]};Pe.delta+=Oe,Pe.correct+=de.correct?1:0,Pe.wrong+=de.correct?0:1,Pe.results.push(de.correct),$.set(qe,Pe)})});const b=Array.from($.keys()),re=await Promise.all(b.map(de=>$r(Ge(Ie,"users",e,"tagProgress",de)))),se=Pp(Ie),ie={subjectId:t,themeId:s,score:M,outOf:q,durationSec:h,itemsCount:R.length,date:g,createdAt:Gt()};se.set(y,ie),R.forEach(de=>{const Oe=Ge(E);se.set(Oe,{...de,createdAt:Gt(),answer:o[de.exerciseId]??null})});const G={weak:0,developing:0,nearly:0,mastered:0},ae={};b.forEach((de,Oe)=>{const qe=re[Oe],Pe=qe.exists()?qe.data():null,W=$.get(de),te=[...Array.isArray(Pe?.last7Results)?Pe.last7Results:[],...W.results].slice(-7),L={correct:te.filter(vn=>vn).length,wrong:te.filter(vn=>!vn).length};let K=Pe?.streakCorrect||0,Te=Pe?.streakWrong||0;W.results.forEach(vn=>{vn?(K+=1,Te=0):(Te+=1,K=0)});const Ae=typeof Pe?.mastery=="number"?Pe.mastery:0,Ne=uk(Ae+W.delta),De=ck(Ne),ze=Pe?.bucket;ze&&(G[ze]-=1),G[De]+=1;const je=dk(Ne,De,g),Ke=Ge(Ie,"users",e,"tagProgress",de),Rt={tagId:de,mastery:Ne,bucket:De,attempts:(Pe?.attempts||0)+W.results.length,correctAnswers:(Pe?.correctAnswers||0)+W.correct,wrongAnswers:(Pe?.wrongAnswers||0)+W.wrong,last7Results:te,last7:L,lastSeenAt:Gt(),lastCorrectAt:W.correct>0?Gt():Pe?.lastCorrectAt||null,streakCorrect:K,streakWrong:Te,lastDelta:W.delta,nextDueDate:je,updatedAt:Gt()};ae[de]=Rt,se.set(Ke,Rt,{merge:!0})});const Q=await $r(v),I=Q.exists()?Q.data():null,S=I?.masteryBuckets||{weak:0,developing:0,nearly:0,mastered:0},C={weak:(S.weak||0)+G.weak,developing:(S.developing||0)+G.developing,nearly:(S.nearly||0)+G.nearly,mastered:(S.mastered||0)+G.mastered},D=Object.values(ae).sort((de,Oe)=>de.mastery-Oe.mastery).map(de=>de.tagId),P=Array.isArray(I?.topWeakTags)?I.topWeakTags:[],N=Array.from(new Set([...D,...P])).slice(0,3),k={totalAnswers:(I?.totalAnswers||0)+q,correctAnswers:(I?.correctAnswers||0)+M,totalAttempts:(I?.totalAttempts||0)+1,masteryBuckets:C,lastAttemptId:y.id,lastDate:g,updatedAt:Gt(),topWeakTags:N};return se.set(v,k,{merge:!0}),await se.commit(),{attemptId:y.id,score:M,outOf:q,summary:k,tagsUpdated:ae}}function pk(r){const e=[];return Array.isArray(r.exercises)&&e.push(...r.exercises),Array.isArray(r.readings)&&r.readings.forEach(t=>{Array.isArray(t.questions)&&t.questions.forEach(s=>{e.push({...s,readingContext:{readingId:t.id,title:t.title,text:t.text}})})}),e}function mk(r){return 100+(Math.max(1,Math.floor(r))-1)*50}function Nc(r){let e=Math.max(0,Math.floor(r)),t=1;for(;;){const s=mk(t);if(e<s)return{level:t,xpIntoLevel:e,xpForNext:s};e-=s,t+=1}}function gk(r){return Math.max(0,r.answeredCount)*2+10}async function yk(r){const e=Ge(Ie,"users",r,"meta","rewards"),t=await $r(e);if(t.exists())return t.data();const s={xp:0,level:1,updatedAt:Gt()};return await Gs(e,s),s}async function _k(r,e,t){if(t<=0)return await yk(r);const s=Ge(Ie,"users",r,"meta","rewards"),o=e?Ge(Ie,"users",r,"rewardEvents",e):null;let l=null;return await Cp(Ie,async h=>{if(o&&(await h.get(o)).exists()){const M=await h.get(s);l=M.exists()?M.data():{xp:0,level:1};return}const f=await h.get(s),g=f.exists()?f.data():{xp:0},y=Math.max(0,(g.xp||0)+t),E=Nc(y),v={xp:y,level:E.level,updatedAt:Gt()};h.set(s,v,{merge:!0}),o&&h.set(o,{sessionId:e,deltaXp:t,awardedAt:Gt()}),l=v}),l||{xp:0,level:1}}const Gd={xp:0,level:1};function vk(r){const[e,t]=ye.useState(Gd),[s,o]=ye.useState(!!r);return ye.useEffect(()=>{if(!r){t(Gd),o(!1);return}const l=Ge(Ie,"users",r,"meta","rewards"),h=OP(l,f=>{f.exists()?t(f.data()):t(Gd),o(!1)},()=>o(!1));return()=>h()},[r]),{rewards:e,loading:s}}function wk({rewards:r}){const{xp:e,level:t}=r||{xp:0,level:1},s=Nc(e||0),o=Math.min(100,Math.max(0,Math.round(s.xpIntoLevel/s.xpForNext*100)));return A.jsxs("div",{className:"card",style:{display:"flex",flexDirection:"column",gap:6},children:[A.jsxs("div",{className:"row",style:{justifyContent:"space-between",alignItems:"center"},children:[A.jsxs("div",{style:{fontWeight:800,fontSize:"1.05rem"},children:["Niveau ",s.level]}),A.jsxs("div",{className:"small",children:["XP total : ",e||0]})]}),A.jsxs("div",{className:"small",children:["Prochain niveau : ",s.xpIntoLevel,"/",s.xpForNext," XP"]}),A.jsx("div",{style:{height:12,background:"rgba(255,255,255,0.08)",borderRadius:999,overflow:"hidden"},children:A.jsx("div",{style:{height:"100%",width:`${o}%`,background:"linear-gradient(90deg,#7aa2ff,#2ecc71)",transition:"width 0.6s ease"}})})]})}function D_(r,e){return r.type==="mcq"?e===r.answerIndex:r.type==="short_text"||r.type==="fill_blank"?r.expected.includes(Bo(e||"")):!1}function Xu(r){const e=[],t=/_([^_]+)_/g;let s=0,o,l=0;for(;(o=t.exec(r))!==null;)o.index>s&&e.push(r.slice(s,o.index)),e.push(A.jsx("span",{style:{textDecoration:"underline"},children:o[1]},`u-${l++}`)),s=t.lastIndex;return s<r.length&&e.push(r.slice(s)),e}function Ek(){const{themeId:r}=pT(),e=Oc(),{user:t}=Ks(),{rewards:s}=vk(t?.uid||null),[o,l]=ye.useState(null),[h,f]=ye.useState([]),[g,y]=ye.useState({}),[E]=ye.useState(()=>Date.now()),[v,R]=ye.useState(null),[M,q]=ye.useState([]),[$,b]=ye.useState([]),[re,se]=ye.useState(!1),[ie,G]=ye.useState(null);ye.useEffect(()=>{(async()=>{if(!r)return;const Q=await $r(Ge(Ie,"themes",r)),I=Q.exists()?{id:r,...Q.data()}:null;l(I);const S=await yE(r,{uid:t?.uid});let D=Array.isArray(I?.readings)?I.readings:[];try{const k=await HP(r);k.length&&(D=k)}catch{}const N=[...pk({exercises:S,readings:D})].sort(()=>Math.random()-.5);f(N.slice(0,10)),y({}),R(null),b([]),se(!1)})()},[r,t]);const ae=async()=>{if(!t||!r||!o)return;const Q=Math.max(1,Math.round((Date.now()-E)/1e3)),I=h.map(W=>({exerciseId:W.id,difficulty:W.difficulty,tags:W.tags||[],correct:D_(W,g[W.id])})),S=await fk({uid:t.uid,subjectId:o.subjectId,themeId:r,answers:g,exercises:h,durationSec:Q}),C=await nk({uid:t.uid,subjectId:o.subjectId,items:I,existingAttemptId:S.attemptId}),D=h.reduce((W,fe)=>{const te=g[fe.id];return te==null||typeof te=="string"&&te.trim()===""?W:W+1},0),P=gk({answeredCount:D}),N=s;let k=null,de=!1;try{const W=await _k(t.uid,S.attemptId||null,P);k=W,de=(W?.level||1)>(s?.level||1)}catch(W){console.error("awardSessionRewards failed",W)}G({deltaXp:P,levelUp:de,newRewards:k,prevRewards:N});const Oe=new Set(h.flatMap(W=>W.tags||[])),qe=Object.values(S.tagsUpdated||{}).filter(W=>W&&Oe.has(W.tagId||"")).sort((W,fe)=>(W.mastery??0)-(fe.mastery??0)).slice(0,3).map(W=>W.tagId);q(qe),R({score:C.score,outOf:C.outOf,durationSec:Q,...C});const Pe=h.map((W,fe)=>{const te=g[W.id],L=D_(W,te);let K="",Te="";if(W.type==="mcq"){const Ae=W;K=Ae.choices[Ae.answerIndex]||"",Te=typeof te=="number"&&Ae.choices[te]||""}else(W.type==="short_text"||W.type==="fill_blank")&&(K=W.expected[0]||"",Te=te||"");return{id:W.id,prompt:W.prompt,correct:L,expected:K||"",userAnswer:(Te??"").toString()||"",idx:fe+1}});b(Pe),se(!0)};if(!r)return A.jsx("div",{className:"container",children:A.jsx("div",{className:"card",children:"Thme introuvable."})});if(re&&$.length){const Q=ie?.prevRewards?.xp??s?.xp??0,I=ie?.newRewards?.xp??Q,S=Q,C=I;ie?.deltaXp;const D=v?(()=>{const P=v.outOf?v.score/v.outOf*100:0;return P>=80?"Super ! Continue comme a.":P>=50?"Bien jou ! On consolide et a va monter.":"Bien essay. On progresse en sentranant."})():"";return A.jsxs("div",{className:"container grid",children:[A.jsxs("div",{className:"card",children:[A.jsxs("h2",{style:{margin:0},children:["Corrections  ",o?.title]}),v&&A.jsxs("div",{className:"small",children:["Score ",A.jsxs("strong",{children:[v.score,"/",v.outOf]}),"  ",v.durationSec,"s  +",v.xpGain," XP  +",v.coinsGain," pices"]}),ie&&A.jsxs("div",{className:"small",style:{marginTop:8},children:["+",ie.deltaXp," XP ",ie.levelUp?`  Niveau ${ie.newRewards?.level}`:""]}),D&&A.jsx("div",{className:"small",style:{marginTop:8},children:D})]}),A.jsxs("div",{className:"card",children:[A.jsx("div",{className:"grid",children:$.map(P=>A.jsxs("div",{className:"pill",style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:6,background:P.correct?"rgba(46, 204, 113, 0.12)":"rgba(255, 90, 111, 0.12)",border:P.correct?"1px solid rgba(46, 204, 113, 0.4)":"1px solid rgba(255, 90, 111, 0.4)"},children:[A.jsxs("div",{className:"small",children:["Question ",P.idx,"  ",P.correct?A.jsx("span",{className:"badge",style:{borderColor:"rgba(46,204,113,.6)",color:"#7fffb2"},children:" Bonne rponse"}):A.jsx("span",{className:"badge",style:{borderColor:"rgba(255,90,111,.6)",color:"#ff9fb0"},children:" Mauvaise rponse"})]}),A.jsx("div",{style:{fontWeight:700},children:P.prompt}),A.jsxs("div",{className:"small",children:["Ta rponse : ",A.jsx("strong",{children:P.userAnswer})]}),!P.correct&&A.jsxs("div",{className:"small",children:["Correction : ",A.jsx("strong",{children:P.expected})]})]},P.id))}),A.jsxs("div",{className:"row",style:{marginTop:16},children:[A.jsx("button",{className:"btn",onClick:()=>e("/"),children:"Retour  laccueil"}),A.jsx("button",{className:"btn secondary",onClick:()=>{se(!1),b([]),R(null),y({})},children:"Refaire une session"})]})]}),ie&&A.jsxs("div",{className:"card",children:[A.jsx("h3",{style:{marginTop:0},children:"Progression XP"}),A.jsxs("div",{className:"small",children:["XP : ",S,"  ",C]}),(()=>{const P=Nc(S),N=Nc(C),k=Math.min(100,Math.max(0,Math.round(N.xpIntoLevel/N.xpForNext*100)));return A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"small",children:["Niveau : ",P.level,"  ",N.level]}),A.jsx("div",{style:{height:12,background:"rgba(255,255,255,0.08)",borderRadius:999,overflow:"hidden",marginTop:8},children:A.jsx("div",{style:{height:"100%",width:`${k}%`,background:"linear-gradient(90deg,#7aa2ff,#2ecc71)",transition:"width 0.6s ease"}})})]})})()]})]})}return A.jsxs("div",{className:"container grid",children:[A.jsxs("div",{className:"card",children:[A.jsx("h2",{style:{margin:0},children:o?.title||"Session"}),A.jsx("div",{className:"small",children:"Fais de ton mieux. Objectif : rgularit "})]}),A.jsx(wk,{rewards:s}),h.map((Q,I)=>{const S=Q.readingContext,C=S&&(I===0||h[I-1].readingContext?.readingId!==S.readingId);return A.jsxs("div",{className:"card",children:[C&&S&&A.jsxs("div",{style:{marginBottom:10},children:[A.jsxs("div",{className:"small",style:{marginBottom:4},children:["Lecture : ",S.title]}),A.jsx("div",{className:"small",style:{whiteSpace:"pre-wrap"},children:Xu(S.text)}),A.jsx("hr",{})]}),A.jsxs("div",{className:"small",children:["Question ",I+1," / ",h.length," ",A.jsxs("span",{className:"badge",children:["Difficult ",Q.difficulty]})]}),A.jsx("div",{style:{fontWeight:800,marginTop:6},children:Xu(Q.prompt)}),Q.type==="mcq"&&A.jsx("div",{className:"grid",style:{marginTop:10},children:Q.choices.map((D,P)=>A.jsx("button",{type:"button",className:"btn "+(g[Q.id]===P?"":"secondary"),onClick:()=>y(N=>({...N,[Q.id]:P})),style:{textAlign:"left",opacity:g[Q.id]===P?1:.85},"aria-pressed":g[Q.id]===P,children:Xu(D)},P))}),Q.type==="short_text"&&A.jsx("div",{style:{marginTop:10},children:A.jsx("input",{className:"input",placeholder:"Ta rponse",value:g[Q.id]??"",onChange:D=>y(P=>({...P,[Q.id]:D.target.value}))})}),Q.type==="fill_blank"&&A.jsxs("div",{style:{marginTop:10},children:[A.jsx("div",{className:"small",children:Xu(Q.text)}),A.jsx("input",{className:"input",placeholder:"Le mot manquant",value:g[Q.id]??"",onChange:D=>y(P=>({...P,[Q.id]:D.target.value}))})]})]},Q.id)}),A.jsxs("div",{className:"card",children:[A.jsxs("div",{className:"row",children:[A.jsx("button",{className:"btn",onClick:ae,children:"Corriger et enregistrer"}),v&&A.jsxs("div",{className:"small",children:["Score ",A.jsxs("strong",{children:[v.score,"/",v.outOf]}),"  ",v.durationSec,"s  +",A.jsx("strong",{children:v.xpGain})," XP  +",A.jsx("strong",{children:v.coinsGain})," pices  Srie ",A.jsx("strong",{children:v.streakDays})]})]}),v?.badges?.length?A.jsx("div",{className:"row",style:{marginTop:10},children:v.badges.map(Q=>A.jsx("span",{className:"badge",children:Q},Q))}):null,M.length?A.jsxs("div",{className:"small",style:{marginTop:10},children:["Tags  renforcer (thme) : ",M.map(Q=>A.jsx("span",{className:"badge",children:Q},Q))]}):null]}),$.length?A.jsxs("div",{className:"card",children:[A.jsx("h3",{style:{marginTop:0},children:"Corrections"}),A.jsx("div",{className:"grid",children:$.map(Q=>A.jsxs("div",{className:"pill",style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:6},children:[A.jsxs("div",{className:"small",children:["Question ",Q.idx,"  ",Q.correct?A.jsx("span",{className:"badge",children:" Bonne rponse"}):A.jsx("span",{className:"badge",children:" Mauvaise rponse"})]}),A.jsx("div",{style:{fontWeight:700},children:Q.prompt}),A.jsxs("div",{className:"small",children:["Ta rponse : ",A.jsx("strong",{children:Q.userAnswer})]}),!Q.correct&&A.jsxs("div",{className:"small",children:["Correction : ",A.jsx("strong",{children:Q.expected})]})]},Q.id))})]}):null]})}function Tk(){const[r,e]=ye.useState(""),t=async s=>{if(!s)return;e("Lecture du fichier");const o=await s.text();let l;try{l=JSON.parse(o)}catch{e(" JSON invalide");return}if(!l?.subjects?.length){e(" Format inattendu (subjects manquant)");return}e("Import en cours"),await GP(l),e(" Import termin")};return A.jsx("div",{className:"container",children:A.jsxs("div",{className:"card",children:[A.jsx("h2",{style:{marginTop:0},children:"Import dexercices (Parent)"}),A.jsx("p",{className:"small",children:"Importe un pack JSON (gnr par moi) : matires  thmes  exercices."}),A.jsx("input",{className:"input",type:"file",accept:".json,application/json",onChange:s=>t(s.target.files?.[0]||null)}),r&&A.jsx("p",{className:"small",style:{marginTop:10},children:r}),A.jsx("hr",{}),A.jsx("p",{className:"small",children:"Conseil : commence par importer les packs Franais (grammaire + conjugaison) et Maths (fractions)."})]})})}const Ik=[{id:"all",label:"Toutes"},{id:"fr",label:"Franais"},{id:"math",label:"Maths"},{id:"en",label:"Anglais"},{id:"es",label:"Espagnol"},{id:"hist",label:"Histoire"}];function Sk(r){if(!r)return null;const e=r.split("_")[0];return e==="fr"||e==="math"||e==="en"||e==="es"||e==="hist"?e:null}function V_(r){return r.last7?r.last7:Array.isArray(r.last7Results)?{correct:r.last7Results.filter(Boolean).length,wrong:r.last7Results.filter(e=>!e).length}:{correct:0,wrong:0}}function Ak(){const{user:r,role:e}=Ks(),[t,s]=ye.useState([]),[o,l]=ye.useState(""),[h,f]=ye.useState([]),[g,y]=ye.useState(!1),[E,v]=ye.useState("fr"),[R,M]=ye.useState(null),[q,$]=ye.useState(""),[b,re]=ye.useState({});ye.useEffect(()=>{r&&(e==="parent"?(async()=>{const S=(await Jt(br(St(Ie,"users"),jr("role","==","child")))).docs.map(C=>({id:C.id,displayName:C.data().displayName||"Enfant"}));s(S),S[0]&&l(S[0].id)})():l(r.uid))},[r,e]);const se=ye.useCallback(async I=>{y(!0);const C=(await Jt(St(Ie,"users",I,"tagProgress"))).docs.map(N=>({id:N.id,tagId:N.id,...N.data()}));f(C);const P=(await Jt(St(Ie,"users",I,"progressSummary"))).docs.find(N=>N.id==="main");M(P?.data()||null),y(!1)},[]);ye.useEffect(()=>{o&&se(o)},[o,se]);const ie=async I=>{if(!o||(q!==I&&$(I),b[I]?.items?.length||b[I]?.loading))return;re(N=>({...N,[I]:{loading:!0,items:[]}}));let S;try{S=await Jt(br(St(Ie,"users",o,"attemptItems"),jr("tags","array-contains",I),NP(100)))}catch{S=await Jt(br(St(Ie,"users",o,"attemptItems"),jr("tags","array-contains",I)))}const C=S.docs.map(N=>({id:N.id,...N.data()})),D={};await Promise.all(Array.from(new Set(C.map(N=>N.exerciseId))).map(async N=>{const k=await $r(Ge(Ie,"exercises",N));k.exists()?D[N]=k.data():D[N]={prompt:N}}));const P=C.map(N=>({...N,prompt:N.prompt||D[N.exerciseId]?.prompt||N.exerciseId,choices:N.choices||D[N.exerciseId]?.choices||null,readingContext:N.readingContext})).sort((N,k)=>{const de=N.createdAt?.toMillis?N.createdAt.toMillis():0;return(k.createdAt?.toMillis?k.createdAt.toMillis():0)-de});re(N=>({...N,[I]:{loading:!1,items:P}}))},G=I=>{if(q===I){$("");return}ie(I)},ae=h.filter(I=>E==="all"?!0:Sk(I.tagId)===E).sort((I,S)=>(I.mastery||0)-(S.mastery||0)).slice(0,20),Q=()=>{const I=[["tagId","mastery","bucket","attempts","correct","wrong","last7_correct","last7_wrong","nextDueDate"]];h.forEach(N=>{const k=V_(N);I.push([N.tagId||N.id,String(N.mastery??0),N.bucket||"",String(N.attempts??0),String(N.correctAnswers??0),String(N.wrongAnswers??0),String(k.correct),String(k.wrong),N.nextDueDate||""])});const S=I.map(N=>N.map(k=>`"${(k??"").toString().replace(/"/g,'""')}"`).join(",")).join(`
`),C=new Blob([S],{type:"text/csv;charset=utf-8;"}),D=URL.createObjectURL(C),P=document.createElement("a");P.href=D,P.download=`progress-${o||"user"}.csv`,P.click(),URL.revokeObjectURL(D)};return A.jsxs("div",{className:"container",children:[A.jsxs("div",{className:"card",children:[A.jsx("h2",{style:{marginTop:0},children:"Progression par tag"}),A.jsxs("div",{className:"row",style:{gap:8,alignItems:"center"},children:[e==="parent"&&A.jsxs(A.Fragment,{children:[A.jsx("label",{className:"small",children:"Enfant"}),A.jsx("select",{className:"input",value:o,onChange:I=>l(I.target.value),children:t.map(I=>A.jsx("option",{value:I.id,children:I.displayName},I.id))})]}),A.jsx("label",{className:"small",children:"Matire"}),A.jsx("select",{className:"input",value:E,onChange:I=>v(I.target.value),children:Ik.map(I=>A.jsx("option",{value:I.id,children:I.label},I.id))}),A.jsx("button",{className:"btn secondary",onClick:Q,disabled:!h.length,children:"Tlcharger CSV"})]}),R&&A.jsxs("div",{className:"kpi",style:{marginTop:10},children:[A.jsxs("div",{className:"pill",children:["Rponses: ",A.jsx("strong",{children:R.totalAnswers||0})]}),A.jsxs("div",{className:"pill",children:["Taux: ",A.jsxs("strong",{children:[R.totalAnswers?Math.round((R.correctAnswers||0)/R.totalAnswers*100):0,"%"]})]}),A.jsxs("div",{className:"pill",children:["Tentatives: ",A.jsx("strong",{children:R.totalAttempts||0})]})]})]}),g?A.jsx("div",{className:"card",children:"Chargement"}):A.jsxs("div",{className:"card",children:[A.jsx("h3",{style:{marginTop:0},children:"Top 20 faibles"}),ae.length===0?A.jsx("div",{className:"small",children:"Aucun tag pour le moment."}):A.jsx("div",{className:"grid",children:ae.map(I=>{const S=V_(I),C=q===(I.tagId||I.id),D=b[I.tagId||I.id]||{loading:!1,items:[]};return A.jsxs("div",{className:"card",style:{padding:12},children:[A.jsxs("div",{className:"row",style:{justifyContent:"space-between",alignItems:"center"},children:[A.jsxs("div",{onClick:()=>G(I.tagId||I.id),style:{cursor:"pointer",flex:1},children:[A.jsx("div",{style:{fontWeight:700},children:I.tagId}),A.jsxs("div",{className:"small",children:[I.mastery??0,"/100  ",I.bucket,"  ",S.correct,"/",S.correct+S.wrong," sur 7  Prochaine: ",I.nextDueDate||""]}),A.jsx("div",{style:{height:8,background:"rgba(255,255,255,0.08)",borderRadius:999,marginTop:6,width:"100%"},children:A.jsx("div",{style:{height:8,borderRadius:999,width:`${Math.min(100,Math.max(0,I.mastery||0))}%`,background:"linear-gradient(90deg,#ff5a6f,#7aa2ff)"}})}),A.jsx("div",{className:"row",style:{marginTop:6,gap:4},children:(I.last7Results||[]).map((P,N)=>A.jsx("span",{style:{width:10,height:10,borderRadius:"50%",background:P?"#2ecc71":"#ff5a6f",opacity:.9}},N))})]}),A.jsx("button",{className:"btn secondary",style:{width:36,height:36},onClick:()=>G(I.tagId||I.id),children:C?"":"+"})]}),C&&A.jsx("div",{className:"card",style:{marginTop:10,background:"rgba(255,255,255,0.03)"},children:D.loading?A.jsx("div",{className:"small",children:"Chargement"}):D.items.length===0?A.jsx("div",{className:"small",children:"Aucune question trouve pour ce tag."}):A.jsx("div",{className:"grid",children:D.items.map(P=>A.jsxs("div",{className:"pill",style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:6},children:[A.jsxs("div",{className:"small",children:[P.createdAt?.toDate?P.createdAt.toDate().toLocaleString():"","  Diff ",P.difficulty,"  ",P.correct?"":""]}),A.jsx("div",{style:{fontWeight:700},children:P.prompt}),P.readingContext&&A.jsxs("div",{className:"small",style:{whiteSpace:"pre-wrap"},children:[A.jsxs("div",{style:{fontWeight:600,marginBottom:4},children:["Lecture : ",P.readingContext.title]}),P.readingContext.text]}),Array.isArray(P.choices)&&typeof P.answer=="number"?A.jsxs("div",{className:"small",children:["Rponse : ",A.jsx("strong",{children:P.choices[P.answer]||P.answer})]}):A.jsxs("div",{className:"small",children:["Rponse : ",A.jsx("strong",{children:P.answer??""})]})]},P.id))})})]},I.id)})})]})]})}const O_=[{id:"all",label:"Toutes"},{id:"fr",label:"Franais"},{id:"math",label:"Maths"},{id:"en",label:"Anglais"},{id:"es",label:"Espagnol"},{id:"hist",label:"Histoire"}];function Rk(){const[r,e]=ye.useState([]),[t,s]=ye.useState(""),[o,l]=ye.useState("all"),[h,f]=ye.useState([]),[g,y]=ye.useState(!1),[E,v]=ye.useState({}),[R,M]=ye.useState(null);ye.useEffect(()=>{(async()=>{const ae=(await Jt(br(St(Ie,"users"),jr("role","==","child")))).docs.map(Q=>({id:Q.id,displayName:Q.data().displayName||"Enfant"}));e(ae),ae[0]&&s(ae[0].id)})()},[]),ye.useEffect(()=>{t&&(y(!0),(async()=>{const G=O_.filter(S=>S.id!=="all").map(S=>S.id),ae=o==="all"?G:[o],Q=[];for(const S of ae){const C=await gE(S,{uid:t,includeHidden:!0,includeOverrides:!0});Q.push(...C)}const I=Q.sort((S,C)=>(S.title||"").localeCompare(C.title||""));f(I),y(!1)})())},[t,o]);const q=async(G,ae)=>{t&&(await XP(t,G,ae),f(Q=>Q.map(I=>I.id===G?{...I,visibleOverride:ae}:I)))},$=async(G,ae)=>{await KP(G,ae),f(Q=>Q.map(I=>I.id===G?{...I,hidden:ae}:I))},b=async G=>{if(!window.confirm("Supprimer ce thme et toutes ses questions ?"))return;const ae=await JP(G);f(Q=>Q.filter(I=>I.id!==G)),v(Q=>{const I={...Q};return delete I[G],I}),ae.hidden&&f(Q=>Q.map(I=>I.id===G?{...I,hidden:!0}:I))},re=async G=>{M(G);const ae=await yE(G,{uid:t,includeHidden:!0,includeOverrides:!0});v(Q=>({...Q,[G]:ae})),M(null)},se=async(G,ae)=>{await QP(G,ae),v(Q=>{const I={};return Object.keys(Q).forEach(S=>{I[S]=Q[S].map(C=>C.id===G?{...C,hidden:ae}:C)}),{...Q,...I}})},ie=async(G,ae,Q)=>{t&&(await YP(t,G,ae),v(I=>({...I,[Q]:(I[Q]||[]).map(S=>S.id===G?{...S,visibleOverride:ae}:S)})))};return A.jsxs("div",{className:"container",children:[A.jsxs("div",{className:"card",children:[A.jsx("h2",{style:{marginTop:0},children:"Modration contenus"}),A.jsxs("div",{className:"row",style:{gap:10},children:[A.jsxs("div",{className:"row",style:{gap:6},children:[A.jsx("span",{className:"small",children:"Enfant"}),A.jsx("select",{className:"input",value:t,onChange:G=>s(G.target.value),children:r.map(G=>A.jsx("option",{value:G.id,children:G.displayName},G.id))})]}),A.jsxs("div",{className:"row",style:{gap:6},children:[A.jsx("span",{className:"small",children:"Matire"}),A.jsx("select",{className:"input",value:o,onChange:G=>l(G.target.value),children:O_.map(G=>A.jsx("option",{value:G.id,children:G.label},G.id))})]})]})]}),g?A.jsx("div",{className:"card",children:"Chargement"}):A.jsxs("div",{className:"grid",children:[h.map(G=>{const ae=G.visibleOverride,Q=ae!==void 0?ae:!G.hidden;return A.jsxs("div",{className:"card",children:[A.jsxs("div",{className:"row",style:{justifyContent:"space-between"},children:[A.jsxs("div",{children:[A.jsx("div",{style:{fontWeight:800},children:G.title}),A.jsx("div",{className:"small",children:G.subjectId}),G.hidden&&A.jsx("div",{className:"badge",children:"Masqu globalement"}),ae===!1&&A.jsx("div",{className:"badge",children:"Masqu pour lenfant"})]}),A.jsxs("div",{className:"row",children:[A.jsx("button",{className:"btn secondary",onClick:()=>q(G.id,!Q),children:Q?"Masquer pour lenfant":"Afficher pour lenfant"}),A.jsx("button",{className:"btn secondary",onClick:()=>$(G.id,!G.hidden),children:G.hidden?"Ractiver globalement":"Masquer globalement"}),A.jsx("button",{className:"btn secondary",onClick:()=>b(G.id),children:"Supprimer"}),A.jsx("button",{className:"btn secondary",onClick:()=>re(G.id),children:"Voir questions"})]})]}),(E[G.id]||[]).length>0&&A.jsxs("div",{style:{marginTop:10},children:[A.jsx("div",{className:"small",style:{marginBottom:6},children:"Questions"}),A.jsx("div",{className:"grid",children:E[G.id].map(I=>{const S=I.visibleOverride,C=S!==void 0?S:!I.hidden;return A.jsxs("div",{className:"pill",style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:6},children:[A.jsxs("div",{className:"small",children:[I.prompt?.slice(0,80)||I.id," ",I.hidden&&A.jsx("span",{className:"badge",children:"Masqu global"})," ",S===!1&&A.jsx("span",{className:"badge",children:"Masqu enfant"})]}),A.jsxs("div",{className:"row",children:[A.jsx("button",{className:"btn secondary",onClick:()=>ie(I.id,!C,G.id),children:C?"Masquer enfant":"Afficher enfant"}),A.jsx("button",{className:"btn secondary",onClick:()=>se(I.id,!I.hidden),children:I.hidden?"Ractiver global":"Masquer global"})]})]},I.id)})})]}),R===G.id&&A.jsx("div",{className:"small",style:{marginTop:6},children:"Chargement des questions"})]},G.id)}),h.length===0&&A.jsx("div",{className:"card small",children:"Aucun thme."})]})]})}function Ck(){const{user:r}=Ks(),[e,t]=ye.useState(null),[s,o]=ye.useState({}),[l,h]=ye.useState(""),[f,g]=ye.useState(!1);ye.useEffect(()=>{r&&(async()=>{const v=await kp(r.uid);t(v);const R=await vE(r.uid),M={};R.forEach(q=>{M[q.id]=q}),o(M)})()},[r]);const y=async v=>{if(r){h(""),g(!0);try{const R=await sk(r.uid,v.id);t(M=>({...M||{},coins:R.coins,xp:R.xp})),o(M=>({...M,[v.id]:{acquiredAt:new Date().toISOString()}}))}catch(R){h(R.message||"Erreur achat")}finally{g(!1)}}},E=rk();return A.jsxs("div",{className:"container",children:[A.jsxs("div",{className:"card",children:[A.jsx("h2",{style:{marginTop:0},children:"Rcompenses"}),A.jsx("div",{className:"small",children:"Utilise tes pices pour acheter et collectionner des items."}),e&&A.jsxs("div",{className:"kpi",style:{marginTop:8},children:[A.jsxs("div",{className:"pill",children:["Pices: ",A.jsx("strong",{children:e.coins||0})]}),A.jsxs("div",{className:"pill",children:["XP: ",A.jsx("strong",{children:e.xp||0})]})]}),l&&A.jsx("div",{className:"small",style:{color:"#ff5a6f",marginTop:8},children:l})]}),A.jsx("div",{className:"grid",children:E.map(v=>{const R=!!s[v.id],M=(e?.coins||0)>=v.priceCoins&&(!v.requiresXp||(e?.xp||0)>=v.requiresXp);return A.jsxs("div",{className:"card",style:{opacity:R?.7:1},children:[A.jsxs("div",{className:"row",style:{justifyContent:"space-between"},children:[A.jsxs("div",{children:[A.jsx("div",{style:{fontWeight:800},children:v.title}),A.jsx("div",{className:"small",children:v.description})]}),R&&A.jsx("span",{className:"badge",children:"Dj acquis"})]}),A.jsxs("div",{className:"row",style:{marginTop:10},children:[A.jsxs("div",{className:"pill",children:["Prix: ",v.priceCoins," pices"]}),v.requiresXp&&A.jsxs("div",{className:"pill",children:["Niv: ",v.requiresXp," XP"]})]}),!R&&A.jsx("button",{className:"btn",disabled:!M||f,onClick:()=>y(v),children:M?"Acheter":"Manque de pices/XP"})]},v.id)})})]})}function Pk(){return A.jsx("div",{className:"container",children:A.jsx("div",{className:"card",children:"Page introuvable."})})}function kk(){return A.jsxs(bT,{children:[A.jsx("div",{className:"container",children:A.jsx(qP,{})}),A.jsxs(xT,{children:[A.jsx(Vr,{path:"/connexion",element:A.jsx(ok,{})}),A.jsx(Vr,{path:"/",element:A.jsx(Wd,{children:A.jsx(ik,{})})}),A.jsx(Vr,{path:"/theme/:themeId",element:A.jsx(Wd,{children:A.jsx(Ek,{})})}),A.jsx(Vr,{path:"/admin/import",element:A.jsx(Hd,{children:A.jsx(Tk,{})})}),A.jsx(Vr,{path:"/admin/progression",element:A.jsx(Hd,{children:A.jsx(Ak,{})})}),A.jsx(Vr,{path:"/admin/moderation",element:A.jsx(Hd,{children:A.jsx(Rk,{})})}),A.jsx(Vr,{path:"/recompenses",element:A.jsx(Wd,{children:A.jsx(Ck,{})})}),A.jsx(Vr,{path:"*",element:A.jsx(Pk,{})})]})]})}function xk(){"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("${import.meta.env.BASE_URL}sw.js").catch(()=>{})})}b0.createRoot(document.getElementById("root")).render(A.jsx(ye.StrictMode,{children:A.jsx($P,{children:A.jsx(kk,{})})}));xk();
