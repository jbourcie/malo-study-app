function T0(r,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in r)){const l=Object.getOwnPropertyDescriptor(s,o);l&&Object.defineProperty(r,o,l.get?l:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function C_(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Id={exports:{}},qa={},Sd={exports:{}},Oe={};var Ng;function I0(){if(Ng)return Oe;Ng=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.iterator;function C(L){return L===null||typeof L!="object"?null:(L=E&&L[E]||L["@@iterator"],typeof L=="function"?L:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,$={};function b(L,Q,Ae){this.props=L,this.context=Q,this.refs=$,this.updater=Ae||M}b.prototype.isReactComponent={},b.prototype.setState=function(L,Q){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,Q,"setState")},b.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function re(){}re.prototype=b.prototype;function se(L,Q,Ae){this.props=L,this.context=Q,this.refs=$,this.updater=Ae||M}var G=se.prototype=new re;G.constructor=se,q(G,b.prototype),G.isPureReactComponent=!0;var W=Array.isArray,te=Object.prototype.hasOwnProperty,ie={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function S(L,Q,Ae){var ke,xe={},De=null,$e=null;if(Q!=null)for(ke in Q.ref!==void 0&&($e=Q.ref),Q.key!==void 0&&(De=""+Q.key),Q)te.call(Q,ke)&&!I.hasOwnProperty(ke)&&(xe[ke]=Q[ke]);var je=arguments.length-2;if(je===1)xe.children=Ae;else if(1<je){for(var Ge=Array(je),Ct=0;Ct<je;Ct++)Ge[Ct]=arguments[Ct+2];xe.children=Ge}if(L&&L.defaultProps)for(ke in je=L.defaultProps,je)xe[ke]===void 0&&(xe[ke]=je[ke]);return{$$typeof:r,type:L,key:De,ref:$e,props:xe,_owner:ie.current}}function R(L,Q){return{$$typeof:r,type:L.type,key:Q,ref:L.ref,props:L.props,_owner:L._owner}}function x(L){return typeof L=="object"&&L!==null&&L.$$typeof===r}function N(L){var Q={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(Ae){return Q[Ae]})}var D=/\/+/g;function P(L,Q){return typeof L=="object"&&L!==null&&L.key!=null?N(""+L.key):Q.toString(36)}function ce(L,Q,Ae,ke,xe){var De=typeof L;(De==="undefined"||De==="boolean")&&(L=null);var $e=!1;if(L===null)$e=!0;else switch(De){case"string":case"number":$e=!0;break;case"object":switch(L.$$typeof){case r:case e:$e=!0}}if($e)return $e=L,xe=xe($e),L=ke===""?"."+P($e,0):ke,W(xe)?(Ae="",L!=null&&(Ae=L.replace(D,"$&/")+"/"),ce(xe,Q,Ae,"",function(Ct){return Ct})):xe!=null&&(x(xe)&&(xe=R(xe,Ae+(!xe.key||$e&&$e.key===xe.key?"":(""+xe.key).replace(D,"$&/")+"/")+L)),Q.push(xe)),1;if($e=0,ke=ke===""?".":ke+":",W(L))for(var je=0;je<L.length;je++){De=L[je];var Ge=ke+P(De,je);$e+=ce(De,Q,Ae,Ge,xe)}else if(Ge=C(L),typeof Ge=="function")for(L=Ge.call(L),je=0;!(De=L.next()).done;)De=De.value,Ge=ke+P(De,je++),$e+=ce(De,Q,Ae,Ge,xe);else if(De==="object")throw Q=String(L),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.");return $e}function Ve(L,Q,Ae){if(L==null)return L;var ke=[],xe=0;return ce(L,ke,"","",function(De){return Q.call(Ae,De,xe++)}),ke}function Ue(L){if(L._status===-1){var Q=L._result;Q=Q(),Q.then(function(Ae){(L._status===0||L._status===-1)&&(L._status=1,L._result=Ae)},function(Ae){(L._status===0||L._status===-1)&&(L._status=2,L._result=Ae)}),L._status===-1&&(L._status=0,L._result=Q)}if(L._status===1)return L._result.default;throw L._result}var Pe={current:null},Z={transition:null},ge={ReactCurrentDispatcher:Pe,ReactCurrentBatchConfig:Z,ReactCurrentOwner:ie};function ae(){throw Error("act(...) is not supported in production builds of React.")}return Oe.Children={map:Ve,forEach:function(L,Q,Ae){Ve(L,function(){Q.apply(this,arguments)},Ae)},count:function(L){var Q=0;return Ve(L,function(){Q++}),Q},toArray:function(L){return Ve(L,function(Q){return Q})||[]},only:function(L){if(!x(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Oe.Component=b,Oe.Fragment=t,Oe.Profiler=o,Oe.PureComponent=se,Oe.StrictMode=s,Oe.Suspense=g,Oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ge,Oe.act=ae,Oe.cloneElement=function(L,Q,Ae){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var ke=q({},L.props),xe=L.key,De=L.ref,$e=L._owner;if(Q!=null){if(Q.ref!==void 0&&(De=Q.ref,$e=ie.current),Q.key!==void 0&&(xe=""+Q.key),L.type&&L.type.defaultProps)var je=L.type.defaultProps;for(Ge in Q)te.call(Q,Ge)&&!I.hasOwnProperty(Ge)&&(ke[Ge]=Q[Ge]===void 0&&je!==void 0?je[Ge]:Q[Ge])}var Ge=arguments.length-2;if(Ge===1)ke.children=Ae;else if(1<Ge){je=Array(Ge);for(var Ct=0;Ct<Ge;Ct++)je[Ct]=arguments[Ct+2];ke.children=je}return{$$typeof:r,type:L.type,key:xe,ref:De,props:ke,_owner:$e}},Oe.createContext=function(L){return L={$$typeof:h,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:l,_context:L},L.Consumer=L},Oe.createElement=S,Oe.createFactory=function(L){var Q=S.bind(null,L);return Q.type=L,Q},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(L){return{$$typeof:f,render:L}},Oe.isValidElement=x,Oe.lazy=function(L){return{$$typeof:v,_payload:{_status:-1,_result:L},_init:Ue}},Oe.memo=function(L,Q){return{$$typeof:y,type:L,compare:Q===void 0?null:Q}},Oe.startTransition=function(L){var Q=Z.transition;Z.transition={};try{L()}finally{Z.transition=Q}},Oe.unstable_act=ae,Oe.useCallback=function(L,Q){return Pe.current.useCallback(L,Q)},Oe.useContext=function(L){return Pe.current.useContext(L)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(L){return Pe.current.useDeferredValue(L)},Oe.useEffect=function(L,Q){return Pe.current.useEffect(L,Q)},Oe.useId=function(){return Pe.current.useId()},Oe.useImperativeHandle=function(L,Q,Ae){return Pe.current.useImperativeHandle(L,Q,Ae)},Oe.useInsertionEffect=function(L,Q){return Pe.current.useInsertionEffect(L,Q)},Oe.useLayoutEffect=function(L,Q){return Pe.current.useLayoutEffect(L,Q)},Oe.useMemo=function(L,Q){return Pe.current.useMemo(L,Q)},Oe.useReducer=function(L,Q,Ae){return Pe.current.useReducer(L,Q,Ae)},Oe.useRef=function(L){return Pe.current.useRef(L)},Oe.useState=function(L){return Pe.current.useState(L)},Oe.useSyncExternalStore=function(L,Q,Ae){return Pe.current.useSyncExternalStore(L,Q,Ae)},Oe.useTransition=function(){return Pe.current.useTransition()},Oe.version="18.3.1",Oe}var xg;function _f(){return xg||(xg=1,Sd.exports=I0()),Sd.exports}var Dg;function S0(){if(Dg)return qa;Dg=1;var r=_f(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(f,g,y){var v,E={},C=null,M=null;y!==void 0&&(C=""+y),g.key!==void 0&&(C=""+g.key),g.ref!==void 0&&(M=g.ref);for(v in g)s.call(g,v)&&!l.hasOwnProperty(v)&&(E[v]=g[v]);if(f&&f.defaultProps)for(v in g=f.defaultProps,g)E[v]===void 0&&(E[v]=g[v]);return{$$typeof:e,type:f,key:C,ref:M,props:E,_owner:o.current}}return qa.Fragment=t,qa.jsx=h,qa.jsxs=h,qa}var Vg;function A0(){return Vg||(Vg=1,Id.exports=S0()),Id.exports}var A=A0(),de=_f();const Ee=C_(de),C0=T0({__proto__:null,default:Ee},[de]);var $u={},Ad={exports:{}},rn={},Cd={exports:{}},Rd={};var Og;function R0(){return Og||(Og=1,(function(r){function e(Z,ge){var ae=Z.length;Z.push(ge);e:for(;0<ae;){var L=ae-1>>>1,Q=Z[L];if(0<o(Q,ge))Z[L]=ge,Z[ae]=Q,ae=L;else break e}}function t(Z){return Z.length===0?null:Z[0]}function s(Z){if(Z.length===0)return null;var ge=Z[0],ae=Z.pop();if(ae!==ge){Z[0]=ae;e:for(var L=0,Q=Z.length,Ae=Q>>>1;L<Ae;){var ke=2*(L+1)-1,xe=Z[ke],De=ke+1,$e=Z[De];if(0>o(xe,ae))De<Q&&0>o($e,xe)?(Z[L]=$e,Z[De]=ae,L=De):(Z[L]=xe,Z[ke]=ae,L=ke);else if(De<Q&&0>o($e,ae))Z[L]=$e,Z[De]=ae,L=De;else break e}}return ge}function o(Z,ge){var ae=Z.sortIndex-ge.sortIndex;return ae!==0?ae:Z.id-ge.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var h=Date,f=h.now();r.unstable_now=function(){return h.now()-f}}var g=[],y=[],v=1,E=null,C=3,M=!1,q=!1,$=!1,b=typeof setTimeout=="function"?setTimeout:null,re=typeof clearTimeout=="function"?clearTimeout:null,se=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function G(Z){for(var ge=t(y);ge!==null;){if(ge.callback===null)s(y);else if(ge.startTime<=Z)s(y),ge.sortIndex=ge.expirationTime,e(g,ge);else break;ge=t(y)}}function W(Z){if($=!1,G(Z),!q)if(t(g)!==null)q=!0,Ue(te);else{var ge=t(y);ge!==null&&Pe(W,ge.startTime-Z)}}function te(Z,ge){q=!1,$&&($=!1,re(S),S=-1),M=!0;var ae=C;try{for(G(ge),E=t(g);E!==null&&(!(E.expirationTime>ge)||Z&&!N());){var L=E.callback;if(typeof L=="function"){E.callback=null,C=E.priorityLevel;var Q=L(E.expirationTime<=ge);ge=r.unstable_now(),typeof Q=="function"?E.callback=Q:E===t(g)&&s(g),G(ge)}else s(g);E=t(g)}if(E!==null)var Ae=!0;else{var ke=t(y);ke!==null&&Pe(W,ke.startTime-ge),Ae=!1}return Ae}finally{E=null,C=ae,M=!1}}var ie=!1,I=null,S=-1,R=5,x=-1;function N(){return!(r.unstable_now()-x<R)}function D(){if(I!==null){var Z=r.unstable_now();x=Z;var ge=!0;try{ge=I(!0,Z)}finally{ge?P():(ie=!1,I=null)}}else ie=!1}var P;if(typeof se=="function")P=function(){se(D)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,Ve=ce.port2;ce.port1.onmessage=D,P=function(){Ve.postMessage(null)}}else P=function(){b(D,0)};function Ue(Z){I=Z,ie||(ie=!0,P())}function Pe(Z,ge){S=b(function(){Z(r.unstable_now())},ge)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Z){Z.callback=null},r.unstable_continueExecution=function(){q||M||(q=!0,Ue(te))},r.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<Z?Math.floor(1e3/Z):5},r.unstable_getCurrentPriorityLevel=function(){return C},r.unstable_getFirstCallbackNode=function(){return t(g)},r.unstable_next=function(Z){switch(C){case 1:case 2:case 3:var ge=3;break;default:ge=C}var ae=C;C=ge;try{return Z()}finally{C=ae}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(Z,ge){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var ae=C;C=Z;try{return ge()}finally{C=ae}},r.unstable_scheduleCallback=function(Z,ge,ae){var L=r.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?L+ae:L):ae=L,Z){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=ae+Q,Z={id:v++,callback:ge,priorityLevel:Z,startTime:ae,expirationTime:Q,sortIndex:-1},ae>L?(Z.sortIndex=ae,e(y,Z),t(g)===null&&Z===t(y)&&($?(re(S),S=-1):$=!0,Pe(W,ae-L))):(Z.sortIndex=Q,e(g,Z),q||M||(q=!0,Ue(te))),Z},r.unstable_shouldYield=N,r.unstable_wrapCallback=function(Z){var ge=C;return function(){var ae=C;C=ge;try{return Z.apply(this,arguments)}finally{C=ae}}}})(Rd)),Rd}var Mg;function P0(){return Mg||(Mg=1,Cd.exports=R0()),Cd.exports}var Lg;function k0(){if(Lg)return rn;Lg=1;var r=_f(),e=P0();function t(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(n,i){h(n,i),h(n+"Capture",i)}function h(n,i){for(o[n]=i,n=0;n<i.length;n++)s.add(i[n])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},E={};function C(n){return g.call(E,n)?!0:g.call(v,n)?!1:y.test(n)?E[n]=!0:(v[n]=!0,!1)}function M(n,i,a,c){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function q(n,i,a,c){if(i===null||typeof i>"u"||M(n,i,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function $(n,i,a,c,d,p,w){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=i,this.sanitizeURL=p,this.removeEmptyString=w}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){b[n]=new $(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];b[i]=new $(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){b[n]=new $(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){b[n]=new $(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){b[n]=new $(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){b[n]=new $(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){b[n]=new $(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){b[n]=new $(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){b[n]=new $(n,5,!1,n.toLowerCase(),null,!1,!1)});var re=/[\-:]([a-z])/g;function se(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(re,se);b[i]=new $(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(re,se);b[i]=new $(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(re,se);b[i]=new $(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){b[n]=new $(n,1,!1,n.toLowerCase(),null,!1,!1)}),b.xlinkHref=new $("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){b[n]=new $(n,1,!1,n.toLowerCase(),null,!0,!0)});function G(n,i,a,c){var d=b.hasOwnProperty(i)?b[i]:null;(d!==null?d.type!==0:c||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(q(i,a,d,c)&&(a=null),c||d===null?C(i)&&(a===null?n.removeAttribute(i):n.setAttribute(i,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(i=d.attributeName,c=d.attributeNamespace,a===null?n.removeAttribute(i):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?n.setAttributeNS(c,i,a):n.setAttribute(i,a))))}var W=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,te=Symbol.for("react.element"),ie=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),N=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),ce=Symbol.for("react.suspense_list"),Ve=Symbol.for("react.memo"),Ue=Symbol.for("react.lazy"),Pe=Symbol.for("react.offscreen"),Z=Symbol.iterator;function ge(n){return n===null||typeof n!="object"?null:(n=Z&&n[Z]||n["@@iterator"],typeof n=="function"?n:null)}var ae=Object.assign,L;function Q(n){if(L===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);L=i&&i[1]||""}return`
`+L+n}var Ae=!1;function ke(n,i){if(!n||Ae)return"";Ae=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(B){var c=B}Reflect.construct(n,[],i)}else{try{i.call()}catch(B){c=B}n.call(i.prototype)}else{try{throw Error()}catch(B){c=B}n()}}catch(B){if(B&&c&&typeof B.stack=="string"){for(var d=B.stack.split(`
`),p=c.stack.split(`
`),w=d.length-1,k=p.length-1;1<=w&&0<=k&&d[w]!==p[k];)k--;for(;1<=w&&0<=k;w--,k--)if(d[w]!==p[k]){if(w!==1||k!==1)do if(w--,k--,0>k||d[w]!==p[k]){var V=`
`+d[w].replace(" at new "," at ");return n.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",n.displayName)),V}while(1<=w&&0<=k);break}}}finally{Ae=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?Q(n):""}function xe(n){switch(n.tag){case 5:return Q(n.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 2:case 15:return n=ke(n.type,!1),n;case 11:return n=ke(n.type.render,!1),n;case 1:return n=ke(n.type,!0),n;default:return""}}function De(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case I:return"Fragment";case ie:return"Portal";case R:return"Profiler";case S:return"StrictMode";case P:return"Suspense";case ce:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case N:return(n.displayName||"Context")+".Consumer";case x:return(n._context.displayName||"Context")+".Provider";case D:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Ve:return i=n.displayName||null,i!==null?i:De(n.type)||"Memo";case Ue:i=n._payload,n=n._init;try{return De(n(i))}catch{}}return null}function $e(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return De(i);case 8:return i===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function je(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ge(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ct(n){var i=Ge(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),c=""+n[i];if(!n.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,p=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return d.call(this)},set:function(w){c=""+w,p.call(this,w)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function vn(n){n._valueTracker||(n._valueTracker=Ct(n))}function Xo(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),c="";return n&&(c=Ge(n)?n.checked?"true":"false":n.value),n=c,n!==a?(i.setValue(n),!0):!1}function Wr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Vi(n,i){var a=i.checked;return ae({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function Pl(n,i){var a=i.defaultValue==null?"":i.defaultValue,c=i.checked!=null?i.checked:i.defaultChecked;a=je(i.value!=null?i.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Oi(n,i){i=i.checked,i!=null&&G(n,"checked",i,!1)}function Hs(n,i){Oi(n,i);var a=je(i.value),c=i.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?mt(n,i.type,a):i.hasOwnProperty("defaultValue")&&mt(n,i.type,je(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function Yo(n,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var c=i.type;if(!(c!=="submit"&&c!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,a||i===n.value||(n.value=i),n.defaultValue=i}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function mt(n,i,a){(i!=="number"||Wr(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var ut=Array.isArray;function Pn(n,i,a,c){if(n=n.options,i){i={};for(var d=0;d<a.length;d++)i["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=i.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&c&&(n[a].defaultSelected=!0)}else{for(a=""+je(a),i=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}i!==null||n[d].disabled||(i=n[d])}i!==null&&(i.selected=!0)}}function Jo(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return ae({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Zo(n,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(t(92));if(ut(a)){if(1<a.length)throw Error(t(93));a=a[0]}i=a}i==null&&(i=""),a=i}n._wrapperState={initialValue:je(a)}}function kl(n,i){var a=je(i.value),c=je(i.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),i.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function Hr(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function ea(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Mi(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?ea(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Gr,Nl=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,c,d){MSApp.execUnsafeLocalFunction(function(){return n(i,a,c,d)})}:n})(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(Gr=Gr||document.createElement("div"),Gr.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Gr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function Gs(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var Kr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xl=["Webkit","ms","Moz","O"];Object.keys(Kr).forEach(function(n){xl.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),Kr[i]=Kr[n]})});function Qr(n,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||Kr.hasOwnProperty(n)&&Kr[n]?(""+i).trim():i+"px"}function Li(n,i){n=n.style;for(var a in i)if(i.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=Qr(a,i[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,d):n[a]=d}}var ta=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function kn(n,i){if(i){if(ta[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function bi(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xr=null;function ji(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var pr=null,mr=null,at=null;function na(n){if(n=ka(n)){if(typeof pr!="function")throw Error(t(280));var i=n.stateNode;i&&(i=su(i),pr(n.stateNode,n.type,i))}}function Yr(n){mr?at?at.push(n):at=[n]:mr=n}function Jr(){if(mr){var n=mr,i=at;if(at=mr=null,na(n),i)for(n=0;n<i.length;n++)na(i[n])}}function Dl(n,i){return n(i)}function Vl(){}var zn=!1;function Ol(n,i,a){if(zn)return n(i,a);zn=!0;try{return Dl(n,i,a)}finally{zn=!1,(mr!==null||at!==null)&&(Vl(),Jr())}}function Ks(n,i){var a=n.stateNode;if(a===null)return null;var c=su(a);if(c===null)return null;a=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,i,typeof a));return a}var Zr=!1;if(f)try{var es={};Object.defineProperty(es,"passive",{get:function(){Zr=!0}}),window.addEventListener("test",es,es),window.removeEventListener("test",es,es)}catch{Zr=!1}function Ml(n,i,a,c,d,p,w,k,V){var B=Array.prototype.slice.call(arguments,3);try{i.apply(a,B)}catch(Y){this.onError(Y)}}var gr=!1,$n=null,Fi=!1,wn=null,Ll={onError:function(n){gr=!0,$n=n}};function bl(n,i,a,c,d,p,w,k,V){gr=!1,$n=null,Ml.apply(Ll,arguments)}function ra(n,i,a,c,d,p,w,k,V){if(bl.apply(this,arguments),gr){if(gr){var B=$n;gr=!1,$n=null}else throw Error(t(198));Fi||(Fi=!0,wn=B)}}function Nn(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function sa(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function jl(n){if(Nn(n)!==n)throw Error(t(188))}function Fl(n){var i=n.alternate;if(!i){if(i=Nn(n),i===null)throw Error(t(188));return i!==n?null:n}for(var a=n,c=i;;){var d=a.return;if(d===null)break;var p=d.alternate;if(p===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===a)return jl(d),n;if(p===c)return jl(d),i;p=p.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=p;else{for(var w=!1,k=d.child;k;){if(k===a){w=!0,a=d,c=p;break}if(k===c){w=!0,c=d,a=p;break}k=k.sibling}if(!w){for(k=p.child;k;){if(k===a){w=!0,a=p,c=d;break}if(k===c){w=!0,c=p,a=d;break}k=k.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:i}function Ul(n){return n=Fl(n),n!==null?Qs(n):null}function Qs(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=Qs(n);if(i!==null)return i;n=n.sibling}return null}var ia=e.unstable_scheduleCallback,Ui=e.unstable_cancelCallback,Xs=e.unstable_shouldYield,yr=e.unstable_requestPaint,Ze=e.unstable_now,eh=e.unstable_getCurrentPriorityLevel,Bi=e.unstable_ImmediatePriority,oa=e.unstable_UserBlockingPriority,Ys=e.unstable_NormalPriority,aa=e.unstable_LowPriority,zi=e.unstable_IdlePriority,Js=null,on=null;function Bl(n){if(on&&typeof on.onCommitFiberRoot=="function")try{on.onCommitFiberRoot(Js,n,void 0,(n.current.flags&128)===128)}catch{}}var an=Math.clz32?Math.clz32:Zs,qn=Math.log,En=Math.LN2;function Zs(n){return n>>>=0,n===0?32:31-(qn(n)/En|0)|0}var Wn=64,ts=4194304;function He(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function _r(n,i){var a=n.pendingLanes;if(a===0)return 0;var c=0,d=n.suspendedLanes,p=n.pingedLanes,w=a&268435455;if(w!==0){var k=w&~d;k!==0?c=He(k):(p&=w,p!==0&&(c=He(p)))}else w=a&~d,w!==0?c=He(w):p!==0&&(c=He(p));if(c===0)return 0;if(i!==0&&i!==c&&(i&d)===0&&(d=c&-c,p=i&-i,d>=p||d===16&&(p&4194240)!==0))return i;if((c&4)!==0&&(c|=a&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=c;0<i;)a=31-an(i),d=1<<a,c|=n[a],i&=~d;return c}function ei(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ti(n,i){for(var a=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,p=n.pendingLanes;0<p;){var w=31-an(p),k=1<<w,V=d[w];V===-1?((k&a)===0||(k&c)!==0)&&(d[w]=ei(k,i)):V<=i&&(n.expiredLanes|=k),p&=~k}}function la(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function ua(){var n=Wn;return Wn<<=1,(Wn&4194240)===0&&(Wn=64),n}function ca(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function ni(n,i,a){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-an(i),n[i]=a}function th(n,i){var a=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-an(a),p=1<<d;i[d]=0,c[d]=-1,n[d]=-1,a&=~p}}function ha(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var c=31-an(a),d=1<<c;d&i|n[c]&i&&(n[c]|=i),a&=~d}}var Fe=0;function Hn(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var da,$i,fa,pa,ma,Gn=!1,qi=[],Kn=null,Qn=null,Dt=null,ri=new Map,vr=new Map,ln=[],zl="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ns(n,i){switch(n){case"focusin":case"focusout":Kn=null;break;case"dragenter":case"dragleave":Qn=null;break;case"mouseover":case"mouseout":Dt=null;break;case"pointerover":case"pointerout":ri.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":vr.delete(i.pointerId)}}function xn(n,i,a,c,d,p){return n===null||n.nativeEvent!==p?(n={blockedOn:i,domEventName:a,eventSystemFlags:c,nativeEvent:p,targetContainers:[d]},i!==null&&(i=ka(i),i!==null&&$i(i)),n):(n.eventSystemFlags|=c,i=n.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),n)}function $l(n,i,a,c,d){switch(i){case"focusin":return Kn=xn(Kn,n,i,a,c,d),!0;case"dragenter":return Qn=xn(Qn,n,i,a,c,d),!0;case"mouseover":return Dt=xn(Dt,n,i,a,c,d),!0;case"pointerover":var p=d.pointerId;return ri.set(p,xn(ri.get(p)||null,n,i,a,c,d)),!0;case"gotpointercapture":return p=d.pointerId,vr.set(p,xn(vr.get(p)||null,n,i,a,c,d)),!0}return!1}function Wi(n){var i=ai(n.target);if(i!==null){var a=Nn(i);if(a!==null){if(i=a.tag,i===13){if(i=sa(a),i!==null){n.blockedOn=i,ma(n.priority,function(){fa(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Xe(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=Hi(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Xr=c,a.target.dispatchEvent(c),Xr=null}else return i=ka(a),i!==null&&$i(i),n.blockedOn=a,!1;i.shift()}return!0}function ql(n,i,a){Xe(n)&&a.delete(i)}function nh(){Gn=!1,Kn!==null&&Xe(Kn)&&(Kn=null),Qn!==null&&Xe(Qn)&&(Qn=null),Dt!==null&&Xe(Dt)&&(Dt=null),ri.forEach(ql),vr.forEach(ql)}function rs(n,i){n.blockedOn===i&&(n.blockedOn=null,Gn||(Gn=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,nh)))}function ss(n){function i(d){return rs(d,n)}if(0<qi.length){rs(qi[0],n);for(var a=1;a<qi.length;a++){var c=qi[a];c.blockedOn===n&&(c.blockedOn=null)}}for(Kn!==null&&rs(Kn,n),Qn!==null&&rs(Qn,n),Dt!==null&&rs(Dt,n),ri.forEach(i),vr.forEach(i),a=0;a<ln.length;a++)c=ln[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<ln.length&&(a=ln[0],a.blockedOn===null);)Wi(a),a.blockedOn===null&&ln.shift()}var wr=W.ReactCurrentBatchConfig,Er=!0;function Xn(n,i,a,c){var d=Fe,p=wr.transition;wr.transition=null;try{Fe=1,ga(n,i,a,c)}finally{Fe=d,wr.transition=p}}function Wl(n,i,a,c){var d=Fe,p=wr.transition;wr.transition=null;try{Fe=4,ga(n,i,a,c)}finally{Fe=d,wr.transition=p}}function ga(n,i,a,c){if(Er){var d=Hi(n,i,a,c);if(d===null)fh(n,i,c,Yn,a),ns(n,c);else if($l(d,n,i,a,c))c.stopPropagation();else if(ns(n,c),i&4&&-1<zl.indexOf(n)){for(;d!==null;){var p=ka(d);if(p!==null&&da(p),p=Hi(n,i,a,c),p===null&&fh(n,i,c,Yn,a),p===d)break;d=p}d!==null&&c.stopPropagation()}else fh(n,i,c,null,a)}}var Yn=null;function Hi(n,i,a,c){if(Yn=null,n=ji(c),n=ai(n),n!==null)if(i=Nn(n),i===null)n=null;else if(a=i.tag,a===13){if(n=sa(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return Yn=n,null}function Gi(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(eh()){case Bi:return 1;case oa:return 4;case Ys:case aa:return 16;case zi:return 536870912;default:return 16}default:return 16}}var un=null,Ki=null,Tr=null;function Hl(){if(Tr)return Tr;var n,i=Ki,a=i.length,c,d="value"in un?un.value:un.textContent,p=d.length;for(n=0;n<a&&i[n]===d[n];n++);var w=a-n;for(c=1;c<=w&&i[a-c]===d[p-c];c++);return Tr=d.slice(n,1<c?1-c:void 0)}function si(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Jn(){return!0}function ya(){return!1}function Ut(n){function i(a,c,d,p,w){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=p,this.target=w,this.currentTarget=null;for(var k in n)n.hasOwnProperty(k)&&(a=n[k],this[k]=a?a(p):p[k]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Jn:ya,this.isPropagationStopped=ya,this}return ae(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Jn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Jn)},persist:function(){},isPersistent:Jn}),i}var Zn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ii=Ut(Zn),is=ae({},Zn,{view:0,detail:0}),Qi=Ut(is),Xi,Yi,cn,oi=ae({},is,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ne,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==cn&&(cn&&n.type==="mousemove"?(Xi=n.screenX-cn.screenX,Yi=n.screenY-cn.screenY):Yi=Xi=0,cn=n),Xi)},movementY:function(n){return"movementY"in n?n.movementY:Yi}}),_a=Ut(oi),Gl=ae({},oi,{dataTransfer:0}),Kl=Ut(Gl),Ji=ae({},is,{relatedTarget:0}),Vt=Ut(Ji),Ql=ae({},Zn,{animationName:0,elapsedTime:0,pseudoElement:0}),Xl=Ut(Ql),os=ae({},Zn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),u=Ut(os),m=ae({},Zn,{data:0}),_=Ut(m),T={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},F={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},z={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ne(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=z[n])?!!i[n]:!1}function Ne(){return ne}var ct=ae({},is,{key:function(n){if(n.key){var i=T[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=si(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?F[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ne,charCode:function(n){return n.type==="keypress"?si(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?si(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Ke=Ut(ct),gt=ae({},oi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hn=Ut(gt),Ir=ae({},is,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ne}),er=Ut(Ir),tr=ae({},Zn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Zi=Ut(tr),va=ae({},oi,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),gE=Ut(va),yE=[9,13,27,32],rh=f&&"CompositionEvent"in window,wa=null;f&&"documentMode"in document&&(wa=document.documentMode);var _E=f&&"TextEvent"in window&&!wa,Tp=f&&(!rh||wa&&8<wa&&11>=wa),Ip=" ",Sp=!1;function Ap(n,i){switch(n){case"keyup":return yE.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cp(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var eo=!1;function vE(n,i){switch(n){case"compositionend":return Cp(i);case"keypress":return i.which!==32?null:(Sp=!0,Ip);case"textInput":return n=i.data,n===Ip&&Sp?null:n;default:return null}}function wE(n,i){if(eo)return n==="compositionend"||!rh&&Ap(n,i)?(n=Hl(),Tr=Ki=un=null,eo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Tp&&i.locale!=="ko"?null:i.data;default:return null}}var EE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rp(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!EE[n.type]:i==="textarea"}function Pp(n,i,a,c){Yr(c),i=tu(i,"onChange"),0<i.length&&(a=new ii("onChange","change",null,a,c),n.push({event:a,listeners:i}))}var Ea=null,Ta=null;function TE(n){Hp(n,0)}function Yl(n){var i=io(n);if(Xo(i))return n}function IE(n,i){if(n==="change")return i}var kp=!1;if(f){var sh;if(f){var ih="oninput"in document;if(!ih){var Np=document.createElement("div");Np.setAttribute("oninput","return;"),ih=typeof Np.oninput=="function"}sh=ih}else sh=!1;kp=sh&&(!document.documentMode||9<document.documentMode)}function xp(){Ea&&(Ea.detachEvent("onpropertychange",Dp),Ta=Ea=null)}function Dp(n){if(n.propertyName==="value"&&Yl(Ta)){var i=[];Pp(i,Ta,n,ji(n)),Ol(TE,i)}}function SE(n,i,a){n==="focusin"?(xp(),Ea=i,Ta=a,Ea.attachEvent("onpropertychange",Dp)):n==="focusout"&&xp()}function AE(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Yl(Ta)}function CE(n,i){if(n==="click")return Yl(i)}function RE(n,i){if(n==="input"||n==="change")return Yl(i)}function PE(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Dn=typeof Object.is=="function"?Object.is:PE;function Ia(n,i){if(Dn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),c=Object.keys(i);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!g.call(i,d)||!Dn(n[d],i[d]))return!1}return!0}function Vp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Op(n,i){var a=Vp(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=i&&c>=i)return{node:a,offset:i-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Vp(a)}}function Mp(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Mp(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Lp(){for(var n=window,i=Wr();i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=Wr(n.document)}return i}function oh(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function kE(n){var i=Lp(),a=n.focusedElem,c=n.selectionRange;if(i!==a&&a&&a.ownerDocument&&Mp(a.ownerDocument.documentElement,a)){if(c!==null&&oh(a)){if(i=c.start,n=c.end,n===void 0&&(n=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(n,a.value.length);else if(n=(i=a.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,p=Math.min(c.start,d);c=c.end===void 0?p:Math.min(c.end,d),!n.extend&&p>c&&(d=c,c=p,p=d),d=Op(a,p);var w=Op(a,c);d&&w&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==w.node||n.focusOffset!==w.offset)&&(i=i.createRange(),i.setStart(d.node,d.offset),n.removeAllRanges(),p>c?(n.addRange(i),n.extend(w.node,w.offset)):(i.setEnd(w.node,w.offset),n.addRange(i)))}}for(i=[],n=a;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)n=i[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var NE=f&&"documentMode"in document&&11>=document.documentMode,to=null,ah=null,Sa=null,lh=!1;function bp(n,i,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;lh||to==null||to!==Wr(c)||(c=to,"selectionStart"in c&&oh(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Sa&&Ia(Sa,c)||(Sa=c,c=tu(ah,"onSelect"),0<c.length&&(i=new ii("onSelect","select",null,i,a),n.push({event:i,listeners:c}),i.target=to)))}function Jl(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var no={animationend:Jl("Animation","AnimationEnd"),animationiteration:Jl("Animation","AnimationIteration"),animationstart:Jl("Animation","AnimationStart"),transitionend:Jl("Transition","TransitionEnd")},uh={},jp={};f&&(jp=document.createElement("div").style,"AnimationEvent"in window||(delete no.animationend.animation,delete no.animationiteration.animation,delete no.animationstart.animation),"TransitionEvent"in window||delete no.transitionend.transition);function Zl(n){if(uh[n])return uh[n];if(!no[n])return n;var i=no[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in jp)return uh[n]=i[a];return n}var Fp=Zl("animationend"),Up=Zl("animationiteration"),Bp=Zl("animationstart"),zp=Zl("transitionend"),$p=new Map,qp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function as(n,i){$p.set(n,i),l(i,[n])}for(var ch=0;ch<qp.length;ch++){var hh=qp[ch],xE=hh.toLowerCase(),DE=hh[0].toUpperCase()+hh.slice(1);as(xE,"on"+DE)}as(Fp,"onAnimationEnd"),as(Up,"onAnimationIteration"),as(Bp,"onAnimationStart"),as("dblclick","onDoubleClick"),as("focusin","onFocus"),as("focusout","onBlur"),as(zp,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Aa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),VE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Aa));function Wp(n,i,a){var c=n.type||"unknown-event";n.currentTarget=a,ra(c,i,void 0,n),n.currentTarget=null}function Hp(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],d=c.event;c=c.listeners;e:{var p=void 0;if(i)for(var w=c.length-1;0<=w;w--){var k=c[w],V=k.instance,B=k.currentTarget;if(k=k.listener,V!==p&&d.isPropagationStopped())break e;Wp(d,k,B),p=V}else for(w=0;w<c.length;w++){if(k=c[w],V=k.instance,B=k.currentTarget,k=k.listener,V!==p&&d.isPropagationStopped())break e;Wp(d,k,B),p=V}}}if(Fi)throw n=wn,Fi=!1,wn=null,n}function et(n,i){var a=i[vh];a===void 0&&(a=i[vh]=new Set);var c=n+"__bubble";a.has(c)||(Gp(i,n,2,!1),a.add(c))}function dh(n,i,a){var c=0;i&&(c|=4),Gp(a,n,c,i)}var eu="_reactListening"+Math.random().toString(36).slice(2);function Ca(n){if(!n[eu]){n[eu]=!0,s.forEach(function(a){a!=="selectionchange"&&(VE.has(a)||dh(a,!1,n),dh(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[eu]||(i[eu]=!0,dh("selectionchange",!1,i))}}function Gp(n,i,a,c){switch(Gi(i)){case 1:var d=Xn;break;case 4:d=Wl;break;default:d=ga}a=d.bind(null,i,a,n),d=void 0,!Zr||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(i,a,{capture:!0,passive:d}):n.addEventListener(i,a,!0):d!==void 0?n.addEventListener(i,a,{passive:d}):n.addEventListener(i,a,!1)}function fh(n,i,a,c,d){var p=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var k=c.stateNode.containerInfo;if(k===d||k.nodeType===8&&k.parentNode===d)break;if(w===4)for(w=c.return;w!==null;){var V=w.tag;if((V===3||V===4)&&(V=w.stateNode.containerInfo,V===d||V.nodeType===8&&V.parentNode===d))return;w=w.return}for(;k!==null;){if(w=ai(k),w===null)return;if(V=w.tag,V===5||V===6){c=p=w;continue e}k=k.parentNode}}c=c.return}Ol(function(){var B=p,Y=ji(a),J=[];e:{var X=$p.get(n);if(X!==void 0){var le=ii,fe=n;switch(n){case"keypress":if(si(a)===0)break e;case"keydown":case"keyup":le=Ke;break;case"focusin":fe="focus",le=Vt;break;case"focusout":fe="blur",le=Vt;break;case"beforeblur":case"afterblur":le=Vt;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=_a;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=Kl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=er;break;case Fp:case Up:case Bp:le=Xl;break;case zp:le=Zi;break;case"scroll":le=Qi;break;case"wheel":le=gE;break;case"copy":case"cut":case"paste":le=u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=hn}var pe=(i&4)!==0,ht=!pe&&n==="scroll",j=pe?X!==null?X+"Capture":null:X;pe=[];for(var O=B,U;O!==null;){U=O;var ee=U.stateNode;if(U.tag===5&&ee!==null&&(U=ee,j!==null&&(ee=Ks(O,j),ee!=null&&pe.push(Ra(O,ee,U)))),ht)break;O=O.return}0<pe.length&&(X=new le(X,fe,null,a,Y),J.push({event:X,listeners:pe}))}}if((i&7)===0){e:{if(X=n==="mouseover"||n==="pointerover",le=n==="mouseout"||n==="pointerout",X&&a!==Xr&&(fe=a.relatedTarget||a.fromElement)&&(ai(fe)||fe[Sr]))break e;if((le||X)&&(X=Y.window===Y?Y:(X=Y.ownerDocument)?X.defaultView||X.parentWindow:window,le?(fe=a.relatedTarget||a.toElement,le=B,fe=fe?ai(fe):null,fe!==null&&(ht=Nn(fe),fe!==ht||fe.tag!==5&&fe.tag!==6)&&(fe=null)):(le=null,fe=B),le!==fe)){if(pe=_a,ee="onMouseLeave",j="onMouseEnter",O="mouse",(n==="pointerout"||n==="pointerover")&&(pe=hn,ee="onPointerLeave",j="onPointerEnter",O="pointer"),ht=le==null?X:io(le),U=fe==null?X:io(fe),X=new pe(ee,O+"leave",le,a,Y),X.target=ht,X.relatedTarget=U,ee=null,ai(Y)===B&&(pe=new pe(j,O+"enter",fe,a,Y),pe.target=U,pe.relatedTarget=ht,ee=pe),ht=ee,le&&fe)t:{for(pe=le,j=fe,O=0,U=pe;U;U=ro(U))O++;for(U=0,ee=j;ee;ee=ro(ee))U++;for(;0<O-U;)pe=ro(pe),O--;for(;0<U-O;)j=ro(j),U--;for(;O--;){if(pe===j||j!==null&&pe===j.alternate)break t;pe=ro(pe),j=ro(j)}pe=null}else pe=null;le!==null&&Kp(J,X,le,pe,!1),fe!==null&&ht!==null&&Kp(J,ht,fe,pe,!0)}}e:{if(X=B?io(B):window,le=X.nodeName&&X.nodeName.toLowerCase(),le==="select"||le==="input"&&X.type==="file")var me=IE;else if(Rp(X))if(kp)me=RE;else{me=AE;var ve=SE}else(le=X.nodeName)&&le.toLowerCase()==="input"&&(X.type==="checkbox"||X.type==="radio")&&(me=CE);if(me&&(me=me(n,B))){Pp(J,me,a,Y);break e}ve&&ve(n,X,B),n==="focusout"&&(ve=X._wrapperState)&&ve.controlled&&X.type==="number"&&mt(X,"number",X.value)}switch(ve=B?io(B):window,n){case"focusin":(Rp(ve)||ve.contentEditable==="true")&&(to=ve,ah=B,Sa=null);break;case"focusout":Sa=ah=to=null;break;case"mousedown":lh=!0;break;case"contextmenu":case"mouseup":case"dragend":lh=!1,bp(J,a,Y);break;case"selectionchange":if(NE)break;case"keydown":case"keyup":bp(J,a,Y)}var we;if(rh)e:{switch(n){case"compositionstart":var Ie="onCompositionStart";break e;case"compositionend":Ie="onCompositionEnd";break e;case"compositionupdate":Ie="onCompositionUpdate";break e}Ie=void 0}else eo?Ap(n,a)&&(Ie="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Ie="onCompositionStart");Ie&&(Tp&&a.locale!=="ko"&&(eo||Ie!=="onCompositionStart"?Ie==="onCompositionEnd"&&eo&&(we=Hl()):(un=Y,Ki="value"in un?un.value:un.textContent,eo=!0)),ve=tu(B,Ie),0<ve.length&&(Ie=new _(Ie,n,null,a,Y),J.push({event:Ie,listeners:ve}),we?Ie.data=we:(we=Cp(a),we!==null&&(Ie.data=we)))),(we=_E?vE(n,a):wE(n,a))&&(B=tu(B,"onBeforeInput"),0<B.length&&(Y=new _("onBeforeInput","beforeinput",null,a,Y),J.push({event:Y,listeners:B}),Y.data=we))}Hp(J,i)})}function Ra(n,i,a){return{instance:n,listener:i,currentTarget:a}}function tu(n,i){for(var a=i+"Capture",c=[];n!==null;){var d=n,p=d.stateNode;d.tag===5&&p!==null&&(d=p,p=Ks(n,a),p!=null&&c.unshift(Ra(n,p,d)),p=Ks(n,i),p!=null&&c.push(Ra(n,p,d))),n=n.return}return c}function ro(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Kp(n,i,a,c,d){for(var p=i._reactName,w=[];a!==null&&a!==c;){var k=a,V=k.alternate,B=k.stateNode;if(V!==null&&V===c)break;k.tag===5&&B!==null&&(k=B,d?(V=Ks(a,p),V!=null&&w.unshift(Ra(a,V,k))):d||(V=Ks(a,p),V!=null&&w.push(Ra(a,V,k)))),a=a.return}w.length!==0&&n.push({event:i,listeners:w})}var OE=/\r\n?/g,ME=/\u0000|\uFFFD/g;function Qp(n){return(typeof n=="string"?n:""+n).replace(OE,`
`).replace(ME,"")}function nu(n,i,a){if(i=Qp(i),Qp(n)!==i&&a)throw Error(t(425))}function ru(){}var ph=null,mh=null;function gh(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var yh=typeof setTimeout=="function"?setTimeout:void 0,LE=typeof clearTimeout=="function"?clearTimeout:void 0,Xp=typeof Promise=="function"?Promise:void 0,bE=typeof queueMicrotask=="function"?queueMicrotask:typeof Xp<"u"?function(n){return Xp.resolve(null).then(n).catch(jE)}:yh;function jE(n){setTimeout(function(){throw n})}function _h(n,i){var a=i,c=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){n.removeChild(d),ss(i);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);ss(i)}function ls(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function Yp(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}var so=Math.random().toString(36).slice(2),nr="__reactFiber$"+so,Pa="__reactProps$"+so,Sr="__reactContainer$"+so,vh="__reactEvents$"+so,FE="__reactListeners$"+so,UE="__reactHandles$"+so;function ai(n){var i=n[nr];if(i)return i;for(var a=n.parentNode;a;){if(i=a[Sr]||a[nr]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=Yp(n);n!==null;){if(a=n[nr])return a;n=Yp(n)}return i}n=a,a=n.parentNode}return null}function ka(n){return n=n[nr]||n[Sr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function io(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function su(n){return n[Pa]||null}var wh=[],oo=-1;function us(n){return{current:n}}function tt(n){0>oo||(n.current=wh[oo],wh[oo]=null,oo--)}function Je(n,i){oo++,wh[oo]=n.current,n.current=i}var cs={},Bt=us(cs),Jt=us(!1),li=cs;function ao(n,i){var a=n.type.contextTypes;if(!a)return cs;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===i)return c.__reactInternalMemoizedMaskedChildContext;var d={},p;for(p in a)d[p]=i[p];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=d),d}function Zt(n){return n=n.childContextTypes,n!=null}function iu(){tt(Jt),tt(Bt)}function Jp(n,i,a){if(Bt.current!==cs)throw Error(t(168));Je(Bt,i),Je(Jt,a)}function Zp(n,i,a){var c=n.stateNode;if(i=i.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in i))throw Error(t(108,$e(n)||"Unknown",d));return ae({},a,c)}function ou(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||cs,li=Bt.current,Je(Bt,n),Je(Jt,Jt.current),!0}function em(n,i,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=Zp(n,i,li),c.__reactInternalMemoizedMergedChildContext=n,tt(Jt),tt(Bt),Je(Bt,n)):tt(Jt),Je(Jt,a)}var Ar=null,au=!1,Eh=!1;function tm(n){Ar===null?Ar=[n]:Ar.push(n)}function BE(n){au=!0,tm(n)}function hs(){if(!Eh&&Ar!==null){Eh=!0;var n=0,i=Fe;try{var a=Ar;for(Fe=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}Ar=null,au=!1}catch(d){throw Ar!==null&&(Ar=Ar.slice(n+1)),ia(Bi,hs),d}finally{Fe=i,Eh=!1}}return null}var lo=[],uo=0,lu=null,uu=0,Tn=[],In=0,ui=null,Cr=1,Rr="";function ci(n,i){lo[uo++]=uu,lo[uo++]=lu,lu=n,uu=i}function nm(n,i,a){Tn[In++]=Cr,Tn[In++]=Rr,Tn[In++]=ui,ui=n;var c=Cr;n=Rr;var d=32-an(c)-1;c&=~(1<<d),a+=1;var p=32-an(i)+d;if(30<p){var w=d-d%5;p=(c&(1<<w)-1).toString(32),c>>=w,d-=w,Cr=1<<32-an(i)+d|a<<d|c,Rr=p+n}else Cr=1<<p|a<<d|c,Rr=n}function Th(n){n.return!==null&&(ci(n,1),nm(n,1,0))}function Ih(n){for(;n===lu;)lu=lo[--uo],lo[uo]=null,uu=lo[--uo],lo[uo]=null;for(;n===ui;)ui=Tn[--In],Tn[In]=null,Rr=Tn[--In],Tn[In]=null,Cr=Tn[--In],Tn[In]=null}var dn=null,fn=null,rt=!1,Vn=null;function rm(n,i){var a=Rn(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=n,i=n.deletions,i===null?(n.deletions=[a],n.flags|=16):i.push(a)}function sm(n,i){switch(n.tag){case 5:var a=n.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,dn=n,fn=ls(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,dn=n,fn=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=ui!==null?{id:Cr,overflow:Rr}:null,n.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=Rn(18,null,null,0),a.stateNode=i,a.return=n,n.child=a,dn=n,fn=null,!0):!1;default:return!1}}function Sh(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Ah(n){if(rt){var i=fn;if(i){var a=i;if(!sm(n,i)){if(Sh(n))throw Error(t(418));i=ls(a.nextSibling);var c=dn;i&&sm(n,i)?rm(c,a):(n.flags=n.flags&-4097|2,rt=!1,dn=n)}}else{if(Sh(n))throw Error(t(418));n.flags=n.flags&-4097|2,rt=!1,dn=n}}}function im(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;dn=n}function cu(n){if(n!==dn)return!1;if(!rt)return im(n),rt=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!gh(n.type,n.memoizedProps)),i&&(i=fn)){if(Sh(n))throw om(),Error(t(418));for(;i;)rm(n,i),i=ls(i.nextSibling)}if(im(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(i===0){fn=ls(n.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}n=n.nextSibling}fn=null}}else fn=dn?ls(n.stateNode.nextSibling):null;return!0}function om(){for(var n=fn;n;)n=ls(n.nextSibling)}function co(){fn=dn=null,rt=!1}function Ch(n){Vn===null?Vn=[n]:Vn.push(n)}var zE=W.ReactCurrentBatchConfig;function Na(n,i,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var d=c,p=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===p?i.ref:(i=function(w){var k=d.refs;w===null?delete k[p]:k[p]=w},i._stringRef=p,i)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function hu(n,i){throw n=Object.prototype.toString.call(i),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function am(n){var i=n._init;return i(n._payload)}function lm(n){function i(j,O){if(n){var U=j.deletions;U===null?(j.deletions=[O],j.flags|=16):U.push(O)}}function a(j,O){if(!n)return null;for(;O!==null;)i(j,O),O=O.sibling;return null}function c(j,O){for(j=new Map;O!==null;)O.key!==null?j.set(O.key,O):j.set(O.index,O),O=O.sibling;return j}function d(j,O){return j=vs(j,O),j.index=0,j.sibling=null,j}function p(j,O,U){return j.index=U,n?(U=j.alternate,U!==null?(U=U.index,U<O?(j.flags|=2,O):U):(j.flags|=2,O)):(j.flags|=1048576,O)}function w(j){return n&&j.alternate===null&&(j.flags|=2),j}function k(j,O,U,ee){return O===null||O.tag!==6?(O=yd(U,j.mode,ee),O.return=j,O):(O=d(O,U),O.return=j,O)}function V(j,O,U,ee){var me=U.type;return me===I?Y(j,O,U.props.children,ee,U.key):O!==null&&(O.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===Ue&&am(me)===O.type)?(ee=d(O,U.props),ee.ref=Na(j,O,U),ee.return=j,ee):(ee=Mu(U.type,U.key,U.props,null,j.mode,ee),ee.ref=Na(j,O,U),ee.return=j,ee)}function B(j,O,U,ee){return O===null||O.tag!==4||O.stateNode.containerInfo!==U.containerInfo||O.stateNode.implementation!==U.implementation?(O=_d(U,j.mode,ee),O.return=j,O):(O=d(O,U.children||[]),O.return=j,O)}function Y(j,O,U,ee,me){return O===null||O.tag!==7?(O=_i(U,j.mode,ee,me),O.return=j,O):(O=d(O,U),O.return=j,O)}function J(j,O,U){if(typeof O=="string"&&O!==""||typeof O=="number")return O=yd(""+O,j.mode,U),O.return=j,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case te:return U=Mu(O.type,O.key,O.props,null,j.mode,U),U.ref=Na(j,null,O),U.return=j,U;case ie:return O=_d(O,j.mode,U),O.return=j,O;case Ue:var ee=O._init;return J(j,ee(O._payload),U)}if(ut(O)||ge(O))return O=_i(O,j.mode,U,null),O.return=j,O;hu(j,O)}return null}function X(j,O,U,ee){var me=O!==null?O.key:null;if(typeof U=="string"&&U!==""||typeof U=="number")return me!==null?null:k(j,O,""+U,ee);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case te:return U.key===me?V(j,O,U,ee):null;case ie:return U.key===me?B(j,O,U,ee):null;case Ue:return me=U._init,X(j,O,me(U._payload),ee)}if(ut(U)||ge(U))return me!==null?null:Y(j,O,U,ee,null);hu(j,U)}return null}function le(j,O,U,ee,me){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return j=j.get(U)||null,k(O,j,""+ee,me);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case te:return j=j.get(ee.key===null?U:ee.key)||null,V(O,j,ee,me);case ie:return j=j.get(ee.key===null?U:ee.key)||null,B(O,j,ee,me);case Ue:var ve=ee._init;return le(j,O,U,ve(ee._payload),me)}if(ut(ee)||ge(ee))return j=j.get(U)||null,Y(O,j,ee,me,null);hu(O,ee)}return null}function fe(j,O,U,ee){for(var me=null,ve=null,we=O,Ie=O=0,kt=null;we!==null&&Ie<U.length;Ie++){we.index>Ie?(kt=we,we=null):kt=we.sibling;var We=X(j,we,U[Ie],ee);if(We===null){we===null&&(we=kt);break}n&&we&&We.alternate===null&&i(j,we),O=p(We,O,Ie),ve===null?me=We:ve.sibling=We,ve=We,we=kt}if(Ie===U.length)return a(j,we),rt&&ci(j,Ie),me;if(we===null){for(;Ie<U.length;Ie++)we=J(j,U[Ie],ee),we!==null&&(O=p(we,O,Ie),ve===null?me=we:ve.sibling=we,ve=we);return rt&&ci(j,Ie),me}for(we=c(j,we);Ie<U.length;Ie++)kt=le(we,j,Ie,U[Ie],ee),kt!==null&&(n&&kt.alternate!==null&&we.delete(kt.key===null?Ie:kt.key),O=p(kt,O,Ie),ve===null?me=kt:ve.sibling=kt,ve=kt);return n&&we.forEach(function(ws){return i(j,ws)}),rt&&ci(j,Ie),me}function pe(j,O,U,ee){var me=ge(U);if(typeof me!="function")throw Error(t(150));if(U=me.call(U),U==null)throw Error(t(151));for(var ve=me=null,we=O,Ie=O=0,kt=null,We=U.next();we!==null&&!We.done;Ie++,We=U.next()){we.index>Ie?(kt=we,we=null):kt=we.sibling;var ws=X(j,we,We.value,ee);if(ws===null){we===null&&(we=kt);break}n&&we&&ws.alternate===null&&i(j,we),O=p(ws,O,Ie),ve===null?me=ws:ve.sibling=ws,ve=ws,we=kt}if(We.done)return a(j,we),rt&&ci(j,Ie),me;if(we===null){for(;!We.done;Ie++,We=U.next())We=J(j,We.value,ee),We!==null&&(O=p(We,O,Ie),ve===null?me=We:ve.sibling=We,ve=We);return rt&&ci(j,Ie),me}for(we=c(j,we);!We.done;Ie++,We=U.next())We=le(we,j,Ie,We.value,ee),We!==null&&(n&&We.alternate!==null&&we.delete(We.key===null?Ie:We.key),O=p(We,O,Ie),ve===null?me=We:ve.sibling=We,ve=We);return n&&we.forEach(function(E0){return i(j,E0)}),rt&&ci(j,Ie),me}function ht(j,O,U,ee){if(typeof U=="object"&&U!==null&&U.type===I&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case te:e:{for(var me=U.key,ve=O;ve!==null;){if(ve.key===me){if(me=U.type,me===I){if(ve.tag===7){a(j,ve.sibling),O=d(ve,U.props.children),O.return=j,j=O;break e}}else if(ve.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===Ue&&am(me)===ve.type){a(j,ve.sibling),O=d(ve,U.props),O.ref=Na(j,ve,U),O.return=j,j=O;break e}a(j,ve);break}else i(j,ve);ve=ve.sibling}U.type===I?(O=_i(U.props.children,j.mode,ee,U.key),O.return=j,j=O):(ee=Mu(U.type,U.key,U.props,null,j.mode,ee),ee.ref=Na(j,O,U),ee.return=j,j=ee)}return w(j);case ie:e:{for(ve=U.key;O!==null;){if(O.key===ve)if(O.tag===4&&O.stateNode.containerInfo===U.containerInfo&&O.stateNode.implementation===U.implementation){a(j,O.sibling),O=d(O,U.children||[]),O.return=j,j=O;break e}else{a(j,O);break}else i(j,O);O=O.sibling}O=_d(U,j.mode,ee),O.return=j,j=O}return w(j);case Ue:return ve=U._init,ht(j,O,ve(U._payload),ee)}if(ut(U))return fe(j,O,U,ee);if(ge(U))return pe(j,O,U,ee);hu(j,U)}return typeof U=="string"&&U!==""||typeof U=="number"?(U=""+U,O!==null&&O.tag===6?(a(j,O.sibling),O=d(O,U),O.return=j,j=O):(a(j,O),O=yd(U,j.mode,ee),O.return=j,j=O),w(j)):a(j,O)}return ht}var ho=lm(!0),um=lm(!1),du=us(null),fu=null,fo=null,Rh=null;function Ph(){Rh=fo=fu=null}function kh(n){var i=du.current;tt(du),n._currentValue=i}function Nh(n,i,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),n===a)break;n=n.return}}function po(n,i){fu=n,Rh=fo=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&i)!==0&&(en=!0),n.firstContext=null)}function Sn(n){var i=n._currentValue;if(Rh!==n)if(n={context:n,memoizedValue:i,next:null},fo===null){if(fu===null)throw Error(t(308));fo=n,fu.dependencies={lanes:0,firstContext:n}}else fo=fo.next=n;return i}var hi=null;function xh(n){hi===null?hi=[n]:hi.push(n)}function cm(n,i,a,c){var d=i.interleaved;return d===null?(a.next=a,xh(i)):(a.next=d.next,d.next=a),i.interleaved=a,Pr(n,c)}function Pr(n,i){n.lanes|=i;var a=n.alternate;for(a!==null&&(a.lanes|=i),a=n,n=n.return;n!==null;)n.childLanes|=i,a=n.alternate,a!==null&&(a.childLanes|=i),a=n,n=n.return;return a.tag===3?a.stateNode:null}var ds=!1;function Dh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hm(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function kr(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function fs(n,i,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(qe&2)!==0){var d=c.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),c.pending=i,Pr(n,a)}return d=c.interleaved,d===null?(i.next=i,xh(c)):(i.next=d.next,d.next=i),c.interleaved=i,Pr(n,a)}function pu(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,ha(n,a)}}function dm(n,i){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};p===null?d=p=w:p=p.next=w,a=a.next}while(a!==null);p===null?d=p=i:p=p.next=i}else d=p=i;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}function mu(n,i,a,c){var d=n.updateQueue;ds=!1;var p=d.firstBaseUpdate,w=d.lastBaseUpdate,k=d.shared.pending;if(k!==null){d.shared.pending=null;var V=k,B=V.next;V.next=null,w===null?p=B:w.next=B,w=V;var Y=n.alternate;Y!==null&&(Y=Y.updateQueue,k=Y.lastBaseUpdate,k!==w&&(k===null?Y.firstBaseUpdate=B:k.next=B,Y.lastBaseUpdate=V))}if(p!==null){var J=d.baseState;w=0,Y=B=V=null,k=p;do{var X=k.lane,le=k.eventTime;if((c&X)===X){Y!==null&&(Y=Y.next={eventTime:le,lane:0,tag:k.tag,payload:k.payload,callback:k.callback,next:null});e:{var fe=n,pe=k;switch(X=i,le=a,pe.tag){case 1:if(fe=pe.payload,typeof fe=="function"){J=fe.call(le,J,X);break e}J=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=pe.payload,X=typeof fe=="function"?fe.call(le,J,X):fe,X==null)break e;J=ae({},J,X);break e;case 2:ds=!0}}k.callback!==null&&k.lane!==0&&(n.flags|=64,X=d.effects,X===null?d.effects=[k]:X.push(k))}else le={eventTime:le,lane:X,tag:k.tag,payload:k.payload,callback:k.callback,next:null},Y===null?(B=Y=le,V=J):Y=Y.next=le,w|=X;if(k=k.next,k===null){if(k=d.shared.pending,k===null)break;X=k,k=X.next,X.next=null,d.lastBaseUpdate=X,d.shared.pending=null}}while(!0);if(Y===null&&(V=J),d.baseState=V,d.firstBaseUpdate=B,d.lastBaseUpdate=Y,i=d.shared.interleaved,i!==null){d=i;do w|=d.lane,d=d.next;while(d!==i)}else p===null&&(d.shared.lanes=0);pi|=w,n.lanes=w,n.memoizedState=J}}function fm(n,i,a){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var c=n[i],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var xa={},rr=us(xa),Da=us(xa),Va=us(xa);function di(n){if(n===xa)throw Error(t(174));return n}function Vh(n,i){switch(Je(Va,i),Je(Da,n),Je(rr,xa),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:Mi(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=Mi(i,n)}tt(rr),Je(rr,i)}function mo(){tt(rr),tt(Da),tt(Va)}function pm(n){di(Va.current);var i=di(rr.current),a=Mi(i,n.type);i!==a&&(Je(Da,n),Je(rr,a))}function Oh(n){Da.current===n&&(tt(rr),tt(Da))}var st=us(0);function gu(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Mh=[];function Lh(){for(var n=0;n<Mh.length;n++)Mh[n]._workInProgressVersionPrimary=null;Mh.length=0}var yu=W.ReactCurrentDispatcher,bh=W.ReactCurrentBatchConfig,fi=0,it=null,Et=null,Rt=null,_u=!1,Oa=!1,Ma=0,$E=0;function zt(){throw Error(t(321))}function jh(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!Dn(n[a],i[a]))return!1;return!0}function Fh(n,i,a,c,d,p){if(fi=p,it=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,yu.current=n===null||n.memoizedState===null?GE:KE,n=a(c,d),Oa){p=0;do{if(Oa=!1,Ma=0,25<=p)throw Error(t(301));p+=1,Rt=Et=null,i.updateQueue=null,yu.current=QE,n=a(c,d)}while(Oa)}if(yu.current=Eu,i=Et!==null&&Et.next!==null,fi=0,Rt=Et=it=null,_u=!1,i)throw Error(t(300));return n}function Uh(){var n=Ma!==0;return Ma=0,n}function sr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?it.memoizedState=Rt=n:Rt=Rt.next=n,Rt}function An(){if(Et===null){var n=it.alternate;n=n!==null?n.memoizedState:null}else n=Et.next;var i=Rt===null?it.memoizedState:Rt.next;if(i!==null)Rt=i,Et=n;else{if(n===null)throw Error(t(310));Et=n,n={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},Rt===null?it.memoizedState=Rt=n:Rt=Rt.next=n}return Rt}function La(n,i){return typeof i=="function"?i(n):i}function Bh(n){var i=An(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=Et,d=c.baseQueue,p=a.pending;if(p!==null){if(d!==null){var w=d.next;d.next=p.next,p.next=w}c.baseQueue=d=p,a.pending=null}if(d!==null){p=d.next,c=c.baseState;var k=w=null,V=null,B=p;do{var Y=B.lane;if((fi&Y)===Y)V!==null&&(V=V.next={lane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),c=B.hasEagerState?B.eagerState:n(c,B.action);else{var J={lane:Y,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null};V===null?(k=V=J,w=c):V=V.next=J,it.lanes|=Y,pi|=Y}B=B.next}while(B!==null&&B!==p);V===null?w=c:V.next=k,Dn(c,i.memoizedState)||(en=!0),i.memoizedState=c,i.baseState=w,i.baseQueue=V,a.lastRenderedState=c}if(n=a.interleaved,n!==null){d=n;do p=d.lane,it.lanes|=p,pi|=p,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function zh(n){var i=An(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,d=a.pending,p=i.memoizedState;if(d!==null){a.pending=null;var w=d=d.next;do p=n(p,w.action),w=w.next;while(w!==d);Dn(p,i.memoizedState)||(en=!0),i.memoizedState=p,i.baseQueue===null&&(i.baseState=p),a.lastRenderedState=p}return[p,c]}function mm(){}function gm(n,i){var a=it,c=An(),d=i(),p=!Dn(c.memoizedState,d);if(p&&(c.memoizedState=d,en=!0),c=c.queue,$h(vm.bind(null,a,c,n),[n]),c.getSnapshot!==i||p||Rt!==null&&Rt.memoizedState.tag&1){if(a.flags|=2048,ba(9,_m.bind(null,a,c,d,i),void 0,null),Pt===null)throw Error(t(349));(fi&30)!==0||ym(a,i,d)}return d}function ym(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=it.updateQueue,i===null?(i={lastEffect:null,stores:null},it.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function _m(n,i,a,c){i.value=a,i.getSnapshot=c,wm(i)&&Em(n)}function vm(n,i,a){return a(function(){wm(i)&&Em(n)})}function wm(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!Dn(n,a)}catch{return!0}}function Em(n){var i=Pr(n,1);i!==null&&bn(i,n,1,-1)}function Tm(n){var i=sr();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:La,lastRenderedState:n},i.queue=n,n=n.dispatch=HE.bind(null,it,n),[i.memoizedState,n]}function ba(n,i,a,c){return n={tag:n,create:i,destroy:a,deps:c,next:null},i=it.updateQueue,i===null?(i={lastEffect:null,stores:null},it.updateQueue=i,i.lastEffect=n.next=n):(a=i.lastEffect,a===null?i.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,i.lastEffect=n)),n}function Im(){return An().memoizedState}function vu(n,i,a,c){var d=sr();it.flags|=n,d.memoizedState=ba(1|i,a,void 0,c===void 0?null:c)}function wu(n,i,a,c){var d=An();c=c===void 0?null:c;var p=void 0;if(Et!==null){var w=Et.memoizedState;if(p=w.destroy,c!==null&&jh(c,w.deps)){d.memoizedState=ba(i,a,p,c);return}}it.flags|=n,d.memoizedState=ba(1|i,a,p,c)}function Sm(n,i){return vu(8390656,8,n,i)}function $h(n,i){return wu(2048,8,n,i)}function Am(n,i){return wu(4,2,n,i)}function Cm(n,i){return wu(4,4,n,i)}function Rm(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Pm(n,i,a){return a=a!=null?a.concat([n]):null,wu(4,4,Rm.bind(null,i,n),a)}function qh(){}function km(n,i){var a=An();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&jh(i,c[1])?c[0]:(a.memoizedState=[n,i],n)}function Nm(n,i){var a=An();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&jh(i,c[1])?c[0]:(n=n(),a.memoizedState=[n,i],n)}function xm(n,i,a){return(fi&21)===0?(n.baseState&&(n.baseState=!1,en=!0),n.memoizedState=a):(Dn(a,i)||(a=ua(),it.lanes|=a,pi|=a,n.baseState=!0),i)}function qE(n,i){var a=Fe;Fe=a!==0&&4>a?a:4,n(!0);var c=bh.transition;bh.transition={};try{n(!1),i()}finally{Fe=a,bh.transition=c}}function Dm(){return An().memoizedState}function WE(n,i,a){var c=ys(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},Vm(n))Om(i,a);else if(a=cm(n,i,a,c),a!==null){var d=Qt();bn(a,n,c,d),Mm(a,i,c)}}function HE(n,i,a){var c=ys(n),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(Vm(n))Om(i,d);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=i.lastRenderedReducer,p!==null))try{var w=i.lastRenderedState,k=p(w,a);if(d.hasEagerState=!0,d.eagerState=k,Dn(k,w)){var V=i.interleaved;V===null?(d.next=d,xh(i)):(d.next=V.next,V.next=d),i.interleaved=d;return}}catch{}a=cm(n,i,d,c),a!==null&&(d=Qt(),bn(a,n,c,d),Mm(a,i,c))}}function Vm(n){var i=n.alternate;return n===it||i!==null&&i===it}function Om(n,i){Oa=_u=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function Mm(n,i,a){if((a&4194240)!==0){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,ha(n,a)}}var Eu={readContext:Sn,useCallback:zt,useContext:zt,useEffect:zt,useImperativeHandle:zt,useInsertionEffect:zt,useLayoutEffect:zt,useMemo:zt,useReducer:zt,useRef:zt,useState:zt,useDebugValue:zt,useDeferredValue:zt,useTransition:zt,useMutableSource:zt,useSyncExternalStore:zt,useId:zt,unstable_isNewReconciler:!1},GE={readContext:Sn,useCallback:function(n,i){return sr().memoizedState=[n,i===void 0?null:i],n},useContext:Sn,useEffect:Sm,useImperativeHandle:function(n,i,a){return a=a!=null?a.concat([n]):null,vu(4194308,4,Rm.bind(null,i,n),a)},useLayoutEffect:function(n,i){return vu(4194308,4,n,i)},useInsertionEffect:function(n,i){return vu(4,2,n,i)},useMemo:function(n,i){var a=sr();return i=i===void 0?null:i,n=n(),a.memoizedState=[n,i],n},useReducer:function(n,i,a){var c=sr();return i=a!==void 0?a(i):i,c.memoizedState=c.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},c.queue=n,n=n.dispatch=WE.bind(null,it,n),[c.memoizedState,n]},useRef:function(n){var i=sr();return n={current:n},i.memoizedState=n},useState:Tm,useDebugValue:qh,useDeferredValue:function(n){return sr().memoizedState=n},useTransition:function(){var n=Tm(!1),i=n[0];return n=qE.bind(null,n[1]),sr().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,a){var c=it,d=sr();if(rt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=i(),Pt===null)throw Error(t(349));(fi&30)!==0||ym(c,i,a)}d.memoizedState=a;var p={value:a,getSnapshot:i};return d.queue=p,Sm(vm.bind(null,c,p,n),[n]),c.flags|=2048,ba(9,_m.bind(null,c,p,a,i),void 0,null),a},useId:function(){var n=sr(),i=Pt.identifierPrefix;if(rt){var a=Rr,c=Cr;a=(c&~(1<<32-an(c)-1)).toString(32)+a,i=":"+i+"R"+a,a=Ma++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=$E++,i=":"+i+"r"+a.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},KE={readContext:Sn,useCallback:km,useContext:Sn,useEffect:$h,useImperativeHandle:Pm,useInsertionEffect:Am,useLayoutEffect:Cm,useMemo:Nm,useReducer:Bh,useRef:Im,useState:function(){return Bh(La)},useDebugValue:qh,useDeferredValue:function(n){var i=An();return xm(i,Et.memoizedState,n)},useTransition:function(){var n=Bh(La)[0],i=An().memoizedState;return[n,i]},useMutableSource:mm,useSyncExternalStore:gm,useId:Dm,unstable_isNewReconciler:!1},QE={readContext:Sn,useCallback:km,useContext:Sn,useEffect:$h,useImperativeHandle:Pm,useInsertionEffect:Am,useLayoutEffect:Cm,useMemo:Nm,useReducer:zh,useRef:Im,useState:function(){return zh(La)},useDebugValue:qh,useDeferredValue:function(n){var i=An();return Et===null?i.memoizedState=n:xm(i,Et.memoizedState,n)},useTransition:function(){var n=zh(La)[0],i=An().memoizedState;return[n,i]},useMutableSource:mm,useSyncExternalStore:gm,useId:Dm,unstable_isNewReconciler:!1};function On(n,i){if(n&&n.defaultProps){i=ae({},i),n=n.defaultProps;for(var a in n)i[a]===void 0&&(i[a]=n[a]);return i}return i}function Wh(n,i,a,c){i=n.memoizedState,a=a(c,i),a=a==null?i:ae({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Tu={isMounted:function(n){return(n=n._reactInternals)?Nn(n)===n:!1},enqueueSetState:function(n,i,a){n=n._reactInternals;var c=Qt(),d=ys(n),p=kr(c,d);p.payload=i,a!=null&&(p.callback=a),i=fs(n,p,d),i!==null&&(bn(i,n,d,c),pu(i,n,d))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var c=Qt(),d=ys(n),p=kr(c,d);p.tag=1,p.payload=i,a!=null&&(p.callback=a),i=fs(n,p,d),i!==null&&(bn(i,n,d,c),pu(i,n,d))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=Qt(),c=ys(n),d=kr(a,c);d.tag=2,i!=null&&(d.callback=i),i=fs(n,d,c),i!==null&&(bn(i,n,c,a),pu(i,n,c))}};function Lm(n,i,a,c,d,p,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,p,w):i.prototype&&i.prototype.isPureReactComponent?!Ia(a,c)||!Ia(d,p):!0}function bm(n,i,a){var c=!1,d=cs,p=i.contextType;return typeof p=="object"&&p!==null?p=Sn(p):(d=Zt(i)?li:Bt.current,c=i.contextTypes,p=(c=c!=null)?ao(n,d):cs),i=new i(a,p),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Tu,n.stateNode=i,i._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=p),i}function jm(n,i,a,c){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,c),i.state!==n&&Tu.enqueueReplaceState(i,i.state,null)}function Hh(n,i,a,c){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs={},Dh(n);var p=i.contextType;typeof p=="object"&&p!==null?d.context=Sn(p):(p=Zt(i)?li:Bt.current,d.context=ao(n,p)),d.state=n.memoizedState,p=i.getDerivedStateFromProps,typeof p=="function"&&(Wh(n,i,p,a),d.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(i=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),i!==d.state&&Tu.enqueueReplaceState(d,d.state,null),mu(n,a,d,c),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function go(n,i){try{var a="",c=i;do a+=xe(c),c=c.return;while(c);var d=a}catch(p){d=`
Error generating stack: `+p.message+`
`+p.stack}return{value:n,source:i,stack:d,digest:null}}function Gh(n,i,a){return{value:n,source:null,stack:a??null,digest:i??null}}function Kh(n,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var XE=typeof WeakMap=="function"?WeakMap:Map;function Fm(n,i,a){a=kr(-1,a),a.tag=3,a.payload={element:null};var c=i.value;return a.callback=function(){ku||(ku=!0,ud=c),Kh(n,i)},a}function Um(n,i,a){a=kr(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=i.value;a.payload=function(){return c(d)},a.callback=function(){Kh(n,i)}}var p=n.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(a.callback=function(){Kh(n,i),typeof c!="function"&&(ms===null?ms=new Set([this]):ms.add(this));var w=i.stack;this.componentDidCatch(i.value,{componentStack:w!==null?w:""})}),a}function Bm(n,i,a){var c=n.pingCache;if(c===null){c=n.pingCache=new XE;var d=new Set;c.set(i,d)}else d=c.get(i),d===void 0&&(d=new Set,c.set(i,d));d.has(a)||(d.add(a),n=c0.bind(null,n,i,a),i.then(n,n))}function zm(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function $m(n,i,a,c,d){return(n.mode&1)===0?(n===i?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=kr(-1,1),i.tag=2,fs(a,i,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=d,n)}var YE=W.ReactCurrentOwner,en=!1;function Kt(n,i,a,c){i.child=n===null?um(i,null,a,c):ho(i,n.child,a,c)}function qm(n,i,a,c,d){a=a.render;var p=i.ref;return po(i,d),c=Fh(n,i,a,c,p,d),a=Uh(),n!==null&&!en?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~d,Nr(n,i,d)):(rt&&a&&Th(i),i.flags|=1,Kt(n,i,c,d),i.child)}function Wm(n,i,a,c,d){if(n===null){var p=a.type;return typeof p=="function"&&!gd(p)&&p.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=p,Hm(n,i,p,c,d)):(n=Mu(a.type,null,c,i,i.mode,d),n.ref=i.ref,n.return=i,i.child=n)}if(p=n.child,(n.lanes&d)===0){var w=p.memoizedProps;if(a=a.compare,a=a!==null?a:Ia,a(w,c)&&n.ref===i.ref)return Nr(n,i,d)}return i.flags|=1,n=vs(p,c),n.ref=i.ref,n.return=i,i.child=n}function Hm(n,i,a,c,d){if(n!==null){var p=n.memoizedProps;if(Ia(p,c)&&n.ref===i.ref)if(en=!1,i.pendingProps=c=p,(n.lanes&d)!==0)(n.flags&131072)!==0&&(en=!0);else return i.lanes=n.lanes,Nr(n,i,d)}return Qh(n,i,a,c,d)}function Gm(n,i,a){var c=i.pendingProps,d=c.children,p=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Je(_o,pn),pn|=a;else{if((a&1073741824)===0)return n=p!==null?p.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,Je(_o,pn),pn|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=p!==null?p.baseLanes:a,Je(_o,pn),pn|=c}else p!==null?(c=p.baseLanes|a,i.memoizedState=null):c=a,Je(_o,pn),pn|=c;return Kt(n,i,d,a),i.child}function Km(n,i){var a=i.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function Qh(n,i,a,c,d){var p=Zt(a)?li:Bt.current;return p=ao(i,p),po(i,d),a=Fh(n,i,a,c,p,d),c=Uh(),n!==null&&!en?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~d,Nr(n,i,d)):(rt&&c&&Th(i),i.flags|=1,Kt(n,i,a,d),i.child)}function Qm(n,i,a,c,d){if(Zt(a)){var p=!0;ou(i)}else p=!1;if(po(i,d),i.stateNode===null)Su(n,i),bm(i,a,c),Hh(i,a,c,d),c=!0;else if(n===null){var w=i.stateNode,k=i.memoizedProps;w.props=k;var V=w.context,B=a.contextType;typeof B=="object"&&B!==null?B=Sn(B):(B=Zt(a)?li:Bt.current,B=ao(i,B));var Y=a.getDerivedStateFromProps,J=typeof Y=="function"||typeof w.getSnapshotBeforeUpdate=="function";J||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(k!==c||V!==B)&&jm(i,w,c,B),ds=!1;var X=i.memoizedState;w.state=X,mu(i,c,w,d),V=i.memoizedState,k!==c||X!==V||Jt.current||ds?(typeof Y=="function"&&(Wh(i,a,Y,c),V=i.memoizedState),(k=ds||Lm(i,a,k,c,X,V,B))?(J||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(i.flags|=4194308)):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=V),w.props=c,w.state=V,w.context=B,c=k):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{w=i.stateNode,hm(n,i),k=i.memoizedProps,B=i.type===i.elementType?k:On(i.type,k),w.props=B,J=i.pendingProps,X=w.context,V=a.contextType,typeof V=="object"&&V!==null?V=Sn(V):(V=Zt(a)?li:Bt.current,V=ao(i,V));var le=a.getDerivedStateFromProps;(Y=typeof le=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(k!==J||X!==V)&&jm(i,w,c,V),ds=!1,X=i.memoizedState,w.state=X,mu(i,c,w,d);var fe=i.memoizedState;k!==J||X!==fe||Jt.current||ds?(typeof le=="function"&&(Wh(i,a,le,c),fe=i.memoizedState),(B=ds||Lm(i,a,B,c,X,fe,V)||!1)?(Y||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(c,fe,V),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(c,fe,V)),typeof w.componentDidUpdate=="function"&&(i.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof w.componentDidUpdate!="function"||k===n.memoizedProps&&X===n.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||k===n.memoizedProps&&X===n.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=fe),w.props=c,w.state=fe,w.context=V,c=B):(typeof w.componentDidUpdate!="function"||k===n.memoizedProps&&X===n.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||k===n.memoizedProps&&X===n.memoizedState||(i.flags|=1024),c=!1)}return Xh(n,i,a,c,p,d)}function Xh(n,i,a,c,d,p){Km(n,i);var w=(i.flags&128)!==0;if(!c&&!w)return d&&em(i,a,!1),Nr(n,i,p);c=i.stateNode,YE.current=i;var k=w&&typeof a.getDerivedStateFromError!="function"?null:c.render();return i.flags|=1,n!==null&&w?(i.child=ho(i,n.child,null,p),i.child=ho(i,null,k,p)):Kt(n,i,k,p),i.memoizedState=c.state,d&&em(i,a,!0),i.child}function Xm(n){var i=n.stateNode;i.pendingContext?Jp(n,i.pendingContext,i.pendingContext!==i.context):i.context&&Jp(n,i.context,!1),Vh(n,i.containerInfo)}function Ym(n,i,a,c,d){return co(),Ch(d),i.flags|=256,Kt(n,i,a,c),i.child}var Yh={dehydrated:null,treeContext:null,retryLane:0};function Jh(n){return{baseLanes:n,cachePool:null,transitions:null}}function Jm(n,i,a){var c=i.pendingProps,d=st.current,p=!1,w=(i.flags&128)!==0,k;if((k=w)||(k=n!==null&&n.memoizedState===null?!1:(d&2)!==0),k?(p=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),Je(st,d&1),n===null)return Ah(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((i.mode&1)===0?i.lanes=1:n.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(w=c.children,n=c.fallback,p?(c=i.mode,p=i.child,w={mode:"hidden",children:w},(c&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=w):p=Lu(w,c,0,null),n=_i(n,c,a,null),p.return=i,n.return=i,p.sibling=n,i.child=p,i.child.memoizedState=Jh(a),i.memoizedState=Yh,n):Zh(i,w));if(d=n.memoizedState,d!==null&&(k=d.dehydrated,k!==null))return JE(n,i,w,c,k,d,a);if(p){p=c.fallback,w=i.mode,d=n.child,k=d.sibling;var V={mode:"hidden",children:c.children};return(w&1)===0&&i.child!==d?(c=i.child,c.childLanes=0,c.pendingProps=V,i.deletions=null):(c=vs(d,V),c.subtreeFlags=d.subtreeFlags&14680064),k!==null?p=vs(k,p):(p=_i(p,w,a,null),p.flags|=2),p.return=i,c.return=i,c.sibling=p,i.child=c,c=p,p=i.child,w=n.child.memoizedState,w=w===null?Jh(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},p.memoizedState=w,p.childLanes=n.childLanes&~a,i.memoizedState=Yh,c}return p=n.child,n=p.sibling,c=vs(p,{mode:"visible",children:c.children}),(i.mode&1)===0&&(c.lanes=a),c.return=i,c.sibling=null,n!==null&&(a=i.deletions,a===null?(i.deletions=[n],i.flags|=16):a.push(n)),i.child=c,i.memoizedState=null,c}function Zh(n,i){return i=Lu({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function Iu(n,i,a,c){return c!==null&&Ch(c),ho(i,n.child,null,a),n=Zh(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function JE(n,i,a,c,d,p,w){if(a)return i.flags&256?(i.flags&=-257,c=Gh(Error(t(422))),Iu(n,i,w,c)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(p=c.fallback,d=i.mode,c=Lu({mode:"visible",children:c.children},d,0,null),p=_i(p,d,w,null),p.flags|=2,c.return=i,p.return=i,c.sibling=p,i.child=c,(i.mode&1)!==0&&ho(i,n.child,null,w),i.child.memoizedState=Jh(w),i.memoizedState=Yh,p);if((i.mode&1)===0)return Iu(n,i,w,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var k=c.dgst;return c=k,p=Error(t(419)),c=Gh(p,c,void 0),Iu(n,i,w,c)}if(k=(w&n.childLanes)!==0,en||k){if(c=Pt,c!==null){switch(w&-w){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|w))!==0?0:d,d!==0&&d!==p.retryLane&&(p.retryLane=d,Pr(n,d),bn(c,n,d,-1))}return md(),c=Gh(Error(t(421))),Iu(n,i,w,c)}return d.data==="$?"?(i.flags|=128,i.child=n.child,i=h0.bind(null,n),d._reactRetry=i,null):(n=p.treeContext,fn=ls(d.nextSibling),dn=i,rt=!0,Vn=null,n!==null&&(Tn[In++]=Cr,Tn[In++]=Rr,Tn[In++]=ui,Cr=n.id,Rr=n.overflow,ui=i),i=Zh(i,c.children),i.flags|=4096,i)}function Zm(n,i,a){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i),Nh(n.return,i,a)}function ed(n,i,a,c,d){var p=n.memoizedState;p===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(p.isBackwards=i,p.rendering=null,p.renderingStartTime=0,p.last=c,p.tail=a,p.tailMode=d)}function eg(n,i,a){var c=i.pendingProps,d=c.revealOrder,p=c.tail;if(Kt(n,i,c.children,a),c=st.current,(c&2)!==0)c=c&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Zm(n,a,i);else if(n.tag===19)Zm(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(Je(st,c),(i.mode&1)===0)i.memoizedState=null;else switch(d){case"forwards":for(a=i.child,d=null;a!==null;)n=a.alternate,n!==null&&gu(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=i.child,i.child=null):(d=a.sibling,a.sibling=null),ed(i,!1,d,a,p);break;case"backwards":for(a=null,d=i.child,i.child=null;d!==null;){if(n=d.alternate,n!==null&&gu(n)===null){i.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}ed(i,!0,a,null,p);break;case"together":ed(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Su(n,i){(i.mode&1)===0&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function Nr(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),pi|=i.lanes,(a&i.childLanes)===0)return null;if(n!==null&&i.child!==n.child)throw Error(t(153));if(i.child!==null){for(n=i.child,a=vs(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=vs(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function ZE(n,i,a){switch(i.tag){case 3:Xm(i),co();break;case 5:pm(i);break;case 1:Zt(i.type)&&ou(i);break;case 4:Vh(i,i.stateNode.containerInfo);break;case 10:var c=i.type._context,d=i.memoizedProps.value;Je(du,c._currentValue),c._currentValue=d;break;case 13:if(c=i.memoizedState,c!==null)return c.dehydrated!==null?(Je(st,st.current&1),i.flags|=128,null):(a&i.child.childLanes)!==0?Jm(n,i,a):(Je(st,st.current&1),n=Nr(n,i,a),n!==null?n.sibling:null);Je(st,st.current&1);break;case 19:if(c=(a&i.childLanes)!==0,(n.flags&128)!==0){if(c)return eg(n,i,a);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Je(st,st.current),c)break;return null;case 22:case 23:return i.lanes=0,Gm(n,i,a)}return Nr(n,i,a)}var tg,td,ng,rg;tg=function(n,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},td=function(){},ng=function(n,i,a,c){var d=n.memoizedProps;if(d!==c){n=i.stateNode,di(rr.current);var p=null;switch(a){case"input":d=Vi(n,d),c=Vi(n,c),p=[];break;case"select":d=ae({},d,{value:void 0}),c=ae({},c,{value:void 0}),p=[];break;case"textarea":d=Jo(n,d),c=Jo(n,c),p=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=ru)}kn(a,c);var w;a=null;for(B in d)if(!c.hasOwnProperty(B)&&d.hasOwnProperty(B)&&d[B]!=null)if(B==="style"){var k=d[B];for(w in k)k.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else B!=="dangerouslySetInnerHTML"&&B!=="children"&&B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&B!=="autoFocus"&&(o.hasOwnProperty(B)?p||(p=[]):(p=p||[]).push(B,null));for(B in c){var V=c[B];if(k=d?.[B],c.hasOwnProperty(B)&&V!==k&&(V!=null||k!=null))if(B==="style")if(k){for(w in k)!k.hasOwnProperty(w)||V&&V.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in V)V.hasOwnProperty(w)&&k[w]!==V[w]&&(a||(a={}),a[w]=V[w])}else a||(p||(p=[]),p.push(B,a)),a=V;else B==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,k=k?k.__html:void 0,V!=null&&k!==V&&(p=p||[]).push(B,V)):B==="children"?typeof V!="string"&&typeof V!="number"||(p=p||[]).push(B,""+V):B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&(o.hasOwnProperty(B)?(V!=null&&B==="onScroll"&&et("scroll",n),p||k===V||(p=[])):(p=p||[]).push(B,V))}a&&(p=p||[]).push("style",a);var B=p;(i.updateQueue=B)&&(i.flags|=4)}},rg=function(n,i,a,c){a!==c&&(i.flags|=4)};function ja(n,i){if(!rt)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function $t(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(i)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=a,i}function e0(n,i,a){var c=i.pendingProps;switch(Ih(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(i),null;case 1:return Zt(i.type)&&iu(),$t(i),null;case 3:return c=i.stateNode,mo(),tt(Jt),tt(Bt),Lh(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(cu(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Vn!==null&&(dd(Vn),Vn=null))),td(n,i),$t(i),null;case 5:Oh(i);var d=di(Va.current);if(a=i.type,n!==null&&i.stateNode!=null)ng(n,i,a,c,d),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!c){if(i.stateNode===null)throw Error(t(166));return $t(i),null}if(n=di(rr.current),cu(i)){c=i.stateNode,a=i.type;var p=i.memoizedProps;switch(c[nr]=i,c[Pa]=p,n=(i.mode&1)!==0,a){case"dialog":et("cancel",c),et("close",c);break;case"iframe":case"object":case"embed":et("load",c);break;case"video":case"audio":for(d=0;d<Aa.length;d++)et(Aa[d],c);break;case"source":et("error",c);break;case"img":case"image":case"link":et("error",c),et("load",c);break;case"details":et("toggle",c);break;case"input":Pl(c,p),et("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!p.multiple},et("invalid",c);break;case"textarea":Zo(c,p),et("invalid",c)}kn(a,p),d=null;for(var w in p)if(p.hasOwnProperty(w)){var k=p[w];w==="children"?typeof k=="string"?c.textContent!==k&&(p.suppressHydrationWarning!==!0&&nu(c.textContent,k,n),d=["children",k]):typeof k=="number"&&c.textContent!==""+k&&(p.suppressHydrationWarning!==!0&&nu(c.textContent,k,n),d=["children",""+k]):o.hasOwnProperty(w)&&k!=null&&w==="onScroll"&&et("scroll",c)}switch(a){case"input":vn(c),Yo(c,p,!0);break;case"textarea":vn(c),Hr(c);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(c.onclick=ru)}c=d,i.updateQueue=c,c!==null&&(i.flags|=4)}else{w=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=ea(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=w.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=w.createElement(a,{is:c.is}):(n=w.createElement(a),a==="select"&&(w=n,c.multiple?w.multiple=!0:c.size&&(w.size=c.size))):n=w.createElementNS(n,a),n[nr]=i,n[Pa]=c,tg(n,i,!1,!1),i.stateNode=n;e:{switch(w=bi(a,c),a){case"dialog":et("cancel",n),et("close",n),d=c;break;case"iframe":case"object":case"embed":et("load",n),d=c;break;case"video":case"audio":for(d=0;d<Aa.length;d++)et(Aa[d],n);d=c;break;case"source":et("error",n),d=c;break;case"img":case"image":case"link":et("error",n),et("load",n),d=c;break;case"details":et("toggle",n),d=c;break;case"input":Pl(n,c),d=Vi(n,c),et("invalid",n);break;case"option":d=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},d=ae({},c,{value:void 0}),et("invalid",n);break;case"textarea":Zo(n,c),d=Jo(n,c),et("invalid",n);break;default:d=c}kn(a,d),k=d;for(p in k)if(k.hasOwnProperty(p)){var V=k[p];p==="style"?Li(n,V):p==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,V!=null&&Nl(n,V)):p==="children"?typeof V=="string"?(a!=="textarea"||V!=="")&&Gs(n,V):typeof V=="number"&&Gs(n,""+V):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(o.hasOwnProperty(p)?V!=null&&p==="onScroll"&&et("scroll",n):V!=null&&G(n,p,V,w))}switch(a){case"input":vn(n),Yo(n,c,!1);break;case"textarea":vn(n),Hr(n);break;case"option":c.value!=null&&n.setAttribute("value",""+je(c.value));break;case"select":n.multiple=!!c.multiple,p=c.value,p!=null?Pn(n,!!c.multiple,p,!1):c.defaultValue!=null&&Pn(n,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=ru)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return $t(i),null;case 6:if(n&&i.stateNode!=null)rg(n,i,n.memoizedProps,c);else{if(typeof c!="string"&&i.stateNode===null)throw Error(t(166));if(a=di(Va.current),di(rr.current),cu(i)){if(c=i.stateNode,a=i.memoizedProps,c[nr]=i,(p=c.nodeValue!==a)&&(n=dn,n!==null))switch(n.tag){case 3:nu(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&nu(c.nodeValue,a,(n.mode&1)!==0)}p&&(i.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[nr]=i,i.stateNode=c}return $t(i),null;case 13:if(tt(st),c=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(rt&&fn!==null&&(i.mode&1)!==0&&(i.flags&128)===0)om(),co(),i.flags|=98560,p=!1;else if(p=cu(i),c!==null&&c.dehydrated!==null){if(n===null){if(!p)throw Error(t(318));if(p=i.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(t(317));p[nr]=i}else co(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;$t(i),p=!1}else Vn!==null&&(dd(Vn),Vn=null),p=!0;if(!p)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=a,i):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(i.child.flags|=8192,(i.mode&1)!==0&&(n===null||(st.current&1)!==0?Tt===0&&(Tt=3):md())),i.updateQueue!==null&&(i.flags|=4),$t(i),null);case 4:return mo(),td(n,i),n===null&&Ca(i.stateNode.containerInfo),$t(i),null;case 10:return kh(i.type._context),$t(i),null;case 17:return Zt(i.type)&&iu(),$t(i),null;case 19:if(tt(st),p=i.memoizedState,p===null)return $t(i),null;if(c=(i.flags&128)!==0,w=p.rendering,w===null)if(c)ja(p,!1);else{if(Tt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(w=gu(n),w!==null){for(i.flags|=128,ja(p,!1),c=w.updateQueue,c!==null&&(i.updateQueue=c,i.flags|=4),i.subtreeFlags=0,c=a,a=i.child;a!==null;)p=a,n=c,p.flags&=14680066,w=p.alternate,w===null?(p.childLanes=0,p.lanes=n,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=w.childLanes,p.lanes=w.lanes,p.child=w.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=w.memoizedProps,p.memoizedState=w.memoizedState,p.updateQueue=w.updateQueue,p.type=w.type,n=w.dependencies,p.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Je(st,st.current&1|2),i.child}n=n.sibling}p.tail!==null&&Ze()>vo&&(i.flags|=128,c=!0,ja(p,!1),i.lanes=4194304)}else{if(!c)if(n=gu(w),n!==null){if(i.flags|=128,c=!0,a=n.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),ja(p,!0),p.tail===null&&p.tailMode==="hidden"&&!w.alternate&&!rt)return $t(i),null}else 2*Ze()-p.renderingStartTime>vo&&a!==1073741824&&(i.flags|=128,c=!0,ja(p,!1),i.lanes=4194304);p.isBackwards?(w.sibling=i.child,i.child=w):(a=p.last,a!==null?a.sibling=w:i.child=w,p.last=w)}return p.tail!==null?(i=p.tail,p.rendering=i,p.tail=i.sibling,p.renderingStartTime=Ze(),i.sibling=null,a=st.current,Je(st,c?a&1|2:a&1),i):($t(i),null);case 22:case 23:return pd(),c=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(i.flags|=8192),c&&(i.mode&1)!==0?(pn&1073741824)!==0&&($t(i),i.subtreeFlags&6&&(i.flags|=8192)):$t(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function t0(n,i){switch(Ih(i),i.tag){case 1:return Zt(i.type)&&iu(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return mo(),tt(Jt),tt(Bt),Lh(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 5:return Oh(i),null;case 13:if(tt(st),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(t(340));co()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return tt(st),null;case 4:return mo(),null;case 10:return kh(i.type._context),null;case 22:case 23:return pd(),null;case 24:return null;default:return null}}var Au=!1,qt=!1,n0=typeof WeakSet=="function"?WeakSet:Set,he=null;function yo(n,i){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){lt(n,i,c)}else a.current=null}function nd(n,i,a){try{a()}catch(c){lt(n,i,c)}}var sg=!1;function r0(n,i){if(ph=Er,n=Lp(),oh(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break e}var w=0,k=-1,V=-1,B=0,Y=0,J=n,X=null;t:for(;;){for(var le;J!==a||d!==0&&J.nodeType!==3||(k=w+d),J!==p||c!==0&&J.nodeType!==3||(V=w+c),J.nodeType===3&&(w+=J.nodeValue.length),(le=J.firstChild)!==null;)X=J,J=le;for(;;){if(J===n)break t;if(X===a&&++B===d&&(k=w),X===p&&++Y===c&&(V=w),(le=J.nextSibling)!==null)break;J=X,X=J.parentNode}J=le}a=k===-1||V===-1?null:{start:k,end:V}}else a=null}a=a||{start:0,end:0}}else a=null;for(mh={focusedElem:n,selectionRange:a},Er=!1,he=i;he!==null;)if(i=he,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,he=n;else for(;he!==null;){i=he;try{var fe=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(fe!==null){var pe=fe.memoizedProps,ht=fe.memoizedState,j=i.stateNode,O=j.getSnapshotBeforeUpdate(i.elementType===i.type?pe:On(i.type,pe),ht);j.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var U=i.stateNode.containerInfo;U.nodeType===1?U.textContent="":U.nodeType===9&&U.documentElement&&U.removeChild(U.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ee){lt(i,i.return,ee)}if(n=i.sibling,n!==null){n.return=i.return,he=n;break}he=i.return}return fe=sg,sg=!1,fe}function Fa(n,i,a){var c=i.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&n)===n){var p=d.destroy;d.destroy=void 0,p!==void 0&&nd(i,a,p)}d=d.next}while(d!==c)}}function Cu(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==i)}}function rd(n){var i=n.ref;if(i!==null){var a=n.stateNode;n.tag,n=a,typeof i=="function"?i(n):i.current=n}}function ig(n){var i=n.alternate;i!==null&&(n.alternate=null,ig(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[nr],delete i[Pa],delete i[vh],delete i[FE],delete i[UE])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function og(n){return n.tag===5||n.tag===3||n.tag===4}function ag(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||og(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function sd(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(n,i):a.insertBefore(n,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(n,a)):(i=a,i.appendChild(n)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=ru));else if(c!==4&&(n=n.child,n!==null))for(sd(n,i,a),n=n.sibling;n!==null;)sd(n,i,a),n=n.sibling}function id(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(id(n,i,a),n=n.sibling;n!==null;)id(n,i,a),n=n.sibling}var Ot=null,Mn=!1;function ps(n,i,a){for(a=a.child;a!==null;)lg(n,i,a),a=a.sibling}function lg(n,i,a){if(on&&typeof on.onCommitFiberUnmount=="function")try{on.onCommitFiberUnmount(Js,a)}catch{}switch(a.tag){case 5:qt||yo(a,i);case 6:var c=Ot,d=Mn;Ot=null,ps(n,i,a),Ot=c,Mn=d,Ot!==null&&(Mn?(n=Ot,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Ot.removeChild(a.stateNode));break;case 18:Ot!==null&&(Mn?(n=Ot,a=a.stateNode,n.nodeType===8?_h(n.parentNode,a):n.nodeType===1&&_h(n,a),ss(n)):_h(Ot,a.stateNode));break;case 4:c=Ot,d=Mn,Ot=a.stateNode.containerInfo,Mn=!0,ps(n,i,a),Ot=c,Mn=d;break;case 0:case 11:case 14:case 15:if(!qt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var p=d,w=p.destroy;p=p.tag,w!==void 0&&((p&2)!==0||(p&4)!==0)&&nd(a,i,w),d=d.next}while(d!==c)}ps(n,i,a);break;case 1:if(!qt&&(yo(a,i),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(k){lt(a,i,k)}ps(n,i,a);break;case 21:ps(n,i,a);break;case 22:a.mode&1?(qt=(c=qt)||a.memoizedState!==null,ps(n,i,a),qt=c):ps(n,i,a);break;default:ps(n,i,a)}}function ug(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new n0),i.forEach(function(c){var d=d0.bind(null,n,c);a.has(c)||(a.add(c),c.then(d,d))})}}function Ln(n,i){var a=i.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var p=n,w=i,k=w;e:for(;k!==null;){switch(k.tag){case 5:Ot=k.stateNode,Mn=!1;break e;case 3:Ot=k.stateNode.containerInfo,Mn=!0;break e;case 4:Ot=k.stateNode.containerInfo,Mn=!0;break e}k=k.return}if(Ot===null)throw Error(t(160));lg(p,w,d),Ot=null,Mn=!1;var V=d.alternate;V!==null&&(V.return=null),d.return=null}catch(B){lt(d,i,B)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)cg(i,n),i=i.sibling}function cg(n,i){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Ln(i,n),ir(n),c&4){try{Fa(3,n,n.return),Cu(3,n)}catch(pe){lt(n,n.return,pe)}try{Fa(5,n,n.return)}catch(pe){lt(n,n.return,pe)}}break;case 1:Ln(i,n),ir(n),c&512&&a!==null&&yo(a,a.return);break;case 5:if(Ln(i,n),ir(n),c&512&&a!==null&&yo(a,a.return),n.flags&32){var d=n.stateNode;try{Gs(d,"")}catch(pe){lt(n,n.return,pe)}}if(c&4&&(d=n.stateNode,d!=null)){var p=n.memoizedProps,w=a!==null?a.memoizedProps:p,k=n.type,V=n.updateQueue;if(n.updateQueue=null,V!==null)try{k==="input"&&p.type==="radio"&&p.name!=null&&Oi(d,p),bi(k,w);var B=bi(k,p);for(w=0;w<V.length;w+=2){var Y=V[w],J=V[w+1];Y==="style"?Li(d,J):Y==="dangerouslySetInnerHTML"?Nl(d,J):Y==="children"?Gs(d,J):G(d,Y,J,B)}switch(k){case"input":Hs(d,p);break;case"textarea":kl(d,p);break;case"select":var X=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!p.multiple;var le=p.value;le!=null?Pn(d,!!p.multiple,le,!1):X!==!!p.multiple&&(p.defaultValue!=null?Pn(d,!!p.multiple,p.defaultValue,!0):Pn(d,!!p.multiple,p.multiple?[]:"",!1))}d[Pa]=p}catch(pe){lt(n,n.return,pe)}}break;case 6:if(Ln(i,n),ir(n),c&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,p=n.memoizedProps;try{d.nodeValue=p}catch(pe){lt(n,n.return,pe)}}break;case 3:if(Ln(i,n),ir(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{ss(i.containerInfo)}catch(pe){lt(n,n.return,pe)}break;case 4:Ln(i,n),ir(n);break;case 13:Ln(i,n),ir(n),d=n.child,d.flags&8192&&(p=d.memoizedState!==null,d.stateNode.isHidden=p,!p||d.alternate!==null&&d.alternate.memoizedState!==null||(ld=Ze())),c&4&&ug(n);break;case 22:if(Y=a!==null&&a.memoizedState!==null,n.mode&1?(qt=(B=qt)||Y,Ln(i,n),qt=B):Ln(i,n),ir(n),c&8192){if(B=n.memoizedState!==null,(n.stateNode.isHidden=B)&&!Y&&(n.mode&1)!==0)for(he=n,Y=n.child;Y!==null;){for(J=he=Y;he!==null;){switch(X=he,le=X.child,X.tag){case 0:case 11:case 14:case 15:Fa(4,X,X.return);break;case 1:yo(X,X.return);var fe=X.stateNode;if(typeof fe.componentWillUnmount=="function"){c=X,a=X.return;try{i=c,fe.props=i.memoizedProps,fe.state=i.memoizedState,fe.componentWillUnmount()}catch(pe){lt(c,a,pe)}}break;case 5:yo(X,X.return);break;case 22:if(X.memoizedState!==null){fg(J);continue}}le!==null?(le.return=X,he=le):fg(J)}Y=Y.sibling}e:for(Y=null,J=n;;){if(J.tag===5){if(Y===null){Y=J;try{d=J.stateNode,B?(p=d.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(k=J.stateNode,V=J.memoizedProps.style,w=V!=null&&V.hasOwnProperty("display")?V.display:null,k.style.display=Qr("display",w))}catch(pe){lt(n,n.return,pe)}}}else if(J.tag===6){if(Y===null)try{J.stateNode.nodeValue=B?"":J.memoizedProps}catch(pe){lt(n,n.return,pe)}}else if((J.tag!==22&&J.tag!==23||J.memoizedState===null||J===n)&&J.child!==null){J.child.return=J,J=J.child;continue}if(J===n)break e;for(;J.sibling===null;){if(J.return===null||J.return===n)break e;Y===J&&(Y=null),J=J.return}Y===J&&(Y=null),J.sibling.return=J.return,J=J.sibling}}break;case 19:Ln(i,n),ir(n),c&4&&ug(n);break;case 21:break;default:Ln(i,n),ir(n)}}function ir(n){var i=n.flags;if(i&2){try{e:{for(var a=n.return;a!==null;){if(og(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(Gs(d,""),c.flags&=-33);var p=ag(n);id(n,p,d);break;case 3:case 4:var w=c.stateNode.containerInfo,k=ag(n);sd(n,k,w);break;default:throw Error(t(161))}}catch(V){lt(n,n.return,V)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function s0(n,i,a){he=n,hg(n)}function hg(n,i,a){for(var c=(n.mode&1)!==0;he!==null;){var d=he,p=d.child;if(d.tag===22&&c){var w=d.memoizedState!==null||Au;if(!w){var k=d.alternate,V=k!==null&&k.memoizedState!==null||qt;k=Au;var B=qt;if(Au=w,(qt=V)&&!B)for(he=d;he!==null;)w=he,V=w.child,w.tag===22&&w.memoizedState!==null?pg(d):V!==null?(V.return=w,he=V):pg(d);for(;p!==null;)he=p,hg(p),p=p.sibling;he=d,Au=k,qt=B}dg(n)}else(d.subtreeFlags&8772)!==0&&p!==null?(p.return=d,he=p):dg(n)}}function dg(n){for(;he!==null;){var i=he;if((i.flags&8772)!==0){var a=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:qt||Cu(5,i);break;case 1:var c=i.stateNode;if(i.flags&4&&!qt)if(a===null)c.componentDidMount();else{var d=i.elementType===i.type?a.memoizedProps:On(i.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var p=i.updateQueue;p!==null&&fm(i,p,c);break;case 3:var w=i.updateQueue;if(w!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}fm(i,w,a)}break;case 5:var k=i.stateNode;if(a===null&&i.flags&4){a=k;var V=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":V.autoFocus&&a.focus();break;case"img":V.src&&(a.src=V.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var B=i.alternate;if(B!==null){var Y=B.memoizedState;if(Y!==null){var J=Y.dehydrated;J!==null&&ss(J)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}qt||i.flags&512&&rd(i)}catch(X){lt(i,i.return,X)}}if(i===n){he=null;break}if(a=i.sibling,a!==null){a.return=i.return,he=a;break}he=i.return}}function fg(n){for(;he!==null;){var i=he;if(i===n){he=null;break}var a=i.sibling;if(a!==null){a.return=i.return,he=a;break}he=i.return}}function pg(n){for(;he!==null;){var i=he;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{Cu(4,i)}catch(V){lt(i,a,V)}break;case 1:var c=i.stateNode;if(typeof c.componentDidMount=="function"){var d=i.return;try{c.componentDidMount()}catch(V){lt(i,d,V)}}var p=i.return;try{rd(i)}catch(V){lt(i,p,V)}break;case 5:var w=i.return;try{rd(i)}catch(V){lt(i,w,V)}}}catch(V){lt(i,i.return,V)}if(i===n){he=null;break}var k=i.sibling;if(k!==null){k.return=i.return,he=k;break}he=i.return}}var i0=Math.ceil,Ru=W.ReactCurrentDispatcher,od=W.ReactCurrentOwner,Cn=W.ReactCurrentBatchConfig,qe=0,Pt=null,yt=null,Mt=0,pn=0,_o=us(0),Tt=0,Ua=null,pi=0,Pu=0,ad=0,Ba=null,tn=null,ld=0,vo=1/0,xr=null,ku=!1,ud=null,ms=null,Nu=!1,gs=null,xu=0,za=0,cd=null,Du=-1,Vu=0;function Qt(){return(qe&6)!==0?Ze():Du!==-1?Du:Du=Ze()}function ys(n){return(n.mode&1)===0?1:(qe&2)!==0&&Mt!==0?Mt&-Mt:zE.transition!==null?(Vu===0&&(Vu=ua()),Vu):(n=Fe,n!==0||(n=window.event,n=n===void 0?16:Gi(n.type)),n)}function bn(n,i,a,c){if(50<za)throw za=0,cd=null,Error(t(185));ni(n,a,c),((qe&2)===0||n!==Pt)&&(n===Pt&&((qe&2)===0&&(Pu|=a),Tt===4&&_s(n,Mt)),nn(n,c),a===1&&qe===0&&(i.mode&1)===0&&(vo=Ze()+500,au&&hs()))}function nn(n,i){var a=n.callbackNode;ti(n,i);var c=_r(n,n===Pt?Mt:0);if(c===0)a!==null&&Ui(a),n.callbackNode=null,n.callbackPriority=0;else if(i=c&-c,n.callbackPriority!==i){if(a!=null&&Ui(a),i===1)n.tag===0?BE(gg.bind(null,n)):tm(gg.bind(null,n)),bE(function(){(qe&6)===0&&hs()}),a=null;else{switch(Hn(c)){case 1:a=Bi;break;case 4:a=oa;break;case 16:a=Ys;break;case 536870912:a=zi;break;default:a=Ys}a=Sg(a,mg.bind(null,n))}n.callbackPriority=i,n.callbackNode=a}}function mg(n,i){if(Du=-1,Vu=0,(qe&6)!==0)throw Error(t(327));var a=n.callbackNode;if(wo()&&n.callbackNode!==a)return null;var c=_r(n,n===Pt?Mt:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||i)i=Ou(n,c);else{i=c;var d=qe;qe|=2;var p=_g();(Pt!==n||Mt!==i)&&(xr=null,vo=Ze()+500,gi(n,i));do try{l0();break}catch(k){yg(n,k)}while(!0);Ph(),Ru.current=p,qe=d,yt!==null?i=0:(Pt=null,Mt=0,i=Tt)}if(i!==0){if(i===2&&(d=la(n),d!==0&&(c=d,i=hd(n,d))),i===1)throw a=Ua,gi(n,0),_s(n,c),nn(n,Ze()),a;if(i===6)_s(n,c);else{if(d=n.current.alternate,(c&30)===0&&!o0(d)&&(i=Ou(n,c),i===2&&(p=la(n),p!==0&&(c=p,i=hd(n,p))),i===1))throw a=Ua,gi(n,0),_s(n,c),nn(n,Ze()),a;switch(n.finishedWork=d,n.finishedLanes=c,i){case 0:case 1:throw Error(t(345));case 2:yi(n,tn,xr);break;case 3:if(_s(n,c),(c&130023424)===c&&(i=ld+500-Ze(),10<i)){if(_r(n,0)!==0)break;if(d=n.suspendedLanes,(d&c)!==c){Qt(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=yh(yi.bind(null,n,tn,xr),i);break}yi(n,tn,xr);break;case 4:if(_s(n,c),(c&4194240)===c)break;for(i=n.eventTimes,d=-1;0<c;){var w=31-an(c);p=1<<w,w=i[w],w>d&&(d=w),c&=~p}if(c=d,c=Ze()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*i0(c/1960))-c,10<c){n.timeoutHandle=yh(yi.bind(null,n,tn,xr),c);break}yi(n,tn,xr);break;case 5:yi(n,tn,xr);break;default:throw Error(t(329))}}}return nn(n,Ze()),n.callbackNode===a?mg.bind(null,n):null}function hd(n,i){var a=Ba;return n.current.memoizedState.isDehydrated&&(gi(n,i).flags|=256),n=Ou(n,i),n!==2&&(i=tn,tn=a,i!==null&&dd(i)),n}function dd(n){tn===null?tn=n:tn.push.apply(tn,n)}function o0(n){for(var i=n;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],p=d.getSnapshot;d=d.value;try{if(!Dn(p(),d))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function _s(n,i){for(i&=~ad,i&=~Pu,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var a=31-an(i),c=1<<a;n[a]=-1,i&=~c}}function gg(n){if((qe&6)!==0)throw Error(t(327));wo();var i=_r(n,0);if((i&1)===0)return nn(n,Ze()),null;var a=Ou(n,i);if(n.tag!==0&&a===2){var c=la(n);c!==0&&(i=c,a=hd(n,c))}if(a===1)throw a=Ua,gi(n,0),_s(n,i),nn(n,Ze()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,yi(n,tn,xr),nn(n,Ze()),null}function fd(n,i){var a=qe;qe|=1;try{return n(i)}finally{qe=a,qe===0&&(vo=Ze()+500,au&&hs())}}function mi(n){gs!==null&&gs.tag===0&&(qe&6)===0&&wo();var i=qe;qe|=1;var a=Cn.transition,c=Fe;try{if(Cn.transition=null,Fe=1,n)return n()}finally{Fe=c,Cn.transition=a,qe=i,(qe&6)===0&&hs()}}function pd(){pn=_o.current,tt(_o)}function gi(n,i){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,LE(a)),yt!==null)for(a=yt.return;a!==null;){var c=a;switch(Ih(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&iu();break;case 3:mo(),tt(Jt),tt(Bt),Lh();break;case 5:Oh(c);break;case 4:mo();break;case 13:tt(st);break;case 19:tt(st);break;case 10:kh(c.type._context);break;case 22:case 23:pd()}a=a.return}if(Pt=n,yt=n=vs(n.current,null),Mt=pn=i,Tt=0,Ua=null,ad=Pu=pi=0,tn=Ba=null,hi!==null){for(i=0;i<hi.length;i++)if(a=hi[i],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,p=a.pending;if(p!==null){var w=p.next;p.next=d,c.next=w}a.pending=c}hi=null}return n}function yg(n,i){do{var a=yt;try{if(Ph(),yu.current=Eu,_u){for(var c=it.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}_u=!1}if(fi=0,Rt=Et=it=null,Oa=!1,Ma=0,od.current=null,a===null||a.return===null){Tt=1,Ua=i,yt=null;break}e:{var p=n,w=a.return,k=a,V=i;if(i=Mt,k.flags|=32768,V!==null&&typeof V=="object"&&typeof V.then=="function"){var B=V,Y=k,J=Y.tag;if((Y.mode&1)===0&&(J===0||J===11||J===15)){var X=Y.alternate;X?(Y.updateQueue=X.updateQueue,Y.memoizedState=X.memoizedState,Y.lanes=X.lanes):(Y.updateQueue=null,Y.memoizedState=null)}var le=zm(w);if(le!==null){le.flags&=-257,$m(le,w,k,p,i),le.mode&1&&Bm(p,B,i),i=le,V=B;var fe=i.updateQueue;if(fe===null){var pe=new Set;pe.add(V),i.updateQueue=pe}else fe.add(V);break e}else{if((i&1)===0){Bm(p,B,i),md();break e}V=Error(t(426))}}else if(rt&&k.mode&1){var ht=zm(w);if(ht!==null){(ht.flags&65536)===0&&(ht.flags|=256),$m(ht,w,k,p,i),Ch(go(V,k));break e}}p=V=go(V,k),Tt!==4&&(Tt=2),Ba===null?Ba=[p]:Ba.push(p),p=w;do{switch(p.tag){case 3:p.flags|=65536,i&=-i,p.lanes|=i;var j=Fm(p,V,i);dm(p,j);break e;case 1:k=V;var O=p.type,U=p.stateNode;if((p.flags&128)===0&&(typeof O.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(ms===null||!ms.has(U)))){p.flags|=65536,i&=-i,p.lanes|=i;var ee=Um(p,k,i);dm(p,ee);break e}}p=p.return}while(p!==null)}wg(a)}catch(me){i=me,yt===a&&a!==null&&(yt=a=a.return);continue}break}while(!0)}function _g(){var n=Ru.current;return Ru.current=Eu,n===null?Eu:n}function md(){(Tt===0||Tt===3||Tt===2)&&(Tt=4),Pt===null||(pi&268435455)===0&&(Pu&268435455)===0||_s(Pt,Mt)}function Ou(n,i){var a=qe;qe|=2;var c=_g();(Pt!==n||Mt!==i)&&(xr=null,gi(n,i));do try{a0();break}catch(d){yg(n,d)}while(!0);if(Ph(),qe=a,Ru.current=c,yt!==null)throw Error(t(261));return Pt=null,Mt=0,Tt}function a0(){for(;yt!==null;)vg(yt)}function l0(){for(;yt!==null&&!Xs();)vg(yt)}function vg(n){var i=Ig(n.alternate,n,pn);n.memoizedProps=n.pendingProps,i===null?wg(n):yt=i,od.current=null}function wg(n){var i=n;do{var a=i.alternate;if(n=i.return,(i.flags&32768)===0){if(a=e0(a,i,pn),a!==null){yt=a;return}}else{if(a=t0(a,i),a!==null){a.flags&=32767,yt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Tt=6,yt=null;return}}if(i=i.sibling,i!==null){yt=i;return}yt=i=n}while(i!==null);Tt===0&&(Tt=5)}function yi(n,i,a){var c=Fe,d=Cn.transition;try{Cn.transition=null,Fe=1,u0(n,i,a,c)}finally{Cn.transition=d,Fe=c}return null}function u0(n,i,a,c){do wo();while(gs!==null);if((qe&6)!==0)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var p=a.lanes|a.childLanes;if(th(n,p),n===Pt&&(yt=Pt=null,Mt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Nu||(Nu=!0,Sg(Ys,function(){return wo(),null})),p=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||p){p=Cn.transition,Cn.transition=null;var w=Fe;Fe=1;var k=qe;qe|=4,od.current=null,r0(n,a),cg(a,n),kE(mh),Er=!!ph,mh=ph=null,n.current=a,s0(a),yr(),qe=k,Fe=w,Cn.transition=p}else n.current=a;if(Nu&&(Nu=!1,gs=n,xu=d),p=n.pendingLanes,p===0&&(ms=null),Bl(a.stateNode),nn(n,Ze()),i!==null)for(c=n.onRecoverableError,a=0;a<i.length;a++)d=i[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(ku)throw ku=!1,n=ud,ud=null,n;return(xu&1)!==0&&n.tag!==0&&wo(),p=n.pendingLanes,(p&1)!==0?n===cd?za++:(za=0,cd=n):za=0,hs(),null}function wo(){if(gs!==null){var n=Hn(xu),i=Cn.transition,a=Fe;try{if(Cn.transition=null,Fe=16>n?16:n,gs===null)var c=!1;else{if(n=gs,gs=null,xu=0,(qe&6)!==0)throw Error(t(331));var d=qe;for(qe|=4,he=n.current;he!==null;){var p=he,w=p.child;if((he.flags&16)!==0){var k=p.deletions;if(k!==null){for(var V=0;V<k.length;V++){var B=k[V];for(he=B;he!==null;){var Y=he;switch(Y.tag){case 0:case 11:case 15:Fa(8,Y,p)}var J=Y.child;if(J!==null)J.return=Y,he=J;else for(;he!==null;){Y=he;var X=Y.sibling,le=Y.return;if(ig(Y),Y===B){he=null;break}if(X!==null){X.return=le,he=X;break}he=le}}}var fe=p.alternate;if(fe!==null){var pe=fe.child;if(pe!==null){fe.child=null;do{var ht=pe.sibling;pe.sibling=null,pe=ht}while(pe!==null)}}he=p}}if((p.subtreeFlags&2064)!==0&&w!==null)w.return=p,he=w;else e:for(;he!==null;){if(p=he,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:Fa(9,p,p.return)}var j=p.sibling;if(j!==null){j.return=p.return,he=j;break e}he=p.return}}var O=n.current;for(he=O;he!==null;){w=he;var U=w.child;if((w.subtreeFlags&2064)!==0&&U!==null)U.return=w,he=U;else e:for(w=O;he!==null;){if(k=he,(k.flags&2048)!==0)try{switch(k.tag){case 0:case 11:case 15:Cu(9,k)}}catch(me){lt(k,k.return,me)}if(k===w){he=null;break e}var ee=k.sibling;if(ee!==null){ee.return=k.return,he=ee;break e}he=k.return}}if(qe=d,hs(),on&&typeof on.onPostCommitFiberRoot=="function")try{on.onPostCommitFiberRoot(Js,n)}catch{}c=!0}return c}finally{Fe=a,Cn.transition=i}}return!1}function Eg(n,i,a){i=go(a,i),i=Fm(n,i,1),n=fs(n,i,1),i=Qt(),n!==null&&(ni(n,1,i),nn(n,i))}function lt(n,i,a){if(n.tag===3)Eg(n,n,a);else for(;i!==null;){if(i.tag===3){Eg(i,n,a);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ms===null||!ms.has(c))){n=go(a,n),n=Um(i,n,1),i=fs(i,n,1),n=Qt(),i!==null&&(ni(i,1,n),nn(i,n));break}}i=i.return}}function c0(n,i,a){var c=n.pingCache;c!==null&&c.delete(i),i=Qt(),n.pingedLanes|=n.suspendedLanes&a,Pt===n&&(Mt&a)===a&&(Tt===4||Tt===3&&(Mt&130023424)===Mt&&500>Ze()-ld?gi(n,0):ad|=a),nn(n,i)}function Tg(n,i){i===0&&((n.mode&1)===0?i=1:(i=ts,ts<<=1,(ts&130023424)===0&&(ts=4194304)));var a=Qt();n=Pr(n,i),n!==null&&(ni(n,i,a),nn(n,a))}function h0(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),Tg(n,a)}function d0(n,i){var a=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(i),Tg(n,a)}var Ig;Ig=function(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps||Jt.current)en=!0;else{if((n.lanes&a)===0&&(i.flags&128)===0)return en=!1,ZE(n,i,a);en=(n.flags&131072)!==0}else en=!1,rt&&(i.flags&1048576)!==0&&nm(i,uu,i.index);switch(i.lanes=0,i.tag){case 2:var c=i.type;Su(n,i),n=i.pendingProps;var d=ao(i,Bt.current);po(i,a),d=Fh(null,i,c,n,d,a);var p=Uh();return i.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Zt(c)?(p=!0,ou(i)):p=!1,i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Dh(i),d.updater=Tu,i.stateNode=d,d._reactInternals=i,Hh(i,c,n,a),i=Xh(null,i,c,!0,p,a)):(i.tag=0,rt&&p&&Th(i),Kt(null,i,d,a),i=i.child),i;case 16:c=i.elementType;e:{switch(Su(n,i),n=i.pendingProps,d=c._init,c=d(c._payload),i.type=c,d=i.tag=p0(c),n=On(c,n),d){case 0:i=Qh(null,i,c,n,a);break e;case 1:i=Qm(null,i,c,n,a);break e;case 11:i=qm(null,i,c,n,a);break e;case 14:i=Wm(null,i,c,On(c.type,n),a);break e}throw Error(t(306,c,""))}return i;case 0:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:On(c,d),Qh(n,i,c,d,a);case 1:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:On(c,d),Qm(n,i,c,d,a);case 3:e:{if(Xm(i),n===null)throw Error(t(387));c=i.pendingProps,p=i.memoizedState,d=p.element,hm(n,i),mu(i,c,null,a);var w=i.memoizedState;if(c=w.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){d=go(Error(t(423)),i),i=Ym(n,i,c,a,d);break e}else if(c!==d){d=go(Error(t(424)),i),i=Ym(n,i,c,a,d);break e}else for(fn=ls(i.stateNode.containerInfo.firstChild),dn=i,rt=!0,Vn=null,a=um(i,null,c,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(co(),c===d){i=Nr(n,i,a);break e}Kt(n,i,c,a)}i=i.child}return i;case 5:return pm(i),n===null&&Ah(i),c=i.type,d=i.pendingProps,p=n!==null?n.memoizedProps:null,w=d.children,gh(c,d)?w=null:p!==null&&gh(c,p)&&(i.flags|=32),Km(n,i),Kt(n,i,w,a),i.child;case 6:return n===null&&Ah(i),null;case 13:return Jm(n,i,a);case 4:return Vh(i,i.stateNode.containerInfo),c=i.pendingProps,n===null?i.child=ho(i,null,c,a):Kt(n,i,c,a),i.child;case 11:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:On(c,d),qm(n,i,c,d,a);case 7:return Kt(n,i,i.pendingProps,a),i.child;case 8:return Kt(n,i,i.pendingProps.children,a),i.child;case 12:return Kt(n,i,i.pendingProps.children,a),i.child;case 10:e:{if(c=i.type._context,d=i.pendingProps,p=i.memoizedProps,w=d.value,Je(du,c._currentValue),c._currentValue=w,p!==null)if(Dn(p.value,w)){if(p.children===d.children&&!Jt.current){i=Nr(n,i,a);break e}}else for(p=i.child,p!==null&&(p.return=i);p!==null;){var k=p.dependencies;if(k!==null){w=p.child;for(var V=k.firstContext;V!==null;){if(V.context===c){if(p.tag===1){V=kr(-1,a&-a),V.tag=2;var B=p.updateQueue;if(B!==null){B=B.shared;var Y=B.pending;Y===null?V.next=V:(V.next=Y.next,Y.next=V),B.pending=V}}p.lanes|=a,V=p.alternate,V!==null&&(V.lanes|=a),Nh(p.return,a,i),k.lanes|=a;break}V=V.next}}else if(p.tag===10)w=p.type===i.type?null:p.child;else if(p.tag===18){if(w=p.return,w===null)throw Error(t(341));w.lanes|=a,k=w.alternate,k!==null&&(k.lanes|=a),Nh(w,a,i),w=p.sibling}else w=p.child;if(w!==null)w.return=p;else for(w=p;w!==null;){if(w===i){w=null;break}if(p=w.sibling,p!==null){p.return=w.return,w=p;break}w=w.return}p=w}Kt(n,i,d.children,a),i=i.child}return i;case 9:return d=i.type,c=i.pendingProps.children,po(i,a),d=Sn(d),c=c(d),i.flags|=1,Kt(n,i,c,a),i.child;case 14:return c=i.type,d=On(c,i.pendingProps),d=On(c.type,d),Wm(n,i,c,d,a);case 15:return Hm(n,i,i.type,i.pendingProps,a);case 17:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:On(c,d),Su(n,i),i.tag=1,Zt(c)?(n=!0,ou(i)):n=!1,po(i,a),bm(i,c,d),Hh(i,c,d,a),Xh(null,i,c,!0,n,a);case 19:return eg(n,i,a);case 22:return Gm(n,i,a)}throw Error(t(156,i.tag))};function Sg(n,i){return ia(n,i)}function f0(n,i,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rn(n,i,a,c){return new f0(n,i,a,c)}function gd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function p0(n){if(typeof n=="function")return gd(n)?1:0;if(n!=null){if(n=n.$$typeof,n===D)return 11;if(n===Ve)return 14}return 2}function vs(n,i){var a=n.alternate;return a===null?(a=Rn(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Mu(n,i,a,c,d,p){var w=2;if(c=n,typeof n=="function")gd(n)&&(w=1);else if(typeof n=="string")w=5;else e:switch(n){case I:return _i(a.children,d,p,i);case S:w=8,d|=8;break;case R:return n=Rn(12,a,i,d|2),n.elementType=R,n.lanes=p,n;case P:return n=Rn(13,a,i,d),n.elementType=P,n.lanes=p,n;case ce:return n=Rn(19,a,i,d),n.elementType=ce,n.lanes=p,n;case Pe:return Lu(a,d,p,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case x:w=10;break e;case N:w=9;break e;case D:w=11;break e;case Ve:w=14;break e;case Ue:w=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return i=Rn(w,a,i,d),i.elementType=n,i.type=c,i.lanes=p,i}function _i(n,i,a,c){return n=Rn(7,n,c,i),n.lanes=a,n}function Lu(n,i,a,c){return n=Rn(22,n,c,i),n.elementType=Pe,n.lanes=a,n.stateNode={isHidden:!1},n}function yd(n,i,a){return n=Rn(6,n,null,i),n.lanes=a,n}function _d(n,i,a){return i=Rn(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function m0(n,i,a,c,d){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ca(0),this.expirationTimes=ca(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ca(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function vd(n,i,a,c,d,p,w,k,V){return n=new m0(n,i,a,k,V),i===1?(i=1,p===!0&&(i|=8)):i=0,p=Rn(3,null,null,i),n.current=p,p.stateNode=n,p.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Dh(p),n}function g0(n,i,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ie,key:c==null?null:""+c,children:n,containerInfo:i,implementation:a}}function Ag(n){if(!n)return cs;n=n._reactInternals;e:{if(Nn(n)!==n||n.tag!==1)throw Error(t(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Zt(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Zt(a))return Zp(n,a,i)}return i}function Cg(n,i,a,c,d,p,w,k,V){return n=vd(a,c,!0,n,d,p,w,k,V),n.context=Ag(null),a=n.current,c=Qt(),d=ys(a),p=kr(c,d),p.callback=i??null,fs(a,p,d),n.current.lanes=d,ni(n,d,c),nn(n,c),n}function bu(n,i,a,c){var d=i.current,p=Qt(),w=ys(d);return a=Ag(a),i.context===null?i.context=a:i.pendingContext=a,i=kr(p,w),i.payload={element:n},c=c===void 0?null:c,c!==null&&(i.callback=c),n=fs(d,i,w),n!==null&&(bn(n,d,w,p),pu(n,d,w)),w}function ju(n){return n=n.current,n.child?(n.child.tag===5,n.child.stateNode):null}function Rg(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function wd(n,i){Rg(n,i),(n=n.alternate)&&Rg(n,i)}function y0(){return null}var Pg=typeof reportError=="function"?reportError:function(n){console.error(n)};function Ed(n){this._internalRoot=n}Fu.prototype.render=Ed.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(t(409));bu(n,i,null,null)},Fu.prototype.unmount=Ed.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;mi(function(){bu(null,n,null,null)}),i[Sr]=null}};function Fu(n){this._internalRoot=n}Fu.prototype.unstable_scheduleHydration=function(n){if(n){var i=pa();n={blockedOn:null,target:n,priority:i};for(var a=0;a<ln.length&&i!==0&&i<ln[a].priority;a++);ln.splice(a,0,n),a===0&&Wi(n)}};function Td(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Uu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function kg(){}function _0(n,i,a,c,d){if(d){if(typeof c=="function"){var p=c;c=function(){var B=ju(w);p.call(B)}}var w=Cg(i,c,n,0,null,!1,!1,"",kg);return n._reactRootContainer=w,n[Sr]=w.current,Ca(n.nodeType===8?n.parentNode:n),mi(),w}for(;d=n.lastChild;)n.removeChild(d);if(typeof c=="function"){var k=c;c=function(){var B=ju(V);k.call(B)}}var V=vd(n,0,!1,null,null,!1,!1,"",kg);return n._reactRootContainer=V,n[Sr]=V.current,Ca(n.nodeType===8?n.parentNode:n),mi(function(){bu(i,V,a,c)}),V}function Bu(n,i,a,c,d){var p=a._reactRootContainer;if(p){var w=p;if(typeof d=="function"){var k=d;d=function(){var V=ju(w);k.call(V)}}bu(i,w,n,d)}else w=_0(a,i,n,d,c);return ju(w)}da=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var a=He(i.pendingLanes);a!==0&&(ha(i,a|1),nn(i,Ze()),(qe&6)===0&&(vo=Ze()+500,hs()))}break;case 13:mi(function(){var c=Pr(n,1);if(c!==null){var d=Qt();bn(c,n,1,d)}}),wd(n,1)}},$i=function(n){if(n.tag===13){var i=Pr(n,134217728);if(i!==null){var a=Qt();bn(i,n,134217728,a)}wd(n,134217728)}},fa=function(n){if(n.tag===13){var i=ys(n),a=Pr(n,i);if(a!==null){var c=Qt();bn(a,n,i,c)}wd(n,i)}},pa=function(){return Fe},ma=function(n,i){var a=Fe;try{return Fe=n,i()}finally{Fe=a}},pr=function(n,i,a){switch(i){case"input":if(Hs(n,a),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var c=a[i];if(c!==n&&c.form===n.form){var d=su(c);if(!d)throw Error(t(90));Xo(c),Hs(c,d)}}}break;case"textarea":kl(n,a);break;case"select":i=a.value,i!=null&&Pn(n,!!a.multiple,i,!1)}},Dl=fd,Vl=mi;var v0={usingClientEntryPoint:!1,Events:[ka,io,su,Yr,Jr,fd]},$a={findFiberByHostInstance:ai,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},w0={bundleType:$a.bundleType,version:$a.version,rendererPackageName:$a.rendererPackageName,rendererConfig:$a.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:W.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Ul(n),n===null?null:n.stateNode},findFiberByHostInstance:$a.findFiberByHostInstance||y0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zu.isDisabled&&zu.supportsFiber)try{Js=zu.inject(w0),on=zu}catch{}}return rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=v0,rn.createPortal=function(n,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Td(i))throw Error(t(200));return g0(n,i,null,a)},rn.createRoot=function(n,i){if(!Td(n))throw Error(t(299));var a=!1,c="",d=Pg;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onRecoverableError!==void 0&&(d=i.onRecoverableError)),i=vd(n,1,!1,null,null,a,!1,c,d),n[Sr]=i.current,Ca(n.nodeType===8?n.parentNode:n),new Ed(i)},rn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Ul(i),n=n===null?null:n.stateNode,n},rn.flushSync=function(n){return mi(n)},rn.hydrate=function(n,i,a){if(!Uu(i))throw Error(t(200));return Bu(null,n,i,!0,a)},rn.hydrateRoot=function(n,i,a){if(!Td(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,p="",w=Pg;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),i=Cg(i,null,n,1,a??null,d,!1,p,w),n[Sr]=i.current,Ca(n),c)for(n=0;n<c.length;n++)a=c[n],d=a._getVersion,d=d(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,d]:i.mutableSourceEagerHydrationData.push(a,d);return new Fu(i)},rn.render=function(n,i,a){if(!Uu(i))throw Error(t(200));return Bu(null,n,i,!1,a)},rn.unmountComponentAtNode=function(n){if(!Uu(n))throw Error(t(40));return n._reactRootContainer?(mi(function(){Bu(null,null,n,!1,function(){n._reactRootContainer=null,n[Sr]=null})}),!0):!1},rn.unstable_batchedUpdates=fd,rn.unstable_renderSubtreeIntoContainer=function(n,i,a,c){if(!Uu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Bu(n,i,a,!1,c)},rn.version="18.3.1-next-f1338f8080-20240426",rn}var bg;function R_(){if(bg)return Ad.exports;bg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Ad.exports=k0(),Ad.exports}var jg;function N0(){if(jg)return $u;jg=1;var r=R_();return $u.createRoot=r.createRoot,$u.hydrateRoot=r.hydrateRoot,$u}var x0=N0();const D0=C_(x0);R_();function tl(){return tl=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},tl.apply(this,arguments)}var As;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(As||(As={}));const Fg="popstate";function V0(r){r===void 0&&(r={});function e(o,l){let{pathname:h="/",search:f="",hash:g=""}=Pi(o.location.hash.substr(1));return!h.startsWith("/")&&!h.startsWith(".")&&(h="/"+h),$d("",{pathname:h,search:f,hash:g},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(o,l){let h=o.document.querySelector("base"),f="";if(h&&h.getAttribute("href")){let g=o.location.href,y=g.indexOf("#");f=y===-1?g:g.slice(0,y)}return f+"#"+(typeof l=="string"?l:ac(l))}function s(o,l){Nc(o.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(l)+")")}return M0(e,t,s,r)}function pt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Nc(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function O0(){return Math.random().toString(36).substr(2,8)}function Ug(r,e){return{usr:r.state,key:r.key,idx:e}}function $d(r,e,t,s){return t===void 0&&(t=null),tl({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?Pi(e):e,{state:t,key:e&&e.key||s||O0()})}function ac(r){let{pathname:e="/",search:t="",hash:s=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function Pi(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let s=r.indexOf("?");s>=0&&(e.search=r.substr(s),r=r.substr(0,s)),r&&(e.pathname=r)}return e}function M0(r,e,t,s){s===void 0&&(s={});let{window:o=document.defaultView,v5Compat:l=!1}=s,h=o.history,f=As.Pop,g=null,y=v();y==null&&(y=0,h.replaceState(tl({},h.state,{idx:y}),""));function v(){return(h.state||{idx:null}).idx}function E(){f=As.Pop;let b=v(),re=b==null?null:b-y;y=b,g&&g({action:f,location:$.location,delta:re})}function C(b,re){f=As.Push;let se=$d($.location,b,re);t&&t(se,b),y=v()+1;let G=Ug(se,y),W=$.createHref(se);try{h.pushState(G,"",W)}catch(te){if(te instanceof DOMException&&te.name==="DataCloneError")throw te;o.location.assign(W)}l&&g&&g({action:f,location:$.location,delta:1})}function M(b,re){f=As.Replace;let se=$d($.location,b,re);t&&t(se,b),y=v();let G=Ug(se,y),W=$.createHref(se);h.replaceState(G,"",W),l&&g&&g({action:f,location:$.location,delta:0})}function q(b){let re=o.location.origin!=="null"?o.location.origin:o.location.href,se=typeof b=="string"?b:ac(b);return se=se.replace(/ $/,"%20"),pt(re,"No window.location.(origin|href) available to create URL for href: "+se),new URL(se,re)}let $={get action(){return f},get location(){return r(o,h)},listen(b){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(Fg,E),g=b,()=>{o.removeEventListener(Fg,E),g=null}},createHref(b){return e(o,b)},createURL:q,encodeLocation(b){let re=q(b);return{pathname:re.pathname,search:re.search,hash:re.hash}},push:C,replace:M,go(b){return h.go(b)}};return $}var Bg;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(Bg||(Bg={}));function L0(r,e,t){return t===void 0&&(t="/"),b0(r,e,t)}function b0(r,e,t,s){let o=typeof e=="string"?Pi(e):e,l=vf(o.pathname||"/",t);if(l==null)return null;let h=P_(r);j0(h);let f=null;for(let g=0;f==null&&g<h.length;++g){let y=X0(l);f=G0(h[g],y)}return f}function P_(r,e,t,s){e===void 0&&(e=[]),t===void 0&&(t=[]),s===void 0&&(s="");let o=(l,h,f)=>{let g={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};g.relativePath.startsWith("/")&&(pt(g.relativePath.startsWith(s),'Absolute route path "'+g.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),g.relativePath=g.relativePath.slice(s.length));let y=Ps([s,g.relativePath]),v=t.concat(g);l.children&&l.children.length>0&&(pt(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+y+'".')),P_(l.children,e,v,y)),!(l.path==null&&!l.index)&&e.push({path:y,score:W0(y,l.index),routesMeta:v})};return r.forEach((l,h)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))o(l,h);else for(let g of k_(l.path))o(l,h,g)}),e}function k_(r){let e=r.split("/");if(e.length===0)return[];let[t,...s]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(s.length===0)return o?[l,""]:[l];let h=k_(s.join("/")),f=[];return f.push(...h.map(g=>g===""?l:[l,g].join("/"))),o&&f.push(...h),f.map(g=>r.startsWith("/")&&g===""?"/":g)}function j0(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:H0(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}const F0=/^:[\w-]+$/,U0=3,B0=2,z0=1,$0=10,q0=-2,zg=r=>r==="*";function W0(r,e){let t=r.split("/"),s=t.length;return t.some(zg)&&(s+=q0),e&&(s+=B0),t.filter(o=>!zg(o)).reduce((o,l)=>o+(F0.test(l)?U0:l===""?z0:$0),s)}function H0(r,e){return r.length===e.length&&r.slice(0,-1).every((s,o)=>s===e[o])?r[r.length-1]-e[e.length-1]:0}function G0(r,e,t){let{routesMeta:s}=r,o={},l="/",h=[];for(let f=0;f<s.length;++f){let g=s[f],y=f===s.length-1,v=l==="/"?e:e.slice(l.length)||"/",E=K0({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},v),C=g.route;if(!E)return null;Object.assign(o,E.params),h.push({params:o,pathname:Ps([l,E.pathname]),pathnameBase:tT(Ps([l,E.pathnameBase])),route:C}),E.pathnameBase!=="/"&&(l=Ps([l,E.pathnameBase]))}return h}function K0(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,s]=Q0(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let l=o[0],h=l.replace(/(.)\/+$/,"$1"),f=o.slice(1);return{params:s.reduce((y,v,E)=>{let{paramName:C,isOptional:M}=v;if(C==="*"){let $=f[E]||"";h=l.slice(0,l.length-$.length).replace(/(.)\/+$/,"$1")}const q=f[E];return M&&!q?y[C]=void 0:y[C]=(q||"").replace(/%2F/g,"/"),y},{}),pathname:l,pathnameBase:h,pattern:r}}function Q0(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Nc(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,f,g)=>(s.push({paramName:f,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(s.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function X0(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Nc(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function vf(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=r.charAt(t);return s&&s!=="/"?null:r.slice(t)||"/"}const Y0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,J0=r=>Y0.test(r);function Z0(r,e){e===void 0&&(e="/");let{pathname:t,search:s="",hash:o=""}=typeof r=="string"?Pi(r):r,l;if(t)if(J0(t))l=t;else{if(t.includes("//")){let h=t;t=t.replace(/\/\/+/g,"/"),Nc(!1,"Pathnames cannot have embedded double slashes - normalizing "+(h+" -> "+t))}t.startsWith("/")?l=$g(t.substring(1),"/"):l=$g(t,e)}else l=e;return{pathname:l,search:nT(s),hash:rT(o)}}function $g(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Pd(r,e,t,s){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function eT(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function wf(r,e){let t=eT(r);return e?t.map((s,o)=>o===t.length-1?s.pathname:s.pathnameBase):t.map(s=>s.pathnameBase)}function Ef(r,e,t,s){s===void 0&&(s=!1);let o;typeof r=="string"?o=Pi(r):(o=tl({},r),pt(!o.pathname||!o.pathname.includes("?"),Pd("?","pathname","search",o)),pt(!o.pathname||!o.pathname.includes("#"),Pd("#","pathname","hash",o)),pt(!o.search||!o.search.includes("#"),Pd("#","search","hash",o)));let l=r===""||o.pathname==="",h=l?"/":o.pathname,f;if(h==null)f=t;else{let E=e.length-1;if(!s&&h.startsWith("..")){let C=h.split("/");for(;C[0]==="..";)C.shift(),E-=1;o.pathname=C.join("/")}f=E>=0?e[E]:"/"}let g=Z0(o,f),y=h&&h!=="/"&&h.endsWith("/"),v=(l||h===".")&&t.endsWith("/");return!g.pathname.endsWith("/")&&(y||v)&&(g.pathname+="/"),g}const Ps=r=>r.join("/").replace(/\/\/+/g,"/"),tT=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),nT=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,rT=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function sT(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const N_=["post","put","patch","delete"];new Set(N_);const iT=["get",...N_];new Set(iT);function nl(){return nl=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},nl.apply(this,arguments)}const Tf=de.createContext(null),oT=de.createContext(null),zs=de.createContext(null),xc=de.createContext(null),$r=de.createContext({outlet:null,matches:[],isDataRoute:!1}),x_=de.createContext(null);function aT(r,e){let{relative:t}=e===void 0?{}:e;Bo()||pt(!1);let{basename:s,navigator:o}=de.useContext(zs),{hash:l,pathname:h,search:f}=V_(r,{relative:t}),g=h;return s!=="/"&&(g=h==="/"?s:Ps([s,h])),o.createHref({pathname:g,search:f,hash:l})}function Bo(){return de.useContext(xc)!=null}function dl(){return Bo()||pt(!1),de.useContext(xc).location}function D_(r){de.useContext(zs).static||de.useLayoutEffect(r)}function Dc(){let{isDataRoute:r}=de.useContext($r);return r?ET():lT()}function lT(){Bo()||pt(!1);let r=de.useContext(Tf),{basename:e,future:t,navigator:s}=de.useContext(zs),{matches:o}=de.useContext($r),{pathname:l}=dl(),h=JSON.stringify(wf(o,t.v7_relativeSplatPath)),f=de.useRef(!1);return D_(()=>{f.current=!0}),de.useCallback(function(y,v){if(v===void 0&&(v={}),!f.current)return;if(typeof y=="number"){s.go(y);return}let E=Ef(y,JSON.parse(h),l,v.relative==="path");r==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:Ps([e,E.pathname])),(v.replace?s.replace:s.push)(E,v.state,v)},[e,s,h,l,r])}function uT(){let{matches:r}=de.useContext($r),e=r[r.length-1];return e?e.params:{}}function V_(r,e){let{relative:t}=e===void 0?{}:e,{future:s}=de.useContext(zs),{matches:o}=de.useContext($r),{pathname:l}=dl(),h=JSON.stringify(wf(o,s.v7_relativeSplatPath));return de.useMemo(()=>Ef(r,JSON.parse(h),l,t==="path"),[r,h,l,t])}function cT(r,e){return hT(r,e)}function hT(r,e,t,s){Bo()||pt(!1);let{navigator:o}=de.useContext(zs),{matches:l}=de.useContext($r),h=l[l.length-1],f=h?h.params:{};h&&h.pathname;let g=h?h.pathnameBase:"/";h&&h.route;let y=dl(),v;if(e){var E;let b=typeof e=="string"?Pi(e):e;g==="/"||(E=b.pathname)!=null&&E.startsWith(g)||pt(!1),v=b}else v=y;let C=v.pathname||"/",M=C;if(g!=="/"){let b=g.replace(/^\//,"").split("/");M="/"+C.replace(/^\//,"").split("/").slice(b.length).join("/")}let q=L0(r,{pathname:M}),$=gT(q&&q.map(b=>Object.assign({},b,{params:Object.assign({},f,b.params),pathname:Ps([g,o.encodeLocation?o.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?g:Ps([g,o.encodeLocation?o.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),l,t,s);return e&&$?de.createElement(xc.Provider,{value:{location:nl({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:As.Pop}},$):$}function dT(){let r=wT(),e=sT(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return de.createElement(de.Fragment,null,de.createElement("h2",null,"Unexpected Application Error!"),de.createElement("h3",{style:{fontStyle:"italic"}},e),t?de.createElement("pre",{style:o},t):null,null)}const fT=de.createElement(dT,null);class pT extends de.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?de.createElement($r.Provider,{value:this.props.routeContext},de.createElement(x_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function mT(r){let{routeContext:e,match:t,children:s}=r,o=de.useContext(Tf);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),de.createElement($r.Provider,{value:e},s)}function gT(r,e,t,s){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),s===void 0&&(s=null),r==null){var l;if(!t)return null;if(t.errors)r=t.matches;else if((l=s)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let h=r,f=(o=t)==null?void 0:o.errors;if(f!=null){let v=h.findIndex(E=>E.route.id&&f?.[E.route.id]!==void 0);v>=0||pt(!1),h=h.slice(0,Math.min(h.length,v+1))}let g=!1,y=-1;if(t&&s&&s.v7_partialHydration)for(let v=0;v<h.length;v++){let E=h[v];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(y=v),E.route.id){let{loaderData:C,errors:M}=t,q=E.route.loader&&C[E.route.id]===void 0&&(!M||M[E.route.id]===void 0);if(E.route.lazy||q){g=!0,y>=0?h=h.slice(0,y+1):h=[h[0]];break}}}return h.reduceRight((v,E,C)=>{let M,q=!1,$=null,b=null;t&&(M=f&&E.route.id?f[E.route.id]:void 0,$=E.route.errorElement||fT,g&&(y<0&&C===0?(TT("route-fallback"),q=!0,b=null):y===C&&(q=!0,b=E.route.hydrateFallbackElement||null)));let re=e.concat(h.slice(0,C+1)),se=()=>{let G;return M?G=$:q?G=b:E.route.Component?G=de.createElement(E.route.Component,null):E.route.element?G=E.route.element:G=v,de.createElement(mT,{match:E,routeContext:{outlet:v,matches:re,isDataRoute:t!=null},children:G})};return t&&(E.route.ErrorBoundary||E.route.errorElement||C===0)?de.createElement(pT,{location:t.location,revalidation:t.revalidation,component:$,error:M,children:se(),routeContext:{outlet:null,matches:re,isDataRoute:!0}}):se()},null)}var O_=(function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r})(O_||{}),M_=(function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r})(M_||{});function yT(r){let e=de.useContext(Tf);return e||pt(!1),e}function _T(r){let e=de.useContext(oT);return e||pt(!1),e}function vT(r){let e=de.useContext($r);return e||pt(!1),e}function L_(r){let e=vT(),t=e.matches[e.matches.length-1];return t.route.id||pt(!1),t.route.id}function wT(){var r;let e=de.useContext(x_),t=_T(),s=L_();return e!==void 0?e:(r=t.errors)==null?void 0:r[s]}function ET(){let{router:r}=yT(O_.UseNavigateStable),e=L_(M_.UseNavigateStable),t=de.useRef(!1);return D_(()=>{t.current=!0}),de.useCallback(function(o,l){l===void 0&&(l={}),t.current&&(typeof o=="number"?r.navigate(o):r.navigate(o,nl({fromRouteId:e},l)))},[r,e])}const qg={};function TT(r,e,t){qg[r]||(qg[r]=!0)}function IT(r,e){r?.v7_startTransition,r?.v7_relativeSplatPath}function qd(r){let{to:e,replace:t,state:s,relative:o}=r;Bo()||pt(!1);let{future:l,static:h}=de.useContext(zs),{matches:f}=de.useContext($r),{pathname:g}=dl(),y=Dc(),v=Ef(e,wf(f,l.v7_relativeSplatPath),g,o==="path"),E=JSON.stringify(v);return de.useEffect(()=>y(JSON.parse(E),{replace:t,state:s,relative:o}),[y,E,o,t,s]),null}function Dr(r){pt(!1)}function ST(r){let{basename:e="/",children:t=null,location:s,navigationType:o=As.Pop,navigator:l,static:h=!1,future:f}=r;Bo()&&pt(!1);let g=e.replace(/^\/*/,"/"),y=de.useMemo(()=>({basename:g,navigator:l,static:h,future:nl({v7_relativeSplatPath:!1},f)}),[g,f,l,h]);typeof s=="string"&&(s=Pi(s));let{pathname:v="/",search:E="",hash:C="",state:M=null,key:q="default"}=s,$=de.useMemo(()=>{let b=vf(v,g);return b==null?null:{location:{pathname:b,search:E,hash:C,state:M,key:q},navigationType:o}},[g,v,E,C,M,q,o]);return $==null?null:de.createElement(zs.Provider,{value:y},de.createElement(xc.Provider,{children:t,value:$}))}function AT(r){let{children:e,location:t}=r;return cT(Wd(e),t)}new Promise(()=>{});function Wd(r,e){e===void 0&&(e=[]);let t=[];return de.Children.forEach(r,(s,o)=>{if(!de.isValidElement(s))return;let l=[...e,o];if(s.type===de.Fragment){t.push.apply(t,Wd(s.props.children,l));return}s.type!==Dr&&pt(!1),!s.props.index||!s.props.children||pt(!1);let h={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(h.children=Wd(s.props.children,l)),t.push(h)}),t}function Hd(){return Hd=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},Hd.apply(this,arguments)}function CT(r,e){if(r==null)return{};var t={},s=Object.keys(r),o,l;for(l=0;l<s.length;l++)o=s[l],!(e.indexOf(o)>=0)&&(t[o]=r[o]);return t}function RT(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function PT(r,e){return r.button===0&&(!e||e==="_self")&&!RT(r)}const kT=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],NT="6";try{window.__reactRouterVersion=NT}catch{}const xT="startTransition",Wg=C0[xT];function DT(r){let{basename:e,children:t,future:s,window:o}=r,l=de.useRef();l.current==null&&(l.current=V0({window:o,v5Compat:!0}));let h=l.current,[f,g]=de.useState({action:h.action,location:h.location}),{v7_startTransition:y}=s||{},v=de.useCallback(E=>{y&&Wg?Wg(()=>g(E)):g(E)},[g,y]);return de.useLayoutEffect(()=>h.listen(v),[h,v]),de.useEffect(()=>IT(s),[s]),de.createElement(ST,{basename:e,children:t,location:f.location,navigationType:f.action,navigator:h,future:s})}const VT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",OT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Eo=de.forwardRef(function(e,t){let{onClick:s,relative:o,reloadDocument:l,replace:h,state:f,target:g,to:y,preventScrollReset:v,viewTransition:E}=e,C=CT(e,kT),{basename:M}=de.useContext(zs),q,$=!1;if(typeof y=="string"&&OT.test(y)&&(q=y,VT))try{let G=new URL(window.location.href),W=y.startsWith("//")?new URL(G.protocol+y):new URL(y),te=vf(W.pathname,M);W.origin===G.origin&&te!=null?y=te+W.search+W.hash:$=!0}catch{}let b=aT(y,{relative:o}),re=MT(y,{replace:h,state:f,target:g,preventScrollReset:v,relative:o,viewTransition:E});function se(G){s&&s(G),G.defaultPrevented||re(G)}return de.createElement("a",Hd({},C,{href:q||b,onClick:$||l?s:se,ref:t,target:g}))});var Hg;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(Hg||(Hg={}));var Gg;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(Gg||(Gg={}));function MT(r,e){let{target:t,replace:s,state:o,preventScrollReset:l,relative:h,viewTransition:f}=e===void 0?{}:e,g=Dc(),y=dl(),v=V_(r,{relative:h});return de.useCallback(E=>{if(PT(E,t)){E.preventDefault();let C=s!==void 0?s:ac(y)===ac(v);g(r,{replace:C,state:o,preventScrollReset:l,relative:h,viewTransition:f})}},[y,g,v,s,o,t,r,l,h,f])}const LT=()=>{};var Kg={};const b_=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},bT=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const o=r[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],h=r[t++],f=r[t++],g=((o&7)<<18|(l&63)<<12|(h&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const l=r[t++],h=r[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},j_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const l=r[o],h=o+1<r.length,f=h?r[o+1]:0,g=o+2<r.length,y=g?r[o+2]:0,v=l>>2,E=(l&3)<<4|f>>4;let C=(f&15)<<2|y>>6,M=y&63;g||(M=64,h||(C=64)),s.push(t[v],t[E],t[C],t[M])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(b_(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):bT(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],f=o<r.length?t[r.charAt(o)]:0;++o;const y=o<r.length?t[r.charAt(o)]:64;++o;const E=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||f==null||y==null||E==null)throw new jT;const C=l<<2|f>>4;if(s.push(C),y!==64){const M=f<<4&240|y>>2;if(s.push(M),E!==64){const q=y<<6&192|E;s.push(q)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class jT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const FT=function(r){const e=b_(r);return j_.encodeByteArray(e,!0)},lc=function(r){return FT(r).replace(/\./g,"")},F_=function(r){try{return j_.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function UT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const BT=()=>UT().__FIREBASE_DEFAULTS__,zT=()=>{if(typeof process>"u"||typeof Kg>"u")return;const r=Kg.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},$T=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&F_(r[1]);return e&&JSON.parse(e)},Vc=()=>{try{return LT()||BT()||zT()||$T()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},U_=r=>Vc()?.emulatorHosts?.[r],qT=r=>{const e=U_(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},B_=()=>Vc()?.config,z_=r=>Vc()?.[`_${r}`];class WT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}function zo(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function $_(r){return(await fetch(r,{credentials:"include"})).ok}function HT(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...r};return[lc(JSON.stringify(t)),lc(JSON.stringify(h)),""].join(".")}const Ka={};function GT(){const r={prod:[],emulator:[]};for(const e of Object.keys(Ka))Ka[e]?r.emulator.push(e):r.prod.push(e);return r}function KT(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Qg=!1;function q_(r,e){if(typeof window>"u"||typeof document>"u"||!zo(window.location.host)||Ka[r]===e||Ka[r]||Qg)return;Ka[r]=e;function t(C){return`__firebase__banner__${C}`}const s="__firebase__banner",l=GT().prod.length>0;function h(){const C=document.getElementById(s);C&&C.remove()}function f(C){C.style.display="flex",C.style.background="#7faaf0",C.style.position="fixed",C.style.bottom="5px",C.style.left="5px",C.style.padding=".5em",C.style.borderRadius="5px",C.style.alignItems="center"}function g(C,M){C.setAttribute("width","24"),C.setAttribute("id",M),C.setAttribute("height","24"),C.setAttribute("viewBox","0 0 24 24"),C.setAttribute("fill","none"),C.style.marginLeft="-6px"}function y(){const C=document.createElement("span");return C.style.cursor="pointer",C.style.marginLeft="16px",C.style.fontSize="24px",C.innerHTML=" &times;",C.onclick=()=>{Qg=!0,h()},C}function v(C,M){C.setAttribute("id",M),C.innerText="Learn more",C.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",C.setAttribute("target","__blank"),C.style.paddingLeft="5px",C.style.textDecoration="underline"}function E(){const C=KT(s),M=t("text"),q=document.getElementById(M)||document.createElement("span"),$=t("learnmore"),b=document.getElementById($)||document.createElement("a"),re=t("preprendIcon"),se=document.getElementById(re)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(C.created){const G=C.element;f(G),v(b,$);const W=y();g(se,re),G.append(se,q,b,W),document.body.appendChild(G)}l?(q.innerText="Preview backend disconnected.",se.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(se.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,q.innerText="Preview backend running in this workspace."),q.setAttribute("id",M)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}function Gt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function QT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Gt())}function XT(){const r=Vc()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function YT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function JT(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function ZT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function eI(){const r=Gt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function tI(){return!XT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nI(){try{return typeof indexedDB=="object"}catch{return!1}}function rI(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}const sI="FirebaseError";class qr extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=sI,Object.setPrototypeOf(this,qr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fl.prototype.create)}}class fl{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?iI(l,s):"Error",f=`${this.serviceName}: ${h} (${o}).`;return new qr(o,f,s)}}function iI(r,e){return r.replace(oI,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const oI=/\{\$([^}]+)}/g;function aI(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Ii(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=r[o],h=e[o];if(Xg(l)&&Xg(h)){if(!Ii(l,h))return!1}else if(l!==h)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function Xg(r){return r!==null&&typeof r=="object"}function pl(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function lI(r,e){const t=new uI(r,e);return t.subscribe.bind(t)}class uI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");cI(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=kd),o.error===void 0&&(o.error=kd),o.complete===void 0&&(o.complete=kd);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function cI(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function kd(){}function At(r){return r&&r._delegate?r._delegate:r}class Si{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const vi="[DEFAULT]";class hI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new WT;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(fI(e))try{this.getOrInitializeService({instanceIdentifier:vi})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=vi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=vi){return this.instances.has(e)}getOptions(e=vi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,h]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);s===f&&h.resolve(o)}return o}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:dI(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=vi){return this.component?this.component.multipleInstances?e:vi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function dI(r){return r===vi?void 0:r}function fI(r){return r.instantiationMode==="EAGER"}class pI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new hI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Me;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Me||(Me={}));const mI={debug:Me.DEBUG,verbose:Me.VERBOSE,info:Me.INFO,warn:Me.WARN,error:Me.ERROR,silent:Me.SILENT},gI=Me.INFO,yI={[Me.DEBUG]:"log",[Me.VERBOSE]:"log",[Me.INFO]:"info",[Me.WARN]:"warn",[Me.ERROR]:"error"},_I=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=yI[e];if(o)console[o](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class If{constructor(e){this.name=e,this._logLevel=gI,this._logHandler=_I,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?mI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Me.DEBUG,...e),this._logHandler(this,Me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Me.VERBOSE,...e),this._logHandler(this,Me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Me.INFO,...e),this._logHandler(this,Me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Me.WARN,...e),this._logHandler(this,Me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Me.ERROR,...e),this._logHandler(this,Me.ERROR,...e)}}const vI=(r,e)=>e.some(t=>r instanceof t);let Yg,Jg;function wI(){return Yg||(Yg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function EI(){return Jg||(Jg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const W_=new WeakMap,Gd=new WeakMap,H_=new WeakMap,Nd=new WeakMap,Sf=new WeakMap;function TI(r){const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",h)},l=()=>{t(ks(r.result)),o()},h=()=>{s(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&W_.set(t,r)}).catch(()=>{}),Sf.set(e,r),e}function II(r){if(Gd.has(r))return;const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",h),r.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",h),r.addEventListener("abort",h)});Gd.set(r,e)}let Kd={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Gd.get(r);if(e==="objectStoreNames")return r.objectStoreNames||H_.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ks(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function SI(r){Kd=r(Kd)}function AI(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(xd(this),e,...t);return H_.set(s,e.sort?e.sort():[e]),ks(s)}:EI().includes(r)?function(...e){return r.apply(xd(this),e),ks(W_.get(this))}:function(...e){return ks(r.apply(xd(this),e))}}function CI(r){return typeof r=="function"?AI(r):(r instanceof IDBTransaction&&II(r),vI(r,wI())?new Proxy(r,Kd):r)}function ks(r){if(r instanceof IDBRequest)return TI(r);if(Nd.has(r))return Nd.get(r);const e=CI(r);return e!==r&&(Nd.set(r,e),Sf.set(e,r)),e}const xd=r=>Sf.get(r);function RI(r,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const h=indexedDB.open(r,e),f=ks(h);return s&&h.addEventListener("upgradeneeded",g=>{s(ks(h.result),g.oldVersion,g.newVersion,ks(h.transaction),g)}),t&&h.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),f.then(g=>{l&&g.addEventListener("close",()=>l()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),f}const PI=["get","getKey","getAll","getAllKeys","count"],kI=["put","add","delete","clear"],Dd=new Map;function Zg(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Dd.get(e))return Dd.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=kI.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||PI.includes(t)))return;const l=async function(h,...f){const g=this.transaction(h,o?"readwrite":"readonly");let y=g.store;return s&&(y=y.index(f.shift())),(await Promise.all([y[t](...f),o&&g.done]))[0]};return Dd.set(e,l),l}SI(r=>({...r,get:(e,t,s)=>Zg(e,t)||r.get(e,t,s),has:(e,t)=>!!Zg(e,t)||r.has(e,t)}));class NI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(xI(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function xI(r){return r.getComponent()?.type==="VERSION"}const Qd="@firebase/app",ey="0.14.6";const jr=new If("@firebase/app"),DI="@firebase/app-compat",VI="@firebase/analytics-compat",OI="@firebase/analytics",MI="@firebase/app-check-compat",LI="@firebase/app-check",bI="@firebase/auth",jI="@firebase/auth-compat",FI="@firebase/database",UI="@firebase/data-connect",BI="@firebase/database-compat",zI="@firebase/functions",$I="@firebase/functions-compat",qI="@firebase/installations",WI="@firebase/installations-compat",HI="@firebase/messaging",GI="@firebase/messaging-compat",KI="@firebase/performance",QI="@firebase/performance-compat",XI="@firebase/remote-config",YI="@firebase/remote-config-compat",JI="@firebase/storage",ZI="@firebase/storage-compat",eS="@firebase/firestore",tS="@firebase/ai",nS="@firebase/firestore-compat",rS="firebase",sS="12.6.0";const Xd="[DEFAULT]",iS={[Qd]:"fire-core",[DI]:"fire-core-compat",[OI]:"fire-analytics",[VI]:"fire-analytics-compat",[LI]:"fire-app-check",[MI]:"fire-app-check-compat",[bI]:"fire-auth",[jI]:"fire-auth-compat",[FI]:"fire-rtdb",[UI]:"fire-data-connect",[BI]:"fire-rtdb-compat",[zI]:"fire-fn",[$I]:"fire-fn-compat",[qI]:"fire-iid",[WI]:"fire-iid-compat",[HI]:"fire-fcm",[GI]:"fire-fcm-compat",[KI]:"fire-perf",[QI]:"fire-perf-compat",[XI]:"fire-rc",[YI]:"fire-rc-compat",[JI]:"fire-gcs",[ZI]:"fire-gcs-compat",[eS]:"fire-fst",[nS]:"fire-fst-compat",[tS]:"fire-vertex","fire-js":"fire-js",[rS]:"fire-js-all"};const uc=new Map,oS=new Map,Yd=new Map;function ty(r,e){try{r.container.addComponent(e)}catch(t){jr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Do(r){const e=r.name;if(Yd.has(e))return jr.debug(`There were multiple attempts to register component ${e}.`),!1;Yd.set(e,r);for(const t of uc.values())ty(t,r);for(const t of oS.values())ty(t,r);return!0}function Af(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function jn(r){return r==null?!1:r.settings!==void 0}const aS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ns=new fl("app","Firebase",aS);class lS{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Si("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ns.create("app-deleted",{appName:this._name})}}const $o=sS;function G_(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s={name:Xd,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw Ns.create("bad-app-name",{appName:String(o)});if(t||(t=B_()),!t)throw Ns.create("no-options");const l=uc.get(o);if(l){if(Ii(t,l.options)&&Ii(s,l.config))return l;throw Ns.create("duplicate-app",{appName:o})}const h=new pI(o);for(const g of Yd.values())h.addComponent(g);const f=new lS(t,s,h);return uc.set(o,f),f}function K_(r=Xd){const e=uc.get(r);if(!e&&r===Xd&&B_())return G_();if(!e)throw Ns.create("no-app",{appName:r});return e}function xs(r,e,t){let s=iS[r]??r;t&&(s+=`-${t}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const h=[`Unable to register library "${s}" with version "${e}":`];o&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),jr.warn(h.join(" "));return}Do(new Si(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const uS="firebase-heartbeat-database",cS=1,rl="firebase-heartbeat-store";let Vd=null;function Q_(){return Vd||(Vd=RI(uS,cS,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(rl)}catch(t){console.warn(t)}}}}).catch(r=>{throw Ns.create("idb-open",{originalErrorMessage:r.message})})),Vd}async function hS(r){try{const t=(await Q_()).transaction(rl),s=await t.objectStore(rl).get(X_(r));return await t.done,s}catch(e){if(e instanceof qr)jr.warn(e.message);else{const t=Ns.create("idb-get",{originalErrorMessage:e?.message});jr.warn(t.message)}}}async function ny(r,e){try{const s=(await Q_()).transaction(rl,"readwrite");await s.objectStore(rl).put(e,X_(r)),await s.done}catch(t){if(t instanceof qr)jr.warn(t.message);else{const s=Ns.create("idb-set",{originalErrorMessage:t?.message});jr.warn(s.message)}}}function X_(r){return`${r.name}!${r.options.appId}`}const dS=1024,fS=30;class pS{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new gS(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=ry();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:t}),this._heartbeatsCache.heartbeats.length>fS){const o=yS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){jr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=ry(),{heartbeatsToSend:t,unsentEntries:s}=mS(this._heartbeatsCache.heartbeats),o=lc(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return jr.warn(e),""}}}function ry(){return new Date().toISOString().substring(0,10)}function mS(r,e=dS){const t=[];let s=r.slice();for(const o of r){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),sy(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),sy(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class gS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return nI()?rI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await hS(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return ny(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return ny(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function sy(r){return lc(JSON.stringify({version:2,heartbeats:r})).length}function yS(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}function _S(r){Do(new Si("platform-logger",e=>new NI(e),"PRIVATE")),Do(new Si("heartbeat",e=>new pS(e),"PRIVATE")),xs(Qd,ey,r),xs(Qd,ey,"esm2020"),xs("fire-js","")}_S("");function Y_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const vS=Y_,J_=new fl("auth","Firebase",Y_());const cc=new If("@firebase/auth");function wS(r,...e){cc.logLevel<=Me.WARN&&cc.warn(`Auth (${$o}): ${r}`,...e)}function Yu(r,...e){cc.logLevel<=Me.ERROR&&cc.error(`Auth (${$o}): ${r}`,...e)}function dr(r,...e){throw Rf(r,...e)}function Un(r,...e){return Rf(r,...e)}function Cf(r,e,t){const s={...vS(),[e]:t};return new fl("auth","Firebase",s).create(e,{appName:r.name})}function Ti(r){return Cf(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ES(r,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&dr(r,"argument-error"),Cf(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Rf(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return J_.create(r,...e)}function Se(r,e,...t){if(!r)throw Rf(e,...t)}function Or(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Yu(e),new Error(e)}function Fr(r,e){r||Or(e)}function Jd(){return typeof self<"u"&&self.location?.href||""}function TS(){return iy()==="http:"||iy()==="https:"}function iy(){return typeof self<"u"&&self.location?.protocol||null}function IS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(TS()||JT()||"connection"in navigator)?navigator.onLine:!0}function SS(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class ml{constructor(e,t){this.shortDelay=e,this.longDelay=t,Fr(t>e,"Short delay should be less than long delay!"),this.isMobile=QT()||ZT()}get(){return IS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Pf(r,e){Fr(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class Z_{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Or("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Or("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Or("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const AS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const CS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],RS=new ml(3e4,6e4);function kf(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function qo(r,e,t,s,o={}){return ev(r,o,async()=>{let l={},h={};s&&(e==="GET"?h=s:l={body:JSON.stringify(s)});const f=pl({key:r.config.apiKey,...h}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const y={method:e,headers:g,...l};return YT()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&zo(r.emulatorConfig.host)&&(y.credentials="include"),Z_.fetch()(await tv(r,r.config.apiHost,t,f),y)})}async function ev(r,e,t){r._canInitEmulator=!1;const s={...AS,...e};try{const o=new kS(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw qu(r,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const f=l.ok?h.errorMessage:h.error.message,[g,y]=f.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw qu(r,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw qu(r,"email-already-in-use",h);if(g==="USER_DISABLED")throw qu(r,"user-disabled",h);const v=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Cf(r,v,y);dr(r,v)}}catch(o){if(o instanceof qr)throw o;dr(r,"network-request-failed",{message:String(o)})}}async function PS(r,e,t,s,o={}){const l=await qo(r,e,t,s,o);return"mfaPendingCredential"in l&&dr(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function tv(r,e,t,s){const o=`${e}${t}?${s}`,l=r,h=l.config.emulator?Pf(r.config,o):`${r.config.apiScheme}://${o}`;return CS.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}class kS{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Un(this.auth,"network-request-failed")),RS.get())})}}function qu(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=Un(r,e,s);return o.customData._tokenResponse=t,o}async function NS(r,e){return qo(r,"POST","/v1/accounts:delete",e)}async function hc(r,e){return qo(r,"POST","/v1/accounts:lookup",e)}function Qa(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function xS(r,e=!1){const t=At(r),s=await t.getIdToken(e),o=Nf(s);Se(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l?.sign_in_provider;return{claims:o,token:s,authTime:Qa(Od(o.auth_time)),issuedAtTime:Qa(Od(o.iat)),expirationTime:Qa(Od(o.exp)),signInProvider:h||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Od(r){return Number(r)*1e3}function Nf(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return Yu("JWT malformed, contained fewer than 3 sections"),null;try{const o=F_(t);return o?JSON.parse(o):(Yu("Failed to decode base64 JWT payload"),null)}catch(o){return Yu("Caught error parsing JWT payload as JSON",o?.toString()),null}}function oy(r){const e=Nf(r);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function sl(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof qr&&DS(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function DS({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class VS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Zd{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qa(this.lastLoginAt),this.creationTime=Qa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function dc(r){const e=r.auth,t=await r.getIdToken(),s=await sl(r,hc(e,{idToken:t}));Se(s?.users.length,e,"internal-error");const o=s.users[0];r._notifyReloadListener(o);const l=o.providerUserInfo?.length?nv(o.providerUserInfo):[],h=MS(r.providerData,l),f=r.isAnonymous,g=!(r.email&&o.passwordHash)&&!h?.length,y=f?g:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Zd(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(r,v)}async function OS(r){const e=At(r);await dc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function MS(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function nv(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function LS(r,e){const t=await ev(r,{},async()=>{const s=pl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,h=await tv(r,o,"/v1/token",`key=${l}`),f=await r._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:f,body:s};return r.emulatorConfig&&zo(r.emulatorConfig.host)&&(g.credentials="include"),Z_.fetch()(h,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function bS(r,e){return qo(r,"POST","/v2/accounts:revokeToken",kf(r,e))}class Ro{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):oy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const t=oy(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:l}=await LS(e,t);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:l}=t,h=new Ro;return s&&(Se(typeof s=="string","internal-error",{appName:e}),h.refreshToken=s),o&&(Se(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(Se(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ro,this.toJSON())}_performRefresh(){return Or("not implemented")}}function Es(r,e){Se(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Fn{constructor({uid:e,auth:t,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new VS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Zd(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await sl(this,this.stsTokenManager.getToken(this.auth,e));return Se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return xS(this,e)}reload(){return OS(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Fn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await dc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jn(this.auth.app))return Promise.reject(Ti(this.auth));const e=await this.getIdToken();return await sl(this,NS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,h=t.photoURL??void 0,f=t.tenantId??void 0,g=t._redirectEventId??void 0,y=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:E,emailVerified:C,isAnonymous:M,providerData:q,stsTokenManager:$}=t;Se(E&&$,e,"internal-error");const b=Ro.fromJSON(this.name,$);Se(typeof E=="string",e,"internal-error"),Es(s,e.name),Es(o,e.name),Se(typeof C=="boolean",e,"internal-error"),Se(typeof M=="boolean",e,"internal-error"),Es(l,e.name),Es(h,e.name),Es(f,e.name),Es(g,e.name),Es(y,e.name),Es(v,e.name);const re=new Fn({uid:E,auth:e,email:o,emailVerified:C,displayName:s,isAnonymous:M,photoURL:h,phoneNumber:l,tenantId:f,stsTokenManager:b,createdAt:y,lastLoginAt:v});return q&&Array.isArray(q)&&(re.providerData=q.map(se=>({...se}))),g&&(re._redirectEventId=g),re}static async _fromIdTokenResponse(e,t,s=!1){const o=new Ro;o.updateFromServerResponse(t);const l=new Fn({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await dc(l),l}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];Se(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?nv(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!l?.length,f=new Ro;f.updateFromIdToken(s);const g=new Fn({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:h}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Zd(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!l?.length};return Object.assign(g,y),g}}const ay=new Map;function Mr(r){Fr(r instanceof Function,"Expected a class definition");let e=ay.get(r);return e?(Fr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,ay.set(r,e),e)}class rv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}rv.type="NONE";const ly=rv;function Ju(r,e,t){return`firebase:${r}:${e}:${t}`}class Po{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=Ju(this.userKey,o.apiKey,l),this.fullPersistenceKey=Ju("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await hc(this.auth,{idToken:e}).catch(()=>{});return t?Fn._fromGetAccountInfoResponse(this.auth,t,e):null}return Fn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Po(Mr(ly),e,s);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=o[0]||Mr(ly);const h=Ju(s,e.config.apiKey,e.name);let f=null;for(const y of t)try{const v=await y._get(h);if(v){let E;if(typeof v=="string"){const C=await hc(e,{idToken:v}).catch(()=>{});if(!C)break;E=await Fn._fromGetAccountInfoResponse(e,C,v)}else E=Fn._fromJSON(e,v);y!==l&&(f=E),l=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new Po(l,e,s):(l=g[0],f&&await l._set(h,f.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(h)}catch{}})),new Po(l,e,s))}}function uy(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(av(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(sv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(uv(e))return"Blackberry";if(cv(e))return"Webos";if(iv(e))return"Safari";if((e.includes("chrome/")||ov(e))&&!e.includes("edge/"))return"Chrome";if(lv(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if(s?.length===2)return s[1]}return"Other"}function sv(r=Gt()){return/firefox\//i.test(r)}function iv(r=Gt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ov(r=Gt()){return/crios\//i.test(r)}function av(r=Gt()){return/iemobile/i.test(r)}function lv(r=Gt()){return/android/i.test(r)}function uv(r=Gt()){return/blackberry/i.test(r)}function cv(r=Gt()){return/webos/i.test(r)}function xf(r=Gt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function jS(r=Gt()){return xf(r)&&!!window.navigator?.standalone}function FS(){return eI()&&document.documentMode===10}function hv(r=Gt()){return xf(r)||lv(r)||cv(r)||uv(r)||/windows phone/i.test(r)||av(r)}function dv(r,e=[]){let t;switch(r){case"Browser":t=uy(Gt());break;case"Worker":t=`${uy(Gt())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${$o}/${s}`}class US{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((h,f)=>{try{const g=e(l);h(g)}catch(g){f(g)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function BS(r,e={}){return qo(r,"GET","/v2/passwordPolicy",kf(r,e))}const zS=6;class $S{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??zS,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class qS{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cy(this),this.idTokenSubscription=new cy(this),this.beforeStateQueue=new US(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=J_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Mr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Po.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await hc(this,{idToken:e}),s=await Fn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(jn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(h,h))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,h=s?._redirectEventId,f=await this.tryRedirectSignIn(e);(!l||l===h)&&f?.user&&(s=f.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await dc(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=SS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(jn(this.app))return Promise.reject(Ti(this));const t=e?At(e):null;return t&&Se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return jn(this.app)?Promise.reject(Ti(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return jn(this.app)?Promise.reject(Ti(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Mr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await BS(this),t=new $S(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new fl("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await bS(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Mr(e)||this._popupRedirectResolver;Se(t,this,"argument-error"),this.redirectPersistenceManager=await Po.create(this,[Mr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(f,this,"internal-error"),f.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,s,o);return()=>{h=!0,g()}}else{const g=e.addObserver(t);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=dv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(jn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&wS(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Oc(r){return At(r)}class cy{constructor(e){this.auth=e,this.observer=null,this.addObserver=lI(t=>this.observer=t)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Df={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function WS(r){Df=r}function HS(r){return Df.loadJS(r)}function GS(){return Df.gapiScript}function KS(r){return`__${r}${Math.floor(Math.random()*1e6)}`}function QS(r,e){const t=Af(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(Ii(l,e??{}))return o;dr(o,"already-initialized")}return t.initialize({options:e})}function XS(r,e){const t=e?.persistence||[],s=(Array.isArray(t)?t:[t]).map(Mr);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e?.popupRedirectResolver)}function YS(r,e,t){const s=Oc(r);Se(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=fv(e),{host:h,port:f}=JS(e),g=f===null?"":`:${f}`,y={url:`${l}//${h}${g}/`},v=Object.freeze({host:h,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Se(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Se(Ii(y,s.config.emulator)&&Ii(v,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=v,s.settings.appVerificationDisabledForTesting=!0,zo(h)?($_(`${l}//${h}${g}`),q_("Auth",!0)):ZS()}function fv(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function JS(r){const e=fv(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:hy(s.substr(l.length+1))}}else{const[l,h]=s.split(":");return{host:l,port:hy(h)}}}function hy(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function ZS(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class pv{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Or("not implemented")}_getIdTokenResponse(e){return Or("not implemented")}_linkToIdToken(e,t){return Or("not implemented")}_getReauthenticationResolver(e){return Or("not implemented")}}async function ko(r,e){return PS(r,"POST","/v1/accounts:signInWithIdp",kf(r,e))}const eA="http://localhost";class Ai extends pv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ai(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):dr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...l}=t;if(!s||!o)return null;const h=new Ai(s,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return ko(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,ko(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ko(e,t)}buildRequest(){const e={requestUri:eA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=pl(t)}return e}}class Vf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class gl extends Vf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ts extends gl{constructor(){super("facebook.com")}static credential(e){return Ai._fromParams({providerId:Ts.PROVIDER_ID,signInMethod:Ts.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ts.credentialFromTaggedObject(e)}static credentialFromError(e){return Ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ts.credential(e.oauthAccessToken)}catch{return null}}}Ts.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ts.PROVIDER_ID="facebook.com";class Vr extends gl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ai._fromParams({providerId:Vr.PROVIDER_ID,signInMethod:Vr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Vr.credentialFromTaggedObject(e)}static credentialFromError(e){return Vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Vr.credential(t,s)}catch{return null}}}Vr.GOOGLE_SIGN_IN_METHOD="google.com";Vr.PROVIDER_ID="google.com";class Is extends gl{constructor(){super("github.com")}static credential(e){return Ai._fromParams({providerId:Is.PROVIDER_ID,signInMethod:Is.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Is.credentialFromTaggedObject(e)}static credentialFromError(e){return Is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Is.credential(e.oauthAccessToken)}catch{return null}}}Is.GITHUB_SIGN_IN_METHOD="github.com";Is.PROVIDER_ID="github.com";class Ss extends gl{constructor(){super("twitter.com")}static credential(e,t){return Ai._fromParams({providerId:Ss.PROVIDER_ID,signInMethod:Ss.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ss.credentialFromTaggedObject(e)}static credentialFromError(e){return Ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Ss.credential(t,s)}catch{return null}}}Ss.TWITTER_SIGN_IN_METHOD="twitter.com";Ss.PROVIDER_ID="twitter.com";class Vo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const l=await Fn._fromIdTokenResponse(e,s,o),h=dy(s);return new Vo({user:l,providerId:h,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=dy(s);return new Vo({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function dy(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}class fc extends qr{constructor(e,t,s,o){super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,fc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new fc(e,t,s,o)}}function mv(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?fc._fromErrorAndOperation(r,l,e,s):l})}async function tA(r,e,t=!1){const s=await sl(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Vo._forOperation(r,"link",s)}async function nA(r,e,t=!1){const{auth:s}=r;if(jn(s.app))return Promise.reject(Ti(s));const o="reauthenticate";try{const l=await sl(r,mv(s,o,e,r),t);Se(l.idToken,s,"internal-error");const h=Nf(l.idToken);Se(h,s,"internal-error");const{sub:f}=h;return Se(r.uid===f,s,"user-mismatch"),Vo._forOperation(r,o,l)}catch(l){throw l?.code==="auth/user-not-found"&&dr(s,"user-mismatch"),l}}async function rA(r,e,t=!1){if(jn(r.app))return Promise.reject(Ti(r));const s="signIn",o=await mv(r,s,e),l=await Vo._fromIdTokenResponse(r,s,o);return t||await r._updateCurrentUser(l.user),l}function sA(r,e,t,s){return At(r).onIdTokenChanged(e,t,s)}function iA(r,e,t){return At(r).beforeAuthStateChanged(e,t)}function oA(r,e,t,s){return At(r).onAuthStateChanged(e,t,s)}function aA(r){return At(r).signOut()}const pc="__sak";class gv{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(pc,"1"),this.storage.removeItem(pc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const lA=1e3,uA=10;class yv extends gv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=hv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,f,g)=>{this.notifyListeners(h,g)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(s);!t&&this.localCache[s]===h||this.notifyListeners(s,h)},l=this.storage.getItem(s);FS()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,uA):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},lA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}yv.type="LOCAL";const cA=yv;class _v extends gv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}_v.type="SESSION";const vv=_v;function hA(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Mc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new Mc(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!h?.size)return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const f=Array.from(h).map(async y=>y(t.origin,l)),g=await hA(f);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Mc.receivers=[];function Of(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}class dA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((f,g)=>{const y=Of("",20);o.port1.start();const v=setTimeout(()=>{g(new Error("unsupported_event"))},s);h={messageChannel:o,onMessage(E){const C=E;if(C.data.eventId===y)switch(C.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(C.data.response);break;default:clearTimeout(v),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}function ar(){return window}function fA(r){ar().location.href=r}function wv(){return typeof ar().WorkerGlobalScope<"u"&&typeof ar().importScripts=="function"}async function pA(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function mA(){return navigator?.serviceWorker?.controller||null}function gA(){return wv()?self:null}const Ev="firebaseLocalStorageDb",yA=1,mc="firebaseLocalStorage",Tv="fbase_key";class yl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Lc(r,e){return r.transaction([mc],e?"readwrite":"readonly").objectStore(mc)}function _A(){const r=indexedDB.deleteDatabase(Ev);return new yl(r).toPromise()}function ef(){const r=indexedDB.open(Ev,yA);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(mc,{keyPath:Tv})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(mc)?e(s):(s.close(),await _A(),e(await ef()))})})}async function fy(r,e,t){const s=Lc(r,!0).put({[Tv]:e,value:t});return new yl(s).toPromise()}async function vA(r,e){const t=Lc(r,!1).get(e),s=await new yl(t).toPromise();return s===void 0?null:s.value}function py(r,e){const t=Lc(r,!0).delete(e);return new yl(t).toPromise()}const wA=800,EA=3;class Iv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ef(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>EA)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return wv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Mc._getInstance(gA()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await pA(),!this.activeServiceWorker)return;this.sender=new dA(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||mA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ef();return await fy(e,pc,"1"),await py(e,pc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>fy(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>vA(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>py(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Lc(o,!1).getAll();return new yl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),wA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Iv.type="LOCAL";const TA=Iv;new ml(3e4,6e4);function Sv(r,e){return e?Mr(e):(Se(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class Mf extends pv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ko(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ko(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ko(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function IA(r){return rA(r.auth,new Mf(r),r.bypassAuthState)}function SA(r){const{auth:e,user:t}=r;return Se(t,e,"internal-error"),nA(t,new Mf(r),r.bypassAuthState)}async function AA(r){const{auth:e,user:t}=r;return Se(t,e,"internal-error"),tA(t,new Mf(r),r.bypassAuthState)}class Av{constructor(e,t,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:l,error:h,type:f}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return IA;case"linkViaPopup":case"linkViaRedirect":return AA;case"reauthViaPopup":case"reauthViaRedirect":return SA;default:dr(this.auth,"internal-error")}}resolve(e){Fr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Fr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const CA=new ml(2e3,1e4);async function RA(r,e,t){if(jn(r.app))return Promise.reject(Un(r,"operation-not-supported-in-this-environment"));const s=Oc(r);ES(r,e,Vf);const o=Sv(s,t);return new wi(s,"signInViaPopup",e,o).executeNotNull()}class wi extends Av{constructor(e,t,s,o,l){super(e,t,o,l),this.provider=s,this.authWindow=null,this.pollId=null,wi.currentPopupAction&&wi.currentPopupAction.cancel(),wi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){Fr(this.filter.length===1,"Popup operations only handle one event");const e=Of();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Un(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Un(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,wi.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Un(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,CA.get())};e()}}wi.currentPopupAction=null;const PA="pendingRedirect",Zu=new Map;class kA extends Av{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Zu.get(this.auth._key());if(!e){try{const s=await NA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Zu.set(this.auth._key(),e)}return this.bypassAuthState||Zu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function NA(r,e){const t=VA(e),s=DA(r);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function xA(r,e){Zu.set(r._key(),e)}function DA(r){return Mr(r._redirectPersistence)}function VA(r){return Ju(PA,r.config.apiKey,r.name)}async function OA(r,e,t=!1){if(jn(r.app))return Promise.reject(Ti(r));const s=Oc(r),o=Sv(s,e),h=await new kA(s,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await s._persistUserIfCurrent(h.user),await s._setRedirectUser(null,e)),h}const MA=600*1e3;class LA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!bA(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Cv(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Un(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=MA&&this.cachedEventUids.clear(),this.cachedEventUids.has(my(e))}saveEventToCache(e){this.cachedEventUids.add(my(e)),this.lastProcessedEventTime=Date.now()}}function my(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Cv({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function bA(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Cv(r);default:return!1}}async function jA(r,e={}){return qo(r,"GET","/v1/projects",e)}const FA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,UA=/^https?/;async function BA(r){if(r.config.emulator)return;const{authorizedDomains:e}=await jA(r);for(const t of e)try{if(zA(t))return}catch{}dr(r,"unauthorized-domain")}function zA(r){const e=Jd(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===s}if(!UA.test(t))return!1;if(FA.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const $A=new ml(3e4,6e4);function gy(){const r=ar().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function qA(r){return new Promise((e,t)=>{function s(){gy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{gy(),t(Un(r,"network-request-failed"))},timeout:$A.get()})}if(ar().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ar().gapi?.load)s();else{const o=KS("iframefcb");return ar()[o]=()=>{gapi.load?s():t(Un(r,"network-request-failed"))},HS(`${GS()}?onload=${o}`).catch(l=>t(l))}}).catch(e=>{throw ec=null,e})}let ec=null;function WA(r){return ec=ec||qA(r),ec}const HA=new ml(5e3,15e3),GA="__/auth/iframe",KA="emulator/auth/iframe",QA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},XA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function YA(r){const e=r.config;Se(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Pf(e,KA):`https://${r.config.authDomain}/${GA}`,s={apiKey:e.apiKey,appName:r.name,v:$o},o=XA.get(r.config.apiHost);o&&(s.eid=o);const l=r._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${pl(s).slice(1)}`}async function JA(r){const e=await WA(r),t=ar().gapi;return Se(t,r,"internal-error"),e.open({where:document.body,url:YA(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:QA,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const h=Un(r,"network-request-failed"),f=ar().setTimeout(()=>{l(h)},HA.get());function g(){ar().clearTimeout(f),o(s)}s.ping(g).then(g,()=>{l(h)})}))}const ZA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},e1=500,t1=600,n1="_blank",r1="http://localhost";class yy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function s1(r,e,t,s=e1,o=t1){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const g={...ZA,width:s.toString(),height:o.toString(),top:l,left:h},y=Gt().toLowerCase();t&&(f=ov(y)?n1:t),sv(y)&&(e=e||r1,g.scrollbars="yes");const v=Object.entries(g).reduce((C,[M,q])=>`${C}${M}=${q},`,"");if(jS(y)&&f!=="_self")return i1(e||"",f),new yy(null);const E=window.open(e||"",f,v);Se(E,r,"popup-blocked");try{E.focus()}catch{}return new yy(E)}function i1(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}const o1="__/auth/handler",a1="emulator/auth/handler",l1=encodeURIComponent("fac");async function _y(r,e,t,s,o,l){Se(r.config.authDomain,r,"auth-domain-config-required"),Se(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:$o,eventId:o};if(e instanceof Vf){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",aI(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))h[v]=E}if(e instanceof gl){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(h.scopes=v.join(","))}r.tenantId&&(h.tid=r.tenantId);const f=h;for(const v of Object.keys(f))f[v]===void 0&&delete f[v];const g=await r._getAppCheckToken(),y=g?`#${l1}=${encodeURIComponent(g)}`:"";return`${u1(r)}?${pl(f).slice(1)}${y}`}function u1({config:r}){return r.emulator?Pf(r,a1):`https://${r.authDomain}/${o1}`}const Md="webStorageSupport";class c1{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vv,this._completeRedirectFn=OA,this._overrideRedirectResult=xA}async _openPopup(e,t,s,o){Fr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await _y(e,t,s,Jd(),o);return s1(e,l,Of())}async _openRedirect(e,t,s,o){await this._originValidation(e);const l=await _y(e,t,s,Jd(),o);return fA(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Fr(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await JA(e),s=new LA(e);return t.register("authEvent",o=>(Se(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Md,{type:Md},o=>{const l=o?.[0]?.[Md];l!==void 0&&t(!!l),dr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=BA(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return hv()||iv()||xf()}}const h1=c1;var vy="@firebase/auth",wy="1.12.0";class d1{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function f1(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function p1(r){Do(new Si("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:f}=s.options;Se(h&&!h.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:h,authDomain:f,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:dv(r)},y=new qS(s,o,l,g);return XS(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Do(new Si("auth-internal",e=>{const t=Oc(e.getProvider("auth").getImmediate());return(s=>new d1(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),xs(vy,wy,f1(r)),xs(vy,wy,"esm2020")}const m1=300,g1=z_("authIdTokenMaxAge")||m1;let Ey=null;const y1=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>g1)return;const o=t?.token;Ey!==o&&(Ey=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function _1(r=K_()){const e=Af(r,"auth");if(e.isInitialized())return e.getImmediate();const t=QS(r,{popupRedirectResolver:h1,persistence:[TA,cA,vv]}),s=z_("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const h=y1(l.toString());iA(t,h,()=>h(t.currentUser)),sA(t,f=>h(f))}}const o=U_("auth");return o&&YS(t,`http://${o}`),t}function v1(){return document.getElementsByTagName("head")?.[0]??document}WS({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const l=Un("internal-error");l.customData=o,t(l)},s.type="text/javascript",s.charset="UTF-8",v1().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});p1("Browser");var Ty=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ds,Rv;(function(){var r;function e(I,S){function R(){}R.prototype=S.prototype,I.F=S.prototype,I.prototype=new R,I.prototype.constructor=I,I.D=function(x,N,D){for(var P=Array(arguments.length-2),ce=2;ce<arguments.length;ce++)P[ce-2]=arguments[ce];return S.prototype[N].apply(x,P)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(I,S,R){R||(R=0);const x=Array(16);if(typeof S=="string")for(var N=0;N<16;++N)x[N]=S.charCodeAt(R++)|S.charCodeAt(R++)<<8|S.charCodeAt(R++)<<16|S.charCodeAt(R++)<<24;else for(N=0;N<16;++N)x[N]=S[R++]|S[R++]<<8|S[R++]<<16|S[R++]<<24;S=I.g[0],R=I.g[1],N=I.g[2];let D=I.g[3],P;P=S+(D^R&(N^D))+x[0]+3614090360&4294967295,S=R+(P<<7&4294967295|P>>>25),P=D+(N^S&(R^N))+x[1]+3905402710&4294967295,D=S+(P<<12&4294967295|P>>>20),P=N+(R^D&(S^R))+x[2]+606105819&4294967295,N=D+(P<<17&4294967295|P>>>15),P=R+(S^N&(D^S))+x[3]+3250441966&4294967295,R=N+(P<<22&4294967295|P>>>10),P=S+(D^R&(N^D))+x[4]+4118548399&4294967295,S=R+(P<<7&4294967295|P>>>25),P=D+(N^S&(R^N))+x[5]+1200080426&4294967295,D=S+(P<<12&4294967295|P>>>20),P=N+(R^D&(S^R))+x[6]+2821735955&4294967295,N=D+(P<<17&4294967295|P>>>15),P=R+(S^N&(D^S))+x[7]+4249261313&4294967295,R=N+(P<<22&4294967295|P>>>10),P=S+(D^R&(N^D))+x[8]+1770035416&4294967295,S=R+(P<<7&4294967295|P>>>25),P=D+(N^S&(R^N))+x[9]+2336552879&4294967295,D=S+(P<<12&4294967295|P>>>20),P=N+(R^D&(S^R))+x[10]+4294925233&4294967295,N=D+(P<<17&4294967295|P>>>15),P=R+(S^N&(D^S))+x[11]+2304563134&4294967295,R=N+(P<<22&4294967295|P>>>10),P=S+(D^R&(N^D))+x[12]+1804603682&4294967295,S=R+(P<<7&4294967295|P>>>25),P=D+(N^S&(R^N))+x[13]+4254626195&4294967295,D=S+(P<<12&4294967295|P>>>20),P=N+(R^D&(S^R))+x[14]+2792965006&4294967295,N=D+(P<<17&4294967295|P>>>15),P=R+(S^N&(D^S))+x[15]+1236535329&4294967295,R=N+(P<<22&4294967295|P>>>10),P=S+(N^D&(R^N))+x[1]+4129170786&4294967295,S=R+(P<<5&4294967295|P>>>27),P=D+(R^N&(S^R))+x[6]+3225465664&4294967295,D=S+(P<<9&4294967295|P>>>23),P=N+(S^R&(D^S))+x[11]+643717713&4294967295,N=D+(P<<14&4294967295|P>>>18),P=R+(D^S&(N^D))+x[0]+3921069994&4294967295,R=N+(P<<20&4294967295|P>>>12),P=S+(N^D&(R^N))+x[5]+3593408605&4294967295,S=R+(P<<5&4294967295|P>>>27),P=D+(R^N&(S^R))+x[10]+38016083&4294967295,D=S+(P<<9&4294967295|P>>>23),P=N+(S^R&(D^S))+x[15]+3634488961&4294967295,N=D+(P<<14&4294967295|P>>>18),P=R+(D^S&(N^D))+x[4]+3889429448&4294967295,R=N+(P<<20&4294967295|P>>>12),P=S+(N^D&(R^N))+x[9]+568446438&4294967295,S=R+(P<<5&4294967295|P>>>27),P=D+(R^N&(S^R))+x[14]+3275163606&4294967295,D=S+(P<<9&4294967295|P>>>23),P=N+(S^R&(D^S))+x[3]+4107603335&4294967295,N=D+(P<<14&4294967295|P>>>18),P=R+(D^S&(N^D))+x[8]+1163531501&4294967295,R=N+(P<<20&4294967295|P>>>12),P=S+(N^D&(R^N))+x[13]+2850285829&4294967295,S=R+(P<<5&4294967295|P>>>27),P=D+(R^N&(S^R))+x[2]+4243563512&4294967295,D=S+(P<<9&4294967295|P>>>23),P=N+(S^R&(D^S))+x[7]+1735328473&4294967295,N=D+(P<<14&4294967295|P>>>18),P=R+(D^S&(N^D))+x[12]+2368359562&4294967295,R=N+(P<<20&4294967295|P>>>12),P=S+(R^N^D)+x[5]+4294588738&4294967295,S=R+(P<<4&4294967295|P>>>28),P=D+(S^R^N)+x[8]+2272392833&4294967295,D=S+(P<<11&4294967295|P>>>21),P=N+(D^S^R)+x[11]+1839030562&4294967295,N=D+(P<<16&4294967295|P>>>16),P=R+(N^D^S)+x[14]+4259657740&4294967295,R=N+(P<<23&4294967295|P>>>9),P=S+(R^N^D)+x[1]+2763975236&4294967295,S=R+(P<<4&4294967295|P>>>28),P=D+(S^R^N)+x[4]+1272893353&4294967295,D=S+(P<<11&4294967295|P>>>21),P=N+(D^S^R)+x[7]+4139469664&4294967295,N=D+(P<<16&4294967295|P>>>16),P=R+(N^D^S)+x[10]+3200236656&4294967295,R=N+(P<<23&4294967295|P>>>9),P=S+(R^N^D)+x[13]+681279174&4294967295,S=R+(P<<4&4294967295|P>>>28),P=D+(S^R^N)+x[0]+3936430074&4294967295,D=S+(P<<11&4294967295|P>>>21),P=N+(D^S^R)+x[3]+3572445317&4294967295,N=D+(P<<16&4294967295|P>>>16),P=R+(N^D^S)+x[6]+76029189&4294967295,R=N+(P<<23&4294967295|P>>>9),P=S+(R^N^D)+x[9]+3654602809&4294967295,S=R+(P<<4&4294967295|P>>>28),P=D+(S^R^N)+x[12]+3873151461&4294967295,D=S+(P<<11&4294967295|P>>>21),P=N+(D^S^R)+x[15]+530742520&4294967295,N=D+(P<<16&4294967295|P>>>16),P=R+(N^D^S)+x[2]+3299628645&4294967295,R=N+(P<<23&4294967295|P>>>9),P=S+(N^(R|~D))+x[0]+4096336452&4294967295,S=R+(P<<6&4294967295|P>>>26),P=D+(R^(S|~N))+x[7]+1126891415&4294967295,D=S+(P<<10&4294967295|P>>>22),P=N+(S^(D|~R))+x[14]+2878612391&4294967295,N=D+(P<<15&4294967295|P>>>17),P=R+(D^(N|~S))+x[5]+4237533241&4294967295,R=N+(P<<21&4294967295|P>>>11),P=S+(N^(R|~D))+x[12]+1700485571&4294967295,S=R+(P<<6&4294967295|P>>>26),P=D+(R^(S|~N))+x[3]+2399980690&4294967295,D=S+(P<<10&4294967295|P>>>22),P=N+(S^(D|~R))+x[10]+4293915773&4294967295,N=D+(P<<15&4294967295|P>>>17),P=R+(D^(N|~S))+x[1]+2240044497&4294967295,R=N+(P<<21&4294967295|P>>>11),P=S+(N^(R|~D))+x[8]+1873313359&4294967295,S=R+(P<<6&4294967295|P>>>26),P=D+(R^(S|~N))+x[15]+4264355552&4294967295,D=S+(P<<10&4294967295|P>>>22),P=N+(S^(D|~R))+x[6]+2734768916&4294967295,N=D+(P<<15&4294967295|P>>>17),P=R+(D^(N|~S))+x[13]+1309151649&4294967295,R=N+(P<<21&4294967295|P>>>11),P=S+(N^(R|~D))+x[4]+4149444226&4294967295,S=R+(P<<6&4294967295|P>>>26),P=D+(R^(S|~N))+x[11]+3174756917&4294967295,D=S+(P<<10&4294967295|P>>>22),P=N+(S^(D|~R))+x[2]+718787259&4294967295,N=D+(P<<15&4294967295|P>>>17),P=R+(D^(N|~S))+x[9]+3951481745&4294967295,I.g[0]=I.g[0]+S&4294967295,I.g[1]=I.g[1]+(N+(P<<21&4294967295|P>>>11))&4294967295,I.g[2]=I.g[2]+N&4294967295,I.g[3]=I.g[3]+D&4294967295}s.prototype.v=function(I,S){S===void 0&&(S=I.length);const R=S-this.blockSize,x=this.C;let N=this.h,D=0;for(;D<S;){if(N==0)for(;D<=R;)o(this,I,D),D+=this.blockSize;if(typeof I=="string"){for(;D<S;)if(x[N++]=I.charCodeAt(D++),N==this.blockSize){o(this,x),N=0;break}}else for(;D<S;)if(x[N++]=I[D++],N==this.blockSize){o(this,x),N=0;break}}this.h=N,this.o+=S},s.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var S=1;S<I.length-8;++S)I[S]=0;S=this.o*8;for(var R=I.length-8;R<I.length;++R)I[R]=S&255,S/=256;for(this.v(I),I=Array(16),S=0,R=0;R<4;++R)for(let x=0;x<32;x+=8)I[S++]=this.g[R]>>>x&255;return I};function l(I,S){var R=f;return Object.prototype.hasOwnProperty.call(R,I)?R[I]:R[I]=S(I)}function h(I,S){this.h=S;const R=[];let x=!0;for(let N=I.length-1;N>=0;N--){const D=I[N]|0;x&&D==S||(R[N]=D,x=!1)}this.g=R}var f={};function g(I){return-128<=I&&I<128?l(I,function(S){return new h([S|0],S<0?-1:0)}):new h([I|0],I<0?-1:0)}function y(I){if(isNaN(I)||!isFinite(I))return E;if(I<0)return b(y(-I));const S=[];let R=1;for(let x=0;I>=R;x++)S[x]=I/R|0,R*=4294967296;return new h(S,0)}function v(I,S){if(I.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(I.charAt(0)=="-")return b(v(I.substring(1),S));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=y(Math.pow(S,8));let x=E;for(let D=0;D<I.length;D+=8){var N=Math.min(8,I.length-D);const P=parseInt(I.substring(D,D+N),S);N<8?(N=y(Math.pow(S,N)),x=x.j(N).add(y(P))):(x=x.j(R),x=x.add(y(P)))}return x}var E=g(0),C=g(1),M=g(16777216);r=h.prototype,r.m=function(){if($(this))return-b(this).m();let I=0,S=1;for(let R=0;R<this.g.length;R++){const x=this.i(R);I+=(x>=0?x:4294967296+x)*S,S*=4294967296}return I},r.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(q(this))return"0";if($(this))return"-"+b(this).toString(I);const S=y(Math.pow(I,6));var R=this;let x="";for(;;){const N=W(R,S).g;R=re(R,N.j(S));let D=((R.g.length>0?R.g[0]:R.h)>>>0).toString(I);if(R=N,q(R))return D+x;for(;D.length<6;)D="0"+D;x=D+x}},r.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function q(I){if(I.h!=0)return!1;for(let S=0;S<I.g.length;S++)if(I.g[S]!=0)return!1;return!0}function $(I){return I.h==-1}r.l=function(I){return I=re(this,I),$(I)?-1:q(I)?0:1};function b(I){const S=I.g.length,R=[];for(let x=0;x<S;x++)R[x]=~I.g[x];return new h(R,~I.h).add(C)}r.abs=function(){return $(this)?b(this):this},r.add=function(I){const S=Math.max(this.g.length,I.g.length),R=[];let x=0;for(let N=0;N<=S;N++){let D=x+(this.i(N)&65535)+(I.i(N)&65535),P=(D>>>16)+(this.i(N)>>>16)+(I.i(N)>>>16);x=P>>>16,D&=65535,P&=65535,R[N]=P<<16|D}return new h(R,R[R.length-1]&-2147483648?-1:0)};function re(I,S){return I.add(b(S))}r.j=function(I){if(q(this)||q(I))return E;if($(this))return $(I)?b(this).j(b(I)):b(b(this).j(I));if($(I))return b(this.j(b(I)));if(this.l(M)<0&&I.l(M)<0)return y(this.m()*I.m());const S=this.g.length+I.g.length,R=[];for(var x=0;x<2*S;x++)R[x]=0;for(x=0;x<this.g.length;x++)for(let N=0;N<I.g.length;N++){const D=this.i(x)>>>16,P=this.i(x)&65535,ce=I.i(N)>>>16,Ve=I.i(N)&65535;R[2*x+2*N]+=P*Ve,se(R,2*x+2*N),R[2*x+2*N+1]+=D*Ve,se(R,2*x+2*N+1),R[2*x+2*N+1]+=P*ce,se(R,2*x+2*N+1),R[2*x+2*N+2]+=D*ce,se(R,2*x+2*N+2)}for(I=0;I<S;I++)R[I]=R[2*I+1]<<16|R[2*I];for(I=S;I<2*S;I++)R[I]=0;return new h(R,0)};function se(I,S){for(;(I[S]&65535)!=I[S];)I[S+1]+=I[S]>>>16,I[S]&=65535,S++}function G(I,S){this.g=I,this.h=S}function W(I,S){if(q(S))throw Error("division by zero");if(q(I))return new G(E,E);if($(I))return S=W(b(I),S),new G(b(S.g),b(S.h));if($(S))return S=W(I,b(S)),new G(b(S.g),S.h);if(I.g.length>30){if($(I)||$(S))throw Error("slowDivide_ only works with positive integers.");for(var R=C,x=S;x.l(I)<=0;)R=te(R),x=te(x);var N=ie(R,1),D=ie(x,1);for(x=ie(x,2),R=ie(R,2);!q(x);){var P=D.add(x);P.l(I)<=0&&(N=N.add(R),D=P),x=ie(x,1),R=ie(R,1)}return S=re(I,N.j(S)),new G(N,S)}for(N=E;I.l(S)>=0;){for(R=Math.max(1,Math.floor(I.m()/S.m())),x=Math.ceil(Math.log(R)/Math.LN2),x=x<=48?1:Math.pow(2,x-48),D=y(R),P=D.j(S);$(P)||P.l(I)>0;)R-=x,D=y(R),P=D.j(S);q(D)&&(D=C),N=N.add(D),I=re(I,P)}return new G(N,I)}r.B=function(I){return W(this,I).h},r.and=function(I){const S=Math.max(this.g.length,I.g.length),R=[];for(let x=0;x<S;x++)R[x]=this.i(x)&I.i(x);return new h(R,this.h&I.h)},r.or=function(I){const S=Math.max(this.g.length,I.g.length),R=[];for(let x=0;x<S;x++)R[x]=this.i(x)|I.i(x);return new h(R,this.h|I.h)},r.xor=function(I){const S=Math.max(this.g.length,I.g.length),R=[];for(let x=0;x<S;x++)R[x]=this.i(x)^I.i(x);return new h(R,this.h^I.h)};function te(I){const S=I.g.length+1,R=[];for(let x=0;x<S;x++)R[x]=I.i(x)<<1|I.i(x-1)>>>31;return new h(R,I.h)}function ie(I,S){const R=S>>5;S%=32;const x=I.g.length-R,N=[];for(let D=0;D<x;D++)N[D]=S>0?I.i(D+R)>>>S|I.i(D+R+1)<<32-S:I.i(D+R);return new h(N,I.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Rv=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=v,Ds=h}).apply(typeof Ty<"u"?Ty:typeof self<"u"?self:typeof window<"u"?window:{});var Wu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Pv,Wa,kv,tc,tf,Nv,xv,Dv;(function(){var r,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wu=="object"&&Wu];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=t(this);function o(u,m){if(m)e:{var _=s;u=u.split(".");for(var T=0;T<u.length-1;T++){var F=u[T];if(!(F in _))break e;_=_[F]}u=u[u.length-1],T=_[u],m=m(T),m!=T&&m!=null&&e(_,u,{configurable:!0,writable:!0,value:m})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(m){var _=[],T;for(T in m)Object.prototype.hasOwnProperty.call(m,T)&&_.push([T,m[T]]);return _}});var l=l||{},h=this||self;function f(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function g(u,m,_){return u.call.apply(u.bind,arguments)}function y(u,m,_){return y=g,y.apply(null,arguments)}function v(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var T=_.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function E(u,m){function _(){}_.prototype=m.prototype,u.Z=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Ob=function(T,F,z){for(var ne=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)ne[Ne-2]=arguments[Ne];return m.prototype[F].apply(T,ne)}}var C=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function M(u){const m=u.length;if(m>0){const _=Array(m);for(let T=0;T<m;T++)_[T]=u[T];return _}return[]}function q(u,m){for(let T=1;T<arguments.length;T++){const F=arguments[T];var _=typeof F;if(_=_!="object"?_:F?Array.isArray(F)?"array":_:"null",_=="array"||_=="object"&&typeof F.length=="number"){_=u.length||0;const z=F.length||0;u.length=_+z;for(let ne=0;ne<z;ne++)u[_+ne]=F[ne]}else u.push(F)}}class ${constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function b(u){h.setTimeout(()=>{throw u},0)}function re(){var u=I;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class se{constructor(){this.h=this.g=null}add(m,_){const T=G.get();T.set(m,_),this.h?this.h.next=T:this.g=T,this.h=T}}var G=new $(()=>new W,u=>u.reset());class W{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let te,ie=!1,I=new se,S=()=>{const u=Promise.resolve(void 0);te=()=>{u.then(R)}};function R(){for(var u;u=re();){try{u.h.call(u.g)}catch(_){b(_)}var m=G;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}ie=!1}function x(){this.u=this.u,this.C=this.C}x.prototype.u=!1,x.prototype.dispose=function(){this.u||(this.u=!0,this.N())},x.prototype[Symbol.dispose]=function(){this.dispose()},x.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var D=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};h.addEventListener("test",_,m),h.removeEventListener("test",_,m)}catch{}return u})();function P(u){return/^[\s\xa0]*$/.test(u)}function ce(u,m){N.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}E(ce,N),ce.prototype.init=function(u,m){const _=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(_=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&ce.Z.h.call(this)},ce.prototype.h=function(){ce.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ve="closure_listenable_"+(Math.random()*1e6|0),Ue=0;function Pe(u,m,_,T,F){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!T,this.ha=F,this.key=++Ue,this.da=this.fa=!1}function Z(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ge(u,m,_){for(const T in u)m.call(_,u[T],T,u)}function ae(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function L(u){const m={};for(const _ in u)m[_]=u[_];return m}const Q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ae(u,m){let _,T;for(let F=1;F<arguments.length;F++){T=arguments[F];for(_ in T)u[_]=T[_];for(let z=0;z<Q.length;z++)_=Q[z],Object.prototype.hasOwnProperty.call(T,_)&&(u[_]=T[_])}}function ke(u){this.src=u,this.g={},this.h=0}ke.prototype.add=function(u,m,_,T,F){const z=u.toString();u=this.g[z],u||(u=this.g[z]=[],this.h++);const ne=De(u,m,T,F);return ne>-1?(m=u[ne],_||(m.fa=!1)):(m=new Pe(m,this.src,z,!!T,F),m.fa=_,u.push(m)),m};function xe(u,m){const _=m.type;if(_ in u.g){var T=u.g[_],F=Array.prototype.indexOf.call(T,m,void 0),z;(z=F>=0)&&Array.prototype.splice.call(T,F,1),z&&(Z(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function De(u,m,_,T){for(let F=0;F<u.length;++F){const z=u[F];if(!z.da&&z.listener==m&&z.capture==!!_&&z.ha==T)return F}return-1}var $e="closure_lm_"+(Math.random()*1e6|0),je={};function Ge(u,m,_,T,F){if(Array.isArray(m)){for(let z=0;z<m.length;z++)Ge(u,m[z],_,T,F);return null}return _=Yo(_),u&&u[Ve]?u.J(m,_,f(T)?!!T.capture:!1,F):Ct(u,m,_,!1,T,F)}function Ct(u,m,_,T,F,z){if(!m)throw Error("Invalid event type");const ne=f(F)?!!F.capture:!!F;let Ne=Oi(u);if(Ne||(u[$e]=Ne=new ke(u)),_=Ne.add(m,_,T,ne,z),_.proxy)return _;if(T=vn(),_.proxy=T,T.src=u,T.listener=_,u.addEventListener)D||(F=ne),F===void 0&&(F=!1),u.addEventListener(m.toString(),T,F);else if(u.attachEvent)u.attachEvent(Vi(m.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return _}function vn(){function u(_){return m.call(u.src,u.listener,_)}const m=Pl;return u}function Xo(u,m,_,T,F){if(Array.isArray(m))for(var z=0;z<m.length;z++)Xo(u,m[z],_,T,F);else T=f(T)?!!T.capture:!!T,_=Yo(_),u&&u[Ve]?(u=u.i,z=String(m).toString(),z in u.g&&(m=u.g[z],_=De(m,_,T,F),_>-1&&(Z(m[_]),Array.prototype.splice.call(m,_,1),m.length==0&&(delete u.g[z],u.h--)))):u&&(u=Oi(u))&&(m=u.g[m.toString()],u=-1,m&&(u=De(m,_,T,F)),(_=u>-1?m[u]:null)&&Wr(_))}function Wr(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Ve])xe(m.i,u);else{var _=u.type,T=u.proxy;m.removeEventListener?m.removeEventListener(_,T,u.capture):m.detachEvent?m.detachEvent(Vi(_),T):m.addListener&&m.removeListener&&m.removeListener(T),(_=Oi(m))?(xe(_,u),_.h==0&&(_.src=null,m[$e]=null)):Z(u)}}}function Vi(u){return u in je?je[u]:je[u]="on"+u}function Pl(u,m){if(u.da)u=!0;else{m=new ce(m,this);const _=u.listener,T=u.ha||u.src;u.fa&&Wr(u),u=_.call(T,m)}return u}function Oi(u){return u=u[$e],u instanceof ke?u:null}var Hs="__closure_events_fn_"+(Math.random()*1e9>>>0);function Yo(u){return typeof u=="function"?u:(u[Hs]||(u[Hs]=function(m){return u.handleEvent(m)}),u[Hs])}function mt(){x.call(this),this.i=new ke(this),this.M=this,this.G=null}E(mt,x),mt.prototype[Ve]=!0,mt.prototype.removeEventListener=function(u,m,_,T){Xo(this,u,m,_,T)};function ut(u,m){var _,T=u.G;if(T)for(_=[];T;T=T.G)_.push(T);if(u=u.M,T=m.type||m,typeof m=="string")m=new N(m,u);else if(m instanceof N)m.target=m.target||u;else{var F=m;m=new N(T,u),Ae(m,F)}F=!0;let z,ne;if(_)for(ne=_.length-1;ne>=0;ne--)z=m.g=_[ne],F=Pn(z,T,!0,m)&&F;if(z=m.g=u,F=Pn(z,T,!0,m)&&F,F=Pn(z,T,!1,m)&&F,_)for(ne=0;ne<_.length;ne++)z=m.g=_[ne],F=Pn(z,T,!1,m)&&F}mt.prototype.N=function(){if(mt.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const _=u.g[m];for(let T=0;T<_.length;T++)Z(_[T]);delete u.g[m],u.h--}}this.G=null},mt.prototype.J=function(u,m,_,T){return this.i.add(String(u),m,!1,_,T)},mt.prototype.K=function(u,m,_,T){return this.i.add(String(u),m,!0,_,T)};function Pn(u,m,_,T){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let F=!0;for(let z=0;z<m.length;++z){const ne=m[z];if(ne&&!ne.da&&ne.capture==_){const Ne=ne.listener,ct=ne.ha||ne.src;ne.fa&&xe(u.i,ne),F=Ne.call(ct,T)!==!1&&F}}return F&&!T.defaultPrevented}function Jo(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=y(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:h.setTimeout(u,m||0)}function Zo(u){u.g=Jo(()=>{u.g=null,u.i&&(u.i=!1,Zo(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class kl extends x{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Zo(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Hr(u){x.call(this),this.h=u,this.g={}}E(Hr,x);var ea=[];function Mi(u){ge(u.g,function(m,_){this.g.hasOwnProperty(_)&&Wr(m)},u),u.g={}}Hr.prototype.N=function(){Hr.Z.N.call(this),Mi(this)},Hr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gr=h.JSON.stringify,Nl=h.JSON.parse,Gs=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function Kr(){}function xl(){}var Qr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Li(){N.call(this,"d")}E(Li,N);function ta(){N.call(this,"c")}E(ta,N);var kn={},bi=null;function Xr(){return bi=bi||new mt}kn.Ia="serverreachability";function ji(u){N.call(this,kn.Ia,u)}E(ji,N);function pr(u){const m=Xr();ut(m,new ji(m))}kn.STAT_EVENT="statevent";function mr(u,m){N.call(this,kn.STAT_EVENT,u),this.stat=m}E(mr,N);function at(u){const m=Xr();ut(m,new mr(m,u))}kn.Ja="timingevent";function na(u,m){N.call(this,kn.Ja,u),this.size=m}E(na,N);function Yr(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},m)}function Jr(){this.g=!0}Jr.prototype.ua=function(){this.g=!1};function Dl(u,m,_,T,F,z){u.info(function(){if(u.g)if(z){var ne="",Ne=z.split("&");for(let Ke=0;Ke<Ne.length;Ke++){var ct=Ne[Ke].split("=");if(ct.length>1){const gt=ct[0];ct=ct[1];const hn=gt.split("_");ne=hn.length>=2&&hn[1]=="type"?ne+(gt+"="+ct+"&"):ne+(gt+"=redacted&")}}}else ne=null;else ne=z;return"XMLHTTP REQ ("+T+") [attempt "+F+"]: "+m+`
`+_+`
`+ne})}function Vl(u,m,_,T,F,z,ne){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+F+"]: "+m+`
`+_+`
`+z+" "+ne})}function zn(u,m,_,T){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Ks(u,_)+(T?" "+T:"")})}function Ol(u,m){u.info(function(){return"TIMEOUT: "+m})}Jr.prototype.info=function(){};function Ks(u,m){if(!u.g)return m;if(!m)return null;try{const z=JSON.parse(m);if(z){for(u=0;u<z.length;u++)if(Array.isArray(z[u])){var _=z[u];if(!(_.length<2)){var T=_[1];if(Array.isArray(T)&&!(T.length<1)){var F=T[0];if(F!="noop"&&F!="stop"&&F!="close")for(let ne=1;ne<T.length;ne++)T[ne]=""}}}}return Gr(z)}catch{return m}}var Zr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},es={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ml;function gr(){}E(gr,Kr),gr.prototype.g=function(){return new XMLHttpRequest},Ml=new gr;function $n(u){return encodeURIComponent(String(u))}function Fi(u){var m=1;u=u.split(":");const _=[];for(;m>0&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function wn(u,m,_,T){this.j=u,this.i=m,this.l=_,this.S=T||1,this.V=new Hr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ll}function Ll(){this.i=null,this.g="",this.h=!1}var bl={},ra={};function Nn(u,m,_){u.M=1,u.A=_r(En(m)),u.u=_,u.R=!0,sa(u,null)}function sa(u,m){u.F=Date.now(),Qs(u),u.B=En(u.A);var _=u.B,T=u.S;Array.isArray(T)||(T=[String(T)]),pa(_.i,"t",T),u.C=0,_=u.j.L,u.h=new Ll,u.g=Gl(u.j,_?m:null,!u.u),u.P>0&&(u.O=new kl(y(u.Y,u,u.g),u.P)),m=u.V,_=u.g,T=u.ba;var F="readystatechange";Array.isArray(F)||(F&&(ea[0]=F.toString()),F=ea);for(let z=0;z<F.length;z++){const ne=Ge(_,F[z],T||m.handleEvent,!1,m.h||m);if(!ne)break;m.g[ne.key]=ne}m=u.J?L(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),pr(),Dl(u.i,u.v,u.B,u.l,u.S,u.u)}wn.prototype.ba=function(u){u=u.target;const m=this.O;m&&Xn(u)==3?m.j():this.Y(u)},wn.prototype.Y=function(u){try{if(u==this.g)e:{const Ne=Xn(this.g),ct=this.g.ya(),Ke=this.g.ca();if(!(Ne<3)&&(Ne!=3||this.g&&(this.h.h||this.g.la()||Wl(this.g)))){this.K||Ne!=4||ct==7||(ct==8||Ke<=0?pr(3):pr(2)),Ui(this);var m=this.g.ca();this.X=m;var _=jl(this);if(this.o=m==200,Vl(this.i,this.v,this.B,this.l,this.S,Ne,m),this.o){if(this.U&&!this.L){t:{if(this.g){var T,F=this.g;if((T=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(T)){var z=T;break t}}z=null}if(u=z)zn(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ze(this,u);else{this.o=!1,this.m=3,at(12),yr(this),Xs(this);break e}}if(this.R){u=!0;let gt;for(;!this.K&&this.C<_.length;)if(gt=Ul(this,_),gt==ra){Ne==4&&(this.m=4,at(14),u=!1),zn(this.i,this.l,null,"[Incomplete Response]");break}else if(gt==bl){this.m=4,at(15),zn(this.i,this.l,_,"[Invalid Chunk]"),u=!1;break}else zn(this.i,this.l,gt,null),Ze(this,gt);if(Fl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ne!=4||_.length!=0||this.h.h||(this.m=1,at(16),u=!1),this.o=this.o&&u,!u)zn(this.i,this.l,_,"[Invalid Chunked Response]"),yr(this),Xs(this);else if(_.length>0&&!this.W){this.W=!0;var ne=this.j;ne.g==this&&ne.aa&&!ne.P&&(ne.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),ii(ne),ne.P=!0,at(11))}}else zn(this.i,this.l,_,null),Ze(this,_);Ne==4&&yr(this),this.o&&!this.K&&(Ne==4?Xi(this.j,this):(this.o=!1,Qs(this)))}else ga(this.g),m==400&&_.indexOf("Unknown SID")>0?(this.m=3,at(12)):(this.m=0,at(13)),yr(this),Xs(this)}}}catch{}};function jl(u){if(!Fl(u))return u.g.la();const m=Wl(u.g);if(m==="")return"";let _="";const T=m.length,F=Xn(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return yr(u),Xs(u),"";u.h.i=new h.TextDecoder}for(let z=0;z<T;z++)u.h.h=!0,_+=u.h.i.decode(m[z],{stream:!(F&&z==T-1)});return m.length=0,u.h.g+=_,u.C=0,u.h.g}function Fl(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Ul(u,m){var _=u.C,T=m.indexOf(`
`,_);return T==-1?ra:(_=Number(m.substring(_,T)),isNaN(_)?bl:(T+=1,T+_>m.length?ra:(m=m.slice(T,T+_),u.C=T+_,m)))}wn.prototype.cancel=function(){this.K=!0,yr(this)};function Qs(u){u.T=Date.now()+u.H,ia(u,u.H)}function ia(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Yr(y(u.aa,u),m)}function Ui(u){u.D&&(h.clearTimeout(u.D),u.D=null)}wn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Ol(this.i,this.B),this.M!=2&&(pr(),at(17)),yr(this),this.m=2,Xs(this)):ia(this,this.T-u)};function Xs(u){u.j.I==0||u.K||Xi(u.j,u)}function yr(u){Ui(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,Mi(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function Ze(u,m){try{var _=u.j;if(_.I!=0&&(_.g==u||aa(_.h,u))){if(!u.L&&aa(_.h,u)&&_.I==3){try{var T=_.Ba.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var F=T;if(F[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<u.F)Qi(_),un(_);else break e;Zn(_),at(18)}}else _.xa=F[1],0<_.xa-_.K&&F[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=Yr(y(_.Va,_),6e3));Ys(_.h)<=1&&_.ta&&(_.ta=void 0)}else cn(_,11)}else if((u.L||_.g==u)&&Qi(_),!P(m))for(F=_.Ba.g.parse(m),m=0;m<F.length;m++){let Ke=F[m];const gt=Ke[0];if(!(gt<=_.K))if(_.K=gt,Ke=Ke[1],_.I==2)if(Ke[0]=="c"){_.M=Ke[1],_.ba=Ke[2];const hn=Ke[3];hn!=null&&(_.ka=hn,_.j.info("VER="+_.ka));const Ir=Ke[4];Ir!=null&&(_.za=Ir,_.j.info("SVER="+_.za));const er=Ke[5];er!=null&&typeof er=="number"&&er>0&&(T=1.5*er,_.O=T,_.j.info("backChannelRequestTimeoutMs_="+T)),T=_;const tr=u.g;if(tr){const Zi=tr.g?tr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Zi){var z=T.h;z.g||Zi.indexOf("spdy")==-1&&Zi.indexOf("quic")==-1&&Zi.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(zi(z,z.h),z.h=null))}if(T.G){const va=tr.g?tr.g.getResponseHeader("X-HTTP-Session-Id"):null;va&&(T.wa=va,He(T.J,T.G,va))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-u.F,_.j.info("Handshake RTT: "+_.T+"ms")),T=_;var ne=u;if(T.na=_a(T,T.L?T.ba:null,T.W),ne.L){Js(T.h,ne);var Ne=ne,ct=T.O;ct&&(Ne.H=ct),Ne.D&&(Ui(Ne),Qs(Ne)),T.g=ne}else Ut(T);_.i.length>0&&Tr(_)}else Ke[0]!="stop"&&Ke[0]!="close"||cn(_,7);else _.I==3&&(Ke[0]=="stop"||Ke[0]=="close"?Ke[0]=="stop"?cn(_,7):Gi(_):Ke[0]!="noop"&&_.l&&_.l.qa(Ke),_.A=0)}}pr(4)}catch{}}var eh=class{constructor(u,m){this.g=u,this.map=m}};function Bi(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function oa(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Ys(u){return u.h?1:u.g?u.g.size:0}function aa(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function zi(u,m){u.g?u.g.add(m):u.h=m}function Js(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Bi.prototype.cancel=function(){if(this.i=on(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function on(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.G);return m}return M(u.i)}var Bl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function an(u,m){if(u){u=u.split("&");for(let _=0;_<u.length;_++){const T=u[_].indexOf("=");let F,z=null;T>=0?(F=u[_].substring(0,T),z=u[_].substring(T+1)):F=u[_],m(F,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function qn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof qn?(this.l=u.l,Zs(this,u.j),this.o=u.o,this.g=u.g,Wn(this,u.u),this.h=u.h,ts(this,ma(u.i)),this.m=u.m):u&&(m=String(u).match(Bl))?(this.l=!1,Zs(this,m[1]||"",!0),this.o=ei(m[2]||""),this.g=ei(m[3]||"",!0),Wn(this,m[4]),this.h=ei(m[5]||"",!0),ts(this,m[6]||"",!0),this.m=ei(m[7]||"")):(this.l=!1,this.i=new Fe(null,this.l))}qn.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(ti(m,ua,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(ti(m,ua,!0),"@"),u.push($n(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&u.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(ti(_,_.charAt(0)=="/"?ni:ca,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",ti(_,ha)),u.join("")},qn.prototype.resolve=function(u){const m=En(this);let _=!!u.j;_?Zs(m,u.j):_=!!u.o,_?m.o=u.o:_=!!u.g,_?m.g=u.g:_=u.u!=null;var T=u.h;if(_)Wn(m,u.u);else if(_=!!u.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var F=m.h.lastIndexOf("/");F!=-1&&(T=m.h.slice(0,F+1)+T)}if(F=T,F==".."||F==".")T="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){T=F.lastIndexOf("/",0)==0,F=F.split("/");const z=[];for(let ne=0;ne<F.length;){const Ne=F[ne++];Ne=="."?T&&ne==F.length&&z.push(""):Ne==".."?((z.length>1||z.length==1&&z[0]!="")&&z.pop(),T&&ne==F.length&&z.push("")):(z.push(Ne),T=!0)}T=z.join("/")}else T=F}return _?m.h=T:_=u.i.toString()!=="",_?ts(m,ma(u.i)):_=!!u.m,_&&(m.m=u.m),m};function En(u){return new qn(u)}function Zs(u,m,_){u.j=_?ei(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Wn(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function ts(u,m,_){m instanceof Fe?(u.i=m,qi(u.i,u.l)):(_||(m=ti(m,th)),u.i=new Fe(m,u.l))}function He(u,m,_){u.i.set(m,_)}function _r(u){return He(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function ei(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ti(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,la),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function la(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var ua=/[#\/\?@]/g,ca=/[#\?:]/g,ni=/[#\?]/g,th=/[#\?@]/g,ha=/#/g;function Fe(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Hn(u){u.g||(u.g=new Map,u.h=0,u.i&&an(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}r=Fe.prototype,r.add=function(u,m){Hn(this),this.i=null,u=Gn(this,u);let _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function da(u,m){Hn(u),m=Gn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function $i(u,m){return Hn(u),m=Gn(u,m),u.g.has(m)}r.forEach=function(u,m){Hn(this),this.g.forEach(function(_,T){_.forEach(function(F){u.call(m,F,T,this)},this)},this)};function fa(u,m){Hn(u);let _=[];if(typeof m=="string")$i(u,m)&&(_=_.concat(u.g.get(Gn(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)_=_.concat(u[m]);return _}r.set=function(u,m){return Hn(this),this.i=null,u=Gn(this,u),$i(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=fa(this,u),u.length>0?String(u[0]):m):m};function pa(u,m,_){da(u,m),_.length>0&&(u.i=null,u.g.set(Gn(u,m),M(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let T=0;T<m.length;T++){var _=m[T];const F=$n(_);_=fa(this,_);for(let z=0;z<_.length;z++){let ne=F;_[z]!==""&&(ne+="="+$n(_[z])),u.push(ne)}}return this.i=u.join("&")};function ma(u){const m=new Fe;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function Gn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function qi(u,m){m&&!u.j&&(Hn(u),u.i=null,u.g.forEach(function(_,T){const F=T.toLowerCase();T!=F&&(da(this,T),pa(this,F,_))},u)),u.j=m}function Kn(u,m){const _=new Jr;if(h.Image){const T=new Image;T.onload=v(Dt,_,"TestLoadImage: loaded",!0,m,T),T.onerror=v(Dt,_,"TestLoadImage: error",!1,m,T),T.onabort=v(Dt,_,"TestLoadImage: abort",!1,m,T),T.ontimeout=v(Dt,_,"TestLoadImage: timeout",!1,m,T),h.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else m(!1)}function Qn(u,m){const _=new Jr,T=new AbortController,F=setTimeout(()=>{T.abort(),Dt(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:T.signal}).then(z=>{clearTimeout(F),z.ok?Dt(_,"TestPingServer: ok",!0,m):Dt(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(F),Dt(_,"TestPingServer: error",!1,m)})}function Dt(u,m,_,T,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),T(_)}catch{}}function ri(){this.g=new Gs}function vr(u){this.i=u.Sb||null,this.h=u.ab||!1}E(vr,Kr),vr.prototype.g=function(){return new ln(this.i,this.h)};function ln(u,m){mt.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(ln,mt),r=ln.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,xn(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||h).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ns(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,xn(this)),this.g&&(this.readyState=3,xn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;zl(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function zl(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?ns(this):xn(this),this.readyState==3&&zl(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,ns(this))},r.Na=function(u){this.g&&(this.response=u,ns(this))},r.ga=function(){this.g&&ns(this)};function ns(u){u.readyState=4,u.l=null,u.j=null,u.B=null,xn(u)}r.setRequestHeader=function(u,m){this.A.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function xn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(ln.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function $l(u){let m="";return ge(u,function(_,T){m+=T,m+=":",m+=_,m+=`\r
`}),m}function Wi(u,m,_){e:{for(T in _){var T=!1;break e}T=!0}T||(_=$l(_),typeof u=="string"?_!=null&&$n(_):He(u,m,_))}function Xe(u){mt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(Xe,mt);var ql=/^https?$/i,nh=["POST","PUT"];r=Xe.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,m,_,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ml.g(),this.g.onreadystatechange=C(y(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(z){rs(this,z);return}if(u=_||"",_=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var F in T)_.set(F,T[F]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const z of T.keys())_.set(z,T.get(z));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(_.keys()).find(z=>z.toLowerCase()=="content-type"),F=h.FormData&&u instanceof h.FormData,!(Array.prototype.indexOf.call(nh,m,void 0)>=0)||T||F||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,ne]of _)this.g.setRequestHeader(z,ne);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(z){rs(this,z)}};function rs(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,ss(u),Er(u)}function ss(u){u.A||(u.A=!0,ut(u,"complete"),ut(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,ut(this,"complete"),ut(this,"abort"),Er(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Er(this,!0)),Xe.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?wr(this):this.Xa())},r.Xa=function(){wr(this)};function wr(u){if(u.h&&typeof l<"u"){if(u.v&&Xn(u)==4)setTimeout(u.Ca.bind(u),0);else if(ut(u,"readystatechange"),Xn(u)==4){u.h=!1;try{const z=u.ca();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var T;if(T=z===0){let ne=String(u.D).match(Bl)[1]||null;!ne&&h.self&&h.self.location&&(ne=h.self.location.protocol.slice(0,-1)),T=!ql.test(ne?ne.toLowerCase():"")}_=T}if(_)ut(u,"complete"),ut(u,"success");else{u.o=6;try{var F=Xn(u)>2?u.g.statusText:""}catch{F=""}u.l=F+" ["+u.ca()+"]",ss(u)}}finally{Er(u)}}}}function Er(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const _=u.g;u.g=null,m||ut(u,"ready");try{_.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Xn(u){return u.g?u.g.readyState:0}r.ca=function(){try{return Xn(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Nl(m)}};function Wl(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function ga(u){const m={};u=(u.g&&Xn(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(P(u[T]))continue;var _=Fi(u[T]);const F=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const z=m[F]||[];m[F]=z,z.push(_)}ae(m,function(T){return T.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Yn(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function Hi(u){this.za=0,this.i=[],this.j=new Jr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Yn("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Yn("baseRetryDelayMs",5e3,u),this.Za=Yn("retryDelaySeedMs",1e4,u),this.Ta=Yn("forwardChannelMaxRetries",2,u),this.va=Yn("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Bi(u&&u.concurrentRequestLimit),this.Ba=new ri,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Hi.prototype,r.ka=8,r.I=1,r.connect=function(u,m,_,T){at(0),this.W=u,this.H=m||{},_&&T!==void 0&&(this.H.OSID=_,this.H.OAID=T),this.F=this.X,this.J=_a(this,null,this.W),Tr(this)};function Gi(u){if(Ki(u),u.I==3){var m=u.V++,_=En(u.J);if(He(_,"SID",u.M),He(_,"RID",m),He(_,"TYPE","terminate"),Jn(u,_),m=new wn(u,u.j,m),m.M=2,m.A=_r(En(_)),_=!1,h.navigator&&h.navigator.sendBeacon)try{_=h.navigator.sendBeacon(m.A.toString(),"")}catch{}!_&&h.Image&&(new Image().src=m.A,_=!0),_||(m.g=Gl(m.j,null),m.g.ea(m.A)),m.F=Date.now(),Qs(m)}oi(u)}function un(u){u.g&&(ii(u),u.g.cancel(),u.g=null)}function Ki(u){un(u),u.v&&(h.clearTimeout(u.v),u.v=null),Qi(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&h.clearTimeout(u.m),u.m=null)}function Tr(u){if(!oa(u.h)&&!u.m){u.m=!0;var m=u.Ea;te||S(),ie||(te(),ie=!0),I.add(m,u),u.D=0}}function Hl(u,m){return Ys(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Yr(y(u.Ea,u,m),Yi(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const F=new wn(this,this.j,u);let z=this.o;if(this.U&&(z?(z=L(z),Ae(z,this.U)):z=this.U),this.u!==null||this.R||(F.J=z,z=null),this.S)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var T=this.i[_];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(m+=T,m>4096){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=ya(this,F,m),_=En(this.J),He(_,"RID",u),He(_,"CVER",22),this.G&&He(_,"X-HTTP-Session-Id",this.G),Jn(this,_),z&&(this.R?m="headers="+$n($l(z))+"&"+m:this.u&&Wi(_,this.u,z)),zi(this.h,F),this.Ra&&He(_,"TYPE","init"),this.S?(He(_,"$req",m),He(_,"SID","null"),F.U=!0,Nn(F,_,null)):Nn(F,_,m),this.I=2}}else this.I==3&&(u?si(this,u):this.i.length==0||oa(this.h)||si(this))};function si(u,m){var _;m?_=m.l:_=u.V++;const T=En(u.J);He(T,"SID",u.M),He(T,"RID",_),He(T,"AID",u.K),Jn(u,T),u.u&&u.o&&Wi(T,u.u,u.o),_=new wn(u,u.j,_,u.D+1),u.u===null&&(_.J=u.o),m&&(u.i=m.G.concat(u.i)),m=ya(u,_,1e3),_.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),zi(u.h,_),Nn(_,T,m)}function Jn(u,m){u.H&&ge(u.H,function(_,T){He(m,T,_)}),u.l&&ge({},function(_,T){He(m,T,_)})}function ya(u,m,_){_=Math.min(u.i.length,_);const T=u.l?y(u.l.Ka,u.l,u):null;e:{var F=u.i;let Ne=-1;for(;;){const ct=["count="+_];Ne==-1?_>0?(Ne=F[0].g,ct.push("ofs="+Ne)):Ne=0:ct.push("ofs="+Ne);let Ke=!0;for(let gt=0;gt<_;gt++){var z=F[gt].g;const hn=F[gt].map;if(z-=Ne,z<0)Ne=Math.max(0,F[gt].g-100),Ke=!1;else try{z="req"+z+"_"||"";try{var ne=hn instanceof Map?hn:Object.entries(hn);for(const[Ir,er]of ne){let tr=er;f(er)&&(tr=Gr(er)),ct.push(z+Ir+"="+encodeURIComponent(tr))}}catch(Ir){throw ct.push(z+"type="+encodeURIComponent("_badmap")),Ir}}catch{T&&T(hn)}}if(Ke){ne=ct.join("&");break e}}ne=void 0}return u=u.i.splice(0,_),m.G=u,ne}function Ut(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;te||S(),ie||(te(),ie=!0),I.add(m,u),u.A=0}}function Zn(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Yr(y(u.Da,u),Yi(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,is(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Yr(y(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,at(10),un(this),is(this))};function ii(u){u.B!=null&&(h.clearTimeout(u.B),u.B=null)}function is(u){u.g=new wn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=En(u.na);He(m,"RID","rpc"),He(m,"SID",u.M),He(m,"AID",u.K),He(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&He(m,"TO",u.ia),He(m,"TYPE","xmlhttp"),Jn(u,m),u.u&&u.o&&Wi(m,u.u,u.o),u.O&&(u.g.H=u.O);var _=u.g;u=u.ba,_.M=1,_.A=_r(En(m)),_.u=null,_.R=!0,sa(_,u)}r.Va=function(){this.C!=null&&(this.C=null,un(this),Zn(this),at(19))};function Qi(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function Xi(u,m){var _=null;if(u.g==m){Qi(u),ii(u),u.g=null;var T=2}else if(aa(u.h,m))_=m.G,Js(u.h,m),T=1;else return;if(u.I!=0){if(m.o)if(T==1){_=m.u?m.u.length:0,m=Date.now()-m.F;var F=u.D;T=Xr(),ut(T,new na(T,_)),Tr(u)}else Ut(u);else if(F=m.m,F==3||F==0&&m.X>0||!(T==1&&Hl(u,m)||T==2&&Zn(u)))switch(_&&_.length>0&&(m=u.h,m.i=m.i.concat(_)),F){case 1:cn(u,5);break;case 4:cn(u,10);break;case 3:cn(u,6);break;default:cn(u,2)}}}function Yi(u,m){let _=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(_*=2),_*m}function cn(u,m){if(u.j.info("Error code "+m),m==2){var _=y(u.bb,u),T=u.Ua;const F=!T;T=new qn(T||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Zs(T,"https"),_r(T),F?Kn(T.toString(),_):Qn(T.toString(),_)}else at(2);u.I=0,u.l&&u.l.pa(m),oi(u),Ki(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),at(2)):(this.j.info("Failed to ping google.com"),at(1))};function oi(u){if(u.I=0,u.ja=[],u.l){const m=on(u.h);(m.length!=0||u.i.length!=0)&&(q(u.ja,m),q(u.ja,u.i),u.h.i.length=0,M(u.i),u.i.length=0),u.l.oa()}}function _a(u,m,_){var T=_ instanceof qn?En(_):new qn(_);if(T.g!="")m&&(T.g=m+"."+T.g),Wn(T,T.u);else{var F=h.location;T=F.protocol,m=m?m+"."+F.hostname:F.hostname,F=+F.port;const z=new qn(null);T&&Zs(z,T),m&&(z.g=m),F&&Wn(z,F),_&&(z.h=_),T=z}return _=u.G,m=u.wa,_&&m&&He(T,_,m),He(T,"VER",u.ka),Jn(u,T),T}function Gl(u,m,_){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new Xe(new vr({ab:_})):new Xe(u.ma),m.Fa(u.L),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Kl(){}r=Kl.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Ji(){}Ji.prototype.g=function(u,m){return new Vt(u,m)};function Vt(u,m){mt.call(this),this.g=new Hi(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!P(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!P(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new os(this)}E(Vt,mt),Vt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Vt.prototype.close=function(){Gi(this.g)},Vt.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.v&&(_={},_.__data__=Gr(u),u=_);m.i.push(new eh(m.Ya++,u)),m.I==3&&Tr(m)},Vt.prototype.N=function(){this.g.l=null,delete this.j,Gi(this.g),delete this.g,Vt.Z.N.call(this)};function Ql(u){Li.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const _ in m){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}E(Ql,Li);function Xl(){ta.call(this),this.status=1}E(Xl,ta);function os(u){this.g=u}E(os,Kl),os.prototype.ra=function(){ut(this.g,"a")},os.prototype.qa=function(u){ut(this.g,new Ql(u))},os.prototype.pa=function(u){ut(this.g,new Xl)},os.prototype.oa=function(){ut(this.g,"b")},Ji.prototype.createWebChannel=Ji.prototype.g,Vt.prototype.send=Vt.prototype.o,Vt.prototype.open=Vt.prototype.m,Vt.prototype.close=Vt.prototype.close,Dv=function(){return new Ji},xv=function(){return Xr()},Nv=kn,tf={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Zr.NO_ERROR=0,Zr.TIMEOUT=8,Zr.HTTP_ERROR=6,tc=Zr,es.COMPLETE="complete",kv=es,xl.EventType=Qr,Qr.OPEN="a",Qr.CLOSE="b",Qr.ERROR="c",Qr.MESSAGE="d",mt.prototype.listen=mt.prototype.J,Wa=xl,Xe.prototype.listenOnce=Xe.prototype.K,Xe.prototype.getLastError=Xe.prototype.Ha,Xe.prototype.getLastErrorCode=Xe.prototype.ya,Xe.prototype.getStatus=Xe.prototype.ca,Xe.prototype.getResponseJson=Xe.prototype.La,Xe.prototype.getResponseText=Xe.prototype.la,Xe.prototype.send=Xe.prototype.ea,Xe.prototype.setWithCredentials=Xe.prototype.Fa,Pv=Xe}).apply(typeof Wu<"u"?Wu:typeof self<"u"?self:typeof window<"u"?window:{});const Iy="@firebase/firestore",Sy="4.9.3";class Ht{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ht.UNAUTHENTICATED=new Ht(null),Ht.GOOGLE_CREDENTIALS=new Ht("google-credentials-uid"),Ht.FIRST_PARTY=new Ht("first-party-uid"),Ht.MOCK_USER=new Ht("mock-user");let Wo="12.7.0";const Ci=new If("@firebase/firestore");function To(){return Ci.logLevel}function ue(r,...e){if(Ci.logLevel<=Me.DEBUG){const t=e.map(Lf);Ci.debug(`Firestore (${Wo}): ${r}`,...t)}}function Ur(r,...e){if(Ci.logLevel<=Me.ERROR){const t=e.map(Lf);Ci.error(`Firestore (${Wo}): ${r}`,...t)}}function Oo(r,...e){if(Ci.logLevel<=Me.WARN){const t=e.map(Lf);Ci.warn(`Firestore (${Wo}): ${r}`,...t)}}function Lf(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}function _e(r,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,Vv(r,s,t)}function Vv(r,e,t){let s=`FIRESTORE (${Wo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Ur(s),new Error(s)}function ze(r,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,r||Vv(e,o,s)}function Re(r,e){return r}const H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oe extends qr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class lr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Ov{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class w1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ht.UNAUTHENTICATED)))}shutdown(){}}class E1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class T1{constructor(e){this.t=e,this.currentUser=Ht.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ze(this.o===void 0,42304);let s=this.i;const o=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let l=new lr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new lr,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},f=g=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((g=>f(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?f(g):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new lr)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(ze(typeof s.accessToken=="string",31837,{l:s}),new Ov(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ze(e===null||typeof e=="string",2055,{h:e}),new Ht(e)}}class I1{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Ht.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class S1{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new I1(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Ht.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Ay{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class A1{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,jn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ze(this.o===void 0,3512);const s=l=>{l.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,ue("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const o=l=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Ay(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ze(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Ay(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function C1(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}class bf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=C1(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%62))}return s}}function Le(r,e){return r<e?-1:r>e?1:0}function nf(r,e){const t=Math.min(r.length,e.length);for(let s=0;s<t;s++){const o=r.charAt(s),l=e.charAt(s);if(o!==l)return Ld(o)===Ld(l)?Le(o,l):Ld(o)?1:-1}return Le(r.length,e.length)}const R1=55296,P1=57343;function Ld(r){const e=r.charCodeAt(0);return e>=R1&&e<=P1}function Mo(r,e,t){return r.length===e.length&&r.every(((s,o)=>t(s,e[o])))}const Cy="__name__";class or{constructor(e,t,s){t===void 0?t=0:t>e.length&&_e(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&_e(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return or.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof or?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=or.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Le(e.length,t.length)}static compareSegments(e,t){const s=or.isNumericId(e),o=or.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?or.extractNumericId(e).compare(or.extractNumericId(t)):nf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ds.fromString(e.substring(4,e.length-2))}}class Qe extends or{construct(e,t,s){return new Qe(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new oe(H.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new Qe(t)}static emptyPath(){return new Qe([])}}const k1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class bt extends or{construct(e,t,s){return new bt(e,t,s)}static isValidIdentifier(e){return k1.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),bt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Cy}static keyField(){return new bt([Cy])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new oe(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let h=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new oe(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new oe(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else f==="`"?(h=!h,o++):f!=="."||h?(s+=f,o++):(l(),o++)}if(l(),h)throw new oe(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new bt(t)}static emptyPath(){return new bt([])}}class ye{constructor(e){this.path=e}static fromPath(e){return new ye(Qe.fromString(e))}static fromName(e){return new ye(Qe.fromString(e).popFirst(5))}static empty(){return new ye(Qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Qe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new Qe(e.slice()))}}function Mv(r,e,t){if(!t)throw new oe(H.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function N1(r,e,t,s){if(e===!0&&s===!0)throw new oe(H.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Ry(r){if(!ye.isDocumentKey(r))throw new oe(H.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Py(r){if(ye.isDocumentKey(r))throw new oe(H.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Lv(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function bc(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":_e(12329,{type:typeof r})}function Br(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new oe(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=bc(r);throw new oe(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function wt(r,e){const t={typeString:r};return e&&(t.value=e),t}function _l(r,e){if(!Lv(r))throw new oe(H.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){t=`JSON missing required field: '${s}'`;break}const h=r[s];if(o&&typeof h!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(l!==void 0&&h!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new oe(H.INVALID_ARGUMENT,t);return!0}const ky=-62135596800,Ny=1e6;class nt{static now(){return nt.fromMillis(Date.now())}static fromDate(e){return nt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*Ny);return new nt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new oe(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new oe(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ky)throw new oe(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oe(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ny}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:nt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(_l(e,nt._jsonSchema))return new nt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ky;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}nt._jsonSchemaVersion="firestore/timestamp/1.0",nt._jsonSchema={type:wt("string",nt._jsonSchemaVersion),seconds:wt("number"),nanoseconds:wt("number")};class Te{static fromTimestamp(e){return new Te(e)}static min(){return new Te(new nt(0,0))}static max(){return new Te(new nt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const il=-1;function x1(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Te.fromTimestamp(s===1e9?new nt(t+1,0):new nt(t,s));return new Ms(o,ye.empty(),e)}function D1(r){return new Ms(r.readTime,r.key,il)}class Ms{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Ms(Te.min(),ye.empty(),il)}static max(){return new Ms(Te.max(),ye.empty(),il)}}function V1(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=ye.comparator(r.documentKey,e.documentKey),t!==0?t:Le(r.largestBatchId,e.largestBatchId))}const O1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class M1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Ho(r){if(r.code!==H.FAILED_PRECONDITION||r.message!==O1)throw r;ue("LocalStore","Unexpectedly lost primary lease")}class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&_e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new K(((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof K?t:K.resolve(t)}catch(t){return K.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):K.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):K.reject(t)}static resolve(e){return new K(((t,s)=>{t(e)}))}static reject(e){return new K(((t,s)=>{s(e)}))}static waitFor(e){return new K(((t,s)=>{let o=0,l=0,h=!1;e.forEach((f=>{++o,f.next((()=>{++l,h&&l===o&&t()}),(g=>s(g)))})),h=!0,l===o&&t()}))}static or(e){let t=K.resolve(!1);for(const s of e)t=t.next((o=>o?K.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,l)=>{s.push(t.call(this,o,l))})),this.waitFor(s)}static mapArray(e,t){return new K(((s,o)=>{const l=e.length,h=new Array(l);let f=0;for(let g=0;g<l;g++){const y=g;t(e[y]).next((v=>{h[y]=v,++f,f===l&&s(h)}),(v=>o(v)))}}))}static doWhile(e,t){return new K(((s,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):s()};l()}))}}function L1(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Go(r){return r.name==="IndexedDbTransactionError"}class jc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}jc.ce=-1;const jf=-1;function vl(r){return r==null}function gc(r){return r===0&&1/r==-1/0}function b1(r){return typeof r=="number"&&Number.isInteger(r)&&!gc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const bv="";function j1(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=xy(e)),e=F1(r.get(t),e);return xy(e)}function F1(r,e){let t=e;const s=r.length;for(let o=0;o<s;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case bv:t+="";break;default:t+=l}}return t}function xy(r){return r+bv+""}function Dy(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function $s(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function jv(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class ot{constructor(e,t){this.comparator=e,this.root=t||Lt.EMPTY}insert(e,t){return new ot(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Lt.BLACK,null,null))}remove(e){return new ot(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Lt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hu(this.root,e,this.comparator,!0)}}class Hu{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Lt{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??Lt.RED,this.left=o??Lt.EMPTY,this.right=l??Lt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new Lt(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Lt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Lt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Lt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Lt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw _e(27949);return e+(this.isRed()?0:1)}}Lt.EMPTY=null,Lt.RED=!0,Lt.BLACK=!1;Lt.EMPTY=new class{constructor(){this.size=0}get key(){throw _e(57766)}get value(){throw _e(16141)}get color(){throw _e(16727)}get left(){throw _e(29726)}get right(){throw _e(36894)}copy(e,t,s,o,l){return this}insert(e,t,s){return new Lt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class St{constructor(e){this.comparator=e,this.data=new ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Vy(this.data.getIterator())}getIteratorFrom(e){return new Vy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof St)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new St(this.comparator);return t.data=e,t}}class Vy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class yn{constructor(e){this.fields=e,e.sort(bt.comparator)}static empty(){return new yn([])}unionWith(e){let t=new St(bt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new yn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Mo(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}class Fv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ft{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Fv("Invalid base64 string: "+l):l}})(e);return new Ft(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l})(e);return new Ft(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ft.EMPTY_BYTE_STRING=new Ft("");const U1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ls(r){if(ze(!!r,39018),typeof r=="string"){let e=0;const t=U1.exec(r);if(ze(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:dt(r.seconds),nanos:dt(r.nanos)}}function dt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function bs(r){return typeof r=="string"?Ft.fromBase64String(r):Ft.fromUint8Array(r)}const Uv="server_timestamp",Bv="__type__",zv="__previous_value__",$v="__local_write_time__";function Ff(r){return(r?.mapValue?.fields||{})[Bv]?.stringValue===Uv}function Fc(r){const e=r.mapValue.fields[zv];return Ff(e)?Fc(e):e}function ol(r){const e=Ls(r.mapValue.fields[$v].timestampValue);return new nt(e.seconds,e.nanos)}class B1{constructor(e,t,s,o,l,h,f,g,y,v){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=v}}const yc="(default)";class al{constructor(e,t){this.projectId=e,this.database=t||yc}static empty(){return new al("","")}get isDefaultDatabase(){return this.database===yc}isEqual(e){return e instanceof al&&e.projectId===this.projectId&&e.database===this.database}}const qv="__type__",z1="__max__",Gu={mapValue:{}},Wv="__vector__",_c="value";function js(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Ff(r)?4:q1(r)?9007199254740991:$1(r)?10:11:_e(28295,{value:r})}function fr(r,e){if(r===e)return!0;const t=js(r);if(t!==js(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return ol(r).isEqual(ol(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=Ls(o.timestampValue),f=Ls(l.timestampValue);return h.seconds===f.seconds&&h.nanos===f.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,l){return bs(o.bytesValue).isEqual(bs(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,l){return dt(o.geoPointValue.latitude)===dt(l.geoPointValue.latitude)&&dt(o.geoPointValue.longitude)===dt(l.geoPointValue.longitude)})(r,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return dt(o.integerValue)===dt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=dt(o.doubleValue),f=dt(l.doubleValue);return h===f?gc(h)===gc(f):isNaN(h)&&isNaN(f)}return!1})(r,e);case 9:return Mo(r.arrayValue.values||[],e.arrayValue.values||[],fr);case 10:case 11:return(function(o,l){const h=o.mapValue.fields||{},f=l.mapValue.fields||{};if(Dy(h)!==Dy(f))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(f[g]===void 0||!fr(h[g],f[g])))return!1;return!0})(r,e);default:return _e(52216,{left:r})}}function ll(r,e){return(r.values||[]).find((t=>fr(t,e)))!==void 0}function Lo(r,e){if(r===e)return 0;const t=js(r),s=js(e);if(t!==s)return Le(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Le(r.booleanValue,e.booleanValue);case 2:return(function(l,h){const f=dt(l.integerValue||l.doubleValue),g=dt(h.integerValue||h.doubleValue);return f<g?-1:f>g?1:f===g?0:isNaN(f)?isNaN(g)?0:-1:1})(r,e);case 3:return Oy(r.timestampValue,e.timestampValue);case 4:return Oy(ol(r),ol(e));case 5:return nf(r.stringValue,e.stringValue);case 6:return(function(l,h){const f=bs(l),g=bs(h);return f.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(l,h){const f=l.split("/"),g=h.split("/");for(let y=0;y<f.length&&y<g.length;y++){const v=Le(f[y],g[y]);if(v!==0)return v}return Le(f.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,h){const f=Le(dt(l.latitude),dt(h.latitude));return f!==0?f:Le(dt(l.longitude),dt(h.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return My(r.arrayValue,e.arrayValue);case 10:return(function(l,h){const f=l.fields||{},g=h.fields||{},y=f[_c]?.arrayValue,v=g[_c]?.arrayValue,E=Le(y?.values?.length||0,v?.values?.length||0);return E!==0?E:My(y,v)})(r.mapValue,e.mapValue);case 11:return(function(l,h){if(l===Gu.mapValue&&h===Gu.mapValue)return 0;if(l===Gu.mapValue)return 1;if(h===Gu.mapValue)return-1;const f=l.fields||{},g=Object.keys(f),y=h.fields||{},v=Object.keys(y);g.sort(),v.sort();for(let E=0;E<g.length&&E<v.length;++E){const C=nf(g[E],v[E]);if(C!==0)return C;const M=Lo(f[g[E]],y[v[E]]);if(M!==0)return M}return Le(g.length,v.length)})(r.mapValue,e.mapValue);default:throw _e(23264,{he:t})}}function Oy(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Le(r,e);const t=Ls(r),s=Ls(e),o=Le(t.seconds,s.seconds);return o!==0?o:Le(t.nanos,s.nanos)}function My(r,e){const t=r.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=Lo(t[o],s[o]);if(l)return l}return Le(t.length,s.length)}function bo(r){return rf(r)}function rf(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const s=Ls(t);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return bs(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return ye.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=rf(l);return s+"]"})(r.arrayValue):"mapValue"in r?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of s)l?l=!1:o+=",",o+=`${h}:${rf(t.fields[h])}`;return o+"}"})(r.mapValue):_e(61005,{value:r})}function nc(r){switch(js(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Fc(r);return e?16+nc(e):16;case 5:return 2*r.stringValue.length;case 6:return bs(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,l)=>o+nc(l)),0)})(r.arrayValue);case 10:case 11:return(function(s){let o=0;return $s(s.fields,((l,h)=>{o+=l.length+nc(h)})),o})(r.mapValue);default:throw _e(13486,{value:r})}}function Ly(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function sf(r){return!!r&&"integerValue"in r}function Uf(r){return!!r&&"arrayValue"in r}function by(r){return!!r&&"nullValue"in r}function jy(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function rc(r){return!!r&&"mapValue"in r}function $1(r){return(r?.mapValue?.fields||{})[qv]?.stringValue===Wv}function Xa(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return $s(r.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Xa(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Xa(r.arrayValue.values[t]);return e}return{...r}}function q1(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===z1}class Xt{constructor(e){this.value=e}static empty(){return new Xt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!rc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xa(t)}setAll(e){let t=bt.emptyPath(),s={},o=[];e.forEach(((h,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,s,o),s={},o=[],t=f.popLast()}h?s[f.lastSegment()]=Xa(h):o.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());rc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return fr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];rc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){$s(t,((o,l)=>e[o]=l));for(const o of s)delete e[o]}clone(){return new Xt(Xa(this.value))}}function Hv(r){const e=[];return $s(r.fields,((t,s)=>{const o=new bt([t]);if(rc(s)){const l=Hv(s.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)})),new yn(e)}class xt{constructor(e,t,s,o,l,h,f){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=h,this.documentState=f}static newInvalidDocument(e){return new xt(e,0,Te.min(),Te.min(),Te.min(),Xt.empty(),0)}static newFoundDocument(e,t,s,o){return new xt(e,1,t,Te.min(),s,o,0)}static newNoDocument(e,t){return new xt(e,2,t,Te.min(),Te.min(),Xt.empty(),0)}static newUnknownDocument(e,t){return new xt(e,3,t,Te.min(),Te.min(),Xt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof xt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class vc{constructor(e,t){this.position=e,this.inclusive=t}}function Fy(r,e,t){let s=0;for(let o=0;o<r.position.length;o++){const l=e[o],h=r.position[o];if(l.field.isKeyField()?s=ye.comparator(ye.fromName(h.referenceValue),t.key):s=Lo(h,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function Uy(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!fr(r.position[t],e.position[t]))return!1;return!0}class wc{constructor(e,t="asc"){this.field=e,this.dir=t}}function W1(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class Gv{}class vt extends Gv{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new G1(e,t,s):t==="array-contains"?new X1(e,s):t==="in"?new Y1(e,s):t==="not-in"?new J1(e,s):t==="array-contains-any"?new Z1(e,s):new vt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new K1(e,s):new Q1(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Lo(t,this.value)):t!==null&&js(this.value)===js(t)&&this.matchesComparison(Lo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Bn extends Gv{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Bn(e,t)}matches(e){return Kv(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Kv(r){return r.op==="and"}function Qv(r){return H1(r)&&Kv(r)}function H1(r){for(const e of r.filters)if(e instanceof Bn)return!1;return!0}function of(r){if(r instanceof vt)return r.field.canonicalString()+r.op.toString()+bo(r.value);if(Qv(r))return r.filters.map((e=>of(e))).join(",");{const e=r.filters.map((t=>of(t))).join(",");return`${r.op}(${e})`}}function Xv(r,e){return r instanceof vt?(function(s,o){return o instanceof vt&&s.op===o.op&&s.field.isEqual(o.field)&&fr(s.value,o.value)})(r,e):r instanceof Bn?(function(s,o){return o instanceof Bn&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((l,h,f)=>l&&Xv(h,o.filters[f])),!0):!1})(r,e):void _e(19439)}function Yv(r){return r instanceof vt?(function(t){return`${t.field.canonicalString()} ${t.op} ${bo(t.value)}`})(r):r instanceof Bn?(function(t){return t.op.toString()+" {"+t.getFilters().map(Yv).join(" ,")+"}"})(r):"Filter"}class G1 extends vt{constructor(e,t,s){super(e,t,s),this.key=ye.fromName(s.referenceValue)}matches(e){const t=ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class K1 extends vt{constructor(e,t){super(e,"in",t),this.keys=Jv("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Q1 extends vt{constructor(e,t){super(e,"not-in",t),this.keys=Jv("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Jv(r,e){return(e.arrayValue?.values||[]).map((t=>ye.fromName(t.referenceValue)))}class X1 extends vt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Uf(t)&&ll(t.arrayValue,this.value)}}class Y1 extends vt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ll(this.value.arrayValue,t)}}class J1 extends vt{constructor(e,t){super(e,"not-in",t)}matches(e){if(ll(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ll(this.value.arrayValue,t)}}class Z1 extends vt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Uf(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>ll(this.value.arrayValue,s)))}}class eC{constructor(e,t=null,s=[],o=[],l=null,h=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=h,this.endAt=f,this.Te=null}}function By(r,e=null,t=[],s=[],o=null,l=null,h=null){return new eC(r,e,t,s,o,l,h)}function Bf(r){const e=Re(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>of(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),vl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>bo(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>bo(s))).join(",")),e.Te=t}return e.Te}function zf(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!W1(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!Xv(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Uy(r.startAt,e.startAt)&&Uy(r.endAt,e.endAt)}function af(r){return ye.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}class wl{constructor(e,t=null,s=[],o=[],l=null,h="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=h,this.startAt=f,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function tC(r,e,t,s,o,l,h,f){return new wl(r,e,t,s,o,l,h,f)}function $f(r){return new wl(r)}function zy(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function Zv(r){return r.collectionGroup!==null}function Ya(r){const e=Re(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let f=new St(bt.comparator);return h.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(f=f.add(y.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new wc(l,s))})),t.has(bt.keyField().canonicalString())||e.Ie.push(new wc(bt.keyField(),s))}return e.Ie}function ur(r){const e=Re(r);return e.Ee||(e.Ee=nC(e,Ya(r))),e.Ee}function nC(r,e){if(r.limitType==="F")return By(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new wc(o.field,l)}));const t=r.endAt?new vc(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new vc(r.startAt.position,r.startAt.inclusive):null;return By(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function lf(r,e){const t=r.filters.concat([e]);return new wl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Ec(r,e,t){return new wl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Uc(r,e){return zf(ur(r),ur(e))&&r.limitType===e.limitType}function ew(r){return`${Bf(ur(r))}|lt:${r.limitType}`}function Io(r){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>Yv(o))).join(", ")}]`),vl(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>bo(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>bo(o))).join(",")),`Target(${s})`})(ur(r))}; limitType=${r.limitType})`}function Bc(r,e){return e.isFoundDocument()&&(function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):ye.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(r,e)&&(function(s,o){for(const l of Ya(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0})(r,e)&&(function(s,o){return!(s.startAt&&!(function(h,f,g){const y=Fy(h,f,g);return h.inclusive?y<=0:y<0})(s.startAt,Ya(s),o)||s.endAt&&!(function(h,f,g){const y=Fy(h,f,g);return h.inclusive?y>=0:y>0})(s.endAt,Ya(s),o))})(r,e)}function rC(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function tw(r){return(e,t)=>{let s=!1;for(const o of Ya(r)){const l=sC(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function sC(r,e,t){const s=r.field.isKeyField()?ye.comparator(e.key,t.key):(function(l,h,f){const g=h.data.field(l),y=f.data.field(l);return g!==null&&y!==null?Lo(g,y):_e(42886)})(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return _e(19790,{direction:r.dir})}}class ki{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){$s(this.inner,((t,s)=>{for(const[o,l]of s)e(o,l)}))}isEmpty(){return jv(this.inner)}size(){return this.innerSize}}const iC=new ot(ye.comparator);function zr(){return iC}const nw=new ot(ye.comparator);function Ha(...r){let e=nw;for(const t of r)e=e.insert(t.key,t);return e}function rw(r){let e=nw;return r.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function Ei(){return Ja()}function sw(){return Ja()}function Ja(){return new ki((r=>r.toString()),((r,e)=>r.isEqual(e)))}const oC=new ot(ye.comparator),aC=new St(ye.comparator);function be(...r){let e=aC;for(const t of r)e=e.add(t);return e}const lC=new St(Le);function uC(){return lC}function qf(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gc(e)?"-0":e}}function iw(r){return{integerValue:""+r}}function cC(r,e){return b1(e)?iw(e):qf(r,e)}class zc{constructor(){this._=void 0}}function hC(r,e,t){return r instanceof ul?(function(o,l){const h={fields:{[Bv]:{stringValue:Uv},[$v]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Ff(l)&&(l=Fc(l)),l&&(h.fields[zv]=l),{mapValue:h}})(t,e):r instanceof cl?aw(r,e):r instanceof hl?lw(r,e):(function(o,l){const h=ow(o,l),f=$y(h)+$y(o.Ae);return sf(h)&&sf(o.Ae)?iw(f):qf(o.serializer,f)})(r,e)}function dC(r,e,t){return r instanceof cl?aw(r,e):r instanceof hl?lw(r,e):t}function ow(r,e){return r instanceof Tc?(function(s){return sf(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class ul extends zc{}class cl extends zc{constructor(e){super(),this.elements=e}}function aw(r,e){const t=uw(e);for(const s of r.elements)t.some((o=>fr(o,s)))||t.push(s);return{arrayValue:{values:t}}}class hl extends zc{constructor(e){super(),this.elements=e}}function lw(r,e){let t=uw(e);for(const s of r.elements)t=t.filter((o=>!fr(o,s)));return{arrayValue:{values:t}}}class Tc extends zc{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function $y(r){return dt(r.integerValue||r.doubleValue)}function uw(r){return Uf(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class fC{constructor(e,t){this.field=e,this.transform=t}}function pC(r,e){return r.field.isEqual(e.field)&&(function(s,o){return s instanceof cl&&o instanceof cl||s instanceof hl&&o instanceof hl?Mo(s.elements,o.elements,fr):s instanceof Tc&&o instanceof Tc?fr(s.Ae,o.Ae):s instanceof ul&&o instanceof ul})(r.transform,e.transform)}class mC{constructor(e,t){this.version=e,this.transformResults=t}}class jt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new jt}static exists(e){return new jt(void 0,e)}static updateTime(e){return new jt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class $c{}function cw(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new qc(r.key,jt.none()):new El(r.key,r.data,jt.none());{const t=r.data,s=Xt.empty();let o=new St(bt.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?s.delete(l):s.set(l,h),o=o.add(l)}return new qs(r.key,s,new yn(o.toArray()),jt.none())}}function gC(r,e,t){r instanceof El?(function(o,l,h){const f=o.value.clone(),g=Wy(o.fieldTransforms,l,h.transformResults);f.setAll(g),l.convertToFoundDocument(h.version,f).setHasCommittedMutations()})(r,e,t):r instanceof qs?(function(o,l,h){if(!sc(o.precondition,l))return void l.convertToUnknownDocument(h.version);const f=Wy(o.fieldTransforms,l,h.transformResults),g=l.data;g.setAll(hw(o)),g.setAll(f),l.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(r,e,t):(function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function Za(r,e,t,s){return r instanceof El?(function(l,h,f,g){if(!sc(l.precondition,h))return f;const y=l.value.clone(),v=Hy(l.fieldTransforms,g,h);return y.setAll(v),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null})(r,e,t,s):r instanceof qs?(function(l,h,f,g){if(!sc(l.precondition,h))return f;const y=Hy(l.fieldTransforms,g,h),v=h.data;return v.setAll(hw(l)),v.setAll(y),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(r,e,t,s):(function(l,h,f){return sc(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):f})(r,e,t)}function yC(r,e){let t=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),l=ow(s.transform,o||null);l!=null&&(t===null&&(t=Xt.empty()),t.set(s.field,l))}return t||null}function qy(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Mo(s,o,((l,h)=>pC(l,h)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class El extends $c{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class qs extends $c{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function hw(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}})),e}function Wy(r,e,t){const s=new Map;ze(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let o=0;o<t.length;o++){const l=r[o],h=l.transform,f=e.data.field(l.field);s.set(l.field,dC(h,f,t[o]))}return s}function Hy(r,e,t){const s=new Map;for(const o of r){const l=o.transform,h=t.data.field(o.field);s.set(o.field,hC(l,h,e))}return s}class qc extends $c{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class dw extends $c{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class _C{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&gC(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Za(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Za(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=sw();return this.mutations.forEach((o=>{const l=e.get(o.key),h=l.overlayedDocument;let f=this.applyToLocalView(h,l.mutatedFields);f=t.has(o.key)?null:f;const g=cw(h,f);g!==null&&s.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(Te.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),be())}isEqual(e){return this.batchId===e.batchId&&Mo(this.mutations,e.mutations,((t,s)=>qy(t,s)))&&Mo(this.baseMutations,e.baseMutations,((t,s)=>qy(t,s)))}}class Wf{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){ze(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return oC})();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,s[h].version);return new Wf(e,t,s,o)}}class vC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class wC{constructor(e,t){this.count=e,this.unchangedNames=t}}var _t,Be;function fw(r){switch(r){case H.OK:return _e(64938);case H.CANCELLED:case H.UNKNOWN:case H.DEADLINE_EXCEEDED:case H.RESOURCE_EXHAUSTED:case H.INTERNAL:case H.UNAVAILABLE:case H.UNAUTHENTICATED:return!1;case H.INVALID_ARGUMENT:case H.NOT_FOUND:case H.ALREADY_EXISTS:case H.PERMISSION_DENIED:case H.FAILED_PRECONDITION:case H.ABORTED:case H.OUT_OF_RANGE:case H.UNIMPLEMENTED:case H.DATA_LOSS:return!0;default:return _e(15467,{code:r})}}function pw(r){if(r===void 0)return Ur("GRPC error has no .code"),H.UNKNOWN;switch(r){case _t.OK:return H.OK;case _t.CANCELLED:return H.CANCELLED;case _t.UNKNOWN:return H.UNKNOWN;case _t.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case _t.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case _t.INTERNAL:return H.INTERNAL;case _t.UNAVAILABLE:return H.UNAVAILABLE;case _t.UNAUTHENTICATED:return H.UNAUTHENTICATED;case _t.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case _t.NOT_FOUND:return H.NOT_FOUND;case _t.ALREADY_EXISTS:return H.ALREADY_EXISTS;case _t.PERMISSION_DENIED:return H.PERMISSION_DENIED;case _t.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case _t.ABORTED:return H.ABORTED;case _t.OUT_OF_RANGE:return H.OUT_OF_RANGE;case _t.UNIMPLEMENTED:return H.UNIMPLEMENTED;case _t.DATA_LOSS:return H.DATA_LOSS;default:return _e(39323,{code:r})}}(Be=_t||(_t={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";function EC(){return new TextEncoder}const TC=new Ds([4294967295,4294967295],0);function Gy(r){const e=EC().encode(r),t=new Rv;return t.update(e),new Uint8Array(t.digest())}function Ky(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ds([t,s],0),new Ds([o,l],0)]}class Hf{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Ga(`Invalid padding: ${t}`);if(s<0)throw new Ga(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Ga(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Ga(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ds.fromNumber(this.ge)}ye(e,t,s){let o=e.add(t.multiply(Ds.fromNumber(s)));return o.compare(TC)===1&&(o=new Ds([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Gy(e),[s,o]=Ky(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(s,o,l);if(!this.we(h))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new Hf(l,o,t);return s.forEach((f=>h.insert(f))),h}insert(e){if(this.ge===0)return;const t=Gy(e),[s,o]=Ky(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(s,o,l);this.Se(h)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Ga extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Wc{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,Tl.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Wc(Te.min(),o,new ot(Le),zr(),be())}}class Tl{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Tl(s,t,be(),be(),be())}}class ic{constructor(e,t,s,o){this.be=e,this.removedTargetIds=t,this.key=s,this.De=o}}class mw{constructor(e,t){this.targetId=e,this.Ce=t}}class gw{constructor(e,t,s=Ft.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class Qy{constructor(){this.ve=0,this.Fe=Xy(),this.Me=Ft.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=be(),t=be(),s=be();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:_e(38017,{changeType:l})}})),new Tl(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=Xy()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ze(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class IC{constructor(e){this.Ge=e,this.ze=new Map,this.je=zr(),this.Je=Ku(),this.He=Ku(),this.Ye=new ot(Le)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:_e(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,s=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(af(l))if(s===0){const h=new ye(l.path);this.et(t,h,xt.newNoDocument(h,Te.min()))}else ze(s===1,20013,{expectedCount:s});else{const h=this._t(t);if(h!==s){const f=this.ut(e),g=f?this.ct(f,e,h):1;if(g!==0){this.it(t);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let h,f;try{h=bs(s).toUint8Array()}catch(g){if(g instanceof Fv)return Oo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{f=new Hf(h,o,l)}catch(g){return Oo(g instanceof Ga?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return f.ge===0?null:f}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let o=0;return s.forEach((l=>{const h=this.Ge.ht(),f=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,h)=>{const f=this.ot(h);if(f){if(l.current&&af(f.target)){const g=new ye(f.target.path);this.It(g).has(h)||this.Et(h,g)||this.et(h,g,xt.newNoDocument(g,e))}l.Be&&(t.set(h,l.ke()),l.qe())}}));let s=be();this.He.forEach(((l,h)=>{let f=!0;h.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(s=s.add(l))})),this.je.forEach(((l,h)=>h.setReadTime(e)));const o=new Wc(e,t,this.Ye,this.je,s);return this.je=zr(),this.Je=Ku(),this.He=Ku(),this.Ye=new ot(Le),o}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Qy,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new St(Le),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new St(Le),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ue("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Qy),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Ku(){return new ot(ye.comparator)}function Xy(){return new ot(ye.comparator)}const SC={asc:"ASCENDING",desc:"DESCENDING"},AC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},CC={and:"AND",or:"OR"};class RC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function uf(r,e){return r.useProto3Json||vl(e)?e:{value:e}}function Ic(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function yw(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function PC(r,e){return Ic(r,e.toTimestamp())}function _n(r){return ze(!!r,49232),Te.fromTimestamp((function(t){const s=Ls(t);return new nt(s.seconds,s.nanos)})(r))}function Gf(r,e){return cf(r,e).canonicalString()}function cf(r,e){const t=(function(o){return new Qe(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function _w(r){const e=Qe.fromString(r);return ze(Sw(e),10190,{key:e.toString()}),e}function Sc(r,e){return Gf(r.databaseId,e.path)}function el(r,e){const t=_w(e);if(t.get(1)!==r.databaseId.projectId)throw new oe(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new oe(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new ye(ww(t))}function vw(r,e){return Gf(r.databaseId,e)}function kC(r){const e=_w(r);return e.length===4?Qe.emptyPath():ww(e)}function hf(r){return new Qe(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function ww(r){return ze(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Yy(r,e,t){return{name:Sc(r,e),fields:t.value.mapValue.fields}}function NC(r,e){return"found"in e?(function(s,o){ze(!!o.found,43571),o.found.name,o.found.updateTime;const l=el(s,o.found.name),h=_n(o.found.updateTime),f=o.found.createTime?_n(o.found.createTime):Te.min(),g=new Xt({mapValue:{fields:o.found.fields}});return xt.newFoundDocument(l,h,f,g)})(r,e):"missing"in e?(function(s,o){ze(!!o.missing,3894),ze(!!o.readTime,22933);const l=el(s,o.missing),h=_n(o.readTime);return xt.newNoDocument(l,h)})(r,e):_e(7234,{result:e})}function xC(r,e){let t;if("targetChange"in e){e.targetChange;const s=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:_e(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(y,v){return y.useProto3Json?(ze(v===void 0||typeof v=="string",58123),Ft.fromBase64String(v||"")):(ze(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Ft.fromUint8Array(v||new Uint8Array))})(r,e.targetChange.resumeToken),h=e.targetChange.cause,f=h&&(function(y){const v=y.code===void 0?H.UNKNOWN:pw(y.code);return new oe(v,y.message||"")})(h);t=new gw(s,o,l,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=el(r,s.document.name),l=_n(s.document.updateTime),h=s.document.createTime?_n(s.document.createTime):Te.min(),f=new Xt({mapValue:{fields:s.document.fields}}),g=xt.newFoundDocument(o,l,h,f),y=s.targetIds||[],v=s.removedTargetIds||[];t=new ic(y,v,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=el(r,s.document),l=s.readTime?_n(s.readTime):Te.min(),h=xt.newNoDocument(o,l),f=s.removedTargetIds||[];t=new ic([],f,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=el(r,s.document),l=s.removedTargetIds||[];t=new ic([],l,o,null)}else{if(!("filter"in e))return _e(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,h=new wC(o,l),f=s.targetId;t=new mw(f,h)}}return t}function Ew(r,e){let t;if(e instanceof El)t={update:Yy(r,e.key,e.value)};else if(e instanceof qc)t={delete:Sc(r,e.key)};else if(e instanceof qs)t={update:Yy(r,e.key,e.data),updateMask:UC(e.fieldMask)};else{if(!(e instanceof dw))return _e(16599,{Vt:e.type});t={verify:Sc(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,h){const f=h.transform;if(f instanceof ul)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof cl)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof hl)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Tc)return{fieldPath:h.field.canonicalString(),increment:f.Ae};throw _e(20930,{transform:h.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:PC(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:_e(27497)})(r,e.precondition)),t}function DC(r,e){return r&&r.length>0?(ze(e!==void 0,14353),r.map((t=>(function(o,l){let h=o.updateTime?_n(o.updateTime):_n(l);return h.isEqual(Te.min())&&(h=_n(l)),new mC(h,o.transformResults||[])})(t,e)))):[]}function VC(r,e){return{documents:[vw(r,e.path)]}}function OC(r,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=vw(r,o);const l=(function(y){if(y.length!==0)return Iw(Bn.create(y,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const h=(function(y){if(y.length!==0)return y.map((v=>(function(C){return{field:So(C.field),direction:bC(C.dir)}})(v)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const f=uf(r,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:o}}function MC(r){let e=kC(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){ze(s===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(E){const C=Tw(E);return C instanceof Bn&&Qv(C)?C.getFilters():[C]})(t.where));let h=[];t.orderBy&&(h=(function(E){return E.map((C=>(function(q){return new wc(Ao(q.field),(function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(q.direction))})(C)))})(t.orderBy));let f=null;t.limit&&(f=(function(E){let C;return C=typeof E=="object"?E.value:E,vl(C)?null:C})(t.limit));let g=null;t.startAt&&(g=(function(E){const C=!!E.before,M=E.values||[];return new vc(M,C)})(t.startAt));let y=null;return t.endAt&&(y=(function(E){const C=!E.before,M=E.values||[];return new vc(M,C)})(t.endAt)),tC(e,o,h,l,f,"F",g,y)}function LC(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Tw(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Ao(t.unaryFilter.field);return vt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Ao(t.unaryFilter.field);return vt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Ao(t.unaryFilter.field);return vt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Ao(t.unaryFilter.field);return vt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _e(61313);default:return _e(60726)}})(r):r.fieldFilter!==void 0?(function(t){return vt.create(Ao(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _e(58110);default:return _e(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return Bn.create(t.compositeFilter.filters.map((s=>Tw(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return _e(1026)}})(t.compositeFilter.op))})(r):_e(30097,{filter:r})}function bC(r){return SC[r]}function jC(r){return AC[r]}function FC(r){return CC[r]}function So(r){return{fieldPath:r.canonicalString()}}function Ao(r){return bt.fromServerFormat(r.fieldPath)}function Iw(r){return r instanceof vt?(function(t){if(t.op==="=="){if(jy(t.value))return{unaryFilter:{field:So(t.field),op:"IS_NAN"}};if(by(t.value))return{unaryFilter:{field:So(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(jy(t.value))return{unaryFilter:{field:So(t.field),op:"IS_NOT_NAN"}};if(by(t.value))return{unaryFilter:{field:So(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:So(t.field),op:jC(t.op),value:t.value}}})(r):r instanceof Bn?(function(t){const s=t.getFilters().map((o=>Iw(o)));return s.length===1?s[0]:{compositeFilter:{op:FC(t.op),filters:s}}})(r):_e(54877,{filter:r})}function UC(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Sw(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}class Cs{constructor(e,t,s,o,l=Te.min(),h=Te.min(),f=Ft.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new Cs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Cs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class BC{constructor(e){this.yt=e}}function zC(r){const e=MC({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Ec(e,e.limit,"L"):e}class $C{constructor(){this.Cn=new qC}addToCollectionParentIndex(e,t){return this.Cn.add(t),K.resolve()}getCollectionParents(e,t){return K.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return K.resolve()}deleteFieldIndex(e,t){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,t){return K.resolve()}getDocumentsMatchingTarget(e,t){return K.resolve(null)}getIndexType(e,t){return K.resolve(0)}getFieldIndexes(e,t){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,t){return K.resolve(Ms.min())}getMinOffsetFromCollectionGroup(e,t){return K.resolve(Ms.min())}updateCollectionGroup(e,t,s){return K.resolve()}updateIndexEntries(e,t){return K.resolve()}}class qC{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new St(Qe.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new St(Qe.comparator)).toArray()}}const Jy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Aw=41943040;class sn{static withCacheSize(e){return new sn(e,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}sn.DEFAULT_COLLECTION_PERCENTILE=10,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sn.DEFAULT=new sn(Aw,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sn.DISABLED=new sn(-1,0,0);class jo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new jo(0)}static cr(){return new jo(-1)}}const Zy="LruGarbageCollector",WC=1048576;function e_([r,e],[t,s]){const o=Le(r,t);return o===0?Le(e,s):o}class HC{constructor(e){this.Ir=e,this.buffer=new St(e_),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();e_(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class GC{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ue(Zy,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Go(t)?ue(Zy,"Ignoring IndexedDB error during garbage collection: ",t):await Ho(t)}await this.Vr(3e5)}))}}class KC{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return K.resolve(jc.ce);const s=new HC(t);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(Jy)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Jy):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,o,l,h,f,g,y;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,h=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(s=E,f=Date.now(),this.removeTargets(e,s,t)))).next((E=>(l=E,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((E=>(y=Date.now(),To()<=Me.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-v}ms
	Determined least recently used ${o} in `+(f-h)+`ms
	Removed ${l} targets in `+(g-f)+`ms
	Removed ${E} documents in `+(y-g)+`ms
Total Duration: ${y-v}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:E}))))}}function QC(r,e){return new KC(r,e)}class XC{constructor(){this.changes=new ki((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,xt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?K.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class YC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class JC{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&Za(s.mutation,o,yn.empty(),nt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,be()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=be()){const o=Ei();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((l=>{let h=Ha();return l.forEach(((f,g)=>{h=h.insert(f,g.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const s=Ei();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,be())))}populateOverlays(e,t,s){const o=[];return s.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((h,f)=>{t.set(h,f)}))}))}computeViews(e,t,s,o){let l=zr();const h=Ja(),f=(function(){return Ja()})();return t.forEach(((g,y)=>{const v=s.get(y.key);o.has(y.key)&&(v===void 0||v.mutation instanceof qs)?l=l.insert(y.key,y):v!==void 0?(h.set(y.key,v.mutation.getFieldMask()),Za(v.mutation,y,v.mutation.getFieldMask(),nt.now())):h.set(y.key,yn.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((y,v)=>h.set(y,v))),t.forEach(((y,v)=>f.set(y,new YC(v,h.get(y)??null)))),f)))}recalculateAndSaveOverlays(e,t){const s=Ja();let o=new ot(((h,f)=>h-f)),l=be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const f of h)f.keys().forEach((g=>{const y=t.get(g);if(y===null)return;let v=s.get(g)||yn.empty();v=f.applyToLocalView(y,v),s.set(g,v);const E=(o.get(f.batchId)||be()).add(g);o=o.insert(f.batchId,E)}))})).next((()=>{const h=[],f=o.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),y=g.key,v=g.value,E=sw();v.forEach((C=>{if(!l.has(C)){const M=cw(t.get(C),s.get(C));M!==null&&E.set(C,M),l=l.add(C)}})),h.push(this.documentOverlayCache.saveOverlays(e,y,E))}return K.waitFor(h)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return(function(h){return ye.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Zv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):K.resolve(Ei());let f=il,g=l;return h.next((y=>K.forEach(y,((v,E)=>(f<E.largestBatchId&&(f=E.largestBatchId),l.get(v)?K.resolve():this.remoteDocumentCache.getEntry(e,v).next((C=>{g=g.insert(v,C)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,g,y,be()))).next((v=>({batchId:f,changes:rw(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ye(t)).next((s=>{let o=Ha();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let h=Ha();return this.indexManager.getCollectionParents(e,l).next((f=>K.forEach(f,(g=>{const y=(function(E,C){return new wl(C,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,s,o).next((v=>{v.forEach(((E,C)=>{h=h.insert(E,C)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o)))).next((h=>{l.forEach(((g,y)=>{const v=y.getKey();h.get(v)===null&&(h=h.insert(v,xt.newInvalidDocument(v)))}));let f=Ha();return h.forEach(((g,y)=>{const v=l.get(g);v!==void 0&&Za(v.mutation,y,yn.empty(),nt.now()),Bc(t,y)&&(f=f.insert(g,y))})),f}))}}class ZC{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return K.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:_n(o.createTime)}})(t)),K.resolve()}getNamedQuery(e,t){return K.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:zC(o.bundledQuery),readTime:_n(o.readTime)}})(t)),K.resolve()}}class eR{constructor(){this.overlays=new ot(ye.comparator),this.qr=new Map}getOverlay(e,t){return K.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Ei();return K.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&s.set(o,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,l)=>{this.St(e,t,l)})),K.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),K.resolve()}getOverlaysForCollection(e,t,s){const o=Ei(),l=t.length+1,h=new ye(t.child("")),f=this.overlays.getIteratorFrom(h);for(;f.hasNext();){const g=f.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&g.largestBatchId>s&&o.set(g.getKey(),g)}return K.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new ot(((y,v)=>y-v));const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>s){let v=l.get(y.largestBatchId);v===null&&(v=Ei(),l=l.insert(y.largestBatchId,v)),v.set(y.getKey(),y)}}const f=Ei(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,v)=>f.set(y,v))),!(f.size()>=o)););return K.resolve(f)}St(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new vC(t,s));let l=this.qr.get(t);l===void 0&&(l=be(),this.qr.set(t,l)),this.qr.set(t,l.add(s.key))}}class tR{constructor(){this.sessionToken=Ft.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,K.resolve()}}class Kf{constructor(){this.Qr=new St(Nt.$r),this.Ur=new St(Nt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new Nt(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new Nt(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new ye(new Qe([])),s=new Nt(t,e),o=new Nt(t,e+1),l=[];return this.Ur.forEachInRange([s,o],(h=>{this.Gr(h),l.push(h.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ye(new Qe([])),s=new Nt(t,e),o=new Nt(t,e+1);let l=be();return this.Ur.forEachInRange([s,o],(h=>{l=l.add(h.key)})),l}containsKey(e){const t=new Nt(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Nt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ye.comparator(e.key,t.key)||Le(e.Yr,t.Yr)}static Kr(e,t){return Le(e.Yr,t.Yr)||ye.comparator(e.key,t.key)}}class nR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new St(Nt.$r)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new _C(l,t,s,o);this.mutationQueue.push(h);for(const f of o)this.Zr=this.Zr.add(new Nt(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return K.resolve(h)}lookupMutationBatch(e,t){return K.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.ei(s),l=o<0?0:o;return K.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?jf:this.tr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Nt(t,0),o=new Nt(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,o],(h=>{const f=this.Xr(h.Yr);l.push(f)})),K.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new St(Le);return t.forEach((o=>{const l=new Nt(o,0),h=new Nt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,h],(f=>{s=s.add(f.Yr)}))})),K.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;ye.isDocumentKey(l)||(l=l.child(""));const h=new Nt(new ye(l),0);let f=new St(Le);return this.Zr.forEachWhile((g=>{const y=g.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(f=f.add(g.Yr)),!0)}),h),K.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){ze(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return K.forEach(t.mutations,(o=>{const l=new Nt(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new Nt(t,0),o=this.Zr.firstAfterOrEqual(s);return K.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class rR{constructor(e){this.ri=e,this.docs=(function(){return new ot(ye.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,h=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return K.resolve(s?s.document.mutableCopy():xt.newInvalidDocument(t))}getEntries(e,t){let s=zr();return t.forEach((o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():xt.newInvalidDocument(o))})),K.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=zr();const h=t.path,f=new ye(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:y,value:{document:v}}=g.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||V1(D1(v),s)<=0||(o.has(v.key)||Bc(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return K.resolve(l)}getAllFromCollectionGroup(e,t,s,o){_e(9500)}ii(e,t){return K.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new sR(this)}getSize(e){return K.resolve(this.size)}}class sR extends XC{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),K.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class iR{constructor(e){this.persistence=e,this.si=new ki((t=>Bf(t)),zf),this.lastRemoteSnapshotVersion=Te.min(),this.highestTargetId=0,this.oi=0,this._i=new Kf,this.targetCount=0,this.ai=jo.ur()}forEachTarget(e,t){return this.si.forEach(((s,o)=>t(o))),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),K.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new jo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,K.resolve()}updateTargetData(e,t){return this.Pr(t),K.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.si.forEach(((h,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.si.delete(h),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)})),K.waitFor(l).next((()=>o))}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return K.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),K.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((h=>{l.push(o.markPotentiallyOrphaned(e,h))})),K.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),K.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return K.resolve(s)}containsKey(e,t){return K.resolve(this._i.containsKey(t))}}class Cw{constructor(e,t){this.ui={},this.overlays={},this.ci=new jc(0),this.li=!1,this.li=!0,this.hi=new tR,this.referenceDelegate=e(this),this.Pi=new iR(this),this.indexManager=new $C,this.remoteDocumentCache=(function(o){return new rR(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new BC(t),this.Ii=new ZC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new eR,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new nR(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){ue("MemoryPersistence","Starting transaction:",e);const o=new oR(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ai(e,t){return K.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class oR extends M1{constructor(e){super(),this.currentSequenceNumber=e}}class Qf{constructor(e){this.persistence=e,this.Ri=new Kf,this.Vi=null}static mi(e){return new Qf(e)}get fi(){if(this.Vi)return this.Vi;throw _e(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),K.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),K.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),K.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.fi,(s=>{const o=ye.fromPath(s);return this.gi(e,o).next((l=>{l||t.removeEntry(o,Te.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return K.or([()=>K.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Ac{constructor(e,t){this.persistence=e,this.pi=new ki((s=>j1(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=QC(this,t)}static mi(e,t){return new Ac(e,t)}Ei(){}di(e){return K.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return K.forEach(this.pi,((s,o)=>this.br(e,s,o).next((l=>l?K.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,(h=>this.br(e,h,t).next((f=>{f||(s++,l.removeEntry(h,Te.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),K.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),K.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),K.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=nc(e.data.value)),t}br(e,t,s){return K.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return K.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Xf{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=o}static As(e,t){let s=be(),o=be();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Xf(e,t.fromCache,s,o)}}class aR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class lR{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return tI()?8:L1(Gt())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.ys(e,t).next((h=>{l.result=h})).next((()=>{if(!l.result)return this.ws(e,t,o,s).next((h=>{l.result=h}))})).next((()=>{if(l.result)return;const h=new aR;return this.Ss(e,t,h).next((f=>{if(l.result=f,this.Vs)return this.bs(e,t,h,f.size)}))})).next((()=>l.result))}bs(e,t,s,o){return s.documentReadCount<this.fs?(To()<=Me.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",Io(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),K.resolve()):(To()<=Me.DEBUG&&ue("QueryEngine","Query:",Io(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(To()<=Me.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",Io(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ur(t))):K.resolve())}ys(e,t){if(zy(t))return K.resolve(null);let s=ur(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Ec(t,null,"F"),s=ur(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const h=be(...l);return this.ps.getDocuments(e,h).next((f=>this.indexManager.getMinOffset(e,s).next((g=>{const y=this.Ds(t,f);return this.Cs(t,y,h,g.readTime)?this.ys(e,Ec(t,null,"F")):this.vs(e,y,t,g)}))))})))))}ws(e,t,s,o){return zy(t)||o.isEqual(Te.min())?K.resolve(null):this.ps.getDocuments(e,s).next((l=>{const h=this.Ds(t,l);return this.Cs(t,h,s,o)?K.resolve(null):(To()<=Me.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Io(t)),this.vs(e,h,t,x1(o,il)).next((f=>f)))}))}Ds(e,t){let s=new St(tw(e));return t.forEach(((o,l)=>{Bc(e,l)&&(s=s.add(l))})),s}Cs(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,s){return To()<=Me.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",Io(t)),this.ps.getDocumentsMatchingQuery(e,t,Ms.min(),s)}vs(e,t,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((l=>(t.forEach((h=>{l=l.insert(h.key,h)})),l)))}}const Yf="LocalStore",uR=3e8;class cR{constructor(e,t,s,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new ot(Le),this.xs=new ki((l=>Bf(l)),zf),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new JC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function hR(r,e,t,s){return new cR(r,e,t,s)}async function Rw(r,e){const t=Re(r);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((l=>(o=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const h=[],f=[];let g=be();for(const y of o){h.push(y.batchId);for(const v of y.mutations)g=g.add(v.key)}for(const y of l){f.push(y.batchId);for(const v of y.mutations)g=g.add(v.key)}return t.localDocuments.getDocuments(s,g).next((y=>({Ls:y,removedBatchIds:h,addedBatchIds:f})))}))}))}function dR(r,e){const t=Re(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,g,y,v){const E=y.batch,C=E.keys();let M=K.resolve();return C.forEach((q=>{M=M.next((()=>v.getEntry(g,q))).next(($=>{const b=y.docVersions.get(q);ze(b!==null,48541),$.version.compareTo(b)<0&&(E.applyToRemoteDocument($,y),$.isValidDocument()&&($.setReadTime(y.commitVersion),v.addEntry($)))}))})),M.next((()=>f.mutationQueue.removeMutationBatch(g,E)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(f){let g=be();for(let y=0;y<f.mutationResults.length;++y)f.mutationResults[y].transformResults.length>0&&(g=g.add(f.batch.mutations[y].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function Pw(r){const e=Re(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function fR(r,e){const t=Re(r),s=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const h=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const f=[];e.targetChanges.forEach(((v,E)=>{const C=o.get(E);if(!C)return;f.push(t.Pi.removeMatchingKeys(l,v.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(l,v.addedDocuments,E))));let M=C.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?M=M.withResumeToken(Ft.EMPTY_BYTE_STRING,Te.min()).withLastLimboFreeSnapshotVersion(Te.min()):v.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(v.resumeToken,s)),o=o.insert(E,M),(function($,b,re){return $.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=uR?!0:re.addedDocuments.size+re.modifiedDocuments.size+re.removedDocuments.size>0})(C,M,v)&&f.push(t.Pi.updateTargetData(l,M))}));let g=zr(),y=be();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),f.push(pR(l,h,e.documentUpdates).next((v=>{g=v.ks,y=v.qs}))),!s.isEqual(Te.min())){const v=t.Pi.getLastRemoteSnapshotVersion(l).next((E=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));f.push(v)}return K.waitFor(f).next((()=>h.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,y))).next((()=>g))})).then((l=>(t.Ms=o,l)))}function pR(r,e,t){let s=be(),o=be();return t.forEach((l=>s=s.add(l))),e.getEntries(r,s).next((l=>{let h=zr();return t.forEach(((f,g)=>{const y=l.get(f);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(f)),g.isNoDocument()&&g.version.isEqual(Te.min())?(e.removeEntry(f,g.readTime),h=h.insert(f,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),h=h.insert(f,g)):ue(Yf,"Ignoring outdated watch update for ",f,". Current version:",y.version," Watch version:",g.version)})),{ks:h,qs:o}}))}function mR(r,e){const t=Re(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=jf),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function gR(r,e){const t=Re(r);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.Pi.getTargetData(s,e).next((l=>l?(o=l,K.resolve(o)):t.Pi.allocateTargetId(s).next((h=>(o=new Cs(e,h,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function df(r,e,t){const s=Re(r),o=s.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(h=>s.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!Go(h))throw h;ue(Yf,`Failed to update sequence numbers for target ${e}: ${h}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function t_(r,e,t){const s=Re(r);let o=Te.min(),l=be();return s.persistence.runTransaction("Execute query","readwrite",(h=>(function(g,y,v){const E=Re(g),C=E.xs.get(v);return C!==void 0?K.resolve(E.Ms.get(C)):E.Pi.getTargetData(y,v)})(s,h,ur(e)).next((f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(h,f.targetId).next((g=>{l=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(h,e,t?o:Te.min(),t?l:be()))).next((f=>(yR(s,rC(e),f),{documents:f,Qs:l})))))}function yR(r,e,t){let s=r.Os.get(e)||Te.min();t.forEach(((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),r.Os.set(e,s)}class n_{constructor(){this.activeTargetIds=uC()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _R{constructor(){this.Mo=new n_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new n_,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class vR{Oo(e){}shutdown(){}}const r_="ConnectivityMonitor";class s_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ue(r_,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ue(r_,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Qu=null;function ff(){return Qu===null?Qu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Qu++,"0x"+Qu.toString(16)}const bd="RestConnection",wR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ER{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===yc?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,t,s,o,l){const h=ff(),f=this.zo(e,t.toUriEncodedString());ue(bd,`Sending RPC '${e}' ${h}:`,f,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,l);const{host:y}=new URL(f),v=zo(y);return this.Jo(e,f,g,s,v).then((E=>(ue(bd,`Received RPC '${e}' ${h}: `,E),E)),(E=>{throw Oo(bd,`RPC '${e}' ${h} failed with error: `,E,"url: ",f,"request:",s),E}))}Ho(e,t,s,o,l,h){return this.Go(e,t,s,o,l)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Wo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),s&&s.headers.forEach(((o,l)=>e[l]=o))}zo(e,t){const s=wR[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}class TR{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Wt="WebChannelConnection";class IR extends ER{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,o,l){const h=ff();return new Promise(((f,g)=>{const y=new Pv;y.setWithCredentials(!0),y.listenOnce(kv.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case tc.NO_ERROR:const E=y.getResponseJson();ue(Wt,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(E)),f(E);break;case tc.TIMEOUT:ue(Wt,`RPC '${e}' ${h} timed out`),g(new oe(H.DEADLINE_EXCEEDED,"Request time out"));break;case tc.HTTP_ERROR:const C=y.getStatus();if(ue(Wt,`RPC '${e}' ${h} failed with status:`,C,"response text:",y.getResponseText()),C>0){let M=y.getResponseJson();Array.isArray(M)&&(M=M[0]);const q=M?.error;if(q&&q.status&&q.message){const $=(function(re){const se=re.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(se)>=0?se:H.UNKNOWN})(q.status);g(new oe($,q.message))}else g(new oe(H.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new oe(H.UNAVAILABLE,"Connection failed."));break;default:_e(9055,{l_:e,streamId:h,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{ue(Wt,`RPC '${e}' ${h} completed.`)}}));const v=JSON.stringify(o);ue(Wt,`RPC '${e}' ${h} sending request:`,o),y.send(t,"POST",v,s,15)}))}T_(e,t,s){const o=ff(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=Dv(),f=xv(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const v=l.join("");ue(Wt,`Creating RPC '${e}' stream ${o}: ${v}`,g);const E=h.createWebChannel(v,g);this.I_(E);let C=!1,M=!1;const q=new TR({Yo:b=>{M?ue(Wt,`Not sending because RPC '${e}' stream ${o} is closed:`,b):(C||(ue(Wt,`Opening RPC '${e}' stream ${o} transport.`),E.open(),C=!0),ue(Wt,`RPC '${e}' stream ${o} sending:`,b),E.send(b))},Zo:()=>E.close()}),$=(b,re,se)=>{b.listen(re,(G=>{try{se(G)}catch(W){setTimeout((()=>{throw W}),0)}}))};return $(E,Wa.EventType.OPEN,(()=>{M||(ue(Wt,`RPC '${e}' stream ${o} transport opened.`),q.o_())})),$(E,Wa.EventType.CLOSE,(()=>{M||(M=!0,ue(Wt,`RPC '${e}' stream ${o} transport closed`),q.a_(),this.E_(E))})),$(E,Wa.EventType.ERROR,(b=>{M||(M=!0,Oo(Wt,`RPC '${e}' stream ${o} transport errored. Name:`,b.name,"Message:",b.message),q.a_(new oe(H.UNAVAILABLE,"The operation could not be completed")))})),$(E,Wa.EventType.MESSAGE,(b=>{if(!M){const re=b.data[0];ze(!!re,16349);const se=re,G=se?.error||se[0]?.error;if(G){ue(Wt,`RPC '${e}' stream ${o} received error:`,G);const W=G.status;let te=(function(S){const R=_t[S];if(R!==void 0)return pw(R)})(W),ie=G.message;te===void 0&&(te=H.INTERNAL,ie="Unknown error status: "+W+" with message "+G.message),M=!0,q.a_(new oe(te,ie)),E.close()}else ue(Wt,`RPC '${e}' stream ${o} received:`,re),q.u_(re)}})),$(f,Nv.STAT_EVENT,(b=>{b.stat===tf.PROXY?ue(Wt,`RPC '${e}' stream ${o} detected buffering proxy`):b.stat===tf.NOPROXY&&ue(Wt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{q.__()}),0),q}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function jd(){return typeof document<"u"?document:null}function Hc(r){return new RC(r,!0)}class Jf{constructor(e,t,s=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-s);o>0&&ue("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const i_="PersistentStream";class kw{constructor(e,t,s,o,l,h,f,g){this.Mi=e,this.S_=s,this.b_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Jf(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===H.RESOURCE_EXHAUSTED?(Ur(t.toString()),Ur("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===t&&this.G_(s,o)}),(s=>{e((()=>{const o=new oe(H.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ue(i_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ue(i_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class SR extends kw{constructor(e,t,s,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,h),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=xC(this.serializer,e),s=(function(l){if(!("targetChange"in l))return Te.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Te.min():h.readTime?_n(h.readTime):Te.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=hf(this.serializer),t.addTarget=(function(l,h){let f;const g=h.target;if(f=af(g)?{documents:VC(l,g)}:{query:OC(l,g).ft},f.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){f.resumeToken=yw(l,h.resumeToken);const y=uf(l,h.expectedCount);y!==null&&(f.expectedCount=y)}else if(h.snapshotVersion.compareTo(Te.min())>0){f.readTime=Ic(l,h.snapshotVersion.toTimestamp());const y=uf(l,h.expectedCount);y!==null&&(f.expectedCount=y)}return f})(this.serializer,e);const s=LC(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=hf(this.serializer),t.removeTarget=e,this.q_(t)}}class AR extends kw{constructor(e,t,s,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,h),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ze(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ze(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ze(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=DC(e.writeResults,e.commitTime),s=_n(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=hf(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>Ew(this.serializer,s)))};this.q_(t)}}class CR{}class RR extends CR{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new oe(H.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Go(e,cf(t,s),o,l,h))).catch((l=>{throw l.name==="FirebaseError"?(l.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new oe(H.UNKNOWN,l.toString())}))}Ho(e,t,s,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,f])=>this.connection.Ho(e,cf(t,s),o,h,f,l))).catch((h=>{throw h.name==="FirebaseError"?(h.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new oe(H.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class PR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ur(t),this.aa=!1):ue("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Ri="RemoteStore";class kR{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((h=>{s.enqueueAndForget((async()=>{Ni(this)&&(ue(Ri,"Restarting streams for network reachability change."),await(async function(g){const y=Re(g);y.Ea.add(4),await Il(y),y.Ra.set("Unknown"),y.Ea.delete(4),await Gc(y)})(this))}))})),this.Ra=new PR(s,o)}}async function Gc(r){if(Ni(r))for(const e of r.da)await e(!0)}async function Il(r){for(const e of r.da)await e(!1)}function Nw(r,e){const t=Re(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),np(t)?tp(t):Ko(t).O_()&&ep(t,e))}function Zf(r,e){const t=Re(r),s=Ko(t);t.Ia.delete(e),s.O_()&&xw(t,e),t.Ia.size===0&&(s.O_()?s.L_():Ni(t)&&t.Ra.set("Unknown"))}function ep(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Te.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ko(r).Y_(e)}function xw(r,e){r.Va.Ue(e),Ko(r).Z_(e)}function tp(r){r.Va=new IC({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Ko(r).start(),r.Ra.ua()}function np(r){return Ni(r)&&!Ko(r).x_()&&r.Ia.size>0}function Ni(r){return Re(r).Ea.size===0}function Dw(r){r.Va=void 0}async function NR(r){r.Ra.set("Online")}async function xR(r){r.Ia.forEach(((e,t)=>{ep(r,e)}))}async function DR(r,e){Dw(r),np(r)?(r.Ra.ha(e),tp(r)):r.Ra.set("Unknown")}async function VR(r,e,t){if(r.Ra.set("Online"),e instanceof gw&&e.state===2&&e.cause)try{await(async function(o,l){const h=l.cause;for(const f of l.targetIds)o.Ia.has(f)&&(await o.remoteSyncer.rejectListen(f,h),o.Ia.delete(f),o.Va.removeTarget(f))})(r,e)}catch(s){ue(Ri,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Cc(r,s)}else if(e instanceof ic?r.Va.Ze(e):e instanceof mw?r.Va.st(e):r.Va.tt(e),!t.isEqual(Te.min()))try{const s=await Pw(r.localStore);t.compareTo(s)>=0&&await(function(l,h){const f=l.Va.Tt(h);return f.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const v=l.Ia.get(y);v&&l.Ia.set(y,v.withResumeToken(g.resumeToken,h))}})),f.targetMismatches.forEach(((g,y)=>{const v=l.Ia.get(g);if(!v)return;l.Ia.set(g,v.withResumeToken(Ft.EMPTY_BYTE_STRING,v.snapshotVersion)),xw(l,g);const E=new Cs(v.target,g,y,v.sequenceNumber);ep(l,E)})),l.remoteSyncer.applyRemoteEvent(f)})(r,t)}catch(s){ue(Ri,"Failed to raise snapshot:",s),await Cc(r,s)}}async function Cc(r,e,t){if(!Go(e))throw e;r.Ea.add(1),await Il(r),r.Ra.set("Offline"),t||(t=()=>Pw(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ue(Ri,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Gc(r)}))}function Vw(r,e){return e().catch((t=>Cc(r,t,e)))}async function Kc(r){const e=Re(r),t=Fs(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:jf;for(;OR(e);)try{const o=await mR(e.localStore,s);if(o===null){e.Ta.length===0&&t.L_();break}s=o.batchId,MR(e,o)}catch(o){await Cc(e,o)}Ow(e)&&Mw(e)}function OR(r){return Ni(r)&&r.Ta.length<10}function MR(r,e){r.Ta.push(e);const t=Fs(r);t.O_()&&t.X_&&t.ea(e.mutations)}function Ow(r){return Ni(r)&&!Fs(r).x_()&&r.Ta.length>0}function Mw(r){Fs(r).start()}async function LR(r){Fs(r).ra()}async function bR(r){const e=Fs(r);for(const t of r.Ta)e.ea(t.mutations)}async function jR(r,e,t){const s=r.Ta.shift(),o=Wf.from(s,e,t);await Vw(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Kc(r)}async function FR(r,e){e&&Fs(r).X_&&await(async function(s,o){if((function(h){return fw(h)&&h!==H.ABORTED})(o.code)){const l=s.Ta.shift();Fs(s).B_(),await Vw(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o))),await Kc(s)}})(r,e),Ow(r)&&Mw(r)}async function o_(r,e){const t=Re(r);t.asyncQueue.verifyOperationInProgress(),ue(Ri,"RemoteStore received new credentials");const s=Ni(t);t.Ea.add(3),await Il(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Gc(t)}async function UR(r,e){const t=Re(r);e?(t.Ea.delete(2),await Gc(t)):e||(t.Ea.add(2),await Il(t),t.Ra.set("Unknown"))}function Ko(r){return r.ma||(r.ma=(function(t,s,o){const l=Re(t);return l.sa(),new SR(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Xo:NR.bind(null,r),t_:xR.bind(null,r),r_:DR.bind(null,r),H_:VR.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),np(r)?tp(r):r.Ra.set("Unknown")):(await r.ma.stop(),Dw(r))}))),r.ma}function Fs(r){return r.fa||(r.fa=(function(t,s,o){const l=Re(t);return l.sa(),new AR(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:LR.bind(null,r),r_:FR.bind(null,r),ta:bR.bind(null,r),na:jR.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await Kc(r)):(await r.fa.stop(),r.Ta.length>0&&(ue(Ri,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class rp{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new lr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const h=Date.now()+s,f=new rp(e,t,h,o,l);return f.start(s),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new oe(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sp(r,e){if(Ur("AsyncQueue",`${e}: ${r}`),Go(r))return new oe(H.UNAVAILABLE,`${e}: ${r}`);throw r}class No{static emptySet(e){return new No(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||ye.comparator(t.key,s.key):(t,s)=>ye.comparator(t.key,s.key),this.keyedMap=Ha(),this.sortedSet=new ot(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof No)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new No;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class a_{constructor(){this.ga=new ot(ye.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):_e(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class Fo{constructor(e,t,s,o,l,h,f,g,y){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,t,s,o,l){const h=[];return t.forEach((f=>{h.push({type:0,doc:f})})),new Fo(e,t,No.emptySet(t),h,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Uc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}class BR{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class zR{constructor(){this.queries=l_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const o=Re(t),l=o.queries;o.queries=l_(),l.forEach(((h,f)=>{for(const g of f.Sa)g.onError(s)}))})(this,new oe(H.ABORTED,"Firestore shutting down"))}}function l_(){return new ki((r=>ew(r)),Uc)}async function Lw(r,e){const t=Re(r);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.ba()&&e.Da()&&(s=2):(l=new BR,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const f=sp(h,`Initialization of query '${Io(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&ip(t)}async function bw(r,e){const t=Re(r),s=e.query;let o=3;const l=t.queries.get(s);if(l){const h=l.Sa.indexOf(e);h>=0&&(l.Sa.splice(h,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function $R(r,e){const t=Re(r);let s=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const f of h.Sa)f.Fa(o)&&(s=!0);h.wa=o}}s&&ip(t)}function qR(r,e,t){const s=Re(r),o=s.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);s.queries.delete(e)}function ip(r){r.Ca.forEach((e=>{e.next()}))}var pf,u_;(u_=pf||(pf={})).Ma="default",u_.Cache="cache";class jw{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Fo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Fo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==pf.Cache}}class Fw{constructor(e){this.key=e}}class Uw{constructor(e){this.key=e}}class WR{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=be(),this.mutatedKeys=be(),this.eu=tw(e),this.tu=new No(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new a_,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,f=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,E)=>{const C=o.get(v),M=Bc(this.query,E)?E:null,q=!!C&&this.mutatedKeys.has(C.key),$=!!M&&(M.hasLocalMutations||this.mutatedKeys.has(M.key)&&M.hasCommittedMutations);let b=!1;C&&M?C.data.isEqual(M.data)?q!==$&&(s.track({type:3,doc:M}),b=!0):this.su(C,M)||(s.track({type:2,doc:M}),b=!0,(g&&this.eu(M,g)>0||y&&this.eu(M,y)<0)&&(f=!0)):!C&&M?(s.track({type:0,doc:M}),b=!0):C&&!M&&(s.track({type:1,doc:C}),b=!0,(g||y)&&(f=!0)),b&&(M?(h=h.add(M),l=$?l.add(v):l.delete(v)):(h=h.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const v=this.query.limitType==="F"?h.last():h.first();h=h.delete(v.key),l=l.delete(v.key),s.track({type:1,doc:v})}return{tu:h,iu:s,Cs:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((v,E)=>(function(M,q){const $=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e(20277,{Rt:b})}};return $(M)-$(q)})(v.type,E.type)||this.eu(v.doc,E.doc))),this.ou(s),o=o??!1;const f=t&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,y=g!==this.Za;return this.Za=g,h.length!==0||y?{snapshot:new Fo(this.query,e.tu,l,h,e.mutatedKeys,g===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new a_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=be(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new Uw(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new Fw(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=be();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Fo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const op="SyncEngine";class HR{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class GR{constructor(e){this.key=e,this.hu=!1}}class KR{constructor(e,t,s,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new ki((f=>ew(f)),Uc),this.Iu=new Map,this.Eu=new Set,this.du=new ot(ye.comparator),this.Au=new Map,this.Ru=new Kf,this.Vu={},this.mu=new Map,this.fu=jo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function QR(r,e,t=!0){const s=Hw(r);let o;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await Bw(s,e,t,!0),o}async function XR(r,e){const t=Hw(r);await Bw(t,e,!0,!1)}async function Bw(r,e,t,s){const o=await gR(r.localStore,ur(e)),l=o.targetId,h=r.sharedClientState.addLocalQueryTarget(l,t);let f;return s&&(f=await YR(r,e,l,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&Nw(r.remoteStore,o),f}async function YR(r,e,t,s,o){r.pu=(E,C,M)=>(async function($,b,re,se){let G=b.view.ru(re);G.Cs&&(G=await t_($.localStore,b.query,!1).then((({documents:I})=>b.view.ru(I,G))));const W=se&&se.targetChanges.get(b.targetId),te=se&&se.targetMismatches.get(b.targetId)!=null,ie=b.view.applyChanges(G,$.isPrimaryClient,W,te);return h_($,b.targetId,ie.au),ie.snapshot})(r,E,C,M);const l=await t_(r.localStore,e,!0),h=new WR(e,l.Qs),f=h.ru(l.documents),g=Tl.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",o),y=h.applyChanges(f,r.isPrimaryClient,g);h_(r,t,y.au);const v=new HR(e,t,h);return r.Tu.set(e,v),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),y.snapshot}async function JR(r,e,t){const s=Re(r),o=s.Tu.get(e),l=s.Iu.get(o.targetId);if(l.length>1)return s.Iu.set(o.targetId,l.filter((h=>!Uc(h,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await df(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&Zf(s.remoteStore,o.targetId),mf(s,o.targetId)})).catch(Ho)):(mf(s,o.targetId),await df(s.localStore,o.targetId,!0))}async function ZR(r,e){const t=Re(r),s=t.Tu.get(e),o=t.Iu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Zf(t.remoteStore,s.targetId))}async function eP(r,e,t){const s=aP(r);try{const o=await(function(h,f){const g=Re(h),y=nt.now(),v=f.reduce(((M,q)=>M.add(q.key)),be());let E,C;return g.persistence.runTransaction("Locally write mutations","readwrite",(M=>{let q=zr(),$=be();return g.Ns.getEntries(M,v).next((b=>{q=b,q.forEach(((re,se)=>{se.isValidDocument()||($=$.add(re))}))})).next((()=>g.localDocuments.getOverlayedDocuments(M,q))).next((b=>{E=b;const re=[];for(const se of f){const G=yC(se,E.get(se.key).overlayedDocument);G!=null&&re.push(new qs(se.key,G,Hv(G.value.mapValue),jt.exists(!0)))}return g.mutationQueue.addMutationBatch(M,y,re,f)})).next((b=>{C=b;const re=b.applyToLocalDocumentSet(E,$);return g.documentOverlayCache.saveOverlays(M,b.batchId,re)}))})).then((()=>({batchId:C.batchId,changes:rw(E)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(h,f,g){let y=h.Vu[h.currentUser.toKey()];y||(y=new ot(Le)),y=y.insert(f,g),h.Vu[h.currentUser.toKey()]=y})(s,o.batchId,t),await Sl(s,o.changes),await Kc(s.remoteStore)}catch(o){const l=sp(o,"Failed to persist write");t.reject(l)}}async function zw(r,e){const t=Re(r);try{const s=await fR(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const h=t.Au.get(l);h&&(ze(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?ze(h.hu,14607):o.removedDocuments.size>0&&(ze(h.hu,42227),h.hu=!1))})),await Sl(t,s,e)}catch(s){await Ho(s)}}function c_(r,e,t){const s=Re(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Tu.forEach(((l,h)=>{const f=h.view.va(e);f.snapshot&&o.push(f.snapshot)})),(function(h,f){const g=Re(h);g.onlineState=f;let y=!1;g.queries.forEach(((v,E)=>{for(const C of E.Sa)C.va(f)&&(y=!0)})),y&&ip(g)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function tP(r,e,t){const s=Re(r);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Au.get(e),l=o&&o.key;if(l){let h=new ot(ye.comparator);h=h.insert(l,xt.newNoDocument(l,Te.min()));const f=be().add(l),g=new Wc(Te.min(),new Map,new ot(Le),h,f);await zw(s,g),s.du=s.du.remove(l),s.Au.delete(e),ap(s)}else await df(s.localStore,e,!1).then((()=>mf(s,e,t))).catch(Ho)}async function nP(r,e){const t=Re(r),s=e.batch.batchId;try{const o=await dR(t.localStore,e);qw(t,s,null),$w(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Sl(t,o)}catch(o){await Ho(o)}}async function rP(r,e,t){const s=Re(r);try{const o=await(function(h,f){const g=Re(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let v;return g.mutationQueue.lookupMutationBatch(y,f).next((E=>(ze(E!==null,37113),v=E.keys(),g.mutationQueue.removeMutationBatch(y,E)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,v,f))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,v))).next((()=>g.localDocuments.getDocuments(y,v)))}))})(s.localStore,e);qw(s,e,t),$w(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Sl(s,o)}catch(o){await Ho(o)}}function $w(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function qw(r,e,t){const s=Re(r);let o=s.Vu[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function mf(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),t&&r.Pu.yu(s,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((s=>{r.Ru.containsKey(s)||Ww(r,s)}))}function Ww(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(Zf(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),ap(r))}function h_(r,e,t){for(const s of t)s instanceof Fw?(r.Ru.addReference(s.key,e),sP(r,s)):s instanceof Uw?(ue(op,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||Ww(r,s.key)):_e(19791,{wu:s})}function sP(r,e){const t=e.key,s=t.path.canonicalString();r.du.get(t)||r.Eu.has(s)||(ue(op,"New document in limbo: "+t),r.Eu.add(s),ap(r))}function ap(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new ye(Qe.fromString(e)),s=r.fu.next();r.Au.set(s,new GR(t)),r.du=r.du.insert(t,s),Nw(r.remoteStore,new Cs(ur($f(t.path)),s,"TargetPurposeLimboResolution",jc.ce))}}async function Sl(r,e,t){const s=Re(r),o=[],l=[],h=[];s.Tu.isEmpty()||(s.Tu.forEach(((f,g)=>{h.push(s.pu(g,e,t).then((y=>{if((y||t)&&s.isPrimaryClient){const v=y?!y.fromCache:t?.targetChanges.get(g.targetId)?.current;s.sharedClientState.updateQueryState(g.targetId,v?"current":"not-current")}if(y){o.push(y);const v=Xf.As(g.targetId,y);l.push(v)}})))})),await Promise.all(h),s.Pu.H_(o),await(async function(g,y){const v=Re(g);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>K.forEach(y,(C=>K.forEach(C.Es,(M=>v.persistence.referenceDelegate.addReference(E,C.targetId,M))).next((()=>K.forEach(C.ds,(M=>v.persistence.referenceDelegate.removeReference(E,C.targetId,M)))))))))}catch(E){if(!Go(E))throw E;ue(Yf,"Failed to update sequence numbers: "+E)}for(const E of y){const C=E.targetId;if(!E.fromCache){const M=v.Ms.get(C),q=M.snapshotVersion,$=M.withLastLimboFreeSnapshotVersion(q);v.Ms=v.Ms.insert(C,$)}}})(s.localStore,l))}async function iP(r,e){const t=Re(r);if(!t.currentUser.isEqual(e)){ue(op,"User change. New user:",e.toKey());const s=await Rw(t.localStore,e);t.currentUser=e,(function(l,h){l.mu.forEach((f=>{f.forEach((g=>{g.reject(new oe(H.CANCELLED,h))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Sl(t,s.Ls)}}function oP(r,e){const t=Re(r),s=t.Au.get(e);if(s&&s.hu)return be().add(s.key);{let o=be();const l=t.Iu.get(e);if(!l)return o;for(const h of l){const f=t.Tu.get(h);o=o.unionWith(f.view.nu)}return o}}function Hw(r){const e=Re(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=zw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=oP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=tP.bind(null,e),e.Pu.H_=$R.bind(null,e.eventManager),e.Pu.yu=qR.bind(null,e.eventManager),e}function aP(r){const e=Re(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=nP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=rP.bind(null,e),e}class Rc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Hc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return hR(this.persistence,new lR,e.initialUser,this.serializer)}Cu(e){return new Cw(Qf.mi,this.serializer)}Du(e){return new _R}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Rc.provider={build:()=>new Rc};class lP extends Rc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ze(this.persistence.referenceDelegate instanceof Ac,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new GC(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?sn.withCacheSize(this.cacheSizeBytes):sn.DEFAULT;return new Cw((s=>Ac.mi(s,t)),this.serializer)}}class gf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>c_(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=iP.bind(null,this.syncEngine),await UR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new zR})()}createDatastore(e){const t=Hc(e.databaseInfo.databaseId),s=(function(l){return new IR(l)})(e.databaseInfo);return(function(l,h,f,g){return new RR(l,h,f,g)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,l,h,f){return new kR(s,o,l,h,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>c_(this.syncEngine,t,0)),(function(){return s_.v()?new s_:new vR})())}createSyncEngine(e,t){return(function(o,l,h,f,g,y,v){const E=new KR(o,l,h,f,g,y);return v&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const s=Re(t);ue(Ri,"RemoteStore shutting down."),s.Ea.add(5),await Il(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}gf.provider={build:()=>new gf};class Gw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ur("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class uP{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new oe(H.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(o,l){const h=Re(o),f={documents:l.map((E=>Sc(h.serializer,E)))},g=await h.Ho("BatchGetDocuments",h.serializer.databaseId,Qe.emptyPath(),f,l.length),y=new Map;g.forEach((E=>{const C=NC(h.serializer,E);y.set(C.key.toString(),C)}));const v=[];return l.forEach((E=>{const C=y.get(E.toString());ze(!!C,55234,{key:E}),v.push(C)})),v})(this.datastore,e);return t.forEach((s=>this.recordVersion(s))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new qc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,s)=>{const o=ye.fromPath(s);this.mutations.push(new dw(o,this.precondition(o)))})),await(async function(s,o){const l=Re(s),h={writes:o.map((f=>Ew(l.serializer,f)))};await l.Go("Commit",l.serializer.databaseId,Qe.emptyPath(),h)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw _e(50498,{Gu:e.constructor.name});t=Te.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new oe(H.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Te.min())?jt.exists(!1):jt.updateTime(t):jt.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Te.min()))throw new oe(H.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return jt.updateTime(t)}return jt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class cP{constructor(e,t,s,o,l){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=o,this.deferred=l,this.zu=s.maxAttempts,this.M_=new Jf(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new uP(this.datastore),t=this.Hu(e);t&&t.then((s=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(s)})).catch((o=>{this.Yu(o)}))))})).catch((s=>{this.Yu(s)}))}))}Hu(e){try{const t=this.updateFunction(e);return!vl(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!fw(t)}return!1}}const Us="FirestoreClient";class hP{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=Ht.UNAUTHENTICATED,this.clientId=bf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async h=>{ue(Us,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(s,(h=>(ue(Us,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new lr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=sp(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Fd(r,e){r.asyncQueue.verifyOperationInProgress(),ue(Us,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener((async o=>{s.isEqual(o)||(await Rw(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function d_(r,e){r.asyncQueue.verifyOperationInProgress();const t=await dP(r);ue(Us,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((s=>o_(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,o)=>o_(e.remoteStore,o))),r._onlineComponents=e}async function dP(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ue(Us,"Using user provided OfflineComponentProvider");try{await Fd(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===H.FAILED_PRECONDITION||o.code===H.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Oo("Error using user provided cache. Falling back to memory cache: "+t),await Fd(r,new Rc)}}else ue(Us,"Using default OfflineComponentProvider"),await Fd(r,new lP(void 0));return r._offlineComponents}async function lp(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ue(Us,"Using user provided OnlineComponentProvider"),await d_(r,r._uninitializedComponentsProvider._online)):(ue(Us,"Using default OnlineComponentProvider"),await d_(r,new gf))),r._onlineComponents}function fP(r){return lp(r).then((e=>e.syncEngine))}function pP(r){return lp(r).then((e=>e.datastore))}async function Kw(r){const e=await lp(r),t=e.eventManager;return t.onListen=QR.bind(null,e.syncEngine),t.onUnlisten=JR.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=XR.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=ZR.bind(null,e.syncEngine),t}function mP(r,e,t={}){const s=new lr;return r.asyncQueue.enqueueAndForget((async()=>(function(l,h,f,g,y){const v=new Gw({next:C=>{v.Nu(),h.enqueueAndForget((()=>bw(l,E)));const M=C.docs.has(f);!M&&C.fromCache?y.reject(new oe(H.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&C.fromCache&&g&&g.source==="server"?y.reject(new oe(H.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(C)},error:C=>y.reject(C)}),E=new jw($f(f.path),v,{includeMetadataChanges:!0,qa:!0});return Lw(l,E)})(await Kw(r),r.asyncQueue,e,t,s))),s.promise}function gP(r,e,t={}){const s=new lr;return r.asyncQueue.enqueueAndForget((async()=>(function(l,h,f,g,y){const v=new Gw({next:C=>{v.Nu(),h.enqueueAndForget((()=>bw(l,E))),C.fromCache&&g.source==="server"?y.reject(new oe(H.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(C)},error:C=>y.reject(C)}),E=new jw(f,v,{includeMetadataChanges:!0,qa:!0});return Lw(l,E)})(await Kw(r),r.asyncQueue,e,t,s))),s.promise}function Qw(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const f_=new Map;const Xw="firestore.googleapis.com",p_=!0;class m_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new oe(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Xw,this.ssl=p_}else this.host=e.host,this.ssl=e.ssl??p_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Aw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<WC)throw new oe(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}N1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Qw(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new oe(H.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new oe(H.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new oe(H.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Qc{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new m_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new oe(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new oe(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new m_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new w1;switch(s.type){case"firstParty":return new S1(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new oe(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=f_.get(t);s&&(ue("ComponentProvider","Removing Datastore"),f_.delete(t),s.terminate())})(this),Promise.resolve()}}function yP(r,e,t,s={}){r=Br(r,Qc);const o=zo(e),l=r._getSettings(),h={...l,emulatorOptions:r._getEmulatorOptions()},f=`${e}:${t}`;o&&($_(`https://${f}`),q_("Firestore",!0)),l.host!==Xw&&l.host!==f&&Oo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:f,ssl:o,emulatorOptions:s};if(!Ii(g,h)&&(r._setSettings(g),s.mockUserToken)){let y,v;if(typeof s.mockUserToken=="string")y=s.mockUserToken,v=Ht.MOCK_USER;else{y=HT(s.mockUserToken,r._app?.options.projectId);const E=s.mockUserToken.sub||s.mockUserToken.user_id;if(!E)throw new oe(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Ht(E)}r._authCredentials=new E1(new Ov(y,v))}}class xi{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new xi(this.firestore,e,this._query)}}class ft{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ft(this.firestore,e,this._key)}toJSON(){return{type:ft._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(_l(t,ft._jsonSchema))return new ft(e,s||null,new ye(Qe.fromString(t.referencePath)))}}ft._jsonSchemaVersion="firestore/documentReference/1.0",ft._jsonSchema={type:wt("string",ft._jsonSchemaVersion),referencePath:wt("string")};class Vs extends xi{constructor(e,t,s){super(e,t,$f(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ft(this.firestore,null,new ye(e))}withConverter(e){return new Vs(this.firestore,e,this._path)}}function It(r,e,...t){if(r=At(r),Mv("collection","path",e),r instanceof Qc){const s=Qe.fromString(e,...t);return Py(s),new Vs(r,null,s)}{if(!(r instanceof ft||r instanceof Vs))throw new oe(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Qe.fromString(e,...t));return Py(s),new Vs(r.firestore,null,s)}}function Ye(r,e,...t){if(r=At(r),arguments.length===1&&(e=bf.newId()),Mv("doc","path",e),r instanceof Qc){const s=Qe.fromString(e,...t);return Ry(s),new ft(r,null,new ye(s))}{if(!(r instanceof ft||r instanceof Vs))throw new oe(H.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Qe.fromString(e,...t));return Ry(s),new ft(r.firestore,r instanceof Vs?r.converter:null,new ye(s))}}const g_="AsyncQueue";class y_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Jf(this,"async_queue_retry"),this._c=()=>{const s=jd();s&&ue(g_,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=jd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=jd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new lr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Go(e))throw e;ue(g_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Ur("INTERNAL UNHANDLED ERROR: ",__(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=rp.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&_e(47125,{Pc:__(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function __(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class Qo extends Qc{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new y_,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new y_(e),this._firestoreClient=void 0,await e}}}function _P(r,e){const t=typeof r=="object"?r:K_(),s=typeof r=="string"?r:yc,o=Af(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=qT("firestore");l&&yP(o,...l)}return o}function Al(r){if(r._terminated)throw new oe(H.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||vP(r),r._firestoreClient}function vP(r){const e=r._freezeSettings(),t=(function(o,l,h,f){return new B1(o,l,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,Qw(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new hP(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(o){const l=o?._online.build();return{_offline:o?._offline.build(l),_online:l}})(r._componentsProvider))}class gn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new gn(Ft.fromBase64String(e))}catch(t){throw new oe(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new gn(Ft.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:gn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(_l(e,gn._jsonSchema))return gn.fromBase64String(e.bytes)}}gn._jsonSchemaVersion="firestore/bytes/1.0",gn._jsonSchema={type:wt("string",gn._jsonSchemaVersion),bytes:wt("string")};class Cl{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new oe(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Xc{constructor(e){this._methodName=e}}class cr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new oe(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new oe(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:cr._jsonSchemaVersion}}static fromJSON(e){if(_l(e,cr._jsonSchema))return new cr(e.latitude,e.longitude)}}cr._jsonSchemaVersion="firestore/geoPoint/1.0",cr._jsonSchema={type:wt("string",cr._jsonSchemaVersion),latitude:wt("number"),longitude:wt("number")};class hr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:hr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(_l(e,hr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new hr(e.vectorValues);throw new oe(H.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}hr._jsonSchemaVersion="firestore/vectorValue/1.0",hr._jsonSchema={type:wt("string",hr._jsonSchemaVersion),vectorValues:wt("object")};const wP=/^__.*__$/;class EP{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new qs(e,this.data,this.fieldMask,t,this.fieldTransforms):new El(e,this.data,t,this.fieldTransforms)}}class Yw{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new qs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Jw(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e(40011,{Ac:r})}}class up{constructor(e,t,s,o,l,h){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new up({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Pc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Jw(this.Ac)&&wP.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class TP{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Hc(e)}Cc(e,t,s,o=!1){return new up({Ac:e,methodName:t,Dc:s,path:bt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Yc(r){const e=r._freezeSettings(),t=Hc(r._databaseId);return new TP(r._databaseId,!!e.ignoreUndefinedProperties,t)}function cp(r,e,t,s,o,l={}){const h=r.Cc(l.merge||l.mergeFields?2:0,e,t,o);dp("Data must be an object, but it was:",h,s);const f=tE(s,h);let g,y;if(l.merge)g=new yn(h.fieldMask),y=h.fieldTransforms;else if(l.mergeFields){const v=[];for(const E of l.mergeFields){const C=yf(e,E,t);if(!h.contains(C))throw new oe(H.INVALID_ARGUMENT,`Field '${C}' is specified in your field mask but missing from your input data.`);rE(v,C)||v.push(C)}g=new yn(v),y=h.fieldTransforms.filter((E=>g.covers(E.field)))}else g=null,y=h.fieldTransforms;return new EP(new Xt(f),g,y)}class Jc extends Xc{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Jc}}class hp extends Xc{_toFieldTransform(e){return new fC(e.path,new ul)}isEqual(e){return e instanceof hp}}function Zw(r,e,t,s){const o=r.Cc(1,e,t);dp("Data must be an object, but it was:",o,s);const l=[],h=Xt.empty();$s(s,((g,y)=>{const v=fp(e,g,t);y=At(y);const E=o.yc(v);if(y instanceof Jc)l.push(v);else{const C=Rl(y,E);C!=null&&(l.push(v),h.set(v,C))}}));const f=new yn(l);return new Yw(h,f,o.fieldTransforms)}function eE(r,e,t,s,o,l){const h=r.Cc(1,e,t),f=[yf(e,s,t)],g=[o];if(l.length%2!=0)throw new oe(H.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let C=0;C<l.length;C+=2)f.push(yf(e,l[C])),g.push(l[C+1]);const y=[],v=Xt.empty();for(let C=f.length-1;C>=0;--C)if(!rE(y,f[C])){const M=f[C];let q=g[C];q=At(q);const $=h.yc(M);if(q instanceof Jc)y.push(M);else{const b=Rl(q,$);b!=null&&(y.push(M),v.set(M,b))}}const E=new yn(y);return new Yw(v,E,h.fieldTransforms)}function IP(r,e,t,s=!1){return Rl(t,r.Cc(s?4:3,e))}function Rl(r,e){if(nE(r=At(r)))return dp("Unsupported field value:",e,r),tE(r,e);if(r instanceof Xc)return(function(s,o){if(!Jw(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const l=[];let h=0;for(const f of s){let g=Rl(f,o.wc(h));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),h++}return{arrayValue:{values:l}}})(r,e)}return(function(s,o){if((s=At(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return cC(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=nt.fromDate(s);return{timestampValue:Ic(o.serializer,l)}}if(s instanceof nt){const l=new nt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Ic(o.serializer,l)}}if(s instanceof cr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof gn)return{bytesValue:yw(o.serializer,s._byteString)};if(s instanceof ft){const l=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(l))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Gf(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof hr)return(function(h,f){return{mapValue:{fields:{[qv]:{stringValue:Wv},[_c]:{arrayValue:{values:h.toArray().map((y=>{if(typeof y!="number")throw f.Sc("VectorValues must only contain numeric values.");return qf(f.serializer,y)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${bc(s)}`)})(r,e)}function tE(r,e){const t={};return jv(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$s(r,((s,o)=>{const l=Rl(o,e.mc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function nE(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof nt||r instanceof cr||r instanceof gn||r instanceof ft||r instanceof Xc||r instanceof hr)}function dp(r,e,t){if(!nE(t)||!Lv(t)){const s=bc(t);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function yf(r,e,t){if((e=At(e))instanceof Cl)return e._internalPath;if(typeof e=="string")return fp(r,e);throw Pc("Field path arguments must be of type string or ",r,!1,void 0,t)}const SP=new RegExp("[~\\*/\\[\\]]");function fp(r,e,t){if(e.search(SP)>=0)throw Pc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Cl(...e.split("."))._internalPath}catch{throw Pc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Pc(r,e,t,s,o){const l=s&&!s.isEmpty(),h=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(l||h)&&(g+=" (found",l&&(g+=` in field ${s}`),h&&(g+=` in document ${o}`),g+=")"),new oe(H.INVALID_ARGUMENT,f+r+g)}function rE(r,e){return r.some((t=>t.isEqual(e)))}class kc{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new ft(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new AP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(pp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class AP extends kc{data(){return super.data()}}function pp(r,e){return typeof e=="string"?fp(r,e):e instanceof Cl?e._internalPath:e._delegate._internalPath}function CP(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new oe(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class mp{}class sE extends mp{}function Lr(r,e,...t){let s=[];e instanceof mp&&s.push(e),s=s.concat(t),(function(l){const h=l.filter((g=>g instanceof gp)).length,f=l.filter((g=>g instanceof Zc)).length;if(h>1||h>0&&f>0)throw new oe(H.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)r=o._apply(r);return r}class Zc extends sE{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Zc(e,t,s)}_apply(e){const t=this._parse(e);return iE(e._query,t),new xi(e.firestore,e.converter,lf(e._query,t))}_parse(e){const t=Yc(e.firestore);return(function(l,h,f,g,y,v,E){let C;if(y.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new oe(H.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){w_(E,v);const q=[];for(const $ of E)q.push(v_(g,l,$));C={arrayValue:{values:q}}}else C=v_(g,l,E)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||w_(E,v),C=IP(f,h,E,v==="in"||v==="not-in");return vt.create(y,v,C)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function br(r,e,t){const s=e,o=pp("where",r);return Zc._create(o,s,t)}class gp extends mp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new gp(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:Bn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let h=o;const f=l.getFlattenedFilters();for(const g of f)iE(h,g),h=lf(h,g)})(e._query,t),new xi(e.firestore,e.converter,lf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class yp extends sE{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new yp(e,t,s)}_apply(e){return new xi(e.firestore,e.converter,Ec(e._query,this._limit,this._limitType))}}function RP(r){return yp._create("limit",r,"F")}function v_(r,e,t){if(typeof(t=At(t))=="string"){if(t==="")throw new oe(H.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Zv(e)&&t.indexOf("/")!==-1)throw new oe(H.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Qe.fromString(t));if(!ye.isDocumentKey(s))throw new oe(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Ly(r,new ye(s))}if(t instanceof ft)return Ly(r,t._key);throw new oe(H.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${bc(t)}.`)}function w_(r,e){if(!Array.isArray(r)||r.length===0)throw new oe(H.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function iE(r,e){const t=(function(o,l){for(const h of o)for(const f of h.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new oe(H.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new oe(H.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class oE{convertValue(e,t="none"){switch(js(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(bs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw _e(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return $s(e,((o,l)=>{s[o]=this.convertValue(l,t)})),s}convertVectorValue(e){const t=e.fields?.[_c].arrayValue?.values?.map((s=>dt(s.doubleValue)));return new hr(t)}convertGeoPoint(e){return new cr(dt(e.latitude),dt(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Fc(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(ol(e));default:return null}}convertTimestamp(e){const t=Ls(e);return new nt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Qe.fromString(e);ze(Sw(s),9688,{name:e});const o=new al(s.get(1),s.get(3)),l=new ye(s.popFirst(5));return o.isEqual(t)||Ur(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function _p(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}class PP extends oE{constructor(e){super(),this.firestore=e}convertBytes(e){return new gn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ft(this.firestore,null,t)}}class Co{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Os extends kc{constructor(e,t,s,o,l,h){super(e,t,s,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new oc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(pp("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(H.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Os._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Os._jsonSchemaVersion="firestore/documentSnapshot/1.0",Os._jsonSchema={type:wt("string",Os._jsonSchemaVersion),bundleSource:wt("string","DocumentSnapshot"),bundleName:wt("string"),bundle:wt("string")};class oc extends Os{data(e={}){return super.data(e)}}class xo{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Co(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new oc(this._firestore,this._userDataWriter,s.key,s,new Co(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new oe(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((f=>{const g=new oc(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Co(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const g=new oc(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Co(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,v=-1;return f.type!==0&&(y=h.indexOf(f.doc.key),h=h.delete(f.doc.key)),f.type!==1&&(h=h.add(f.doc),v=h.indexOf(f.doc.key)),{type:kP(f.type),doc:g,oldIndex:y,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(H.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=xo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=bf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function kP(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e(61501,{type:r})}}function Bs(r){r=Br(r,ft);const e=Br(r.firestore,Qo);return mP(Al(e),r._key).then((t=>NP(e,r,t)))}xo._jsonSchemaVersion="firestore/querySnapshot/1.0",xo._jsonSchema={type:wt("string",xo._jsonSchemaVersion),bundleSource:wt("string","QuerySnapshot"),bundleName:wt("string"),bundle:wt("string")};class vp extends oE{constructor(e){super(),this.firestore=e}convertBytes(e){return new gn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ft(this.firestore,null,t)}}function Yt(r){r=Br(r,xi);const e=Br(r.firestore,Qo),t=Al(e),s=new vp(e);return CP(r._query),gP(t,r._query).then((o=>new xo(e,s,r,o)))}function Di(r,e,t){r=Br(r,ft);const s=Br(r.firestore,Qo),o=_p(r.converter,e,t);return aE(s,[cp(Yc(s),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,jt.none())])}function aE(r,e){return(function(s,o){const l=new lr;return s.asyncQueue.enqueueAndForget((async()=>eP(await fP(s),o,l))),l.promise})(Al(r),e)}function NP(r,e,t){const s=t.docs.get(e._key),o=new vp(r);return new Os(r,o,e._key,s,new Co(t.hasPendingWrites,t.fromCache),e.converter)}const xP={maxAttempts:5};class DP{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Yc(e)}set(e,t,s){this._verifyNotCommitted();const o=Rs(e,this._firestore),l=_p(o.converter,t,s),h=cp(this._dataReader,"WriteBatch.set",o._key,l,o.converter!==null,s);return this._mutations.push(h.toMutation(o._key,jt.none())),this}update(e,t,s,...o){this._verifyNotCommitted();const l=Rs(e,this._firestore);let h;return h=typeof(t=At(t))=="string"||t instanceof Cl?eE(this._dataReader,"WriteBatch.update",l._key,t,s,o):Zw(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(h.toMutation(l._key,jt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Rs(e,this._firestore);return this._mutations=this._mutations.concat(new qc(t._key,jt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new oe(H.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Rs(r,e){if((r=At(r)).firestore!==e)throw new oe(H.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}class VP{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Yc(e)}get(e){const t=Rs(e,this._firestore),s=new PP(this._firestore);return this._transaction.lookup([t._key]).then((o=>{if(!o||o.length!==1)return _e(24041);const l=o[0];if(l.isFoundDocument())return new kc(this._firestore,s,l.key,l,t.converter);if(l.isNoDocument())return new kc(this._firestore,s,t._key,null,t.converter);throw _e(18433,{doc:l})}))}set(e,t,s){const o=Rs(e,this._firestore),l=_p(o.converter,t,s),h=cp(this._dataReader,"Transaction.set",o._key,l,o.converter!==null,s);return this._transaction.set(o._key,h),this}update(e,t,s,...o){const l=Rs(e,this._firestore);let h;return h=typeof(t=At(t))=="string"||t instanceof Cl?eE(this._dataReader,"Transaction.update",l._key,t,s,o):Zw(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,h),this}delete(e){const t=Rs(e,this._firestore);return this._transaction.delete(t._key),this}}class OP extends VP{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Rs(e,this._firestore),s=new vp(this._firestore);return super.get(e).then((o=>new Os(this._firestore,s,t._key,o._document,new Co(!1,!1),t.converter)))}}function lE(r,e,t){r=Br(r,Qo);const s={...xP,...t};return(function(l){if(l.maxAttempts<1)throw new oe(H.INVALID_ARGUMENT,"Max attempts must be at least 1")})(s),(function(l,h,f){const g=new lr;return l.asyncQueue.enqueueAndForget((async()=>{const y=await pP(l);new cP(l.asyncQueue,y,f,h,g).ju()})),g.promise})(Al(r),(o=>e(new OP(r,o))),s)}function mn(){return new hp("serverTimestamp")}function wp(r){return Al(r=Br(r,Qo)),new DP(r,(e=>aE(r,e)))}(function(e,t=!0){(function(o){Wo=o})($o),Do(new Si("firestore",((s,{instanceIdentifier:o,options:l})=>{const h=s.getProvider("app").getImmediate(),f=new Qo(new T1(s.getProvider("auth-internal")),new A1(h,s.getProvider("app-check-internal")),(function(y,v){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new oe(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new al(y.options.projectId,v)})(h,o),h);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),xs(Iy,Sy,e),xs(Iy,Sy,"esm2020")})();var MP="firebase",LP="12.7.0";xs(MP,LP,"app");const bP={apiKey:"AIzaSyA-TURVnsMyyBOWreei2jGLcuXmOzyr_DQ",authDomain:"gamificationcollege.firebaseapp.com",projectId:"gamificationcollege",storageBucket:"gamificationcollege.firebasestorage.app",messagingSenderId:"237003198772",appId:"1:237003198772:web:37fc8130a083377a115561"},uE=G_(bP),Ud=_1(uE),jP=new Vr,Ce=_P(uE),cE=Ee.createContext(null);function FP({children:r}){const[e,t]=Ee.useState(null),[s,o]=Ee.useState(null),[l,h]=Ee.useState(!0);Ee.useEffect(()=>{const y=oA(Ud,async v=>{if(t(v),o(null),!v){h(!1);return}const E=Ye(Ce,"users",v.uid);(await Bs(E)).exists()||await Di(E,{displayName:v.displayName||"Utilisateur",role:"child",createdAt:mn()});const M=await Bs(E);o(M.data()?.role||"child"),h(!1)});return()=>y()},[]);const f=async()=>{await RA(Ud,jP)},g=async()=>{await aA(Ud)};return A.jsx(cE.Provider,{value:{user:e,role:s,loading:l,signInGoogle:f,signOutUser:g},children:r})}function Ws(){const r=Ee.useContext(cE);if(!r)throw new Error("useAuth doit tre utilis sous <AuthProvider>");return r}function UP(){const{user:r,role:e,signOutUser:t}=Ws();return A.jsx("div",{className:"card",style:{marginBottom:14},children:A.jsxs("div",{className:"row",style:{justifyContent:"space-between"},children:[A.jsxs("div",{children:[A.jsx("div",{style:{fontWeight:900,fontSize:"1.05rem"},children:"Malo  Rvisions"}),A.jsx("div",{className:"small",children:r?A.jsxs(A.Fragment,{children:["Connect : ",A.jsx("strong",{children:r.displayName})," ",A.jsx("span",{className:"badge",children:e})]}):"Non connect"})]}),A.jsxs("div",{className:"row",style:{gap:8},children:[A.jsx(Eo,{className:"btn secondary",to:"/",children:"Accueil"}),r&&A.jsx(Eo,{className:"btn secondary",to:"/recompenses",children:"Rcompenses"}),e==="parent"&&A.jsxs(A.Fragment,{children:[A.jsx(Eo,{className:"btn secondary",to:"/admin/import",children:"Import (parent)"}),A.jsx(Eo,{className:"btn secondary",to:"/admin/moderation",children:"Modration"}),A.jsx(Eo,{className:"btn secondary",to:"/admin/progression",children:"Progression"})]}),r&&A.jsx("button",{className:"btn secondary",onClick:t,children:"Dconnexion"})]})]})})}function Bd({children:r}){const{user:e,loading:t}=Ws();return t?A.jsx("div",{className:"card",children:"Chargement"}):e?A.jsx(A.Fragment,{children:r}):A.jsx(qd,{to:"/connexion",replace:!0})}function zd({children:r}){const{user:e,role:t,loading:s}=Ws();return s?A.jsx("div",{className:"card",children:"Chargement"}):e?t!=="parent"?A.jsx(qd,{to:"/",replace:!0}):A.jsx(A.Fragment,{children:r}):A.jsx(qd,{to:"/connexion",replace:!0})}function Uo(r){return(r||"").toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[]/g,"'").replace(/\s+/g," ").trim()}async function BP(){return(await Yt(It(Ce,"subjects"))).docs.map(e=>({id:e.id,...e.data()}))}async function hE(r,e){const{uid:t,includeHidden:s=!1,includeOverrides:o=!1}=e||{},l=Lr(It(Ce,"themes"),br("subjectId","==",r)),f=(await Yt(l)).docs.map(v=>({id:v.id,...v.data()}));let g=new Map;if(t)try{const v=await Yt(It(Ce,"users",t,"visibilityThemes"));g=new Map(v.docs.map(E=>[E.id,!!E.data().visible]))}catch{g=new Map}const y=f.filter(v=>{const E=g.get(v.id);return!(!s&&v.hidden||!s&&E===!1)});return o?y.map(v=>({...v,visibleOverride:g.get(v.id)})):y}async function dE(r,e){const{uid:t,includeHidden:s=!1,includeOverrides:o=!1}=e||{},l=Lr(It(Ce,"exercises"),br("themeId","==",r)),f=(await Yt(l)).docs.map(v=>({id:v.id,...v.data()}));let g=new Map;if(t)try{const v=await Yt(It(Ce,"users",t,"visibilityExercises"));g=new Map(v.docs.map(E=>[E.id,!!E.data().visible]))}catch{g=new Map}const y=f.filter(v=>{const E=g.get(v.id);return!(!s&&v.hidden||!s&&E===!1)});return o?y.map(v=>({...v,visibleOverride:g.get(v.id)})):y}async function zP(r){const e=Lr(It(Ce,"readings"),br("themeId","==",r));try{return(await Yt(e)).docs.map(s=>({id:s.id,...s.data()}))}catch{return[]}}async function $P(r){const e=wp(Ce);for(const t of r.subjects){e.set(Ye(Ce,"subjects",t.id),{title:t.title},{merge:!0});for(const s of t.themes){e.set(Ye(Ce,"themes",s.id),{subjectId:t.id,title:s.title,grade:r.grade,readings:Array.isArray(s.readings)?s.readings:[]},{merge:!0});for(const o of s.exercises){const l=Ye(Ce,"exercises",o.id),h={...o,themeId:s.id};h.tags=Array.isArray(h.tags)?h.tags.slice(0,3):[],h.type==="short_text"&&Array.isArray(h.expected)&&(h.expected=h.expected.map(f=>Uo(f))),h.type==="fill_blank"&&Array.isArray(h.expected)&&(h.expected=h.expected.map(f=>Uo(f))),e.set(l,h,{merge:!0})}if(Array.isArray(s.readings))for(const o of s.readings){if(!o.id||!o.title||!o.text||!Array.isArray(o.questions))continue;o.id,o.title,o.text,o.difficulty,Array.isArray(o.tags)&&o.tags.slice(0,3),o.questions.map(h=>({...h,type:"mcq",themeId:s.id,tags:Array.isArray(h.tags)?h.tags.slice(0,3):[]}));const l=Ye(Ce,"themes",s.id);e.set(l,{readings:[...(Array.isArray(s.readings)?s.readings:[]).map(h=>({...h,themeId:s.id}))]},{merge:!0})}}}await e.commit()}async function qP(r,e){await Di(Ye(Ce,"themes",r),{hidden:e},{merge:!0})}async function WP(r,e){await Di(Ye(Ce,"exercises",r),{hidden:e},{merge:!0})}async function HP(r,e,t){await Di(Ye(Ce,"users",r,"visibilityThemes",e),{visible:t},{merge:!0})}async function GP(r,e,t){await Di(Ye(Ce,"users",r,"visibilityExercises",e),{visible:t},{merge:!0})}async function KP(r){try{const e=wp(Ce);return e.delete(Ye(Ce,"themes",r)),(await Yt(Lr(It(Ce,"exercises"),br("themeId","==",r)))).docs.forEach(o=>e.delete(o.ref)),(await Yt(Lr(It(Ce,"readings"),br("themeId","==",r)))).docs.forEach(o=>e.delete(o.ref)),await e.commit(),{deleted:!0}}catch{return await Di(Ye(Ce,"themes",r),{hidden:!0},{merge:!0}),{deleted:!1,hidden:!0}}}async function Ep(r){const e=Ye(Ce,"users",r,"stats","main"),t=await Bs(e);return t.exists()?t.data():(await Di(e,{xp:0,coins:0,streakDays:0,lastDoneDate:null,badges:[],updatedAt:mn()}),(await Bs(e)).data())}function E_(r){return r.toISOString().slice(0,10)}function QP(r,e){return r===1?e?3:-1:r===2?e?5:-2:e?7:-3}function XP(r){return Math.max(0,Math.min(100,r))}function YP(r){return r>=80?"mastered":r>=60?"nearly":r>=30?"developing":"weak"}async function JP(r){const{uid:e,items:t,existingAttemptId:s}=r,o=new Date,l=E_(o),h=t.length,f=t.filter(M=>M.correct).length;if(h===0)return{xpGain:0,coinsGain:0,streakDays:0,badges:[],score:0,outOf:0};const g=new Map;t.forEach(M=>{const q=Array.isArray(M.tags)?M.tags.slice(0,3):[],$=QP(M.difficulty,M.correct);q.forEach(b=>{const re=g.get(b)||{delta:0,correct:0,wrong:0};g.set(b,{delta:re.delta+$,correct:re.correct+(M.correct?1:0),wrong:re.wrong+(M.correct?0:1)})})});const y=f*10,v=Math.max(1,Math.min(3,Math.round(f/Math.max(1,h)*3)));let E=null;const C=s?Ye(Ce,"users",e,"attempts",s):Ye(It(Ce,"users",e,"attempts"));return t.map(()=>Ye(It(C,"items"))),await lE(Ce,async M=>{const q=Ye(Ce,"users",e,"stats","main"),$=Ye(Ce,"users",e,"progressSummary","main"),b=Array.from(g.keys()).map(N=>Ye(Ce,"users",e,"tagProgress",N)),[re,se,G]=await Promise.all([M.get(q),M.get($),Promise.all(b.map(N=>M.get(N)))]),W=re.exists()?re.data():{xp:0,coins:0,streakDays:0,lastDoneDate:null,badges:[]};let te=W.streakDays||0;const ie=W.lastDoneDate;if(ie!==l){const N=E_(new Date(o.getTime()-864e5));te=ie===N?te+1:1}const I=new Set(Array.isArray(W.badges)?W.badges:[]);te>=3&&I.add("3 jours daffile"),te>=7&&I.add("7 jours daffile"),f===h&&h>=10&&I.add("Zro faute (10+)");const S=se.exists()?se.data():null,R={weak:0,developing:0,nearly:0,mastered:0};for(let N=0;N<b.length;N++){const D=b[N],P=G[N],ce=D.id,Ve=g.get(ce),Ue=P.exists()?P.data():null,Pe=typeof Ue?.mastery=="number"?Ue.mastery:0,Z=Ue?.bucket,ge=XP(Pe+Ve.delta),ae=YP(ge);Z&&S&&(R[Z]-=1),R[ae]+=1,M.set(D,{mastery:ge,bucket:ae,correctAnswers:(Ue?.correctAnswers||0)+Ve.correct,wrongAnswers:(Ue?.wrongAnswers||0)+Ve.wrong,lastDelta:Ve.delta,updatedAt:mn()},{merge:!0})}const x=S?.masteryBuckets||{weak:0,developing:0,nearly:0,mastered:0};M.set(q,{xp:(W.xp||0)+y,coins:(W.coins||0)+v,streakDays:te,lastDoneDate:l,badges:Array.from(I),updatedAt:mn()},{merge:!0}),M.set($,{totalAnswers:(S?.totalAnswers||0)+h,correctAnswers:(S?.correctAnswers||0)+f,totalAttempts:(S?.totalAttempts||0)+1,masteryBuckets:{weak:(x.weak||0)+R.weak,developing:(x.developing||0)+R.developing,nearly:(x.nearly||0)+R.nearly,mastered:(x.mastered||0)+R.mastered},lastAttemptId:C.id,lastDate:l,updatedAt:mn()},{merge:!0}),E={xpGain:y,coinsGain:v,streakDays:te,badges:Array.from(I)}}),{...E||{xpGain:0,coinsGain:0,streakDays:0,badges:[]},score:f,outOf:h}}const fE=[{id:"badge_dragon",title:"Badge Dragon",description:"Un badge pique  afficher",priceCoins:10},{id:"skin_bleu",title:"Skin Bleu",description:"Personnalisation bleue de ton avatar",priceCoins:15},{id:"skin_or",title:"Skin Or",description:"Style dor rare",priceCoins:25,requiresXp:150},{id:"pack_stickers",title:"Pack Stickers",description:"Stickers virtuels  collectionner",priceCoins:8},{id:"titre_champion",title:"Titre Champion",description:"Titre spcial dans ton profil",priceCoins:20,requiresXp:100}];function ZP(){return fE}async function pE(r){return(await Yt(It(Ce,"users",r,"inventory"))).docs.map(t=>({id:t.id,...t.data()}))}async function ek(r,e){const t=fE.find(h=>h.id===e);if(!t)throw new Error("Item inconnu");const s=Ye(Ce,"users",r,"stats","main"),o=Ye(Ce,"users",r,"inventory",e);return await lE(Ce,async h=>{const[f,g]=await Promise.all([h.get(s),h.get(o)]),y=f.exists()?f.data():await Ep(r);if(g.exists())throw new Error("Dj possd");const v=y.coins||0,E=y.xp||0;if(v<t.priceCoins)throw new Error("Pas assez de pices");if(t.requiresXp&&E<t.requiresXp)throw new Error("XP insuffisant");return h.set(o,{acquiredAt:mn(),title:t.title,description:t.description,priceCoins:t.priceCoins,requiresXp:t.requiresXp||null}),h.set(s,{coins:v-t.priceCoins,xp:E,updatedAt:mn()},{merge:!0}),{coins:v-t.priceCoins,xp:E}})}const T_=[{id:"fr",title:"Franais"},{id:"math",title:"Maths"},{id:"en",title:"Anglais"},{id:"es",title:"Espagnol"},{id:"hist",title:"Histoire"}];function tk(){const{user:r}=Ws(),[e,t]=Ee.useState([]),[s,o]=Ee.useState("fr"),[l,h]=Ee.useState([]),[f,g]=Ee.useState(null),[y,v]=Ee.useState([]);return Ee.useEffect(()=>{(async()=>{try{const E=await BP();t(E.length?E:T_)}catch{t(T_)}})()},[]),Ee.useEffect(()=>{(async()=>{const E=await hE(s,{uid:r?.uid});h(E)})()},[s,r]),Ee.useEffect(()=>{r&&(async()=>{const E=await Ep(r.uid);g(E);const C=await pE(r.uid);v(C)})()},[r]),A.jsxs("div",{className:"container grid",children:[A.jsx("div",{className:"card",children:A.jsxs("div",{className:"row",style:{justifyContent:"space-between"},children:[A.jsxs("div",{children:[A.jsx("h2",{style:{margin:0},children:"Salut Malo "}),A.jsx("div",{className:"small",children:"Choisis une matire, puis un thme. Objectif : 10 questions par jour."})]}),f&&A.jsxs("div",{className:"kpi",children:[A.jsxs("div",{className:"pill",children:["XP: ",A.jsx("strong",{children:f.xp??0})]}),A.jsxs("div",{className:"pill",children:["Pices: ",A.jsx("strong",{children:f.coins??0})]}),A.jsxs("div",{className:"pill",children:["Srie: ",A.jsx("strong",{children:f.streakDays??0})," jours"]})]})]})}),A.jsxs("div",{className:"grid2",children:[A.jsxs("div",{className:"card",children:[A.jsx("h3",{style:{marginTop:0},children:"Matire"}),A.jsx("select",{className:"input",value:s,onChange:E=>o(E.target.value),children:e.map(E=>A.jsx("option",{value:E.id,children:E.title},E.id))}),A.jsx("div",{className:"small",style:{marginTop:8},children:"Priorits : Franais (grammaire & conjugaison) + Maths (fractions)."})]}),A.jsxs("div",{className:"card",children:[A.jsx("h3",{style:{marginTop:0},children:"Thmes"}),l.length===0?A.jsx("div",{className:"small",children:"Aucun thme pour linstant. (Parent : importe un pack JSON)"}):A.jsx("div",{className:"grid",children:l.map(E=>A.jsx(Eo,{className:"btn secondary",to:`/theme/${E.id}`,children:E.title},E.id))})]})]}),f?.badges?.length?A.jsxs("div",{className:"card",children:[A.jsx("h3",{style:{marginTop:0},children:"Badges"}),A.jsx("div",{className:"row",children:f.badges.map(E=>A.jsx("span",{className:"badge",children:E},E))})]}):null,y.length?A.jsxs("div",{className:"card",children:[A.jsx("h3",{style:{marginTop:0},children:"Inventaire"}),A.jsx("div",{className:"row",children:y.map(E=>A.jsx("span",{className:"badge",children:E.title||E.id},E.id))})]}):null]})}function nk(){const{user:r,signInGoogle:e}=Ws(),t=Dc();return Ee.useEffect(()=>{r&&t("/")},[r]),A.jsx("div",{className:"container",children:A.jsxs("div",{className:"card",children:[A.jsx("h2",{style:{marginTop:0},children:"Connexion"}),A.jsx("p",{className:"small",children:"Connexion Google recommande (simple sur tablette Android)."}),A.jsx("button",{className:"btn",onClick:e,children:"Se connecter avec Google"}),A.jsx("hr",{}),A.jsxs("p",{className:"small",children:["Astuce : aprs ta premire connexion (toi), va dans Firestore et mets ",A.jsxs("code",{children:["users/","{uid}",".role"]}),'  "parent".']})]})})}function rk(r,e){return r.type==="mcq"?e===r.answerIndex:r.type==="short_text"||r.type==="fill_blank"?r.expected.includes(Uo(e||"")):!1}function sk(r,e){return r===1?e?3:-1:r===2?e?5:-2:e?7:-3}function ik(r){return Math.max(0,Math.min(100,r))}function ok(r){return r>=80?"mastered":r>=60?"nearly":r>=30?"developing":"weak"}function mE(r){return r.toISOString().slice(0,10)}function ak(r,e){const t=new Date(r+"T00:00:00");return t.setDate(t.getDate()+e),mE(t)}function lk(r,e,t){const s=Math.max(0,Math.min(100,r));let o=1;return s>=81||e==="mastered"?o=10:s>=61||e==="nearly"?o=4:s>=31||e==="developing"?o=2:o=1,ak(t,o)}async function uk(r){const{uid:e,subjectId:t,themeId:s,answers:o,exercises:l,durationSec:h}=r,g=mE(new Date),y=Ye(It(Ce,"users",e,"attempts")),v=It(Ce,"users",e,"attemptItems"),E=Ye(Ce,"users",e,"progressSummary","main"),C=l.map((ce,Ve)=>{const Ue=rk(ce,o[ce.id]);return{exerciseId:ce.id,subjectId:t,themeId:s,difficulty:ce.difficulty,tags:ce.tags?.slice(0,3)||[],correct:Ue,index:Ve,prompt:ce.prompt,choices:ce.choices,readingContext:ce.readingContext}}),M=C.filter(ce=>ce.correct).length,q=C.length,$=new Map;C.forEach(ce=>{const Ve=sk(ce.difficulty,ce.correct);ce.tags.forEach(Ue=>{const Pe=$.get(Ue)||{delta:0,correct:0,wrong:0,results:[]};Pe.delta+=Ve,Pe.correct+=ce.correct?1:0,Pe.wrong+=ce.correct?0:1,Pe.results.push(ce.correct),$.set(Ue,Pe)})});const b=Array.from($.keys()),re=await Promise.all(b.map(ce=>Bs(Ye(Ce,"users",e,"tagProgress",ce)))),se=wp(Ce),G={subjectId:t,themeId:s,score:M,outOf:q,durationSec:h,itemsCount:C.length,date:g,createdAt:mn()};se.set(y,G),C.forEach(ce=>{const Ve=Ye(v);se.set(Ve,{...ce,createdAt:mn(),answer:o[ce.exerciseId]??null})});const W={weak:0,developing:0,nearly:0,mastered:0},te={};b.forEach((ce,Ve)=>{const Ue=re[Ve],Pe=Ue.exists()?Ue.data():null,Z=$.get(ce),ae=[...Array.isArray(Pe?.last7Results)?Pe.last7Results:[],...Z.results].slice(-7),L={correct:ae.filter(vn=>vn).length,wrong:ae.filter(vn=>!vn).length};let Q=Pe?.streakCorrect||0,Ae=Pe?.streakWrong||0;Z.results.forEach(vn=>{vn?(Q+=1,Ae=0):(Ae+=1,Q=0)});const ke=typeof Pe?.mastery=="number"?Pe.mastery:0,xe=ik(ke+Z.delta),De=ok(xe),$e=Pe?.bucket;$e&&(W[$e]-=1),W[De]+=1;const je=lk(xe,De,g),Ge=Ye(Ce,"users",e,"tagProgress",ce),Ct={tagId:ce,mastery:xe,bucket:De,attempts:(Pe?.attempts||0)+Z.results.length,correctAnswers:(Pe?.correctAnswers||0)+Z.correct,wrongAnswers:(Pe?.wrongAnswers||0)+Z.wrong,last7Results:ae,last7:L,lastSeenAt:mn(),lastCorrectAt:Z.correct>0?mn():Pe?.lastCorrectAt||null,streakCorrect:Q,streakWrong:Ae,lastDelta:Z.delta,nextDueDate:je,updatedAt:mn()};te[ce]=Ct,se.set(Ge,Ct,{merge:!0})});const ie=await Bs(E),I=ie.exists()?ie.data():null,S=I?.masteryBuckets||{weak:0,developing:0,nearly:0,mastered:0},R={weak:(S.weak||0)+W.weak,developing:(S.developing||0)+W.developing,nearly:(S.nearly||0)+W.nearly,mastered:(S.mastered||0)+W.mastered},x=Object.values(te).sort((ce,Ve)=>ce.mastery-Ve.mastery).map(ce=>ce.tagId),N=Array.isArray(I?.topWeakTags)?I.topWeakTags:[],D=Array.from(new Set([...x,...N])).slice(0,3),P={totalAnswers:(I?.totalAnswers||0)+q,correctAnswers:(I?.correctAnswers||0)+M,totalAttempts:(I?.totalAttempts||0)+1,masteryBuckets:R,lastAttemptId:y.id,lastDate:g,updatedAt:mn(),topWeakTags:D};return se.set(E,P,{merge:!0}),await se.commit(),{attemptId:y.id,score:M,outOf:q,summary:P,tagsUpdated:te}}function ck(r){const e=[];return Array.isArray(r.exercises)&&e.push(...r.exercises),Array.isArray(r.readings)&&r.readings.forEach(t=>{Array.isArray(t.questions)&&t.questions.forEach(s=>{e.push({...s,readingContext:{readingId:t.id,title:t.title,text:t.text}})})}),e}function I_(r,e){return r.type==="mcq"?e===r.answerIndex:r.type==="short_text"||r.type==="fill_blank"?r.expected.includes(Uo(e||"")):!1}function Xu(r){const e=[],t=/_([^_]+)_/g;let s=0,o,l=0;for(;(o=t.exec(r))!==null;)o.index>s&&e.push(r.slice(s,o.index)),e.push(A.jsx("span",{style:{textDecoration:"underline"},children:o[1]},`u-${l++}`)),s=t.lastIndex;return s<r.length&&e.push(r.slice(s)),e}function hk(){const{themeId:r}=uT(),e=Dc(),{user:t}=Ws(),[s,o]=Ee.useState(null),[l,h]=Ee.useState([]),[f,g]=Ee.useState({}),[y]=Ee.useState(()=>Date.now()),[v,E]=Ee.useState(null),[C,M]=Ee.useState([]),[q,$]=Ee.useState([]),[b,re]=Ee.useState(!1);Ee.useEffect(()=>{(async()=>{if(!r)return;const G=await Bs(Ye(Ce,"themes",r)),W=G.exists()?{id:r,...G.data()}:null;o(W);const te=await dE(r,{uid:t?.uid});let I=Array.isArray(W?.readings)?W.readings:[];try{const x=await zP(r);x.length&&(I=x)}catch{}const R=[...ck({exercises:te,readings:I})].sort(()=>Math.random()-.5);h(R.slice(0,10)),g({}),E(null),$([]),re(!1)})()},[r,t]);const se=async()=>{if(!t||!r||!s)return;const G=Math.max(1,Math.round((Date.now()-y)/1e3)),W=l.map(x=>({exerciseId:x.id,difficulty:x.difficulty,tags:x.tags||[],correct:I_(x,f[x.id])})),te=await uk({uid:t.uid,subjectId:s.subjectId,themeId:r,answers:f,exercises:l,durationSec:G}),ie=await JP({uid:t.uid,subjectId:s.subjectId,items:W,existingAttemptId:te.attemptId}),I=new Set(l.flatMap(x=>x.tags||[])),S=Object.values(te.tagsUpdated||{}).filter(x=>x&&I.has(x.tagId||"")).sort((x,N)=>(x.mastery??0)-(N.mastery??0)).slice(0,3).map(x=>x.tagId);M(S),E({score:ie.score,outOf:ie.outOf,durationSec:G,...ie});const R=l.map((x,N)=>{const D=f[x.id],P=I_(x,D);let ce="",Ve="";if(x.type==="mcq"){const Ue=x;ce=Ue.choices[Ue.answerIndex]||"",Ve=typeof D=="number"&&Ue.choices[D]||""}else(x.type==="short_text"||x.type==="fill_blank")&&(ce=x.expected[0]||"",Ve=D||"");return{id:x.id,prompt:x.prompt,correct:P,expected:ce||"",userAnswer:(Ve??"").toString()||"",idx:N+1}});$(R),re(!0)};return r?b&&q.length?A.jsxs("div",{className:"container grid",children:[A.jsxs("div",{className:"card",children:[A.jsxs("h2",{style:{margin:0},children:["Corrections  ",s?.title]}),v&&A.jsxs("div",{className:"small",children:["Score ",A.jsxs("strong",{children:[v.score,"/",v.outOf]}),"  ",v.durationSec,"s  +",v.xpGain," XP  +",v.coinsGain," pices"]})]}),A.jsxs("div",{className:"card",children:[A.jsx("div",{className:"grid",children:q.map(G=>A.jsxs("div",{className:"pill",style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:6,background:G.correct?"rgba(46, 204, 113, 0.12)":"rgba(255, 90, 111, 0.12)",border:G.correct?"1px solid rgba(46, 204, 113, 0.4)":"1px solid rgba(255, 90, 111, 0.4)"},children:[A.jsxs("div",{className:"small",children:["Question ",G.idx,"  ",G.correct?A.jsx("span",{className:"badge",style:{borderColor:"rgba(46,204,113,.6)",color:"#7fffb2"},children:" Bonne rponse"}):A.jsx("span",{className:"badge",style:{borderColor:"rgba(255,90,111,.6)",color:"#ff9fb0"},children:" Mauvaise rponse"})]}),A.jsx("div",{style:{fontWeight:700},children:G.prompt}),A.jsxs("div",{className:"small",children:["Ta rponse : ",A.jsx("strong",{children:G.userAnswer})]}),!G.correct&&A.jsxs("div",{className:"small",children:["Correction : ",A.jsx("strong",{children:G.expected})]})]},G.id))}),A.jsxs("div",{className:"row",style:{marginTop:16},children:[A.jsx("button",{className:"btn",onClick:()=>e("/"),children:"Retour  laccueil"}),A.jsx("button",{className:"btn secondary",onClick:()=>{re(!1),$([]),E(null),g({})},children:"Refaire une session"})]})]})]}):A.jsxs("div",{className:"container grid",children:[A.jsxs("div",{className:"card",children:[A.jsx("h2",{style:{margin:0},children:s?.title||"Session"}),A.jsx("div",{className:"small",children:"Fais de ton mieux. Objectif : rgularit "})]}),l.map((G,W)=>{const te=G.readingContext,ie=te&&(W===0||l[W-1].readingContext?.readingId!==te.readingId);return A.jsxs("div",{className:"card",children:[ie&&te&&A.jsxs("div",{style:{marginBottom:10},children:[A.jsxs("div",{className:"small",style:{marginBottom:4},children:["Lecture : ",te.title]}),A.jsx("div",{className:"small",style:{whiteSpace:"pre-wrap"},children:Xu(te.text)}),A.jsx("hr",{})]}),A.jsxs("div",{className:"small",children:["Question ",W+1," / ",l.length," ",A.jsxs("span",{className:"badge",children:["Difficult ",G.difficulty]})]}),A.jsx("div",{style:{fontWeight:800,marginTop:6},children:Xu(G.prompt)}),G.type==="mcq"&&A.jsx("div",{className:"grid",style:{marginTop:10},children:G.choices.map((I,S)=>A.jsx("button",{type:"button",className:"btn "+(f[G.id]===S?"":"secondary"),onClick:()=>g(R=>({...R,[G.id]:S})),style:{textAlign:"left",opacity:f[G.id]===S?1:.85},"aria-pressed":f[G.id]===S,children:Xu(I)},S))}),G.type==="short_text"&&A.jsx("div",{style:{marginTop:10},children:A.jsx("input",{className:"input",placeholder:"Ta rponse",value:f[G.id]??"",onChange:I=>g(S=>({...S,[G.id]:I.target.value}))})}),G.type==="fill_blank"&&A.jsxs("div",{style:{marginTop:10},children:[A.jsx("div",{className:"small",children:Xu(G.text)}),A.jsx("input",{className:"input",placeholder:"Le mot manquant",value:f[G.id]??"",onChange:I=>g(S=>({...S,[G.id]:I.target.value}))})]})]},G.id)}),A.jsxs("div",{className:"card",children:[A.jsxs("div",{className:"row",children:[A.jsx("button",{className:"btn",onClick:se,children:"Corriger et enregistrer"}),v&&A.jsxs("div",{className:"small",children:["Score ",A.jsxs("strong",{children:[v.score,"/",v.outOf]}),"  ",v.durationSec,"s  +",A.jsx("strong",{children:v.xpGain})," XP  +",A.jsx("strong",{children:v.coinsGain})," pices  Srie ",A.jsx("strong",{children:v.streakDays})]})]}),v?.badges?.length?A.jsx("div",{className:"row",style:{marginTop:10},children:v.badges.map(G=>A.jsx("span",{className:"badge",children:G},G))}):null,C.length?A.jsxs("div",{className:"small",style:{marginTop:10},children:["Tags  renforcer (thme) : ",C.map(G=>A.jsx("span",{className:"badge",children:G},G))]}):null]}),q.length?A.jsxs("div",{className:"card",children:[A.jsx("h3",{style:{marginTop:0},children:"Corrections"}),A.jsx("div",{className:"grid",children:q.map(G=>A.jsxs("div",{className:"pill",style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:6},children:[A.jsxs("div",{className:"small",children:["Question ",G.idx,"  ",G.correct?A.jsx("span",{className:"badge",children:" Bonne rponse"}):A.jsx("span",{className:"badge",children:" Mauvaise rponse"})]}),A.jsx("div",{style:{fontWeight:700},children:G.prompt}),A.jsxs("div",{className:"small",children:["Ta rponse : ",A.jsx("strong",{children:G.userAnswer})]}),!G.correct&&A.jsxs("div",{className:"small",children:["Correction : ",A.jsx("strong",{children:G.expected})]})]},G.id))})]}):null]}):A.jsx("div",{className:"container",children:A.jsx("div",{className:"card",children:"Thme introuvable."})})}function dk(){const[r,e]=Ee.useState(""),t=async s=>{if(!s)return;e("Lecture du fichier");const o=await s.text();let l;try{l=JSON.parse(o)}catch{e(" JSON invalide");return}if(!l?.subjects?.length){e(" Format inattendu (subjects manquant)");return}e("Import en cours"),await $P(l),e(" Import termin")};return A.jsx("div",{className:"container",children:A.jsxs("div",{className:"card",children:[A.jsx("h2",{style:{marginTop:0},children:"Import dexercices (Parent)"}),A.jsx("p",{className:"small",children:"Importe un pack JSON (gnr par moi) : matires  thmes  exercices."}),A.jsx("input",{className:"input",type:"file",accept:".json,application/json",onChange:s=>t(s.target.files?.[0]||null)}),r&&A.jsx("p",{className:"small",style:{marginTop:10},children:r}),A.jsx("hr",{}),A.jsx("p",{className:"small",children:"Conseil : commence par importer les packs Franais (grammaire + conjugaison) et Maths (fractions)."})]})})}const fk=[{id:"all",label:"Toutes"},{id:"fr",label:"Franais"},{id:"math",label:"Maths"},{id:"en",label:"Anglais"},{id:"es",label:"Espagnol"},{id:"hist",label:"Histoire"}];function pk(r){if(!r)return null;const e=r.split("_")[0];return e==="fr"||e==="math"||e==="en"||e==="es"||e==="hist"?e:null}function S_(r){return r.last7?r.last7:Array.isArray(r.last7Results)?{correct:r.last7Results.filter(Boolean).length,wrong:r.last7Results.filter(e=>!e).length}:{correct:0,wrong:0}}function mk(){const{user:r,role:e}=Ws(),[t,s]=Ee.useState([]),[o,l]=Ee.useState(""),[h,f]=Ee.useState([]),[g,y]=Ee.useState(!1),[v,E]=Ee.useState("fr"),[C,M]=Ee.useState(null),[q,$]=Ee.useState(""),[b,re]=Ee.useState({});Ee.useEffect(()=>{r&&(e==="parent"?(async()=>{const S=(await Yt(Lr(It(Ce,"users"),br("role","==","child")))).docs.map(R=>({id:R.id,displayName:R.data().displayName||"Enfant"}));s(S),S[0]&&l(S[0].id)})():l(r.uid))},[r,e]);const se=Ee.useCallback(async I=>{y(!0);const R=(await Yt(It(Ce,"users",I,"tagProgress"))).docs.map(D=>({id:D.id,tagId:D.id,...D.data()}));f(R);const N=(await Yt(It(Ce,"users",I,"progressSummary"))).docs.find(D=>D.id==="main");M(N?.data()||null),y(!1)},[]);Ee.useEffect(()=>{o&&se(o)},[o,se]);const G=async I=>{if(!o||(q!==I&&$(I),b[I]?.items?.length||b[I]?.loading))return;re(D=>({...D,[I]:{loading:!0,items:[]}}));let S;try{S=await Yt(Lr(It(Ce,"users",o,"attemptItems"),br("tags","array-contains",I),RP(100)))}catch{S=await Yt(Lr(It(Ce,"users",o,"attemptItems"),br("tags","array-contains",I)))}const R=S.docs.map(D=>({id:D.id,...D.data()})),x={};await Promise.all(Array.from(new Set(R.map(D=>D.exerciseId))).map(async D=>{const P=await Bs(Ye(Ce,"exercises",D));P.exists()?x[D]=P.data():x[D]={prompt:D}}));const N=R.map(D=>({...D,prompt:D.prompt||x[D.exerciseId]?.prompt||D.exerciseId,choices:D.choices||x[D.exerciseId]?.choices||null,readingContext:D.readingContext})).sort((D,P)=>{const ce=D.createdAt?.toMillis?D.createdAt.toMillis():0;return(P.createdAt?.toMillis?P.createdAt.toMillis():0)-ce});re(D=>({...D,[I]:{loading:!1,items:N}}))},W=I=>{if(q===I){$("");return}G(I)},te=h.filter(I=>v==="all"?!0:pk(I.tagId)===v).sort((I,S)=>(I.mastery||0)-(S.mastery||0)).slice(0,20),ie=()=>{const I=[["tagId","mastery","bucket","attempts","correct","wrong","last7_correct","last7_wrong","nextDueDate"]];h.forEach(D=>{const P=S_(D);I.push([D.tagId||D.id,String(D.mastery??0),D.bucket||"",String(D.attempts??0),String(D.correctAnswers??0),String(D.wrongAnswers??0),String(P.correct),String(P.wrong),D.nextDueDate||""])});const S=I.map(D=>D.map(P=>`"${(P??"").toString().replace(/"/g,'""')}"`).join(",")).join(`
`),R=new Blob([S],{type:"text/csv;charset=utf-8;"}),x=URL.createObjectURL(R),N=document.createElement("a");N.href=x,N.download=`progress-${o||"user"}.csv`,N.click(),URL.revokeObjectURL(x)};return A.jsxs("div",{className:"container",children:[A.jsxs("div",{className:"card",children:[A.jsx("h2",{style:{marginTop:0},children:"Progression par tag"}),A.jsxs("div",{className:"row",style:{gap:8,alignItems:"center"},children:[e==="parent"&&A.jsxs(A.Fragment,{children:[A.jsx("label",{className:"small",children:"Enfant"}),A.jsx("select",{className:"input",value:o,onChange:I=>l(I.target.value),children:t.map(I=>A.jsx("option",{value:I.id,children:I.displayName},I.id))})]}),A.jsx("label",{className:"small",children:"Matire"}),A.jsx("select",{className:"input",value:v,onChange:I=>E(I.target.value),children:fk.map(I=>A.jsx("option",{value:I.id,children:I.label},I.id))}),A.jsx("button",{className:"btn secondary",onClick:ie,disabled:!h.length,children:"Tlcharger CSV"})]}),C&&A.jsxs("div",{className:"kpi",style:{marginTop:10},children:[A.jsxs("div",{className:"pill",children:["Rponses: ",A.jsx("strong",{children:C.totalAnswers||0})]}),A.jsxs("div",{className:"pill",children:["Taux: ",A.jsxs("strong",{children:[C.totalAnswers?Math.round((C.correctAnswers||0)/C.totalAnswers*100):0,"%"]})]}),A.jsxs("div",{className:"pill",children:["Tentatives: ",A.jsx("strong",{children:C.totalAttempts||0})]})]})]}),g?A.jsx("div",{className:"card",children:"Chargement"}):A.jsxs("div",{className:"card",children:[A.jsx("h3",{style:{marginTop:0},children:"Top 20 faibles"}),te.length===0?A.jsx("div",{className:"small",children:"Aucun tag pour le moment."}):A.jsx("div",{className:"grid",children:te.map(I=>{const S=S_(I),R=q===(I.tagId||I.id),x=b[I.tagId||I.id]||{loading:!1,items:[]};return A.jsxs("div",{className:"card",style:{padding:12},children:[A.jsxs("div",{className:"row",style:{justifyContent:"space-between",alignItems:"center"},children:[A.jsxs("div",{onClick:()=>W(I.tagId||I.id),style:{cursor:"pointer",flex:1},children:[A.jsx("div",{style:{fontWeight:700},children:I.tagId}),A.jsxs("div",{className:"small",children:[I.mastery??0,"/100  ",I.bucket,"  ",S.correct,"/",S.correct+S.wrong," sur 7  Prochaine: ",I.nextDueDate||""]}),A.jsx("div",{style:{height:8,background:"rgba(255,255,255,0.08)",borderRadius:999,marginTop:6,width:"100%"},children:A.jsx("div",{style:{height:8,borderRadius:999,width:`${Math.min(100,Math.max(0,I.mastery||0))}%`,background:"linear-gradient(90deg,#ff5a6f,#7aa2ff)"}})}),A.jsx("div",{className:"row",style:{marginTop:6,gap:4},children:(I.last7Results||[]).map((N,D)=>A.jsx("span",{style:{width:10,height:10,borderRadius:"50%",background:N?"#2ecc71":"#ff5a6f",opacity:.9}},D))})]}),A.jsx("button",{className:"btn secondary",style:{width:36,height:36},onClick:()=>W(I.tagId||I.id),children:R?"":"+"})]}),R&&A.jsx("div",{className:"card",style:{marginTop:10,background:"rgba(255,255,255,0.03)"},children:x.loading?A.jsx("div",{className:"small",children:"Chargement"}):x.items.length===0?A.jsx("div",{className:"small",children:"Aucune question trouve pour ce tag."}):A.jsx("div",{className:"grid",children:x.items.map(N=>A.jsxs("div",{className:"pill",style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:6},children:[A.jsxs("div",{className:"small",children:[N.createdAt?.toDate?N.createdAt.toDate().toLocaleString():"","  Diff ",N.difficulty,"  ",N.correct?"":""]}),A.jsx("div",{style:{fontWeight:700},children:N.prompt}),N.readingContext&&A.jsxs("div",{className:"small",style:{whiteSpace:"pre-wrap"},children:[A.jsxs("div",{style:{fontWeight:600,marginBottom:4},children:["Lecture : ",N.readingContext.title]}),N.readingContext.text]}),Array.isArray(N.choices)&&typeof N.answer=="number"?A.jsxs("div",{className:"small",children:["Rponse : ",A.jsx("strong",{children:N.choices[N.answer]||N.answer})]}):A.jsxs("div",{className:"small",children:["Rponse : ",A.jsx("strong",{children:N.answer??""})]})]},N.id))})})]},I.id)})})]})]})}const A_=[{id:"all",label:"Toutes"},{id:"fr",label:"Franais"},{id:"math",label:"Maths"},{id:"en",label:"Anglais"},{id:"es",label:"Espagnol"},{id:"hist",label:"Histoire"}];function gk(){const[r,e]=Ee.useState([]),[t,s]=Ee.useState(""),[o,l]=Ee.useState("all"),[h,f]=Ee.useState([]),[g,y]=Ee.useState(!1),[v,E]=Ee.useState({}),[C,M]=Ee.useState(null);Ee.useEffect(()=>{(async()=>{const te=(await Yt(Lr(It(Ce,"users"),br("role","==","child")))).docs.map(ie=>({id:ie.id,displayName:ie.data().displayName||"Enfant"}));e(te),te[0]&&s(te[0].id)})()},[]),Ee.useEffect(()=>{t&&(y(!0),(async()=>{const W=A_.filter(S=>S.id!=="all").map(S=>S.id),te=o==="all"?W:[o],ie=[];for(const S of te){const R=await hE(S,{uid:t,includeHidden:!0,includeOverrides:!0});ie.push(...R)}const I=ie.sort((S,R)=>(S.title||"").localeCompare(R.title||""));f(I),y(!1)})())},[t,o]);const q=async(W,te)=>{t&&(await HP(t,W,te),f(ie=>ie.map(I=>I.id===W?{...I,visibleOverride:te}:I)))},$=async(W,te)=>{await qP(W,te),f(ie=>ie.map(I=>I.id===W?{...I,hidden:te}:I))},b=async W=>{if(!window.confirm("Supprimer ce thme et toutes ses questions ?"))return;const te=await KP(W);f(ie=>ie.filter(I=>I.id!==W)),E(ie=>{const I={...ie};return delete I[W],I}),te.hidden&&f(ie=>ie.map(I=>I.id===W?{...I,hidden:!0}:I))},re=async W=>{M(W);const te=await dE(W,{uid:t,includeHidden:!0,includeOverrides:!0});E(ie=>({...ie,[W]:te})),M(null)},se=async(W,te)=>{await WP(W,te),E(ie=>{const I={};return Object.keys(ie).forEach(S=>{I[S]=ie[S].map(R=>R.id===W?{...R,hidden:te}:R)}),{...ie,...I}})},G=async(W,te,ie)=>{t&&(await GP(t,W,te),E(I=>({...I,[ie]:(I[ie]||[]).map(S=>S.id===W?{...S,visibleOverride:te}:S)})))};return A.jsxs("div",{className:"container",children:[A.jsxs("div",{className:"card",children:[A.jsx("h2",{style:{marginTop:0},children:"Modration contenus"}),A.jsxs("div",{className:"row",style:{gap:10},children:[A.jsxs("div",{className:"row",style:{gap:6},children:[A.jsx("span",{className:"small",children:"Enfant"}),A.jsx("select",{className:"input",value:t,onChange:W=>s(W.target.value),children:r.map(W=>A.jsx("option",{value:W.id,children:W.displayName},W.id))})]}),A.jsxs("div",{className:"row",style:{gap:6},children:[A.jsx("span",{className:"small",children:"Matire"}),A.jsx("select",{className:"input",value:o,onChange:W=>l(W.target.value),children:A_.map(W=>A.jsx("option",{value:W.id,children:W.label},W.id))})]})]})]}),g?A.jsx("div",{className:"card",children:"Chargement"}):A.jsxs("div",{className:"grid",children:[h.map(W=>{const te=W.visibleOverride,ie=te!==void 0?te:!W.hidden;return A.jsxs("div",{className:"card",children:[A.jsxs("div",{className:"row",style:{justifyContent:"space-between"},children:[A.jsxs("div",{children:[A.jsx("div",{style:{fontWeight:800},children:W.title}),A.jsx("div",{className:"small",children:W.subjectId}),W.hidden&&A.jsx("div",{className:"badge",children:"Masqu globalement"}),te===!1&&A.jsx("div",{className:"badge",children:"Masqu pour lenfant"})]}),A.jsxs("div",{className:"row",children:[A.jsx("button",{className:"btn secondary",onClick:()=>q(W.id,!ie),children:ie?"Masquer pour lenfant":"Afficher pour lenfant"}),A.jsx("button",{className:"btn secondary",onClick:()=>$(W.id,!W.hidden),children:W.hidden?"Ractiver globalement":"Masquer globalement"}),A.jsx("button",{className:"btn secondary",onClick:()=>b(W.id),children:"Supprimer"}),A.jsx("button",{className:"btn secondary",onClick:()=>re(W.id),children:"Voir questions"})]})]}),(v[W.id]||[]).length>0&&A.jsxs("div",{style:{marginTop:10},children:[A.jsx("div",{className:"small",style:{marginBottom:6},children:"Questions"}),A.jsx("div",{className:"grid",children:v[W.id].map(I=>{const S=I.visibleOverride,R=S!==void 0?S:!I.hidden;return A.jsxs("div",{className:"pill",style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:6},children:[A.jsxs("div",{className:"small",children:[I.prompt?.slice(0,80)||I.id," ",I.hidden&&A.jsx("span",{className:"badge",children:"Masqu global"})," ",S===!1&&A.jsx("span",{className:"badge",children:"Masqu enfant"})]}),A.jsxs("div",{className:"row",children:[A.jsx("button",{className:"btn secondary",onClick:()=>G(I.id,!R,W.id),children:R?"Masquer enfant":"Afficher enfant"}),A.jsx("button",{className:"btn secondary",onClick:()=>se(I.id,!I.hidden),children:I.hidden?"Ractiver global":"Masquer global"})]})]},I.id)})})]}),C===W.id&&A.jsx("div",{className:"small",style:{marginTop:6},children:"Chargement des questions"})]},W.id)}),h.length===0&&A.jsx("div",{className:"card small",children:"Aucun thme."})]})]})}function yk(){const{user:r}=Ws(),[e,t]=Ee.useState(null),[s,o]=Ee.useState({}),[l,h]=Ee.useState(""),[f,g]=Ee.useState(!1);Ee.useEffect(()=>{r&&(async()=>{const E=await Ep(r.uid);t(E);const C=await pE(r.uid),M={};C.forEach(q=>{M[q.id]=q}),o(M)})()},[r]);const y=async E=>{if(r){h(""),g(!0);try{const C=await ek(r.uid,E.id);t(M=>({...M||{},coins:C.coins,xp:C.xp})),o(M=>({...M,[E.id]:{acquiredAt:new Date().toISOString()}}))}catch(C){h(C.message||"Erreur achat")}finally{g(!1)}}},v=ZP();return A.jsxs("div",{className:"container",children:[A.jsxs("div",{className:"card",children:[A.jsx("h2",{style:{marginTop:0},children:"Rcompenses"}),A.jsx("div",{className:"small",children:"Utilise tes pices pour acheter et collectionner des items."}),e&&A.jsxs("div",{className:"kpi",style:{marginTop:8},children:[A.jsxs("div",{className:"pill",children:["Pices: ",A.jsx("strong",{children:e.coins||0})]}),A.jsxs("div",{className:"pill",children:["XP: ",A.jsx("strong",{children:e.xp||0})]})]}),l&&A.jsx("div",{className:"small",style:{color:"#ff5a6f",marginTop:8},children:l})]}),A.jsx("div",{className:"grid",children:v.map(E=>{const C=!!s[E.id],M=(e?.coins||0)>=E.priceCoins&&(!E.requiresXp||(e?.xp||0)>=E.requiresXp);return A.jsxs("div",{className:"card",style:{opacity:C?.7:1},children:[A.jsxs("div",{className:"row",style:{justifyContent:"space-between"},children:[A.jsxs("div",{children:[A.jsx("div",{style:{fontWeight:800},children:E.title}),A.jsx("div",{className:"small",children:E.description})]}),C&&A.jsx("span",{className:"badge",children:"Dj acquis"})]}),A.jsxs("div",{className:"row",style:{marginTop:10},children:[A.jsxs("div",{className:"pill",children:["Prix: ",E.priceCoins," pices"]}),E.requiresXp&&A.jsxs("div",{className:"pill",children:["Niv: ",E.requiresXp," XP"]})]}),!C&&A.jsx("button",{className:"btn",disabled:!M||f,onClick:()=>y(E),children:M?"Acheter":"Manque de pices/XP"})]},E.id)})})]})}function _k(){return A.jsx("div",{className:"container",children:A.jsx("div",{className:"card",children:"Page introuvable."})})}function vk(){return A.jsxs(DT,{children:[A.jsx("div",{className:"container",children:A.jsx(UP,{})}),A.jsxs(AT,{children:[A.jsx(Dr,{path:"/connexion",element:A.jsx(nk,{})}),A.jsx(Dr,{path:"/",element:A.jsx(Bd,{children:A.jsx(tk,{})})}),A.jsx(Dr,{path:"/theme/:themeId",element:A.jsx(Bd,{children:A.jsx(hk,{})})}),A.jsx(Dr,{path:"/admin/import",element:A.jsx(zd,{children:A.jsx(dk,{})})}),A.jsx(Dr,{path:"/admin/progression",element:A.jsx(zd,{children:A.jsx(mk,{})})}),A.jsx(Dr,{path:"/admin/moderation",element:A.jsx(zd,{children:A.jsx(gk,{})})}),A.jsx(Dr,{path:"/recompenses",element:A.jsx(Bd,{children:A.jsx(yk,{})})}),A.jsx(Dr,{path:"*",element:A.jsx(_k,{})})]})]})}function wk(){"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("${import.meta.env.BASE_URL}sw.js").catch(()=>{})})}D0.createRoot(document.getElementById("root")).render(A.jsx(Ee.StrictMode,{children:A.jsx(FP,{children:A.jsx(vk,{})})}));wk();
