function BE(r,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in r)){const l=Object.getOwnPropertyDescriptor(s,o);l&&Object.defineProperty(r,o,l.get?l:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function q_(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Dd={exports:{}},Qa={},Vd={exports:{}},Fe={};var Wg;function zE(){if(Wg)return Fe;Wg=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),T=Symbol.iterator;function C(j){return j===null||typeof j!="object"?null:(j=T&&j[T]||j["@@iterator"],typeof j=="function"?j:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$=Object.assign,z={};function D(j,Q,Ce){this.props=j,this.context=Q,this.refs=z,this.updater=Ce||O}D.prototype.isReactComponent={},D.prototype.setState=function(j,Q){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,Q,"setState")},D.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function Z(){}Z.prototype=D.prototype;function K(j,Q,Ce){this.props=j,this.context=Q,this.refs=z,this.updater=Ce||O}var ae=K.prototype=new Z;ae.constructor=K,$(ae,D.prototype),ae.isPureReactComponent=!0;var H=Array.isArray,J=Object.prototype.hasOwnProperty,re={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function A(j,Q,Ce){var xe,Ve={},Oe=null,je=null;if(Q!=null)for(xe in Q.ref!==void 0&&(je=Q.ref),Q.key!==void 0&&(Oe=""+Q.key),Q)J.call(Q,xe)&&!S.hasOwnProperty(xe)&&(Ve[xe]=Q[xe]);var Le=arguments.length-2;if(Le===1)Ve.children=Ce;else if(1<Le){for(var Ke=Array(Le),wt=0;wt<Le;wt++)Ke[wt]=arguments[wt+2];Ve.children=Ke}if(j&&j.defaultProps)for(xe in Le=j.defaultProps,Le)Ve[xe]===void 0&&(Ve[xe]=Le[xe]);return{$$typeof:r,type:j,key:Oe,ref:je,props:Ve,_owner:re.current}}function P(j,Q){return{$$typeof:r,type:j.type,key:Q,ref:j.ref,props:j.props,_owner:j._owner}}function x(j){return typeof j=="object"&&j!==null&&j.$$typeof===r}function b(j){var Q={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(Ce){return Q[Ce]})}var k=/\/+/g;function R(j,Q){return typeof j=="object"&&j!==null&&j.key!=null?b(""+j.key):Q.toString(36)}function ie(j,Q,Ce,xe,Ve){var Oe=typeof j;(Oe==="undefined"||Oe==="boolean")&&(j=null);var je=!1;if(j===null)je=!0;else switch(Oe){case"string":case"number":je=!0;break;case"object":switch(j.$$typeof){case r:case e:je=!0}}if(je)return je=j,Ve=Ve(je),j=xe===""?"."+R(je,0):xe,H(Ve)?(Ce="",j!=null&&(Ce=j.replace(k,"$&/")+"/"),ie(Ve,Q,Ce,"",function(wt){return wt})):Ve!=null&&(x(Ve)&&(Ve=P(Ve,Ce+(!Ve.key||je&&je.key===Ve.key?"":(""+Ve.key).replace(k,"$&/")+"/")+j)),Q.push(Ve)),1;if(je=0,xe=xe===""?".":xe+":",H(j))for(var Le=0;Le<j.length;Le++){Oe=j[Le];var Ke=xe+R(Oe,Le);je+=ie(Oe,Q,Ce,Ke,Ve)}else if(Ke=C(j),typeof Ke=="function")for(j=Ke.call(j),Le=0;!(Oe=j.next()).done;)Oe=Oe.value,Ke=xe+R(Oe,Le++),je+=ie(Oe,Q,Ce,Ke,Ve);else if(Oe==="object")throw Q=String(j),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.");return je}function _e(j,Q,Ce){if(j==null)return j;var xe=[],Ve=0;return ie(j,xe,"","",function(Oe){return Q.call(Ce,Oe,Ve++)}),xe}function Me(j){if(j._status===-1){var Q=j._result;Q=Q(),Q.then(function(Ce){(j._status===0||j._status===-1)&&(j._status=1,j._result=Ce)},function(Ce){(j._status===0||j._status===-1)&&(j._status=2,j._result=Ce)}),j._status===-1&&(j._status=0,j._result=Q)}if(j._status===1)return j._result.default;throw j._result}var Ae={current:null},G={transition:null},pe={ReactCurrentDispatcher:Ae,ReactCurrentBatchConfig:G,ReactCurrentOwner:re};function le(){throw Error("act(...) is not supported in production builds of React.")}return Fe.Children={map:_e,forEach:function(j,Q,Ce){_e(j,function(){Q.apply(this,arguments)},Ce)},count:function(j){var Q=0;return _e(j,function(){Q++}),Q},toArray:function(j){return _e(j,function(Q){return Q})||[]},only:function(j){if(!x(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},Fe.Component=D,Fe.Fragment=t,Fe.Profiler=o,Fe.PureComponent=K,Fe.StrictMode=s,Fe.Suspense=p,Fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pe,Fe.act=le,Fe.cloneElement=function(j,Q,Ce){if(j==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+j+".");var xe=$({},j.props),Ve=j.key,Oe=j.ref,je=j._owner;if(Q!=null){if(Q.ref!==void 0&&(Oe=Q.ref,je=re.current),Q.key!==void 0&&(Ve=""+Q.key),j.type&&j.type.defaultProps)var Le=j.type.defaultProps;for(Ke in Q)J.call(Q,Ke)&&!S.hasOwnProperty(Ke)&&(xe[Ke]=Q[Ke]===void 0&&Le!==void 0?Le[Ke]:Q[Ke])}var Ke=arguments.length-2;if(Ke===1)xe.children=Ce;else if(1<Ke){Le=Array(Ke);for(var wt=0;wt<Ke;wt++)Le[wt]=arguments[wt+2];xe.children=Le}return{$$typeof:r,type:j.type,key:Ve,ref:Oe,props:xe,_owner:je}},Fe.createContext=function(j){return j={$$typeof:h,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},j.Provider={$$typeof:l,_context:j},j.Consumer=j},Fe.createElement=A,Fe.createFactory=function(j){var Q=A.bind(null,j);return Q.type=j,Q},Fe.createRef=function(){return{current:null}},Fe.forwardRef=function(j){return{$$typeof:f,render:j}},Fe.isValidElement=x,Fe.lazy=function(j){return{$$typeof:v,_payload:{_status:-1,_result:j},_init:Me}},Fe.memo=function(j,Q){return{$$typeof:y,type:j,compare:Q===void 0?null:Q}},Fe.startTransition=function(j){var Q=G.transition;G.transition={};try{j()}finally{G.transition=Q}},Fe.unstable_act=le,Fe.useCallback=function(j,Q){return Ae.current.useCallback(j,Q)},Fe.useContext=function(j){return Ae.current.useContext(j)},Fe.useDebugValue=function(){},Fe.useDeferredValue=function(j){return Ae.current.useDeferredValue(j)},Fe.useEffect=function(j,Q){return Ae.current.useEffect(j,Q)},Fe.useId=function(){return Ae.current.useId()},Fe.useImperativeHandle=function(j,Q,Ce){return Ae.current.useImperativeHandle(j,Q,Ce)},Fe.useInsertionEffect=function(j,Q){return Ae.current.useInsertionEffect(j,Q)},Fe.useLayoutEffect=function(j,Q){return Ae.current.useLayoutEffect(j,Q)},Fe.useMemo=function(j,Q){return Ae.current.useMemo(j,Q)},Fe.useReducer=function(j,Q,Ce){return Ae.current.useReducer(j,Q,Ce)},Fe.useRef=function(j){return Ae.current.useRef(j)},Fe.useState=function(j){return Ae.current.useState(j)},Fe.useSyncExternalStore=function(j,Q,Ce){return Ae.current.useSyncExternalStore(j,Q,Ce)},Fe.useTransition=function(){return Ae.current.useTransition()},Fe.version="18.3.1",Fe}var Hg;function Pf(){return Hg||(Hg=1,Vd.exports=zE()),Vd.exports}var Gg;function qE(){if(Gg)return Qa;Gg=1;var r=Pf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(f,p,y){var v,T={},C=null,O=null;y!==void 0&&(C=""+y),p.key!==void 0&&(C=""+p.key),p.ref!==void 0&&(O=p.ref);for(v in p)s.call(p,v)&&!l.hasOwnProperty(v)&&(T[v]=p[v]);if(f&&f.defaultProps)for(v in p=f.defaultProps,p)T[v]===void 0&&(T[v]=p[v]);return{$$typeof:e,type:f,key:C,ref:O,props:T,_owner:o.current}}return Qa.Fragment=t,Qa.jsx=h,Qa.jsxs=h,Qa}var Kg;function $E(){return Kg||(Kg=1,Dd.exports=qE()),Dd.exports}var E=$E(),fe=Pf();const ge=q_(fe),WE=BE({__proto__:null,default:ge},[fe]);var Qu={},Od={exports:{}},un={},Md={exports:{}},jd={};var Qg;function HE(){return Qg||(Qg=1,(function(r){function e(G,pe){var le=G.length;G.push(pe);e:for(;0<le;){var j=le-1>>>1,Q=G[j];if(0<o(Q,pe))G[j]=pe,G[le]=Q,le=j;else break e}}function t(G){return G.length===0?null:G[0]}function s(G){if(G.length===0)return null;var pe=G[0],le=G.pop();if(le!==pe){G[0]=le;e:for(var j=0,Q=G.length,Ce=Q>>>1;j<Ce;){var xe=2*(j+1)-1,Ve=G[xe],Oe=xe+1,je=G[Oe];if(0>o(Ve,le))Oe<Q&&0>o(je,Ve)?(G[j]=je,G[Oe]=le,j=Oe):(G[j]=Ve,G[xe]=le,j=xe);else if(Oe<Q&&0>o(je,le))G[j]=je,G[Oe]=le,j=Oe;else break e}}return pe}function o(G,pe){var le=G.sortIndex-pe.sortIndex;return le!==0?le:G.id-pe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var h=Date,f=h.now();r.unstable_now=function(){return h.now()-f}}var p=[],y=[],v=1,T=null,C=3,O=!1,$=!1,z=!1,D=typeof setTimeout=="function"?setTimeout:null,Z=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ae(G){for(var pe=t(y);pe!==null;){if(pe.callback===null)s(y);else if(pe.startTime<=G)s(y),pe.sortIndex=pe.expirationTime,e(p,pe);else break;pe=t(y)}}function H(G){if(z=!1,ae(G),!$)if(t(p)!==null)$=!0,Me(J);else{var pe=t(y);pe!==null&&Ae(H,pe.startTime-G)}}function J(G,pe){$=!1,z&&(z=!1,Z(A),A=-1),O=!0;var le=C;try{for(ae(pe),T=t(p);T!==null&&(!(T.expirationTime>pe)||G&&!b());){var j=T.callback;if(typeof j=="function"){T.callback=null,C=T.priorityLevel;var Q=j(T.expirationTime<=pe);pe=r.unstable_now(),typeof Q=="function"?T.callback=Q:T===t(p)&&s(p),ae(pe)}else s(p);T=t(p)}if(T!==null)var Ce=!0;else{var xe=t(y);xe!==null&&Ae(H,xe.startTime-pe),Ce=!1}return Ce}finally{T=null,C=le,O=!1}}var re=!1,S=null,A=-1,P=5,x=-1;function b(){return!(r.unstable_now()-x<P)}function k(){if(S!==null){var G=r.unstable_now();x=G;var pe=!0;try{pe=S(!0,G)}finally{pe?R():(re=!1,S=null)}}else re=!1}var R;if(typeof K=="function")R=function(){K(k)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,_e=ie.port2;ie.port1.onmessage=k,R=function(){_e.postMessage(null)}}else R=function(){D(k,0)};function Me(G){S=G,re||(re=!0,R())}function Ae(G,pe){A=D(function(){G(r.unstable_now())},pe)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(G){G.callback=null},r.unstable_continueExecution=function(){$||O||($=!0,Me(J))},r.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<G?Math.floor(1e3/G):5},r.unstable_getCurrentPriorityLevel=function(){return C},r.unstable_getFirstCallbackNode=function(){return t(p)},r.unstable_next=function(G){switch(C){case 1:case 2:case 3:var pe=3;break;default:pe=C}var le=C;C=pe;try{return G()}finally{C=le}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(G,pe){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var le=C;C=G;try{return pe()}finally{C=le}},r.unstable_scheduleCallback=function(G,pe,le){var j=r.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?j+le:j):le=j,G){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=le+Q,G={id:v++,callback:pe,priorityLevel:G,startTime:le,expirationTime:Q,sortIndex:-1},le>j?(G.sortIndex=le,e(y,G),t(p)===null&&G===t(y)&&(z?(Z(A),A=-1):z=!0,Ae(H,le-j))):(G.sortIndex=Q,e(p,G),$||O||($=!0,Me(J))),G},r.unstable_shouldYield=b,r.unstable_wrapCallback=function(G){var pe=C;return function(){var le=C;C=pe;try{return G.apply(this,arguments)}finally{C=le}}}})(jd)),jd}var Xg;function GE(){return Xg||(Xg=1,Md.exports=HE()),Md.exports}var Yg;function KE(){if(Yg)return un;Yg=1;var r=Pf(),e=GE();function t(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(n,i){h(n,i),h(n+"Capture",i)}function h(n,i){for(o[n]=i,n=0;n<i.length;n++)s.add(i[n])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},T={};function C(n){return p.call(T,n)?!0:p.call(v,n)?!1:y.test(n)?T[n]=!0:(v[n]=!0,!1)}function O(n,i,a,c){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function $(n,i,a,c){if(i===null||typeof i>"u"||O(n,i,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function z(n,i,a,c,d,m,w){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=i,this.sanitizeURL=m,this.removeEmptyString=w}var D={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){D[n]=new z(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];D[i]=new z(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){D[n]=new z(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){D[n]=new z(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){D[n]=new z(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){D[n]=new z(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){D[n]=new z(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){D[n]=new z(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){D[n]=new z(n,5,!1,n.toLowerCase(),null,!1,!1)});var Z=/[\-:]([a-z])/g;function K(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(Z,K);D[i]=new z(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(Z,K);D[i]=new z(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(Z,K);D[i]=new z(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){D[n]=new z(n,1,!1,n.toLowerCase(),null,!1,!1)}),D.xlinkHref=new z("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){D[n]=new z(n,1,!1,n.toLowerCase(),null,!0,!0)});function ae(n,i,a,c){var d=D.hasOwnProperty(i)?D[i]:null;(d!==null?d.type!==0:c||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&($(i,a,d,c)&&(a=null),c||d===null?C(i)&&(a===null?n.removeAttribute(i):n.setAttribute(i,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(i=d.attributeName,c=d.attributeNamespace,a===null?n.removeAttribute(i):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?n.setAttributeNS(c,i,a):n.setAttribute(i,a))))}var H=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,J=Symbol.for("react.element"),re=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),b=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),ie=Symbol.for("react.suspense_list"),_e=Symbol.for("react.memo"),Me=Symbol.for("react.lazy"),Ae=Symbol.for("react.offscreen"),G=Symbol.iterator;function pe(n){return n===null||typeof n!="object"?null:(n=G&&n[G]||n["@@iterator"],typeof n=="function"?n:null)}var le=Object.assign,j;function Q(n){if(j===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);j=i&&i[1]||""}return`
`+j+n}var Ce=!1;function xe(n,i){if(!n||Ce)return"";Ce=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(B){var c=B}Reflect.construct(n,[],i)}else{try{i.call()}catch(B){c=B}n.call(i.prototype)}else{try{throw Error()}catch(B){c=B}n()}}catch(B){if(B&&c&&typeof B.stack=="string"){for(var d=B.stack.split(`
`),m=c.stack.split(`
`),w=d.length-1,N=m.length-1;1<=w&&0<=N&&d[w]!==m[N];)N--;for(;1<=w&&0<=N;w--,N--)if(d[w]!==m[N]){if(w!==1||N!==1)do if(w--,N--,0>N||d[w]!==m[N]){var V=`
`+d[w].replace(" at new "," at ");return n.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",n.displayName)),V}while(1<=w&&0<=N);break}}}finally{Ce=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?Q(n):""}function Ve(n){switch(n.tag){case 5:return Q(n.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 2:case 15:return n=xe(n.type,!1),n;case 11:return n=xe(n.type.render,!1),n;case 1:return n=xe(n.type,!0),n;default:return""}}function Oe(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case S:return"Fragment";case re:return"Portal";case P:return"Profiler";case A:return"StrictMode";case R:return"Suspense";case ie:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case b:return(n.displayName||"Context")+".Consumer";case x:return(n._context.displayName||"Context")+".Provider";case k:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case _e:return i=n.displayName||null,i!==null?i:Oe(n.type)||"Memo";case Me:i=n._payload,n=n._init;try{return Oe(n(i))}catch{}}return null}function je(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Oe(i);case 8:return i===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Le(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ke(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function wt(n){var i=Ke(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),c=""+n[i];if(!n.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,m=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return d.call(this)},set:function(w){c=""+w,m.call(this,w)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function nn(n){n._valueTracker||(n._valueTracker=wt(n))}function we(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),c="";return n&&(c=Ke(n)?n.checked?"true":"false":n.value),n=c,n!==a?(i.setValue(n),!0):!1}function ft(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Je(n,i){var a=i.checked;return le({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function ts(n,i){var a=i.defaultValue==null?"":i.defaultValue,c=i.checked!=null?i.checked:i.defaultChecked;a=Le(i.value!=null?i.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Vn(n,i){i=i.checked,i!=null&&ae(n,"checked",i,!1)}function In(n,i){Vn(n,i);var a=Le(i.value),c=i.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?Et(n,i.type,a):i.hasOwnProperty("defaultValue")&&Et(n,i.type,Le(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function Cr(n,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var c=i.type;if(!(c!=="submit"&&c!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,a||i===n.value||(n.value=i),n.defaultValue=i}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function Et(n,i,a){(i!=="number"||ft(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var pt=Array.isArray;function On(n,i,a,c){if(n=n.options,i){i={};for(var d=0;d<a.length;d++)i["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=i.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Le(a),i=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}i!==null||n[d].disabled||(i=n[d])}i!==null&&(i.selected=!0)}}function ra(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return le({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function sa(n,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(t(92));if(pt(a)){if(1<a.length)throw Error(t(93));a=a[0]}i=a}i==null&&(i=""),a=i}n._wrapperState={initialValue:Le(a)}}function Ol(n,i){var a=Le(i.value),c=Le(i.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),i.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function ns(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function ia(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qi(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?ia(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var rs,Ml=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,c,d){MSApp.execUnsafeLocalFunction(function(){return n(i,a,c,d)})}:n})(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(rs=rs||document.createElement("div"),rs.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=rs.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function si(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var ss={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jl=["Webkit","ms","Moz","O"];Object.keys(ss).forEach(function(n){jl.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),ss[i]=ss[n]})});function is(n,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||ss.hasOwnProperty(n)&&ss[n]?(""+i).trim():i+"px"}function $i(n,i){n=n.style;for(var a in i)if(i.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=is(a,i[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,d):n[a]=d}}var oa=le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Mn(n,i){if(i){if(oa[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function Wi(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var os=null;function Hi(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Rr=null,Pr=null,ct=null;function aa(n){if(n=Va(n)){if(typeof Rr!="function")throw Error(t(280));var i=n.stateNode;i&&(i=cu(i),Rr(n.stateNode,n.type,i))}}function as(n){Pr?ct?ct.push(n):ct=[n]:Pr=n}function ls(){if(Pr){var n=Pr,i=ct;if(ct=Pr=null,aa(n),i)for(n=0;n<i.length;n++)aa(i[n])}}function Ll(n,i){return n(i)}function Fl(){}var Yn=!1;function Ul(n,i,a){if(Yn)return n(i,a);Yn=!0;try{return Ll(n,i,a)}finally{Yn=!1,(Pr!==null||ct!==null)&&(Fl(),ls())}}function ii(n,i){var a=n.stateNode;if(a===null)return null;var c=cu(a);if(c===null)return null;a=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,i,typeof a));return a}var us=!1;if(f)try{var cs={};Object.defineProperty(cs,"passive",{get:function(){us=!0}}),window.addEventListener("test",cs,cs),window.removeEventListener("test",cs,cs)}catch{us=!1}function Bl(n,i,a,c,d,m,w,N,V){var B=Array.prototype.slice.call(arguments,3);try{i.apply(a,B)}catch(ee){this.onError(ee)}}var kr=!1,Jn=null,Gi=!1,Sn=null,zl={onError:function(n){kr=!0,Jn=n}};function ql(n,i,a,c,d,m,w,N,V){kr=!1,Jn=null,Bl.apply(zl,arguments)}function la(n,i,a,c,d,m,w,N,V){if(ql.apply(this,arguments),kr){if(kr){var B=Jn;kr=!1,Jn=null}else throw Error(t(198));Gi||(Gi=!0,Sn=B)}}function jn(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function ua(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function $l(n){if(jn(n)!==n)throw Error(t(188))}function Wl(n){var i=n.alternate;if(!i){if(i=jn(n),i===null)throw Error(t(188));return i!==n?null:n}for(var a=n,c=i;;){var d=a.return;if(d===null)break;var m=d.alternate;if(m===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===a)return $l(d),n;if(m===c)return $l(d),i;m=m.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=m;else{for(var w=!1,N=d.child;N;){if(N===a){w=!0,a=d,c=m;break}if(N===c){w=!0,c=d,a=m;break}N=N.sibling}if(!w){for(N=m.child;N;){if(N===a){w=!0,a=m,c=d;break}if(N===c){w=!0,c=m,a=d;break}N=N.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:i}function Hl(n){return n=Wl(n),n!==null?oi(n):null}function oi(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=oi(n);if(i!==null)return i;n=n.sibling}return null}var ca=e.unstable_scheduleCallback,Ki=e.unstable_cancelCallback,ai=e.unstable_shouldYield,xr=e.unstable_requestPaint,nt=e.unstable_now,ch=e.unstable_getCurrentPriorityLevel,Qi=e.unstable_ImmediatePriority,ha=e.unstable_UserBlockingPriority,li=e.unstable_NormalPriority,da=e.unstable_LowPriority,Xi=e.unstable_IdlePriority,ui=null,hn=null;function Gl(n){if(hn&&typeof hn.onCommitFiberRoot=="function")try{hn.onCommitFiberRoot(ui,n,void 0,(n.current.flags&128)===128)}catch{}}var dn=Math.clz32?Math.clz32:ci,Zn=Math.log,An=Math.LN2;function ci(n){return n>>>=0,n===0?32:31-(Zn(n)/An|0)|0}var er=64,hs=4194304;function Qe(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Nr(n,i){var a=n.pendingLanes;if(a===0)return 0;var c=0,d=n.suspendedLanes,m=n.pingedLanes,w=a&268435455;if(w!==0){var N=w&~d;N!==0?c=Qe(N):(m&=w,m!==0&&(c=Qe(m)))}else w=a&~d,w!==0?c=Qe(w):m!==0&&(c=Qe(m));if(c===0)return 0;if(i!==0&&i!==c&&(i&d)===0&&(d=c&-c,m=i&-i,d>=m||d===16&&(m&4194240)!==0))return i;if((c&4)!==0&&(c|=a&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=c;0<i;)a=31-dn(i),d=1<<a,c|=n[a],i&=~d;return c}function hi(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function di(n,i){for(var a=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,m=n.pendingLanes;0<m;){var w=31-dn(m),N=1<<w,V=d[w];V===-1?((N&a)===0||(N&c)!==0)&&(d[w]=hi(N,i)):V<=i&&(n.expiredLanes|=N),m&=~N}}function fa(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function pa(){var n=er;return er<<=1,(er&4194240)===0&&(er=64),n}function ma(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function fi(n,i,a){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-dn(i),n[i]=a}function hh(n,i){var a=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-dn(a),m=1<<d;i[d]=0,c[d]=-1,n[d]=-1,a&=~m}}function ga(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var c=31-dn(a),d=1<<c;d&i|n[c]&i&&(n[c]|=i),a&=~d}}var qe=0;function tr(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var ya,Yi,_a,va,wa,nr=!1,Ji=[],rr=null,sr=null,Mt=null,pi=new Map,br=new Map,fn=[],Kl="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ds(n,i){switch(n){case"focusin":case"focusout":rr=null;break;case"dragenter":case"dragleave":sr=null;break;case"mouseover":case"mouseout":Mt=null;break;case"pointerover":case"pointerout":pi.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":br.delete(i.pointerId)}}function Ln(n,i,a,c,d,m){return n===null||n.nativeEvent!==m?(n={blockedOn:i,domEventName:a,eventSystemFlags:c,nativeEvent:m,targetContainers:[d]},i!==null&&(i=Va(i),i!==null&&Yi(i)),n):(n.eventSystemFlags|=c,i=n.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),n)}function Ql(n,i,a,c,d){switch(i){case"focusin":return rr=Ln(rr,n,i,a,c,d),!0;case"dragenter":return sr=Ln(sr,n,i,a,c,d),!0;case"mouseover":return Mt=Ln(Mt,n,i,a,c,d),!0;case"pointerover":var m=d.pointerId;return pi.set(m,Ln(pi.get(m)||null,n,i,a,c,d)),!0;case"gotpointercapture":return m=d.pointerId,br.set(m,Ln(br.get(m)||null,n,i,a,c,d)),!0}return!1}function Zi(n){var i=_i(n.target);if(i!==null){var a=jn(i);if(a!==null){if(i=a.tag,i===13){if(i=ua(a),i!==null){n.blockedOn=i,wa(n.priority,function(){_a(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function et(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=eo(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);os=c,a.target.dispatchEvent(c),os=null}else return i=Va(a),i!==null&&Yi(i),n.blockedOn=a,!1;i.shift()}return!0}function Xl(n,i,a){et(n)&&a.delete(i)}function dh(){nr=!1,rr!==null&&et(rr)&&(rr=null),sr!==null&&et(sr)&&(sr=null),Mt!==null&&et(Mt)&&(Mt=null),pi.forEach(Xl),br.forEach(Xl)}function fs(n,i){n.blockedOn===i&&(n.blockedOn=null,nr||(nr=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,dh)))}function ps(n){function i(d){return fs(d,n)}if(0<Ji.length){fs(Ji[0],n);for(var a=1;a<Ji.length;a++){var c=Ji[a];c.blockedOn===n&&(c.blockedOn=null)}}for(rr!==null&&fs(rr,n),sr!==null&&fs(sr,n),Mt!==null&&fs(Mt,n),pi.forEach(i),br.forEach(i),a=0;a<fn.length;a++)c=fn[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<fn.length&&(a=fn[0],a.blockedOn===null);)Zi(a),a.blockedOn===null&&fn.shift()}var Dr=H.ReactCurrentBatchConfig,Vr=!0;function ir(n,i,a,c){var d=qe,m=Dr.transition;Dr.transition=null;try{qe=1,Ea(n,i,a,c)}finally{qe=d,Dr.transition=m}}function Yl(n,i,a,c){var d=qe,m=Dr.transition;Dr.transition=null;try{qe=4,Ea(n,i,a,c)}finally{qe=d,Dr.transition=m}}function Ea(n,i,a,c){if(Vr){var d=eo(n,i,a,c);if(d===null)Ih(n,i,c,or,a),ds(n,c);else if(Ql(d,n,i,a,c))c.stopPropagation();else if(ds(n,c),i&4&&-1<Kl.indexOf(n)){for(;d!==null;){var m=Va(d);if(m!==null&&ya(m),m=eo(n,i,a,c),m===null&&Ih(n,i,c,or,a),m===d)break;d=m}d!==null&&c.stopPropagation()}else Ih(n,i,c,null,a)}}var or=null;function eo(n,i,a,c){if(or=null,n=Hi(c),n=_i(n),n!==null)if(i=jn(n),i===null)n=null;else if(a=i.tag,a===13){if(n=ua(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return or=n,null}function to(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ch()){case Qi:return 1;case ha:return 4;case li:case da:return 16;case Xi:return 536870912;default:return 16}default:return 16}}var pn=null,no=null,Or=null;function Jl(){if(Or)return Or;var n,i=no,a=i.length,c,d="value"in pn?pn.value:pn.textContent,m=d.length;for(n=0;n<a&&i[n]===d[n];n++);var w=a-n;for(c=1;c<=w&&i[a-c]===d[m-c];c++);return Or=d.slice(n,1<c?1-c:void 0)}function mi(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function ar(){return!0}function Ta(){return!1}function Wt(n){function i(a,c,d,m,w){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=m,this.target=w,this.currentTarget=null;for(var N in n)n.hasOwnProperty(N)&&(a=n[N],this[N]=a?a(m):m[N]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?ar:Ta,this.isPropagationStopped=Ta,this}return le(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ar)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ar)},persist:function(){},isPersistent:ar}),i}var lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gi=Wt(lr),ms=le({},lr,{view:0,detail:0}),ro=Wt(ms),so,io,mn,yi=le({},ms,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:De,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==mn&&(mn&&n.type==="mousemove"?(so=n.screenX-mn.screenX,io=n.screenY-mn.screenY):io=so=0,mn=n),so)},movementY:function(n){return"movementY"in n?n.movementY:io}}),Ia=Wt(yi),Zl=le({},yi,{dataTransfer:0}),eu=Wt(Zl),oo=le({},ms,{relatedTarget:0}),jt=Wt(oo),tu=le({},lr,{animationName:0,elapsedTime:0,pseudoElement:0}),nu=Wt(tu),gs=le({},lr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),u=Wt(gs),g=le({},lr,{data:0}),_=Wt(g),I={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},F={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},q={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function se(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=q[n])?!!i[n]:!1}function De(){return se}var mt=le({},ms,{key:function(n){if(n.key){var i=I[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=mi(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?F[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:De,charCode:function(n){return n.type==="keypress"?mi(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?mi(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Xe=Wt(mt),Tt=le({},yi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gn=Wt(Tt),Mr=le({},ms,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:De}),ur=Wt(Mr),cr=le({},lr,{propertyName:0,elapsedTime:0,pseudoElement:0}),ao=Wt(cr),Sa=le({},yi,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),O0=Wt(Sa),M0=[9,13,27,32],fh=f&&"CompositionEvent"in window,Aa=null;f&&"documentMode"in document&&(Aa=document.documentMode);var j0=f&&"TextEvent"in window&&!Aa,jp=f&&(!fh||Aa&&8<Aa&&11>=Aa),Lp=" ",Fp=!1;function Up(n,i){switch(n){case"keyup":return M0.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bp(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var lo=!1;function L0(n,i){switch(n){case"compositionend":return Bp(i);case"keypress":return i.which!==32?null:(Fp=!0,Lp);case"textInput":return n=i.data,n===Lp&&Fp?null:n;default:return null}}function F0(n,i){if(lo)return n==="compositionend"||!fh&&Up(n,i)?(n=Jl(),Or=no=pn=null,lo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return jp&&i.locale!=="ko"?null:i.data;default:return null}}var U0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zp(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!U0[n.type]:i==="textarea"}function qp(n,i,a,c){as(c),i=au(i,"onChange"),0<i.length&&(a=new gi("onChange","change",null,a,c),n.push({event:a,listeners:i}))}var Ca=null,Ra=null;function B0(n){am(n,0)}function ru(n){var i=po(n);if(we(i))return n}function z0(n,i){if(n==="change")return i}var $p=!1;if(f){var ph;if(f){var mh="oninput"in document;if(!mh){var Wp=document.createElement("div");Wp.setAttribute("oninput","return;"),mh=typeof Wp.oninput=="function"}ph=mh}else ph=!1;$p=ph&&(!document.documentMode||9<document.documentMode)}function Hp(){Ca&&(Ca.detachEvent("onpropertychange",Gp),Ra=Ca=null)}function Gp(n){if(n.propertyName==="value"&&ru(Ra)){var i=[];qp(i,Ra,n,Hi(n)),Ul(B0,i)}}function q0(n,i,a){n==="focusin"?(Hp(),Ca=i,Ra=a,Ca.attachEvent("onpropertychange",Gp)):n==="focusout"&&Hp()}function $0(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return ru(Ra)}function W0(n,i){if(n==="click")return ru(i)}function H0(n,i){if(n==="input"||n==="change")return ru(i)}function G0(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Fn=typeof Object.is=="function"?Object.is:G0;function Pa(n,i){if(Fn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),c=Object.keys(i);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!p.call(i,d)||!Fn(n[d],i[d]))return!1}return!0}function Kp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Qp(n,i){var a=Kp(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=i&&c>=i)return{node:a,offset:i-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Kp(a)}}function Xp(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Xp(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Yp(){for(var n=window,i=ft();i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=ft(n.document)}return i}function gh(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function K0(n){var i=Yp(),a=n.focusedElem,c=n.selectionRange;if(i!==a&&a&&a.ownerDocument&&Xp(a.ownerDocument.documentElement,a)){if(c!==null&&gh(a)){if(i=c.start,n=c.end,n===void 0&&(n=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(n,a.value.length);else if(n=(i=a.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,m=Math.min(c.start,d);c=c.end===void 0?m:Math.min(c.end,d),!n.extend&&m>c&&(d=c,c=m,m=d),d=Qp(a,m);var w=Qp(a,c);d&&w&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==w.node||n.focusOffset!==w.offset)&&(i=i.createRange(),i.setStart(d.node,d.offset),n.removeAllRanges(),m>c?(n.addRange(i),n.extend(w.node,w.offset)):(i.setEnd(w.node,w.offset),n.addRange(i)))}}for(i=[],n=a;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)n=i[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Q0=f&&"documentMode"in document&&11>=document.documentMode,uo=null,yh=null,ka=null,_h=!1;function Jp(n,i,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;_h||uo==null||uo!==ft(c)||(c=uo,"selectionStart"in c&&gh(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ka&&Pa(ka,c)||(ka=c,c=au(yh,"onSelect"),0<c.length&&(i=new gi("onSelect","select",null,i,a),n.push({event:i,listeners:c}),i.target=uo)))}function su(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var co={animationend:su("Animation","AnimationEnd"),animationiteration:su("Animation","AnimationIteration"),animationstart:su("Animation","AnimationStart"),transitionend:su("Transition","TransitionEnd")},vh={},Zp={};f&&(Zp=document.createElement("div").style,"AnimationEvent"in window||(delete co.animationend.animation,delete co.animationiteration.animation,delete co.animationstart.animation),"TransitionEvent"in window||delete co.transitionend.transition);function iu(n){if(vh[n])return vh[n];if(!co[n])return n;var i=co[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in Zp)return vh[n]=i[a];return n}var em=iu("animationend"),tm=iu("animationiteration"),nm=iu("animationstart"),rm=iu("transitionend"),sm=new Map,im="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ys(n,i){sm.set(n,i),l(i,[n])}for(var wh=0;wh<im.length;wh++){var Eh=im[wh],X0=Eh.toLowerCase(),Y0=Eh[0].toUpperCase()+Eh.slice(1);ys(X0,"on"+Y0)}ys(em,"onAnimationEnd"),ys(tm,"onAnimationIteration"),ys(nm,"onAnimationStart"),ys("dblclick","onDoubleClick"),ys("focusin","onFocus"),ys("focusout","onBlur"),ys(rm,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),J0=new Set("cancel close invalid load scroll toggle".split(" ").concat(xa));function om(n,i,a){var c=n.type||"unknown-event";n.currentTarget=a,la(c,i,void 0,n),n.currentTarget=null}function am(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],d=c.event;c=c.listeners;e:{var m=void 0;if(i)for(var w=c.length-1;0<=w;w--){var N=c[w],V=N.instance,B=N.currentTarget;if(N=N.listener,V!==m&&d.isPropagationStopped())break e;om(d,N,B),m=V}else for(w=0;w<c.length;w++){if(N=c[w],V=N.instance,B=N.currentTarget,N=N.listener,V!==m&&d.isPropagationStopped())break e;om(d,N,B),m=V}}}if(Gi)throw n=Sn,Gi=!1,Sn=null,n}function rt(n,i){var a=i[kh];a===void 0&&(a=i[kh]=new Set);var c=n+"__bubble";a.has(c)||(lm(i,n,2,!1),a.add(c))}function Th(n,i,a){var c=0;i&&(c|=4),lm(a,n,c,i)}var ou="_reactListening"+Math.random().toString(36).slice(2);function Na(n){if(!n[ou]){n[ou]=!0,s.forEach(function(a){a!=="selectionchange"&&(J0.has(a)||Th(a,!1,n),Th(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[ou]||(i[ou]=!0,Th("selectionchange",!1,i))}}function lm(n,i,a,c){switch(to(i)){case 1:var d=ir;break;case 4:d=Yl;break;default:d=Ea}a=d.bind(null,i,a,n),d=void 0,!us||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(i,a,{capture:!0,passive:d}):n.addEventListener(i,a,!0):d!==void 0?n.addEventListener(i,a,{passive:d}):n.addEventListener(i,a,!1)}function Ih(n,i,a,c,d){var m=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var N=c.stateNode.containerInfo;if(N===d||N.nodeType===8&&N.parentNode===d)break;if(w===4)for(w=c.return;w!==null;){var V=w.tag;if((V===3||V===4)&&(V=w.stateNode.containerInfo,V===d||V.nodeType===8&&V.parentNode===d))return;w=w.return}for(;N!==null;){if(w=_i(N),w===null)return;if(V=w.tag,V===5||V===6){c=m=w;continue e}N=N.parentNode}}c=c.return}Ul(function(){var B=m,ee=Hi(a),te=[];e:{var Y=sm.get(n);if(Y!==void 0){var ce=gi,me=n;switch(n){case"keypress":if(mi(a)===0)break e;case"keydown":case"keyup":ce=Xe;break;case"focusin":me="focus",ce=jt;break;case"focusout":me="blur",ce=jt;break;case"beforeblur":case"afterblur":ce=jt;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=Ia;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=eu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=ur;break;case em:case tm:case nm:ce=nu;break;case rm:ce=ao;break;case"scroll":ce=ro;break;case"wheel":ce=O0;break;case"copy":case"cut":case"paste":ce=u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=gn}var ye=(i&4)!==0,gt=!ye&&n==="scroll",L=ye?Y!==null?Y+"Capture":null:Y;ye=[];for(var M=B,U;M!==null;){U=M;var ne=U.stateNode;if(U.tag===5&&ne!==null&&(U=ne,L!==null&&(ne=ii(M,L),ne!=null&&ye.push(ba(M,ne,U)))),gt)break;M=M.return}0<ye.length&&(Y=new ce(Y,me,null,a,ee),te.push({event:Y,listeners:ye}))}}if((i&7)===0){e:{if(Y=n==="mouseover"||n==="pointerover",ce=n==="mouseout"||n==="pointerout",Y&&a!==os&&(me=a.relatedTarget||a.fromElement)&&(_i(me)||me[jr]))break e;if((ce||Y)&&(Y=ee.window===ee?ee:(Y=ee.ownerDocument)?Y.defaultView||Y.parentWindow:window,ce?(me=a.relatedTarget||a.toElement,ce=B,me=me?_i(me):null,me!==null&&(gt=jn(me),me!==gt||me.tag!==5&&me.tag!==6)&&(me=null)):(ce=null,me=B),ce!==me)){if(ye=Ia,ne="onMouseLeave",L="onMouseEnter",M="mouse",(n==="pointerout"||n==="pointerover")&&(ye=gn,ne="onPointerLeave",L="onPointerEnter",M="pointer"),gt=ce==null?Y:po(ce),U=me==null?Y:po(me),Y=new ye(ne,M+"leave",ce,a,ee),Y.target=gt,Y.relatedTarget=U,ne=null,_i(ee)===B&&(ye=new ye(L,M+"enter",me,a,ee),ye.target=U,ye.relatedTarget=gt,ne=ye),gt=ne,ce&&me)t:{for(ye=ce,L=me,M=0,U=ye;U;U=ho(U))M++;for(U=0,ne=L;ne;ne=ho(ne))U++;for(;0<M-U;)ye=ho(ye),M--;for(;0<U-M;)L=ho(L),U--;for(;M--;){if(ye===L||L!==null&&ye===L.alternate)break t;ye=ho(ye),L=ho(L)}ye=null}else ye=null;ce!==null&&um(te,Y,ce,ye,!1),me!==null&&gt!==null&&um(te,gt,me,ye,!0)}}e:{if(Y=B?po(B):window,ce=Y.nodeName&&Y.nodeName.toLowerCase(),ce==="select"||ce==="input"&&Y.type==="file")var ve=z0;else if(zp(Y))if($p)ve=H0;else{ve=$0;var Ie=q0}else(ce=Y.nodeName)&&ce.toLowerCase()==="input"&&(Y.type==="checkbox"||Y.type==="radio")&&(ve=W0);if(ve&&(ve=ve(n,B))){qp(te,ve,a,ee);break e}Ie&&Ie(n,Y,B),n==="focusout"&&(Ie=Y._wrapperState)&&Ie.controlled&&Y.type==="number"&&Et(Y,"number",Y.value)}switch(Ie=B?po(B):window,n){case"focusin":(zp(Ie)||Ie.contentEditable==="true")&&(uo=Ie,yh=B,ka=null);break;case"focusout":ka=yh=uo=null;break;case"mousedown":_h=!0;break;case"contextmenu":case"mouseup":case"dragend":_h=!1,Jp(te,a,ee);break;case"selectionchange":if(Q0)break;case"keydown":case"keyup":Jp(te,a,ee)}var Se;if(fh)e:{switch(n){case"compositionstart":var Pe="onCompositionStart";break e;case"compositionend":Pe="onCompositionEnd";break e;case"compositionupdate":Pe="onCompositionUpdate";break e}Pe=void 0}else lo?Up(n,a)&&(Pe="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Pe="onCompositionStart");Pe&&(jp&&a.locale!=="ko"&&(lo||Pe!=="onCompositionStart"?Pe==="onCompositionEnd"&&lo&&(Se=Jl()):(pn=ee,no="value"in pn?pn.value:pn.textContent,lo=!0)),Ie=au(B,Pe),0<Ie.length&&(Pe=new _(Pe,n,null,a,ee),te.push({event:Pe,listeners:Ie}),Se?Pe.data=Se:(Se=Bp(a),Se!==null&&(Pe.data=Se)))),(Se=j0?L0(n,a):F0(n,a))&&(B=au(B,"onBeforeInput"),0<B.length&&(ee=new _("onBeforeInput","beforeinput",null,a,ee),te.push({event:ee,listeners:B}),ee.data=Se))}am(te,i)})}function ba(n,i,a){return{instance:n,listener:i,currentTarget:a}}function au(n,i){for(var a=i+"Capture",c=[];n!==null;){var d=n,m=d.stateNode;d.tag===5&&m!==null&&(d=m,m=ii(n,a),m!=null&&c.unshift(ba(n,m,d)),m=ii(n,i),m!=null&&c.push(ba(n,m,d))),n=n.return}return c}function ho(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function um(n,i,a,c,d){for(var m=i._reactName,w=[];a!==null&&a!==c;){var N=a,V=N.alternate,B=N.stateNode;if(V!==null&&V===c)break;N.tag===5&&B!==null&&(N=B,d?(V=ii(a,m),V!=null&&w.unshift(ba(a,V,N))):d||(V=ii(a,m),V!=null&&w.push(ba(a,V,N)))),a=a.return}w.length!==0&&n.push({event:i,listeners:w})}var Z0=/\r\n?/g,eE=/\u0000|\uFFFD/g;function cm(n){return(typeof n=="string"?n:""+n).replace(Z0,`
`).replace(eE,"")}function lu(n,i,a){if(i=cm(i),cm(n)!==i&&a)throw Error(t(425))}function uu(){}var Sh=null,Ah=null;function Ch(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Rh=typeof setTimeout=="function"?setTimeout:void 0,tE=typeof clearTimeout=="function"?clearTimeout:void 0,hm=typeof Promise=="function"?Promise:void 0,nE=typeof queueMicrotask=="function"?queueMicrotask:typeof hm<"u"?function(n){return hm.resolve(null).then(n).catch(rE)}:Rh;function rE(n){setTimeout(function(){throw n})}function Ph(n,i){var a=i,c=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){n.removeChild(d),ps(i);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);ps(i)}function _s(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function dm(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}var fo=Math.random().toString(36).slice(2),hr="__reactFiber$"+fo,Da="__reactProps$"+fo,jr="__reactContainer$"+fo,kh="__reactEvents$"+fo,sE="__reactListeners$"+fo,iE="__reactHandles$"+fo;function _i(n){var i=n[hr];if(i)return i;for(var a=n.parentNode;a;){if(i=a[jr]||a[hr]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=dm(n);n!==null;){if(a=n[hr])return a;n=dm(n)}return i}n=a,a=n.parentNode}return null}function Va(n){return n=n[hr]||n[jr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function po(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function cu(n){return n[Da]||null}var xh=[],mo=-1;function vs(n){return{current:n}}function st(n){0>mo||(n.current=xh[mo],xh[mo]=null,mo--)}function tt(n,i){mo++,xh[mo]=n.current,n.current=i}var ws={},Ht=vs(ws),rn=vs(!1),vi=ws;function go(n,i){var a=n.type.contextTypes;if(!a)return ws;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===i)return c.__reactInternalMemoizedMaskedChildContext;var d={},m;for(m in a)d[m]=i[m];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=d),d}function sn(n){return n=n.childContextTypes,n!=null}function hu(){st(rn),st(Ht)}function fm(n,i,a){if(Ht.current!==ws)throw Error(t(168));tt(Ht,i),tt(rn,a)}function pm(n,i,a){var c=n.stateNode;if(i=i.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in i))throw Error(t(108,je(n)||"Unknown",d));return le({},a,c)}function du(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ws,vi=Ht.current,tt(Ht,n),tt(rn,rn.current),!0}function mm(n,i,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=pm(n,i,vi),c.__reactInternalMemoizedMergedChildContext=n,st(rn),st(Ht),tt(Ht,n)):st(rn),tt(rn,a)}var Lr=null,fu=!1,Nh=!1;function gm(n){Lr===null?Lr=[n]:Lr.push(n)}function oE(n){fu=!0,gm(n)}function Es(){if(!Nh&&Lr!==null){Nh=!0;var n=0,i=qe;try{var a=Lr;for(qe=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}Lr=null,fu=!1}catch(d){throw Lr!==null&&(Lr=Lr.slice(n+1)),ca(Qi,Es),d}finally{qe=i,Nh=!1}}return null}var yo=[],_o=0,pu=null,mu=0,Cn=[],Rn=0,wi=null,Fr=1,Ur="";function Ei(n,i){yo[_o++]=mu,yo[_o++]=pu,pu=n,mu=i}function ym(n,i,a){Cn[Rn++]=Fr,Cn[Rn++]=Ur,Cn[Rn++]=wi,wi=n;var c=Fr;n=Ur;var d=32-dn(c)-1;c&=~(1<<d),a+=1;var m=32-dn(i)+d;if(30<m){var w=d-d%5;m=(c&(1<<w)-1).toString(32),c>>=w,d-=w,Fr=1<<32-dn(i)+d|a<<d|c,Ur=m+n}else Fr=1<<m|a<<d|c,Ur=n}function bh(n){n.return!==null&&(Ei(n,1),ym(n,1,0))}function Dh(n){for(;n===pu;)pu=yo[--_o],yo[_o]=null,mu=yo[--_o],yo[_o]=null;for(;n===wi;)wi=Cn[--Rn],Cn[Rn]=null,Ur=Cn[--Rn],Cn[Rn]=null,Fr=Cn[--Rn],Cn[Rn]=null}var yn=null,_n=null,ot=!1,Un=null;function _m(n,i){var a=Nn(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=n,i=n.deletions,i===null?(n.deletions=[a],n.flags|=16):i.push(a)}function vm(n,i){switch(n.tag){case 5:var a=n.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,yn=n,_n=_s(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,yn=n,_n=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=wi!==null?{id:Fr,overflow:Ur}:null,n.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=Nn(18,null,null,0),a.stateNode=i,a.return=n,n.child=a,yn=n,_n=null,!0):!1;default:return!1}}function Vh(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Oh(n){if(ot){var i=_n;if(i){var a=i;if(!vm(n,i)){if(Vh(n))throw Error(t(418));i=_s(a.nextSibling);var c=yn;i&&vm(n,i)?_m(c,a):(n.flags=n.flags&-4097|2,ot=!1,yn=n)}}else{if(Vh(n))throw Error(t(418));n.flags=n.flags&-4097|2,ot=!1,yn=n}}}function wm(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;yn=n}function gu(n){if(n!==yn)return!1;if(!ot)return wm(n),ot=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!Ch(n.type,n.memoizedProps)),i&&(i=_n)){if(Vh(n))throw Em(),Error(t(418));for(;i;)_m(n,i),i=_s(i.nextSibling)}if(wm(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(i===0){_n=_s(n.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}n=n.nextSibling}_n=null}}else _n=yn?_s(n.stateNode.nextSibling):null;return!0}function Em(){for(var n=_n;n;)n=_s(n.nextSibling)}function vo(){_n=yn=null,ot=!1}function Mh(n){Un===null?Un=[n]:Un.push(n)}var aE=H.ReactCurrentBatchConfig;function Oa(n,i,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var d=c,m=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===m?i.ref:(i=function(w){var N=d.refs;w===null?delete N[m]:N[m]=w},i._stringRef=m,i)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function yu(n,i){throw n=Object.prototype.toString.call(i),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function Tm(n){var i=n._init;return i(n._payload)}function Im(n){function i(L,M){if(n){var U=L.deletions;U===null?(L.deletions=[M],L.flags|=16):U.push(M)}}function a(L,M){if(!n)return null;for(;M!==null;)i(L,M),M=M.sibling;return null}function c(L,M){for(L=new Map;M!==null;)M.key!==null?L.set(M.key,M):L.set(M.index,M),M=M.sibling;return L}function d(L,M){return L=ks(L,M),L.index=0,L.sibling=null,L}function m(L,M,U){return L.index=U,n?(U=L.alternate,U!==null?(U=U.index,U<M?(L.flags|=2,M):U):(L.flags|=2,M)):(L.flags|=1048576,M)}function w(L){return n&&L.alternate===null&&(L.flags|=2),L}function N(L,M,U,ne){return M===null||M.tag!==6?(M=Rd(U,L.mode,ne),M.return=L,M):(M=d(M,U),M.return=L,M)}function V(L,M,U,ne){var ve=U.type;return ve===S?ee(L,M,U.props.children,ne,U.key):M!==null&&(M.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===Me&&Tm(ve)===M.type)?(ne=d(M,U.props),ne.ref=Oa(L,M,U),ne.return=L,ne):(ne=Bu(U.type,U.key,U.props,null,L.mode,ne),ne.ref=Oa(L,M,U),ne.return=L,ne)}function B(L,M,U,ne){return M===null||M.tag!==4||M.stateNode.containerInfo!==U.containerInfo||M.stateNode.implementation!==U.implementation?(M=Pd(U,L.mode,ne),M.return=L,M):(M=d(M,U.children||[]),M.return=L,M)}function ee(L,M,U,ne,ve){return M===null||M.tag!==7?(M=ki(U,L.mode,ne,ve),M.return=L,M):(M=d(M,U),M.return=L,M)}function te(L,M,U){if(typeof M=="string"&&M!==""||typeof M=="number")return M=Rd(""+M,L.mode,U),M.return=L,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case J:return U=Bu(M.type,M.key,M.props,null,L.mode,U),U.ref=Oa(L,null,M),U.return=L,U;case re:return M=Pd(M,L.mode,U),M.return=L,M;case Me:var ne=M._init;return te(L,ne(M._payload),U)}if(pt(M)||pe(M))return M=ki(M,L.mode,U,null),M.return=L,M;yu(L,M)}return null}function Y(L,M,U,ne){var ve=M!==null?M.key:null;if(typeof U=="string"&&U!==""||typeof U=="number")return ve!==null?null:N(L,M,""+U,ne);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case J:return U.key===ve?V(L,M,U,ne):null;case re:return U.key===ve?B(L,M,U,ne):null;case Me:return ve=U._init,Y(L,M,ve(U._payload),ne)}if(pt(U)||pe(U))return ve!==null?null:ee(L,M,U,ne,null);yu(L,U)}return null}function ce(L,M,U,ne,ve){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return L=L.get(U)||null,N(M,L,""+ne,ve);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case J:return L=L.get(ne.key===null?U:ne.key)||null,V(M,L,ne,ve);case re:return L=L.get(ne.key===null?U:ne.key)||null,B(M,L,ne,ve);case Me:var Ie=ne._init;return ce(L,M,U,Ie(ne._payload),ve)}if(pt(ne)||pe(ne))return L=L.get(U)||null,ee(M,L,ne,ve,null);yu(M,ne)}return null}function me(L,M,U,ne){for(var ve=null,Ie=null,Se=M,Pe=M=0,Dt=null;Se!==null&&Pe<U.length;Pe++){Se.index>Pe?(Dt=Se,Se=null):Dt=Se.sibling;var Ge=Y(L,Se,U[Pe],ne);if(Ge===null){Se===null&&(Se=Dt);break}n&&Se&&Ge.alternate===null&&i(L,Se),M=m(Ge,M,Pe),Ie===null?ve=Ge:Ie.sibling=Ge,Ie=Ge,Se=Dt}if(Pe===U.length)return a(L,Se),ot&&Ei(L,Pe),ve;if(Se===null){for(;Pe<U.length;Pe++)Se=te(L,U[Pe],ne),Se!==null&&(M=m(Se,M,Pe),Ie===null?ve=Se:Ie.sibling=Se,Ie=Se);return ot&&Ei(L,Pe),ve}for(Se=c(L,Se);Pe<U.length;Pe++)Dt=ce(Se,L,Pe,U[Pe],ne),Dt!==null&&(n&&Dt.alternate!==null&&Se.delete(Dt.key===null?Pe:Dt.key),M=m(Dt,M,Pe),Ie===null?ve=Dt:Ie.sibling=Dt,Ie=Dt);return n&&Se.forEach(function(xs){return i(L,xs)}),ot&&Ei(L,Pe),ve}function ye(L,M,U,ne){var ve=pe(U);if(typeof ve!="function")throw Error(t(150));if(U=ve.call(U),U==null)throw Error(t(151));for(var Ie=ve=null,Se=M,Pe=M=0,Dt=null,Ge=U.next();Se!==null&&!Ge.done;Pe++,Ge=U.next()){Se.index>Pe?(Dt=Se,Se=null):Dt=Se.sibling;var xs=Y(L,Se,Ge.value,ne);if(xs===null){Se===null&&(Se=Dt);break}n&&Se&&xs.alternate===null&&i(L,Se),M=m(xs,M,Pe),Ie===null?ve=xs:Ie.sibling=xs,Ie=xs,Se=Dt}if(Ge.done)return a(L,Se),ot&&Ei(L,Pe),ve;if(Se===null){for(;!Ge.done;Pe++,Ge=U.next())Ge=te(L,Ge.value,ne),Ge!==null&&(M=m(Ge,M,Pe),Ie===null?ve=Ge:Ie.sibling=Ge,Ie=Ge);return ot&&Ei(L,Pe),ve}for(Se=c(L,Se);!Ge.done;Pe++,Ge=U.next())Ge=ce(Se,L,Pe,Ge.value,ne),Ge!==null&&(n&&Ge.alternate!==null&&Se.delete(Ge.key===null?Pe:Ge.key),M=m(Ge,M,Pe),Ie===null?ve=Ge:Ie.sibling=Ge,Ie=Ge);return n&&Se.forEach(function(UE){return i(L,UE)}),ot&&Ei(L,Pe),ve}function gt(L,M,U,ne){if(typeof U=="object"&&U!==null&&U.type===S&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case J:e:{for(var ve=U.key,Ie=M;Ie!==null;){if(Ie.key===ve){if(ve=U.type,ve===S){if(Ie.tag===7){a(L,Ie.sibling),M=d(Ie,U.props.children),M.return=L,L=M;break e}}else if(Ie.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===Me&&Tm(ve)===Ie.type){a(L,Ie.sibling),M=d(Ie,U.props),M.ref=Oa(L,Ie,U),M.return=L,L=M;break e}a(L,Ie);break}else i(L,Ie);Ie=Ie.sibling}U.type===S?(M=ki(U.props.children,L.mode,ne,U.key),M.return=L,L=M):(ne=Bu(U.type,U.key,U.props,null,L.mode,ne),ne.ref=Oa(L,M,U),ne.return=L,L=ne)}return w(L);case re:e:{for(Ie=U.key;M!==null;){if(M.key===Ie)if(M.tag===4&&M.stateNode.containerInfo===U.containerInfo&&M.stateNode.implementation===U.implementation){a(L,M.sibling),M=d(M,U.children||[]),M.return=L,L=M;break e}else{a(L,M);break}else i(L,M);M=M.sibling}M=Pd(U,L.mode,ne),M.return=L,L=M}return w(L);case Me:return Ie=U._init,gt(L,M,Ie(U._payload),ne)}if(pt(U))return me(L,M,U,ne);if(pe(U))return ye(L,M,U,ne);yu(L,U)}return typeof U=="string"&&U!==""||typeof U=="number"?(U=""+U,M!==null&&M.tag===6?(a(L,M.sibling),M=d(M,U),M.return=L,L=M):(a(L,M),M=Rd(U,L.mode,ne),M.return=L,L=M),w(L)):a(L,M)}return gt}var wo=Im(!0),Sm=Im(!1),_u=vs(null),vu=null,Eo=null,jh=null;function Lh(){jh=Eo=vu=null}function Fh(n){var i=_u.current;st(_u),n._currentValue=i}function Uh(n,i,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),n===a)break;n=n.return}}function To(n,i){vu=n,jh=Eo=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&i)!==0&&(on=!0),n.firstContext=null)}function Pn(n){var i=n._currentValue;if(jh!==n)if(n={context:n,memoizedValue:i,next:null},Eo===null){if(vu===null)throw Error(t(308));Eo=n,vu.dependencies={lanes:0,firstContext:n}}else Eo=Eo.next=n;return i}var Ti=null;function Bh(n){Ti===null?Ti=[n]:Ti.push(n)}function Am(n,i,a,c){var d=i.interleaved;return d===null?(a.next=a,Bh(i)):(a.next=d.next,d.next=a),i.interleaved=a,Br(n,c)}function Br(n,i){n.lanes|=i;var a=n.alternate;for(a!==null&&(a.lanes|=i),a=n,n=n.return;n!==null;)n.childLanes|=i,a=n.alternate,a!==null&&(a.childLanes|=i),a=n,n=n.return;return a.tag===3?a.stateNode:null}var Ts=!1;function zh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Cm(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function zr(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function Is(n,i,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(He&2)!==0){var d=c.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),c.pending=i,Br(n,a)}return d=c.interleaved,d===null?(i.next=i,Bh(c)):(i.next=d.next,d.next=i),c.interleaved=i,Br(n,a)}function wu(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,ga(n,a)}}function Rm(n,i){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};m===null?d=m=w:m=m.next=w,a=a.next}while(a!==null);m===null?d=m=i:m=m.next=i}else d=m=i;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}function Eu(n,i,a,c){var d=n.updateQueue;Ts=!1;var m=d.firstBaseUpdate,w=d.lastBaseUpdate,N=d.shared.pending;if(N!==null){d.shared.pending=null;var V=N,B=V.next;V.next=null,w===null?m=B:w.next=B,w=V;var ee=n.alternate;ee!==null&&(ee=ee.updateQueue,N=ee.lastBaseUpdate,N!==w&&(N===null?ee.firstBaseUpdate=B:N.next=B,ee.lastBaseUpdate=V))}if(m!==null){var te=d.baseState;w=0,ee=B=V=null,N=m;do{var Y=N.lane,ce=N.eventTime;if((c&Y)===Y){ee!==null&&(ee=ee.next={eventTime:ce,lane:0,tag:N.tag,payload:N.payload,callback:N.callback,next:null});e:{var me=n,ye=N;switch(Y=i,ce=a,ye.tag){case 1:if(me=ye.payload,typeof me=="function"){te=me.call(ce,te,Y);break e}te=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=ye.payload,Y=typeof me=="function"?me.call(ce,te,Y):me,Y==null)break e;te=le({},te,Y);break e;case 2:Ts=!0}}N.callback!==null&&N.lane!==0&&(n.flags|=64,Y=d.effects,Y===null?d.effects=[N]:Y.push(N))}else ce={eventTime:ce,lane:Y,tag:N.tag,payload:N.payload,callback:N.callback,next:null},ee===null?(B=ee=ce,V=te):ee=ee.next=ce,w|=Y;if(N=N.next,N===null){if(N=d.shared.pending,N===null)break;Y=N,N=Y.next,Y.next=null,d.lastBaseUpdate=Y,d.shared.pending=null}}while(!0);if(ee===null&&(V=te),d.baseState=V,d.firstBaseUpdate=B,d.lastBaseUpdate=ee,i=d.shared.interleaved,i!==null){d=i;do w|=d.lane,d=d.next;while(d!==i)}else m===null&&(d.shared.lanes=0);Ai|=w,n.lanes=w,n.memoizedState=te}}function Pm(n,i,a){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var c=n[i],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var Ma={},dr=vs(Ma),ja=vs(Ma),La=vs(Ma);function Ii(n){if(n===Ma)throw Error(t(174));return n}function qh(n,i){switch(tt(La,i),tt(ja,n),tt(dr,Ma),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:qi(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=qi(i,n)}st(dr),tt(dr,i)}function Io(){st(dr),st(ja),st(La)}function km(n){Ii(La.current);var i=Ii(dr.current),a=qi(i,n.type);i!==a&&(tt(ja,n),tt(dr,a))}function $h(n){ja.current===n&&(st(dr),st(ja))}var at=vs(0);function Tu(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Wh=[];function Hh(){for(var n=0;n<Wh.length;n++)Wh[n]._workInProgressVersionPrimary=null;Wh.length=0}var Iu=H.ReactCurrentDispatcher,Gh=H.ReactCurrentBatchConfig,Si=0,lt=null,Pt=null,Nt=null,Su=!1,Fa=!1,Ua=0,lE=0;function Gt(){throw Error(t(321))}function Kh(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!Fn(n[a],i[a]))return!1;return!0}function Qh(n,i,a,c,d,m){if(Si=m,lt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Iu.current=n===null||n.memoizedState===null?dE:fE,n=a(c,d),Fa){m=0;do{if(Fa=!1,Ua=0,25<=m)throw Error(t(301));m+=1,Nt=Pt=null,i.updateQueue=null,Iu.current=pE,n=a(c,d)}while(Fa)}if(Iu.current=Ru,i=Pt!==null&&Pt.next!==null,Si=0,Nt=Pt=lt=null,Su=!1,i)throw Error(t(300));return n}function Xh(){var n=Ua!==0;return Ua=0,n}function fr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?lt.memoizedState=Nt=n:Nt=Nt.next=n,Nt}function kn(){if(Pt===null){var n=lt.alternate;n=n!==null?n.memoizedState:null}else n=Pt.next;var i=Nt===null?lt.memoizedState:Nt.next;if(i!==null)Nt=i,Pt=n;else{if(n===null)throw Error(t(310));Pt=n,n={memoizedState:Pt.memoizedState,baseState:Pt.baseState,baseQueue:Pt.baseQueue,queue:Pt.queue,next:null},Nt===null?lt.memoizedState=Nt=n:Nt=Nt.next=n}return Nt}function Ba(n,i){return typeof i=="function"?i(n):i}function Yh(n){var i=kn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=Pt,d=c.baseQueue,m=a.pending;if(m!==null){if(d!==null){var w=d.next;d.next=m.next,m.next=w}c.baseQueue=d=m,a.pending=null}if(d!==null){m=d.next,c=c.baseState;var N=w=null,V=null,B=m;do{var ee=B.lane;if((Si&ee)===ee)V!==null&&(V=V.next={lane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),c=B.hasEagerState?B.eagerState:n(c,B.action);else{var te={lane:ee,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null};V===null?(N=V=te,w=c):V=V.next=te,lt.lanes|=ee,Ai|=ee}B=B.next}while(B!==null&&B!==m);V===null?w=c:V.next=N,Fn(c,i.memoizedState)||(on=!0),i.memoizedState=c,i.baseState=w,i.baseQueue=V,a.lastRenderedState=c}if(n=a.interleaved,n!==null){d=n;do m=d.lane,lt.lanes|=m,Ai|=m,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function Jh(n){var i=kn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,d=a.pending,m=i.memoizedState;if(d!==null){a.pending=null;var w=d=d.next;do m=n(m,w.action),w=w.next;while(w!==d);Fn(m,i.memoizedState)||(on=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),a.lastRenderedState=m}return[m,c]}function xm(){}function Nm(n,i){var a=lt,c=kn(),d=i(),m=!Fn(c.memoizedState,d);if(m&&(c.memoizedState=d,on=!0),c=c.queue,Zh(Vm.bind(null,a,c,n),[n]),c.getSnapshot!==i||m||Nt!==null&&Nt.memoizedState.tag&1){if(a.flags|=2048,za(9,Dm.bind(null,a,c,d,i),void 0,null),bt===null)throw Error(t(349));(Si&30)!==0||bm(a,i,d)}return d}function bm(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=lt.updateQueue,i===null?(i={lastEffect:null,stores:null},lt.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function Dm(n,i,a,c){i.value=a,i.getSnapshot=c,Om(i)&&Mm(n)}function Vm(n,i,a){return a(function(){Om(i)&&Mm(n)})}function Om(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!Fn(n,a)}catch{return!0}}function Mm(n){var i=Br(n,1);i!==null&&$n(i,n,1,-1)}function jm(n){var i=fr();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ba,lastRenderedState:n},i.queue=n,n=n.dispatch=hE.bind(null,lt,n),[i.memoizedState,n]}function za(n,i,a,c){return n={tag:n,create:i,destroy:a,deps:c,next:null},i=lt.updateQueue,i===null?(i={lastEffect:null,stores:null},lt.updateQueue=i,i.lastEffect=n.next=n):(a=i.lastEffect,a===null?i.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,i.lastEffect=n)),n}function Lm(){return kn().memoizedState}function Au(n,i,a,c){var d=fr();lt.flags|=n,d.memoizedState=za(1|i,a,void 0,c===void 0?null:c)}function Cu(n,i,a,c){var d=kn();c=c===void 0?null:c;var m=void 0;if(Pt!==null){var w=Pt.memoizedState;if(m=w.destroy,c!==null&&Kh(c,w.deps)){d.memoizedState=za(i,a,m,c);return}}lt.flags|=n,d.memoizedState=za(1|i,a,m,c)}function Fm(n,i){return Au(8390656,8,n,i)}function Zh(n,i){return Cu(2048,8,n,i)}function Um(n,i){return Cu(4,2,n,i)}function Bm(n,i){return Cu(4,4,n,i)}function zm(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function qm(n,i,a){return a=a!=null?a.concat([n]):null,Cu(4,4,zm.bind(null,i,n),a)}function ed(){}function $m(n,i){var a=kn();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&Kh(i,c[1])?c[0]:(a.memoizedState=[n,i],n)}function Wm(n,i){var a=kn();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&Kh(i,c[1])?c[0]:(n=n(),a.memoizedState=[n,i],n)}function Hm(n,i,a){return(Si&21)===0?(n.baseState&&(n.baseState=!1,on=!0),n.memoizedState=a):(Fn(a,i)||(a=pa(),lt.lanes|=a,Ai|=a,n.baseState=!0),i)}function uE(n,i){var a=qe;qe=a!==0&&4>a?a:4,n(!0);var c=Gh.transition;Gh.transition={};try{n(!1),i()}finally{qe=a,Gh.transition=c}}function Gm(){return kn().memoizedState}function cE(n,i,a){var c=Rs(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},Km(n))Qm(i,a);else if(a=Am(n,i,a,c),a!==null){var d=en();$n(a,n,c,d),Xm(a,i,c)}}function hE(n,i,a){var c=Rs(n),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(Km(n))Qm(i,d);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var w=i.lastRenderedState,N=m(w,a);if(d.hasEagerState=!0,d.eagerState=N,Fn(N,w)){var V=i.interleaved;V===null?(d.next=d,Bh(i)):(d.next=V.next,V.next=d),i.interleaved=d;return}}catch{}a=Am(n,i,d,c),a!==null&&(d=en(),$n(a,n,c,d),Xm(a,i,c))}}function Km(n){var i=n.alternate;return n===lt||i!==null&&i===lt}function Qm(n,i){Fa=Su=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function Xm(n,i,a){if((a&4194240)!==0){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,ga(n,a)}}var Ru={readContext:Pn,useCallback:Gt,useContext:Gt,useEffect:Gt,useImperativeHandle:Gt,useInsertionEffect:Gt,useLayoutEffect:Gt,useMemo:Gt,useReducer:Gt,useRef:Gt,useState:Gt,useDebugValue:Gt,useDeferredValue:Gt,useTransition:Gt,useMutableSource:Gt,useSyncExternalStore:Gt,useId:Gt,unstable_isNewReconciler:!1},dE={readContext:Pn,useCallback:function(n,i){return fr().memoizedState=[n,i===void 0?null:i],n},useContext:Pn,useEffect:Fm,useImperativeHandle:function(n,i,a){return a=a!=null?a.concat([n]):null,Au(4194308,4,zm.bind(null,i,n),a)},useLayoutEffect:function(n,i){return Au(4194308,4,n,i)},useInsertionEffect:function(n,i){return Au(4,2,n,i)},useMemo:function(n,i){var a=fr();return i=i===void 0?null:i,n=n(),a.memoizedState=[n,i],n},useReducer:function(n,i,a){var c=fr();return i=a!==void 0?a(i):i,c.memoizedState=c.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},c.queue=n,n=n.dispatch=cE.bind(null,lt,n),[c.memoizedState,n]},useRef:function(n){var i=fr();return n={current:n},i.memoizedState=n},useState:jm,useDebugValue:ed,useDeferredValue:function(n){return fr().memoizedState=n},useTransition:function(){var n=jm(!1),i=n[0];return n=uE.bind(null,n[1]),fr().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,a){var c=lt,d=fr();if(ot){if(a===void 0)throw Error(t(407));a=a()}else{if(a=i(),bt===null)throw Error(t(349));(Si&30)!==0||bm(c,i,a)}d.memoizedState=a;var m={value:a,getSnapshot:i};return d.queue=m,Fm(Vm.bind(null,c,m,n),[n]),c.flags|=2048,za(9,Dm.bind(null,c,m,a,i),void 0,null),a},useId:function(){var n=fr(),i=bt.identifierPrefix;if(ot){var a=Ur,c=Fr;a=(c&~(1<<32-dn(c)-1)).toString(32)+a,i=":"+i+"R"+a,a=Ua++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=lE++,i=":"+i+"r"+a.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},fE={readContext:Pn,useCallback:$m,useContext:Pn,useEffect:Zh,useImperativeHandle:qm,useInsertionEffect:Um,useLayoutEffect:Bm,useMemo:Wm,useReducer:Yh,useRef:Lm,useState:function(){return Yh(Ba)},useDebugValue:ed,useDeferredValue:function(n){var i=kn();return Hm(i,Pt.memoizedState,n)},useTransition:function(){var n=Yh(Ba)[0],i=kn().memoizedState;return[n,i]},useMutableSource:xm,useSyncExternalStore:Nm,useId:Gm,unstable_isNewReconciler:!1},pE={readContext:Pn,useCallback:$m,useContext:Pn,useEffect:Zh,useImperativeHandle:qm,useInsertionEffect:Um,useLayoutEffect:Bm,useMemo:Wm,useReducer:Jh,useRef:Lm,useState:function(){return Jh(Ba)},useDebugValue:ed,useDeferredValue:function(n){var i=kn();return Pt===null?i.memoizedState=n:Hm(i,Pt.memoizedState,n)},useTransition:function(){var n=Jh(Ba)[0],i=kn().memoizedState;return[n,i]},useMutableSource:xm,useSyncExternalStore:Nm,useId:Gm,unstable_isNewReconciler:!1};function Bn(n,i){if(n&&n.defaultProps){i=le({},i),n=n.defaultProps;for(var a in n)i[a]===void 0&&(i[a]=n[a]);return i}return i}function td(n,i,a,c){i=n.memoizedState,a=a(c,i),a=a==null?i:le({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Pu={isMounted:function(n){return(n=n._reactInternals)?jn(n)===n:!1},enqueueSetState:function(n,i,a){n=n._reactInternals;var c=en(),d=Rs(n),m=zr(c,d);m.payload=i,a!=null&&(m.callback=a),i=Is(n,m,d),i!==null&&($n(i,n,d,c),wu(i,n,d))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var c=en(),d=Rs(n),m=zr(c,d);m.tag=1,m.payload=i,a!=null&&(m.callback=a),i=Is(n,m,d),i!==null&&($n(i,n,d,c),wu(i,n,d))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=en(),c=Rs(n),d=zr(a,c);d.tag=2,i!=null&&(d.callback=i),i=Is(n,d,c),i!==null&&($n(i,n,c,a),wu(i,n,c))}};function Ym(n,i,a,c,d,m,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,m,w):i.prototype&&i.prototype.isPureReactComponent?!Pa(a,c)||!Pa(d,m):!0}function Jm(n,i,a){var c=!1,d=ws,m=i.contextType;return typeof m=="object"&&m!==null?m=Pn(m):(d=sn(i)?vi:Ht.current,c=i.contextTypes,m=(c=c!=null)?go(n,d):ws),i=new i(a,m),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Pu,n.stateNode=i,i._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=m),i}function Zm(n,i,a,c){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,c),i.state!==n&&Pu.enqueueReplaceState(i,i.state,null)}function nd(n,i,a,c){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs={},zh(n);var m=i.contextType;typeof m=="object"&&m!==null?d.context=Pn(m):(m=sn(i)?vi:Ht.current,d.context=go(n,m)),d.state=n.memoizedState,m=i.getDerivedStateFromProps,typeof m=="function"&&(td(n,i,m,a),d.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(i=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),i!==d.state&&Pu.enqueueReplaceState(d,d.state,null),Eu(n,a,d,c),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function So(n,i){try{var a="",c=i;do a+=Ve(c),c=c.return;while(c);var d=a}catch(m){d=`
Error generating stack: `+m.message+`
`+m.stack}return{value:n,source:i,stack:d,digest:null}}function rd(n,i,a){return{value:n,source:null,stack:a??null,digest:i??null}}function sd(n,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var mE=typeof WeakMap=="function"?WeakMap:Map;function eg(n,i,a){a=zr(-1,a),a.tag=3,a.payload={element:null};var c=i.value;return a.callback=function(){Ou||(Ou=!0,vd=c),sd(n,i)},a}function tg(n,i,a){a=zr(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=i.value;a.payload=function(){return c(d)},a.callback=function(){sd(n,i)}}var m=n.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(a.callback=function(){sd(n,i),typeof c!="function"&&(As===null?As=new Set([this]):As.add(this));var w=i.stack;this.componentDidCatch(i.value,{componentStack:w!==null?w:""})}),a}function ng(n,i,a){var c=n.pingCache;if(c===null){c=n.pingCache=new mE;var d=new Set;c.set(i,d)}else d=c.get(i),d===void 0&&(d=new Set,c.set(i,d));d.has(a)||(d.add(a),n=kE.bind(null,n,i,a),i.then(n,n))}function rg(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function sg(n,i,a,c,d){return(n.mode&1)===0?(n===i?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=zr(-1,1),i.tag=2,Is(a,i,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=d,n)}var gE=H.ReactCurrentOwner,on=!1;function Zt(n,i,a,c){i.child=n===null?Sm(i,null,a,c):wo(i,n.child,a,c)}function ig(n,i,a,c,d){a=a.render;var m=i.ref;return To(i,d),c=Qh(n,i,a,c,m,d),a=Xh(),n!==null&&!on?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~d,qr(n,i,d)):(ot&&a&&bh(i),i.flags|=1,Zt(n,i,c,d),i.child)}function og(n,i,a,c,d){if(n===null){var m=a.type;return typeof m=="function"&&!Cd(m)&&m.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=m,ag(n,i,m,c,d)):(n=Bu(a.type,null,c,i,i.mode,d),n.ref=i.ref,n.return=i,i.child=n)}if(m=n.child,(n.lanes&d)===0){var w=m.memoizedProps;if(a=a.compare,a=a!==null?a:Pa,a(w,c)&&n.ref===i.ref)return qr(n,i,d)}return i.flags|=1,n=ks(m,c),n.ref=i.ref,n.return=i,i.child=n}function ag(n,i,a,c,d){if(n!==null){var m=n.memoizedProps;if(Pa(m,c)&&n.ref===i.ref)if(on=!1,i.pendingProps=c=m,(n.lanes&d)!==0)(n.flags&131072)!==0&&(on=!0);else return i.lanes=n.lanes,qr(n,i,d)}return id(n,i,a,c,d)}function lg(n,i,a){var c=i.pendingProps,d=c.children,m=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},tt(Co,vn),vn|=a;else{if((a&1073741824)===0)return n=m!==null?m.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,tt(Co,vn),vn|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=m!==null?m.baseLanes:a,tt(Co,vn),vn|=c}else m!==null?(c=m.baseLanes|a,i.memoizedState=null):c=a,tt(Co,vn),vn|=c;return Zt(n,i,d,a),i.child}function ug(n,i){var a=i.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function id(n,i,a,c,d){var m=sn(a)?vi:Ht.current;return m=go(i,m),To(i,d),a=Qh(n,i,a,c,m,d),c=Xh(),n!==null&&!on?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~d,qr(n,i,d)):(ot&&c&&bh(i),i.flags|=1,Zt(n,i,a,d),i.child)}function cg(n,i,a,c,d){if(sn(a)){var m=!0;du(i)}else m=!1;if(To(i,d),i.stateNode===null)xu(n,i),Jm(i,a,c),nd(i,a,c,d),c=!0;else if(n===null){var w=i.stateNode,N=i.memoizedProps;w.props=N;var V=w.context,B=a.contextType;typeof B=="object"&&B!==null?B=Pn(B):(B=sn(a)?vi:Ht.current,B=go(i,B));var ee=a.getDerivedStateFromProps,te=typeof ee=="function"||typeof w.getSnapshotBeforeUpdate=="function";te||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(N!==c||V!==B)&&Zm(i,w,c,B),Ts=!1;var Y=i.memoizedState;w.state=Y,Eu(i,c,w,d),V=i.memoizedState,N!==c||Y!==V||rn.current||Ts?(typeof ee=="function"&&(td(i,a,ee,c),V=i.memoizedState),(N=Ts||Ym(i,a,N,c,Y,V,B))?(te||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(i.flags|=4194308)):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=V),w.props=c,w.state=V,w.context=B,c=N):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{w=i.stateNode,Cm(n,i),N=i.memoizedProps,B=i.type===i.elementType?N:Bn(i.type,N),w.props=B,te=i.pendingProps,Y=w.context,V=a.contextType,typeof V=="object"&&V!==null?V=Pn(V):(V=sn(a)?vi:Ht.current,V=go(i,V));var ce=a.getDerivedStateFromProps;(ee=typeof ce=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(N!==te||Y!==V)&&Zm(i,w,c,V),Ts=!1,Y=i.memoizedState,w.state=Y,Eu(i,c,w,d);var me=i.memoizedState;N!==te||Y!==me||rn.current||Ts?(typeof ce=="function"&&(td(i,a,ce,c),me=i.memoizedState),(B=Ts||Ym(i,a,B,c,Y,me,V)||!1)?(ee||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(c,me,V),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(c,me,V)),typeof w.componentDidUpdate=="function"&&(i.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof w.componentDidUpdate!="function"||N===n.memoizedProps&&Y===n.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||N===n.memoizedProps&&Y===n.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=me),w.props=c,w.state=me,w.context=V,c=B):(typeof w.componentDidUpdate!="function"||N===n.memoizedProps&&Y===n.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||N===n.memoizedProps&&Y===n.memoizedState||(i.flags|=1024),c=!1)}return od(n,i,a,c,m,d)}function od(n,i,a,c,d,m){ug(n,i);var w=(i.flags&128)!==0;if(!c&&!w)return d&&mm(i,a,!1),qr(n,i,m);c=i.stateNode,gE.current=i;var N=w&&typeof a.getDerivedStateFromError!="function"?null:c.render();return i.flags|=1,n!==null&&w?(i.child=wo(i,n.child,null,m),i.child=wo(i,null,N,m)):Zt(n,i,N,m),i.memoizedState=c.state,d&&mm(i,a,!0),i.child}function hg(n){var i=n.stateNode;i.pendingContext?fm(n,i.pendingContext,i.pendingContext!==i.context):i.context&&fm(n,i.context,!1),qh(n,i.containerInfo)}function dg(n,i,a,c,d){return vo(),Mh(d),i.flags|=256,Zt(n,i,a,c),i.child}var ad={dehydrated:null,treeContext:null,retryLane:0};function ld(n){return{baseLanes:n,cachePool:null,transitions:null}}function fg(n,i,a){var c=i.pendingProps,d=at.current,m=!1,w=(i.flags&128)!==0,N;if((N=w)||(N=n!==null&&n.memoizedState===null?!1:(d&2)!==0),N?(m=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),tt(at,d&1),n===null)return Oh(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((i.mode&1)===0?i.lanes=1:n.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(w=c.children,n=c.fallback,m?(c=i.mode,m=i.child,w={mode:"hidden",children:w},(c&1)===0&&m!==null?(m.childLanes=0,m.pendingProps=w):m=zu(w,c,0,null),n=ki(n,c,a,null),m.return=i,n.return=i,m.sibling=n,i.child=m,i.child.memoizedState=ld(a),i.memoizedState=ad,n):ud(i,w));if(d=n.memoizedState,d!==null&&(N=d.dehydrated,N!==null))return yE(n,i,w,c,N,d,a);if(m){m=c.fallback,w=i.mode,d=n.child,N=d.sibling;var V={mode:"hidden",children:c.children};return(w&1)===0&&i.child!==d?(c=i.child,c.childLanes=0,c.pendingProps=V,i.deletions=null):(c=ks(d,V),c.subtreeFlags=d.subtreeFlags&14680064),N!==null?m=ks(N,m):(m=ki(m,w,a,null),m.flags|=2),m.return=i,c.return=i,c.sibling=m,i.child=c,c=m,m=i.child,w=n.child.memoizedState,w=w===null?ld(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},m.memoizedState=w,m.childLanes=n.childLanes&~a,i.memoizedState=ad,c}return m=n.child,n=m.sibling,c=ks(m,{mode:"visible",children:c.children}),(i.mode&1)===0&&(c.lanes=a),c.return=i,c.sibling=null,n!==null&&(a=i.deletions,a===null?(i.deletions=[n],i.flags|=16):a.push(n)),i.child=c,i.memoizedState=null,c}function ud(n,i){return i=zu({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function ku(n,i,a,c){return c!==null&&Mh(c),wo(i,n.child,null,a),n=ud(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function yE(n,i,a,c,d,m,w){if(a)return i.flags&256?(i.flags&=-257,c=rd(Error(t(422))),ku(n,i,w,c)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(m=c.fallback,d=i.mode,c=zu({mode:"visible",children:c.children},d,0,null),m=ki(m,d,w,null),m.flags|=2,c.return=i,m.return=i,c.sibling=m,i.child=c,(i.mode&1)!==0&&wo(i,n.child,null,w),i.child.memoizedState=ld(w),i.memoizedState=ad,m);if((i.mode&1)===0)return ku(n,i,w,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var N=c.dgst;return c=N,m=Error(t(419)),c=rd(m,c,void 0),ku(n,i,w,c)}if(N=(w&n.childLanes)!==0,on||N){if(c=bt,c!==null){switch(w&-w){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|w))!==0?0:d,d!==0&&d!==m.retryLane&&(m.retryLane=d,Br(n,d),$n(c,n,d,-1))}return Ad(),c=rd(Error(t(421))),ku(n,i,w,c)}return d.data==="$?"?(i.flags|=128,i.child=n.child,i=xE.bind(null,n),d._reactRetry=i,null):(n=m.treeContext,_n=_s(d.nextSibling),yn=i,ot=!0,Un=null,n!==null&&(Cn[Rn++]=Fr,Cn[Rn++]=Ur,Cn[Rn++]=wi,Fr=n.id,Ur=n.overflow,wi=i),i=ud(i,c.children),i.flags|=4096,i)}function pg(n,i,a){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i),Uh(n.return,i,a)}function cd(n,i,a,c,d){var m=n.memoizedState;m===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(m.isBackwards=i,m.rendering=null,m.renderingStartTime=0,m.last=c,m.tail=a,m.tailMode=d)}function mg(n,i,a){var c=i.pendingProps,d=c.revealOrder,m=c.tail;if(Zt(n,i,c.children,a),c=at.current,(c&2)!==0)c=c&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&pg(n,a,i);else if(n.tag===19)pg(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(tt(at,c),(i.mode&1)===0)i.memoizedState=null;else switch(d){case"forwards":for(a=i.child,d=null;a!==null;)n=a.alternate,n!==null&&Tu(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=i.child,i.child=null):(d=a.sibling,a.sibling=null),cd(i,!1,d,a,m);break;case"backwards":for(a=null,d=i.child,i.child=null;d!==null;){if(n=d.alternate,n!==null&&Tu(n)===null){i.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}cd(i,!0,a,null,m);break;case"together":cd(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function xu(n,i){(i.mode&1)===0&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function qr(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),Ai|=i.lanes,(a&i.childLanes)===0)return null;if(n!==null&&i.child!==n.child)throw Error(t(153));if(i.child!==null){for(n=i.child,a=ks(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=ks(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function _E(n,i,a){switch(i.tag){case 3:hg(i),vo();break;case 5:km(i);break;case 1:sn(i.type)&&du(i);break;case 4:qh(i,i.stateNode.containerInfo);break;case 10:var c=i.type._context,d=i.memoizedProps.value;tt(_u,c._currentValue),c._currentValue=d;break;case 13:if(c=i.memoizedState,c!==null)return c.dehydrated!==null?(tt(at,at.current&1),i.flags|=128,null):(a&i.child.childLanes)!==0?fg(n,i,a):(tt(at,at.current&1),n=qr(n,i,a),n!==null?n.sibling:null);tt(at,at.current&1);break;case 19:if(c=(a&i.childLanes)!==0,(n.flags&128)!==0){if(c)return mg(n,i,a);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),tt(at,at.current),c)break;return null;case 22:case 23:return i.lanes=0,lg(n,i,a)}return qr(n,i,a)}var gg,hd,yg,_g;gg=function(n,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},hd=function(){},yg=function(n,i,a,c){var d=n.memoizedProps;if(d!==c){n=i.stateNode,Ii(dr.current);var m=null;switch(a){case"input":d=Je(n,d),c=Je(n,c),m=[];break;case"select":d=le({},d,{value:void 0}),c=le({},c,{value:void 0}),m=[];break;case"textarea":d=ra(n,d),c=ra(n,c),m=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=uu)}Mn(a,c);var w;a=null;for(B in d)if(!c.hasOwnProperty(B)&&d.hasOwnProperty(B)&&d[B]!=null)if(B==="style"){var N=d[B];for(w in N)N.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else B!=="dangerouslySetInnerHTML"&&B!=="children"&&B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&B!=="autoFocus"&&(o.hasOwnProperty(B)?m||(m=[]):(m=m||[]).push(B,null));for(B in c){var V=c[B];if(N=d?.[B],c.hasOwnProperty(B)&&V!==N&&(V!=null||N!=null))if(B==="style")if(N){for(w in N)!N.hasOwnProperty(w)||V&&V.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in V)V.hasOwnProperty(w)&&N[w]!==V[w]&&(a||(a={}),a[w]=V[w])}else a||(m||(m=[]),m.push(B,a)),a=V;else B==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,N=N?N.__html:void 0,V!=null&&N!==V&&(m=m||[]).push(B,V)):B==="children"?typeof V!="string"&&typeof V!="number"||(m=m||[]).push(B,""+V):B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&(o.hasOwnProperty(B)?(V!=null&&B==="onScroll"&&rt("scroll",n),m||N===V||(m=[])):(m=m||[]).push(B,V))}a&&(m=m||[]).push("style",a);var B=m;(i.updateQueue=B)&&(i.flags|=4)}},_g=function(n,i,a,c){a!==c&&(i.flags|=4)};function qa(n,i){if(!ot)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Kt(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(i)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=a,i}function vE(n,i,a){var c=i.pendingProps;switch(Dh(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kt(i),null;case 1:return sn(i.type)&&hu(),Kt(i),null;case 3:return c=i.stateNode,Io(),st(rn),st(Ht),Hh(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(gu(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Un!==null&&(Td(Un),Un=null))),hd(n,i),Kt(i),null;case 5:$h(i);var d=Ii(La.current);if(a=i.type,n!==null&&i.stateNode!=null)yg(n,i,a,c,d),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!c){if(i.stateNode===null)throw Error(t(166));return Kt(i),null}if(n=Ii(dr.current),gu(i)){c=i.stateNode,a=i.type;var m=i.memoizedProps;switch(c[hr]=i,c[Da]=m,n=(i.mode&1)!==0,a){case"dialog":rt("cancel",c),rt("close",c);break;case"iframe":case"object":case"embed":rt("load",c);break;case"video":case"audio":for(d=0;d<xa.length;d++)rt(xa[d],c);break;case"source":rt("error",c);break;case"img":case"image":case"link":rt("error",c),rt("load",c);break;case"details":rt("toggle",c);break;case"input":ts(c,m),rt("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!m.multiple},rt("invalid",c);break;case"textarea":sa(c,m),rt("invalid",c)}Mn(a,m),d=null;for(var w in m)if(m.hasOwnProperty(w)){var N=m[w];w==="children"?typeof N=="string"?c.textContent!==N&&(m.suppressHydrationWarning!==!0&&lu(c.textContent,N,n),d=["children",N]):typeof N=="number"&&c.textContent!==""+N&&(m.suppressHydrationWarning!==!0&&lu(c.textContent,N,n),d=["children",""+N]):o.hasOwnProperty(w)&&N!=null&&w==="onScroll"&&rt("scroll",c)}switch(a){case"input":nn(c),Cr(c,m,!0);break;case"textarea":nn(c),ns(c);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(c.onclick=uu)}c=d,i.updateQueue=c,c!==null&&(i.flags|=4)}else{w=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=ia(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=w.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=w.createElement(a,{is:c.is}):(n=w.createElement(a),a==="select"&&(w=n,c.multiple?w.multiple=!0:c.size&&(w.size=c.size))):n=w.createElementNS(n,a),n[hr]=i,n[Da]=c,gg(n,i,!1,!1),i.stateNode=n;e:{switch(w=Wi(a,c),a){case"dialog":rt("cancel",n),rt("close",n),d=c;break;case"iframe":case"object":case"embed":rt("load",n),d=c;break;case"video":case"audio":for(d=0;d<xa.length;d++)rt(xa[d],n);d=c;break;case"source":rt("error",n),d=c;break;case"img":case"image":case"link":rt("error",n),rt("load",n),d=c;break;case"details":rt("toggle",n),d=c;break;case"input":ts(n,c),d=Je(n,c),rt("invalid",n);break;case"option":d=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},d=le({},c,{value:void 0}),rt("invalid",n);break;case"textarea":sa(n,c),d=ra(n,c),rt("invalid",n);break;default:d=c}Mn(a,d),N=d;for(m in N)if(N.hasOwnProperty(m)){var V=N[m];m==="style"?$i(n,V):m==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,V!=null&&Ml(n,V)):m==="children"?typeof V=="string"?(a!=="textarea"||V!=="")&&si(n,V):typeof V=="number"&&si(n,""+V):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(o.hasOwnProperty(m)?V!=null&&m==="onScroll"&&rt("scroll",n):V!=null&&ae(n,m,V,w))}switch(a){case"input":nn(n),Cr(n,c,!1);break;case"textarea":nn(n),ns(n);break;case"option":c.value!=null&&n.setAttribute("value",""+Le(c.value));break;case"select":n.multiple=!!c.multiple,m=c.value,m!=null?On(n,!!c.multiple,m,!1):c.defaultValue!=null&&On(n,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=uu)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Kt(i),null;case 6:if(n&&i.stateNode!=null)_g(n,i,n.memoizedProps,c);else{if(typeof c!="string"&&i.stateNode===null)throw Error(t(166));if(a=Ii(La.current),Ii(dr.current),gu(i)){if(c=i.stateNode,a=i.memoizedProps,c[hr]=i,(m=c.nodeValue!==a)&&(n=yn,n!==null))switch(n.tag){case 3:lu(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&lu(c.nodeValue,a,(n.mode&1)!==0)}m&&(i.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[hr]=i,i.stateNode=c}return Kt(i),null;case 13:if(st(at),c=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(ot&&_n!==null&&(i.mode&1)!==0&&(i.flags&128)===0)Em(),vo(),i.flags|=98560,m=!1;else if(m=gu(i),c!==null&&c.dehydrated!==null){if(n===null){if(!m)throw Error(t(318));if(m=i.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(t(317));m[hr]=i}else vo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Kt(i),m=!1}else Un!==null&&(Td(Un),Un=null),m=!0;if(!m)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=a,i):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(i.child.flags|=8192,(i.mode&1)!==0&&(n===null||(at.current&1)!==0?kt===0&&(kt=3):Ad())),i.updateQueue!==null&&(i.flags|=4),Kt(i),null);case 4:return Io(),hd(n,i),n===null&&Na(i.stateNode.containerInfo),Kt(i),null;case 10:return Fh(i.type._context),Kt(i),null;case 17:return sn(i.type)&&hu(),Kt(i),null;case 19:if(st(at),m=i.memoizedState,m===null)return Kt(i),null;if(c=(i.flags&128)!==0,w=m.rendering,w===null)if(c)qa(m,!1);else{if(kt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(w=Tu(n),w!==null){for(i.flags|=128,qa(m,!1),c=w.updateQueue,c!==null&&(i.updateQueue=c,i.flags|=4),i.subtreeFlags=0,c=a,a=i.child;a!==null;)m=a,n=c,m.flags&=14680066,w=m.alternate,w===null?(m.childLanes=0,m.lanes=n,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=w.childLanes,m.lanes=w.lanes,m.child=w.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=w.memoizedProps,m.memoizedState=w.memoizedState,m.updateQueue=w.updateQueue,m.type=w.type,n=w.dependencies,m.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return tt(at,at.current&1|2),i.child}n=n.sibling}m.tail!==null&&nt()>Ro&&(i.flags|=128,c=!0,qa(m,!1),i.lanes=4194304)}else{if(!c)if(n=Tu(w),n!==null){if(i.flags|=128,c=!0,a=n.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),qa(m,!0),m.tail===null&&m.tailMode==="hidden"&&!w.alternate&&!ot)return Kt(i),null}else 2*nt()-m.renderingStartTime>Ro&&a!==1073741824&&(i.flags|=128,c=!0,qa(m,!1),i.lanes=4194304);m.isBackwards?(w.sibling=i.child,i.child=w):(a=m.last,a!==null?a.sibling=w:i.child=w,m.last=w)}return m.tail!==null?(i=m.tail,m.rendering=i,m.tail=i.sibling,m.renderingStartTime=nt(),i.sibling=null,a=at.current,tt(at,c?a&1|2:a&1),i):(Kt(i),null);case 22:case 23:return Sd(),c=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(i.flags|=8192),c&&(i.mode&1)!==0?(vn&1073741824)!==0&&(Kt(i),i.subtreeFlags&6&&(i.flags|=8192)):Kt(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function wE(n,i){switch(Dh(i),i.tag){case 1:return sn(i.type)&&hu(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Io(),st(rn),st(Ht),Hh(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 5:return $h(i),null;case 13:if(st(at),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(t(340));vo()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return st(at),null;case 4:return Io(),null;case 10:return Fh(i.type._context),null;case 22:case 23:return Sd(),null;case 24:return null;default:return null}}var Nu=!1,Qt=!1,EE=typeof WeakSet=="function"?WeakSet:Set,de=null;function Ao(n,i){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){ht(n,i,c)}else a.current=null}function dd(n,i,a){try{a()}catch(c){ht(n,i,c)}}var vg=!1;function TE(n,i){if(Sh=Vr,n=Yp(),gh(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var w=0,N=-1,V=-1,B=0,ee=0,te=n,Y=null;t:for(;;){for(var ce;te!==a||d!==0&&te.nodeType!==3||(N=w+d),te!==m||c!==0&&te.nodeType!==3||(V=w+c),te.nodeType===3&&(w+=te.nodeValue.length),(ce=te.firstChild)!==null;)Y=te,te=ce;for(;;){if(te===n)break t;if(Y===a&&++B===d&&(N=w),Y===m&&++ee===c&&(V=w),(ce=te.nextSibling)!==null)break;te=Y,Y=te.parentNode}te=ce}a=N===-1||V===-1?null:{start:N,end:V}}else a=null}a=a||{start:0,end:0}}else a=null;for(Ah={focusedElem:n,selectionRange:a},Vr=!1,de=i;de!==null;)if(i=de,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,de=n;else for(;de!==null;){i=de;try{var me=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(me!==null){var ye=me.memoizedProps,gt=me.memoizedState,L=i.stateNode,M=L.getSnapshotBeforeUpdate(i.elementType===i.type?ye:Bn(i.type,ye),gt);L.__reactInternalSnapshotBeforeUpdate=M}break;case 3:var U=i.stateNode.containerInfo;U.nodeType===1?U.textContent="":U.nodeType===9&&U.documentElement&&U.removeChild(U.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ne){ht(i,i.return,ne)}if(n=i.sibling,n!==null){n.return=i.return,de=n;break}de=i.return}return me=vg,vg=!1,me}function $a(n,i,a){var c=i.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&n)===n){var m=d.destroy;d.destroy=void 0,m!==void 0&&dd(i,a,m)}d=d.next}while(d!==c)}}function bu(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==i)}}function fd(n){var i=n.ref;if(i!==null){var a=n.stateNode;n.tag,n=a,typeof i=="function"?i(n):i.current=n}}function wg(n){var i=n.alternate;i!==null&&(n.alternate=null,wg(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[hr],delete i[Da],delete i[kh],delete i[sE],delete i[iE])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Eg(n){return n.tag===5||n.tag===3||n.tag===4}function Tg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Eg(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function pd(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(n,i):a.insertBefore(n,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(n,a)):(i=a,i.appendChild(n)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=uu));else if(c!==4&&(n=n.child,n!==null))for(pd(n,i,a),n=n.sibling;n!==null;)pd(n,i,a),n=n.sibling}function md(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(md(n,i,a),n=n.sibling;n!==null;)md(n,i,a),n=n.sibling}var Lt=null,zn=!1;function Ss(n,i,a){for(a=a.child;a!==null;)Ig(n,i,a),a=a.sibling}function Ig(n,i,a){if(hn&&typeof hn.onCommitFiberUnmount=="function")try{hn.onCommitFiberUnmount(ui,a)}catch{}switch(a.tag){case 5:Qt||Ao(a,i);case 6:var c=Lt,d=zn;Lt=null,Ss(n,i,a),Lt=c,zn=d,Lt!==null&&(zn?(n=Lt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Lt.removeChild(a.stateNode));break;case 18:Lt!==null&&(zn?(n=Lt,a=a.stateNode,n.nodeType===8?Ph(n.parentNode,a):n.nodeType===1&&Ph(n,a),ps(n)):Ph(Lt,a.stateNode));break;case 4:c=Lt,d=zn,Lt=a.stateNode.containerInfo,zn=!0,Ss(n,i,a),Lt=c,zn=d;break;case 0:case 11:case 14:case 15:if(!Qt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var m=d,w=m.destroy;m=m.tag,w!==void 0&&((m&2)!==0||(m&4)!==0)&&dd(a,i,w),d=d.next}while(d!==c)}Ss(n,i,a);break;case 1:if(!Qt&&(Ao(a,i),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(N){ht(a,i,N)}Ss(n,i,a);break;case 21:Ss(n,i,a);break;case 22:a.mode&1?(Qt=(c=Qt)||a.memoizedState!==null,Ss(n,i,a),Qt=c):Ss(n,i,a);break;default:Ss(n,i,a)}}function Sg(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new EE),i.forEach(function(c){var d=NE.bind(null,n,c);a.has(c)||(a.add(c),c.then(d,d))})}}function qn(n,i){var a=i.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var m=n,w=i,N=w;e:for(;N!==null;){switch(N.tag){case 5:Lt=N.stateNode,zn=!1;break e;case 3:Lt=N.stateNode.containerInfo,zn=!0;break e;case 4:Lt=N.stateNode.containerInfo,zn=!0;break e}N=N.return}if(Lt===null)throw Error(t(160));Ig(m,w,d),Lt=null,zn=!1;var V=d.alternate;V!==null&&(V.return=null),d.return=null}catch(B){ht(d,i,B)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)Ag(i,n),i=i.sibling}function Ag(n,i){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(qn(i,n),pr(n),c&4){try{$a(3,n,n.return),bu(3,n)}catch(ye){ht(n,n.return,ye)}try{$a(5,n,n.return)}catch(ye){ht(n,n.return,ye)}}break;case 1:qn(i,n),pr(n),c&512&&a!==null&&Ao(a,a.return);break;case 5:if(qn(i,n),pr(n),c&512&&a!==null&&Ao(a,a.return),n.flags&32){var d=n.stateNode;try{si(d,"")}catch(ye){ht(n,n.return,ye)}}if(c&4&&(d=n.stateNode,d!=null)){var m=n.memoizedProps,w=a!==null?a.memoizedProps:m,N=n.type,V=n.updateQueue;if(n.updateQueue=null,V!==null)try{N==="input"&&m.type==="radio"&&m.name!=null&&Vn(d,m),Wi(N,w);var B=Wi(N,m);for(w=0;w<V.length;w+=2){var ee=V[w],te=V[w+1];ee==="style"?$i(d,te):ee==="dangerouslySetInnerHTML"?Ml(d,te):ee==="children"?si(d,te):ae(d,ee,te,B)}switch(N){case"input":In(d,m);break;case"textarea":Ol(d,m);break;case"select":var Y=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!m.multiple;var ce=m.value;ce!=null?On(d,!!m.multiple,ce,!1):Y!==!!m.multiple&&(m.defaultValue!=null?On(d,!!m.multiple,m.defaultValue,!0):On(d,!!m.multiple,m.multiple?[]:"",!1))}d[Da]=m}catch(ye){ht(n,n.return,ye)}}break;case 6:if(qn(i,n),pr(n),c&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,m=n.memoizedProps;try{d.nodeValue=m}catch(ye){ht(n,n.return,ye)}}break;case 3:if(qn(i,n),pr(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{ps(i.containerInfo)}catch(ye){ht(n,n.return,ye)}break;case 4:qn(i,n),pr(n);break;case 13:qn(i,n),pr(n),d=n.child,d.flags&8192&&(m=d.memoizedState!==null,d.stateNode.isHidden=m,!m||d.alternate!==null&&d.alternate.memoizedState!==null||(_d=nt())),c&4&&Sg(n);break;case 22:if(ee=a!==null&&a.memoizedState!==null,n.mode&1?(Qt=(B=Qt)||ee,qn(i,n),Qt=B):qn(i,n),pr(n),c&8192){if(B=n.memoizedState!==null,(n.stateNode.isHidden=B)&&!ee&&(n.mode&1)!==0)for(de=n,ee=n.child;ee!==null;){for(te=de=ee;de!==null;){switch(Y=de,ce=Y.child,Y.tag){case 0:case 11:case 14:case 15:$a(4,Y,Y.return);break;case 1:Ao(Y,Y.return);var me=Y.stateNode;if(typeof me.componentWillUnmount=="function"){c=Y,a=Y.return;try{i=c,me.props=i.memoizedProps,me.state=i.memoizedState,me.componentWillUnmount()}catch(ye){ht(c,a,ye)}}break;case 5:Ao(Y,Y.return);break;case 22:if(Y.memoizedState!==null){Pg(te);continue}}ce!==null?(ce.return=Y,de=ce):Pg(te)}ee=ee.sibling}e:for(ee=null,te=n;;){if(te.tag===5){if(ee===null){ee=te;try{d=te.stateNode,B?(m=d.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(N=te.stateNode,V=te.memoizedProps.style,w=V!=null&&V.hasOwnProperty("display")?V.display:null,N.style.display=is("display",w))}catch(ye){ht(n,n.return,ye)}}}else if(te.tag===6){if(ee===null)try{te.stateNode.nodeValue=B?"":te.memoizedProps}catch(ye){ht(n,n.return,ye)}}else if((te.tag!==22&&te.tag!==23||te.memoizedState===null||te===n)&&te.child!==null){te.child.return=te,te=te.child;continue}if(te===n)break e;for(;te.sibling===null;){if(te.return===null||te.return===n)break e;ee===te&&(ee=null),te=te.return}ee===te&&(ee=null),te.sibling.return=te.return,te=te.sibling}}break;case 19:qn(i,n),pr(n),c&4&&Sg(n);break;case 21:break;default:qn(i,n),pr(n)}}function pr(n){var i=n.flags;if(i&2){try{e:{for(var a=n.return;a!==null;){if(Eg(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(si(d,""),c.flags&=-33);var m=Tg(n);md(n,m,d);break;case 3:case 4:var w=c.stateNode.containerInfo,N=Tg(n);pd(n,N,w);break;default:throw Error(t(161))}}catch(V){ht(n,n.return,V)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function IE(n,i,a){de=n,Cg(n)}function Cg(n,i,a){for(var c=(n.mode&1)!==0;de!==null;){var d=de,m=d.child;if(d.tag===22&&c){var w=d.memoizedState!==null||Nu;if(!w){var N=d.alternate,V=N!==null&&N.memoizedState!==null||Qt;N=Nu;var B=Qt;if(Nu=w,(Qt=V)&&!B)for(de=d;de!==null;)w=de,V=w.child,w.tag===22&&w.memoizedState!==null?kg(d):V!==null?(V.return=w,de=V):kg(d);for(;m!==null;)de=m,Cg(m),m=m.sibling;de=d,Nu=N,Qt=B}Rg(n)}else(d.subtreeFlags&8772)!==0&&m!==null?(m.return=d,de=m):Rg(n)}}function Rg(n){for(;de!==null;){var i=de;if((i.flags&8772)!==0){var a=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:Qt||bu(5,i);break;case 1:var c=i.stateNode;if(i.flags&4&&!Qt)if(a===null)c.componentDidMount();else{var d=i.elementType===i.type?a.memoizedProps:Bn(i.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var m=i.updateQueue;m!==null&&Pm(i,m,c);break;case 3:var w=i.updateQueue;if(w!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}Pm(i,w,a)}break;case 5:var N=i.stateNode;if(a===null&&i.flags&4){a=N;var V=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":V.autoFocus&&a.focus();break;case"img":V.src&&(a.src=V.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var B=i.alternate;if(B!==null){var ee=B.memoizedState;if(ee!==null){var te=ee.dehydrated;te!==null&&ps(te)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Qt||i.flags&512&&fd(i)}catch(Y){ht(i,i.return,Y)}}if(i===n){de=null;break}if(a=i.sibling,a!==null){a.return=i.return,de=a;break}de=i.return}}function Pg(n){for(;de!==null;){var i=de;if(i===n){de=null;break}var a=i.sibling;if(a!==null){a.return=i.return,de=a;break}de=i.return}}function kg(n){for(;de!==null;){var i=de;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{bu(4,i)}catch(V){ht(i,a,V)}break;case 1:var c=i.stateNode;if(typeof c.componentDidMount=="function"){var d=i.return;try{c.componentDidMount()}catch(V){ht(i,d,V)}}var m=i.return;try{fd(i)}catch(V){ht(i,m,V)}break;case 5:var w=i.return;try{fd(i)}catch(V){ht(i,w,V)}}}catch(V){ht(i,i.return,V)}if(i===n){de=null;break}var N=i.sibling;if(N!==null){N.return=i.return,de=N;break}de=i.return}}var SE=Math.ceil,Du=H.ReactCurrentDispatcher,gd=H.ReactCurrentOwner,xn=H.ReactCurrentBatchConfig,He=0,bt=null,It=null,Ft=0,vn=0,Co=vs(0),kt=0,Wa=null,Ai=0,Vu=0,yd=0,Ha=null,an=null,_d=0,Ro=1/0,$r=null,Ou=!1,vd=null,As=null,Mu=!1,Cs=null,ju=0,Ga=0,wd=null,Lu=-1,Fu=0;function en(){return(He&6)!==0?nt():Lu!==-1?Lu:Lu=nt()}function Rs(n){return(n.mode&1)===0?1:(He&2)!==0&&Ft!==0?Ft&-Ft:aE.transition!==null?(Fu===0&&(Fu=pa()),Fu):(n=qe,n!==0||(n=window.event,n=n===void 0?16:to(n.type)),n)}function $n(n,i,a,c){if(50<Ga)throw Ga=0,wd=null,Error(t(185));fi(n,a,c),((He&2)===0||n!==bt)&&(n===bt&&((He&2)===0&&(Vu|=a),kt===4&&Ps(n,Ft)),ln(n,c),a===1&&He===0&&(i.mode&1)===0&&(Ro=nt()+500,fu&&Es()))}function ln(n,i){var a=n.callbackNode;di(n,i);var c=Nr(n,n===bt?Ft:0);if(c===0)a!==null&&Ki(a),n.callbackNode=null,n.callbackPriority=0;else if(i=c&-c,n.callbackPriority!==i){if(a!=null&&Ki(a),i===1)n.tag===0?oE(Ng.bind(null,n)):gm(Ng.bind(null,n)),nE(function(){(He&6)===0&&Es()}),a=null;else{switch(tr(c)){case 1:a=Qi;break;case 4:a=ha;break;case 16:a=li;break;case 536870912:a=Xi;break;default:a=li}a=Fg(a,xg.bind(null,n))}n.callbackPriority=i,n.callbackNode=a}}function xg(n,i){if(Lu=-1,Fu=0,(He&6)!==0)throw Error(t(327));var a=n.callbackNode;if(Po()&&n.callbackNode!==a)return null;var c=Nr(n,n===bt?Ft:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||i)i=Uu(n,c);else{i=c;var d=He;He|=2;var m=Dg();(bt!==n||Ft!==i)&&($r=null,Ro=nt()+500,Ri(n,i));do try{RE();break}catch(N){bg(n,N)}while(!0);Lh(),Du.current=m,He=d,It!==null?i=0:(bt=null,Ft=0,i=kt)}if(i!==0){if(i===2&&(d=fa(n),d!==0&&(c=d,i=Ed(n,d))),i===1)throw a=Wa,Ri(n,0),Ps(n,c),ln(n,nt()),a;if(i===6)Ps(n,c);else{if(d=n.current.alternate,(c&30)===0&&!AE(d)&&(i=Uu(n,c),i===2&&(m=fa(n),m!==0&&(c=m,i=Ed(n,m))),i===1))throw a=Wa,Ri(n,0),Ps(n,c),ln(n,nt()),a;switch(n.finishedWork=d,n.finishedLanes=c,i){case 0:case 1:throw Error(t(345));case 2:Pi(n,an,$r);break;case 3:if(Ps(n,c),(c&130023424)===c&&(i=_d+500-nt(),10<i)){if(Nr(n,0)!==0)break;if(d=n.suspendedLanes,(d&c)!==c){en(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=Rh(Pi.bind(null,n,an,$r),i);break}Pi(n,an,$r);break;case 4:if(Ps(n,c),(c&4194240)===c)break;for(i=n.eventTimes,d=-1;0<c;){var w=31-dn(c);m=1<<w,w=i[w],w>d&&(d=w),c&=~m}if(c=d,c=nt()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*SE(c/1960))-c,10<c){n.timeoutHandle=Rh(Pi.bind(null,n,an,$r),c);break}Pi(n,an,$r);break;case 5:Pi(n,an,$r);break;default:throw Error(t(329))}}}return ln(n,nt()),n.callbackNode===a?xg.bind(null,n):null}function Ed(n,i){var a=Ha;return n.current.memoizedState.isDehydrated&&(Ri(n,i).flags|=256),n=Uu(n,i),n!==2&&(i=an,an=a,i!==null&&Td(i)),n}function Td(n){an===null?an=n:an.push.apply(an,n)}function AE(n){for(var i=n;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],m=d.getSnapshot;d=d.value;try{if(!Fn(m(),d))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ps(n,i){for(i&=~yd,i&=~Vu,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var a=31-dn(i),c=1<<a;n[a]=-1,i&=~c}}function Ng(n){if((He&6)!==0)throw Error(t(327));Po();var i=Nr(n,0);if((i&1)===0)return ln(n,nt()),null;var a=Uu(n,i);if(n.tag!==0&&a===2){var c=fa(n);c!==0&&(i=c,a=Ed(n,c))}if(a===1)throw a=Wa,Ri(n,0),Ps(n,i),ln(n,nt()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,Pi(n,an,$r),ln(n,nt()),null}function Id(n,i){var a=He;He|=1;try{return n(i)}finally{He=a,He===0&&(Ro=nt()+500,fu&&Es())}}function Ci(n){Cs!==null&&Cs.tag===0&&(He&6)===0&&Po();var i=He;He|=1;var a=xn.transition,c=qe;try{if(xn.transition=null,qe=1,n)return n()}finally{qe=c,xn.transition=a,He=i,(He&6)===0&&Es()}}function Sd(){vn=Co.current,st(Co)}function Ri(n,i){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,tE(a)),It!==null)for(a=It.return;a!==null;){var c=a;switch(Dh(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&hu();break;case 3:Io(),st(rn),st(Ht),Hh();break;case 5:$h(c);break;case 4:Io();break;case 13:st(at);break;case 19:st(at);break;case 10:Fh(c.type._context);break;case 22:case 23:Sd()}a=a.return}if(bt=n,It=n=ks(n.current,null),Ft=vn=i,kt=0,Wa=null,yd=Vu=Ai=0,an=Ha=null,Ti!==null){for(i=0;i<Ti.length;i++)if(a=Ti[i],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,m=a.pending;if(m!==null){var w=m.next;m.next=d,c.next=w}a.pending=c}Ti=null}return n}function bg(n,i){do{var a=It;try{if(Lh(),Iu.current=Ru,Su){for(var c=lt.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}Su=!1}if(Si=0,Nt=Pt=lt=null,Fa=!1,Ua=0,gd.current=null,a===null||a.return===null){kt=1,Wa=i,It=null;break}e:{var m=n,w=a.return,N=a,V=i;if(i=Ft,N.flags|=32768,V!==null&&typeof V=="object"&&typeof V.then=="function"){var B=V,ee=N,te=ee.tag;if((ee.mode&1)===0&&(te===0||te===11||te===15)){var Y=ee.alternate;Y?(ee.updateQueue=Y.updateQueue,ee.memoizedState=Y.memoizedState,ee.lanes=Y.lanes):(ee.updateQueue=null,ee.memoizedState=null)}var ce=rg(w);if(ce!==null){ce.flags&=-257,sg(ce,w,N,m,i),ce.mode&1&&ng(m,B,i),i=ce,V=B;var me=i.updateQueue;if(me===null){var ye=new Set;ye.add(V),i.updateQueue=ye}else me.add(V);break e}else{if((i&1)===0){ng(m,B,i),Ad();break e}V=Error(t(426))}}else if(ot&&N.mode&1){var gt=rg(w);if(gt!==null){(gt.flags&65536)===0&&(gt.flags|=256),sg(gt,w,N,m,i),Mh(So(V,N));break e}}m=V=So(V,N),kt!==4&&(kt=2),Ha===null?Ha=[m]:Ha.push(m),m=w;do{switch(m.tag){case 3:m.flags|=65536,i&=-i,m.lanes|=i;var L=eg(m,V,i);Rm(m,L);break e;case 1:N=V;var M=m.type,U=m.stateNode;if((m.flags&128)===0&&(typeof M.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(As===null||!As.has(U)))){m.flags|=65536,i&=-i,m.lanes|=i;var ne=tg(m,N,i);Rm(m,ne);break e}}m=m.return}while(m!==null)}Og(a)}catch(ve){i=ve,It===a&&a!==null&&(It=a=a.return);continue}break}while(!0)}function Dg(){var n=Du.current;return Du.current=Ru,n===null?Ru:n}function Ad(){(kt===0||kt===3||kt===2)&&(kt=4),bt===null||(Ai&268435455)===0&&(Vu&268435455)===0||Ps(bt,Ft)}function Uu(n,i){var a=He;He|=2;var c=Dg();(bt!==n||Ft!==i)&&($r=null,Ri(n,i));do try{CE();break}catch(d){bg(n,d)}while(!0);if(Lh(),He=a,Du.current=c,It!==null)throw Error(t(261));return bt=null,Ft=0,kt}function CE(){for(;It!==null;)Vg(It)}function RE(){for(;It!==null&&!ai();)Vg(It)}function Vg(n){var i=Lg(n.alternate,n,vn);n.memoizedProps=n.pendingProps,i===null?Og(n):It=i,gd.current=null}function Og(n){var i=n;do{var a=i.alternate;if(n=i.return,(i.flags&32768)===0){if(a=vE(a,i,vn),a!==null){It=a;return}}else{if(a=wE(a,i),a!==null){a.flags&=32767,It=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{kt=6,It=null;return}}if(i=i.sibling,i!==null){It=i;return}It=i=n}while(i!==null);kt===0&&(kt=5)}function Pi(n,i,a){var c=qe,d=xn.transition;try{xn.transition=null,qe=1,PE(n,i,a,c)}finally{xn.transition=d,qe=c}return null}function PE(n,i,a,c){do Po();while(Cs!==null);if((He&6)!==0)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var m=a.lanes|a.childLanes;if(hh(n,m),n===bt&&(It=bt=null,Ft=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Mu||(Mu=!0,Fg(li,function(){return Po(),null})),m=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||m){m=xn.transition,xn.transition=null;var w=qe;qe=1;var N=He;He|=4,gd.current=null,TE(n,a),Ag(a,n),K0(Ah),Vr=!!Sh,Ah=Sh=null,n.current=a,IE(a),xr(),He=N,qe=w,xn.transition=m}else n.current=a;if(Mu&&(Mu=!1,Cs=n,ju=d),m=n.pendingLanes,m===0&&(As=null),Gl(a.stateNode),ln(n,nt()),i!==null)for(c=n.onRecoverableError,a=0;a<i.length;a++)d=i[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(Ou)throw Ou=!1,n=vd,vd=null,n;return(ju&1)!==0&&n.tag!==0&&Po(),m=n.pendingLanes,(m&1)!==0?n===wd?Ga++:(Ga=0,wd=n):Ga=0,Es(),null}function Po(){if(Cs!==null){var n=tr(ju),i=xn.transition,a=qe;try{if(xn.transition=null,qe=16>n?16:n,Cs===null)var c=!1;else{if(n=Cs,Cs=null,ju=0,(He&6)!==0)throw Error(t(331));var d=He;for(He|=4,de=n.current;de!==null;){var m=de,w=m.child;if((de.flags&16)!==0){var N=m.deletions;if(N!==null){for(var V=0;V<N.length;V++){var B=N[V];for(de=B;de!==null;){var ee=de;switch(ee.tag){case 0:case 11:case 15:$a(8,ee,m)}var te=ee.child;if(te!==null)te.return=ee,de=te;else for(;de!==null;){ee=de;var Y=ee.sibling,ce=ee.return;if(wg(ee),ee===B){de=null;break}if(Y!==null){Y.return=ce,de=Y;break}de=ce}}}var me=m.alternate;if(me!==null){var ye=me.child;if(ye!==null){me.child=null;do{var gt=ye.sibling;ye.sibling=null,ye=gt}while(ye!==null)}}de=m}}if((m.subtreeFlags&2064)!==0&&w!==null)w.return=m,de=w;else e:for(;de!==null;){if(m=de,(m.flags&2048)!==0)switch(m.tag){case 0:case 11:case 15:$a(9,m,m.return)}var L=m.sibling;if(L!==null){L.return=m.return,de=L;break e}de=m.return}}var M=n.current;for(de=M;de!==null;){w=de;var U=w.child;if((w.subtreeFlags&2064)!==0&&U!==null)U.return=w,de=U;else e:for(w=M;de!==null;){if(N=de,(N.flags&2048)!==0)try{switch(N.tag){case 0:case 11:case 15:bu(9,N)}}catch(ve){ht(N,N.return,ve)}if(N===w){de=null;break e}var ne=N.sibling;if(ne!==null){ne.return=N.return,de=ne;break e}de=N.return}}if(He=d,Es(),hn&&typeof hn.onPostCommitFiberRoot=="function")try{hn.onPostCommitFiberRoot(ui,n)}catch{}c=!0}return c}finally{qe=a,xn.transition=i}}return!1}function Mg(n,i,a){i=So(a,i),i=eg(n,i,1),n=Is(n,i,1),i=en(),n!==null&&(fi(n,1,i),ln(n,i))}function ht(n,i,a){if(n.tag===3)Mg(n,n,a);else for(;i!==null;){if(i.tag===3){Mg(i,n,a);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(As===null||!As.has(c))){n=So(a,n),n=tg(i,n,1),i=Is(i,n,1),n=en(),i!==null&&(fi(i,1,n),ln(i,n));break}}i=i.return}}function kE(n,i,a){var c=n.pingCache;c!==null&&c.delete(i),i=en(),n.pingedLanes|=n.suspendedLanes&a,bt===n&&(Ft&a)===a&&(kt===4||kt===3&&(Ft&130023424)===Ft&&500>nt()-_d?Ri(n,0):yd|=a),ln(n,i)}function jg(n,i){i===0&&((n.mode&1)===0?i=1:(i=hs,hs<<=1,(hs&130023424)===0&&(hs=4194304)));var a=en();n=Br(n,i),n!==null&&(fi(n,i,a),ln(n,a))}function xE(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),jg(n,a)}function NE(n,i){var a=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(i),jg(n,a)}var Lg;Lg=function(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps||rn.current)on=!0;else{if((n.lanes&a)===0&&(i.flags&128)===0)return on=!1,_E(n,i,a);on=(n.flags&131072)!==0}else on=!1,ot&&(i.flags&1048576)!==0&&ym(i,mu,i.index);switch(i.lanes=0,i.tag){case 2:var c=i.type;xu(n,i),n=i.pendingProps;var d=go(i,Ht.current);To(i,a),d=Qh(null,i,c,n,d,a);var m=Xh();return i.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,sn(c)?(m=!0,du(i)):m=!1,i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,zh(i),d.updater=Pu,i.stateNode=d,d._reactInternals=i,nd(i,c,n,a),i=od(null,i,c,!0,m,a)):(i.tag=0,ot&&m&&bh(i),Zt(null,i,d,a),i=i.child),i;case 16:c=i.elementType;e:{switch(xu(n,i),n=i.pendingProps,d=c._init,c=d(c._payload),i.type=c,d=i.tag=DE(c),n=Bn(c,n),d){case 0:i=id(null,i,c,n,a);break e;case 1:i=cg(null,i,c,n,a);break e;case 11:i=ig(null,i,c,n,a);break e;case 14:i=og(null,i,c,Bn(c.type,n),a);break e}throw Error(t(306,c,""))}return i;case 0:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:Bn(c,d),id(n,i,c,d,a);case 1:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:Bn(c,d),cg(n,i,c,d,a);case 3:e:{if(hg(i),n===null)throw Error(t(387));c=i.pendingProps,m=i.memoizedState,d=m.element,Cm(n,i),Eu(i,c,null,a);var w=i.memoizedState;if(c=w.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){d=So(Error(t(423)),i),i=dg(n,i,c,a,d);break e}else if(c!==d){d=So(Error(t(424)),i),i=dg(n,i,c,a,d);break e}else for(_n=_s(i.stateNode.containerInfo.firstChild),yn=i,ot=!0,Un=null,a=Sm(i,null,c,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(vo(),c===d){i=qr(n,i,a);break e}Zt(n,i,c,a)}i=i.child}return i;case 5:return km(i),n===null&&Oh(i),c=i.type,d=i.pendingProps,m=n!==null?n.memoizedProps:null,w=d.children,Ch(c,d)?w=null:m!==null&&Ch(c,m)&&(i.flags|=32),ug(n,i),Zt(n,i,w,a),i.child;case 6:return n===null&&Oh(i),null;case 13:return fg(n,i,a);case 4:return qh(i,i.stateNode.containerInfo),c=i.pendingProps,n===null?i.child=wo(i,null,c,a):Zt(n,i,c,a),i.child;case 11:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:Bn(c,d),ig(n,i,c,d,a);case 7:return Zt(n,i,i.pendingProps,a),i.child;case 8:return Zt(n,i,i.pendingProps.children,a),i.child;case 12:return Zt(n,i,i.pendingProps.children,a),i.child;case 10:e:{if(c=i.type._context,d=i.pendingProps,m=i.memoizedProps,w=d.value,tt(_u,c._currentValue),c._currentValue=w,m!==null)if(Fn(m.value,w)){if(m.children===d.children&&!rn.current){i=qr(n,i,a);break e}}else for(m=i.child,m!==null&&(m.return=i);m!==null;){var N=m.dependencies;if(N!==null){w=m.child;for(var V=N.firstContext;V!==null;){if(V.context===c){if(m.tag===1){V=zr(-1,a&-a),V.tag=2;var B=m.updateQueue;if(B!==null){B=B.shared;var ee=B.pending;ee===null?V.next=V:(V.next=ee.next,ee.next=V),B.pending=V}}m.lanes|=a,V=m.alternate,V!==null&&(V.lanes|=a),Uh(m.return,a,i),N.lanes|=a;break}V=V.next}}else if(m.tag===10)w=m.type===i.type?null:m.child;else if(m.tag===18){if(w=m.return,w===null)throw Error(t(341));w.lanes|=a,N=w.alternate,N!==null&&(N.lanes|=a),Uh(w,a,i),w=m.sibling}else w=m.child;if(w!==null)w.return=m;else for(w=m;w!==null;){if(w===i){w=null;break}if(m=w.sibling,m!==null){m.return=w.return,w=m;break}w=w.return}m=w}Zt(n,i,d.children,a),i=i.child}return i;case 9:return d=i.type,c=i.pendingProps.children,To(i,a),d=Pn(d),c=c(d),i.flags|=1,Zt(n,i,c,a),i.child;case 14:return c=i.type,d=Bn(c,i.pendingProps),d=Bn(c.type,d),og(n,i,c,d,a);case 15:return ag(n,i,i.type,i.pendingProps,a);case 17:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:Bn(c,d),xu(n,i),i.tag=1,sn(c)?(n=!0,du(i)):n=!1,To(i,a),Jm(i,c,d),nd(i,c,d,a),od(null,i,c,!0,n,a);case 19:return mg(n,i,a);case 22:return lg(n,i,a)}throw Error(t(156,i.tag))};function Fg(n,i){return ca(n,i)}function bE(n,i,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nn(n,i,a,c){return new bE(n,i,a,c)}function Cd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function DE(n){if(typeof n=="function")return Cd(n)?1:0;if(n!=null){if(n=n.$$typeof,n===k)return 11;if(n===_e)return 14}return 2}function ks(n,i){var a=n.alternate;return a===null?(a=Nn(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Bu(n,i,a,c,d,m){var w=2;if(c=n,typeof n=="function")Cd(n)&&(w=1);else if(typeof n=="string")w=5;else e:switch(n){case S:return ki(a.children,d,m,i);case A:w=8,d|=8;break;case P:return n=Nn(12,a,i,d|2),n.elementType=P,n.lanes=m,n;case R:return n=Nn(13,a,i,d),n.elementType=R,n.lanes=m,n;case ie:return n=Nn(19,a,i,d),n.elementType=ie,n.lanes=m,n;case Ae:return zu(a,d,m,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case x:w=10;break e;case b:w=9;break e;case k:w=11;break e;case _e:w=14;break e;case Me:w=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return i=Nn(w,a,i,d),i.elementType=n,i.type=c,i.lanes=m,i}function ki(n,i,a,c){return n=Nn(7,n,c,i),n.lanes=a,n}function zu(n,i,a,c){return n=Nn(22,n,c,i),n.elementType=Ae,n.lanes=a,n.stateNode={isHidden:!1},n}function Rd(n,i,a){return n=Nn(6,n,null,i),n.lanes=a,n}function Pd(n,i,a){return i=Nn(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function VE(n,i,a,c,d){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ma(0),this.expirationTimes=ma(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ma(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function kd(n,i,a,c,d,m,w,N,V){return n=new VE(n,i,a,N,V),i===1?(i=1,m===!0&&(i|=8)):i=0,m=Nn(3,null,null,i),n.current=m,m.stateNode=n,m.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},zh(m),n}function OE(n,i,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:re,key:c==null?null:""+c,children:n,containerInfo:i,implementation:a}}function Ug(n){if(!n)return ws;n=n._reactInternals;e:{if(jn(n)!==n||n.tag!==1)throw Error(t(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(sn(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(sn(a))return pm(n,a,i)}return i}function Bg(n,i,a,c,d,m,w,N,V){return n=kd(a,c,!0,n,d,m,w,N,V),n.context=Ug(null),a=n.current,c=en(),d=Rs(a),m=zr(c,d),m.callback=i??null,Is(a,m,d),n.current.lanes=d,fi(n,d,c),ln(n,c),n}function qu(n,i,a,c){var d=i.current,m=en(),w=Rs(d);return a=Ug(a),i.context===null?i.context=a:i.pendingContext=a,i=zr(m,w),i.payload={element:n},c=c===void 0?null:c,c!==null&&(i.callback=c),n=Is(d,i,w),n!==null&&($n(n,d,w,m),wu(n,d,w)),w}function $u(n){return n=n.current,n.child?(n.child.tag===5,n.child.stateNode):null}function zg(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function xd(n,i){zg(n,i),(n=n.alternate)&&zg(n,i)}function ME(){return null}var qg=typeof reportError=="function"?reportError:function(n){console.error(n)};function Nd(n){this._internalRoot=n}Wu.prototype.render=Nd.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(t(409));qu(n,i,null,null)},Wu.prototype.unmount=Nd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;Ci(function(){qu(null,n,null,null)}),i[jr]=null}};function Wu(n){this._internalRoot=n}Wu.prototype.unstable_scheduleHydration=function(n){if(n){var i=va();n={blockedOn:null,target:n,priority:i};for(var a=0;a<fn.length&&i!==0&&i<fn[a].priority;a++);fn.splice(a,0,n),a===0&&Zi(n)}};function bd(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Hu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function $g(){}function jE(n,i,a,c,d){if(d){if(typeof c=="function"){var m=c;c=function(){var B=$u(w);m.call(B)}}var w=Bg(i,c,n,0,null,!1,!1,"",$g);return n._reactRootContainer=w,n[jr]=w.current,Na(n.nodeType===8?n.parentNode:n),Ci(),w}for(;d=n.lastChild;)n.removeChild(d);if(typeof c=="function"){var N=c;c=function(){var B=$u(V);N.call(B)}}var V=kd(n,0,!1,null,null,!1,!1,"",$g);return n._reactRootContainer=V,n[jr]=V.current,Na(n.nodeType===8?n.parentNode:n),Ci(function(){qu(i,V,a,c)}),V}function Gu(n,i,a,c,d){var m=a._reactRootContainer;if(m){var w=m;if(typeof d=="function"){var N=d;d=function(){var V=$u(w);N.call(V)}}qu(i,w,n,d)}else w=jE(a,i,n,d,c);return $u(w)}ya=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var a=Qe(i.pendingLanes);a!==0&&(ga(i,a|1),ln(i,nt()),(He&6)===0&&(Ro=nt()+500,Es()))}break;case 13:Ci(function(){var c=Br(n,1);if(c!==null){var d=en();$n(c,n,1,d)}}),xd(n,1)}},Yi=function(n){if(n.tag===13){var i=Br(n,134217728);if(i!==null){var a=en();$n(i,n,134217728,a)}xd(n,134217728)}},_a=function(n){if(n.tag===13){var i=Rs(n),a=Br(n,i);if(a!==null){var c=en();$n(a,n,i,c)}xd(n,i)}},va=function(){return qe},wa=function(n,i){var a=qe;try{return qe=n,i()}finally{qe=a}},Rr=function(n,i,a){switch(i){case"input":if(In(n,a),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var c=a[i];if(c!==n&&c.form===n.form){var d=cu(c);if(!d)throw Error(t(90));we(c),In(c,d)}}}break;case"textarea":Ol(n,a);break;case"select":i=a.value,i!=null&&On(n,!!a.multiple,i,!1)}},Ll=Id,Fl=Ci;var LE={usingClientEntryPoint:!1,Events:[Va,po,cu,as,ls,Id]},Ka={findFiberByHostInstance:_i,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},FE={bundleType:Ka.bundleType,version:Ka.version,rendererPackageName:Ka.rendererPackageName,rendererConfig:Ka.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:H.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Hl(n),n===null?null:n.stateNode},findFiberByHostInstance:Ka.findFiberByHostInstance||ME,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ku=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ku.isDisabled&&Ku.supportsFiber)try{ui=Ku.inject(FE),hn=Ku}catch{}}return un.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LE,un.createPortal=function(n,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bd(i))throw Error(t(200));return OE(n,i,null,a)},un.createRoot=function(n,i){if(!bd(n))throw Error(t(299));var a=!1,c="",d=qg;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onRecoverableError!==void 0&&(d=i.onRecoverableError)),i=kd(n,1,!1,null,null,a,!1,c,d),n[jr]=i.current,Na(n.nodeType===8?n.parentNode:n),new Nd(i)},un.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Hl(i),n=n===null?null:n.stateNode,n},un.flushSync=function(n){return Ci(n)},un.hydrate=function(n,i,a){if(!Hu(i))throw Error(t(200));return Gu(null,n,i,!0,a)},un.hydrateRoot=function(n,i,a){if(!bd(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,m="",w=qg;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),i=Bg(i,null,n,1,a??null,d,!1,m,w),n[jr]=i.current,Na(n),c)for(n=0;n<c.length;n++)a=c[n],d=a._getVersion,d=d(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,d]:i.mutableSourceEagerHydrationData.push(a,d);return new Wu(i)},un.render=function(n,i,a){if(!Hu(i))throw Error(t(200));return Gu(null,n,i,!1,a)},un.unmountComponentAtNode=function(n){if(!Hu(n))throw Error(t(40));return n._reactRootContainer?(Ci(function(){Gu(null,null,n,!1,function(){n._reactRootContainer=null,n[jr]=null})}),!0):!1},un.unstable_batchedUpdates=Id,un.unstable_renderSubtreeIntoContainer=function(n,i,a,c){if(!Hu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Gu(n,i,a,!1,c)},un.version="18.3.1-next-f1338f8080-20240426",un}var Jg;function $_(){if(Jg)return Od.exports;Jg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Od.exports=KE(),Od.exports}var Zg;function QE(){if(Zg)return Qu;Zg=1;var r=$_();return Qu.createRoot=r.createRoot,Qu.hydrateRoot=r.hydrateRoot,Qu}var XE=QE();const YE=q_(XE);$_();function al(){return al=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},al.apply(this,arguments)}var Ms;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(Ms||(Ms={}));const ey="popstate";function JE(r){r===void 0&&(r={});function e(o,l){let{pathname:h="/",search:f="",hash:p=""}=Ui(o.location.hash.substr(1));return!h.startsWith("/")&&!h.startsWith(".")&&(h="/"+h),Zd("",{pathname:h,search:f,hash:p},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(o,l){let h=o.document.querySelector("base"),f="";if(h&&h.getAttribute("href")){let p=o.location.href,y=p.indexOf("#");f=y===-1?p:p.slice(0,y)}return f+"#"+(typeof l=="string"?l:pc(l))}function s(o,l){jc(o.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(l)+")")}return eT(e,t,s,r)}function vt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function jc(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ZE(){return Math.random().toString(36).substr(2,8)}function ty(r,e){return{usr:r.state,key:r.key,idx:e}}function Zd(r,e,t,s){return t===void 0&&(t=null),al({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?Ui(e):e,{state:t,key:e&&e.key||s||ZE()})}function pc(r){let{pathname:e="/",search:t="",hash:s=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function Ui(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let s=r.indexOf("?");s>=0&&(e.search=r.substr(s),r=r.substr(0,s)),r&&(e.pathname=r)}return e}function eT(r,e,t,s){s===void 0&&(s={});let{window:o=document.defaultView,v5Compat:l=!1}=s,h=o.history,f=Ms.Pop,p=null,y=v();y==null&&(y=0,h.replaceState(al({},h.state,{idx:y}),""));function v(){return(h.state||{idx:null}).idx}function T(){f=Ms.Pop;let D=v(),Z=D==null?null:D-y;y=D,p&&p({action:f,location:z.location,delta:Z})}function C(D,Z){f=Ms.Push;let K=Zd(z.location,D,Z);t&&t(K,D),y=v()+1;let ae=ty(K,y),H=z.createHref(K);try{h.pushState(ae,"",H)}catch(J){if(J instanceof DOMException&&J.name==="DataCloneError")throw J;o.location.assign(H)}l&&p&&p({action:f,location:z.location,delta:1})}function O(D,Z){f=Ms.Replace;let K=Zd(z.location,D,Z);t&&t(K,D),y=v();let ae=ty(K,y),H=z.createHref(K);h.replaceState(ae,"",H),l&&p&&p({action:f,location:z.location,delta:0})}function $(D){let Z=o.location.origin!=="null"?o.location.origin:o.location.href,K=typeof D=="string"?D:pc(D);return K=K.replace(/ $/,"%20"),vt(Z,"No window.location.(origin|href) available to create URL for href: "+K),new URL(K,Z)}let z={get action(){return f},get location(){return r(o,h)},listen(D){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(ey,T),p=D,()=>{o.removeEventListener(ey,T),p=null}},createHref(D){return e(o,D)},createURL:$,encodeLocation(D){let Z=$(D);return{pathname:Z.pathname,search:Z.search,hash:Z.hash}},push:C,replace:O,go(D){return h.go(D)}};return z}var ny;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(ny||(ny={}));function tT(r,e,t){return t===void 0&&(t="/"),nT(r,e,t)}function nT(r,e,t,s){let o=typeof e=="string"?Ui(e):e,l=kf(o.pathname||"/",t);if(l==null)return null;let h=W_(r);rT(h);let f=null;for(let p=0;f==null&&p<h.length;++p){let y=mT(l);f=dT(h[p],y)}return f}function W_(r,e,t,s){e===void 0&&(e=[]),t===void 0&&(t=[]),s===void 0&&(s="");let o=(l,h,f)=>{let p={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};p.relativePath.startsWith("/")&&(vt(p.relativePath.startsWith(s),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(s.length));let y=Fs([s,p.relativePath]),v=t.concat(p);l.children&&l.children.length>0&&(vt(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+y+'".')),W_(l.children,e,v,y)),!(l.path==null&&!l.index)&&e.push({path:y,score:cT(y,l.index),routesMeta:v})};return r.forEach((l,h)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))o(l,h);else for(let p of H_(l.path))o(l,h,p)}),e}function H_(r){let e=r.split("/");if(e.length===0)return[];let[t,...s]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(s.length===0)return o?[l,""]:[l];let h=H_(s.join("/")),f=[];return f.push(...h.map(p=>p===""?l:[l,p].join("/"))),o&&f.push(...h),f.map(p=>r.startsWith("/")&&p===""?"/":p)}function rT(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:hT(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}const sT=/^:[\w-]+$/,iT=3,oT=2,aT=1,lT=10,uT=-2,ry=r=>r==="*";function cT(r,e){let t=r.split("/"),s=t.length;return t.some(ry)&&(s+=uT),e&&(s+=oT),t.filter(o=>!ry(o)).reduce((o,l)=>o+(sT.test(l)?iT:l===""?aT:lT),s)}function hT(r,e){return r.length===e.length&&r.slice(0,-1).every((s,o)=>s===e[o])?r[r.length-1]-e[e.length-1]:0}function dT(r,e,t){let{routesMeta:s}=r,o={},l="/",h=[];for(let f=0;f<s.length;++f){let p=s[f],y=f===s.length-1,v=l==="/"?e:e.slice(l.length)||"/",T=fT({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},v),C=p.route;if(!T)return null;Object.assign(o,T.params),h.push({params:o,pathname:Fs([l,T.pathname]),pathnameBase:wT(Fs([l,T.pathnameBase])),route:C}),T.pathnameBase!=="/"&&(l=Fs([l,T.pathnameBase]))}return h}function fT(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,s]=pT(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let l=o[0],h=l.replace(/(.)\/+$/,"$1"),f=o.slice(1);return{params:s.reduce((y,v,T)=>{let{paramName:C,isOptional:O}=v;if(C==="*"){let z=f[T]||"";h=l.slice(0,l.length-z.length).replace(/(.)\/+$/,"$1")}const $=f[T];return O&&!$?y[C]=void 0:y[C]=($||"").replace(/%2F/g,"/"),y},{}),pathname:l,pathnameBase:h,pattern:r}}function pT(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),jc(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,f,p)=>(s.push({paramName:f,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(s.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function mT(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return jc(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function kf(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=r.charAt(t);return s&&s!=="/"?null:r.slice(t)||"/"}const gT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yT=r=>gT.test(r);function _T(r,e){e===void 0&&(e="/");let{pathname:t,search:s="",hash:o=""}=typeof r=="string"?Ui(r):r,l;if(t)if(yT(t))l=t;else{if(t.includes("//")){let h=t;t=t.replace(/\/\/+/g,"/"),jc(!1,"Pathnames cannot have embedded double slashes - normalizing "+(h+" -> "+t))}t.startsWith("/")?l=sy(t.substring(1),"/"):l=sy(t,e)}else l=e;return{pathname:l,search:ET(s),hash:TT(o)}}function sy(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Ld(r,e,t,s){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function vT(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function xf(r,e){let t=vT(r);return e?t.map((s,o)=>o===t.length-1?s.pathname:s.pathnameBase):t.map(s=>s.pathnameBase)}function Nf(r,e,t,s){s===void 0&&(s=!1);let o;typeof r=="string"?o=Ui(r):(o=al({},r),vt(!o.pathname||!o.pathname.includes("?"),Ld("?","pathname","search",o)),vt(!o.pathname||!o.pathname.includes("#"),Ld("#","pathname","hash",o)),vt(!o.search||!o.search.includes("#"),Ld("#","search","hash",o)));let l=r===""||o.pathname==="",h=l?"/":o.pathname,f;if(h==null)f=t;else{let T=e.length-1;if(!s&&h.startsWith("..")){let C=h.split("/");for(;C[0]==="..";)C.shift(),T-=1;o.pathname=C.join("/")}f=T>=0?e[T]:"/"}let p=_T(o,f),y=h&&h!=="/"&&h.endsWith("/"),v=(l||h===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(y||v)&&(p.pathname+="/"),p}const Fs=r=>r.join("/").replace(/\/\/+/g,"/"),wT=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),ET=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,TT=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function IT(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const G_=["post","put","patch","delete"];new Set(G_);const ST=["get",...G_];new Set(ST);function ll(){return ll=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},ll.apply(this,arguments)}const bf=fe.createContext(null),AT=fe.createContext(null),ei=fe.createContext(null),Lc=fe.createContext(null),Jr=fe.createContext({outlet:null,matches:[],isDataRoute:!1}),K_=fe.createContext(null);function CT(r,e){let{relative:t}=e===void 0?{}:e;Go()||vt(!1);let{basename:s,navigator:o}=fe.useContext(ei),{hash:l,pathname:h,search:f}=X_(r,{relative:t}),p=h;return s!=="/"&&(p=h==="/"?s:Fs([s,h])),o.createHref({pathname:p,search:f,hash:l})}function Go(){return fe.useContext(Lc)!=null}function wl(){return Go()||vt(!1),fe.useContext(Lc).location}function Q_(r){fe.useContext(ei).static||fe.useLayoutEffect(r)}function Fc(){let{isDataRoute:r}=fe.useContext(Jr);return r?UT():RT()}function RT(){Go()||vt(!1);let r=fe.useContext(bf),{basename:e,future:t,navigator:s}=fe.useContext(ei),{matches:o}=fe.useContext(Jr),{pathname:l}=wl(),h=JSON.stringify(xf(o,t.v7_relativeSplatPath)),f=fe.useRef(!1);return Q_(()=>{f.current=!0}),fe.useCallback(function(y,v){if(v===void 0&&(v={}),!f.current)return;if(typeof y=="number"){s.go(y);return}let T=Nf(y,JSON.parse(h),l,v.relative==="path");r==null&&e!=="/"&&(T.pathname=T.pathname==="/"?e:Fs([e,T.pathname])),(v.replace?s.replace:s.push)(T,v.state,v)},[e,s,h,l,r])}function PT(){let{matches:r}=fe.useContext(Jr),e=r[r.length-1];return e?e.params:{}}function X_(r,e){let{relative:t}=e===void 0?{}:e,{future:s}=fe.useContext(ei),{matches:o}=fe.useContext(Jr),{pathname:l}=wl(),h=JSON.stringify(xf(o,s.v7_relativeSplatPath));return fe.useMemo(()=>Nf(r,JSON.parse(h),l,t==="path"),[r,h,l,t])}function kT(r,e){return xT(r,e)}function xT(r,e,t,s){Go()||vt(!1);let{navigator:o}=fe.useContext(ei),{matches:l}=fe.useContext(Jr),h=l[l.length-1],f=h?h.params:{};h&&h.pathname;let p=h?h.pathnameBase:"/";h&&h.route;let y=wl(),v;if(e){var T;let D=typeof e=="string"?Ui(e):e;p==="/"||(T=D.pathname)!=null&&T.startsWith(p)||vt(!1),v=D}else v=y;let C=v.pathname||"/",O=C;if(p!=="/"){let D=p.replace(/^\//,"").split("/");O="/"+C.replace(/^\//,"").split("/").slice(D.length).join("/")}let $=tT(r,{pathname:O}),z=OT($&&$.map(D=>Object.assign({},D,{params:Object.assign({},f,D.params),pathname:Fs([p,o.encodeLocation?o.encodeLocation(D.pathname).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?p:Fs([p,o.encodeLocation?o.encodeLocation(D.pathnameBase).pathname:D.pathnameBase])})),l,t,s);return e&&z?fe.createElement(Lc.Provider,{value:{location:ll({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:Ms.Pop}},z):z}function NT(){let r=FT(),e=IT(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return fe.createElement(fe.Fragment,null,fe.createElement("h2",null,"Unexpected Application Error!"),fe.createElement("h3",{style:{fontStyle:"italic"}},e),t?fe.createElement("pre",{style:o},t):null,null)}const bT=fe.createElement(NT,null);class DT extends fe.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?fe.createElement(Jr.Provider,{value:this.props.routeContext},fe.createElement(K_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function VT(r){let{routeContext:e,match:t,children:s}=r,o=fe.useContext(bf);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),fe.createElement(Jr.Provider,{value:e},s)}function OT(r,e,t,s){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),s===void 0&&(s=null),r==null){var l;if(!t)return null;if(t.errors)r=t.matches;else if((l=s)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let h=r,f=(o=t)==null?void 0:o.errors;if(f!=null){let v=h.findIndex(T=>T.route.id&&f?.[T.route.id]!==void 0);v>=0||vt(!1),h=h.slice(0,Math.min(h.length,v+1))}let p=!1,y=-1;if(t&&s&&s.v7_partialHydration)for(let v=0;v<h.length;v++){let T=h[v];if((T.route.HydrateFallback||T.route.hydrateFallbackElement)&&(y=v),T.route.id){let{loaderData:C,errors:O}=t,$=T.route.loader&&C[T.route.id]===void 0&&(!O||O[T.route.id]===void 0);if(T.route.lazy||$){p=!0,y>=0?h=h.slice(0,y+1):h=[h[0]];break}}}return h.reduceRight((v,T,C)=>{let O,$=!1,z=null,D=null;t&&(O=f&&T.route.id?f[T.route.id]:void 0,z=T.route.errorElement||bT,p&&(y<0&&C===0?(BT("route-fallback"),$=!0,D=null):y===C&&($=!0,D=T.route.hydrateFallbackElement||null)));let Z=e.concat(h.slice(0,C+1)),K=()=>{let ae;return O?ae=z:$?ae=D:T.route.Component?ae=fe.createElement(T.route.Component,null):T.route.element?ae=T.route.element:ae=v,fe.createElement(VT,{match:T,routeContext:{outlet:v,matches:Z,isDataRoute:t!=null},children:ae})};return t&&(T.route.ErrorBoundary||T.route.errorElement||C===0)?fe.createElement(DT,{location:t.location,revalidation:t.revalidation,component:z,error:O,children:K(),routeContext:{outlet:null,matches:Z,isDataRoute:!0}}):K()},null)}var Y_=(function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r})(Y_||{}),J_=(function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r})(J_||{});function MT(r){let e=fe.useContext(bf);return e||vt(!1),e}function jT(r){let e=fe.useContext(AT);return e||vt(!1),e}function LT(r){let e=fe.useContext(Jr);return e||vt(!1),e}function Z_(r){let e=LT(),t=e.matches[e.matches.length-1];return t.route.id||vt(!1),t.route.id}function FT(){var r;let e=fe.useContext(K_),t=jT(),s=Z_();return e!==void 0?e:(r=t.errors)==null?void 0:r[s]}function UT(){let{router:r}=MT(Y_.UseNavigateStable),e=Z_(J_.UseNavigateStable),t=fe.useRef(!1);return Q_(()=>{t.current=!0}),fe.useCallback(function(o,l){l===void 0&&(l={}),t.current&&(typeof o=="number"?r.navigate(o):r.navigate(o,ll({fromRouteId:e},l)))},[r,e])}const iy={};function BT(r,e,t){iy[r]||(iy[r]=!0)}function zT(r,e){r?.v7_startTransition,r?.v7_relativeSplatPath}function ef(r){let{to:e,replace:t,state:s,relative:o}=r;Go()||vt(!1);let{future:l,static:h}=fe.useContext(ei),{matches:f}=fe.useContext(Jr),{pathname:p}=wl(),y=Fc(),v=Nf(e,xf(f,l.v7_relativeSplatPath),p,o==="path"),T=JSON.stringify(v);return fe.useEffect(()=>y(JSON.parse(T),{replace:t,state:s,relative:o}),[y,T,o,t,s]),null}function Wn(r){vt(!1)}function qT(r){let{basename:e="/",children:t=null,location:s,navigationType:o=Ms.Pop,navigator:l,static:h=!1,future:f}=r;Go()&&vt(!1);let p=e.replace(/^\/*/,"/"),y=fe.useMemo(()=>({basename:p,navigator:l,static:h,future:ll({v7_relativeSplatPath:!1},f)}),[p,f,l,h]);typeof s=="string"&&(s=Ui(s));let{pathname:v="/",search:T="",hash:C="",state:O=null,key:$="default"}=s,z=fe.useMemo(()=>{let D=kf(v,p);return D==null?null:{location:{pathname:D,search:T,hash:C,state:O,key:$},navigationType:o}},[p,v,T,C,O,$,o]);return z==null?null:fe.createElement(ei.Provider,{value:y},fe.createElement(Lc.Provider,{children:t,value:z}))}function $T(r){let{children:e,location:t}=r;return kT(tf(e),t)}new Promise(()=>{});function tf(r,e){e===void 0&&(e=[]);let t=[];return fe.Children.forEach(r,(s,o)=>{if(!fe.isValidElement(s))return;let l=[...e,o];if(s.type===fe.Fragment){t.push.apply(t,tf(s.props.children,l));return}s.type!==Wn&&vt(!1),!s.props.index||!s.props.children||vt(!1);let h={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(h.children=tf(s.props.children,l)),t.push(h)}),t}function nf(){return nf=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},nf.apply(this,arguments)}function WT(r,e){if(r==null)return{};var t={},s=Object.keys(r),o,l;for(l=0;l<s.length;l++)o=s[l],!(e.indexOf(o)>=0)&&(t[o]=r[o]);return t}function HT(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function GT(r,e){return r.button===0&&(!e||e==="_self")&&!HT(r)}const KT=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],QT="6";try{window.__reactRouterVersion=QT}catch{}const XT="startTransition",oy=WE[XT];function YT(r){let{basename:e,children:t,future:s,window:o}=r,l=fe.useRef();l.current==null&&(l.current=JE({window:o,v5Compat:!0}));let h=l.current,[f,p]=fe.useState({action:h.action,location:h.location}),{v7_startTransition:y}=s||{},v=fe.useCallback(T=>{y&&oy?oy(()=>p(T)):p(T)},[p,y]);return fe.useLayoutEffect(()=>h.listen(v),[h,v]),fe.useEffect(()=>zT(s),[s]),fe.createElement(qT,{basename:e,children:t,location:f.location,navigationType:f.action,navigator:h,future:s})}const JT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ZT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bs=fe.forwardRef(function(e,t){let{onClick:s,relative:o,reloadDocument:l,replace:h,state:f,target:p,to:y,preventScrollReset:v,viewTransition:T}=e,C=WT(e,KT),{basename:O}=fe.useContext(ei),$,z=!1;if(typeof y=="string"&&ZT.test(y)&&($=y,JT))try{let ae=new URL(window.location.href),H=y.startsWith("//")?new URL(ae.protocol+y):new URL(y),J=kf(H.pathname,O);H.origin===ae.origin&&J!=null?y=J+H.search+H.hash:z=!0}catch{}let D=CT(y,{relative:o}),Z=eI(y,{replace:h,state:f,target:p,preventScrollReset:v,relative:o,viewTransition:T});function K(ae){s&&s(ae),ae.defaultPrevented||Z(ae)}return fe.createElement("a",nf({},C,{href:$||D,onClick:z||l?s:K,ref:t,target:p}))});var ay;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(ay||(ay={}));var ly;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(ly||(ly={}));function eI(r,e){let{target:t,replace:s,state:o,preventScrollReset:l,relative:h,viewTransition:f}=e===void 0?{}:e,p=Fc(),y=wl(),v=X_(r,{relative:h});return fe.useCallback(T=>{if(GT(T,t)){T.preventDefault();let C=s!==void 0?s:pc(y)===pc(v);p(r,{replace:C,state:o,preventScrollReset:l,relative:h,viewTransition:f})}},[y,p,v,s,o,t,r,l,h,f])}const tI=()=>{};var uy={};const ev=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},nI=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const o=r[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],h=r[t++],f=r[t++],p=((o&7)<<18|(l&63)<<12|(h&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const l=r[t++],h=r[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},tv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const l=r[o],h=o+1<r.length,f=h?r[o+1]:0,p=o+2<r.length,y=p?r[o+2]:0,v=l>>2,T=(l&3)<<4|f>>4;let C=(f&15)<<2|y>>6,O=y&63;p||(O=64,h||(C=64)),s.push(t[v],t[T],t[C],t[O])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(ev(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):nI(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],f=o<r.length?t[r.charAt(o)]:0;++o;const y=o<r.length?t[r.charAt(o)]:64;++o;const T=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||f==null||y==null||T==null)throw new rI;const C=l<<2|f>>4;if(s.push(C),y!==64){const O=f<<4&240|y>>2;if(s.push(O),T!==64){const $=y<<6&192|T;s.push($)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class rI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const sI=function(r){const e=ev(r);return tv.encodeByteArray(e,!0)},mc=function(r){return sI(r).replace(/\./g,"")},nv=function(r){try{return tv.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function iI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const oI=()=>iI().__FIREBASE_DEFAULTS__,aI=()=>{if(typeof process>"u"||typeof uy>"u")return;const r=uy.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},lI=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&nv(r[1]);return e&&JSON.parse(e)},Uc=()=>{try{return tI()||oI()||aI()||lI()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},rv=r=>Uc()?.emulatorHosts?.[r],uI=r=>{const e=rv(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},sv=()=>Uc()?.config,iv=r=>Uc()?.[`_${r}`];class cI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}function Ko(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ov(r){return(await fetch(r,{credentials:"include"})).ok}function hI(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...r};return[mc(JSON.stringify(t)),mc(JSON.stringify(h)),""].join(".")}const el={};function dI(){const r={prod:[],emulator:[]};for(const e of Object.keys(el))el[e]?r.emulator.push(e):r.prod.push(e);return r}function fI(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let cy=!1;function av(r,e){if(typeof window>"u"||typeof document>"u"||!Ko(window.location.host)||el[r]===e||el[r]||cy)return;el[r]=e;function t(C){return`__firebase__banner__${C}`}const s="__firebase__banner",l=dI().prod.length>0;function h(){const C=document.getElementById(s);C&&C.remove()}function f(C){C.style.display="flex",C.style.background="#7faaf0",C.style.position="fixed",C.style.bottom="5px",C.style.left="5px",C.style.padding=".5em",C.style.borderRadius="5px",C.style.alignItems="center"}function p(C,O){C.setAttribute("width","24"),C.setAttribute("id",O),C.setAttribute("height","24"),C.setAttribute("viewBox","0 0 24 24"),C.setAttribute("fill","none"),C.style.marginLeft="-6px"}function y(){const C=document.createElement("span");return C.style.cursor="pointer",C.style.marginLeft="16px",C.style.fontSize="24px",C.innerHTML=" &times;",C.onclick=()=>{cy=!0,h()},C}function v(C,O){C.setAttribute("id",O),C.innerText="Learn more",C.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",C.setAttribute("target","__blank"),C.style.paddingLeft="5px",C.style.textDecoration="underline"}function T(){const C=fI(s),O=t("text"),$=document.getElementById(O)||document.createElement("span"),z=t("learnmore"),D=document.getElementById(z)||document.createElement("a"),Z=t("preprendIcon"),K=document.getElementById(Z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(C.created){const ae=C.element;f(ae),v(D,z);const H=y();p(K,Z),ae.append(K,$,D,H),document.body.appendChild(ae)}l?($.innerText="Preview backend disconnected.",K.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(K.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,$.innerText="Preview backend running in this workspace."),$.setAttribute("id",O)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}function Jt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function pI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Jt())}function mI(){const r=Uc()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function gI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function yI(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function _I(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function vI(){const r=Jt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function wI(){return!mI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function EI(){try{return typeof indexedDB=="object"}catch{return!1}}function TI(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}const II="FirebaseError";class Zr extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=II,Object.setPrototypeOf(this,Zr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,El.prototype.create)}}class El{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?SI(l,s):"Error",f=`${this.serviceName}: ${h} (${o}).`;return new Zr(o,f,s)}}function SI(r,e){return r.replace(AI,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const AI=/\{\$([^}]+)}/g;function CI(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Oi(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=r[o],h=e[o];if(hy(l)&&hy(h)){if(!Oi(l,h))return!1}else if(l!==h)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function hy(r){return r!==null&&typeof r=="object"}function Tl(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function RI(r,e){const t=new PI(r,e);return t.subscribe.bind(t)}class PI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");kI(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=Fd),o.error===void 0&&(o.error=Fd),o.complete===void 0&&(o.complete=Fd);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kI(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Fd(){}function Rt(r){return r&&r._delegate?r._delegate:r}class Mi{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const xi="[DEFAULT]";class xI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new cI;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(bI(e))try{this.getOrInitializeService({instanceIdentifier:xi})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=xi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=xi){return this.instances.has(e)}getOptions(e=xi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,h]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);s===f&&h.resolve(o)}return o}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:NI(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=xi){return this.component?this.component.multipleInstances?e:xi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function NI(r){return r===xi?void 0:r}function bI(r){return r.instantiationMode==="EAGER"}class DI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new xI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Ue;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ue||(Ue={}));const VI={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},OI=Ue.INFO,MI={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},jI=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=MI[e];if(o)console[o](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Df{constructor(e){this.name=e,this._logLevel=OI,this._logHandler=jI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?VI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const LI=(r,e)=>e.some(t=>r instanceof t);let dy,fy;function FI(){return dy||(dy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function UI(){return fy||(fy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const lv=new WeakMap,rf=new WeakMap,uv=new WeakMap,Ud=new WeakMap,Vf=new WeakMap;function BI(r){const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",h)},l=()=>{t(Us(r.result)),o()},h=()=>{s(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&lv.set(t,r)}).catch(()=>{}),Vf.set(e,r),e}function zI(r){if(rf.has(r))return;const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",h),r.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",h),r.addEventListener("abort",h)});rf.set(r,e)}let sf={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return rf.get(r);if(e==="objectStoreNames")return r.objectStoreNames||uv.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Us(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function qI(r){sf=r(sf)}function $I(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(Bd(this),e,...t);return uv.set(s,e.sort?e.sort():[e]),Us(s)}:UI().includes(r)?function(...e){return r.apply(Bd(this),e),Us(lv.get(this))}:function(...e){return Us(r.apply(Bd(this),e))}}function WI(r){return typeof r=="function"?$I(r):(r instanceof IDBTransaction&&zI(r),LI(r,FI())?new Proxy(r,sf):r)}function Us(r){if(r instanceof IDBRequest)return BI(r);if(Ud.has(r))return Ud.get(r);const e=WI(r);return e!==r&&(Ud.set(r,e),Vf.set(e,r)),e}const Bd=r=>Vf.get(r);function HI(r,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const h=indexedDB.open(r,e),f=Us(h);return s&&h.addEventListener("upgradeneeded",p=>{s(Us(h.result),p.oldVersion,p.newVersion,Us(h.transaction),p)}),t&&h.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),f.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),f}const GI=["get","getKey","getAll","getAllKeys","count"],KI=["put","add","delete","clear"],zd=new Map;function py(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(zd.get(e))return zd.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=KI.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||GI.includes(t)))return;const l=async function(h,...f){const p=this.transaction(h,o?"readwrite":"readonly");let y=p.store;return s&&(y=y.index(f.shift())),(await Promise.all([y[t](...f),o&&p.done]))[0]};return zd.set(e,l),l}qI(r=>({...r,get:(e,t,s)=>py(e,t)||r.get(e,t,s),has:(e,t)=>!!py(e,t)||r.has(e,t)}));class QI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(XI(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function XI(r){return r.getComponent()?.type==="VERSION"}const of="@firebase/app",my="0.14.6";const Kr=new Df("@firebase/app"),YI="@firebase/app-compat",JI="@firebase/analytics-compat",ZI="@firebase/analytics",eS="@firebase/app-check-compat",tS="@firebase/app-check",nS="@firebase/auth",rS="@firebase/auth-compat",sS="@firebase/database",iS="@firebase/data-connect",oS="@firebase/database-compat",aS="@firebase/functions",lS="@firebase/functions-compat",uS="@firebase/installations",cS="@firebase/installations-compat",hS="@firebase/messaging",dS="@firebase/messaging-compat",fS="@firebase/performance",pS="@firebase/performance-compat",mS="@firebase/remote-config",gS="@firebase/remote-config-compat",yS="@firebase/storage",_S="@firebase/storage-compat",vS="@firebase/firestore",wS="@firebase/ai",ES="@firebase/firestore-compat",TS="firebase",IS="12.6.0";const af="[DEFAULT]",SS={[of]:"fire-core",[YI]:"fire-core-compat",[ZI]:"fire-analytics",[JI]:"fire-analytics-compat",[tS]:"fire-app-check",[eS]:"fire-app-check-compat",[nS]:"fire-auth",[rS]:"fire-auth-compat",[sS]:"fire-rtdb",[iS]:"fire-data-connect",[oS]:"fire-rtdb-compat",[aS]:"fire-fn",[lS]:"fire-fn-compat",[uS]:"fire-iid",[cS]:"fire-iid-compat",[hS]:"fire-fcm",[dS]:"fire-fcm-compat",[fS]:"fire-perf",[pS]:"fire-perf-compat",[mS]:"fire-rc",[gS]:"fire-rc-compat",[yS]:"fire-gcs",[_S]:"fire-gcs-compat",[vS]:"fire-fst",[ES]:"fire-fst-compat",[wS]:"fire-vertex","fire-js":"fire-js",[TS]:"fire-js-all"};const gc=new Map,AS=new Map,lf=new Map;function gy(r,e){try{r.container.addComponent(e)}catch(t){Kr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Lo(r){const e=r.name;if(lf.has(e))return Kr.debug(`There were multiple attempts to register component ${e}.`),!1;lf.set(e,r);for(const t of gc.values())gy(t,r);for(const t of AS.values())gy(t,r);return!0}function Of(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Hn(r){return r==null?!1:r.settings!==void 0}const CS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Bs=new El("app","Firebase",CS);class RS{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Mi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Bs.create("app-deleted",{appName:this._name})}}const Qo=IS;function cv(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s={name:af,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw Bs.create("bad-app-name",{appName:String(o)});if(t||(t=sv()),!t)throw Bs.create("no-options");const l=gc.get(o);if(l){if(Oi(t,l.options)&&Oi(s,l.config))return l;throw Bs.create("duplicate-app",{appName:o})}const h=new DI(o);for(const p of lf.values())h.addComponent(p);const f=new RS(t,s,h);return gc.set(o,f),f}function hv(r=af){const e=gc.get(r);if(!e&&r===af&&sv())return cv();if(!e)throw Bs.create("no-app",{appName:r});return e}function zs(r,e,t){let s=SS[r]??r;t&&(s+=`-${t}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const h=[`Unable to register library "${s}" with version "${e}":`];o&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Kr.warn(h.join(" "));return}Lo(new Mi(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const PS="firebase-heartbeat-database",kS=1,ul="firebase-heartbeat-store";let qd=null;function dv(){return qd||(qd=HI(PS,kS,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(ul)}catch(t){console.warn(t)}}}}).catch(r=>{throw Bs.create("idb-open",{originalErrorMessage:r.message})})),qd}async function xS(r){try{const t=(await dv()).transaction(ul),s=await t.objectStore(ul).get(fv(r));return await t.done,s}catch(e){if(e instanceof Zr)Kr.warn(e.message);else{const t=Bs.create("idb-get",{originalErrorMessage:e?.message});Kr.warn(t.message)}}}async function yy(r,e){try{const s=(await dv()).transaction(ul,"readwrite");await s.objectStore(ul).put(e,fv(r)),await s.done}catch(t){if(t instanceof Zr)Kr.warn(t.message);else{const s=Bs.create("idb-set",{originalErrorMessage:t?.message});Kr.warn(s.message)}}}function fv(r){return`${r.name}!${r.options.appId}`}const NS=1024,bS=30;class DS{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new OS(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=_y();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:t}),this._heartbeatsCache.heartbeats.length>bS){const o=MS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Kr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=_y(),{heartbeatsToSend:t,unsentEntries:s}=VS(this._heartbeatsCache.heartbeats),o=mc(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Kr.warn(e),""}}}function _y(){return new Date().toISOString().substring(0,10)}function VS(r,e=NS){const t=[];let s=r.slice();for(const o of r){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),vy(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),vy(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class OS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return EI()?TI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await xS(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return yy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return yy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function vy(r){return mc(JSON.stringify({version:2,heartbeats:r})).length}function MS(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}function jS(r){Lo(new Mi("platform-logger",e=>new QI(e),"PRIVATE")),Lo(new Mi("heartbeat",e=>new DS(e),"PRIVATE")),zs(of,my,r),zs(of,my,"esm2020"),zs("fire-js","")}jS("");function pv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const LS=pv,mv=new El("auth","Firebase",pv());const yc=new Df("@firebase/auth");function FS(r,...e){yc.logLevel<=Ue.WARN&&yc.warn(`Auth (${Qo}): ${r}`,...e)}function sc(r,...e){yc.logLevel<=Ue.ERROR&&yc.error(`Auth (${Qo}): ${r}`,...e)}function Tr(r,...e){throw jf(r,...e)}function Kn(r,...e){return jf(r,...e)}function Mf(r,e,t){const s={...LS(),[e]:t};return new El("auth","Firebase",s).create(e,{appName:r.name})}function Di(r){return Mf(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function US(r,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&Tr(r,"argument-error"),Mf(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function jf(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return mv.create(r,...e)}function ke(r,e,...t){if(!r)throw jf(e,...t)}function Hr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw sc(e),new Error(e)}function Qr(r,e){r||Hr(e)}function uf(){return typeof self<"u"&&self.location?.href||""}function BS(){return wy()==="http:"||wy()==="https:"}function wy(){return typeof self<"u"&&self.location?.protocol||null}function zS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(BS()||yI()||"connection"in navigator)?navigator.onLine:!0}function qS(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class Il{constructor(e,t){this.shortDelay=e,this.longDelay=t,Qr(t>e,"Short delay should be less than long delay!"),this.isMobile=pI()||_I()}get(){return zS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Lf(r,e){Qr(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class gv{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Hr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Hr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Hr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const $S={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const WS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],HS=new Il(3e4,6e4);function Ff(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Xo(r,e,t,s,o={}){return yv(r,o,async()=>{let l={},h={};s&&(e==="GET"?h=s:l={body:JSON.stringify(s)});const f=Tl({key:r.config.apiKey,...h}).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const y={method:e,headers:p,...l};return gI()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&Ko(r.emulatorConfig.host)&&(y.credentials="include"),gv.fetch()(await _v(r,r.config.apiHost,t,f),y)})}async function yv(r,e,t){r._canInitEmulator=!1;const s={...$S,...e};try{const o=new KS(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw Xu(r,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const f=l.ok?h.errorMessage:h.error.message,[p,y]=f.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Xu(r,"credential-already-in-use",h);if(p==="EMAIL_EXISTS")throw Xu(r,"email-already-in-use",h);if(p==="USER_DISABLED")throw Xu(r,"user-disabled",h);const v=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Mf(r,v,y);Tr(r,v)}}catch(o){if(o instanceof Zr)throw o;Tr(r,"network-request-failed",{message:String(o)})}}async function GS(r,e,t,s,o={}){const l=await Xo(r,e,t,s,o);return"mfaPendingCredential"in l&&Tr(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function _v(r,e,t,s){const o=`${e}${t}?${s}`,l=r,h=l.config.emulator?Lf(r.config,o):`${r.config.apiScheme}://${o}`;return WS.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}class KS{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Kn(this.auth,"network-request-failed")),HS.get())})}}function Xu(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=Kn(r,e,s);return o.customData._tokenResponse=t,o}async function QS(r,e){return Xo(r,"POST","/v1/accounts:delete",e)}async function _c(r,e){return Xo(r,"POST","/v1/accounts:lookup",e)}function tl(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function XS(r,e=!1){const t=Rt(r),s=await t.getIdToken(e),o=Uf(s);ke(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l?.sign_in_provider;return{claims:o,token:s,authTime:tl($d(o.auth_time)),issuedAtTime:tl($d(o.iat)),expirationTime:tl($d(o.exp)),signInProvider:h||null,signInSecondFactor:l?.sign_in_second_factor||null}}function $d(r){return Number(r)*1e3}function Uf(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return sc("JWT malformed, contained fewer than 3 sections"),null;try{const o=nv(t);return o?JSON.parse(o):(sc("Failed to decode base64 JWT payload"),null)}catch(o){return sc("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Ey(r){const e=Uf(r);return ke(e,"internal-error"),ke(typeof e.exp<"u","internal-error"),ke(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function cl(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Zr&&YS(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function YS({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class JS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class cf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=tl(this.lastLoginAt),this.creationTime=tl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function vc(r){const e=r.auth,t=await r.getIdToken(),s=await cl(r,_c(e,{idToken:t}));ke(s?.users.length,e,"internal-error");const o=s.users[0];r._notifyReloadListener(o);const l=o.providerUserInfo?.length?vv(o.providerUserInfo):[],h=e1(r.providerData,l),f=r.isAnonymous,p=!(r.email&&o.passwordHash)&&!h?.length,y=f?p:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new cf(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(r,v)}async function ZS(r){const e=Rt(r);await vc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function e1(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function vv(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function t1(r,e){const t=await yv(r,{},async()=>{const s=Tl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,h=await _v(r,o,"/v1/token",`key=${l}`),f=await r._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:f,body:s};return r.emulatorConfig&&Ko(r.emulatorConfig.host)&&(p.credentials="include"),gv.fetch()(h,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function n1(r,e){return Xo(r,"POST","/v2/accounts:revokeToken",Ff(r,e))}class Vo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ke(e.idToken,"internal-error"),ke(typeof e.idToken<"u","internal-error"),ke(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ey(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ke(e.length!==0,"internal-error");const t=Ey(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ke(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:l}=await t1(e,t);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:l}=t,h=new Vo;return s&&(ke(typeof s=="string","internal-error",{appName:e}),h.refreshToken=s),o&&(ke(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(ke(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Vo,this.toJSON())}_performRefresh(){return Hr("not implemented")}}function Ns(r,e){ke(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Gn{constructor({uid:e,auth:t,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new JS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new cf(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await cl(this,this.stsTokenManager.getToken(this.auth,e));return ke(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return XS(this,e)}reload(){return ZS(this)}_assign(e){this!==e&&(ke(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Gn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await vc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Hn(this.auth.app))return Promise.reject(Di(this.auth));const e=await this.getIdToken();return await cl(this,QS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,h=t.photoURL??void 0,f=t.tenantId??void 0,p=t._redirectEventId??void 0,y=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:T,emailVerified:C,isAnonymous:O,providerData:$,stsTokenManager:z}=t;ke(T&&z,e,"internal-error");const D=Vo.fromJSON(this.name,z);ke(typeof T=="string",e,"internal-error"),Ns(s,e.name),Ns(o,e.name),ke(typeof C=="boolean",e,"internal-error"),ke(typeof O=="boolean",e,"internal-error"),Ns(l,e.name),Ns(h,e.name),Ns(f,e.name),Ns(p,e.name),Ns(y,e.name),Ns(v,e.name);const Z=new Gn({uid:T,auth:e,email:o,emailVerified:C,displayName:s,isAnonymous:O,photoURL:h,phoneNumber:l,tenantId:f,stsTokenManager:D,createdAt:y,lastLoginAt:v});return $&&Array.isArray($)&&(Z.providerData=$.map(K=>({...K}))),p&&(Z._redirectEventId=p),Z}static async _fromIdTokenResponse(e,t,s=!1){const o=new Vo;o.updateFromServerResponse(t);const l=new Gn({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await vc(l),l}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];ke(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?vv(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!l?.length,f=new Vo;f.updateFromIdToken(s);const p=new Gn({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:h}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new cf(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!l?.length};return Object.assign(p,y),p}}const Ty=new Map;function Gr(r){Qr(r instanceof Function,"Expected a class definition");let e=Ty.get(r);return e?(Qr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Ty.set(r,e),e)}class wv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}wv.type="NONE";const Iy=wv;function ic(r,e,t){return`firebase:${r}:${e}:${t}`}class Oo{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=ic(this.userKey,o.apiKey,l),this.fullPersistenceKey=ic("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await _c(this.auth,{idToken:e}).catch(()=>{});return t?Gn._fromGetAccountInfoResponse(this.auth,t,e):null}return Gn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Oo(Gr(Iy),e,s);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=o[0]||Gr(Iy);const h=ic(s,e.config.apiKey,e.name);let f=null;for(const y of t)try{const v=await y._get(h);if(v){let T;if(typeof v=="string"){const C=await _c(e,{idToken:v}).catch(()=>{});if(!C)break;T=await Gn._fromGetAccountInfoResponse(e,C,v)}else T=Gn._fromJSON(e,v);y!==l&&(f=T),l=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new Oo(l,e,s):(l=p[0],f&&await l._set(h,f.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(h)}catch{}})),new Oo(l,e,s))}}function Sy(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Sv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ev(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Cv(e))return"Blackberry";if(Rv(e))return"Webos";if(Tv(e))return"Safari";if((e.includes("chrome/")||Iv(e))&&!e.includes("edge/"))return"Chrome";if(Av(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if(s?.length===2)return s[1]}return"Other"}function Ev(r=Jt()){return/firefox\//i.test(r)}function Tv(r=Jt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Iv(r=Jt()){return/crios\//i.test(r)}function Sv(r=Jt()){return/iemobile/i.test(r)}function Av(r=Jt()){return/android/i.test(r)}function Cv(r=Jt()){return/blackberry/i.test(r)}function Rv(r=Jt()){return/webos/i.test(r)}function Bf(r=Jt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function r1(r=Jt()){return Bf(r)&&!!window.navigator?.standalone}function s1(){return vI()&&document.documentMode===10}function Pv(r=Jt()){return Bf(r)||Av(r)||Rv(r)||Cv(r)||/windows phone/i.test(r)||Sv(r)}function kv(r,e=[]){let t;switch(r){case"Browser":t=Sy(Jt());break;case"Worker":t=`${Sy(Jt())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Qo}/${s}`}class i1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((h,f)=>{try{const p=e(l);h(p)}catch(p){f(p)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function o1(r,e={}){return Xo(r,"GET","/v2/passwordPolicy",Ff(r,e))}const a1=6;class l1{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??a1,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class u1{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ay(this),this.idTokenSubscription=new Ay(this),this.beforeStateQueue=new i1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=mv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Gr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Oo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await _c(this,{idToken:e}),s=await Gn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Hn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(h,h))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,h=s?._redirectEventId,f=await this.tryRedirectSignIn(e);(!l||l===h)&&f?.user&&(s=f.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ke(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await vc(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=qS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Hn(this.app))return Promise.reject(Di(this));const t=e?Rt(e):null;return t&&ke(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ke(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Hn(this.app)?Promise.reject(Di(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Hn(this.app)?Promise.reject(Di(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Gr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await o1(this),t=new l1(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new El("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await n1(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Gr(e)||this._popupRedirectResolver;ke(t,this,"argument-error"),this.redirectPersistenceManager=await Oo.create(this,[Gr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(ke(f,this,"internal-error"),f.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,s,o);return()=>{h=!0,p()}}else{const p=e.addObserver(t);return()=>{h=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=kv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(Hn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&FS(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Bc(r){return Rt(r)}class Ay{constructor(e){this.auth=e,this.observer=null,this.addObserver=RI(t=>this.observer=t)}get next(){return ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let zf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function c1(r){zf=r}function h1(r){return zf.loadJS(r)}function d1(){return zf.gapiScript}function f1(r){return`__${r}${Math.floor(Math.random()*1e6)}`}function p1(r,e){const t=Of(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(Oi(l,e??{}))return o;Tr(o,"already-initialized")}return t.initialize({options:e})}function m1(r,e){const t=e?.persistence||[],s=(Array.isArray(t)?t:[t]).map(Gr);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e?.popupRedirectResolver)}function g1(r,e,t){const s=Bc(r);ke(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=xv(e),{host:h,port:f}=y1(e),p=f===null?"":`:${f}`,y={url:`${l}//${h}${p}/`},v=Object.freeze({host:h,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){ke(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),ke(Oi(y,s.config.emulator)&&Oi(v,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=v,s.settings.appVerificationDisabledForTesting=!0,Ko(h)?(ov(`${l}//${h}${p}`),av("Auth",!0)):_1()}function xv(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function y1(r){const e=xv(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:Cy(s.substr(l.length+1))}}else{const[l,h]=s.split(":");return{host:l,port:Cy(h)}}}function Cy(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function _1(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class Nv{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Hr("not implemented")}_getIdTokenResponse(e){return Hr("not implemented")}_linkToIdToken(e,t){return Hr("not implemented")}_getReauthenticationResolver(e){return Hr("not implemented")}}async function Mo(r,e){return GS(r,"POST","/v1/accounts:signInWithIdp",Ff(r,e))}const v1="http://localhost";class ji extends Nv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ji(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Tr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...l}=t;if(!s||!o)return null;const h=new ji(s,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return Mo(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Mo(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Mo(e,t)}buildRequest(){const e={requestUri:v1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Tl(t)}return e}}class qf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Sl extends qf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ds extends Sl{constructor(){super("facebook.com")}static credential(e){return ji._fromParams({providerId:Ds.PROVIDER_ID,signInMethod:Ds.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ds.credentialFromTaggedObject(e)}static credentialFromError(e){return Ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ds.credential(e.oauthAccessToken)}catch{return null}}}Ds.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ds.PROVIDER_ID="facebook.com";class Wr extends Sl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ji._fromParams({providerId:Wr.PROVIDER_ID,signInMethod:Wr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Wr.credentialFromTaggedObject(e)}static credentialFromError(e){return Wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Wr.credential(t,s)}catch{return null}}}Wr.GOOGLE_SIGN_IN_METHOD="google.com";Wr.PROVIDER_ID="google.com";class Vs extends Sl{constructor(){super("github.com")}static credential(e){return ji._fromParams({providerId:Vs.PROVIDER_ID,signInMethod:Vs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vs.credentialFromTaggedObject(e)}static credentialFromError(e){return Vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vs.credential(e.oauthAccessToken)}catch{return null}}}Vs.GITHUB_SIGN_IN_METHOD="github.com";Vs.PROVIDER_ID="github.com";class Os extends Sl{constructor(){super("twitter.com")}static credential(e,t){return ji._fromParams({providerId:Os.PROVIDER_ID,signInMethod:Os.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Os.credentialFromTaggedObject(e)}static credentialFromError(e){return Os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Os.credential(t,s)}catch{return null}}}Os.TWITTER_SIGN_IN_METHOD="twitter.com";Os.PROVIDER_ID="twitter.com";class Fo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const l=await Gn._fromIdTokenResponse(e,s,o),h=Ry(s);return new Fo({user:l,providerId:h,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=Ry(s);return new Fo({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function Ry(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}class wc extends Zr{constructor(e,t,s,o){super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,wc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new wc(e,t,s,o)}}function bv(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?wc._fromErrorAndOperation(r,l,e,s):l})}async function w1(r,e,t=!1){const s=await cl(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Fo._forOperation(r,"link",s)}async function E1(r,e,t=!1){const{auth:s}=r;if(Hn(s.app))return Promise.reject(Di(s));const o="reauthenticate";try{const l=await cl(r,bv(s,o,e,r),t);ke(l.idToken,s,"internal-error");const h=Uf(l.idToken);ke(h,s,"internal-error");const{sub:f}=h;return ke(r.uid===f,s,"user-mismatch"),Fo._forOperation(r,o,l)}catch(l){throw l?.code==="auth/user-not-found"&&Tr(s,"user-mismatch"),l}}async function T1(r,e,t=!1){if(Hn(r.app))return Promise.reject(Di(r));const s="signIn",o=await bv(r,s,e),l=await Fo._fromIdTokenResponse(r,s,o);return t||await r._updateCurrentUser(l.user),l}function I1(r,e,t,s){return Rt(r).onIdTokenChanged(e,t,s)}function S1(r,e,t){return Rt(r).beforeAuthStateChanged(e,t)}function A1(r,e,t,s){return Rt(r).onAuthStateChanged(e,t,s)}function C1(r){return Rt(r).signOut()}const Ec="__sak";class Dv{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ec,"1"),this.storage.removeItem(Ec),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const R1=1e3,P1=10;class Vv extends Dv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Pv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,f,p)=>{this.notifyListeners(h,p)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(s);!t&&this.localCache[s]===h||this.notifyListeners(s,h)},l=this.storage.getItem(s);s1()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,P1):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},R1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Vv.type="LOCAL";const k1=Vv;class Ov extends Dv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Ov.type="SESSION";const Mv=Ov;function x1(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class zc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new zc(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!h?.size)return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const f=Array.from(h).map(async y=>y(t.origin,l)),p=await x1(f);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}zc.receivers=[];function $f(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}class N1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((f,p)=>{const y=$f("",20);o.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},s);h={messageChannel:o,onMessage(T){const C=T;if(C.data.eventId===y)switch(C.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(C.data.response);break;default:clearTimeout(v),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}function gr(){return window}function b1(r){gr().location.href=r}function jv(){return typeof gr().WorkerGlobalScope<"u"&&typeof gr().importScripts=="function"}async function D1(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function V1(){return navigator?.serviceWorker?.controller||null}function O1(){return jv()?self:null}const Lv="firebaseLocalStorageDb",M1=1,Tc="firebaseLocalStorage",Fv="fbase_key";class Al{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function qc(r,e){return r.transaction([Tc],e?"readwrite":"readonly").objectStore(Tc)}function j1(){const r=indexedDB.deleteDatabase(Lv);return new Al(r).toPromise()}function hf(){const r=indexedDB.open(Lv,M1);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Tc,{keyPath:Fv})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Tc)?e(s):(s.close(),await j1(),e(await hf()))})})}async function Py(r,e,t){const s=qc(r,!0).put({[Fv]:e,value:t});return new Al(s).toPromise()}async function L1(r,e){const t=qc(r,!1).get(e),s=await new Al(t).toPromise();return s===void 0?null:s.value}function ky(r,e){const t=qc(r,!0).delete(e);return new Al(t).toPromise()}const F1=800,U1=3;class Uv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await hf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>U1)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return jv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=zc._getInstance(O1()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await D1(),!this.activeServiceWorker)return;this.sender=new N1(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||V1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await hf();return await Py(e,Ec,"1"),await ky(e,Ec),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>Py(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>L1(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>ky(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=qc(o,!1).getAll();return new Al(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),F1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Uv.type="LOCAL";const B1=Uv;new Il(3e4,6e4);function Bv(r,e){return e?Gr(e):(ke(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class Wf extends Nv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Mo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Mo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Mo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function z1(r){return T1(r.auth,new Wf(r),r.bypassAuthState)}function q1(r){const{auth:e,user:t}=r;return ke(t,e,"internal-error"),E1(t,new Wf(r),r.bypassAuthState)}async function $1(r){const{auth:e,user:t}=r;return ke(t,e,"internal-error"),w1(t,new Wf(r),r.bypassAuthState)}class zv{constructor(e,t,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:l,error:h,type:f}=e;if(h){this.reject(h);return}const p={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return z1;case"linkViaPopup":case"linkViaRedirect":return $1;case"reauthViaPopup":case"reauthViaRedirect":return q1;default:Tr(this.auth,"internal-error")}}resolve(e){Qr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Qr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const W1=new Il(2e3,1e4);async function H1(r,e,t){if(Hn(r.app))return Promise.reject(Kn(r,"operation-not-supported-in-this-environment"));const s=Bc(r);US(r,e,qf);const o=Bv(s,t);return new Ni(s,"signInViaPopup",e,o).executeNotNull()}class Ni extends zv{constructor(e,t,s,o,l){super(e,t,o,l),this.provider=s,this.authWindow=null,this.pollId=null,Ni.currentPopupAction&&Ni.currentPopupAction.cancel(),Ni.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ke(e,this.auth,"internal-error"),e}async onExecution(){Qr(this.filter.length===1,"Popup operations only handle one event");const e=$f();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Kn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Kn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ni.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Kn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,W1.get())};e()}}Ni.currentPopupAction=null;const G1="pendingRedirect",oc=new Map;class K1 extends zv{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=oc.get(this.auth._key());if(!e){try{const s=await Q1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}oc.set(this.auth._key(),e)}return this.bypassAuthState||oc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Q1(r,e){const t=J1(e),s=Y1(r);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function X1(r,e){oc.set(r._key(),e)}function Y1(r){return Gr(r._redirectPersistence)}function J1(r){return ic(G1,r.config.apiKey,r.name)}async function Z1(r,e,t=!1){if(Hn(r.app))return Promise.reject(Di(r));const s=Bc(r),o=Bv(s,e),h=await new K1(s,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await s._persistUserIfCurrent(h.user),await s._setRedirectUser(null,e)),h}const eA=600*1e3;class tA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!nA(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!qv(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Kn(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=eA&&this.cachedEventUids.clear(),this.cachedEventUids.has(xy(e))}saveEventToCache(e){this.cachedEventUids.add(xy(e)),this.lastProcessedEventTime=Date.now()}}function xy(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function qv({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function nA(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qv(r);default:return!1}}async function rA(r,e={}){return Xo(r,"GET","/v1/projects",e)}const sA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,iA=/^https?/;async function oA(r){if(r.config.emulator)return;const{authorizedDomains:e}=await rA(r);for(const t of e)try{if(aA(t))return}catch{}Tr(r,"unauthorized-domain")}function aA(r){const e=uf(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===s}if(!iA.test(t))return!1;if(sA.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const lA=new Il(3e4,6e4);function Ny(){const r=gr().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function uA(r){return new Promise((e,t)=>{function s(){Ny(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ny(),t(Kn(r,"network-request-failed"))},timeout:lA.get()})}if(gr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(gr().gapi?.load)s();else{const o=f1("iframefcb");return gr()[o]=()=>{gapi.load?s():t(Kn(r,"network-request-failed"))},h1(`${d1()}?onload=${o}`).catch(l=>t(l))}}).catch(e=>{throw ac=null,e})}let ac=null;function cA(r){return ac=ac||uA(r),ac}const hA=new Il(5e3,15e3),dA="__/auth/iframe",fA="emulator/auth/iframe",pA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},mA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gA(r){const e=r.config;ke(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Lf(e,fA):`https://${r.config.authDomain}/${dA}`,s={apiKey:e.apiKey,appName:r.name,v:Qo},o=mA.get(r.config.apiHost);o&&(s.eid=o);const l=r._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${Tl(s).slice(1)}`}async function yA(r){const e=await cA(r),t=gr().gapi;return ke(t,r,"internal-error"),e.open({where:document.body,url:gA(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pA,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const h=Kn(r,"network-request-failed"),f=gr().setTimeout(()=>{l(h)},hA.get());function p(){gr().clearTimeout(f),o(s)}s.ping(p).then(p,()=>{l(h)})}))}const _A={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},vA=500,wA=600,EA="_blank",TA="http://localhost";class by{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function IA(r,e,t,s=vA,o=wA){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const p={..._A,width:s.toString(),height:o.toString(),top:l,left:h},y=Jt().toLowerCase();t&&(f=Iv(y)?EA:t),Ev(y)&&(e=e||TA,p.scrollbars="yes");const v=Object.entries(p).reduce((C,[O,$])=>`${C}${O}=${$},`,"");if(r1(y)&&f!=="_self")return SA(e||"",f),new by(null);const T=window.open(e||"",f,v);ke(T,r,"popup-blocked");try{T.focus()}catch{}return new by(T)}function SA(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}const AA="__/auth/handler",CA="emulator/auth/handler",RA=encodeURIComponent("fac");async function Dy(r,e,t,s,o,l){ke(r.config.authDomain,r,"auth-domain-config-required"),ke(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:Qo,eventId:o};if(e instanceof qf){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",CI(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,T]of Object.entries({}))h[v]=T}if(e instanceof Sl){const v=e.getScopes().filter(T=>T!=="");v.length>0&&(h.scopes=v.join(","))}r.tenantId&&(h.tid=r.tenantId);const f=h;for(const v of Object.keys(f))f[v]===void 0&&delete f[v];const p=await r._getAppCheckToken(),y=p?`#${RA}=${encodeURIComponent(p)}`:"";return`${PA(r)}?${Tl(f).slice(1)}${y}`}function PA({config:r}){return r.emulator?Lf(r,CA):`https://${r.authDomain}/${AA}`}const Wd="webStorageSupport";class kA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Mv,this._completeRedirectFn=Z1,this._overrideRedirectResult=X1}async _openPopup(e,t,s,o){Qr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await Dy(e,t,s,uf(),o);return IA(e,l,$f())}async _openRedirect(e,t,s,o){await this._originValidation(e);const l=await Dy(e,t,s,uf(),o);return b1(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Qr(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await yA(e),s=new tA(e);return t.register("authEvent",o=>(ke(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Wd,{type:Wd},o=>{const l=o?.[0]?.[Wd];l!==void 0&&t(!!l),Tr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=oA(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Pv()||Tv()||Bf()}}const xA=kA;var Vy="@firebase/auth",Oy="1.12.0";class NA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function bA(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function DA(r){Lo(new Mi("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:f}=s.options;ke(h&&!h.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:h,authDomain:f,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kv(r)},y=new u1(s,o,l,p);return m1(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Lo(new Mi("auth-internal",e=>{const t=Bc(e.getProvider("auth").getImmediate());return(s=>new NA(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),zs(Vy,Oy,bA(r)),zs(Vy,Oy,"esm2020")}const VA=300,OA=iv("authIdTokenMaxAge")||VA;let My=null;const MA=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>OA)return;const o=t?.token;My!==o&&(My=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function jA(r=hv()){const e=Of(r,"auth");if(e.isInitialized())return e.getImmediate();const t=p1(r,{popupRedirectResolver:xA,persistence:[B1,k1,Mv]}),s=iv("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const h=MA(l.toString());S1(t,h,()=>h(t.currentUser)),I1(t,f=>h(f))}}const o=rv("auth");return o&&g1(t,`http://${o}`),t}function LA(){return document.getElementsByTagName("head")?.[0]??document}c1({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const l=Kn("internal-error");l.customData=o,t(l)},s.type="text/javascript",s.charset="UTF-8",LA().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});DA("Browser");var jy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var qs,$v;(function(){var r;function e(S,A){function P(){}P.prototype=A.prototype,S.F=A.prototype,S.prototype=new P,S.prototype.constructor=S,S.D=function(x,b,k){for(var R=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)R[ie-2]=arguments[ie];return A.prototype[b].apply(x,R)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(S,A,P){P||(P=0);const x=Array(16);if(typeof A=="string")for(var b=0;b<16;++b)x[b]=A.charCodeAt(P++)|A.charCodeAt(P++)<<8|A.charCodeAt(P++)<<16|A.charCodeAt(P++)<<24;else for(b=0;b<16;++b)x[b]=A[P++]|A[P++]<<8|A[P++]<<16|A[P++]<<24;A=S.g[0],P=S.g[1],b=S.g[2];let k=S.g[3],R;R=A+(k^P&(b^k))+x[0]+3614090360&4294967295,A=P+(R<<7&4294967295|R>>>25),R=k+(b^A&(P^b))+x[1]+3905402710&4294967295,k=A+(R<<12&4294967295|R>>>20),R=b+(P^k&(A^P))+x[2]+606105819&4294967295,b=k+(R<<17&4294967295|R>>>15),R=P+(A^b&(k^A))+x[3]+3250441966&4294967295,P=b+(R<<22&4294967295|R>>>10),R=A+(k^P&(b^k))+x[4]+4118548399&4294967295,A=P+(R<<7&4294967295|R>>>25),R=k+(b^A&(P^b))+x[5]+1200080426&4294967295,k=A+(R<<12&4294967295|R>>>20),R=b+(P^k&(A^P))+x[6]+2821735955&4294967295,b=k+(R<<17&4294967295|R>>>15),R=P+(A^b&(k^A))+x[7]+4249261313&4294967295,P=b+(R<<22&4294967295|R>>>10),R=A+(k^P&(b^k))+x[8]+1770035416&4294967295,A=P+(R<<7&4294967295|R>>>25),R=k+(b^A&(P^b))+x[9]+2336552879&4294967295,k=A+(R<<12&4294967295|R>>>20),R=b+(P^k&(A^P))+x[10]+4294925233&4294967295,b=k+(R<<17&4294967295|R>>>15),R=P+(A^b&(k^A))+x[11]+2304563134&4294967295,P=b+(R<<22&4294967295|R>>>10),R=A+(k^P&(b^k))+x[12]+1804603682&4294967295,A=P+(R<<7&4294967295|R>>>25),R=k+(b^A&(P^b))+x[13]+4254626195&4294967295,k=A+(R<<12&4294967295|R>>>20),R=b+(P^k&(A^P))+x[14]+2792965006&4294967295,b=k+(R<<17&4294967295|R>>>15),R=P+(A^b&(k^A))+x[15]+1236535329&4294967295,P=b+(R<<22&4294967295|R>>>10),R=A+(b^k&(P^b))+x[1]+4129170786&4294967295,A=P+(R<<5&4294967295|R>>>27),R=k+(P^b&(A^P))+x[6]+3225465664&4294967295,k=A+(R<<9&4294967295|R>>>23),R=b+(A^P&(k^A))+x[11]+643717713&4294967295,b=k+(R<<14&4294967295|R>>>18),R=P+(k^A&(b^k))+x[0]+3921069994&4294967295,P=b+(R<<20&4294967295|R>>>12),R=A+(b^k&(P^b))+x[5]+3593408605&4294967295,A=P+(R<<5&4294967295|R>>>27),R=k+(P^b&(A^P))+x[10]+38016083&4294967295,k=A+(R<<9&4294967295|R>>>23),R=b+(A^P&(k^A))+x[15]+3634488961&4294967295,b=k+(R<<14&4294967295|R>>>18),R=P+(k^A&(b^k))+x[4]+3889429448&4294967295,P=b+(R<<20&4294967295|R>>>12),R=A+(b^k&(P^b))+x[9]+568446438&4294967295,A=P+(R<<5&4294967295|R>>>27),R=k+(P^b&(A^P))+x[14]+3275163606&4294967295,k=A+(R<<9&4294967295|R>>>23),R=b+(A^P&(k^A))+x[3]+4107603335&4294967295,b=k+(R<<14&4294967295|R>>>18),R=P+(k^A&(b^k))+x[8]+1163531501&4294967295,P=b+(R<<20&4294967295|R>>>12),R=A+(b^k&(P^b))+x[13]+2850285829&4294967295,A=P+(R<<5&4294967295|R>>>27),R=k+(P^b&(A^P))+x[2]+4243563512&4294967295,k=A+(R<<9&4294967295|R>>>23),R=b+(A^P&(k^A))+x[7]+1735328473&4294967295,b=k+(R<<14&4294967295|R>>>18),R=P+(k^A&(b^k))+x[12]+2368359562&4294967295,P=b+(R<<20&4294967295|R>>>12),R=A+(P^b^k)+x[5]+4294588738&4294967295,A=P+(R<<4&4294967295|R>>>28),R=k+(A^P^b)+x[8]+2272392833&4294967295,k=A+(R<<11&4294967295|R>>>21),R=b+(k^A^P)+x[11]+1839030562&4294967295,b=k+(R<<16&4294967295|R>>>16),R=P+(b^k^A)+x[14]+4259657740&4294967295,P=b+(R<<23&4294967295|R>>>9),R=A+(P^b^k)+x[1]+2763975236&4294967295,A=P+(R<<4&4294967295|R>>>28),R=k+(A^P^b)+x[4]+1272893353&4294967295,k=A+(R<<11&4294967295|R>>>21),R=b+(k^A^P)+x[7]+4139469664&4294967295,b=k+(R<<16&4294967295|R>>>16),R=P+(b^k^A)+x[10]+3200236656&4294967295,P=b+(R<<23&4294967295|R>>>9),R=A+(P^b^k)+x[13]+681279174&4294967295,A=P+(R<<4&4294967295|R>>>28),R=k+(A^P^b)+x[0]+3936430074&4294967295,k=A+(R<<11&4294967295|R>>>21),R=b+(k^A^P)+x[3]+3572445317&4294967295,b=k+(R<<16&4294967295|R>>>16),R=P+(b^k^A)+x[6]+76029189&4294967295,P=b+(R<<23&4294967295|R>>>9),R=A+(P^b^k)+x[9]+3654602809&4294967295,A=P+(R<<4&4294967295|R>>>28),R=k+(A^P^b)+x[12]+3873151461&4294967295,k=A+(R<<11&4294967295|R>>>21),R=b+(k^A^P)+x[15]+530742520&4294967295,b=k+(R<<16&4294967295|R>>>16),R=P+(b^k^A)+x[2]+3299628645&4294967295,P=b+(R<<23&4294967295|R>>>9),R=A+(b^(P|~k))+x[0]+4096336452&4294967295,A=P+(R<<6&4294967295|R>>>26),R=k+(P^(A|~b))+x[7]+1126891415&4294967295,k=A+(R<<10&4294967295|R>>>22),R=b+(A^(k|~P))+x[14]+2878612391&4294967295,b=k+(R<<15&4294967295|R>>>17),R=P+(k^(b|~A))+x[5]+4237533241&4294967295,P=b+(R<<21&4294967295|R>>>11),R=A+(b^(P|~k))+x[12]+1700485571&4294967295,A=P+(R<<6&4294967295|R>>>26),R=k+(P^(A|~b))+x[3]+2399980690&4294967295,k=A+(R<<10&4294967295|R>>>22),R=b+(A^(k|~P))+x[10]+4293915773&4294967295,b=k+(R<<15&4294967295|R>>>17),R=P+(k^(b|~A))+x[1]+2240044497&4294967295,P=b+(R<<21&4294967295|R>>>11),R=A+(b^(P|~k))+x[8]+1873313359&4294967295,A=P+(R<<6&4294967295|R>>>26),R=k+(P^(A|~b))+x[15]+4264355552&4294967295,k=A+(R<<10&4294967295|R>>>22),R=b+(A^(k|~P))+x[6]+2734768916&4294967295,b=k+(R<<15&4294967295|R>>>17),R=P+(k^(b|~A))+x[13]+1309151649&4294967295,P=b+(R<<21&4294967295|R>>>11),R=A+(b^(P|~k))+x[4]+4149444226&4294967295,A=P+(R<<6&4294967295|R>>>26),R=k+(P^(A|~b))+x[11]+3174756917&4294967295,k=A+(R<<10&4294967295|R>>>22),R=b+(A^(k|~P))+x[2]+718787259&4294967295,b=k+(R<<15&4294967295|R>>>17),R=P+(k^(b|~A))+x[9]+3951481745&4294967295,S.g[0]=S.g[0]+A&4294967295,S.g[1]=S.g[1]+(b+(R<<21&4294967295|R>>>11))&4294967295,S.g[2]=S.g[2]+b&4294967295,S.g[3]=S.g[3]+k&4294967295}s.prototype.v=function(S,A){A===void 0&&(A=S.length);const P=A-this.blockSize,x=this.C;let b=this.h,k=0;for(;k<A;){if(b==0)for(;k<=P;)o(this,S,k),k+=this.blockSize;if(typeof S=="string"){for(;k<A;)if(x[b++]=S.charCodeAt(k++),b==this.blockSize){o(this,x),b=0;break}}else for(;k<A;)if(x[b++]=S[k++],b==this.blockSize){o(this,x),b=0;break}}this.h=b,this.o+=A},s.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var A=1;A<S.length-8;++A)S[A]=0;A=this.o*8;for(var P=S.length-8;P<S.length;++P)S[P]=A&255,A/=256;for(this.v(S),S=Array(16),A=0,P=0;P<4;++P)for(let x=0;x<32;x+=8)S[A++]=this.g[P]>>>x&255;return S};function l(S,A){var P=f;return Object.prototype.hasOwnProperty.call(P,S)?P[S]:P[S]=A(S)}function h(S,A){this.h=A;const P=[];let x=!0;for(let b=S.length-1;b>=0;b--){const k=S[b]|0;x&&k==A||(P[b]=k,x=!1)}this.g=P}var f={};function p(S){return-128<=S&&S<128?l(S,function(A){return new h([A|0],A<0?-1:0)}):new h([S|0],S<0?-1:0)}function y(S){if(isNaN(S)||!isFinite(S))return T;if(S<0)return D(y(-S));const A=[];let P=1;for(let x=0;S>=P;x++)A[x]=S/P|0,P*=4294967296;return new h(A,0)}function v(S,A){if(S.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(S.charAt(0)=="-")return D(v(S.substring(1),A));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const P=y(Math.pow(A,8));let x=T;for(let k=0;k<S.length;k+=8){var b=Math.min(8,S.length-k);const R=parseInt(S.substring(k,k+b),A);b<8?(b=y(Math.pow(A,b)),x=x.j(b).add(y(R))):(x=x.j(P),x=x.add(y(R)))}return x}var T=p(0),C=p(1),O=p(16777216);r=h.prototype,r.m=function(){if(z(this))return-D(this).m();let S=0,A=1;for(let P=0;P<this.g.length;P++){const x=this.i(P);S+=(x>=0?x:4294967296+x)*A,A*=4294967296}return S},r.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if($(this))return"0";if(z(this))return"-"+D(this).toString(S);const A=y(Math.pow(S,6));var P=this;let x="";for(;;){const b=H(P,A).g;P=Z(P,b.j(A));let k=((P.g.length>0?P.g[0]:P.h)>>>0).toString(S);if(P=b,$(P))return k+x;for(;k.length<6;)k="0"+k;x=k+x}},r.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function $(S){if(S.h!=0)return!1;for(let A=0;A<S.g.length;A++)if(S.g[A]!=0)return!1;return!0}function z(S){return S.h==-1}r.l=function(S){return S=Z(this,S),z(S)?-1:$(S)?0:1};function D(S){const A=S.g.length,P=[];for(let x=0;x<A;x++)P[x]=~S.g[x];return new h(P,~S.h).add(C)}r.abs=function(){return z(this)?D(this):this},r.add=function(S){const A=Math.max(this.g.length,S.g.length),P=[];let x=0;for(let b=0;b<=A;b++){let k=x+(this.i(b)&65535)+(S.i(b)&65535),R=(k>>>16)+(this.i(b)>>>16)+(S.i(b)>>>16);x=R>>>16,k&=65535,R&=65535,P[b]=R<<16|k}return new h(P,P[P.length-1]&-2147483648?-1:0)};function Z(S,A){return S.add(D(A))}r.j=function(S){if($(this)||$(S))return T;if(z(this))return z(S)?D(this).j(D(S)):D(D(this).j(S));if(z(S))return D(this.j(D(S)));if(this.l(O)<0&&S.l(O)<0)return y(this.m()*S.m());const A=this.g.length+S.g.length,P=[];for(var x=0;x<2*A;x++)P[x]=0;for(x=0;x<this.g.length;x++)for(let b=0;b<S.g.length;b++){const k=this.i(x)>>>16,R=this.i(x)&65535,ie=S.i(b)>>>16,_e=S.i(b)&65535;P[2*x+2*b]+=R*_e,K(P,2*x+2*b),P[2*x+2*b+1]+=k*_e,K(P,2*x+2*b+1),P[2*x+2*b+1]+=R*ie,K(P,2*x+2*b+1),P[2*x+2*b+2]+=k*ie,K(P,2*x+2*b+2)}for(S=0;S<A;S++)P[S]=P[2*S+1]<<16|P[2*S];for(S=A;S<2*A;S++)P[S]=0;return new h(P,0)};function K(S,A){for(;(S[A]&65535)!=S[A];)S[A+1]+=S[A]>>>16,S[A]&=65535,A++}function ae(S,A){this.g=S,this.h=A}function H(S,A){if($(A))throw Error("division by zero");if($(S))return new ae(T,T);if(z(S))return A=H(D(S),A),new ae(D(A.g),D(A.h));if(z(A))return A=H(S,D(A)),new ae(D(A.g),A.h);if(S.g.length>30){if(z(S)||z(A))throw Error("slowDivide_ only works with positive integers.");for(var P=C,x=A;x.l(S)<=0;)P=J(P),x=J(x);var b=re(P,1),k=re(x,1);for(x=re(x,2),P=re(P,2);!$(x);){var R=k.add(x);R.l(S)<=0&&(b=b.add(P),k=R),x=re(x,1),P=re(P,1)}return A=Z(S,b.j(A)),new ae(b,A)}for(b=T;S.l(A)>=0;){for(P=Math.max(1,Math.floor(S.m()/A.m())),x=Math.ceil(Math.log(P)/Math.LN2),x=x<=48?1:Math.pow(2,x-48),k=y(P),R=k.j(A);z(R)||R.l(S)>0;)P-=x,k=y(P),R=k.j(A);$(k)&&(k=C),b=b.add(k),S=Z(S,R)}return new ae(b,S)}r.B=function(S){return H(this,S).h},r.and=function(S){const A=Math.max(this.g.length,S.g.length),P=[];for(let x=0;x<A;x++)P[x]=this.i(x)&S.i(x);return new h(P,this.h&S.h)},r.or=function(S){const A=Math.max(this.g.length,S.g.length),P=[];for(let x=0;x<A;x++)P[x]=this.i(x)|S.i(x);return new h(P,this.h|S.h)},r.xor=function(S){const A=Math.max(this.g.length,S.g.length),P=[];for(let x=0;x<A;x++)P[x]=this.i(x)^S.i(x);return new h(P,this.h^S.h)};function J(S){const A=S.g.length+1,P=[];for(let x=0;x<A;x++)P[x]=S.i(x)<<1|S.i(x-1)>>>31;return new h(P,S.h)}function re(S,A){const P=A>>5;A%=32;const x=S.g.length-P,b=[];for(let k=0;k<x;k++)b[k]=A>0?S.i(k+P)>>>A|S.i(k+P+1)<<32-A:S.i(k+P);return new h(b,S.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,$v=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=v,qs=h}).apply(typeof jy<"u"?jy:typeof self<"u"?self:typeof window<"u"?window:{});var Yu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Wv,Ya,Hv,lc,df,Gv,Kv,Qv;(function(){var r,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Yu=="object"&&Yu];for(var g=0;g<u.length;++g){var _=u[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=t(this);function o(u,g){if(g)e:{var _=s;u=u.split(".");for(var I=0;I<u.length-1;I++){var F=u[I];if(!(F in _))break e;_=_[F]}u=u[u.length-1],I=_[u],g=g(I),g!=I&&g!=null&&e(_,u,{configurable:!0,writable:!0,value:g})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(g){var _=[],I;for(I in g)Object.prototype.hasOwnProperty.call(g,I)&&_.push([I,g[I]]);return _}});var l=l||{},h=this||self;function f(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function p(u,g,_){return u.call.apply(u.bind,arguments)}function y(u,g,_){return y=p,y.apply(null,arguments)}function v(u,g){var _=Array.prototype.slice.call(arguments,1);return function(){var I=_.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function T(u,g){function _(){}_.prototype=g.prototype,u.Z=g.prototype,u.prototype=new _,u.prototype.constructor=u,u.Ob=function(I,F,q){for(var se=Array(arguments.length-2),De=2;De<arguments.length;De++)se[De-2]=arguments[De];return g.prototype[F].apply(I,se)}}var C=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function O(u){const g=u.length;if(g>0){const _=Array(g);for(let I=0;I<g;I++)_[I]=u[I];return _}return[]}function $(u,g){for(let I=1;I<arguments.length;I++){const F=arguments[I];var _=typeof F;if(_=_!="object"?_:F?Array.isArray(F)?"array":_:"null",_=="array"||_=="object"&&typeof F.length=="number"){_=u.length||0;const q=F.length||0;u.length=_+q;for(let se=0;se<q;se++)u[_+se]=F[se]}else u.push(F)}}class z{constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function D(u){h.setTimeout(()=>{throw u},0)}function Z(){var u=S;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class K{constructor(){this.h=this.g=null}add(g,_){const I=ae.get();I.set(g,_),this.h?this.h.next=I:this.g=I,this.h=I}}var ae=new z(()=>new H,u=>u.reset());class H{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let J,re=!1,S=new K,A=()=>{const u=Promise.resolve(void 0);J=()=>{u.then(P)}};function P(){for(var u;u=Z();){try{u.h.call(u.g)}catch(_){D(_)}var g=ae;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}re=!1}function x(){this.u=this.u,this.C=this.C}x.prototype.u=!1,x.prototype.dispose=function(){this.u||(this.u=!0,this.N())},x.prototype[Symbol.dispose]=function(){this.dispose()},x.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function b(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}b.prototype.h=function(){this.defaultPrevented=!0};var k=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};h.addEventListener("test",_,g),h.removeEventListener("test",_,g)}catch{}return u})();function R(u){return/^[\s\xa0]*$/.test(u)}function ie(u,g){b.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}T(ie,b),ie.prototype.init=function(u,g){const _=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(_=="mouseover"?g=u.fromElement:_=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&ie.Z.h.call(this)},ie.prototype.h=function(){ie.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var _e="closure_listenable_"+(Math.random()*1e6|0),Me=0;function Ae(u,g,_,I,F){this.listener=u,this.proxy=null,this.src=g,this.type=_,this.capture=!!I,this.ha=F,this.key=++Me,this.da=this.fa=!1}function G(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function pe(u,g,_){for(const I in u)g.call(_,u[I],I,u)}function le(u,g){for(const _ in u)g.call(void 0,u[_],_,u)}function j(u){const g={};for(const _ in u)g[_]=u[_];return g}const Q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ce(u,g){let _,I;for(let F=1;F<arguments.length;F++){I=arguments[F];for(_ in I)u[_]=I[_];for(let q=0;q<Q.length;q++)_=Q[q],Object.prototype.hasOwnProperty.call(I,_)&&(u[_]=I[_])}}function xe(u){this.src=u,this.g={},this.h=0}xe.prototype.add=function(u,g,_,I,F){const q=u.toString();u=this.g[q],u||(u=this.g[q]=[],this.h++);const se=Oe(u,g,I,F);return se>-1?(g=u[se],_||(g.fa=!1)):(g=new Ae(g,this.src,q,!!I,F),g.fa=_,u.push(g)),g};function Ve(u,g){const _=g.type;if(_ in u.g){var I=u.g[_],F=Array.prototype.indexOf.call(I,g,void 0),q;(q=F>=0)&&Array.prototype.splice.call(I,F,1),q&&(G(g),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Oe(u,g,_,I){for(let F=0;F<u.length;++F){const q=u[F];if(!q.da&&q.listener==g&&q.capture==!!_&&q.ha==I)return F}return-1}var je="closure_lm_"+(Math.random()*1e6|0),Le={};function Ke(u,g,_,I,F){if(Array.isArray(g)){for(let q=0;q<g.length;q++)Ke(u,g[q],_,I,F);return null}return _=Cr(_),u&&u[_e]?u.J(g,_,f(I)?!!I.capture:!1,F):wt(u,g,_,!1,I,F)}function wt(u,g,_,I,F,q){if(!g)throw Error("Invalid event type");const se=f(F)?!!F.capture:!!F;let De=Vn(u);if(De||(u[je]=De=new xe(u)),_=De.add(g,_,I,se,q),_.proxy)return _;if(I=nn(),_.proxy=I,I.src=u,I.listener=_,u.addEventListener)k||(F=se),F===void 0&&(F=!1),u.addEventListener(g.toString(),I,F);else if(u.attachEvent)u.attachEvent(Je(g.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return _}function nn(){function u(_){return g.call(u.src,u.listener,_)}const g=ts;return u}function we(u,g,_,I,F){if(Array.isArray(g))for(var q=0;q<g.length;q++)we(u,g[q],_,I,F);else I=f(I)?!!I.capture:!!I,_=Cr(_),u&&u[_e]?(u=u.i,q=String(g).toString(),q in u.g&&(g=u.g[q],_=Oe(g,_,I,F),_>-1&&(G(g[_]),Array.prototype.splice.call(g,_,1),g.length==0&&(delete u.g[q],u.h--)))):u&&(u=Vn(u))&&(g=u.g[g.toString()],u=-1,g&&(u=Oe(g,_,I,F)),(_=u>-1?g[u]:null)&&ft(_))}function ft(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[_e])Ve(g.i,u);else{var _=u.type,I=u.proxy;g.removeEventListener?g.removeEventListener(_,I,u.capture):g.detachEvent?g.detachEvent(Je(_),I):g.addListener&&g.removeListener&&g.removeListener(I),(_=Vn(g))?(Ve(_,u),_.h==0&&(_.src=null,g[je]=null)):G(u)}}}function Je(u){return u in Le?Le[u]:Le[u]="on"+u}function ts(u,g){if(u.da)u=!0;else{g=new ie(g,this);const _=u.listener,I=u.ha||u.src;u.fa&&ft(u),u=_.call(I,g)}return u}function Vn(u){return u=u[je],u instanceof xe?u:null}var In="__closure_events_fn_"+(Math.random()*1e9>>>0);function Cr(u){return typeof u=="function"?u:(u[In]||(u[In]=function(g){return u.handleEvent(g)}),u[In])}function Et(){x.call(this),this.i=new xe(this),this.M=this,this.G=null}T(Et,x),Et.prototype[_e]=!0,Et.prototype.removeEventListener=function(u,g,_,I){we(this,u,g,_,I)};function pt(u,g){var _,I=u.G;if(I)for(_=[];I;I=I.G)_.push(I);if(u=u.M,I=g.type||g,typeof g=="string")g=new b(g,u);else if(g instanceof b)g.target=g.target||u;else{var F=g;g=new b(I,u),Ce(g,F)}F=!0;let q,se;if(_)for(se=_.length-1;se>=0;se--)q=g.g=_[se],F=On(q,I,!0,g)&&F;if(q=g.g=u,F=On(q,I,!0,g)&&F,F=On(q,I,!1,g)&&F,_)for(se=0;se<_.length;se++)q=g.g=_[se],F=On(q,I,!1,g)&&F}Et.prototype.N=function(){if(Et.Z.N.call(this),this.i){var u=this.i;for(const g in u.g){const _=u.g[g];for(let I=0;I<_.length;I++)G(_[I]);delete u.g[g],u.h--}}this.G=null},Et.prototype.J=function(u,g,_,I){return this.i.add(String(u),g,!1,_,I)},Et.prototype.K=function(u,g,_,I){return this.i.add(String(u),g,!0,_,I)};function On(u,g,_,I){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let F=!0;for(let q=0;q<g.length;++q){const se=g[q];if(se&&!se.da&&se.capture==_){const De=se.listener,mt=se.ha||se.src;se.fa&&Ve(u.i,se),F=De.call(mt,I)!==!1&&F}}return F&&!I.defaultPrevented}function ra(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=y(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:h.setTimeout(u,g||0)}function sa(u){u.g=ra(()=>{u.g=null,u.i&&(u.i=!1,sa(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class Ol extends x{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:sa(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ns(u){x.call(this),this.h=u,this.g={}}T(ns,x);var ia=[];function qi(u){pe(u.g,function(g,_){this.g.hasOwnProperty(_)&&ft(g)},u),u.g={}}ns.prototype.N=function(){ns.Z.N.call(this),qi(this)},ns.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var rs=h.JSON.stringify,Ml=h.JSON.parse,si=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function ss(){}function jl(){}var is={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function $i(){b.call(this,"d")}T($i,b);function oa(){b.call(this,"c")}T(oa,b);var Mn={},Wi=null;function os(){return Wi=Wi||new Et}Mn.Ia="serverreachability";function Hi(u){b.call(this,Mn.Ia,u)}T(Hi,b);function Rr(u){const g=os();pt(g,new Hi(g))}Mn.STAT_EVENT="statevent";function Pr(u,g){b.call(this,Mn.STAT_EVENT,u),this.stat=g}T(Pr,b);function ct(u){const g=os();pt(g,new Pr(g,u))}Mn.Ja="timingevent";function aa(u,g){b.call(this,Mn.Ja,u),this.size=g}T(aa,b);function as(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},g)}function ls(){this.g=!0}ls.prototype.ua=function(){this.g=!1};function Ll(u,g,_,I,F,q){u.info(function(){if(u.g)if(q){var se="",De=q.split("&");for(let Xe=0;Xe<De.length;Xe++){var mt=De[Xe].split("=");if(mt.length>1){const Tt=mt[0];mt=mt[1];const gn=Tt.split("_");se=gn.length>=2&&gn[1]=="type"?se+(Tt+"="+mt+"&"):se+(Tt+"=redacted&")}}}else se=null;else se=q;return"XMLHTTP REQ ("+I+") [attempt "+F+"]: "+g+`
`+_+`
`+se})}function Fl(u,g,_,I,F,q,se){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+F+"]: "+g+`
`+_+`
`+q+" "+se})}function Yn(u,g,_,I){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+ii(u,_)+(I?" "+I:"")})}function Ul(u,g){u.info(function(){return"TIMEOUT: "+g})}ls.prototype.info=function(){};function ii(u,g){if(!u.g)return g;if(!g)return null;try{const q=JSON.parse(g);if(q){for(u=0;u<q.length;u++)if(Array.isArray(q[u])){var _=q[u];if(!(_.length<2)){var I=_[1];if(Array.isArray(I)&&!(I.length<1)){var F=I[0];if(F!="noop"&&F!="stop"&&F!="close")for(let se=1;se<I.length;se++)I[se]=""}}}}return rs(q)}catch{return g}}var us={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},cs={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Bl;function kr(){}T(kr,ss),kr.prototype.g=function(){return new XMLHttpRequest},Bl=new kr;function Jn(u){return encodeURIComponent(String(u))}function Gi(u){var g=1;u=u.split(":");const _=[];for(;g>0&&u.length;)_.push(u.shift()),g--;return u.length&&_.push(u.join(":")),_}function Sn(u,g,_,I){this.j=u,this.i=g,this.l=_,this.S=I||1,this.V=new ns(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new zl}function zl(){this.i=null,this.g="",this.h=!1}var ql={},la={};function jn(u,g,_){u.M=1,u.A=Nr(An(g)),u.u=_,u.R=!0,ua(u,null)}function ua(u,g){u.F=Date.now(),oi(u),u.B=An(u.A);var _=u.B,I=u.S;Array.isArray(I)||(I=[String(I)]),va(_.i,"t",I),u.C=0,_=u.j.L,u.h=new zl,u.g=Zl(u.j,_?g:null,!u.u),u.P>0&&(u.O=new Ol(y(u.Y,u,u.g),u.P)),g=u.V,_=u.g,I=u.ba;var F="readystatechange";Array.isArray(F)||(F&&(ia[0]=F.toString()),F=ia);for(let q=0;q<F.length;q++){const se=Ke(_,F[q],I||g.handleEvent,!1,g.h||g);if(!se)break;g.g[se.key]=se}g=u.J?j(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),Rr(),Ll(u.i,u.v,u.B,u.l,u.S,u.u)}Sn.prototype.ba=function(u){u=u.target;const g=this.O;g&&ir(u)==3?g.j():this.Y(u)},Sn.prototype.Y=function(u){try{if(u==this.g)e:{const De=ir(this.g),mt=this.g.ya(),Xe=this.g.ca();if(!(De<3)&&(De!=3||this.g&&(this.h.h||this.g.la()||Yl(this.g)))){this.K||De!=4||mt==7||(mt==8||Xe<=0?Rr(3):Rr(2)),Ki(this);var g=this.g.ca();this.X=g;var _=$l(this);if(this.o=g==200,Fl(this.i,this.v,this.B,this.l,this.S,De,g),this.o){if(this.U&&!this.L){t:{if(this.g){var I,F=this.g;if((I=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(I)){var q=I;break t}}q=null}if(u=q)Yn(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,nt(this,u);else{this.o=!1,this.m=3,ct(12),xr(this),ai(this);break e}}if(this.R){u=!0;let Tt;for(;!this.K&&this.C<_.length;)if(Tt=Hl(this,_),Tt==la){De==4&&(this.m=4,ct(14),u=!1),Yn(this.i,this.l,null,"[Incomplete Response]");break}else if(Tt==ql){this.m=4,ct(15),Yn(this.i,this.l,_,"[Invalid Chunk]"),u=!1;break}else Yn(this.i,this.l,Tt,null),nt(this,Tt);if(Wl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),De!=4||_.length!=0||this.h.h||(this.m=1,ct(16),u=!1),this.o=this.o&&u,!u)Yn(this.i,this.l,_,"[Invalid Chunked Response]"),xr(this),ai(this);else if(_.length>0&&!this.W){this.W=!0;var se=this.j;se.g==this&&se.aa&&!se.P&&(se.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),gi(se),se.P=!0,ct(11))}}else Yn(this.i,this.l,_,null),nt(this,_);De==4&&xr(this),this.o&&!this.K&&(De==4?so(this.j,this):(this.o=!1,oi(this)))}else Ea(this.g),g==400&&_.indexOf("Unknown SID")>0?(this.m=3,ct(12)):(this.m=0,ct(13)),xr(this),ai(this)}}}catch{}};function $l(u){if(!Wl(u))return u.g.la();const g=Yl(u.g);if(g==="")return"";let _="";const I=g.length,F=ir(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return xr(u),ai(u),"";u.h.i=new h.TextDecoder}for(let q=0;q<I;q++)u.h.h=!0,_+=u.h.i.decode(g[q],{stream:!(F&&q==I-1)});return g.length=0,u.h.g+=_,u.C=0,u.h.g}function Wl(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Hl(u,g){var _=u.C,I=g.indexOf(`
`,_);return I==-1?la:(_=Number(g.substring(_,I)),isNaN(_)?ql:(I+=1,I+_>g.length?la:(g=g.slice(I,I+_),u.C=I+_,g)))}Sn.prototype.cancel=function(){this.K=!0,xr(this)};function oi(u){u.T=Date.now()+u.H,ca(u,u.H)}function ca(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=as(y(u.aa,u),g)}function Ki(u){u.D&&(h.clearTimeout(u.D),u.D=null)}Sn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Ul(this.i,this.B),this.M!=2&&(Rr(),ct(17)),xr(this),this.m=2,ai(this)):ca(this,this.T-u)};function ai(u){u.j.I==0||u.K||so(u.j,u)}function xr(u){Ki(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,qi(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function nt(u,g){try{var _=u.j;if(_.I!=0&&(_.g==u||da(_.h,u))){if(!u.L&&da(_.h,u)&&_.I==3){try{var I=_.Ba.g.parse(g)}catch{I=null}if(Array.isArray(I)&&I.length==3){var F=I;if(F[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<u.F)ro(_),pn(_);else break e;lr(_),ct(18)}}else _.xa=F[1],0<_.xa-_.K&&F[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=as(y(_.Va,_),6e3));li(_.h)<=1&&_.ta&&(_.ta=void 0)}else mn(_,11)}else if((u.L||_.g==u)&&ro(_),!R(g))for(F=_.Ba.g.parse(g),g=0;g<F.length;g++){let Xe=F[g];const Tt=Xe[0];if(!(Tt<=_.K))if(_.K=Tt,Xe=Xe[1],_.I==2)if(Xe[0]=="c"){_.M=Xe[1],_.ba=Xe[2];const gn=Xe[3];gn!=null&&(_.ka=gn,_.j.info("VER="+_.ka));const Mr=Xe[4];Mr!=null&&(_.za=Mr,_.j.info("SVER="+_.za));const ur=Xe[5];ur!=null&&typeof ur=="number"&&ur>0&&(I=1.5*ur,_.O=I,_.j.info("backChannelRequestTimeoutMs_="+I)),I=_;const cr=u.g;if(cr){const ao=cr.g?cr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ao){var q=I.h;q.g||ao.indexOf("spdy")==-1&&ao.indexOf("quic")==-1&&ao.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(Xi(q,q.h),q.h=null))}if(I.G){const Sa=cr.g?cr.g.getResponseHeader("X-HTTP-Session-Id"):null;Sa&&(I.wa=Sa,Qe(I.J,I.G,Sa))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-u.F,_.j.info("Handshake RTT: "+_.T+"ms")),I=_;var se=u;if(I.na=Ia(I,I.L?I.ba:null,I.W),se.L){ui(I.h,se);var De=se,mt=I.O;mt&&(De.H=mt),De.D&&(Ki(De),oi(De)),I.g=se}else Wt(I);_.i.length>0&&Or(_)}else Xe[0]!="stop"&&Xe[0]!="close"||mn(_,7);else _.I==3&&(Xe[0]=="stop"||Xe[0]=="close"?Xe[0]=="stop"?mn(_,7):to(_):Xe[0]!="noop"&&_.l&&_.l.qa(Xe),_.A=0)}}Rr(4)}catch{}}var ch=class{constructor(u,g){this.g=u,this.map=g}};function Qi(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ha(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function li(u){return u.h?1:u.g?u.g.size:0}function da(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function Xi(u,g){u.g?u.g.add(g):u.h=g}function ui(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}Qi.prototype.cancel=function(){if(this.i=hn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function hn(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const _ of u.g.values())g=g.concat(_.G);return g}return O(u.i)}var Gl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dn(u,g){if(u){u=u.split("&");for(let _=0;_<u.length;_++){const I=u[_].indexOf("=");let F,q=null;I>=0?(F=u[_].substring(0,I),q=u[_].substring(I+1)):F=u[_],g(F,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function Zn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof Zn?(this.l=u.l,ci(this,u.j),this.o=u.o,this.g=u.g,er(this,u.u),this.h=u.h,hs(this,wa(u.i)),this.m=u.m):u&&(g=String(u).match(Gl))?(this.l=!1,ci(this,g[1]||"",!0),this.o=hi(g[2]||""),this.g=hi(g[3]||"",!0),er(this,g[4]),this.h=hi(g[5]||"",!0),hs(this,g[6]||"",!0),this.m=hi(g[7]||"")):(this.l=!1,this.i=new qe(null,this.l))}Zn.prototype.toString=function(){const u=[];var g=this.j;g&&u.push(di(g,pa,!0),":");var _=this.g;return(_||g=="file")&&(u.push("//"),(g=this.o)&&u.push(di(g,pa,!0),"@"),u.push(Jn(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&u.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(di(_,_.charAt(0)=="/"?fi:ma,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",di(_,ga)),u.join("")},Zn.prototype.resolve=function(u){const g=An(this);let _=!!u.j;_?ci(g,u.j):_=!!u.o,_?g.o=u.o:_=!!u.g,_?g.g=u.g:_=u.u!=null;var I=u.h;if(_)er(g,u.u);else if(_=!!u.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var F=g.h.lastIndexOf("/");F!=-1&&(I=g.h.slice(0,F+1)+I)}if(F=I,F==".."||F==".")I="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){I=F.lastIndexOf("/",0)==0,F=F.split("/");const q=[];for(let se=0;se<F.length;){const De=F[se++];De=="."?I&&se==F.length&&q.push(""):De==".."?((q.length>1||q.length==1&&q[0]!="")&&q.pop(),I&&se==F.length&&q.push("")):(q.push(De),I=!0)}I=q.join("/")}else I=F}return _?g.h=I:_=u.i.toString()!=="",_?hs(g,wa(u.i)):_=!!u.m,_&&(g.m=u.m),g};function An(u){return new Zn(u)}function ci(u,g,_){u.j=_?hi(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function er(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function hs(u,g,_){g instanceof qe?(u.i=g,Ji(u.i,u.l)):(_||(g=di(g,hh)),u.i=new qe(g,u.l))}function Qe(u,g,_){u.i.set(g,_)}function Nr(u){return Qe(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function hi(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function di(u,g,_){return typeof u=="string"?(u=encodeURI(u).replace(g,fa),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function fa(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var pa=/[#\/\?@]/g,ma=/[#\?:]/g,fi=/[#\?]/g,hh=/[#\?@]/g,ga=/#/g;function qe(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function tr(u){u.g||(u.g=new Map,u.h=0,u.i&&dn(u.i,function(g,_){u.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}r=qe.prototype,r.add=function(u,g){tr(this),this.i=null,u=nr(this,u);let _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(g),this.h+=1,this};function ya(u,g){tr(u),g=nr(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function Yi(u,g){return tr(u),g=nr(u,g),u.g.has(g)}r.forEach=function(u,g){tr(this),this.g.forEach(function(_,I){_.forEach(function(F){u.call(g,F,I,this)},this)},this)};function _a(u,g){tr(u);let _=[];if(typeof g=="string")Yi(u,g)&&(_=_.concat(u.g.get(nr(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)_=_.concat(u[g]);return _}r.set=function(u,g){return tr(this),this.i=null,u=nr(this,u),Yi(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},r.get=function(u,g){return u?(u=_a(this,u),u.length>0?String(u[0]):g):g};function va(u,g,_){ya(u,g),_.length>0&&(u.i=null,u.g.set(nr(u,g),O(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(let I=0;I<g.length;I++){var _=g[I];const F=Jn(_);_=_a(this,_);for(let q=0;q<_.length;q++){let se=F;_[q]!==""&&(se+="="+Jn(_[q])),u.push(se)}}return this.i=u.join("&")};function wa(u){const g=new qe;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function nr(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function Ji(u,g){g&&!u.j&&(tr(u),u.i=null,u.g.forEach(function(_,I){const F=I.toLowerCase();I!=F&&(ya(this,I),va(this,F,_))},u)),u.j=g}function rr(u,g){const _=new ls;if(h.Image){const I=new Image;I.onload=v(Mt,_,"TestLoadImage: loaded",!0,g,I),I.onerror=v(Mt,_,"TestLoadImage: error",!1,g,I),I.onabort=v(Mt,_,"TestLoadImage: abort",!1,g,I),I.ontimeout=v(Mt,_,"TestLoadImage: timeout",!1,g,I),h.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else g(!1)}function sr(u,g){const _=new ls,I=new AbortController,F=setTimeout(()=>{I.abort(),Mt(_,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:I.signal}).then(q=>{clearTimeout(F),q.ok?Mt(_,"TestPingServer: ok",!0,g):Mt(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(F),Mt(_,"TestPingServer: error",!1,g)})}function Mt(u,g,_,I,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),I(_)}catch{}}function pi(){this.g=new si}function br(u){this.i=u.Sb||null,this.h=u.ab||!1}T(br,ss),br.prototype.g=function(){return new fn(this.i,this.h)};function fn(u,g){Et.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(fn,Et),r=fn.prototype,r.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,Ln(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||h).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ds(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ln(this)),this.g&&(this.readyState=3,Ln(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Kl(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Kl(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?ds(this):Ln(this),this.readyState==3&&Kl(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,ds(this))},r.Na=function(u){this.g&&(this.response=u,ds(this))},r.ga=function(){this.g&&ds(this)};function ds(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Ln(u)}r.setRequestHeader=function(u,g){this.A.append(u,g)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=g.next();return u.join(`\r
`)};function Ln(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(fn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Ql(u){let g="";return pe(u,function(_,I){g+=I,g+=":",g+=_,g+=`\r
`}),g}function Zi(u,g,_){e:{for(I in _){var I=!1;break e}I=!0}I||(_=Ql(_),typeof u=="string"?_!=null&&Jn(_):Qe(u,g,_))}function et(u){Et.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(et,Et);var Xl=/^https?$/i,dh=["POST","PUT"];r=et.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,g,_,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Bl.g(),this.g.onreadystatechange=C(y(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(q){fs(this,q);return}if(u=_||"",_=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var F in I)_.set(F,I[F]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const q of I.keys())_.set(q,I.get(q));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(_.keys()).find(q=>q.toLowerCase()=="content-type"),F=h.FormData&&u instanceof h.FormData,!(Array.prototype.indexOf.call(dh,g,void 0)>=0)||I||F||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,se]of _)this.g.setRequestHeader(q,se);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(q){fs(this,q)}};function fs(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,ps(u),Vr(u)}function ps(u){u.A||(u.A=!0,pt(u,"complete"),pt(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,pt(this,"complete"),pt(this,"abort"),Vr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vr(this,!0)),et.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Dr(this):this.Xa())},r.Xa=function(){Dr(this)};function Dr(u){if(u.h&&typeof l<"u"){if(u.v&&ir(u)==4)setTimeout(u.Ca.bind(u),0);else if(pt(u,"readystatechange"),ir(u)==4){u.h=!1;try{const q=u.ca();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var I;if(I=q===0){let se=String(u.D).match(Gl)[1]||null;!se&&h.self&&h.self.location&&(se=h.self.location.protocol.slice(0,-1)),I=!Xl.test(se?se.toLowerCase():"")}_=I}if(_)pt(u,"complete"),pt(u,"success");else{u.o=6;try{var F=ir(u)>2?u.g.statusText:""}catch{F=""}u.l=F+" ["+u.ca()+"]",ps(u)}}finally{Vr(u)}}}}function Vr(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const _=u.g;u.g=null,g||pt(u,"ready");try{_.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function ir(u){return u.g?u.g.readyState:0}r.ca=function(){try{return ir(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),Ml(g)}};function Yl(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Ea(u){const g={};u=(u.g&&ir(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(R(u[I]))continue;var _=Gi(u[I]);const F=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const q=g[F]||[];g[F]=q,q.push(_)}le(g,function(I){return I.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function or(u,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||g}function eo(u){this.za=0,this.i=[],this.j=new ls,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=or("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=or("baseRetryDelayMs",5e3,u),this.Za=or("retryDelaySeedMs",1e4,u),this.Ta=or("forwardChannelMaxRetries",2,u),this.va=or("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Qi(u&&u.concurrentRequestLimit),this.Ba=new pi,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=eo.prototype,r.ka=8,r.I=1,r.connect=function(u,g,_,I){ct(0),this.W=u,this.H=g||{},_&&I!==void 0&&(this.H.OSID=_,this.H.OAID=I),this.F=this.X,this.J=Ia(this,null,this.W),Or(this)};function to(u){if(no(u),u.I==3){var g=u.V++,_=An(u.J);if(Qe(_,"SID",u.M),Qe(_,"RID",g),Qe(_,"TYPE","terminate"),ar(u,_),g=new Sn(u,u.j,g),g.M=2,g.A=Nr(An(_)),_=!1,h.navigator&&h.navigator.sendBeacon)try{_=h.navigator.sendBeacon(g.A.toString(),"")}catch{}!_&&h.Image&&(new Image().src=g.A,_=!0),_||(g.g=Zl(g.j,null),g.g.ea(g.A)),g.F=Date.now(),oi(g)}yi(u)}function pn(u){u.g&&(gi(u),u.g.cancel(),u.g=null)}function no(u){pn(u),u.v&&(h.clearTimeout(u.v),u.v=null),ro(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&h.clearTimeout(u.m),u.m=null)}function Or(u){if(!ha(u.h)&&!u.m){u.m=!0;var g=u.Ea;J||A(),re||(J(),re=!0),S.add(g,u),u.D=0}}function Jl(u,g){return li(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=as(y(u.Ea,u,g),io(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const F=new Sn(this,this.j,u);let q=this.o;if(this.U&&(q?(q=j(q),Ce(q,this.U)):q=this.U),this.u!==null||this.R||(F.J=q,q=null),this.S)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var I=this.i[_];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(g+=I,g>4096){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=Ta(this,F,g),_=An(this.J),Qe(_,"RID",u),Qe(_,"CVER",22),this.G&&Qe(_,"X-HTTP-Session-Id",this.G),ar(this,_),q&&(this.R?g="headers="+Jn(Ql(q))+"&"+g:this.u&&Zi(_,this.u,q)),Xi(this.h,F),this.Ra&&Qe(_,"TYPE","init"),this.S?(Qe(_,"$req",g),Qe(_,"SID","null"),F.U=!0,jn(F,_,null)):jn(F,_,g),this.I=2}}else this.I==3&&(u?mi(this,u):this.i.length==0||ha(this.h)||mi(this))};function mi(u,g){var _;g?_=g.l:_=u.V++;const I=An(u.J);Qe(I,"SID",u.M),Qe(I,"RID",_),Qe(I,"AID",u.K),ar(u,I),u.u&&u.o&&Zi(I,u.u,u.o),_=new Sn(u,u.j,_,u.D+1),u.u===null&&(_.J=u.o),g&&(u.i=g.G.concat(u.i)),g=Ta(u,_,1e3),_.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Xi(u.h,_),jn(_,I,g)}function ar(u,g){u.H&&pe(u.H,function(_,I){Qe(g,I,_)}),u.l&&pe({},function(_,I){Qe(g,I,_)})}function Ta(u,g,_){_=Math.min(u.i.length,_);const I=u.l?y(u.l.Ka,u.l,u):null;e:{var F=u.i;let De=-1;for(;;){const mt=["count="+_];De==-1?_>0?(De=F[0].g,mt.push("ofs="+De)):De=0:mt.push("ofs="+De);let Xe=!0;for(let Tt=0;Tt<_;Tt++){var q=F[Tt].g;const gn=F[Tt].map;if(q-=De,q<0)De=Math.max(0,F[Tt].g-100),Xe=!1;else try{q="req"+q+"_"||"";try{var se=gn instanceof Map?gn:Object.entries(gn);for(const[Mr,ur]of se){let cr=ur;f(ur)&&(cr=rs(ur)),mt.push(q+Mr+"="+encodeURIComponent(cr))}}catch(Mr){throw mt.push(q+"type="+encodeURIComponent("_badmap")),Mr}}catch{I&&I(gn)}}if(Xe){se=mt.join("&");break e}}se=void 0}return u=u.i.splice(0,_),g.G=u,se}function Wt(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;J||A(),re||(J(),re=!0),S.add(g,u),u.A=0}}function lr(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=as(y(u.Da,u),io(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,ms(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=as(y(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ct(10),pn(this),ms(this))};function gi(u){u.B!=null&&(h.clearTimeout(u.B),u.B=null)}function ms(u){u.g=new Sn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=An(u.na);Qe(g,"RID","rpc"),Qe(g,"SID",u.M),Qe(g,"AID",u.K),Qe(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&Qe(g,"TO",u.ia),Qe(g,"TYPE","xmlhttp"),ar(u,g),u.u&&u.o&&Zi(g,u.u,u.o),u.O&&(u.g.H=u.O);var _=u.g;u=u.ba,_.M=1,_.A=Nr(An(g)),_.u=null,_.R=!0,ua(_,u)}r.Va=function(){this.C!=null&&(this.C=null,pn(this),lr(this),ct(19))};function ro(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function so(u,g){var _=null;if(u.g==g){ro(u),gi(u),u.g=null;var I=2}else if(da(u.h,g))_=g.G,ui(u.h,g),I=1;else return;if(u.I!=0){if(g.o)if(I==1){_=g.u?g.u.length:0,g=Date.now()-g.F;var F=u.D;I=os(),pt(I,new aa(I,_)),Or(u)}else Wt(u);else if(F=g.m,F==3||F==0&&g.X>0||!(I==1&&Jl(u,g)||I==2&&lr(u)))switch(_&&_.length>0&&(g=u.h,g.i=g.i.concat(_)),F){case 1:mn(u,5);break;case 4:mn(u,10);break;case 3:mn(u,6);break;default:mn(u,2)}}}function io(u,g){let _=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(_*=2),_*g}function mn(u,g){if(u.j.info("Error code "+g),g==2){var _=y(u.bb,u),I=u.Ua;const F=!I;I=new Zn(I||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||ci(I,"https"),Nr(I),F?rr(I.toString(),_):sr(I.toString(),_)}else ct(2);u.I=0,u.l&&u.l.pa(g),yi(u),no(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),ct(2)):(this.j.info("Failed to ping google.com"),ct(1))};function yi(u){if(u.I=0,u.ja=[],u.l){const g=hn(u.h);(g.length!=0||u.i.length!=0)&&($(u.ja,g),$(u.ja,u.i),u.h.i.length=0,O(u.i),u.i.length=0),u.l.oa()}}function Ia(u,g,_){var I=_ instanceof Zn?An(_):new Zn(_);if(I.g!="")g&&(I.g=g+"."+I.g),er(I,I.u);else{var F=h.location;I=F.protocol,g=g?g+"."+F.hostname:F.hostname,F=+F.port;const q=new Zn(null);I&&ci(q,I),g&&(q.g=g),F&&er(q,F),_&&(q.h=_),I=q}return _=u.G,g=u.wa,_&&g&&Qe(I,_,g),Qe(I,"VER",u.ka),ar(u,I),I}function Zl(u,g,_){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new et(new br({ab:_})):new et(u.ma),g.Fa(u.L),g}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function eu(){}r=eu.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function oo(){}oo.prototype.g=function(u,g){return new jt(u,g)};function jt(u,g){Et.call(this),this.g=new eo(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!R(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!R(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new gs(this)}T(jt,Et),jt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},jt.prototype.close=function(){to(this.g)},jt.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.v&&(_={},_.__data__=rs(u),u=_);g.i.push(new ch(g.Ya++,u)),g.I==3&&Or(g)},jt.prototype.N=function(){this.g.l=null,delete this.j,to(this.g),delete this.g,jt.Z.N.call(this)};function tu(u){$i.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const _ in g){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}T(tu,$i);function nu(){oa.call(this),this.status=1}T(nu,oa);function gs(u){this.g=u}T(gs,eu),gs.prototype.ra=function(){pt(this.g,"a")},gs.prototype.qa=function(u){pt(this.g,new tu(u))},gs.prototype.pa=function(u){pt(this.g,new nu)},gs.prototype.oa=function(){pt(this.g,"b")},oo.prototype.createWebChannel=oo.prototype.g,jt.prototype.send=jt.prototype.o,jt.prototype.open=jt.prototype.m,jt.prototype.close=jt.prototype.close,Qv=function(){return new oo},Kv=function(){return os()},Gv=Mn,df={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},us.NO_ERROR=0,us.TIMEOUT=8,us.HTTP_ERROR=6,lc=us,cs.COMPLETE="complete",Hv=cs,jl.EventType=is,is.OPEN="a",is.CLOSE="b",is.ERROR="c",is.MESSAGE="d",Et.prototype.listen=Et.prototype.J,Ya=jl,et.prototype.listenOnce=et.prototype.K,et.prototype.getLastError=et.prototype.Ha,et.prototype.getLastErrorCode=et.prototype.ya,et.prototype.getStatus=et.prototype.ca,et.prototype.getResponseJson=et.prototype.La,et.prototype.getResponseText=et.prototype.la,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Fa,Wv=et}).apply(typeof Yu<"u"?Yu:typeof self<"u"?self:typeof window<"u"?window:{});const Ly="@firebase/firestore",Fy="4.9.3";class Yt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Yt.UNAUTHENTICATED=new Yt(null),Yt.GOOGLE_CREDENTIALS=new Yt("google-credentials-uid"),Yt.FIRST_PARTY=new Yt("first-party-uid"),Yt.MOCK_USER=new Yt("mock-user");let Yo="12.7.0";const Li=new Df("@firebase/firestore");function ko(){return Li.logLevel}function he(r,...e){if(Li.logLevel<=Ue.DEBUG){const t=e.map(Hf);Li.debug(`Firestore (${Yo}): ${r}`,...t)}}function Xr(r,...e){if(Li.logLevel<=Ue.ERROR){const t=e.map(Hf);Li.error(`Firestore (${Yo}): ${r}`,...t)}}function Uo(r,...e){if(Li.logLevel<=Ue.WARN){const t=e.map(Hf);Li.warn(`Firestore (${Yo}): ${r}`,...t)}}function Hf(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}function Te(r,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,Xv(r,s,t)}function Xv(r,e,t){let s=`FIRESTORE (${Yo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Xr(s),new Error(s)}function We(r,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,r||Xv(e,o,s)}function Ne(r,e){return r}const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oe extends Zr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class yr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Yv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class FA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Yt.UNAUTHENTICATED)))}shutdown(){}}class UA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class BA{constructor(e){this.t=e,this.currentUser=Yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){We(this.o===void 0,42304);let s=this.i;const o=p=>this.i!==s?(s=this.i,t(p)):Promise.resolve();let l=new yr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new yr,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},f=p=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((p=>f(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?f(p):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new yr)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(We(typeof s.accessToken=="string",31837,{l:s}),new Yv(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return We(e===null||typeof e=="string",2055,{h:e}),new Yt(e)}}class zA{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Yt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class qA{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new zA(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Yt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Uy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $A{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Hn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){We(this.o===void 0,3512);const s=l=>{l.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,he("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const o=l=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Uy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(We(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Uy(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function WA(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}class Gf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=WA(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%62))}return s}}function Be(r,e){return r<e?-1:r>e?1:0}function ff(r,e){const t=Math.min(r.length,e.length);for(let s=0;s<t;s++){const o=r.charAt(s),l=e.charAt(s);if(o!==l)return Hd(o)===Hd(l)?Be(o,l):Hd(o)?1:-1}return Be(r.length,e.length)}const HA=55296,GA=57343;function Hd(r){const e=r.charCodeAt(0);return e>=HA&&e<=GA}function Bo(r,e,t){return r.length===e.length&&r.every(((s,o)=>t(s,e[o])))}const By="__name__";class mr{constructor(e,t,s){t===void 0?t=0:t>e.length&&Te(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Te(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return mr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof mr?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=mr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Be(e.length,t.length)}static compareSegments(e,t){const s=mr.isNumericId(e),o=mr.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?mr.extractNumericId(e).compare(mr.extractNumericId(t)):ff(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return qs.fromString(e.substring(4,e.length-2))}}class Ze extends mr{construct(e,t,s){return new Ze(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new oe(W.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new Ze(t)}static emptyPath(){return new Ze([])}}const KA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Bt extends mr{construct(e,t,s){return new Bt(e,t,s)}static isValidIdentifier(e){return KA.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Bt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===By}static keyField(){return new Bt([By])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new oe(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let h=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new oe(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new oe(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else f==="`"?(h=!h,o++):f!=="."||h?(s+=f,o++):(l(),o++)}if(l(),h)throw new oe(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Bt(t)}static emptyPath(){return new Bt([])}}class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(Ze.fromString(e))}static fromName(e){return new Ee(Ze.fromString(e).popFirst(5))}static empty(){return new Ee(Ze.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ze.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ze.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new Ze(e.slice()))}}function Jv(r,e,t){if(!t)throw new oe(W.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function QA(r,e,t,s){if(e===!0&&s===!0)throw new oe(W.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function zy(r){if(!Ee.isDocumentKey(r))throw new oe(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function qy(r){if(Ee.isDocumentKey(r))throw new oe(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Zv(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function $c(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Te(12329,{type:typeof r})}function bn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new oe(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=$c(r);throw new oe(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function XA(r,e){if(e<=0)throw new oe(W.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}function Ct(r,e){const t={typeString:r};return e&&(t.value=e),t}function Cl(r,e){if(!Zv(r))throw new oe(W.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){t=`JSON missing required field: '${s}'`;break}const h=r[s];if(o&&typeof h!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(l!==void 0&&h!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new oe(W.INVALID_ARGUMENT,t);return!0}const $y=-62135596800,Wy=1e6;class it{static now(){return it.fromMillis(Date.now())}static fromDate(e){return it.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*Wy);return new it(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new oe(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new oe(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<$y)throw new oe(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oe(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Wy}_compareTo(e){return this.seconds===e.seconds?Be(this.nanoseconds,e.nanoseconds):Be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:it._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Cl(e,it._jsonSchema))return new it(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-$y;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}it._jsonSchemaVersion="firestore/timestamp/1.0",it._jsonSchema={type:Ct("string",it._jsonSchemaVersion),seconds:Ct("number"),nanoseconds:Ct("number")};class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new it(0,0))}static max(){return new Re(new it(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const hl=-1;function YA(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Re.fromTimestamp(s===1e9?new it(t+1,0):new it(t,s));return new Hs(o,Ee.empty(),e)}function JA(r){return new Hs(r.readTime,r.key,hl)}class Hs{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Hs(Re.min(),Ee.empty(),hl)}static max(){return new Hs(Re.max(),Ee.empty(),hl)}}function ZA(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Ee.comparator(r.documentKey,e.documentKey),t!==0?t:Be(r.largestBatchId,e.largestBatchId))}const eC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Jo(r){if(r.code!==W.FAILED_PRECONDITION||r.message!==eC)throw r;he("LocalStore","Unexpectedly lost primary lease")}class X{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new X(((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof X?t:X.resolve(t)}catch(t){return X.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):X.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):X.reject(t)}static resolve(e){return new X(((t,s)=>{t(e)}))}static reject(e){return new X(((t,s)=>{s(e)}))}static waitFor(e){return new X(((t,s)=>{let o=0,l=0,h=!1;e.forEach((f=>{++o,f.next((()=>{++l,h&&l===o&&t()}),(p=>s(p)))})),h=!0,l===o&&t()}))}static or(e){let t=X.resolve(!1);for(const s of e)t=t.next((o=>o?X.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,l)=>{s.push(t.call(this,o,l))})),this.waitFor(s)}static mapArray(e,t){return new X(((s,o)=>{const l=e.length,h=new Array(l);let f=0;for(let p=0;p<l;p++){const y=p;t(e[y]).next((v=>{h[y]=v,++f,f===l&&s(h)}),(v=>o(v)))}}))}static doWhile(e,t){return new X(((s,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):s()};l()}))}}function nC(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Zo(r){return r.name==="IndexedDbTransactionError"}class Wc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Wc.ce=-1;const Kf=-1;function Rl(r){return r==null}function Ic(r){return r===0&&1/r==-1/0}function rC(r){return typeof r=="number"&&Number.isInteger(r)&&!Ic(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const ew="";function sC(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Hy(e)),e=iC(r.get(t),e);return Hy(e)}function iC(r,e){let t=e;const s=r.length;for(let o=0;o<s;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case ew:t+="";break;default:t+=l}}return t}function Hy(r){return r+ew+""}function Gy(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function ti(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function tw(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class ut{constructor(e,t){this.comparator=e,this.root=t||Ut.EMPTY}insert(e,t){return new ut(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ut.BLACK,null,null))}remove(e){return new ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ut.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ju(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ju(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ju(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ju(this.root,e,this.comparator,!0)}}class Ju{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ut{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??Ut.RED,this.left=o??Ut.EMPTY,this.right=l??Ut.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new Ut(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ut.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Ut.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ut.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ut.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Te(27949);return e+(this.isRed()?0:1)}}Ut.EMPTY=null,Ut.RED=!0,Ut.BLACK=!1;Ut.EMPTY=new class{constructor(){this.size=0}get key(){throw Te(57766)}get value(){throw Te(16141)}get color(){throw Te(16727)}get left(){throw Te(29726)}get right(){throw Te(36894)}copy(e,t,s,o,l){return this}insert(e,t,s){return new Ut(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class xt{constructor(e){this.comparator=e,this.data=new ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ky(this.data.getIterator())}getIteratorFrom(e){return new Ky(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof xt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new xt(this.comparator);return t.data=e,t}}class Ky{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class En{constructor(e){this.fields=e,e.sort(Bt.comparator)}static empty(){return new En([])}unionWith(e){let t=new xt(Bt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new En(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Bo(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}class nw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class $t{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new nw("Invalid base64 string: "+l):l}})(e);return new $t(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l})(e);return new $t(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$t.EMPTY_BYTE_STRING=new $t("");const oC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gs(r){if(We(!!r,39018),typeof r=="string"){let e=0;const t=oC.exec(r);if(We(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:yt(r.seconds),nanos:yt(r.nanos)}}function yt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ks(r){return typeof r=="string"?$t.fromBase64String(r):$t.fromUint8Array(r)}const rw="server_timestamp",sw="__type__",iw="__previous_value__",ow="__local_write_time__";function Qf(r){return(r?.mapValue?.fields||{})[sw]?.stringValue===rw}function Hc(r){const e=r.mapValue.fields[iw];return Qf(e)?Hc(e):e}function dl(r){const e=Gs(r.mapValue.fields[ow].timestampValue);return new it(e.seconds,e.nanos)}class aC{constructor(e,t,s,o,l,h,f,p,y,v){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=f,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=v}}const Sc="(default)";class fl{constructor(e,t){this.projectId=e,this.database=t||Sc}static empty(){return new fl("","")}get isDefaultDatabase(){return this.database===Sc}isEqual(e){return e instanceof fl&&e.projectId===this.projectId&&e.database===this.database}}const aw="__type__",lC="__max__",Zu={mapValue:{}},lw="__vector__",Ac="value";function Qs(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Qf(r)?4:cC(r)?9007199254740991:uC(r)?10:11:Te(28295,{value:r})}function Ir(r,e){if(r===e)return!0;const t=Qs(r);if(t!==Qs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return dl(r).isEqual(dl(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=Gs(o.timestampValue),f=Gs(l.timestampValue);return h.seconds===f.seconds&&h.nanos===f.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,l){return Ks(o.bytesValue).isEqual(Ks(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,l){return yt(o.geoPointValue.latitude)===yt(l.geoPointValue.latitude)&&yt(o.geoPointValue.longitude)===yt(l.geoPointValue.longitude)})(r,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return yt(o.integerValue)===yt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=yt(o.doubleValue),f=yt(l.doubleValue);return h===f?Ic(h)===Ic(f):isNaN(h)&&isNaN(f)}return!1})(r,e);case 9:return Bo(r.arrayValue.values||[],e.arrayValue.values||[],Ir);case 10:case 11:return(function(o,l){const h=o.mapValue.fields||{},f=l.mapValue.fields||{};if(Gy(h)!==Gy(f))return!1;for(const p in h)if(h.hasOwnProperty(p)&&(f[p]===void 0||!Ir(h[p],f[p])))return!1;return!0})(r,e);default:return Te(52216,{left:r})}}function pl(r,e){return(r.values||[]).find((t=>Ir(t,e)))!==void 0}function zo(r,e){if(r===e)return 0;const t=Qs(r),s=Qs(e);if(t!==s)return Be(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Be(r.booleanValue,e.booleanValue);case 2:return(function(l,h){const f=yt(l.integerValue||l.doubleValue),p=yt(h.integerValue||h.doubleValue);return f<p?-1:f>p?1:f===p?0:isNaN(f)?isNaN(p)?0:-1:1})(r,e);case 3:return Qy(r.timestampValue,e.timestampValue);case 4:return Qy(dl(r),dl(e));case 5:return ff(r.stringValue,e.stringValue);case 6:return(function(l,h){const f=Ks(l),p=Ks(h);return f.compareTo(p)})(r.bytesValue,e.bytesValue);case 7:return(function(l,h){const f=l.split("/"),p=h.split("/");for(let y=0;y<f.length&&y<p.length;y++){const v=Be(f[y],p[y]);if(v!==0)return v}return Be(f.length,p.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,h){const f=Be(yt(l.latitude),yt(h.latitude));return f!==0?f:Be(yt(l.longitude),yt(h.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Xy(r.arrayValue,e.arrayValue);case 10:return(function(l,h){const f=l.fields||{},p=h.fields||{},y=f[Ac]?.arrayValue,v=p[Ac]?.arrayValue,T=Be(y?.values?.length||0,v?.values?.length||0);return T!==0?T:Xy(y,v)})(r.mapValue,e.mapValue);case 11:return(function(l,h){if(l===Zu.mapValue&&h===Zu.mapValue)return 0;if(l===Zu.mapValue)return 1;if(h===Zu.mapValue)return-1;const f=l.fields||{},p=Object.keys(f),y=h.fields||{},v=Object.keys(y);p.sort(),v.sort();for(let T=0;T<p.length&&T<v.length;++T){const C=ff(p[T],v[T]);if(C!==0)return C;const O=zo(f[p[T]],y[v[T]]);if(O!==0)return O}return Be(p.length,v.length)})(r.mapValue,e.mapValue);default:throw Te(23264,{he:t})}}function Qy(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Be(r,e);const t=Gs(r),s=Gs(e),o=Be(t.seconds,s.seconds);return o!==0?o:Be(t.nanos,s.nanos)}function Xy(r,e){const t=r.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=zo(t[o],s[o]);if(l)return l}return Be(t.length,s.length)}function qo(r){return pf(r)}function pf(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const s=Gs(t);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Ks(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return Ee.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=pf(l);return s+"]"})(r.arrayValue):"mapValue"in r?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of s)l?l=!1:o+=",",o+=`${h}:${pf(t.fields[h])}`;return o+"}"})(r.mapValue):Te(61005,{value:r})}function uc(r){switch(Qs(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Hc(r);return e?16+uc(e):16;case 5:return 2*r.stringValue.length;case 6:return Ks(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,l)=>o+uc(l)),0)})(r.arrayValue);case 10:case 11:return(function(s){let o=0;return ti(s.fields,((l,h)=>{o+=l.length+uc(h)})),o})(r.mapValue);default:throw Te(13486,{value:r})}}function Yy(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function mf(r){return!!r&&"integerValue"in r}function Xf(r){return!!r&&"arrayValue"in r}function Jy(r){return!!r&&"nullValue"in r}function Zy(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function cc(r){return!!r&&"mapValue"in r}function uC(r){return(r?.mapValue?.fields||{})[aw]?.stringValue===lw}function nl(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return ti(r.mapValue.fields,((t,s)=>e.mapValue.fields[t]=nl(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=nl(r.arrayValue.values[t]);return e}return{...r}}function cC(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===lC}class tn{constructor(e){this.value=e}static empty(){return new tn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!cc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=nl(t)}setAll(e){let t=Bt.emptyPath(),s={},o=[];e.forEach(((h,f)=>{if(!t.isImmediateParentOf(f)){const p=this.getFieldsMap(t);this.applyChanges(p,s,o),s={},o=[],t=f.popLast()}h?s[f.lastSegment()]=nl(h):o.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());cc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ir(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];cc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){ti(t,((o,l)=>e[o]=l));for(const o of s)delete e[o]}clone(){return new tn(nl(this.value))}}function uw(r){const e=[];return ti(r.fields,((t,s)=>{const o=new Bt([t]);if(cc(s)){const l=uw(s.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)})),new En(e)}class Ot{constructor(e,t,s,o,l,h,f){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=h,this.documentState=f}static newInvalidDocument(e){return new Ot(e,0,Re.min(),Re.min(),Re.min(),tn.empty(),0)}static newFoundDocument(e,t,s,o){return new Ot(e,1,t,Re.min(),s,o,0)}static newNoDocument(e,t){return new Ot(e,2,t,Re.min(),Re.min(),tn.empty(),0)}static newUnknownDocument(e,t){return new Ot(e,3,t,Re.min(),Re.min(),tn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=tn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ot&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ot(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Cc{constructor(e,t){this.position=e,this.inclusive=t}}function e_(r,e,t){let s=0;for(let o=0;o<r.position.length;o++){const l=e[o],h=r.position[o];if(l.field.isKeyField()?s=Ee.comparator(Ee.fromName(h.referenceValue),t.key):s=zo(h,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function t_(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Ir(r.position[t],e.position[t]))return!1;return!0}class ml{constructor(e,t="asc"){this.field=e,this.dir=t}}function hC(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class cw{}class At extends cw{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new fC(e,t,s):t==="array-contains"?new gC(e,s):t==="in"?new yC(e,s):t==="not-in"?new _C(e,s):t==="array-contains-any"?new vC(e,s):new At(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new pC(e,s):new mC(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(zo(t,this.value)):t!==null&&Qs(this.value)===Qs(t)&&this.matchesComparison(zo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xn extends cw{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Xn(e,t)}matches(e){return hw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function hw(r){return r.op==="and"}function dw(r){return dC(r)&&hw(r)}function dC(r){for(const e of r.filters)if(e instanceof Xn)return!1;return!0}function gf(r){if(r instanceof At)return r.field.canonicalString()+r.op.toString()+qo(r.value);if(dw(r))return r.filters.map((e=>gf(e))).join(",");{const e=r.filters.map((t=>gf(t))).join(",");return`${r.op}(${e})`}}function fw(r,e){return r instanceof At?(function(s,o){return o instanceof At&&s.op===o.op&&s.field.isEqual(o.field)&&Ir(s.value,o.value)})(r,e):r instanceof Xn?(function(s,o){return o instanceof Xn&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((l,h,f)=>l&&fw(h,o.filters[f])),!0):!1})(r,e):void Te(19439)}function pw(r){return r instanceof At?(function(t){return`${t.field.canonicalString()} ${t.op} ${qo(t.value)}`})(r):r instanceof Xn?(function(t){return t.op.toString()+" {"+t.getFilters().map(pw).join(" ,")+"}"})(r):"Filter"}class fC extends At{constructor(e,t,s){super(e,t,s),this.key=Ee.fromName(s.referenceValue)}matches(e){const t=Ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class pC extends At{constructor(e,t){super(e,"in",t),this.keys=mw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class mC extends At{constructor(e,t){super(e,"not-in",t),this.keys=mw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function mw(r,e){return(e.arrayValue?.values||[]).map((t=>Ee.fromName(t.referenceValue)))}class gC extends At{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Xf(t)&&pl(t.arrayValue,this.value)}}class yC extends At{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&pl(this.value.arrayValue,t)}}class _C extends At{constructor(e,t){super(e,"not-in",t)}matches(e){if(pl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!pl(this.value.arrayValue,t)}}class vC extends At{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Xf(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>pl(this.value.arrayValue,s)))}}class wC{constructor(e,t=null,s=[],o=[],l=null,h=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=h,this.endAt=f,this.Te=null}}function n_(r,e=null,t=[],s=[],o=null,l=null,h=null){return new wC(r,e,t,s,o,l,h)}function Yf(r){const e=Ne(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>gf(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),Rl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>qo(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>qo(s))).join(",")),e.Te=t}return e.Te}function Jf(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!hC(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!fw(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!t_(r.startAt,e.startAt)&&t_(r.endAt,e.endAt)}function yf(r){return Ee.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}class ea{constructor(e,t=null,s=[],o=[],l=null,h="F",f=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=h,this.startAt=f,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function EC(r,e,t,s,o,l,h,f){return new ea(r,e,t,s,o,l,h,f)}function Gc(r){return new ea(r)}function r_(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function gw(r){return r.collectionGroup!==null}function rl(r){const e=Ne(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let f=new xt(Bt.comparator);return h.filters.forEach((p=>{p.getFlattenedFilters().forEach((y=>{y.isInequality()&&(f=f.add(y.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new ml(l,s))})),t.has(Bt.keyField().canonicalString())||e.Ie.push(new ml(Bt.keyField(),s))}return e.Ie}function _r(r){const e=Ne(r);return e.Ee||(e.Ee=TC(e,rl(r))),e.Ee}function TC(r,e){if(r.limitType==="F")return n_(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new ml(o.field,l)}));const t=r.endAt?new Cc(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Cc(r.startAt.position,r.startAt.inclusive):null;return n_(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function _f(r,e){const t=r.filters.concat([e]);return new ea(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Rc(r,e,t){return new ea(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Kc(r,e){return Jf(_r(r),_r(e))&&r.limitType===e.limitType}function yw(r){return`${Yf(_r(r))}|lt:${r.limitType}`}function xo(r){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>pw(o))).join(", ")}]`),Rl(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>qo(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>qo(o))).join(",")),`Target(${s})`})(_r(r))}; limitType=${r.limitType})`}function Qc(r,e){return e.isFoundDocument()&&(function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):Ee.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(r,e)&&(function(s,o){for(const l of rl(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0})(r,e)&&(function(s,o){return!(s.startAt&&!(function(h,f,p){const y=e_(h,f,p);return h.inclusive?y<=0:y<0})(s.startAt,rl(s),o)||s.endAt&&!(function(h,f,p){const y=e_(h,f,p);return h.inclusive?y>=0:y>0})(s.endAt,rl(s),o))})(r,e)}function IC(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function _w(r){return(e,t)=>{let s=!1;for(const o of rl(r)){const l=SC(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function SC(r,e,t){const s=r.field.isKeyField()?Ee.comparator(e.key,t.key):(function(l,h,f){const p=h.data.field(l),y=f.data.field(l);return p!==null&&y!==null?zo(p,y):Te(42886)})(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Te(19790,{direction:r.dir})}}class Bi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ti(this.inner,((t,s)=>{for(const[o,l]of s)e(o,l)}))}isEmpty(){return tw(this.inner)}size(){return this.innerSize}}const AC=new ut(Ee.comparator);function Yr(){return AC}const vw=new ut(Ee.comparator);function Ja(...r){let e=vw;for(const t of r)e=e.insert(t.key,t);return e}function ww(r){let e=vw;return r.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function bi(){return sl()}function Ew(){return sl()}function sl(){return new Bi((r=>r.toString()),((r,e)=>r.isEqual(e)))}const CC=new ut(Ee.comparator),RC=new xt(Ee.comparator);function ze(...r){let e=RC;for(const t of r)e=e.add(t);return e}const PC=new xt(Be);function kC(){return PC}function Zf(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ic(e)?"-0":e}}function Tw(r){return{integerValue:""+r}}function xC(r,e){return rC(e)?Tw(e):Zf(r,e)}class Xc{constructor(){this._=void 0}}function NC(r,e,t){return r instanceof gl?(function(o,l){const h={fields:{[sw]:{stringValue:rw},[ow]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Qf(l)&&(l=Hc(l)),l&&(h.fields[iw]=l),{mapValue:h}})(t,e):r instanceof yl?Sw(r,e):r instanceof _l?Aw(r,e):(function(o,l){const h=Iw(o,l),f=s_(h)+s_(o.Ae);return mf(h)&&mf(o.Ae)?Tw(f):Zf(o.serializer,f)})(r,e)}function bC(r,e,t){return r instanceof yl?Sw(r,e):r instanceof _l?Aw(r,e):t}function Iw(r,e){return r instanceof Pc?(function(s){return mf(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class gl extends Xc{}class yl extends Xc{constructor(e){super(),this.elements=e}}function Sw(r,e){const t=Cw(e);for(const s of r.elements)t.some((o=>Ir(o,s)))||t.push(s);return{arrayValue:{values:t}}}class _l extends Xc{constructor(e){super(),this.elements=e}}function Aw(r,e){let t=Cw(e);for(const s of r.elements)t=t.filter((o=>!Ir(o,s)));return{arrayValue:{values:t}}}class Pc extends Xc{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function s_(r){return yt(r.integerValue||r.doubleValue)}function Cw(r){return Xf(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class DC{constructor(e,t){this.field=e,this.transform=t}}function VC(r,e){return r.field.isEqual(e.field)&&(function(s,o){return s instanceof yl&&o instanceof yl||s instanceof _l&&o instanceof _l?Bo(s.elements,o.elements,Ir):s instanceof Pc&&o instanceof Pc?Ir(s.Ae,o.Ae):s instanceof gl&&o instanceof gl})(r.transform,e.transform)}class OC{constructor(e,t){this.version=e,this.transformResults=t}}class zt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new zt}static exists(e){return new zt(void 0,e)}static updateTime(e){return new zt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function hc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Yc{}function Rw(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Jc(r.key,zt.none()):new Pl(r.key,r.data,zt.none());{const t=r.data,s=tn.empty();let o=new xt(Bt.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?s.delete(l):s.set(l,h),o=o.add(l)}return new ni(r.key,s,new En(o.toArray()),zt.none())}}function MC(r,e,t){r instanceof Pl?(function(o,l,h){const f=o.value.clone(),p=o_(o.fieldTransforms,l,h.transformResults);f.setAll(p),l.convertToFoundDocument(h.version,f).setHasCommittedMutations()})(r,e,t):r instanceof ni?(function(o,l,h){if(!hc(o.precondition,l))return void l.convertToUnknownDocument(h.version);const f=o_(o.fieldTransforms,l,h.transformResults),p=l.data;p.setAll(Pw(o)),p.setAll(f),l.convertToFoundDocument(h.version,p).setHasCommittedMutations()})(r,e,t):(function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function il(r,e,t,s){return r instanceof Pl?(function(l,h,f,p){if(!hc(l.precondition,h))return f;const y=l.value.clone(),v=a_(l.fieldTransforms,p,h);return y.setAll(v),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null})(r,e,t,s):r instanceof ni?(function(l,h,f,p){if(!hc(l.precondition,h))return f;const y=a_(l.fieldTransforms,p,h),v=h.data;return v.setAll(Pw(l)),v.setAll(y),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((T=>T.field)))})(r,e,t,s):(function(l,h,f){return hc(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):f})(r,e,t)}function jC(r,e){let t=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),l=Iw(s.transform,o||null);l!=null&&(t===null&&(t=tn.empty()),t.set(s.field,l))}return t||null}function i_(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Bo(s,o,((l,h)=>VC(l,h)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Pl extends Yc{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ni extends Yc{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Pw(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}})),e}function o_(r,e,t){const s=new Map;We(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let o=0;o<t.length;o++){const l=r[o],h=l.transform,f=e.data.field(l.field);s.set(l.field,bC(h,f,t[o]))}return s}function a_(r,e,t){const s=new Map;for(const o of r){const l=o.transform,h=t.data.field(o.field);s.set(o.field,NC(l,h,e))}return s}class Jc extends Yc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class kw extends Yc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class LC{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&MC(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=il(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=il(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=Ew();return this.mutations.forEach((o=>{const l=e.get(o.key),h=l.overlayedDocument;let f=this.applyToLocalView(h,l.mutatedFields);f=t.has(o.key)?null:f;const p=Rw(h,f);p!==null&&s.set(o.key,p),h.isValidDocument()||h.convertToNoDocument(Re.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ze())}isEqual(e){return this.batchId===e.batchId&&Bo(this.mutations,e.mutations,((t,s)=>i_(t,s)))&&Bo(this.baseMutations,e.baseMutations,((t,s)=>i_(t,s)))}}class ep{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){We(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return CC})();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,s[h].version);return new ep(e,t,s,o)}}class FC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class UC{constructor(e,t){this.count=e,this.unchangedNames=t}}var St,$e;function xw(r){switch(r){case W.OK:return Te(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return Te(15467,{code:r})}}function Nw(r){if(r===void 0)return Xr("GRPC error has no .code"),W.UNKNOWN;switch(r){case St.OK:return W.OK;case St.CANCELLED:return W.CANCELLED;case St.UNKNOWN:return W.UNKNOWN;case St.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case St.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case St.INTERNAL:return W.INTERNAL;case St.UNAVAILABLE:return W.UNAVAILABLE;case St.UNAUTHENTICATED:return W.UNAUTHENTICATED;case St.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case St.NOT_FOUND:return W.NOT_FOUND;case St.ALREADY_EXISTS:return W.ALREADY_EXISTS;case St.PERMISSION_DENIED:return W.PERMISSION_DENIED;case St.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case St.ABORTED:return W.ABORTED;case St.OUT_OF_RANGE:return W.OUT_OF_RANGE;case St.UNIMPLEMENTED:return W.UNIMPLEMENTED;case St.DATA_LOSS:return W.DATA_LOSS;default:return Te(39323,{code:r})}}($e=St||(St={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";function BC(){return new TextEncoder}const zC=new qs([4294967295,4294967295],0);function l_(r){const e=BC().encode(r),t=new $v;return t.update(e),new Uint8Array(t.digest())}function u_(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new qs([t,s],0),new qs([o,l],0)]}class tp{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Za(`Invalid padding: ${t}`);if(s<0)throw new Za(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Za(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Za(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=qs.fromNumber(this.ge)}ye(e,t,s){let o=e.add(t.multiply(qs.fromNumber(s)));return o.compare(zC)===1&&(o=new qs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=l_(e),[s,o]=u_(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(s,o,l);if(!this.we(h))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new tp(l,o,t);return s.forEach((f=>h.insert(f))),h}insert(e){if(this.ge===0)return;const t=l_(e),[s,o]=u_(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(s,o,l);this.Se(h)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Za extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Zc{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,kl.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Zc(Re.min(),o,new ut(Be),Yr(),ze())}}class kl{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new kl(s,t,ze(),ze(),ze())}}class dc{constructor(e,t,s,o){this.be=e,this.removedTargetIds=t,this.key=s,this.De=o}}class bw{constructor(e,t){this.targetId=e,this.Ce=t}}class Dw{constructor(e,t,s=$t.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class c_{constructor(){this.ve=0,this.Fe=h_(),this.Me=$t.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ze(),t=ze(),s=ze();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:Te(38017,{changeType:l})}})),new kl(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=h_()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,We(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class qC{constructor(e){this.Ge=e,this.ze=new Map,this.je=Yr(),this.Je=ec(),this.He=ec(),this.Ye=new ut(Be)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Te(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,s=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(yf(l))if(s===0){const h=new Ee(l.path);this.et(t,h,Ot.newNoDocument(h,Re.min()))}else We(s===1,20013,{expectedCount:s});else{const h=this._t(t);if(h!==s){const f=this.ut(e),p=f?this.ct(f,e,h):1;if(p!==0){this.it(t);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let h,f;try{h=Ks(s).toUint8Array()}catch(p){if(p instanceof nw)return Uo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{f=new tp(h,o,l)}catch(p){return Uo(p instanceof Za?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return f.ge===0?null:f}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let o=0;return s.forEach((l=>{const h=this.Ge.ht(),f=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,h)=>{const f=this.ot(h);if(f){if(l.current&&yf(f.target)){const p=new Ee(f.target.path);this.It(p).has(h)||this.Et(h,p)||this.et(h,p,Ot.newNoDocument(p,e))}l.Be&&(t.set(h,l.ke()),l.qe())}}));let s=ze();this.He.forEach(((l,h)=>{let f=!0;h.forEachWhile((p=>{const y=this.ot(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(s=s.add(l))})),this.je.forEach(((l,h)=>h.setReadTime(e)));const o=new Zc(e,t,this.Ye,this.je,s);return this.je=Yr(),this.Je=ec(),this.He=ec(),this.Ye=new ut(Be),o}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new c_,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new xt(Be),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new xt(Be),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||he("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new c_),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function ec(){return new ut(Ee.comparator)}function h_(){return new ut(Ee.comparator)}const $C={asc:"ASCENDING",desc:"DESCENDING"},WC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},HC={and:"AND",or:"OR"};class GC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function vf(r,e){return r.useProto3Json||Rl(e)?e:{value:e}}function kc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Vw(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function KC(r,e){return kc(r,e.toTimestamp())}function Tn(r){return We(!!r,49232),Re.fromTimestamp((function(t){const s=Gs(t);return new it(s.seconds,s.nanos)})(r))}function np(r,e){return wf(r,e).canonicalString()}function wf(r,e){const t=(function(o){return new Ze(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function Ow(r){const e=Ze.fromString(r);return We(Bw(e),10190,{key:e.toString()}),e}function xc(r,e){return np(r.databaseId,e.path)}function ol(r,e){const t=Ow(e);if(t.get(1)!==r.databaseId.projectId)throw new oe(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new oe(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Ee(jw(t))}function Mw(r,e){return np(r.databaseId,e)}function QC(r){const e=Ow(r);return e.length===4?Ze.emptyPath():jw(e)}function Ef(r){return new Ze(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function jw(r){return We(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function d_(r,e,t){return{name:xc(r,e),fields:t.value.mapValue.fields}}function XC(r,e){return"found"in e?(function(s,o){We(!!o.found,43571),o.found.name,o.found.updateTime;const l=ol(s,o.found.name),h=Tn(o.found.updateTime),f=o.found.createTime?Tn(o.found.createTime):Re.min(),p=new tn({mapValue:{fields:o.found.fields}});return Ot.newFoundDocument(l,h,f,p)})(r,e):"missing"in e?(function(s,o){We(!!o.missing,3894),We(!!o.readTime,22933);const l=ol(s,o.missing),h=Tn(o.readTime);return Ot.newNoDocument(l,h)})(r,e):Te(7234,{result:e})}function YC(r,e){let t;if("targetChange"in e){e.targetChange;const s=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Te(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(y,v){return y.useProto3Json?(We(v===void 0||typeof v=="string",58123),$t.fromBase64String(v||"")):(We(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),$t.fromUint8Array(v||new Uint8Array))})(r,e.targetChange.resumeToken),h=e.targetChange.cause,f=h&&(function(y){const v=y.code===void 0?W.UNKNOWN:Nw(y.code);return new oe(v,y.message||"")})(h);t=new Dw(s,o,l,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=ol(r,s.document.name),l=Tn(s.document.updateTime),h=s.document.createTime?Tn(s.document.createTime):Re.min(),f=new tn({mapValue:{fields:s.document.fields}}),p=Ot.newFoundDocument(o,l,h,f),y=s.targetIds||[],v=s.removedTargetIds||[];t=new dc(y,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=ol(r,s.document),l=s.readTime?Tn(s.readTime):Re.min(),h=Ot.newNoDocument(o,l),f=s.removedTargetIds||[];t=new dc([],f,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=ol(r,s.document),l=s.removedTargetIds||[];t=new dc([],l,o,null)}else{if(!("filter"in e))return Te(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,h=new UC(o,l),f=s.targetId;t=new bw(f,h)}}return t}function Lw(r,e){let t;if(e instanceof Pl)t={update:d_(r,e.key,e.value)};else if(e instanceof Jc)t={delete:xc(r,e.key)};else if(e instanceof ni)t={update:d_(r,e.key,e.data),updateMask:oR(e.fieldMask)};else{if(!(e instanceof kw))return Te(16599,{Vt:e.type});t={verify:xc(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,h){const f=h.transform;if(f instanceof gl)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof yl)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof _l)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Pc)return{fieldPath:h.field.canonicalString(),increment:f.Ae};throw Te(20930,{transform:h.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:KC(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Te(27497)})(r,e.precondition)),t}function JC(r,e){return r&&r.length>0?(We(e!==void 0,14353),r.map((t=>(function(o,l){let h=o.updateTime?Tn(o.updateTime):Tn(l);return h.isEqual(Re.min())&&(h=Tn(l)),new OC(h,o.transformResults||[])})(t,e)))):[]}function ZC(r,e){return{documents:[Mw(r,e.path)]}}function eR(r,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=Mw(r,o);const l=(function(y){if(y.length!==0)return Uw(Xn.create(y,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const h=(function(y){if(y.length!==0)return y.map((v=>(function(C){return{field:No(C.field),direction:rR(C.dir)}})(v)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const f=vf(r,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:o}}function tR(r){let e=QC(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){We(s===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(T){const C=Fw(T);return C instanceof Xn&&dw(C)?C.getFilters():[C]})(t.where));let h=[];t.orderBy&&(h=(function(T){return T.map((C=>(function($){return new ml(bo($.field),(function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})($.direction))})(C)))})(t.orderBy));let f=null;t.limit&&(f=(function(T){let C;return C=typeof T=="object"?T.value:T,Rl(C)?null:C})(t.limit));let p=null;t.startAt&&(p=(function(T){const C=!!T.before,O=T.values||[];return new Cc(O,C)})(t.startAt));let y=null;return t.endAt&&(y=(function(T){const C=!T.before,O=T.values||[];return new Cc(O,C)})(t.endAt)),EC(e,o,h,l,f,"F",p,y)}function nR(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Fw(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=bo(t.unaryFilter.field);return At.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=bo(t.unaryFilter.field);return At.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=bo(t.unaryFilter.field);return At.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=bo(t.unaryFilter.field);return At.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Te(61313);default:return Te(60726)}})(r):r.fieldFilter!==void 0?(function(t){return At.create(bo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Te(58110);default:return Te(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return Xn.create(t.compositeFilter.filters.map((s=>Fw(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Te(1026)}})(t.compositeFilter.op))})(r):Te(30097,{filter:r})}function rR(r){return $C[r]}function sR(r){return WC[r]}function iR(r){return HC[r]}function No(r){return{fieldPath:r.canonicalString()}}function bo(r){return Bt.fromServerFormat(r.fieldPath)}function Uw(r){return r instanceof At?(function(t){if(t.op==="=="){if(Zy(t.value))return{unaryFilter:{field:No(t.field),op:"IS_NAN"}};if(Jy(t.value))return{unaryFilter:{field:No(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Zy(t.value))return{unaryFilter:{field:No(t.field),op:"IS_NOT_NAN"}};if(Jy(t.value))return{unaryFilter:{field:No(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:No(t.field),op:sR(t.op),value:t.value}}})(r):r instanceof Xn?(function(t){const s=t.getFilters().map((o=>Uw(o)));return s.length===1?s[0]:{compositeFilter:{op:iR(t.op),filters:s}}})(r):Te(54877,{filter:r})}function oR(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Bw(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}class js{constructor(e,t,s,o,l=Re.min(),h=Re.min(),f=$t.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=f,this.expectedCount=p}withSequenceNumber(e){return new js(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new js(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new js(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new js(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class aR{constructor(e){this.yt=e}}function lR(r){const e=tR({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Rc(e,e.limit,"L"):e}class uR{constructor(){this.Cn=new cR}addToCollectionParentIndex(e,t){return this.Cn.add(t),X.resolve()}getCollectionParents(e,t){return X.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return X.resolve()}deleteFieldIndex(e,t){return X.resolve()}deleteAllFieldIndexes(e){return X.resolve()}createTargetIndexes(e,t){return X.resolve()}getDocumentsMatchingTarget(e,t){return X.resolve(null)}getIndexType(e,t){return X.resolve(0)}getFieldIndexes(e,t){return X.resolve([])}getNextCollectionGroupToUpdate(e){return X.resolve(null)}getMinOffset(e,t){return X.resolve(Hs.min())}getMinOffsetFromCollectionGroup(e,t){return X.resolve(Hs.min())}updateCollectionGroup(e,t,s){return X.resolve()}updateIndexEntries(e,t){return X.resolve()}}class cR{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new xt(Ze.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new xt(Ze.comparator)).toArray()}}const f_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},zw=41943040;class cn{static withCacheSize(e){return new cn(e,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}cn.DEFAULT_COLLECTION_PERCENTILE=10,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cn.DEFAULT=new cn(zw,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cn.DISABLED=new cn(-1,0,0);class $o{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new $o(0)}static cr(){return new $o(-1)}}const p_="LruGarbageCollector",hR=1048576;function m_([r,e],[t,s]){const o=Be(r,t);return o===0?Be(e,s):o}class dR{constructor(e){this.Ir=e,this.buffer=new xt(m_),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();m_(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class fR{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){he(p_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Zo(t)?he(p_,"Ignoring IndexedDB error during garbage collection: ",t):await Jo(t)}await this.Vr(3e5)}))}}class pR{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return X.resolve(Wc.ce);const s=new dR(t);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),X.resolve(f_)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),f_):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,o,l,h,f,p,y;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,h=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(s=T,f=Date.now(),this.removeTargets(e,s,t)))).next((T=>(l=T,p=Date.now(),this.removeOrphanedDocuments(e,s)))).next((T=>(y=Date.now(),ko()<=Ue.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-v}ms
	Determined least recently used ${o} in `+(f-h)+`ms
	Removed ${l} targets in `+(p-f)+`ms
	Removed ${T} documents in `+(y-p)+`ms
Total Duration: ${y-v}ms`),X.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:T}))))}}function mR(r,e){return new pR(r,e)}class gR{constructor(){this.changes=new Bi((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ot.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?X.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class yR{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class _R{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&il(s.mutation,o,En.empty(),it.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,ze()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=ze()){const o=bi();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((l=>{let h=Ja();return l.forEach(((f,p)=>{h=h.insert(f,p.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const s=bi();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,ze())))}populateOverlays(e,t,s){const o=[];return s.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((h,f)=>{t.set(h,f)}))}))}computeViews(e,t,s,o){let l=Yr();const h=sl(),f=(function(){return sl()})();return t.forEach(((p,y)=>{const v=s.get(y.key);o.has(y.key)&&(v===void 0||v.mutation instanceof ni)?l=l.insert(y.key,y):v!==void 0?(h.set(y.key,v.mutation.getFieldMask()),il(v.mutation,y,v.mutation.getFieldMask(),it.now())):h.set(y.key,En.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((y,v)=>h.set(y,v))),t.forEach(((y,v)=>f.set(y,new yR(v,h.get(y)??null)))),f)))}recalculateAndSaveOverlays(e,t){const s=sl();let o=new ut(((h,f)=>h-f)),l=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const f of h)f.keys().forEach((p=>{const y=t.get(p);if(y===null)return;let v=s.get(p)||En.empty();v=f.applyToLocalView(y,v),s.set(p,v);const T=(o.get(f.batchId)||ze()).add(p);o=o.insert(f.batchId,T)}))})).next((()=>{const h=[],f=o.getReverseIterator();for(;f.hasNext();){const p=f.getNext(),y=p.key,v=p.value,T=Ew();v.forEach((C=>{if(!l.has(C)){const O=Rw(t.get(C),s.get(C));O!==null&&T.set(C,O),l=l.add(C)}})),h.push(this.documentOverlayCache.saveOverlays(e,y,T))}return X.waitFor(h)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return(function(h){return Ee.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):gw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):X.resolve(bi());let f=hl,p=l;return h.next((y=>X.forEach(y,((v,T)=>(f<T.largestBatchId&&(f=T.largestBatchId),l.get(v)?X.resolve():this.remoteDocumentCache.getEntry(e,v).next((C=>{p=p.insert(v,C)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,p,y,ze()))).next((v=>({batchId:f,changes:ww(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ee(t)).next((s=>{let o=Ja();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let h=Ja();return this.indexManager.getCollectionParents(e,l).next((f=>X.forEach(f,(p=>{const y=(function(T,C){return new ea(C,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,s,o).next((v=>{v.forEach(((T,C)=>{h=h.insert(T,C)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o)))).next((h=>{l.forEach(((p,y)=>{const v=y.getKey();h.get(v)===null&&(h=h.insert(v,Ot.newInvalidDocument(v)))}));let f=Ja();return h.forEach(((p,y)=>{const v=l.get(p);v!==void 0&&il(v.mutation,y,En.empty(),it.now()),Qc(t,y)&&(f=f.insert(p,y))})),f}))}}class vR{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return X.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Tn(o.createTime)}})(t)),X.resolve()}getNamedQuery(e,t){return X.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:lR(o.bundledQuery),readTime:Tn(o.readTime)}})(t)),X.resolve()}}class wR{constructor(){this.overlays=new ut(Ee.comparator),this.qr=new Map}getOverlay(e,t){return X.resolve(this.overlays.get(t))}getOverlays(e,t){const s=bi();return X.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&s.set(o,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,l)=>{this.St(e,t,l)})),X.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),X.resolve()}getOverlaysForCollection(e,t,s){const o=bi(),l=t.length+1,h=new Ee(t.child("")),f=this.overlays.getIteratorFrom(h);for(;f.hasNext();){const p=f.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&p.largestBatchId>s&&o.set(p.getKey(),p)}return X.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new ut(((y,v)=>y-v));const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>s){let v=l.get(y.largestBatchId);v===null&&(v=bi(),l=l.insert(y.largestBatchId,v)),v.set(y.getKey(),y)}}const f=bi(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((y,v)=>f.set(y,v))),!(f.size()>=o)););return X.resolve(f)}St(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new FC(t,s));let l=this.qr.get(t);l===void 0&&(l=ze(),this.qr.set(t,l)),this.qr.set(t,l.add(s.key))}}class ER{constructor(){this.sessionToken=$t.EMPTY_BYTE_STRING}getSessionToken(e){return X.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,X.resolve()}}class rp{constructor(){this.Qr=new xt(Vt.$r),this.Ur=new xt(Vt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new Vt(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new Vt(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new Ee(new Ze([])),s=new Vt(t,e),o=new Vt(t,e+1),l=[];return this.Ur.forEachInRange([s,o],(h=>{this.Gr(h),l.push(h.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ee(new Ze([])),s=new Vt(t,e),o=new Vt(t,e+1);let l=ze();return this.Ur.forEachInRange([s,o],(h=>{l=l.add(h.key)})),l}containsKey(e){const t=new Vt(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Vt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ee.comparator(e.key,t.key)||Be(e.Yr,t.Yr)}static Kr(e,t){return Be(e.Yr,t.Yr)||Ee.comparator(e.key,t.key)}}class TR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new xt(Vt.$r)}checkEmpty(e){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new LC(l,t,s,o);this.mutationQueue.push(h);for(const f of o)this.Zr=this.Zr.add(new Vt(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return X.resolve(h)}lookupMutationBatch(e,t){return X.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.ei(s),l=o<0?0:o;return X.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?Kf:this.tr-1)}getAllMutationBatches(e){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Vt(t,0),o=new Vt(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,o],(h=>{const f=this.Xr(h.Yr);l.push(f)})),X.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new xt(Be);return t.forEach((o=>{const l=new Vt(o,0),h=new Vt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,h],(f=>{s=s.add(f.Yr)}))})),X.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;Ee.isDocumentKey(l)||(l=l.child(""));const h=new Vt(new Ee(l),0);let f=new xt(Be);return this.Zr.forEachWhile((p=>{const y=p.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(f=f.add(p.Yr)),!0)}),h),X.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){We(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return X.forEach(t.mutations,(o=>{const l=new Vt(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new Vt(t,0),o=this.Zr.firstAfterOrEqual(s);return X.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,X.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class IR{constructor(e){this.ri=e,this.docs=(function(){return new ut(Ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,h=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return X.resolve(s?s.document.mutableCopy():Ot.newInvalidDocument(t))}getEntries(e,t){let s=Yr();return t.forEach((o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():Ot.newInvalidDocument(o))})),X.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=Yr();const h=t.path,f=new Ee(h.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(f);for(;p.hasNext();){const{key:y,value:{document:v}}=p.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||ZA(JA(v),s)<=0||(o.has(v.key)||Qc(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return X.resolve(l)}getAllFromCollectionGroup(e,t,s,o){Te(9500)}ii(e,t){return X.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new SR(this)}getSize(e){return X.resolve(this.size)}}class SR extends gR{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),X.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class AR{constructor(e){this.persistence=e,this.si=new Bi((t=>Yf(t)),Jf),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.oi=0,this._i=new rp,this.targetCount=0,this.ai=$o.ur()}forEachTarget(e,t){return this.si.forEach(((s,o)=>t(o))),X.resolve()}getLastRemoteSnapshotVersion(e){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return X.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),X.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new $o(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,X.resolve()}updateTargetData(e,t){return this.Pr(t),X.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,X.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.si.forEach(((h,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.si.delete(h),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)})),X.waitFor(l).next((()=>o))}getTargetCount(e){return X.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return X.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),X.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((h=>{l.push(o.markPotentiallyOrphaned(e,h))})),X.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),X.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return X.resolve(s)}containsKey(e,t){return X.resolve(this._i.containsKey(t))}}class qw{constructor(e,t){this.ui={},this.overlays={},this.ci=new Wc(0),this.li=!1,this.li=!0,this.hi=new ER,this.referenceDelegate=e(this),this.Pi=new AR(this),this.indexManager=new uR,this.remoteDocumentCache=(function(o){return new IR(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new aR(t),this.Ii=new vR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new wR,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new TR(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){he("MemoryPersistence","Starting transaction:",e);const o=new CR(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ai(e,t){return X.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class CR extends tC{constructor(e){super(),this.currentSequenceNumber=e}}class sp{constructor(e){this.persistence=e,this.Ri=new rp,this.Vi=null}static mi(e){return new sp(e)}get fi(){if(this.Vi)return this.Vi;throw Te(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),X.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),X.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),X.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.fi,(s=>{const o=Ee.fromPath(s);return this.gi(e,o).next((l=>{l||t.removeEntry(o,Re.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return X.or([()=>X.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Nc{constructor(e,t){this.persistence=e,this.pi=new Bi((s=>sC(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=mR(this,t)}static mi(e,t){return new Nc(e,t)}Ei(){}di(e){return X.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return X.forEach(this.pi,((s,o)=>this.br(e,s,o).next((l=>l?X.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,(h=>this.br(e,h,t).next((f=>{f||(s++,l.removeEntry(h,Re.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),X.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),X.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),X.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),X.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=uc(e.data.value)),t}br(e,t,s){return X.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return X.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class ip{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=o}static As(e,t){let s=ze(),o=ze();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new ip(e,t.fromCache,s,o)}}class RR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class PR{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return wI()?8:nC(Jt())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.ys(e,t).next((h=>{l.result=h})).next((()=>{if(!l.result)return this.ws(e,t,o,s).next((h=>{l.result=h}))})).next((()=>{if(l.result)return;const h=new RR;return this.Ss(e,t,h).next((f=>{if(l.result=f,this.Vs)return this.bs(e,t,h,f.size)}))})).next((()=>l.result))}bs(e,t,s,o){return s.documentReadCount<this.fs?(ko()<=Ue.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",xo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),X.resolve()):(ko()<=Ue.DEBUG&&he("QueryEngine","Query:",xo(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(ko()<=Ue.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",xo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_r(t))):X.resolve())}ys(e,t){if(r_(t))return X.resolve(null);let s=_r(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Rc(t,null,"F"),s=_r(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const h=ze(...l);return this.ps.getDocuments(e,h).next((f=>this.indexManager.getMinOffset(e,s).next((p=>{const y=this.Ds(t,f);return this.Cs(t,y,h,p.readTime)?this.ys(e,Rc(t,null,"F")):this.vs(e,y,t,p)}))))})))))}ws(e,t,s,o){return r_(t)||o.isEqual(Re.min())?X.resolve(null):this.ps.getDocuments(e,s).next((l=>{const h=this.Ds(t,l);return this.Cs(t,h,s,o)?X.resolve(null):(ko()<=Ue.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),xo(t)),this.vs(e,h,t,YA(o,hl)).next((f=>f)))}))}Ds(e,t){let s=new xt(_w(e));return t.forEach(((o,l)=>{Qc(e,l)&&(s=s.add(l))})),s}Cs(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,s){return ko()<=Ue.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",xo(t)),this.ps.getDocumentsMatchingQuery(e,t,Hs.min(),s)}vs(e,t,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((l=>(t.forEach((h=>{l=l.insert(h.key,h)})),l)))}}const op="LocalStore",kR=3e8;class xR{constructor(e,t,s,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new ut(Be),this.xs=new Bi((l=>Yf(l)),Jf),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _R(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function NR(r,e,t,s){return new xR(r,e,t,s)}async function $w(r,e){const t=Ne(r);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((l=>(o=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const h=[],f=[];let p=ze();for(const y of o){h.push(y.batchId);for(const v of y.mutations)p=p.add(v.key)}for(const y of l){f.push(y.batchId);for(const v of y.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(s,p).next((y=>({Ls:y,removedBatchIds:h,addedBatchIds:f})))}))}))}function bR(r,e){const t=Ne(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,p,y,v){const T=y.batch,C=T.keys();let O=X.resolve();return C.forEach(($=>{O=O.next((()=>v.getEntry(p,$))).next((z=>{const D=y.docVersions.get($);We(D!==null,48541),z.version.compareTo(D)<0&&(T.applyToRemoteDocument(z,y),z.isValidDocument()&&(z.setReadTime(y.commitVersion),v.addEntry(z)))}))})),O.next((()=>f.mutationQueue.removeMutationBatch(p,T)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(f){let p=ze();for(let y=0;y<f.mutationResults.length;++y)f.mutationResults[y].transformResults.length>0&&(p=p.add(f.batch.mutations[y].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function Ww(r){const e=Ne(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function DR(r,e){const t=Ne(r),s=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const h=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const f=[];e.targetChanges.forEach(((v,T)=>{const C=o.get(T);if(!C)return;f.push(t.Pi.removeMatchingKeys(l,v.removedDocuments,T).next((()=>t.Pi.addMatchingKeys(l,v.addedDocuments,T))));let O=C.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?O=O.withResumeToken($t.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):v.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(v.resumeToken,s)),o=o.insert(T,O),(function(z,D,Z){return z.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=kR?!0:Z.addedDocuments.size+Z.modifiedDocuments.size+Z.removedDocuments.size>0})(C,O,v)&&f.push(t.Pi.updateTargetData(l,O))}));let p=Yr(),y=ze();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),f.push(VR(l,h,e.documentUpdates).next((v=>{p=v.ks,y=v.qs}))),!s.isEqual(Re.min())){const v=t.Pi.getLastRemoteSnapshotVersion(l).next((T=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));f.push(v)}return X.waitFor(f).next((()=>h.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,y))).next((()=>p))})).then((l=>(t.Ms=o,l)))}function VR(r,e,t){let s=ze(),o=ze();return t.forEach((l=>s=s.add(l))),e.getEntries(r,s).next((l=>{let h=Yr();return t.forEach(((f,p)=>{const y=l.get(f);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(f)),p.isNoDocument()&&p.version.isEqual(Re.min())?(e.removeEntry(f,p.readTime),h=h.insert(f,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),h=h.insert(f,p)):he(op,"Ignoring outdated watch update for ",f,". Current version:",y.version," Watch version:",p.version)})),{ks:h,qs:o}}))}function OR(r,e){const t=Ne(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Kf),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function MR(r,e){const t=Ne(r);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.Pi.getTargetData(s,e).next((l=>l?(o=l,X.resolve(o)):t.Pi.allocateTargetId(s).next((h=>(o=new js(e,h,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function Tf(r,e,t){const s=Ne(r),o=s.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(h=>s.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!Zo(h))throw h;he(op,`Failed to update sequence numbers for target ${e}: ${h}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function g_(r,e,t){const s=Ne(r);let o=Re.min(),l=ze();return s.persistence.runTransaction("Execute query","readwrite",(h=>(function(p,y,v){const T=Ne(p),C=T.xs.get(v);return C!==void 0?X.resolve(T.Ms.get(C)):T.Pi.getTargetData(y,v)})(s,h,_r(e)).next((f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(h,f.targetId).next((p=>{l=p}))})).next((()=>s.Fs.getDocumentsMatchingQuery(h,e,t?o:Re.min(),t?l:ze()))).next((f=>(jR(s,IC(e),f),{documents:f,Qs:l})))))}function jR(r,e,t){let s=r.Os.get(e)||Re.min();t.forEach(((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),r.Os.set(e,s)}class y_{constructor(){this.activeTargetIds=kC()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class LR{constructor(){this.Mo=new y_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new y_,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class FR{Oo(e){}shutdown(){}}const __="ConnectivityMonitor";class v_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){he(__,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){he(__,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let tc=null;function If(){return tc===null?tc=(function(){return 268435456+Math.round(2147483648*Math.random())})():tc++,"0x"+tc.toString(16)}const Gd="RestConnection",UR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class BR{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===Sc?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,t,s,o,l){const h=If(),f=this.zo(e,t.toUriEncodedString());he(Gd,`Sending RPC '${e}' ${h}:`,f,s);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,l);const{host:y}=new URL(f),v=Ko(y);return this.Jo(e,f,p,s,v).then((T=>(he(Gd,`Received RPC '${e}' ${h}: `,T),T)),(T=>{throw Uo(Gd,`RPC '${e}' ${h} failed with error: `,T,"url: ",f,"request:",s),T}))}Ho(e,t,s,o,l,h){return this.Go(e,t,s,o,l)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Yo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),s&&s.headers.forEach(((o,l)=>e[l]=o))}zo(e,t){const s=UR[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}class zR{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Xt="WebChannelConnection";class qR extends BR{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,o,l){const h=If();return new Promise(((f,p)=>{const y=new Wv;y.setWithCredentials(!0),y.listenOnce(Hv.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case lc.NO_ERROR:const T=y.getResponseJson();he(Xt,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(T)),f(T);break;case lc.TIMEOUT:he(Xt,`RPC '${e}' ${h} timed out`),p(new oe(W.DEADLINE_EXCEEDED,"Request time out"));break;case lc.HTTP_ERROR:const C=y.getStatus();if(he(Xt,`RPC '${e}' ${h} failed with status:`,C,"response text:",y.getResponseText()),C>0){let O=y.getResponseJson();Array.isArray(O)&&(O=O[0]);const $=O?.error;if($&&$.status&&$.message){const z=(function(Z){const K=Z.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(K)>=0?K:W.UNKNOWN})($.status);p(new oe(z,$.message))}else p(new oe(W.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new oe(W.UNAVAILABLE,"Connection failed."));break;default:Te(9055,{l_:e,streamId:h,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{he(Xt,`RPC '${e}' ${h} completed.`)}}));const v=JSON.stringify(o);he(Xt,`RPC '${e}' ${h} sending request:`,o),y.send(t,"POST",v,s,15)}))}T_(e,t,s){const o=If(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=Qv(),f=Kv(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,t,s),p.encodeInitMessageHeaders=!0;const v=l.join("");he(Xt,`Creating RPC '${e}' stream ${o}: ${v}`,p);const T=h.createWebChannel(v,p);this.I_(T);let C=!1,O=!1;const $=new zR({Yo:D=>{O?he(Xt,`Not sending because RPC '${e}' stream ${o} is closed:`,D):(C||(he(Xt,`Opening RPC '${e}' stream ${o} transport.`),T.open(),C=!0),he(Xt,`RPC '${e}' stream ${o} sending:`,D),T.send(D))},Zo:()=>T.close()}),z=(D,Z,K)=>{D.listen(Z,(ae=>{try{K(ae)}catch(H){setTimeout((()=>{throw H}),0)}}))};return z(T,Ya.EventType.OPEN,(()=>{O||(he(Xt,`RPC '${e}' stream ${o} transport opened.`),$.o_())})),z(T,Ya.EventType.CLOSE,(()=>{O||(O=!0,he(Xt,`RPC '${e}' stream ${o} transport closed`),$.a_(),this.E_(T))})),z(T,Ya.EventType.ERROR,(D=>{O||(O=!0,Uo(Xt,`RPC '${e}' stream ${o} transport errored. Name:`,D.name,"Message:",D.message),$.a_(new oe(W.UNAVAILABLE,"The operation could not be completed")))})),z(T,Ya.EventType.MESSAGE,(D=>{if(!O){const Z=D.data[0];We(!!Z,16349);const K=Z,ae=K?.error||K[0]?.error;if(ae){he(Xt,`RPC '${e}' stream ${o} received error:`,ae);const H=ae.status;let J=(function(A){const P=St[A];if(P!==void 0)return Nw(P)})(H),re=ae.message;J===void 0&&(J=W.INTERNAL,re="Unknown error status: "+H+" with message "+ae.message),O=!0,$.a_(new oe(J,re)),T.close()}else he(Xt,`RPC '${e}' stream ${o} received:`,Z),$.u_(Z)}})),z(f,Gv.STAT_EVENT,(D=>{D.stat===df.PROXY?he(Xt,`RPC '${e}' stream ${o} detected buffering proxy`):D.stat===df.NOPROXY&&he(Xt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{$.__()}),0),$}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Kd(){return typeof document<"u"?document:null}function eh(r){return new GC(r,!0)}class ap{constructor(e,t,s=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-s);o>0&&he("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const w_="PersistentStream";class Hw{constructor(e,t,s,o,l,h,f,p){this.Mi=e,this.S_=s,this.b_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=f,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ap(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===W.RESOURCE_EXHAUSTED?(Xr(t.toString()),Xr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===t&&this.G_(s,o)}),(s=>{e((()=>{const o=new oe(W.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return he(w_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(he(w_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class $R extends Hw{constructor(e,t,s,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,h),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=YC(this.serializer,e),s=(function(l){if(!("targetChange"in l))return Re.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Re.min():h.readTime?Tn(h.readTime):Re.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=Ef(this.serializer),t.addTarget=(function(l,h){let f;const p=h.target;if(f=yf(p)?{documents:ZC(l,p)}:{query:eR(l,p).ft},f.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){f.resumeToken=Vw(l,h.resumeToken);const y=vf(l,h.expectedCount);y!==null&&(f.expectedCount=y)}else if(h.snapshotVersion.compareTo(Re.min())>0){f.readTime=kc(l,h.snapshotVersion.toTimestamp());const y=vf(l,h.expectedCount);y!==null&&(f.expectedCount=y)}return f})(this.serializer,e);const s=nR(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=Ef(this.serializer),t.removeTarget=e,this.q_(t)}}class WR extends Hw{constructor(e,t,s,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,h),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return We(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,We(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){We(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=JC(e.writeResults,e.commitTime),s=Tn(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Ef(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>Lw(this.serializer,s)))};this.q_(t)}}class HR{}class GR extends HR{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new oe(W.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Go(e,wf(t,s),o,l,h))).catch((l=>{throw l.name==="FirebaseError"?(l.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new oe(W.UNKNOWN,l.toString())}))}Ho(e,t,s,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,f])=>this.connection.Ho(e,wf(t,s),o,h,f,l))).catch((h=>{throw h.name==="FirebaseError"?(h.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new oe(W.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class KR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Xr(t),this.aa=!1):he("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Fi="RemoteStore";class QR{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((h=>{s.enqueueAndForget((async()=>{zi(this)&&(he(Fi,"Restarting streams for network reachability change."),await(async function(p){const y=Ne(p);y.Ea.add(4),await xl(y),y.Ra.set("Unknown"),y.Ea.delete(4),await th(y)})(this))}))})),this.Ra=new KR(s,o)}}async function th(r){if(zi(r))for(const e of r.da)await e(!0)}async function xl(r){for(const e of r.da)await e(!1)}function Gw(r,e){const t=Ne(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),hp(t)?cp(t):ta(t).O_()&&up(t,e))}function lp(r,e){const t=Ne(r),s=ta(t);t.Ia.delete(e),s.O_()&&Kw(t,e),t.Ia.size===0&&(s.O_()?s.L_():zi(t)&&t.Ra.set("Unknown"))}function up(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ta(r).Y_(e)}function Kw(r,e){r.Va.Ue(e),ta(r).Z_(e)}function cp(r){r.Va=new qC({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),ta(r).start(),r.Ra.ua()}function hp(r){return zi(r)&&!ta(r).x_()&&r.Ia.size>0}function zi(r){return Ne(r).Ea.size===0}function Qw(r){r.Va=void 0}async function XR(r){r.Ra.set("Online")}async function YR(r){r.Ia.forEach(((e,t)=>{up(r,e)}))}async function JR(r,e){Qw(r),hp(r)?(r.Ra.ha(e),cp(r)):r.Ra.set("Unknown")}async function ZR(r,e,t){if(r.Ra.set("Online"),e instanceof Dw&&e.state===2&&e.cause)try{await(async function(o,l){const h=l.cause;for(const f of l.targetIds)o.Ia.has(f)&&(await o.remoteSyncer.rejectListen(f,h),o.Ia.delete(f),o.Va.removeTarget(f))})(r,e)}catch(s){he(Fi,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await bc(r,s)}else if(e instanceof dc?r.Va.Ze(e):e instanceof bw?r.Va.st(e):r.Va.tt(e),!t.isEqual(Re.min()))try{const s=await Ww(r.localStore);t.compareTo(s)>=0&&await(function(l,h){const f=l.Va.Tt(h);return f.targetChanges.forEach(((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const v=l.Ia.get(y);v&&l.Ia.set(y,v.withResumeToken(p.resumeToken,h))}})),f.targetMismatches.forEach(((p,y)=>{const v=l.Ia.get(p);if(!v)return;l.Ia.set(p,v.withResumeToken($t.EMPTY_BYTE_STRING,v.snapshotVersion)),Kw(l,p);const T=new js(v.target,p,y,v.sequenceNumber);up(l,T)})),l.remoteSyncer.applyRemoteEvent(f)})(r,t)}catch(s){he(Fi,"Failed to raise snapshot:",s),await bc(r,s)}}async function bc(r,e,t){if(!Zo(e))throw e;r.Ea.add(1),await xl(r),r.Ra.set("Offline"),t||(t=()=>Ww(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{he(Fi,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await th(r)}))}function Xw(r,e){return e().catch((t=>bc(r,t,e)))}async function nh(r){const e=Ne(r),t=Xs(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Kf;for(;eP(e);)try{const o=await OR(e.localStore,s);if(o===null){e.Ta.length===0&&t.L_();break}s=o.batchId,tP(e,o)}catch(o){await bc(e,o)}Yw(e)&&Jw(e)}function eP(r){return zi(r)&&r.Ta.length<10}function tP(r,e){r.Ta.push(e);const t=Xs(r);t.O_()&&t.X_&&t.ea(e.mutations)}function Yw(r){return zi(r)&&!Xs(r).x_()&&r.Ta.length>0}function Jw(r){Xs(r).start()}async function nP(r){Xs(r).ra()}async function rP(r){const e=Xs(r);for(const t of r.Ta)e.ea(t.mutations)}async function sP(r,e,t){const s=r.Ta.shift(),o=ep.from(s,e,t);await Xw(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await nh(r)}async function iP(r,e){e&&Xs(r).X_&&await(async function(s,o){if((function(h){return xw(h)&&h!==W.ABORTED})(o.code)){const l=s.Ta.shift();Xs(s).B_(),await Xw(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o))),await nh(s)}})(r,e),Yw(r)&&Jw(r)}async function E_(r,e){const t=Ne(r);t.asyncQueue.verifyOperationInProgress(),he(Fi,"RemoteStore received new credentials");const s=zi(t);t.Ea.add(3),await xl(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await th(t)}async function oP(r,e){const t=Ne(r);e?(t.Ea.delete(2),await th(t)):e||(t.Ea.add(2),await xl(t),t.Ra.set("Unknown"))}function ta(r){return r.ma||(r.ma=(function(t,s,o){const l=Ne(t);return l.sa(),new $R(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Xo:XR.bind(null,r),t_:YR.bind(null,r),r_:JR.bind(null,r),H_:ZR.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),hp(r)?cp(r):r.Ra.set("Unknown")):(await r.ma.stop(),Qw(r))}))),r.ma}function Xs(r){return r.fa||(r.fa=(function(t,s,o){const l=Ne(t);return l.sa(),new WR(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:nP.bind(null,r),r_:iP.bind(null,r),ta:rP.bind(null,r),na:sP.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await nh(r)):(await r.fa.stop(),r.Ta.length>0&&(he(Fi,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class dp{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new yr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const h=Date.now()+s,f=new dp(e,t,h,o,l);return f.start(s),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new oe(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fp(r,e){if(Xr("AsyncQueue",`${e}: ${r}`),Zo(r))return new oe(W.UNAVAILABLE,`${e}: ${r}`);throw r}class jo{static emptySet(e){return new jo(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Ee.comparator(t.key,s.key):(t,s)=>Ee.comparator(t.key,s.key),this.keyedMap=Ja(),this.sortedSet=new ut(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof jo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new jo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class T_{constructor(){this.ga=new ut(Ee.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Te(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class Wo{constructor(e,t,s,o,l,h,f,p,y){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=f,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,s,o,l){const h=[];return t.forEach((f=>{h.push({type:0,doc:f})})),new Wo(e,t,jo.emptySet(t),h,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}class aP{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class lP{constructor(){this.queries=I_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const o=Ne(t),l=o.queries;o.queries=I_(),l.forEach(((h,f)=>{for(const p of f.Sa)p.onError(s)}))})(this,new oe(W.ABORTED,"Firestore shutting down"))}}function I_(){return new Bi((r=>yw(r)),Kc)}async function pp(r,e){const t=Ne(r);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.ba()&&e.Da()&&(s=2):(l=new aP,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const f=fp(h,`Initialization of query '${xo(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&gp(t)}async function mp(r,e){const t=Ne(r),s=e.query;let o=3;const l=t.queries.get(s);if(l){const h=l.Sa.indexOf(e);h>=0&&(l.Sa.splice(h,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function uP(r,e){const t=Ne(r);let s=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const f of h.Sa)f.Fa(o)&&(s=!0);h.wa=o}}s&&gp(t)}function cP(r,e,t){const s=Ne(r),o=s.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);s.queries.delete(e)}function gp(r){r.Ca.forEach((e=>{e.next()}))}var Sf,S_;(S_=Sf||(Sf={})).Ma="default",S_.Cache="cache";class yp{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Wo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Wo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Sf.Cache}}class Zw{constructor(e){this.key=e}}class e0{constructor(e){this.key=e}}class hP{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ze(),this.mutatedKeys=ze(),this.eu=_w(e),this.tu=new jo(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new T_,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,f=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,T)=>{const C=o.get(v),O=Qc(this.query,T)?T:null,$=!!C&&this.mutatedKeys.has(C.key),z=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let D=!1;C&&O?C.data.isEqual(O.data)?$!==z&&(s.track({type:3,doc:O}),D=!0):this.su(C,O)||(s.track({type:2,doc:O}),D=!0,(p&&this.eu(O,p)>0||y&&this.eu(O,y)<0)&&(f=!0)):!C&&O?(s.track({type:0,doc:O}),D=!0):C&&!O&&(s.track({type:1,doc:C}),D=!0,(p||y)&&(f=!0)),D&&(O?(h=h.add(O),l=z?l.add(v):l.delete(v)):(h=h.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const v=this.query.limitType==="F"?h.last():h.first();h=h.delete(v.key),l=l.delete(v.key),s.track({type:1,doc:v})}return{tu:h,iu:s,Cs:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((v,T)=>(function(O,$){const z=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te(20277,{Rt:D})}};return z(O)-z($)})(v.type,T.type)||this.eu(v.doc,T.doc))),this.ou(s),o=o??!1;const f=t&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,y=p!==this.Za;return this.Za=p,h.length!==0||y?{snapshot:new Wo(this.query,e.tu,l,h,e.mutatedKeys,p===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new T_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ze(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new e0(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new Zw(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=ze();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Wo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const _p="SyncEngine";class dP{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class fP{constructor(e){this.key=e,this.hu=!1}}class pP{constructor(e,t,s,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new Bi((f=>yw(f)),Kc),this.Iu=new Map,this.Eu=new Set,this.du=new ut(Ee.comparator),this.Au=new Map,this.Ru=new rp,this.Vu={},this.mu=new Map,this.fu=$o.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function mP(r,e,t=!0){const s=o0(r);let o;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await t0(s,e,t,!0),o}async function gP(r,e){const t=o0(r);await t0(t,e,!0,!1)}async function t0(r,e,t,s){const o=await MR(r.localStore,_r(e)),l=o.targetId,h=r.sharedClientState.addLocalQueryTarget(l,t);let f;return s&&(f=await yP(r,e,l,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&Gw(r.remoteStore,o),f}async function yP(r,e,t,s,o){r.pu=(T,C,O)=>(async function(z,D,Z,K){let ae=D.view.ru(Z);ae.Cs&&(ae=await g_(z.localStore,D.query,!1).then((({documents:S})=>D.view.ru(S,ae))));const H=K&&K.targetChanges.get(D.targetId),J=K&&K.targetMismatches.get(D.targetId)!=null,re=D.view.applyChanges(ae,z.isPrimaryClient,H,J);return C_(z,D.targetId,re.au),re.snapshot})(r,T,C,O);const l=await g_(r.localStore,e,!0),h=new hP(e,l.Qs),f=h.ru(l.documents),p=kl.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",o),y=h.applyChanges(f,r.isPrimaryClient,p);C_(r,t,y.au);const v=new dP(e,t,h);return r.Tu.set(e,v),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),y.snapshot}async function _P(r,e,t){const s=Ne(r),o=s.Tu.get(e),l=s.Iu.get(o.targetId);if(l.length>1)return s.Iu.set(o.targetId,l.filter((h=>!Kc(h,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Tf(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&lp(s.remoteStore,o.targetId),Af(s,o.targetId)})).catch(Jo)):(Af(s,o.targetId),await Tf(s.localStore,o.targetId,!0))}async function vP(r,e){const t=Ne(r),s=t.Tu.get(e),o=t.Iu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),lp(t.remoteStore,s.targetId))}async function wP(r,e,t){const s=RP(r);try{const o=await(function(h,f){const p=Ne(h),y=it.now(),v=f.reduce(((O,$)=>O.add($.key)),ze());let T,C;return p.persistence.runTransaction("Locally write mutations","readwrite",(O=>{let $=Yr(),z=ze();return p.Ns.getEntries(O,v).next((D=>{$=D,$.forEach(((Z,K)=>{K.isValidDocument()||(z=z.add(Z))}))})).next((()=>p.localDocuments.getOverlayedDocuments(O,$))).next((D=>{T=D;const Z=[];for(const K of f){const ae=jC(K,T.get(K.key).overlayedDocument);ae!=null&&Z.push(new ni(K.key,ae,uw(ae.value.mapValue),zt.exists(!0)))}return p.mutationQueue.addMutationBatch(O,y,Z,f)})).next((D=>{C=D;const Z=D.applyToLocalDocumentSet(T,z);return p.documentOverlayCache.saveOverlays(O,D.batchId,Z)}))})).then((()=>({batchId:C.batchId,changes:ww(T)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(h,f,p){let y=h.Vu[h.currentUser.toKey()];y||(y=new ut(Be)),y=y.insert(f,p),h.Vu[h.currentUser.toKey()]=y})(s,o.batchId,t),await Nl(s,o.changes),await nh(s.remoteStore)}catch(o){const l=fp(o,"Failed to persist write");t.reject(l)}}async function n0(r,e){const t=Ne(r);try{const s=await DR(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const h=t.Au.get(l);h&&(We(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?We(h.hu,14607):o.removedDocuments.size>0&&(We(h.hu,42227),h.hu=!1))})),await Nl(t,s,e)}catch(s){await Jo(s)}}function A_(r,e,t){const s=Ne(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Tu.forEach(((l,h)=>{const f=h.view.va(e);f.snapshot&&o.push(f.snapshot)})),(function(h,f){const p=Ne(h);p.onlineState=f;let y=!1;p.queries.forEach(((v,T)=>{for(const C of T.Sa)C.va(f)&&(y=!0)})),y&&gp(p)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function EP(r,e,t){const s=Ne(r);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Au.get(e),l=o&&o.key;if(l){let h=new ut(Ee.comparator);h=h.insert(l,Ot.newNoDocument(l,Re.min()));const f=ze().add(l),p=new Zc(Re.min(),new Map,new ut(Be),h,f);await n0(s,p),s.du=s.du.remove(l),s.Au.delete(e),vp(s)}else await Tf(s.localStore,e,!1).then((()=>Af(s,e,t))).catch(Jo)}async function TP(r,e){const t=Ne(r),s=e.batch.batchId;try{const o=await bR(t.localStore,e);s0(t,s,null),r0(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Nl(t,o)}catch(o){await Jo(o)}}async function IP(r,e,t){const s=Ne(r);try{const o=await(function(h,f){const p=Ne(h);return p.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let v;return p.mutationQueue.lookupMutationBatch(y,f).next((T=>(We(T!==null,37113),v=T.keys(),p.mutationQueue.removeMutationBatch(y,T)))).next((()=>p.mutationQueue.performConsistencyCheck(y))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(y,v,f))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,v))).next((()=>p.localDocuments.getDocuments(y,v)))}))})(s.localStore,e);s0(s,e,t),r0(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Nl(s,o)}catch(o){await Jo(o)}}function r0(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function s0(r,e,t){const s=Ne(r);let o=s.Vu[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function Af(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),t&&r.Pu.yu(s,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((s=>{r.Ru.containsKey(s)||i0(r,s)}))}function i0(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(lp(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),vp(r))}function C_(r,e,t){for(const s of t)s instanceof Zw?(r.Ru.addReference(s.key,e),SP(r,s)):s instanceof e0?(he(_p,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||i0(r,s.key)):Te(19791,{wu:s})}function SP(r,e){const t=e.key,s=t.path.canonicalString();r.du.get(t)||r.Eu.has(s)||(he(_p,"New document in limbo: "+t),r.Eu.add(s),vp(r))}function vp(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new Ee(Ze.fromString(e)),s=r.fu.next();r.Au.set(s,new fP(t)),r.du=r.du.insert(t,s),Gw(r.remoteStore,new js(_r(Gc(t.path)),s,"TargetPurposeLimboResolution",Wc.ce))}}async function Nl(r,e,t){const s=Ne(r),o=[],l=[],h=[];s.Tu.isEmpty()||(s.Tu.forEach(((f,p)=>{h.push(s.pu(p,e,t).then((y=>{if((y||t)&&s.isPrimaryClient){const v=y?!y.fromCache:t?.targetChanges.get(p.targetId)?.current;s.sharedClientState.updateQueryState(p.targetId,v?"current":"not-current")}if(y){o.push(y);const v=ip.As(p.targetId,y);l.push(v)}})))})),await Promise.all(h),s.Pu.H_(o),await(async function(p,y){const v=Ne(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>X.forEach(y,(C=>X.forEach(C.Es,(O=>v.persistence.referenceDelegate.addReference(T,C.targetId,O))).next((()=>X.forEach(C.ds,(O=>v.persistence.referenceDelegate.removeReference(T,C.targetId,O)))))))))}catch(T){if(!Zo(T))throw T;he(op,"Failed to update sequence numbers: "+T)}for(const T of y){const C=T.targetId;if(!T.fromCache){const O=v.Ms.get(C),$=O.snapshotVersion,z=O.withLastLimboFreeSnapshotVersion($);v.Ms=v.Ms.insert(C,z)}}})(s.localStore,l))}async function AP(r,e){const t=Ne(r);if(!t.currentUser.isEqual(e)){he(_p,"User change. New user:",e.toKey());const s=await $w(t.localStore,e);t.currentUser=e,(function(l,h){l.mu.forEach((f=>{f.forEach((p=>{p.reject(new oe(W.CANCELLED,h))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Nl(t,s.Ls)}}function CP(r,e){const t=Ne(r),s=t.Au.get(e);if(s&&s.hu)return ze().add(s.key);{let o=ze();const l=t.Iu.get(e);if(!l)return o;for(const h of l){const f=t.Tu.get(h);o=o.unionWith(f.view.nu)}return o}}function o0(r){const e=Ne(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=n0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=CP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=EP.bind(null,e),e.Pu.H_=uP.bind(null,e.eventManager),e.Pu.yu=cP.bind(null,e.eventManager),e}function RP(r){const e=Ne(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=TP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=IP.bind(null,e),e}class Dc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=eh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return NR(this.persistence,new PR,e.initialUser,this.serializer)}Cu(e){return new qw(sp.mi,this.serializer)}Du(e){return new LR}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Dc.provider={build:()=>new Dc};class PP extends Dc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){We(this.persistence.referenceDelegate instanceof Nc,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new fR(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?cn.withCacheSize(this.cacheSizeBytes):cn.DEFAULT;return new qw((s=>Nc.mi(s,t)),this.serializer)}}class Cf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>A_(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=AP.bind(null,this.syncEngine),await oP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new lP})()}createDatastore(e){const t=eh(e.databaseInfo.databaseId),s=(function(l){return new qR(l)})(e.databaseInfo);return(function(l,h,f,p){return new GR(l,h,f,p)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,l,h,f){return new QR(s,o,l,h,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>A_(this.syncEngine,t,0)),(function(){return v_.v()?new v_:new FR})())}createSyncEngine(e,t){return(function(o,l,h,f,p,y,v){const T=new pP(o,l,h,f,p,y);return v&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const s=Ne(t);he(Fi,"RemoteStore shutting down."),s.Ea.add(5),await xl(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Cf.provider={build:()=>new Cf};class wp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Xr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class kP{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new oe(W.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(o,l){const h=Ne(o),f={documents:l.map((T=>xc(h.serializer,T)))},p=await h.Ho("BatchGetDocuments",h.serializer.databaseId,Ze.emptyPath(),f,l.length),y=new Map;p.forEach((T=>{const C=XC(h.serializer,T);y.set(C.key.toString(),C)}));const v=[];return l.forEach((T=>{const C=y.get(T.toString());We(!!C,55234,{key:T}),v.push(C)})),v})(this.datastore,e);return t.forEach((s=>this.recordVersion(s))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new Jc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,s)=>{const o=Ee.fromPath(s);this.mutations.push(new kw(o,this.precondition(o)))})),await(async function(s,o){const l=Ne(s),h={writes:o.map((f=>Lw(l.serializer,f)))};await l.Go("Commit",l.serializer.databaseId,Ze.emptyPath(),h)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Te(50498,{Gu:e.constructor.name});t=Re.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new oe(W.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Re.min())?zt.exists(!1):zt.updateTime(t):zt.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Re.min()))throw new oe(W.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return zt.updateTime(t)}return zt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class xP{constructor(e,t,s,o,l){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=o,this.deferred=l,this.zu=s.maxAttempts,this.M_=new ap(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new kP(this.datastore),t=this.Hu(e);t&&t.then((s=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(s)})).catch((o=>{this.Yu(o)}))))})).catch((s=>{this.Yu(s)}))}))}Hu(e){try{const t=this.updateFunction(e);return!Rl(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!xw(t)}return!1}}const Ys="FirestoreClient";class NP{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=Yt.UNAUTHENTICATED,this.clientId=Gf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async h=>{he(Ys,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(s,(h=>(he(Ys,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new yr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=fp(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Qd(r,e){r.asyncQueue.verifyOperationInProgress(),he(Ys,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener((async o=>{s.isEqual(o)||(await $w(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function R_(r,e){r.asyncQueue.verifyOperationInProgress();const t=await bP(r);he(Ys,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((s=>E_(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,o)=>E_(e.remoteStore,o))),r._onlineComponents=e}async function bP(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){he(Ys,"Using user provided OfflineComponentProvider");try{await Qd(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===W.FAILED_PRECONDITION||o.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Uo("Error using user provided cache. Falling back to memory cache: "+t),await Qd(r,new Dc)}}else he(Ys,"Using default OfflineComponentProvider"),await Qd(r,new PP(void 0));return r._offlineComponents}async function Ep(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(he(Ys,"Using user provided OnlineComponentProvider"),await R_(r,r._uninitializedComponentsProvider._online)):(he(Ys,"Using default OnlineComponentProvider"),await R_(r,new Cf))),r._onlineComponents}function DP(r){return Ep(r).then((e=>e.syncEngine))}function VP(r){return Ep(r).then((e=>e.datastore))}async function Vc(r){const e=await Ep(r),t=e.eventManager;return t.onListen=mP.bind(null,e.syncEngine),t.onUnlisten=_P.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=gP.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=vP.bind(null,e.syncEngine),t}function OP(r,e,t={}){const s=new yr;return r.asyncQueue.enqueueAndForget((async()=>(function(l,h,f,p,y){const v=new wp({next:C=>{v.Nu(),h.enqueueAndForget((()=>mp(l,T)));const O=C.docs.has(f);!O&&C.fromCache?y.reject(new oe(W.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&C.fromCache&&p&&p.source==="server"?y.reject(new oe(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(C)},error:C=>y.reject(C)}),T=new yp(Gc(f.path),v,{includeMetadataChanges:!0,qa:!0});return pp(l,T)})(await Vc(r),r.asyncQueue,e,t,s))),s.promise}function MP(r,e,t={}){const s=new yr;return r.asyncQueue.enqueueAndForget((async()=>(function(l,h,f,p,y){const v=new wp({next:C=>{v.Nu(),h.enqueueAndForget((()=>mp(l,T))),C.fromCache&&p.source==="server"?y.reject(new oe(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(C)},error:C=>y.reject(C)}),T=new yp(f,v,{includeMetadataChanges:!0,qa:!0});return pp(l,T)})(await Vc(r),r.asyncQueue,e,t,s))),s.promise}function a0(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const P_=new Map;const l0="firestore.googleapis.com",k_=!0;class x_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new oe(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=l0,this.ssl=k_}else this.host=e.host,this.ssl=e.ssl??k_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=zw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<hR)throw new oe(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}QA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=a0(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new oe(W.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new oe(W.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new oe(W.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class rh{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new x_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new oe(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new oe(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new x_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new FA;switch(s.type){case"firstParty":return new qA(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new oe(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=P_.get(t);s&&(he("ComponentProvider","Removing Datastore"),P_.delete(t),s.terminate())})(this),Promise.resolve()}}function jP(r,e,t,s={}){r=bn(r,rh);const o=Ko(e),l=r._getSettings(),h={...l,emulatorOptions:r._getEmulatorOptions()},f=`${e}:${t}`;o&&(ov(`https://${f}`),av("Firestore",!0)),l.host!==l0&&l.host!==f&&Uo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...l,host:f,ssl:o,emulatorOptions:s};if(!Oi(p,h)&&(r._setSettings(p),s.mockUserToken)){let y,v;if(typeof s.mockUserToken=="string")y=s.mockUserToken,v=Yt.MOCK_USER;else{y=hI(s.mockUserToken,r._app?.options.projectId);const T=s.mockUserToken.sub||s.mockUserToken.user_id;if(!T)throw new oe(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Yt(T)}r._authCredentials=new UA(new Yv(y,v))}}class es{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new es(this.firestore,e,this._query)}}class dt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $s(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new dt(this.firestore,e,this._key)}toJSON(){return{type:dt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Cl(t,dt._jsonSchema))return new dt(e,s||null,new Ee(Ze.fromString(t.referencePath)))}}dt._jsonSchemaVersion="firestore/documentReference/1.0",dt._jsonSchema={type:Ct("string",dt._jsonSchemaVersion),referencePath:Ct("string")};class $s extends es{constructor(e,t,s){super(e,t,Gc(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new dt(this.firestore,null,new Ee(e))}withConverter(e){return new $s(this.firestore,e,this._path)}}function _t(r,e,...t){if(r=Rt(r),Jv("collection","path",e),r instanceof rh){const s=Ze.fromString(e,...t);return qy(s),new $s(r,null,s)}{if(!(r instanceof dt||r instanceof $s))throw new oe(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Ze.fromString(e,...t));return qy(s),new $s(r.firestore,null,s)}}function be(r,e,...t){if(r=Rt(r),arguments.length===1&&(e=Gf.newId()),Jv("doc","path",e),r instanceof rh){const s=Ze.fromString(e,...t);return zy(s),new dt(r,null,new Ee(s))}{if(!(r instanceof dt||r instanceof $s))throw new oe(W.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Ze.fromString(e,...t));return zy(s),new dt(r.firestore,r instanceof $s?r.converter:null,new Ee(s))}}const N_="AsyncQueue";class b_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ap(this,"async_queue_retry"),this._c=()=>{const s=Kd();s&&he(N_,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=Kd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Kd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new yr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Zo(e))throw e;he(N_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Xr("INTERNAL UNHANDLED ERROR: ",D_(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=dp.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&Te(47125,{Pc:D_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function D_(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}function V_(r){return(function(t,s){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of s)if(l in o&&typeof o[l]=="function")return!0;return!1})(r,["next","error","complete"])}class Js extends rh{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new b_,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new b_(e),this._firestoreClient=void 0,await e}}}function LP(r,e){const t=typeof r=="object"?r:hv(),s=typeof r=="string"?r:Sc,o=Of(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=uI("firestore");l&&jP(o,...l)}return o}function na(r){if(r._terminated)throw new oe(W.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||FP(r),r._firestoreClient}function FP(r){const e=r._freezeSettings(),t=(function(o,l,h,f){return new aC(o,l,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,a0(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new NP(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(o){const l=o?._online.build();return{_offline:o?._offline.build(l),_online:l}})(r._componentsProvider))}class wn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wn($t.fromBase64String(e))}catch(t){throw new oe(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new wn($t.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:wn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Cl(e,wn._jsonSchema))return wn.fromBase64String(e.bytes)}}wn._jsonSchemaVersion="firestore/bytes/1.0",wn._jsonSchema={type:Ct("string",wn._jsonSchemaVersion),bytes:Ct("string")};class bl{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new oe(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class sh{constructor(e){this._methodName=e}}class vr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new oe(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new oe(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Be(this._lat,e._lat)||Be(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:vr._jsonSchemaVersion}}static fromJSON(e){if(Cl(e,vr._jsonSchema))return new vr(e.latitude,e.longitude)}}vr._jsonSchemaVersion="firestore/geoPoint/1.0",vr._jsonSchema={type:Ct("string",vr._jsonSchemaVersion),latitude:Ct("number"),longitude:Ct("number")};class wr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:wr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Cl(e,wr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new wr(e.vectorValues);throw new oe(W.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}wr._jsonSchemaVersion="firestore/vectorValue/1.0",wr._jsonSchema={type:Ct("string",wr._jsonSchemaVersion),vectorValues:Ct("object")};const UP=/^__.*__$/;class BP{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new ni(e,this.data,this.fieldMask,t,this.fieldTransforms):new Pl(e,this.data,t,this.fieldTransforms)}}class u0{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new ni(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function c0(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te(40011,{Ac:r})}}class Tp{constructor(e,t,s,o,l,h){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Tp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Oc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(c0(this.Ac)&&UP.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class zP{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||eh(e)}Cc(e,t,s,o=!1){return new Tp({Ac:e,methodName:t,Dc:s,path:Bt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ih(r){const e=r._freezeSettings(),t=eh(r._databaseId);return new zP(r._databaseId,!!e.ignoreUndefinedProperties,t)}function Ip(r,e,t,s,o,l={}){const h=r.Cc(l.merge||l.mergeFields?2:0,e,t,o);Ap("Data must be an object, but it was:",h,s);const f=f0(s,h);let p,y;if(l.merge)p=new En(h.fieldMask),y=h.fieldTransforms;else if(l.mergeFields){const v=[];for(const T of l.mergeFields){const C=Rf(e,T,t);if(!h.contains(C))throw new oe(W.INVALID_ARGUMENT,`Field '${C}' is specified in your field mask but missing from your input data.`);m0(v,C)||v.push(C)}p=new En(v),y=h.fieldTransforms.filter((T=>p.covers(T.field)))}else p=null,y=h.fieldTransforms;return new BP(new tn(f),p,y)}class oh extends sh{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof oh}}class Sp extends sh{_toFieldTransform(e){return new DC(e.path,new gl)}isEqual(e){return e instanceof Sp}}function h0(r,e,t,s){const o=r.Cc(1,e,t);Ap("Data must be an object, but it was:",o,s);const l=[],h=tn.empty();ti(s,((p,y)=>{const v=Cp(e,p,t);y=Rt(y);const T=o.yc(v);if(y instanceof oh)l.push(v);else{const C=Dl(y,T);C!=null&&(l.push(v),h.set(v,C))}}));const f=new En(l);return new u0(h,f,o.fieldTransforms)}function d0(r,e,t,s,o,l){const h=r.Cc(1,e,t),f=[Rf(e,s,t)],p=[o];if(l.length%2!=0)throw new oe(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let C=0;C<l.length;C+=2)f.push(Rf(e,l[C])),p.push(l[C+1]);const y=[],v=tn.empty();for(let C=f.length-1;C>=0;--C)if(!m0(y,f[C])){const O=f[C];let $=p[C];$=Rt($);const z=h.yc(O);if($ instanceof oh)y.push(O);else{const D=Dl($,z);D!=null&&(y.push(O),v.set(O,D))}}const T=new En(y);return new u0(v,T,h.fieldTransforms)}function qP(r,e,t,s=!1){return Dl(t,r.Cc(s?4:3,e))}function Dl(r,e){if(p0(r=Rt(r)))return Ap("Unsupported field value:",e,r),f0(r,e);if(r instanceof sh)return(function(s,o){if(!c0(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const l=[];let h=0;for(const f of s){let p=Dl(f,o.wc(h));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),h++}return{arrayValue:{values:l}}})(r,e)}return(function(s,o){if((s=Rt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return xC(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=it.fromDate(s);return{timestampValue:kc(o.serializer,l)}}if(s instanceof it){const l=new it(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:kc(o.serializer,l)}}if(s instanceof vr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof wn)return{bytesValue:Vw(o.serializer,s._byteString)};if(s instanceof dt){const l=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(l))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:np(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof wr)return(function(h,f){return{mapValue:{fields:{[aw]:{stringValue:lw},[Ac]:{arrayValue:{values:h.toArray().map((y=>{if(typeof y!="number")throw f.Sc("VectorValues must only contain numeric values.");return Zf(f.serializer,y)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${$c(s)}`)})(r,e)}function f0(r,e){const t={};return tw(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ti(r,((s,o)=>{const l=Dl(o,e.mc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function p0(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof it||r instanceof vr||r instanceof wn||r instanceof dt||r instanceof sh||r instanceof wr)}function Ap(r,e,t){if(!p0(t)||!Zv(t)){const s=$c(t);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function Rf(r,e,t){if((e=Rt(e))instanceof bl)return e._internalPath;if(typeof e=="string")return Cp(r,e);throw Oc("Field path arguments must be of type string or ",r,!1,void 0,t)}const $P=new RegExp("[~\\*/\\[\\]]");function Cp(r,e,t){if(e.search($P)>=0)throw Oc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new bl(...e.split("."))._internalPath}catch{throw Oc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Oc(r,e,t,s,o){const l=s&&!s.isEmpty(),h=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let p="";return(l||h)&&(p+=" (found",l&&(p+=` in field ${s}`),h&&(p+=` in document ${o}`),p+=")"),new oe(W.INVALID_ARGUMENT,f+r+p)}function m0(r,e){return r.some((t=>t.isEqual(e)))}class Mc{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new dt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new WP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ah("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class WP extends Mc{data(){return super.data()}}function ah(r,e){return typeof e=="string"?Cp(r,e):e instanceof bl?e._internalPath:e._delegate._internalPath}function g0(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new oe(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Rp{}class Pp extends Rp{}function Qn(r,e,...t){let s=[];e instanceof Rp&&s.push(e),s=s.concat(t),(function(l){const h=l.filter((p=>p instanceof kp)).length,f=l.filter((p=>p instanceof lh)).length;if(h>1||h>0&&f>0)throw new oe(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)r=o._apply(r);return r}class lh extends Pp{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new lh(e,t,s)}_apply(e){const t=this._parse(e);return y0(e._query,t),new es(e.firestore,e.converter,_f(e._query,t))}_parse(e){const t=ih(e.firestore);return(function(l,h,f,p,y,v,T){let C;if(y.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new oe(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){M_(T,v);const $=[];for(const z of T)$.push(O_(p,l,z));C={arrayValue:{values:$}}}else C=O_(p,l,T)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||M_(T,v),C=qP(f,h,T,v==="in"||v==="not-in");return At.create(y,v,C)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Er(r,e,t){const s=e,o=ah("where",r);return lh._create(o,s,t)}class kp extends Rp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new kp(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:Xn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let h=o;const f=l.getFlattenedFilters();for(const p of f)y0(h,p),h=_f(h,p)})(e._query,t),new es(e.firestore,e.converter,_f(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class xp extends Pp{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new xp(e,t)}_apply(e){const t=(function(o,l,h){if(o.startAt!==null)throw new oe(W.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new oe(W.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ml(l,h)})(e._query,this._field,this._direction);return new es(e.firestore,e.converter,(function(o,l){const h=o.explicitOrderBy.concat([l]);return new ea(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function HP(r,e="asc"){const t=e,s=ah("orderBy",r);return xp._create(s,t)}class Np extends Pp{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new Np(e,t,s)}_apply(e){return new es(e.firestore,e.converter,Rc(e._query,this._limit,this._limitType))}}function bp(r){return XA("limit",r),Np._create("limit",r,"F")}function O_(r,e,t){if(typeof(t=Rt(t))=="string"){if(t==="")throw new oe(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gw(e)&&t.indexOf("/")!==-1)throw new oe(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Ze.fromString(t));if(!Ee.isDocumentKey(s))throw new oe(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Yy(r,new Ee(s))}if(t instanceof dt)return Yy(r,t._key);throw new oe(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${$c(t)}.`)}function M_(r,e){if(!Array.isArray(r)||r.length===0)throw new oe(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function y0(r,e){const t=(function(o,l){for(const h of o)for(const f of h.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new oe(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new oe(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class _0{convertValue(e,t="none"){switch(Qs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ks(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Te(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return ti(e,((o,l)=>{s[o]=this.convertValue(l,t)})),s}convertVectorValue(e){const t=e.fields?.[Ac].arrayValue?.values?.map((s=>yt(s.doubleValue)));return new wr(t)}convertGeoPoint(e){return new vr(yt(e.latitude),yt(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Hc(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(dl(e));default:return null}}convertTimestamp(e){const t=Gs(e);return new it(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Ze.fromString(e);We(Bw(s),9688,{name:e});const o=new fl(s.get(1),s.get(3)),l=new Ee(s.popFirst(5));return o.isEqual(t)||Xr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function Dp(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}class GP extends _0{constructor(e){super(),this.firestore=e}convertBytes(e){return new wn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new dt(this.firestore,null,t)}}class Do{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ws extends Mc{constructor(e,t,s,o,l,h){super(e,t,s,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new fc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(ah("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(W.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ws._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ws._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ws._jsonSchema={type:Ct("string",Ws._jsonSchemaVersion),bundleSource:Ct("string","DocumentSnapshot"),bundleName:Ct("string"),bundle:Ct("string")};class fc extends Ws{data(e={}){return super.data(e)}}class Vi{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Do(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new fc(this._firestore,this._userDataWriter,s.key,s,new Do(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new oe(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((f=>{const p=new fc(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Do(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:p,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const p=new fc(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Do(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,v=-1;return f.type!==0&&(y=h.indexOf(f.doc.key),h=h.delete(f.doc.key)),f.type!==1&&(h=h.add(f.doc),v=h.indexOf(f.doc.key)),{type:KP(f.type),doc:p,oldIndex:y,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(W.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Vi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Gf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function KP(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te(61501,{type:r})}}function Dn(r){r=bn(r,dt);const e=bn(r.firestore,Js);return OP(na(e),r._key).then((t=>w0(e,r,t)))}Vi._jsonSchemaVersion="firestore/querySnapshot/1.0",Vi._jsonSchema={type:Ct("string",Vi._jsonSchemaVersion),bundleSource:Ct("string","QuerySnapshot"),bundleName:Ct("string"),bundle:Ct("string")};class uh extends _0{constructor(e){super(),this.firestore=e}convertBytes(e){return new wn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new dt(this.firestore,null,t)}}function qt(r){r=bn(r,es);const e=bn(r.firestore,Js),t=na(e),s=new uh(e);return g0(r._query),MP(t,r._query).then((o=>new Vi(e,s,r,o)))}function Sr(r,e,t){r=bn(r,dt);const s=bn(r.firestore,Js),o=Dp(r.converter,e,t);return v0(s,[Ip(ih(s),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,zt.none())])}function QP(r,...e){r=Rt(r);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||V_(e[s])||(t=e[s++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(V_(e[s])){const p=e[s];e[s]=p.next?.bind(p),e[s+1]=p.error?.bind(p),e[s+2]=p.complete?.bind(p)}let l,h,f;if(r instanceof dt)h=bn(r.firestore,Js),f=Gc(r._key.path),l={next:p=>{e[s]&&e[s](w0(h,r,p))},error:e[s+1],complete:e[s+2]};else{const p=bn(r,es);h=bn(p.firestore,Js),f=p._query;const y=new uh(h);l={next:v=>{e[s]&&e[s](new Vi(h,y,p,v))},error:e[s+1],complete:e[s+2]},g0(r._query)}return(function(y,v,T,C){const O=new wp(C),$=new yp(v,O,T);return y.asyncQueue.enqueueAndForget((async()=>pp(await Vc(y),$))),()=>{O.Nu(),y.asyncQueue.enqueueAndForget((async()=>mp(await Vc(y),$)))}})(na(h),f,o,l)}function v0(r,e){return(function(s,o){const l=new yr;return s.asyncQueue.enqueueAndForget((async()=>wP(await DP(s),o,l))),l.promise})(na(r),e)}function w0(r,e,t){const s=t.docs.get(e._key),o=new uh(r);return new Ws(r,o,e._key,s,new Do(t.hasPendingWrites,t.fromCache),e.converter)}const XP={maxAttempts:5};class YP{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ih(e)}set(e,t,s){this._verifyNotCommitted();const o=Ls(e,this._firestore),l=Dp(o.converter,t,s),h=Ip(this._dataReader,"WriteBatch.set",o._key,l,o.converter!==null,s);return this._mutations.push(h.toMutation(o._key,zt.none())),this}update(e,t,s,...o){this._verifyNotCommitted();const l=Ls(e,this._firestore);let h;return h=typeof(t=Rt(t))=="string"||t instanceof bl?d0(this._dataReader,"WriteBatch.update",l._key,t,s,o):h0(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(h.toMutation(l._key,zt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ls(e,this._firestore);return this._mutations=this._mutations.concat(new Jc(t._key,zt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new oe(W.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ls(r,e){if((r=Rt(r)).firestore!==e)throw new oe(W.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}class JP{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ih(e)}get(e){const t=Ls(e,this._firestore),s=new GP(this._firestore);return this._transaction.lookup([t._key]).then((o=>{if(!o||o.length!==1)return Te(24041);const l=o[0];if(l.isFoundDocument())return new Mc(this._firestore,s,l.key,l,t.converter);if(l.isNoDocument())return new Mc(this._firestore,s,t._key,null,t.converter);throw Te(18433,{doc:l})}))}set(e,t,s){const o=Ls(e,this._firestore),l=Dp(o.converter,t,s),h=Ip(this._dataReader,"Transaction.set",o._key,l,o.converter!==null,s);return this._transaction.set(o._key,h),this}update(e,t,s,...o){const l=Ls(e,this._firestore);let h;return h=typeof(t=Rt(t))=="string"||t instanceof bl?d0(this._dataReader,"Transaction.update",l._key,t,s,o):h0(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,h),this}delete(e){const t=Ls(e,this._firestore);return this._transaction.delete(t._key),this}}class ZP extends JP{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ls(e,this._firestore),s=new uh(this._firestore);return super.get(e).then((o=>new Ws(this._firestore,s,t._key,o._document,new Do(!1,!1),t.converter)))}}function ri(r,e,t){r=bn(r,Js);const s={...XP,...t};return(function(l){if(l.maxAttempts<1)throw new oe(W.INVALID_ARGUMENT,"Max attempts must be at least 1")})(s),(function(l,h,f){const p=new yr;return l.asyncQueue.enqueueAndForget((async()=>{const y=await VP(l);new xP(l.asyncQueue,y,f,h,p).ju()})),p.promise})(na(r),(o=>e(new ZP(r,o))),s)}function Ye(){return new Sp("serverTimestamp")}function Vp(r){return na(r=bn(r,Js)),new YP(r,(e=>v0(r,e)))}(function(e,t=!0){(function(o){Yo=o})(Qo),Lo(new Mi("firestore",((s,{instanceIdentifier:o,options:l})=>{const h=s.getProvider("app").getImmediate(),f=new Js(new BA(s.getProvider("auth-internal")),new $A(h,s.getProvider("app-check-internal")),(function(y,v){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new oe(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fl(y.options.projectId,v)})(h,o),h);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),zs(Ly,Fy,e),zs(Ly,Fy,"esm2020")})();var ek="firebase",tk="12.7.0";zs(ek,tk,"app");const nk={apiKey:"AIzaSyA-TURVnsMyyBOWreei2jGLcuXmOzyr_DQ",authDomain:"gamificationcollege.firebaseapp.com",projectId:"gamificationcollege",storageBucket:"gamificationcollege.firebasestorage.app",messagingSenderId:"237003198772",appId:"1:237003198772:web:37fc8130a083377a115561"},E0=cv(nk),Xd=jA(E0),rk=new Wr,ue=LP(E0),T0=ge.createContext(null);function sk({children:r}){const[e,t]=ge.useState(null),[s,o]=ge.useState(null),[l,h]=ge.useState(!0);ge.useEffect(()=>{const y=A1(Xd,async v=>{if(t(v),o(null),!v){h(!1);return}const T=be(ue,"users",v.uid);(await Dn(T)).exists()||await Sr(T,{displayName:v.displayName||"Utilisateur",role:"child",createdAt:Ye()});const O=await Dn(T);o(O.data()?.role||"child"),h(!1)});return()=>y()},[]);const f=async()=>{await H1(Xd,rk)},p=async()=>{await C1(Xd)};return E.jsx(T0.Provider,{value:{user:e,role:s,loading:l,signInGoogle:f,signOutUser:p},children:r})}function Ar(){const r=ge.useContext(T0);if(!r)throw new Error("useAuth doit tre utilis sous <AuthProvider>");return r}const Yd={xp:0,level:1,badges:[],masteryByTag:{},collectibles:{owned:[],equippedAvatarId:void 0}};function Vl(r){const[e,t]=ge.useState(Yd),[s,o]=ge.useState(!!r);return ge.useEffect(()=>{if(!r){t(Yd),o(!1);return}const l=be(ue,"users",r,"meta","rewards"),h=QP(l,f=>{f.exists()?t(f.data()):t(Yd),o(!1)},()=>o(!1));return()=>h()},[r]),{rewards:e,loading:s}}const Zs=[{id:"sticker_star",type:"sticker",title:"toile",description:"Une toile brillante",rarity:"common",icon:""},{id:"sticker_book",type:"sticker",title:"Livre",description:"Pour les champions de lecture",rarity:"common",icon:""},{id:"sticker_rocket",type:"sticker",title:"Fuse",description:"Dcollage vers la russite",rarity:"common",icon:""},{id:"sticker_pencil",type:"sticker",title:"Crayon",description:"Toujours prt  crire",rarity:"common",icon:""},{id:"sticker_thumbs",type:"sticker",title:"Bravo",description:"Pouce en lair",rarity:"common",icon:""},{id:"sticker_smile",type:"sticker",title:"Sourire",description:"Bonne humeur garantie",rarity:"common",icon:""},{id:"sticker_music",type:"sticker",title:"Musique",description:"Rythme et rvisions",rarity:"common",icon:""},{id:"sticker_leaf",type:"sticker",title:"Feuille",description:"Nature et calme",rarity:"common",icon:""},{id:"sticker_dragon",type:"sticker",title:"Dragon",description:"Gardien des savoirs",rarity:"rare",icon:""},{id:"sticker_moon",type:"sticker",title:"Lune",description:"Veille dtude",rarity:"rare",icon:""},{id:"sticker_robot",type:"sticker",title:"Robot",description:"Logique au top",rarity:"rare",icon:""},{id:"sticker_trophy",type:"sticker",title:"Trophe",description:"Petite victoire",rarity:"rare",icon:""},{id:"sticker_paint",type:"sticker",title:"Palette",description:"Crativit",rarity:"rare",icon:""},{id:"sticker_comet",type:"sticker",title:"Comte",description:"Vise toile",rarity:"rare",icon:""},{id:"sticker_camera",type:"sticker",title:"Camra",description:"Souvenir de russite",rarity:"rare",icon:""},{id:"sticker_ship",type:"sticker",title:"Navire",description:"Cap sur le savoir",rarity:"rare",icon:""},{id:"sticker_crown",type:"sticker",title:"Couronne",description:"Roi/Reine des rvisions",rarity:"epic",icon:""},{id:"sticker_phoenix",type:"sticker",title:"Phnix",description:"Toujours se relever",rarity:"epic",icon:""},{id:"sticker_unicorn",type:"sticker",title:"Licorne",description:"Magie de la russite",rarity:"epic",icon:""},{id:"sticker_saturn",type:"sticker",title:"Saturne",description:"Orbitant autour du savoir",rarity:"epic",icon:""},{id:"sticker_mountain",type:"sticker",title:"Montagne",description:"Sommet atteint",rarity:"epic",icon:""},{id:"sticker_aurora",type:"sticker",title:"Aurore",description:"Lumire des ides",rarity:"epic",icon:""},{id:"sticker_magic",type:"sticker",title:"Magicien",description:"Tour de matrise",rarity:"epic",icon:""},{id:"sticker_dragon_gold",type:"sticker",title:"Dragon dor",description:"Gloire ultime",rarity:"epic",icon:""},{id:"avatar_basic_boy",type:"avatar",title:"Aventurier",description:"Prt  apprendre",rarity:"common",icon:""},{id:"avatar_basic_girl",type:"avatar",title:"Exploratrice",description:"Curieuse et motive",rarity:"common",icon:""},{id:"avatar_scientist",type:"avatar",title:"Scientifique",description:"Fan dexpriences",rarity:"rare",icon:""},{id:"avatar_astronaut",type:"avatar",title:"Astronaute",description:"Toujours plus haut",rarity:"rare",icon:""},{id:"avatar_artist",type:"avatar",title:"Artiste",description:"Crativit au max",rarity:"common",icon:""},{id:"avatar_knight",type:"avatar",title:"Chevalier",description:"Protge ses progrs",rarity:"rare",icon:""},{id:"avatar_ninja",type:"avatar",title:"Ninja",description:"Rapide et prcis",rarity:"epic",icon:""},{id:"avatar_robot",type:"avatar",title:"Robot",description:"Logique imparable",rarity:"rare",icon:""},{id:"avatar_dragon_tamer",type:"avatar",title:"Dompte-dragon",description:"Matrise totale",rarity:"epic",icon:""},{id:"avatar_pirate",type:"avatar",title:"Pirate",description:"Cap sur les objectifs",rarity:"common",icon:""},{id:"avatar_superhero",type:"avatar",title:"Hros",description:"Sauveur des devoirs",rarity:"epic",icon:""},{id:"avatar_bard",type:"avatar",title:"Barde",description:"Chante ses progrs",rarity:"rare",icon:""}];function ik(){const{user:r,role:e,signOutUser:t}=Ar(),{rewards:s}=Vl(r?.uid||null),o=s?.collectibles?.equippedAvatarId,l=o?Zs.find(h=>h.id===o):null;return E.jsx("div",{className:"card",style:{marginBottom:14},children:E.jsxs("div",{className:"row",style:{justifyContent:"space-between"},children:[E.jsxs("div",{children:[E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[E.jsx("div",{style:{fontWeight:900,fontSize:"1.05rem"},children:"Malo  Rvisions"}),l&&E.jsx("div",{style:{width:30,height:30,borderRadius:"50%",background:"rgba(255,255,255,0.08)",display:"flex",alignItems:"center",justifyContent:"center"},"aria-label":"avatar quip",children:l.icon})]}),E.jsx("div",{className:"small",children:r?E.jsxs(E.Fragment,{children:["Connect : ",E.jsx("strong",{children:r.displayName})," ",E.jsx("span",{className:"badge",children:e})]}):"Non connect"})]}),E.jsxs("div",{className:"row",style:{gap:8},children:[E.jsx(bs,{className:"btn secondary",to:"/",children:"Accueil"}),r&&E.jsx(bs,{className:"btn secondary",to:"/recompenses",children:"Rcompenses"}),r&&E.jsx(bs,{className:"btn secondary",to:"/collection",children:"Ma collection"}),r&&E.jsx(bs,{className:"btn secondary",to:"/progression",children:"Ma progression"}),e==="parent"&&E.jsxs(E.Fragment,{children:[E.jsx(bs,{className:"btn secondary",to:"/admin/import",children:"Import (parent)"}),E.jsx(bs,{className:"btn secondary",to:"/admin/moderation",children:"Modration"}),E.jsx(bs,{className:"btn secondary",to:"/admin/progression",children:"Progression enfant"})]}),r&&E.jsx("button",{className:"btn secondary",onClick:t,children:"Dconnexion"})]})]})})}function Xa({children:r}){const{user:e,loading:t}=Ar();return t?E.jsx("div",{className:"card",children:"Chargement"}):e?E.jsx(E.Fragment,{children:r}):E.jsx(ef,{to:"/connexion",replace:!0})}function Jd({children:r}){const{user:e,role:t,loading:s}=Ar();return s?E.jsx("div",{className:"card",children:"Chargement"}):e?t!=="parent"?E.jsx(ef,{to:"/",replace:!0}):E.jsx(E.Fragment,{children:r}):E.jsx(ef,{to:"/connexion",replace:!0})}function Ho(r){return(r||"").toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[]/g,"'").replace(/\s+/g," ").trim()}async function ok(){return(await qt(_t(ue,"subjects"))).docs.map(e=>({id:e.id,...e.data()}))}async function I0(r,e){const{uid:t,includeHidden:s=!1,includeOverrides:o=!1}=e||{},l=Qn(_t(ue,"themes"),Er("subjectId","==",r)),f=(await qt(l)).docs.map(v=>({id:v.id,...v.data()}));let p=new Map;if(t)try{const v=await qt(_t(ue,"users",t,"visibilityThemes"));p=new Map(v.docs.map(T=>[T.id,!!T.data().visible]))}catch{p=new Map}const y=f.filter(v=>{const T=p.get(v.id);return!(!s&&v.hidden||!s&&T===!1)});return o?y.map(v=>({...v,visibleOverride:p.get(v.id)})):y}async function S0(r,e){const{uid:t,includeHidden:s=!1,includeOverrides:o=!1}=e||{},l=Qn(_t(ue,"exercises"),Er("themeId","==",r)),f=(await qt(l)).docs.map(v=>({id:v.id,...v.data()}));let p=new Map;if(t)try{const v=await qt(_t(ue,"users",t,"visibilityExercises"));p=new Map(v.docs.map(T=>[T.id,!!T.data().visible]))}catch{p=new Map}const y=f.filter(v=>{const T=p.get(v.id);return!(!s&&v.hidden||!s&&T===!1)});return o?y.map(v=>({...v,visibleOverride:p.get(v.id)})):y}async function ak(r){const e=Qn(_t(ue,"readings"),Er("themeId","==",r));try{return(await qt(e)).docs.map(s=>({id:s.id,...s.data()}))}catch{return[]}}async function lk(r){const e=Vp(ue);for(const t of r.subjects){e.set(be(ue,"subjects",t.id),{title:t.title},{merge:!0});for(const s of t.themes){e.set(be(ue,"themes",s.id),{subjectId:t.id,title:s.title,grade:r.grade,readings:Array.isArray(s.readings)?s.readings:[]},{merge:!0});for(const o of s.exercises){const l=be(ue,"exercises",o.id),h={...o,themeId:s.id};h.tags=Array.isArray(h.tags)?h.tags.slice(0,3):[],h.type==="short_text"&&Array.isArray(h.expected)&&(h.expected=h.expected.map(f=>Ho(f))),h.type==="fill_blank"&&Array.isArray(h.expected)&&(h.expected=h.expected.map(f=>Ho(f))),e.set(l,h,{merge:!0})}if(Array.isArray(s.readings))for(const o of s.readings){if(!o.id||!o.title||!o.text||!Array.isArray(o.questions))continue;o.id,o.title,o.text,o.difficulty,Array.isArray(o.tags)&&o.tags.slice(0,3),o.questions.map(h=>({...h,type:"mcq",themeId:s.id,tags:Array.isArray(h.tags)?h.tags.slice(0,3):[]}));const l=be(ue,"themes",s.id);e.set(l,{readings:[...(Array.isArray(s.readings)?s.readings:[]).map(h=>({...h,themeId:s.id}))]},{merge:!0})}}}await e.commit()}async function uk(r,e){await Sr(be(ue,"themes",r),{hidden:e},{merge:!0})}async function ck(r,e){await Sr(be(ue,"exercises",r),{hidden:e},{merge:!0})}async function hk(r,e,t){await Sr(be(ue,"users",r,"visibilityThemes",e),{visible:t},{merge:!0})}async function dk(r,e,t){await Sr(be(ue,"users",r,"visibilityExercises",e),{visible:t},{merge:!0})}async function fk(r){try{const e=Vp(ue);return e.delete(be(ue,"themes",r)),(await qt(Qn(_t(ue,"exercises"),Er("themeId","==",r)))).docs.forEach(o=>e.delete(o.ref)),(await qt(Qn(_t(ue,"readings"),Er("themeId","==",r)))).docs.forEach(o=>e.delete(o.ref)),await e.commit(),{deleted:!0}}catch{return await Sr(be(ue,"themes",r),{hidden:!0},{merge:!0}),{deleted:!1,hidden:!0}}}async function Op(r){const e=be(ue,"users",r,"stats","main"),t=await Dn(e);return t.exists()?t.data():(await Sr(e,{xp:0,coins:0,streakDays:0,lastDoneDate:null,badges:[],updatedAt:Ye()}),(await Dn(e)).data())}function j_(r){return r.toISOString().slice(0,10)}function pk(r,e){return r===1?e?3:-1:r===2?e?5:-2:e?7:-3}function mk(r){return Math.max(0,Math.min(100,r))}function gk(r){return r>=80?"mastered":r>=60?"nearly":r>=30?"developing":"weak"}async function yk(r){const{uid:e,items:t,existingAttemptId:s}=r,o=new Date,l=j_(o),h=t.length,f=t.filter(O=>O.correct).length;if(h===0)return{xpGain:0,coinsGain:0,streakDays:0,badges:[],score:0,outOf:0};const p=new Map;t.forEach(O=>{const $=Array.isArray(O.tags)?O.tags.slice(0,3):[],z=pk(O.difficulty,O.correct);$.forEach(D=>{const Z=p.get(D)||{delta:0,correct:0,wrong:0};p.set(D,{delta:Z.delta+z,correct:Z.correct+(O.correct?1:0),wrong:Z.wrong+(O.correct?0:1)})})});const y=f*10,v=Math.max(1,Math.min(3,Math.round(f/Math.max(1,h)*3)));let T=null;const C=s?be(ue,"users",e,"attempts",s):be(_t(ue,"users",e,"attempts"));return t.map(()=>be(_t(C,"items"))),await ri(ue,async O=>{const $=be(ue,"users",e,"stats","main"),z=be(ue,"users",e,"progressSummary","main"),D=Array.from(p.keys()).map(b=>be(ue,"users",e,"tagProgress",b)),[Z,K,ae]=await Promise.all([O.get($),O.get(z),Promise.all(D.map(b=>O.get(b)))]),H=Z.exists()?Z.data():{xp:0,coins:0,streakDays:0,lastDoneDate:null,badges:[]};let J=H.streakDays||0;const re=H.lastDoneDate;if(re!==l){const b=j_(new Date(o.getTime()-864e5));J=re===b?J+1:1}const S=new Set(Array.isArray(H.badges)?H.badges:[]);J>=3&&S.add("3 jours daffile"),J>=7&&S.add("7 jours daffile"),f===h&&h>=10&&S.add("Zro faute (10+)");const A=K.exists()?K.data():null,P={weak:0,developing:0,nearly:0,mastered:0};for(let b=0;b<D.length;b++){const k=D[b],R=ae[b],ie=k.id,_e=p.get(ie),Me=R.exists()?R.data():null,Ae=typeof Me?.mastery=="number"?Me.mastery:0,G=Me?.bucket,pe=mk(Ae+_e.delta),le=gk(pe);G&&A&&(P[G]-=1),P[le]+=1,O.set(k,{mastery:pe,bucket:le,correctAnswers:(Me?.correctAnswers||0)+_e.correct,wrongAnswers:(Me?.wrongAnswers||0)+_e.wrong,lastDelta:_e.delta,updatedAt:Ye()},{merge:!0})}const x=A?.masteryBuckets||{weak:0,developing:0,nearly:0,mastered:0};O.set($,{xp:(H.xp||0)+y,coins:(H.coins||0)+v,streakDays:J,lastDoneDate:l,badges:Array.from(S),updatedAt:Ye()},{merge:!0}),O.set(z,{totalAnswers:(A?.totalAnswers||0)+h,correctAnswers:(A?.correctAnswers||0)+f,totalAttempts:(A?.totalAttempts||0)+1,masteryBuckets:{weak:(x.weak||0)+P.weak,developing:(x.developing||0)+P.developing,nearly:(x.nearly||0)+P.nearly,mastered:(x.mastered||0)+P.mastered},lastAttemptId:C.id,lastDate:l,updatedAt:Ye()},{merge:!0}),T={xpGain:y,coinsGain:v,streakDays:J,badges:Array.from(S)}}),{...T||{xpGain:0,coinsGain:0,streakDays:0,badges:[]},score:f,outOf:h}}const A0=[{id:"badge_dragon",title:"Badge Dragon",description:"Un badge pique  afficher",priceCoins:10},{id:"skin_bleu",title:"Skin Bleu",description:"Personnalisation bleue de ton avatar",priceCoins:15},{id:"skin_or",title:"Skin Or",description:"Style dor rare",priceCoins:25,requiresXp:150},{id:"pack_stickers",title:"Pack Stickers",description:"Stickers virtuels  collectionner",priceCoins:8},{id:"titre_champion",title:"Titre Champion",description:"Titre spcial dans ton profil",priceCoins:20,requiresXp:100}];function _k(){return A0}async function C0(r){return(await qt(_t(ue,"users",r,"inventory"))).docs.map(t=>({id:t.id,...t.data()}))}async function vk(r,e){const t=A0.find(h=>h.id===e);if(!t)throw new Error("Item inconnu");const s=be(ue,"users",r,"stats","main"),o=be(ue,"users",r,"inventory",e);return await ri(ue,async h=>{const[f,p]=await Promise.all([h.get(s),h.get(o)]),y=f.exists()?f.data():await Op(r);if(p.exists())throw new Error("Dj possd");const v=y.coins||0,T=y.xp||0;if(v<t.priceCoins)throw new Error("Pas assez de pices");if(t.requiresXp&&T<t.requiresXp)throw new Error("XP insuffisant");return h.set(o,{acquiredAt:Ye(),title:t.title,description:t.description,priceCoins:t.priceCoins,requiresXp:t.requiresXp||null}),h.set(s,{coins:v-t.priceCoins,xp:T,updatedAt:Ye()},{merge:!0}),{coins:v-t.priceCoins,xp:T}})}const L_=[{id:"streak_3",title:"Srie 3",description:"3 jours de suite",icon:""},{id:"streak_7",title:"Srie 7",description:"7 jours de suite",icon:""},{id:"retry_5",title:"Persvrant",description:"5 erreurs revues",icon:""},{id:"tag_master_3",title:"Matre x3",description:"3 tags matriss",icon:""},{id:"tag_master_10",title:"Matre x10",description:"10 tags matriss",icon:""},{id:"fractions_first_mastery",title:"As des fractions",description:"1er tag fractions matris",icon:""},{id:"grammar_first_mastery",title:"As de grammaire",description:"1er tag grammaire matris",icon:""},{id:"sessions_10",title:"Marathon 10",description:"10 sances termines",icon:""}];function wk(r){return 100+(Math.max(1,Math.floor(r))-1)*50}function vl(r){let e=Math.max(0,Math.floor(r)),t=1;for(;;){const s=wk(t);if(e<s)return{level:t,xpIntoLevel:e,xpForNext:s};e-=s,t+=1}}function Ek(r){return Math.max(0,r.answeredCount)*2+10}function Tk(r){return r>=70?"mastered":r>=30?"progressing":"discovering"}function R0(r){const e={...r.masteryByTag||{}},t=r.isCorrect?8:2;return r.questionTags.forEach(s=>{const o=e[s]?.score||0,l=Math.max(0,Math.min(100,o+t));e[s]={score:l,state:Tk(l),updatedAt:r.timestamp}}),e}async function P0(r,e,t){const s=Zs.find(h=>h.id===e);if(!s)throw new Error("Collectible inconnu");const o=be(ue,"users",r,"meta","rewards"),l=t?be(ue,"users",r,"rewardEvents",t):null;await ri(ue,async h=>{const[f,p]=await Promise.all([h.get(o),l?h.get(l):Promise.resolve(null)]);if(p&&p.exists())return;const y=f.exists()?f.data():null,v={xp:y?.xp||0,level:y?.level||1,badges:Array.isArray(y?.badges)?y.badges:[],masteryByTag:typeof y?.masteryByTag=="object"&&y?.masteryByTag?y.masteryByTag:{},collectibles:y?.collectibles&&Array.isArray(y.collectibles.owned)?y.collectibles:{owned:[],equippedAvatarId:void 0},updatedAt:y?.updatedAt},T=new Set(v.collectibles?.owned||[]);T.add(e);const C=s.type==="avatar"&&!v.collectibles?.equippedAvatarId;h.set(o,{collectibles:{owned:Array.from(T),equippedAvatarId:C?e:v.collectibles?.equippedAvatarId},updatedAt:Ye()},{merge:!0}),l&&h.set(l,{type:"collectible",collectibleId:e,createdAt:Ye()})})}async function k0(r,e){if(!Zs.find(o=>o.id===e&&o.type==="avatar"))throw new Error("Avatar inconnu");const s=be(ue,"users",r,"meta","rewards");await ri(ue,async o=>{const l=await o.get(s),h=l.exists()?l.data():null,f=new Set(h?.collectibles?.owned||[]);if(!f.has(e))throw new Error("Avatar non possd");o.set(s,{collectibles:{owned:Array.from(f),equippedAvatarId:e},updatedAt:Ye()},{merge:!0})})}function Mp(){const r=new Date,t=new Intl.DateTimeFormat("fr-FR",{timeZone:"Europe/Paris",year:"numeric",month:"2-digit",day:"2-digit"}).formatToParts(r),s=t.find(h=>h.type==="year")?.value,o=t.find(h=>h.type==="month")?.value,l=t.find(h=>h.type==="day")?.value;return`${s}-${o}-${l}`}const nc=[{id:"session_one",title:"Faire 1 sance",description:"Lance et termine une sance.",target:1,progress:0,completed:!1},{id:"answer_ten",title:"Rpondre  10 questions",description:"Rponds  10 questions, mme courtes.",target:10,progress:0,completed:!1},{id:"grammar_one",title:"Grammaire : 1 question",description:"Travaille un tag de grammaire.",target:1,progress:0,completed:!1},{id:"fractions_five",title:"Fractions : 5 questions",description:"Rvise les fractions (maths).",target:5,progress:0,completed:!1}];function x0(){const r=[nc[0],nc[1]],e=[nc[2],nc[3]],t=e[Math.floor(Math.random()*e.length)];return[...r,t].map(s=>({...s}))}async function N0(r){const e=Mp(),t=be(ue,"users",r,"meta","daily"),s=await Dn(t),o=s.exists()?s.data():null;if(!o||o.dateKey!==e){const l={dateKey:e,quests:x0(),updatedAt:Ye()};return await Sr(t,l),l}return o}async function Ik(r){return N0(r)}async function Sk(r){const{uid:e,sessionId:t,answeredCount:s,tagsUsed:o}=r,l=be(ue,"users",e,"meta","daily"),h=be(ue,"users",e,"meta","rewards"),f=be(ue,"users",e,"rewardEvents",`daily_${t}`),p=Mp();await N0(e);let y=null;if(await ri(ue,async v=>{const[T,C,O]=await Promise.all([v.get(l),v.get(f),v.get(h)]);if(C.exists())return;const $=T.exists()?T.data():null;if(!$||$.dateKey!==p){v.set(l,{dateKey:p,quests:x0(),updatedAt:Ye()});return}const z=o||[],D=z.filter(J=>J.includes("grammaire")||J.includes("grammar")).length,Z=z.filter(J=>J.startsWith("math_fractions")).length;let K=0,ae=!1;const H=$.quests.map(J=>{let re=0;J.id==="session_one"&&(re=1),J.id==="answer_ten"&&(re=s),J.id==="grammar_one"&&(re=D>0?1:0),J.id==="fractions_five"&&(re=Z);const S=Math.min(J.target,(J.progress||0)+re),A=J.completed,P=S>=J.target;return P&&!A&&(ae=!0,K+=15),{...J,progress:S,completed:P}});if(ae){const J=O.exists()?O.data():{},S=(J?.xp||0)+K,A=vl(S);v.set(h,{xp:S,level:A.level,badges:J?.badges||[],masteryByTag:J?.masteryByTag||{},collectibles:J?.collectibles||{owned:[],equippedAvatarId:void 0},updatedAt:Ye()},{merge:!0});const P=new Set(J?.collectibles?.owned||[]),x=Zs.filter(b=>b.rarity==="common"&&b.type==="sticker"&&!P.has(b.id));x.length&&(y=x[Math.floor(Math.random()*x.length)].id)}v.set(l,{dateKey:p,quests:H,updatedAt:Ye()},{merge:!0}),v.set(f,{sessionId:t,createdAt:Ye()})}),y)try{await P0(e,y,`daily_sticker_${t}`)}catch(v){console.error("unlockCollectible daily",v)}}async function Ak(r){const{uid:e}=r,t=r.dateKey||Mp(),s=r.sessionsDelta??0,o=r.xpDelta??0,l=be(ue,"users",e,"stats","days",t);await Sr(l,{dateKey:t,sessions:s,xp:o,updatedAt:Ye()},{merge:!0})}async function Ck(r){const e=_t(ue,"users",r,"stats","days");return(await qt(Qn(e,HP("dateKey","desc"),bp(7)))).docs.map(o=>o.data()).sort((o,l)=>o.dateKey.localeCompare(l.dateKey))}const F_=[{id:"fr",title:"Franais"},{id:"math",title:"Maths"},{id:"en",title:"Anglais"},{id:"es",title:"Espagnol"},{id:"hist",title:"Histoire"}];function Rk(){const{user:r}=Ar(),{rewards:e}=Vl(r?.uid||null),[t,s]=ge.useState([]),[o,l]=ge.useState("fr"),[h,f]=ge.useState([]),[p,y]=ge.useState(null),[v,T]=ge.useState([]),[C,O]=ge.useState(null),[$,z]=ge.useState([]);return ge.useEffect(()=>{(async()=>{try{const D=await ok();s(D.length?D:F_)}catch{s(F_)}})()},[]),ge.useEffect(()=>{(async()=>{const D=await I0(o,{uid:r?.uid});f(D)})()},[o,r]),ge.useEffect(()=>{r&&(async()=>{const D=await Op(r.uid);y(D);const Z=await C0(r.uid);T(Z);const K=await Ik(r.uid);O(K);const ae=await Ck(r.uid);z(ae)})()},[r]),E.jsxs("div",{className:"container grid",children:[E.jsx("div",{className:"card",children:E.jsx("div",{className:"row",style:{justifyContent:"space-between"},children:E.jsxs("div",{children:[E.jsx("h2",{style:{margin:0},children:"Salut Malo "}),E.jsx("div",{className:"small",children:"Choisis une matire, puis un thme. Objectif : 10 questions par jour."}),E.jsxs("div",{className:"small",style:{marginTop:6},children:["Niveau ",e.level||1,"  XP ",e.xp||0]}),(e.badges||[]).length?E.jsx("div",{className:"row",style:{marginTop:6,gap:6},children:e.badges?.map(D=>{const Z=L_.find(K=>K.id===D);return E.jsxs("span",{className:"pill",style:{padding:"4px 8px",border:"1px solid rgba(255,255,255,0.2)"},children:[Z?.icon||""," ",Z?.title||D]},D)})}):null]})})}),C&&E.jsxs("div",{className:"card",children:[E.jsx("h3",{style:{marginTop:0},children:"Dfis du jour"}),E.jsx("div",{className:"grid",style:{gap:10},children:C.quests.slice(0,3).map(D=>{const Z=Math.min(100,Math.round(D.progress/D.target*100));return E.jsxs("div",{className:"pill",style:{position:"relative",overflow:"hidden"},children:[E.jsxs("div",{style:{fontWeight:700,display:"flex",alignItems:"center",gap:6},children:[D.completed?"":""," ",D.title]}),E.jsxs("div",{className:"small",children:[D.progress,"/",D.target]}),E.jsx("div",{style:{height:8,background:"rgba(255,255,255,0.1)",borderRadius:999,marginTop:6},children:E.jsx("div",{style:{width:`${Z}%`,height:"100%",background:D.completed?"linear-gradient(90deg,#7fffb2,#2ecc71)":"linear-gradient(90deg,#7aa2ff,#7fffb2)",transition:"width 0.6s ease"}})})]},D.id)})})]}),$.length?E.jsxs("div",{className:"card",children:[E.jsx("h3",{style:{marginTop:0},children:"7 derniers jours"}),E.jsx("div",{className:"row",style:{gap:8,flexWrap:"wrap"},children:$.map(D=>{const Z=(D.sessions||0)>0;return E.jsxs("div",{className:"pill",style:{minWidth:80,textAlign:"center",background:Z?"rgba(46,204,113,0.16)":"rgba(255,255,255,0.08)",borderColor:Z?"rgba(46,204,113,0.5)":"rgba(255,255,255,0.18)"},children:[E.jsx("div",{style:{fontWeight:700},children:D.dateKey.slice(5)}),E.jsx("div",{className:"small",children:Z?"Sance ":""}),E.jsxs("div",{className:"small",children:["XP ",D.xp||0]})]},D.dateKey)})})]}):null,E.jsxs("div",{className:"grid2",children:[E.jsxs("div",{className:"card",children:[E.jsx("h3",{style:{marginTop:0},children:"Matire"}),E.jsx("select",{className:"input",value:o,onChange:D=>l(D.target.value),children:t.map(D=>E.jsx("option",{value:D.id,children:D.title},D.id))}),E.jsx("div",{className:"small",style:{marginTop:8},children:"Priorits : Franais (grammaire & conjugaison) + Maths (fractions)."})]}),E.jsxs("div",{className:"card",children:[E.jsx("h3",{style:{marginTop:0},children:"Thmes"}),h.length===0?E.jsx("div",{className:"small",children:"Aucun thme pour linstant. (Parent : importe un pack JSON)"}):E.jsx("div",{className:"grid",children:h.map(D=>E.jsx(bs,{className:"btn secondary",to:`/theme/${D.id}`,children:D.title},D.id))})]})]}),v.length?E.jsxs("div",{className:"card",children:[E.jsx("h3",{style:{marginTop:0},children:"Inventaire"}),E.jsx("div",{className:"row",children:v.map(D=>E.jsx("span",{className:"badge",children:D.title||D.id},D.id))})]}):null,E.jsxs("div",{className:"card",children:[E.jsx("h3",{style:{marginTop:0},children:"Badges"}),E.jsx("div",{className:"grid2",children:L_.map(D=>{const Z=(e.badges||[]).includes(D.id);return E.jsxs("div",{className:"pill",style:{opacity:Z?1:.35,borderColor:Z?"rgba(122,162,255,0.6)":"rgba(255,255,255,0.18)",display:"flex",flexDirection:"column",gap:4},children:[E.jsxs("div",{style:{fontWeight:700},children:[D.icon," ",D.title]}),E.jsx("div",{className:"small",children:D.description})]},D.id)})})]})]})}function Pk(){const{user:r,signInGoogle:e}=Ar(),t=Fc();return ge.useEffect(()=>{r&&t("/")},[r]),E.jsx("div",{className:"container",children:E.jsxs("div",{className:"card",children:[E.jsx("h2",{style:{marginTop:0},children:"Connexion"}),E.jsx("p",{className:"small",children:"Connexion Google recommande (simple sur tablette Android)."}),E.jsx("button",{className:"btn",onClick:e,children:"Se connecter avec Google"}),E.jsx("hr",{}),E.jsxs("p",{className:"small",children:["Astuce : aprs ta premire connexion (toi), va dans Firestore et mets ",E.jsxs("code",{children:["users/","{uid}",".role"]}),'  "parent".']})]})})}function kk(r,e){return r.type==="mcq"?e===r.answerIndex:r.type==="short_text"||r.type==="fill_blank"?r.expected.includes(Ho(e||"")):!1}function xk(r,e){return r===1?e?3:-1:r===2?e?5:-2:e?7:-3}function Nk(r){return Math.max(0,Math.min(100,r))}function bk(r){return r>=80?"mastered":r>=60?"nearly":r>=30?"developing":"weak"}function b0(r){return r.toISOString().slice(0,10)}function Dk(r,e){const t=new Date(r+"T00:00:00");return t.setDate(t.getDate()+e),b0(t)}function Vk(r,e,t){const s=Math.max(0,Math.min(100,r));let o=1;return s>=81||e==="mastered"?o=10:s>=61||e==="nearly"?o=4:s>=31||e==="developing"?o=2:o=1,Dk(t,o)}async function Ok(r){const{uid:e,subjectId:t,themeId:s,answers:o,exercises:l,durationSec:h}=r,p=b0(new Date),y=be(_t(ue,"users",e,"attempts")),v=_t(ue,"users",e,"attemptItems"),T=be(ue,"users",e,"progressSummary","main"),C=l.map((ie,_e)=>{const Me=kk(ie,o[ie.id]);return{exerciseId:ie.id,subjectId:t,themeId:s,difficulty:ie.difficulty,tags:ie.tags?.slice(0,3)||[],correct:Me,index:_e,prompt:ie.prompt,choices:Array.isArray(ie.choices)?ie.choices:null,readingContext:ie.readingContext||null}}),O=C.filter(ie=>ie.correct).length,$=C.length,z=new Map;C.forEach(ie=>{const _e=xk(ie.difficulty,ie.correct);ie.tags.forEach(Me=>{const Ae=z.get(Me)||{delta:0,correct:0,wrong:0,results:[]};Ae.delta+=_e,Ae.correct+=ie.correct?1:0,Ae.wrong+=ie.correct?0:1,Ae.results.push(ie.correct),z.set(Me,Ae)})});const D=Array.from(z.keys()),Z=await Promise.all(D.map(ie=>Dn(be(ue,"users",e,"tagProgress",ie)))),K=Vp(ue),ae={subjectId:t,themeId:s,score:O,outOf:$,durationSec:h,itemsCount:C.length,date:p,createdAt:Ye()};K.set(y,ae),C.forEach(ie=>{const _e=be(v);K.set(_e,{...ie,createdAt:Ye(),answer:o[ie.exerciseId]??null})});const H={weak:0,developing:0,nearly:0,mastered:0},J={};D.forEach((ie,_e)=>{const Me=Z[_e],Ae=Me.exists()?Me.data():null,G=z.get(ie),le=[...Array.isArray(Ae?.last7Results)?Ae.last7Results:[],...G.results].slice(-7),j={correct:le.filter(nn=>nn).length,wrong:le.filter(nn=>!nn).length};let Q=Ae?.streakCorrect||0,Ce=Ae?.streakWrong||0;G.results.forEach(nn=>{nn?(Q+=1,Ce=0):(Ce+=1,Q=0)});const xe=typeof Ae?.mastery=="number"?Ae.mastery:0,Ve=Nk(xe+G.delta),Oe=bk(Ve),je=Ae?.bucket;je&&(H[je]-=1),H[Oe]+=1;const Le=Vk(Ve,Oe,p),Ke=be(ue,"users",e,"tagProgress",ie),wt={tagId:ie,mastery:Ve,bucket:Oe,attempts:(Ae?.attempts||0)+G.results.length,correctAnswers:(Ae?.correctAnswers||0)+G.correct,wrongAnswers:(Ae?.wrongAnswers||0)+G.wrong,last7Results:le,last7:j,lastSeenAt:Ye(),lastCorrectAt:G.correct>0?Ye():Ae?.lastCorrectAt||null,streakCorrect:Q,streakWrong:Ce,lastDelta:G.delta,nextDueDate:Le,updatedAt:Ye()};J[ie]=wt,K.set(Ke,wt,{merge:!0})});const re=await Dn(T),S=re.exists()?re.data():null,A=S?.masteryBuckets||{weak:0,developing:0,nearly:0,mastered:0},P={weak:(A.weak||0)+H.weak,developing:(A.developing||0)+H.developing,nearly:(A.nearly||0)+H.nearly,mastered:(A.mastered||0)+H.mastered},x=Object.values(J).sort((ie,_e)=>ie.mastery-_e.mastery).map(ie=>ie.tagId),b=Array.isArray(S?.topWeakTags)?S.topWeakTags:[],k=Array.from(new Set([...x,...b])).slice(0,3),R={totalAnswers:(S?.totalAnswers||0)+$,correctAnswers:(S?.correctAnswers||0)+O,totalAttempts:(S?.totalAttempts||0)+1,masteryBuckets:P,lastAttemptId:y.id,lastDate:p,updatedAt:Ye(),topWeakTags:k};return K.set(T,R,{merge:!0}),await K.commit(),{attemptId:y.id,score:O,outOf:$,summary:R,tagsUpdated:J}}function Mk(r){const e=[];return Array.isArray(r.exercises)&&e.push(...r.exercises),Array.isArray(r.readings)&&r.readings.forEach(t=>{Array.isArray(t.questions)&&t.questions.forEach(s=>{e.push({...s,readingContext:{readingId:t.id,title:t.title,text:t.text}})})}),e}async function jk(r){const e=be(ue,"users",r,"meta","rewards"),t=await Dn(e);if(t.exists()){const o=t.data();return{xp:o.xp||0,level:o.level||1,badges:Array.isArray(o.badges)?o.badges:[],masteryByTag:typeof o.masteryByTag=="object"&&o.masteryByTag?o.masteryByTag:{},collectibles:o.collectibles&&Array.isArray(o.collectibles.owned)?{owned:o.collectibles.owned,equippedAvatarId:o.collectibles.equippedAvatarId}:{owned:[],equippedAvatarId:void 0},updatedAt:o.updatedAt}}const s={xp:0,level:1,badges:[],masteryByTag:{},collectibles:{owned:[],equippedAvatarId:void 0},updatedAt:Ye()};return await Sr(e,s),s}async function Lk(r,e,t){if(t<=0)return await jk(r);const s=be(ue,"users",r,"meta","rewards"),o=e?be(ue,"users",r,"rewardEvents",e):null;let l=null;return await ri(ue,async h=>{const[f,p]=await Promise.all([o?h.get(o):Promise.resolve(null),h.get(s)]);if(o&&f&&f.exists()){l=p.exists()?p.data():{xp:0,level:1};return}const y=p.exists()?p.data():null,v={xp:y?.xp||0,level:y?.level||1,badges:Array.isArray(y?.badges)?y.badges:[],masteryByTag:typeof y?.masteryByTag=="object"&&y?.masteryByTag?y.masteryByTag:{},collectibles:y?.collectibles&&Array.isArray(y.collectibles.owned)?y.collectibles:{owned:[],equippedAvatarId:void 0},updatedAt:y?.updatedAt},T=Math.max(0,(v.xp||0)+t),C=vl(T),O={xp:T,level:C.level,badges:v.badges||[],masteryByTag:v.masteryByTag||{},collectibles:v.collectibles||{owned:[],equippedAvatarId:void 0},updatedAt:Ye()};h.set(s,O,{merge:!0}),o&&h.set(o,{sessionId:e,deltaXp:t,awardedAt:Ye()}),l=O}),l||{xp:0,level:1}}async function Fk(r){const{uid:e,sessionId:t,items:s}=r,o=be(ue,"users",e,"meta","rewards");await ri(ue,async l=>{const h=await l.get(o),f=h.exists()?h.data():null,p={xp:f?.xp||0,level:f?.level||1,badges:Array.isArray(f?.badges)?f.badges:[],masteryByTag:typeof f?.masteryByTag=="object"&&f?.masteryByTag?f.masteryByTag:{},updatedAt:f?.updatedAt},y=Ye(),v=s.map(O=>({item:O,evRef:be(ue,"users",e,"rewardEvents",`${t}_${O.exerciseId}`)})),T=await Promise.all(v.map(O=>l.get(O.evRef)));let C=p.masteryByTag||{};v.forEach((O,$)=>{if(T[$].exists())return;const D=Array.isArray(O.item.tags)?O.item.tags:[];C=R0({masteryByTag:C,questionTags:D,isCorrect:O.item.correct,timestamp:y})}),v.forEach((O,$)=>{if(T[$].exists())return;const D=Array.isArray(O.item.tags)?O.item.tags:[];l.set(O.evRef,{sessionId:t,exerciseId:O.item.exerciseId,correct:O.item.correct,tags:D,createdAt:y})}),l.set(o,{...p,masteryByTag:C,updatedAt:Ye()},{merge:!0})})}async function Uk(r){const{uid:e,rewards:t}=r,s=[],o=Array.isArray(t.badges)?t.badges:[],l=await Dn(be(ue,"users",e,"stats","main")),h=await Dn(be(ue,"users",e,"progressSummary","main")),f=l.exists()?l.data():{},p=h.exists()?h.data():{},y=f.streakDays||0,v=p.totalAttempts||0,T=t.masteryByTag||{},C=Object.entries(T).filter(([,K])=>K?.state==="mastered").map(([K])=>K),$=(await qt(Qn(_t(ue,"users",e,"rewardEvents"),Er("correct","==",!1),bp(5)))).size,z=K=>o.includes(K)||s.includes(K);!z("streak_3")&&y>=3&&s.push("streak_3"),!z("streak_7")&&y>=7&&s.push("streak_7"),!z("sessions_10")&&v>=10&&s.push("sessions_10"),!z("retry_5")&&$>=5&&s.push("retry_5");const D=C.length;if(!z("tag_master_3")&&D>=3&&s.push("tag_master_3"),!z("tag_master_10")&&D>=10&&s.push("tag_master_10"),!z("fractions_first_mastery")&&C.some(K=>K.startsWith("math_fractions"))&&s.push("fractions_first_mastery"),!z("grammar_first_mastery")&&C.some(K=>K.startsWith("fr_grammaire"))&&s.push("grammar_first_mastery"),!s.length)return[];const Z=be(ue,"users",e,"meta","rewards");return await ri(ue,async K=>{const ae=await K.get(Z),H=ae.exists()?ae.data():{},J=Array.isArray(H.badges)?H.badges:[],re=s.filter(S=>!J.includes(S));re.length&&(K.set(Z,{badges:[...J,...re],updatedAt:Ye()},{merge:!0}),re.forEach(S=>{K.set(be(ue,"users",e,"rewardEvents",`badge_${S}`),{type:"badge",badgeId:S,createdAt:Ye()})}))}),s}function Bk({rewards:r}){const{xp:e,level:t}=r||{xp:0,level:1},s=vl(e||0),o=Math.min(100,Math.max(0,Math.round(s.xpIntoLevel/s.xpForNext*100)));return E.jsxs("div",{className:"card",style:{display:"flex",flexDirection:"column",gap:6},children:[E.jsxs("div",{className:"row",style:{justifyContent:"space-between",alignItems:"center"},children:[E.jsxs("div",{style:{fontWeight:800,fontSize:"1.05rem"},children:["Niveau ",s.level]}),E.jsxs("div",{className:"small",children:["XP total : ",e||0]})]}),E.jsxs("div",{className:"small",children:["Prochain niveau : ",s.xpIntoLevel,"/",s.xpForNext," XP"]}),E.jsx("div",{style:{height:12,background:"rgba(255,255,255,0.08)",borderRadius:999,overflow:"hidden"},children:E.jsx("div",{style:{height:"100%",width:`${o}%`,background:"linear-gradient(90deg,#7aa2ff,#2ecc71)",transition:"width 0.6s ease"}})})]})}function zk(r){const{accuracy:e,weakestTag:t,improvedTag:s}=r,o=t||s||"ce tag";return e<50?`On avance : demain, on reprend ${o} avec 5 minutes de rvision.`:e<80?`Bien jou : encore un effort sur ${o} et a passe.`:`Super : tu matrises bien ${s||o}, on peut monter dun cran.`}const qk=[{rarity:"common",weight:.8},{rarity:"rare",weight:.18},{rarity:"epic",weight:.02}];function $k(r){const e=r();let t=0;for(const{rarity:s,weight:o}of qk)if(t+=o,e<=t)return s;return"common"}function Wk(r=[],e={}){const t=e.rng||Math.random,s=new Set(r||[]);let o=null,l=0;for(;l<4&&o===null;){const f=$k(t),p=Zs.filter(y=>y.rarity===f&&!s.has(y.id));if(p.length){o=p[Math.floor(t()*p.length)].id;break}l++}if(o)return o;const h=Zs.filter(f=>f.rarity==="common"&&!s.has(f.id));return h.length?h[Math.floor((e.rng||Math.random)()*h.length)].id:null}function U_(r,e){return r.type==="mcq"?e===r.answerIndex:r.type==="short_text"||r.type==="fill_blank"?r.expected.includes(Ho(e||"")):!1}function rc(r){const e=[],t=/_([^_]+)_/g;let s=0,o,l=0;for(;(o=t.exec(r))!==null;)o.index>s&&e.push(r.slice(s,o.index)),e.push(E.jsx("span",{style:{textDecoration:"underline"},children:o[1]},`u-${l++}`)),s=t.lastIndex;return s<r.length&&e.push(r.slice(s)),e}function Hk(){const{themeId:r}=PT(),{user:e}=Ar(),{rewards:t}=Vl(e?.uid||null),[s,o]=ge.useState(null),[l,h]=ge.useState([]),[f,p]=ge.useState({}),[y]=ge.useState(()=>Date.now()),[v,T]=ge.useState(null),[C,O]=ge.useState([]),[$,z]=ge.useState([]),[D,Z]=ge.useState(!1),[K,ae]=ge.useState(null),[H,J]=ge.useState(!1),re=Fc(),[S,A]=ge.useState("");ge.useEffect(()=>{(async()=>{if(!r)return;const x=await Dn(be(ue,"themes",r)),b=x.exists()?{id:r,...x.data()}:null;o(b);const k=await S0(r,{uid:e?.uid});let ie=Array.isArray(b?.readings)?b.readings:[];try{const Ae=await ak(r);Ae.length&&(ie=Ae)}catch{}const Me=[...Mk({exercises:k,readings:ie})].sort(()=>Math.random()-.5);h(Me.slice(0,10)),p({}),T(null),z([]),Z(!1)})()},[r,e]);const P=async()=>{if(!e||!r||!s)return;const x=Math.max(1,Math.round((Date.now()-y)/1e3)),b=l.map(we=>({exerciseId:we.id,difficulty:we.difficulty,tags:we.tags||[],correct:U_(we,f[we.id])})),k=await Ok({uid:e.uid,subjectId:s.subjectId,themeId:r,answers:f,exercises:l,durationSec:x}),R=await yk({uid:e.uid,subjectId:s.subjectId,items:b,existingAttemptId:k.attemptId}),ie=l.reduce((we,ft)=>{const Je=f[ft.id];return Je==null||typeof Je=="string"&&Je.trim()===""?we:we+1},0),_e=t?.masteryByTag||{};let Me=_e;b.forEach(we=>{Me=R0({masteryByTag:Me,questionTags:we.tags||[],isCorrect:we.correct,timestamp:new Date})});const Ae=Object.entries(Me).filter(([we,ft])=>ft?.state==="mastered"&&_e?.[we]?.state!=="mastered").length,G=Ek({answeredCount:ie}),pe=t;let le=null,j=!1,Q=[],Ce=null;try{const we=await Lk(e.uid,k.attemptId||null,G);if(le=we,j=(we?.level||1)>(t?.level||1),await Fk({uid:e.uid,sessionId:k.attemptId||r,items:b}),Q=await Uk({uid:e.uid,rewards:we||t})||[],G>=20||j||Ae>0){const Je=we?.collectibles?.owned||t?.collectibles?.owned||[];if(Ce=Wk(Je),Ce){const ts=k.attemptId?`collectible_${k.attemptId}`:void 0;await P0(e.uid,Ce,ts)}}Sk({uid:e.uid,sessionId:k.attemptId||r,answeredCount:ie,tagsUsed:b.flatMap(Je=>Je.tags||[])}).catch(Je=>console.error("updateDailyProgress failed",Je)),Ak({uid:e.uid,sessionsDelta:1,xpDelta:G}).catch(Je=>console.error("upsertDayStat failed",Je))}catch(we){console.error("awardSessionRewards failed",we)}ae({deltaXp:G,levelUp:j,newRewards:le,prevRewards:pe,unlockedBadges:Q,collectibleId:Ce});const xe=new Set(l.flatMap(we=>we.tags||[])),Ve=Object.values(k.tagsUpdated||{}).filter(we=>we&&xe.has(we.tagId||"")).sort((we,ft)=>(we.mastery??0)-(ft.mastery??0)).slice(0,3).map(we=>we.tagId);O(Ve),T({score:R.score,outOf:R.outOf,durationSec:x,...R});const Oe=b.filter(we=>!we.correct).flatMap(we=>we.tags||[]),je=new Map;b.forEach(we=>{const ft=we.correct?8:2;(we.tags||[]).forEach(Je=>{je.set(Je,(je.get(Je)||0)+ft)})});let Le;je.size&&(Le=Array.from(je.entries()).sort((we,ft)=>ft[1]-we[1])[0]?.[0]);const Ke=R.outOf?R.score/R.outOf*100:0,wt=zk({accuracy:Ke,weakestTag:Oe[0]||C[0],improvedTag:Le}),nn=l.map((we,ft)=>{const Je=f[we.id],ts=U_(we,Je);let Vn="",In="";if(we.type==="mcq"){const Cr=we;Vn=Cr.choices[Cr.answerIndex]||"",In=typeof Je=="number"&&Cr.choices[Je]||""}else(we.type==="short_text"||we.type==="fill_blank")&&(Vn=we.expected[0]||"",In=Je||"");return{id:we.id,prompt:we.prompt,correct:ts,expected:Vn||"",userAnswer:(In??"").toString()||"",idx:ft+1}});A(wt),z(nn),Z(!0),J(!0)};if(!r)return E.jsx("div",{className:"container",children:E.jsx("div",{className:"card",children:"Thme introuvable."})});if(D&&$.length){const x=K?.prevRewards?.xp??t?.xp??0,b=K?.newRewards?.xp??x,k=x,R=b;K?.deltaXp;const ie=v?(()=>{const G=v.outOf?v.score/v.outOf*100:0;return G>=80?"Super ! Continue comme a.":G>=50?"Bien jou ! On consolide et a va monter.":"Bien essay. On progresse en sentranant."})():"",_e=K?.collectibleId?Zs.find(G=>G.id===K?.collectibleId):null,Me=_e?.rarity==="epic"?"pique":_e?.rarity==="rare"?"Rare":"Commun",Ae=async()=>{if(!(!e||!_e||_e.type!=="avatar")){try{await k0(e.uid,_e.id)}catch(G){console.error("equipAvatar failed",G)}J(!1)}};return E.jsxs("div",{className:"container grid",style:{position:"relative"},children:[H&&E.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999},children:E.jsxs("div",{className:"card",style:{maxWidth:460},children:[E.jsxs("h3",{style:{marginTop:0},children:["Bravo ",e?.displayName?.split(" ")[0]||"!"]}),E.jsxs("div",{className:"small",children:["Score ",v?.score,"/",v?.outOf]}),E.jsxs("div",{className:"small",style:{marginTop:6},children:["+",K?.deltaXp??0," XP"]}),K?.levelUp&&E.jsxs("div",{className:"small",style:{marginTop:6},children:[" Niveau ",K?.newRewards?.level]}),_e&&E.jsxs("div",{className:"pill",style:{marginTop:10,display:"flex",alignItems:"center",gap:10},children:[E.jsx("div",{style:{fontSize:"1.6rem"},children:_e.icon}),E.jsxs("div",{children:[E.jsxs("div",{style:{fontWeight:800},children:[" Nouveau ! ",_e.title]}),E.jsxs("div",{className:"small",children:[_e.type==="avatar"?"Avatar":"Sticker","  ",Me]})]})]}),K?.unlockedBadges?.length?E.jsxs("div",{className:"small",style:{marginTop:8},children:["Nouveau badge : ",K.unlockedBadges.map(G=>E.jsx("span",{className:"badge",children:G},G))]}):null,ie&&E.jsx("div",{className:"small",style:{marginTop:8},children:ie}),E.jsxs("div",{className:"row",style:{marginTop:12,flexWrap:"wrap",gap:8},children:[_e?.type==="avatar"&&E.jsx("button",{className:"btn",onClick:Ae,children:"quiper"}),_e&&E.jsx("button",{className:"btn secondary",onClick:()=>{J(!1),re("/collection")},children:"Voir ma collection"}),E.jsx("button",{className:"btn",onClick:()=>J(!1),children:"Voir la correction"})]})]})}),E.jsxs("div",{className:"card",children:[E.jsxs("h2",{style:{margin:0},children:["Corrections  ",s?.title]}),v&&E.jsxs("div",{className:"small",children:["Score ",E.jsxs("strong",{children:[v.score,"/",v.outOf]}),"  ",v.durationSec,"s  +",v.xpGain," XP  +",v.coinsGain," pices"]}),K&&E.jsxs("div",{className:"small",style:{marginTop:8},children:["+",K.deltaXp," XP ",K.levelUp?`  Niveau ${K.newRewards?.level}`:""]}),ie&&E.jsx("div",{className:"small",style:{marginTop:8},children:ie})]}),E.jsxs("div",{className:"card",children:[E.jsx("div",{className:"grid",children:$.map(G=>E.jsxs("div",{className:"pill",style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:6,background:G.correct?"rgba(46, 204, 113, 0.12)":"rgba(255, 90, 111, 0.12)",border:G.correct?"1px solid rgba(46, 204, 113, 0.4)":"1px solid rgba(255, 90, 111, 0.4)"},children:[E.jsxs("div",{className:"small",children:["Question ",G.idx,"  ",G.correct?E.jsx("span",{className:"badge",style:{borderColor:"rgba(46,204,113,.6)",color:"#7fffb2"},children:" Bonne rponse"}):E.jsx("span",{className:"badge",style:{borderColor:"rgba(255,90,111,.6)",color:"#ff9fb0"},children:" Mauvaise rponse"})]}),E.jsx("div",{style:{fontWeight:700},children:G.prompt}),E.jsxs("div",{className:"small",children:["Ta rponse : ",E.jsx("strong",{children:G.userAnswer})]}),!G.correct&&E.jsxs("div",{className:"small",children:["Correction : ",E.jsx("strong",{children:G.expected})]})]},G.id))}),E.jsxs("div",{className:"row",style:{marginTop:16},children:[E.jsx("button",{className:"btn",onClick:()=>re("/"),children:"Retour  laccueil"}),E.jsx("button",{className:"btn secondary",onClick:()=>{Z(!1),z([]),T(null),p({})},children:"Refaire une session"})]})]}),K&&E.jsxs("div",{className:"card",children:[E.jsx("h3",{style:{marginTop:0},children:"Progression XP"}),E.jsxs("div",{className:"small",children:["XP : ",k,"  ",R]}),(()=>{const G=vl(k),pe=vl(R),le=Math.min(100,Math.max(0,Math.round(pe.xpIntoLevel/pe.xpForNext*100)));return E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:"small",children:["Niveau : ",G.level,"  ",pe.level]}),E.jsx("div",{style:{height:12,background:"rgba(255,255,255,0.08)",borderRadius:999,overflow:"hidden",marginTop:8},children:E.jsx("div",{style:{height:"100%",width:`${le}%`,background:"linear-gradient(90deg,#7aa2ff,#2ecc71)",transition:"width 0.6s ease"}})})]})})()]})]})}return E.jsxs("div",{className:"container grid",children:[E.jsxs("div",{className:"card",children:[E.jsx("h2",{style:{margin:0},children:s?.title||"Session"}),E.jsx("div",{className:"small",children:"Fais de ton mieux. Objectif : rgularit "})]}),E.jsx(Bk,{rewards:t}),l.map((x,b)=>{const k=x.readingContext,R=k&&(b===0||l[b-1].readingContext?.readingId!==k.readingId);return E.jsxs("div",{className:"card",children:[R&&k&&E.jsxs("div",{style:{marginBottom:10},children:[E.jsxs("div",{className:"small",style:{marginBottom:4},children:["Lecture : ",k.title]}),E.jsx("div",{className:"small",style:{whiteSpace:"pre-wrap"},children:rc(k.text)}),E.jsx("hr",{})]}),E.jsxs("div",{className:"small",children:["Question ",b+1," / ",l.length," ",E.jsxs("span",{className:"badge",children:["Difficult ",x.difficulty]})]}),E.jsx("div",{style:{fontWeight:800,marginTop:6},children:rc(x.prompt)}),x.type==="mcq"&&E.jsx("div",{className:"grid",style:{marginTop:10},children:x.choices.map((ie,_e)=>E.jsx("button",{type:"button",className:"btn "+(f[x.id]===_e?"":"secondary"),onClick:()=>p(Me=>({...Me,[x.id]:_e})),style:{textAlign:"left",opacity:f[x.id]===_e?1:.85},"aria-pressed":f[x.id]===_e,children:rc(ie)},_e))}),x.type==="short_text"&&E.jsx("div",{style:{marginTop:10},children:E.jsx("input",{className:"input",placeholder:"Ta rponse",value:f[x.id]??"",onChange:ie=>p(_e=>({..._e,[x.id]:ie.target.value}))})}),x.type==="fill_blank"&&E.jsxs("div",{style:{marginTop:10},children:[E.jsx("div",{className:"small",children:rc(x.text)}),E.jsx("input",{className:"input",placeholder:"Le mot manquant",value:f[x.id]??"",onChange:ie=>p(_e=>({..._e,[x.id]:ie.target.value}))})]})]},x.id)}),E.jsxs("div",{className:"card",children:[E.jsxs("div",{className:"row",children:[E.jsx("button",{className:"btn",onClick:P,children:"Corriger et enregistrer"}),v&&E.jsxs("div",{className:"small",children:["Score ",E.jsxs("strong",{children:[v.score,"/",v.outOf]}),"  ",v.durationSec,"s"]})]}),v?.badges?.length?E.jsx("div",{className:"row",style:{marginTop:10},children:v.badges.map(x=>E.jsx("span",{className:"badge",children:x},x))}):null,C.length?E.jsxs("div",{className:"small",style:{marginTop:10},children:["Tags  renforcer (thme) : ",C.map(x=>E.jsx("span",{className:"badge",children:x},x))]}):null]}),$.length?E.jsxs("div",{className:"card",children:[E.jsx("h3",{style:{marginTop:0},children:"Corrections"}),E.jsx("div",{className:"grid",children:$.map(x=>E.jsxs("div",{className:"pill",style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:6},children:[E.jsxs("div",{className:"small",children:["Question ",x.idx,"  ",x.correct?E.jsx("span",{className:"badge",children:" Bonne rponse"}):E.jsx("span",{className:"badge",children:" Mauvaise rponse"})]}),E.jsx("div",{style:{fontWeight:700},children:x.prompt}),E.jsxs("div",{className:"small",children:["Ta rponse : ",E.jsx("strong",{children:x.userAnswer})]}),!x.correct&&E.jsxs("div",{className:"small",children:["Correction : ",E.jsx("strong",{children:x.expected})]})]},x.id))})]}):null]})}function Gk(){const[r,e]=ge.useState(""),t=async s=>{if(!s)return;e("Lecture du fichier");const o=await s.text();let l;try{l=JSON.parse(o)}catch{e(" JSON invalide");return}if(!l?.subjects?.length){e(" Format inattendu (subjects manquant)");return}e("Import en cours"),await lk(l),e(" Import termin")};return E.jsx("div",{className:"container",children:E.jsxs("div",{className:"card",children:[E.jsx("h2",{style:{marginTop:0},children:"Import dexercices (Parent)"}),E.jsx("p",{className:"small",children:"Importe un pack JSON (gnr par moi) : matires  thmes  exercices."}),E.jsx("input",{className:"input",type:"file",accept:".json,application/json",onChange:s=>t(s.target.files?.[0]||null)}),r&&E.jsx("p",{className:"small",style:{marginTop:10},children:r}),E.jsx("hr",{}),E.jsx("p",{className:"small",children:"Conseil : commence par importer les packs Franais (grammaire + conjugaison) et Maths (fractions)."})]})})}const D0={fr:"Franais",math:"Mathmatiques",en:"Anglais",es:"Espagnol",hist:"Histoire-Gographie"},Kk={discovering:"En dcouverte",progressing:"En progrs",mastered:"Matris"},Qk={discovering:"Tu commences",progressing:"Tu consolides",mastered:"Cest acquis"};function Xk(r){return r.replace(/^(fr|math|en|es|hist)_/i,"").replace(/_/g," ").replace(/\s+/g," ").trim().replace(/^./,e=>e.toUpperCase())}function Yk(r){const e=r.toLowerCase();return e.startsWith("math_")?"math":e.startsWith("en_")?"en":e.startsWith("es_")?"es":e.startsWith("hist_")?"hist":"fr"}function V0(r){return Jk[r]??{id:r,label:Xk(r),subject:Yk(r),theme:"Autres",order:9999,description:"Tag non catalogu (affichage automatique)."}}const Jk={fr_comprehension_idee_principale:{id:"fr_comprehension_idee_principale",label:"Ide principale",description:"Trouver le message global du texte.",subject:"fr",theme:"Comprhension",order:10},fr_comprehension_detail:{id:"fr_comprehension_detail",label:"Informations explicites",description:"Reprer une info donne directement.",subject:"fr",theme:"Comprhension",order:20},fr_comprehension_inference:{id:"fr_comprehension_inference",label:"Infrences",description:"Dduire une info implicite.",subject:"fr",theme:"Comprhension",order:30},fr_comprehension_vocabulaire_contexte:{id:"fr_comprehension_vocabulaire_contexte",label:"Vocabulaire en contexte",description:"Comprendre un mot grce au contexte.",subject:"fr",theme:"Comprhension",order:40},fr_comprehension_pronom_referent:{id:"fr_comprehension_pronom_referent",label:"Rfrents des pronoms",description:"Identifier  qui/quoi renvoie un pronom.",subject:"fr",theme:"Comprhension",order:50},fr_comprehension_connecteurs_logiques:{id:"fr_comprehension_connecteurs_logiques",label:"Connecteurs logiques",description:"Comprendre le lien entre les ides (cause, consquence).",subject:"fr",theme:"Comprhension",order:60},fr_comprehension_chronologie:{id:"fr_comprehension_chronologie",label:"Chronologie",description:"Reconstituer lordre des vnements.",subject:"fr",theme:"Comprhension",order:70},fr_comprehension_point_de_vue:{id:"fr_comprehension_point_de_vue",label:"Point de vue / narrateur",description:"Identifier qui parle et comment.",subject:"fr",theme:"Comprhension",order:80},fr_comprehension_intention_auteur:{id:"fr_comprehension_intention_auteur",label:"Intention du texte",description:"Informer, convaincre, raconter, expliquer",subject:"fr",theme:"Comprhension",order:90},fr_lexique_synonyme:{id:"fr_lexique_synonyme",label:"Synonymes",description:"Choisir le mot de sens proche.",subject:"fr",theme:"Lexique",order:110},fr_lexique_antonyme:{id:"fr_lexique_antonyme",label:"Antonymes",description:"Trouver le mot de sens contraire.",subject:"fr",theme:"Lexique",order:120},fr_lexique_famille_mots:{id:"fr_lexique_famille_mots",label:"Familles de mots",description:"Reconnatre des mots de mme famille.",subject:"fr",theme:"Lexique",order:130},fr_lexique_niveaux_langue:{id:"fr_lexique_niveaux_langue",label:"Niveaux de langue",description:"Soutenu, courant, familier.",subject:"fr",theme:"Lexique",order:140},fr_lexique_sens_propre_figure:{id:"fr_lexique_sens_propre_figure",label:"Sens propre / figur",description:"Distinguer sens littral et image.",subject:"fr",theme:"Lexique",order:150},fr_grammaire_classes_mots:{id:"fr_grammaire_classes_mots",label:"Classes de mots",description:"Nom, verbe, adjectif, pronom, dterminant",subject:"fr",theme:"Grammaire",order:210},fr_grammaire_fonctions:{id:"fr_grammaire_fonctions",label:"Fonctions",description:"Sujet, COD/COI, complments, attribut",subject:"fr",theme:"Grammaire",order:220},fr_grammaire_gn_gv:{id:"fr_grammaire_gn_gv",label:"Groupe nominal / verbal",description:"Identifier GN et GV.",subject:"fr",theme:"Grammaire",order:230},fr_grammaire_phrase_simple_complexe:{id:"fr_grammaire_phrase_simple_complexe",label:"Phrase simple / complexe",description:"Nombre de verbes conjugus, propositions.",subject:"fr",theme:"Grammaire",order:240},fr_grammaire_propositions:{id:"fr_grammaire_propositions",label:"Propositions",description:"Identifier proposition principale et subordonne.",subject:"fr",theme:"Grammaire",order:250},fr_grammaire_coordination_juxtaposition:{id:"fr_grammaire_coordination_juxtaposition",label:"Coordination / juxtaposition",description:"Et/mais/donc ou virgules/point-virgule.",subject:"fr",theme:"Grammaire",order:260},fr_grammaire_subordination:{id:"fr_grammaire_subordination",label:"Subordination",description:"Introduite par une conjonction / pronom relatif.",subject:"fr",theme:"Grammaire",order:270},fr_grammaire_proposition_relative:{id:"fr_grammaire_proposition_relative",label:"Proposition relative",description:"Relative introduite par qui/que/dont/o",subject:"fr",theme:"Grammaire",order:280},fr_grammaire_completive:{id:"fr_grammaire_completive",label:"Subordonne compltive",description:"Introduite par que/si, complte un verbe.",subject:"fr",theme:"Grammaire",order:290},fr_grammaire_circonstancielle:{id:"fr_grammaire_circonstancielle",label:"Subordonne circonstancielle",description:"Temps, cause, consquence, but, condition",subject:"fr",theme:"Grammaire",order:300},fr_grammaire_negation:{id:"fr_grammaire_negation",label:"Ngation",description:"Ne pas / jamais / plus / rien / personne",subject:"fr",theme:"Grammaire",order:310},fr_grammaire_interrogation:{id:"fr_grammaire_interrogation",label:"Interrogation",description:"Totale / partielle, formes et mots interrogatifs.",subject:"fr",theme:"Grammaire",order:320},fr_grammaire_voix_active_passive:{id:"fr_grammaire_voix_active_passive",label:"Voix active / passive",description:"Transformer une phrase.",subject:"fr",theme:"Grammaire",order:330},fr_grammaire_discours_direct_indirect:{id:"fr_grammaire_discours_direct_indirect",label:"Discours direct / indirect",description:"Transformer une parole rapporte.",subject:"fr",theme:"Grammaire",order:340},fr_conjugaison_present:{id:"fr_conjugaison_present",label:"Prsent",subject:"fr",theme:"Conjugaison",order:410},fr_conjugaison_imparfait:{id:"fr_conjugaison_imparfait",label:"Imparfait",subject:"fr",theme:"Conjugaison",order:420},fr_conjugaison_passe_simple:{id:"fr_conjugaison_passe_simple",label:"Pass simple",subject:"fr",theme:"Conjugaison",order:430},fr_conjugaison_futur_simple:{id:"fr_conjugaison_futur_simple",label:"Futur simple",subject:"fr",theme:"Conjugaison",order:440},fr_conjugaison_passe_compose:{id:"fr_conjugaison_passe_compose",label:"Pass compos",subject:"fr",theme:"Conjugaison",order:450},fr_conjugaison_plus_que_parfait:{id:"fr_conjugaison_plus_que_parfait",label:"Plus-que-parfait",subject:"fr",theme:"Conjugaison",order:460},fr_conjugaison_conditionnel_present:{id:"fr_conjugaison_conditionnel_present",label:"Conditionnel prsent",subject:"fr",theme:"Conjugaison",order:470},fr_conjugaison_imperatif:{id:"fr_conjugaison_imperatif",label:"Impratif",subject:"fr",theme:"Conjugaison",order:480},fr_conjugaison_subjonctif_present:{id:"fr_conjugaison_subjonctif_present",label:"Subjonctif prsent",subject:"fr",theme:"Conjugaison",order:490},fr_conjugaison_valeurs_temps:{id:"fr_conjugaison_valeurs_temps",label:"Valeurs des temps",description:"Imparfait (description/habitude), pass simple (actions)",subject:"fr",theme:"Conjugaison",order:500},fr_conjugaison_accord_participe_passe:{id:"fr_conjugaison_accord_participe_passe",label:"Accord du participe pass",description:"Avec tre/avoir (rgles de base).",subject:"fr",theme:"Conjugaison",order:510},fr_orthographe_accord_gn:{id:"fr_orthographe_accord_gn",label:"Accords dans le GN",description:"Dterminant/nom/adjectif.",subject:"fr",theme:"Orthographe",order:610},fr_orthographe_accord_sujet_verbe:{id:"fr_orthographe_accord_sujet_verbe",label:"Accord sujet-verbe",subject:"fr",theme:"Orthographe",order:620},fr_orthographe_homophones_grammaticaux:{id:"fr_orthographe_homophones_grammaticaux",label:"Homophones grammaticaux",description:"a/, et/est, son/sont, ces/ses",subject:"fr",theme:"Orthographe",order:630},fr_orthographe_punctuation:{id:"fr_orthographe_punctuation",label:"Ponctuation",subject:"fr",theme:"Orthographe",order:640},math_fractions_vocabulaire:{id:"math_fractions_vocabulaire",label:"Vocabulaire des fractions",description:"Numrateur/dnominateur, fraction dune quantit",subject:"math",theme:"Fractions",order:10},math_fractions_representer:{id:"math_fractions_representer",label:"Reprsenter une fraction",description:"Sur une figure / droite gradue.",subject:"math",theme:"Fractions",order:20},math_fractions_equivalentes:{id:"math_fractions_equivalentes",label:"Fractions quivalentes",subject:"math",theme:"Fractions",order:30},math_fractions_simplifier:{id:"math_fractions_simplifier",label:"Simplifier une fraction",subject:"math",theme:"Fractions",order:40},math_fractions_comparer:{id:"math_fractions_comparer",label:"Comparer des fractions",subject:"math",theme:"Fractions",order:50},math_fractions_ordonner:{id:"math_fractions_ordonner",label:"Ordonner des fractions",subject:"math",theme:"Fractions",order:60},math_fractions_addition:{id:"math_fractions_addition",label:"Addition de fractions",subject:"math",theme:"Fractions",order:70},math_fractions_soustraction:{id:"math_fractions_soustraction",label:"Soustraction de fractions",subject:"math",theme:"Fractions",order:80},math_fractions_multiplication:{id:"math_fractions_multiplication",label:"Multiplication de fractions",subject:"math",theme:"Fractions",order:90},math_fractions_division:{id:"math_fractions_division",label:"Division par une fraction",subject:"math",theme:"Fractions",order:100},math_fractions_problemes:{id:"math_fractions_problemes",label:"Problmes avec fractions",subject:"math",theme:"Fractions",order:110},math_nombres_entiers:{id:"math_nombres_entiers",label:"Nombres entiers",subject:"math",theme:"Nombres & calcul",order:210},math_nombres_decimaux:{id:"math_nombres_decimaux",label:"Nombres dcimaux",subject:"math",theme:"Nombres & calcul",order:220},math_priorites_operatoires:{id:"math_priorites_operatoires",label:"Priorits opratoires",subject:"math",theme:"Nombres & calcul",order:230},math_calcul_mental:{id:"math_calcul_mental",label:"Calcul mental",subject:"math",theme:"Nombres & calcul",order:240},math_puissances_base:{id:"math_puissances_base",label:"Puissances (bases)",subject:"math",theme:"Nombres & calcul",order:250},math_geometrie_angles:{id:"math_geometrie_angles",label:"Angles",subject:"math",theme:"Gomtrie",order:310},math_geometrie_triangles:{id:"math_geometrie_triangles",label:"Triangles",subject:"math",theme:"Gomtrie",order:320},math_geometrie_paralleles:{id:"math_geometrie_paralleles",label:"Droites parallles/perpendiculaires",subject:"math",theme:"Gomtrie",order:330},math_geometrie_symetrie_axiale:{id:"math_geometrie_symetrie_axiale",label:"Symtrie axiale",subject:"math",theme:"Gomtrie",order:340},math_geometrie_cercle:{id:"math_geometrie_cercle",label:"Cercle",subject:"math",theme:"Gomtrie",order:350},math_mesures_perimetre:{id:"math_mesures_perimetre",label:"Primtre",subject:"math",theme:"Grandeurs & mesures",order:410},math_mesures_aire:{id:"math_mesures_aire",label:"Aire",subject:"math",theme:"Grandeurs & mesures",order:420},math_mesures_volumes:{id:"math_mesures_volumes",label:"Volumes (bases)",subject:"math",theme:"Grandeurs & mesures",order:430},math_mesures_unites_conversions:{id:"math_mesures_unites_conversions",label:"Conversions dunits",subject:"math",theme:"Grandeurs & mesures",order:440},math_proportionnalite_tableaux:{id:"math_proportionnalite_tableaux",label:"Tableaux de proportionnalit",subject:"math",theme:"Proportionnalit",order:510},math_proportionnalite_pourcentages:{id:"math_proportionnalite_pourcentages",label:"Pourcentages (bases)",subject:"math",theme:"Proportionnalit",order:520},math_proportionnalite_echelles:{id:"math_proportionnalite_echelles",label:"chelles (bases)",subject:"math",theme:"Proportionnalit",order:530},en_vocab_daily_life:{id:"en_vocab_daily_life",label:"Vocabulaire du quotidien",subject:"en",theme:"Vocabulaire",order:10},en_vocab_school:{id:"en_vocab_school",label:"Vocabulaire de lcole",subject:"en",theme:"Vocabulaire",order:20},en_grammar_pronouns:{id:"en_grammar_pronouns",label:"Pronoms",subject:"en",theme:"Grammaire",order:110},en_grammar_present_simple:{id:"en_grammar_present_simple",label:"Present simple",subject:"en",theme:"Grammaire",order:120},en_grammar_present_continuous:{id:"en_grammar_present_continuous",label:"Present continuous",subject:"en",theme:"Grammaire",order:130},en_grammar_past_simple:{id:"en_grammar_past_simple",label:"Past simple",subject:"en",theme:"Grammaire",order:140},en_grammar_future:{id:"en_grammar_future",label:"Future (will / be going to)",subject:"en",theme:"Grammaire",order:150},en_comprehension_short_text:{id:"en_comprehension_short_text",label:"Comprhension de texte court",subject:"en",theme:"Comprhension",order:210},en_comprehension_inference:{id:"en_comprehension_inference",label:"Infrences (anglais)",subject:"en",theme:"Comprhension",order:220},es_vocab_daily_life:{id:"es_vocab_daily_life",label:"Vocabulaire du quotidien",subject:"es",theme:"Vocabulaire",order:10},es_vocab_school:{id:"es_vocab_school",label:"Vocabulaire de lcole",subject:"es",theme:"Vocabulaire",order:20},es_grammar_pronouns:{id:"es_grammar_pronouns",label:"Pronoms",subject:"es",theme:"Grammaire",order:110},es_grammar_present:{id:"es_grammar_present",label:"Prsent de lindicatif",subject:"es",theme:"Grammaire",order:120},es_grammar_past:{id:"es_grammar_past",label:"Pass (bases)",subject:"es",theme:"Grammaire",order:130},es_comprehension_short_text:{id:"es_comprehension_short_text",label:"Comprhension de texte court",subject:"es",theme:"Comprhension",order:210},hist_methodes_chronologie:{id:"hist_methodes_chronologie",label:"Chronologie",description:"Situer et ordonner des vnements.",subject:"hist",theme:"Mthodes",order:10},hist_methodes_documents:{id:"hist_methodes_documents",label:"Lire un document",description:"Identifier nature, auteur, contexte, intention.",subject:"hist",theme:"Mthodes",order:20},hist_geo_cartes:{id:"hist_geo_cartes",label:"Lire une carte",description:"Lgende, chelle, orientation.",subject:"hist",theme:"Gographie",order:110},hist_geo_paysages:{id:"hist_geo_paysages",label:"tudier un paysage",subject:"hist",theme:"Gographie",order:120},hist_reperes_ancien_regime:{id:"hist_reperes_ancien_regime",label:"Repres historiques (bases)",description:"Placer quelques priodes/sicles.",subject:"hist",theme:"Repres",order:210},hist_reperes_moyen_age:{id:"hist_reperes_moyen_age",label:"Moyen ge (repres)",subject:"hist",theme:"Repres",order:220},hist_reperes_islam_moyen_age:{id:"hist_reperes_islam_moyen_age",label:"Islam mdival (repres)",subject:"hist",theme:"Repres",order:230},hist_reperes_renaissance:{id:"hist_reperes_renaissance",label:"Renaissance (repres)",subject:"hist",theme:"Repres",order:240},meta_transfert:{id:"meta_transfert",label:"Transfert de mthode",description:"Rutiliser une stratgie dans un autre contexte.",subject:"fr",theme:"Mthode",order:900}},Zk=[{id:"all",label:"Toutes"},{id:"fr",label:"Franais"},{id:"math",label:"Maths"},{id:"en",label:"Anglais"},{id:"es",label:"Espagnol"},{id:"hist",label:"Histoire"}];function ex(r){if(!r)return null;const e=r.split("_")[0];return e==="fr"||e==="math"||e==="en"||e==="es"||e==="hist"?e:null}function B_(r){return r.last7?r.last7:Array.isArray(r.last7Results)?{correct:r.last7Results.filter(Boolean).length,wrong:r.last7Results.filter(e=>!e).length}:{correct:0,wrong:0}}function tx(){const{user:r,role:e}=Ar(),[t,s]=ge.useState([]),[o,l]=ge.useState(""),[h,f]=ge.useState([]),[p,y]=ge.useState(!1),[v,T]=ge.useState("fr"),[C,O]=ge.useState(null),[$,z]=ge.useState(""),[D,Z]=ge.useState({});ge.useEffect(()=>{r&&(e==="parent"?(async()=>{const A=(await qt(Qn(_t(ue,"users"),Er("role","==","child")))).docs.map(P=>({id:P.id,displayName:P.data().displayName||"Enfant"}));s(A),A[0]&&l(A[0].id)})():l(r.uid))},[r,e]);const K=ge.useCallback(async S=>{y(!0);const P=(await qt(_t(ue,"users",S,"tagProgress"))).docs.map(k=>({id:k.id,tagId:k.id,...k.data()}));f(P);const b=(await qt(_t(ue,"users",S,"progressSummary"))).docs.find(k=>k.id==="main");O(b?.data()||null),y(!1)},[]);ge.useEffect(()=>{o&&K(o)},[o,K]);const ae=async S=>{if(!o||($!==S&&z(S),D[S]?.items?.length||D[S]?.loading))return;Z(k=>({...k,[S]:{loading:!0,items:[]}}));let A;try{A=await qt(Qn(_t(ue,"users",o,"attemptItems"),Er("tags","array-contains",S),bp(100)))}catch{A=await qt(Qn(_t(ue,"users",o,"attemptItems"),Er("tags","array-contains",S)))}const P=A.docs.map(k=>({id:k.id,...k.data()})),x={};await Promise.all(Array.from(new Set(P.map(k=>k.exerciseId))).map(async k=>{const R=await Dn(be(ue,"exercises",k));R.exists()?x[k]=R.data():x[k]={prompt:k}}));const b=P.map(k=>({...k,prompt:k.prompt||x[k.exerciseId]?.prompt||k.exerciseId,choices:k.choices||x[k.exerciseId]?.choices||null,readingContext:k.readingContext})).sort((k,R)=>{const ie=k.createdAt?.toMillis?k.createdAt.toMillis():0;return(R.createdAt?.toMillis?R.createdAt.toMillis():0)-ie});Z(k=>({...k,[S]:{loading:!1,items:b}}))},H=S=>{if($===S){z("");return}ae(S)},J=h.filter(S=>v==="all"?!0:ex(S.tagId)===v).sort((S,A)=>(S.mastery||0)-(A.mastery||0)).slice(0,20),re=()=>{const S=[["tagId","mastery","bucket","attempts","correct","wrong","last7_correct","last7_wrong","nextDueDate"]];h.forEach(k=>{const R=B_(k);S.push([k.tagId||k.id,String(k.mastery??0),k.bucket||"",String(k.attempts??0),String(k.correctAnswers??0),String(k.wrongAnswers??0),String(R.correct),String(R.wrong),k.nextDueDate||""])});const A=S.map(k=>k.map(R=>`"${(R??"").toString().replace(/"/g,'""')}"`).join(",")).join(`
`),P=new Blob([A],{type:"text/csv;charset=utf-8;"}),x=URL.createObjectURL(P),b=document.createElement("a");b.href=x,b.download=`progress-${o||"user"}.csv`,b.click(),URL.revokeObjectURL(x)};return E.jsxs("div",{className:"container",children:[E.jsxs("div",{className:"card",children:[E.jsx("h2",{style:{marginTop:0},children:"Progression par tag"}),E.jsxs("div",{className:"row",style:{gap:8,alignItems:"center"},children:[e==="parent"&&E.jsxs(E.Fragment,{children:[E.jsx("label",{className:"small",children:"Enfant"}),E.jsx("select",{className:"input",value:o,onChange:S=>l(S.target.value),children:t.map(S=>E.jsx("option",{value:S.id,children:S.displayName},S.id))})]}),E.jsx("label",{className:"small",children:"Matire"}),E.jsx("select",{className:"input",value:v,onChange:S=>T(S.target.value),children:Zk.map(S=>E.jsx("option",{value:S.id,children:S.label},S.id))}),E.jsx("button",{className:"btn secondary",onClick:re,disabled:!h.length,children:"Tlcharger CSV"})]}),C&&E.jsxs("div",{className:"kpi",style:{marginTop:10},children:[E.jsxs("div",{className:"pill",children:["Rponses: ",E.jsx("strong",{children:C.totalAnswers||0})]}),E.jsxs("div",{className:"pill",children:["Taux: ",E.jsxs("strong",{children:[C.totalAnswers?Math.round((C.correctAnswers||0)/C.totalAnswers*100):0,"%"]})]}),E.jsxs("div",{className:"pill",children:["Tentatives: ",E.jsx("strong",{children:C.totalAttempts||0})]})]})]}),p?E.jsx("div",{className:"card",children:"Chargement"}):E.jsxs("div",{className:"card",children:[E.jsx("h3",{style:{marginTop:0},children:"Top 20 faibles"}),J.length===0?E.jsx("div",{className:"small",children:"Aucun tag pour le moment."}):E.jsx("div",{className:"grid",children:J.map(S=>{const A=B_(S),P=V0(S.tagId||S.id),x=$===(S.tagId||S.id),b=D[S.tagId||S.id]||{loading:!1,items:[]};return E.jsxs("div",{className:"card",style:{padding:12},children:[E.jsxs("div",{className:"row",style:{justifyContent:"space-between",alignItems:"center"},children:[E.jsxs("div",{onClick:()=>H(S.tagId||S.id),style:{cursor:"pointer",flex:1},children:[E.jsx("div",{style:{fontWeight:700},children:P.label}),E.jsxs("div",{className:"small",children:[P.theme,"  ",D0[P.subject]]}),E.jsxs("div",{className:"small",children:[S.mastery??0,"/100  ",S.bucket,"  ",A.correct,"/",A.correct+A.wrong," sur 7  Prochaine: ",S.nextDueDate||""]}),E.jsx("div",{style:{height:8,background:"rgba(255,255,255,0.08)",borderRadius:999,marginTop:6,width:"100%"},children:E.jsx("div",{style:{height:8,borderRadius:999,width:`${Math.min(100,Math.max(0,S.mastery||0))}%`,background:"linear-gradient(90deg,#ff5a6f,#7aa2ff)"}})}),E.jsx("div",{className:"row",style:{marginTop:6,gap:4},children:(S.last7Results||[]).map((k,R)=>E.jsx("span",{style:{width:10,height:10,borderRadius:"50%",background:k?"#2ecc71":"#ff5a6f",opacity:.9}},R))})]}),E.jsx("button",{className:"btn secondary",style:{width:36,height:36},onClick:()=>H(S.tagId||S.id),children:x?"":"+"})]}),x&&E.jsx("div",{className:"card",style:{marginTop:10,background:"rgba(255,255,255,0.03)"},children:b.loading?E.jsx("div",{className:"small",children:"Chargement"}):b.items.length===0?E.jsx("div",{className:"small",children:"Aucune question trouve pour ce tag."}):E.jsx("div",{className:"grid",children:b.items.map(k=>E.jsxs("div",{className:"pill",style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:6},children:[E.jsxs("div",{className:"small",children:[k.createdAt?.toDate?k.createdAt.toDate().toLocaleString():"","  Diff ",k.difficulty,"  ",k.correct?"":""]}),E.jsx("div",{style:{fontWeight:700},children:k.prompt}),k.readingContext&&E.jsxs("div",{className:"small",style:{whiteSpace:"pre-wrap"},children:[E.jsxs("div",{style:{fontWeight:600,marginBottom:4},children:["Lecture : ",k.readingContext.title]}),k.readingContext.text]}),Array.isArray(k.choices)&&typeof k.answer=="number"?E.jsxs("div",{className:"small",children:["Rponse : ",E.jsx("strong",{children:k.choices[k.answer]||k.answer})]}):E.jsxs("div",{className:"small",children:["Rponse : ",E.jsx("strong",{children:k.answer??""})]})]},k.id))})})]},S.id)})})]})]})}const z_=[{id:"all",label:"Toutes"},{id:"fr",label:"Franais"},{id:"math",label:"Maths"},{id:"en",label:"Anglais"},{id:"es",label:"Espagnol"},{id:"hist",label:"Histoire"}];function nx(){const[r,e]=ge.useState([]),[t,s]=ge.useState(""),[o,l]=ge.useState("all"),[h,f]=ge.useState([]),[p,y]=ge.useState(!1),[v,T]=ge.useState({}),[C,O]=ge.useState(null);ge.useEffect(()=>{(async()=>{const J=(await qt(Qn(_t(ue,"users"),Er("role","==","child")))).docs.map(re=>({id:re.id,displayName:re.data().displayName||"Enfant"}));e(J),J[0]&&s(J[0].id)})()},[]),ge.useEffect(()=>{t&&(y(!0),(async()=>{const H=z_.filter(A=>A.id!=="all").map(A=>A.id),J=o==="all"?H:[o],re=[];for(const A of J){const P=await I0(A,{uid:t,includeHidden:!0,includeOverrides:!0});re.push(...P)}const S=re.sort((A,P)=>(A.title||"").localeCompare(P.title||""));f(S),y(!1)})())},[t,o]);const $=async(H,J)=>{t&&(await hk(t,H,J),f(re=>re.map(S=>S.id===H?{...S,visibleOverride:J}:S)))},z=async(H,J)=>{await uk(H,J),f(re=>re.map(S=>S.id===H?{...S,hidden:J}:S))},D=async H=>{if(!window.confirm("Supprimer ce thme et toutes ses questions ?"))return;const J=await fk(H);f(re=>re.filter(S=>S.id!==H)),T(re=>{const S={...re};return delete S[H],S}),J.hidden&&f(re=>re.map(S=>S.id===H?{...S,hidden:!0}:S))},Z=async H=>{O(H);const J=await S0(H,{uid:t,includeHidden:!0,includeOverrides:!0});T(re=>({...re,[H]:J})),O(null)},K=async(H,J)=>{await ck(H,J),T(re=>{const S={};return Object.keys(re).forEach(A=>{S[A]=re[A].map(P=>P.id===H?{...P,hidden:J}:P)}),{...re,...S}})},ae=async(H,J,re)=>{t&&(await dk(t,H,J),T(S=>({...S,[re]:(S[re]||[]).map(A=>A.id===H?{...A,visibleOverride:J}:A)})))};return E.jsxs("div",{className:"container",children:[E.jsxs("div",{className:"card",children:[E.jsx("h2",{style:{marginTop:0},children:"Modration contenus"}),E.jsxs("div",{className:"row",style:{gap:10},children:[E.jsxs("div",{className:"row",style:{gap:6},children:[E.jsx("span",{className:"small",children:"Enfant"}),E.jsx("select",{className:"input",value:t,onChange:H=>s(H.target.value),children:r.map(H=>E.jsx("option",{value:H.id,children:H.displayName},H.id))})]}),E.jsxs("div",{className:"row",style:{gap:6},children:[E.jsx("span",{className:"small",children:"Matire"}),E.jsx("select",{className:"input",value:o,onChange:H=>l(H.target.value),children:z_.map(H=>E.jsx("option",{value:H.id,children:H.label},H.id))})]})]})]}),p?E.jsx("div",{className:"card",children:"Chargement"}):E.jsxs("div",{className:"grid",children:[h.map(H=>{const J=H.visibleOverride,re=J!==void 0?J:!H.hidden;return E.jsxs("div",{className:"card",children:[E.jsxs("div",{className:"row",style:{justifyContent:"space-between"},children:[E.jsxs("div",{children:[E.jsx("div",{style:{fontWeight:800},children:H.title}),E.jsx("div",{className:"small",children:H.subjectId}),H.hidden&&E.jsx("div",{className:"badge",children:"Masqu globalement"}),J===!1&&E.jsx("div",{className:"badge",children:"Masqu pour lenfant"})]}),E.jsxs("div",{className:"row",children:[E.jsx("button",{className:"btn secondary",onClick:()=>$(H.id,!re),children:re?"Masquer pour lenfant":"Afficher pour lenfant"}),E.jsx("button",{className:"btn secondary",onClick:()=>z(H.id,!H.hidden),children:H.hidden?"Ractiver globalement":"Masquer globalement"}),E.jsx("button",{className:"btn secondary",onClick:()=>D(H.id),children:"Supprimer"}),E.jsx("button",{className:"btn secondary",onClick:()=>Z(H.id),children:"Voir questions"})]})]}),(v[H.id]||[]).length>0&&E.jsxs("div",{style:{marginTop:10},children:[E.jsx("div",{className:"small",style:{marginBottom:6},children:"Questions"}),E.jsx("div",{className:"grid",children:v[H.id].map(S=>{const A=S.visibleOverride,P=A!==void 0?A:!S.hidden;return E.jsxs("div",{className:"pill",style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:6},children:[E.jsxs("div",{className:"small",children:[S.prompt?.slice(0,80)||S.id," ",S.hidden&&E.jsx("span",{className:"badge",children:"Masqu global"})," ",A===!1&&E.jsx("span",{className:"badge",children:"Masqu enfant"})]}),E.jsxs("div",{className:"row",children:[E.jsx("button",{className:"btn secondary",onClick:()=>ae(S.id,!P,H.id),children:P?"Masquer enfant":"Afficher enfant"}),E.jsx("button",{className:"btn secondary",onClick:()=>K(S.id,!S.hidden),children:S.hidden?"Ractiver global":"Masquer global"})]})]},S.id)})})]}),C===H.id&&E.jsx("div",{className:"small",style:{marginTop:6},children:"Chargement des questions"})]},H.id)}),h.length===0&&E.jsx("div",{className:"card small",children:"Aucun thme."})]})]})}function rx(){const{user:r}=Ar(),[e,t]=ge.useState(null),[s,o]=ge.useState({}),[l,h]=ge.useState(""),[f,p]=ge.useState(!1);ge.useEffect(()=>{r&&(async()=>{const T=await Op(r.uid);t(T);const C=await C0(r.uid),O={};C.forEach($=>{O[$.id]=$}),o(O)})()},[r]);const y=async T=>{if(r){h(""),p(!0);try{const C=await vk(r.uid,T.id);t(O=>({...O||{},coins:C.coins,xp:C.xp})),o(O=>({...O,[T.id]:{acquiredAt:new Date().toISOString()}}))}catch(C){h(C.message||"Erreur achat")}finally{p(!1)}}},v=_k();return E.jsxs("div",{className:"container",children:[E.jsxs("div",{className:"card",children:[E.jsx("h2",{style:{marginTop:0},children:"Rcompenses"}),E.jsx("div",{className:"small",children:"Utilise tes pices pour acheter et collectionner des items."}),e&&E.jsxs("div",{className:"kpi",style:{marginTop:8},children:[E.jsxs("div",{className:"pill",children:["Pices: ",E.jsx("strong",{children:e.coins||0})]}),E.jsxs("div",{className:"pill",children:["XP: ",E.jsx("strong",{children:e.xp||0})]})]}),l&&E.jsx("div",{className:"small",style:{color:"#ff5a6f",marginTop:8},children:l})]}),E.jsx("div",{className:"grid",children:v.map(T=>{const C=!!s[T.id],O=(e?.coins||0)>=T.priceCoins&&(!T.requiresXp||(e?.xp||0)>=T.requiresXp);return E.jsxs("div",{className:"card",style:{opacity:C?.7:1},children:[E.jsxs("div",{className:"row",style:{justifyContent:"space-between"},children:[E.jsxs("div",{children:[E.jsx("div",{style:{fontWeight:800},children:T.title}),E.jsx("div",{className:"small",children:T.description})]}),C&&E.jsx("span",{className:"badge",children:"Dj acquis"})]}),E.jsxs("div",{className:"row",style:{marginTop:10},children:[E.jsxs("div",{className:"pill",children:["Prix: ",T.priceCoins," pices"]}),T.requiresXp&&E.jsxs("div",{className:"pill",children:["Niv: ",T.requiresXp," XP"]})]}),!C&&E.jsx("button",{className:"btn",disabled:!O||f,onClick:()=>y(T),children:O?"Acheter":"Manque de pices/XP"})]},T.id)})})]})}const sx=[{id:"all",label:"Toutes"},{id:"fr",label:"Franais"},{id:"math",label:"Maths"},{id:"en",label:"Anglais"},{id:"es",label:"Espagnol"},{id:"hist",label:"Histoire"}];function ix(r){if(!r)return null;const e=r.split("_")[0];return e==="fr"||e==="math"||e==="en"||e==="es"||e==="hist"?e:null}function ox(){const{user:r}=Ar(),{rewards:e}=Vl(r?.uid||null),[t,s]=ge.useState("all"),[o,l]=ge.useState(""),h=e.masteryByTag||{},f=Object.entries(h).map(([p,y])=>({tag:p,data:y,meta:V0(p)})).filter(({tag:p,meta:y})=>t==="all"?!0:ix(p)===t).filter(({meta:p})=>p.label.toLowerCase().includes(o.toLowerCase())).sort((p,y)=>{const v=O=>O==="mastered"?0:O==="progressing"?1:2,T=v(p.data.state),C=v(y.data.state);return T!==C?T-C:(p.meta.order||9999)!==(y.meta.order||9999)?(p.meta.order||9999)-(y.meta.order||9999):p.meta.label.localeCompare(y.meta.label)});return E.jsxs("div",{className:"container",children:[E.jsxs("div",{className:"card",children:[E.jsx("h2",{style:{marginTop:0},children:"Progression"}),E.jsxs("div",{className:"row",style:{alignItems:"center",gap:8},children:[E.jsx("span",{className:"small",children:"Matire"}),E.jsx("select",{className:"input",value:t,onChange:p=>s(p.target.value),children:sx.map(p=>E.jsx("option",{value:p.id,children:p.label},p.id))}),E.jsx("input",{className:"input",style:{maxWidth:260},placeholder:"Rechercher un tag",value:o,onChange:p=>l(p.target.value)})]})]}),E.jsx("div",{className:"grid",children:f.length===0?E.jsx("div",{className:"card small",children:"Aucune donne de matrise pour linstant."}):f.map(({tag:p,data:y,meta:v})=>{const T=Math.min(100,Math.max(0,Math.round(y.score||0)));return E.jsxs("div",{className:"card",style:{padding:12},children:[E.jsxs("div",{className:"row",style:{justifyContent:"space-between"},children:[E.jsxs("div",{children:[E.jsx("div",{style:{fontWeight:800},children:v.label}),E.jsxs("div",{className:"small",children:[D0[v.subject],"  ",v.theme]}),E.jsx("div",{className:"small",title:Qk[y.state]||"",children:Kk[y.state]||y.state})]}),E.jsxs("div",{className:"small",children:[T,"/100"]})]}),E.jsx("div",{style:{height:10,background:"rgba(255,255,255,0.08)",borderRadius:999,marginTop:6},children:E.jsx("div",{style:{height:"100%",width:`${T}%`,background:y.state==="mastered"?"#2ecc71":y.state==="progressing"?"#7aa2ff":"#ff9f43",borderRadius:999}})})]},p)})})]})}function ax(){return E.jsx("div",{className:"container",children:E.jsx("div",{className:"card",children:"Page introuvable."})})}const lx={common:"Commun",rare:"Rare",epic:"pique"};function ux(){const{user:r}=Ar(),{rewards:e}=Vl(r?.uid||null),[t,s]=ge.useState("sticker"),o=new Set(e?.collectibles?.owned||[]),l=e?.collectibles?.equippedAvatarId,h=async p=>{if(r)try{await k0(r.uid,p)}catch(y){console.error("equipAvatar",y)}},f=Zs.filter(p=>p.type===t);return E.jsxs("div",{className:"container",children:[E.jsxs("div",{className:"card",children:[E.jsx("h2",{style:{marginTop:0},children:"Collection"}),E.jsxs("div",{className:"row",style:{gap:8},children:[E.jsx("button",{className:`btn ${t==="sticker"?"":"secondary"}`,onClick:()=>s("sticker"),children:"Stickers"}),E.jsx("button",{className:`btn ${t==="avatar"?"":"secondary"}`,onClick:()=>s("avatar"),children:"Avatars"})]})]}),E.jsx("div",{className:"grid",children:f.map(p=>{const y=o.has(p.id),v=p.id===l;return E.jsxs("div",{className:"card",style:{opacity:y?1:.65},children:[E.jsxs("div",{className:"row",style:{justifyContent:"space-between",alignItems:"center"},children:[E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[E.jsx("div",{style:{fontSize:"1.8rem"},children:p.icon}),E.jsxs("div",{children:[E.jsx("div",{style:{fontWeight:800},children:p.title}),E.jsx("div",{className:"small",children:p.description}),E.jsxs("div",{className:"small",children:["Raret : ",lx[p.rarity]]})]})]}),v&&E.jsx("span",{className:"badge",children:"quip"})]}),!y&&E.jsx("div",{className:"small",style:{marginTop:8,color:"rgba(255,255,255,0.7)"},children:" dbloquer en jouant "}),p.type==="avatar"&&y&&E.jsx("button",{className:"btn secondary",style:{marginTop:10},onClick:()=>h(p.id),children:v?"quip":"quiper"})]},p.id)})})]})}function cx(){return E.jsxs(YT,{children:[E.jsx("div",{className:"container",children:E.jsx(ik,{})}),E.jsxs($T,{children:[E.jsx(Wn,{path:"/connexion",element:E.jsx(Pk,{})}),E.jsx(Wn,{path:"/",element:E.jsx(Xa,{children:E.jsx(Rk,{})})}),E.jsx(Wn,{path:"/theme/:themeId",element:E.jsx(Xa,{children:E.jsx(Hk,{})})}),E.jsx(Wn,{path:"/admin/import",element:E.jsx(Jd,{children:E.jsx(Gk,{})})}),E.jsx(Wn,{path:"/admin/progression",element:E.jsx(Jd,{children:E.jsx(tx,{})})}),E.jsx(Wn,{path:"/admin/moderation",element:E.jsx(Jd,{children:E.jsx(nx,{})})}),E.jsx(Wn,{path:"/recompenses",element:E.jsx(Xa,{children:E.jsx(rx,{})})}),E.jsx(Wn,{path:"/collection",element:E.jsx(Xa,{children:E.jsx(ux,{})})}),E.jsx(Wn,{path:"/progression",element:E.jsx(Xa,{children:E.jsx(ox,{})})}),E.jsx(Wn,{path:"*",element:E.jsx(ax,{})})]})]})}function hx(){"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("${import.meta.env.BASE_URL}sw.js").catch(()=>{})})}YE.createRoot(document.getElementById("root")).render(E.jsx(ge.StrictMode,{children:E.jsx(sk,{children:E.jsx(cx,{})})}));hx();
