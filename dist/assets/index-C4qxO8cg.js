function v0(r,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in r)){const l=Object.getOwnPropertyDescriptor(s,o);l&&Object.defineProperty(r,o,l.get?l:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function I_(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Ed={exports:{}},za={},Td={exports:{}},Ve={};var Rg;function w0(){if(Rg)return Ve;Rg=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.iterator;function I(L){return L===null||typeof L!="object"?null:(L=E&&L[E]||L["@@iterator"],typeof L=="function"?L:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},W=Object.assign,q={};function F(L,Q,Ae){this.props=L,this.context=Q,this.refs=q,this.updater=Ae||M}F.prototype.isReactComponent={},F.prototype.setState=function(L,Q){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,Q,"setState")},F.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function K(){}K.prototype=F.prototype;function re(L,Q,Ae){this.props=L,this.context=Q,this.refs=q,this.updater=Ae||M}var b=re.prototype=new K;b.constructor=re,W(b,F.prototype),b.isPureReactComponent=!0;var ee=Array.isArray,se=Object.prototype.hasOwnProperty,J={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function S(L,Q,Ae){var Pe,Ne={},xe=null,$e=null;if(Q!=null)for(Pe in Q.ref!==void 0&&($e=Q.ref),Q.key!==void 0&&(xe=""+Q.key),Q)se.call(Q,Pe)&&!P.hasOwnProperty(Pe)&&(Ne[Pe]=Q[Pe]);var je=arguments.length-2;if(je===1)Ne.children=Ae;else if(1<je){for(var Ge=Array(je),At=0;At<je;At++)Ge[At]=arguments[At+2];Ne.children=Ge}if(L&&L.defaultProps)for(Pe in je=L.defaultProps,je)Ne[Pe]===void 0&&(Ne[Pe]=je[Pe]);return{$$typeof:r,type:L,key:xe,ref:$e,props:Ne,_owner:J.current}}function k(L,Q){return{$$typeof:r,type:L.type,key:Q,ref:L.ref,props:L.props,_owner:L._owner}}function N(L){return typeof L=="object"&&L!==null&&L.$$typeof===r}function x(L){var Q={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(Ae){return Q[Ae]})}var O=/\/+/g;function R(L,Q){return typeof L=="object"&&L!==null&&L.key!=null?x(""+L.key):Q.toString(36)}function fe(L,Q,Ae,Pe,Ne){var xe=typeof L;(xe==="undefined"||xe==="boolean")&&(L=null);var $e=!1;if(L===null)$e=!0;else switch(xe){case"string":case"number":$e=!0;break;case"object":switch(L.$$typeof){case r:case e:$e=!0}}if($e)return $e=L,Ne=Ne($e),L=Pe===""?"."+R($e,0):Pe,ee(Ne)?(Ae="",L!=null&&(Ae=L.replace(O,"$&/")+"/"),fe(Ne,Q,Ae,"",function(At){return At})):Ne!=null&&(N(Ne)&&(Ne=k(Ne,Ae+(!Ne.key||$e&&$e.key===Ne.key?"":(""+Ne.key).replace(O,"$&/")+"/")+L)),Q.push(Ne)),1;if($e=0,Pe=Pe===""?".":Pe+":",ee(L))for(var je=0;je<L.length;je++){xe=L[je];var Ge=Pe+R(xe,je);$e+=fe(xe,Q,Ae,Ge,Ne)}else if(Ge=I(L),typeof Ge=="function")for(L=Ge.call(L),je=0;!(xe=L.next()).done;)xe=xe.value,Ge=Pe+R(xe,je++),$e+=fe(xe,Q,Ae,Ge,Ne);else if(xe==="object")throw Q=String(L),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.");return $e}function De(L,Q,Ae){if(L==null)return L;var Pe=[],Ne=0;return fe(L,Pe,"","",function(xe){return Q.call(Ae,xe,Ne++)}),Pe}function Ue(L){if(L._status===-1){var Q=L._result;Q=Q(),Q.then(function(Ae){(L._status===0||L._status===-1)&&(L._status=1,L._result=Ae)},function(Ae){(L._status===0||L._status===-1)&&(L._status=2,L._result=Ae)}),L._status===-1&&(L._status=0,L._result=Q)}if(L._status===1)return L._result.default;throw L._result}var Re={current:null},te={transition:null},ge={ReactCurrentDispatcher:Re,ReactCurrentBatchConfig:te,ReactCurrentOwner:J};function ae(){throw Error("act(...) is not supported in production builds of React.")}return Ve.Children={map:De,forEach:function(L,Q,Ae){De(L,function(){Q.apply(this,arguments)},Ae)},count:function(L){var Q=0;return De(L,function(){Q++}),Q},toArray:function(L){return De(L,function(Q){return Q})||[]},only:function(L){if(!N(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Ve.Component=F,Ve.Fragment=t,Ve.Profiler=o,Ve.PureComponent=re,Ve.StrictMode=s,Ve.Suspense=g,Ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ge,Ve.act=ae,Ve.cloneElement=function(L,Q,Ae){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var Pe=W({},L.props),Ne=L.key,xe=L.ref,$e=L._owner;if(Q!=null){if(Q.ref!==void 0&&(xe=Q.ref,$e=J.current),Q.key!==void 0&&(Ne=""+Q.key),L.type&&L.type.defaultProps)var je=L.type.defaultProps;for(Ge in Q)se.call(Q,Ge)&&!P.hasOwnProperty(Ge)&&(Pe[Ge]=Q[Ge]===void 0&&je!==void 0?je[Ge]:Q[Ge])}var Ge=arguments.length-2;if(Ge===1)Pe.children=Ae;else if(1<Ge){je=Array(Ge);for(var At=0;At<Ge;At++)je[At]=arguments[At+2];Pe.children=je}return{$$typeof:r,type:L.type,key:Ne,ref:xe,props:Pe,_owner:$e}},Ve.createContext=function(L){return L={$$typeof:h,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:l,_context:L},L.Consumer=L},Ve.createElement=S,Ve.createFactory=function(L){var Q=S.bind(null,L);return Q.type=L,Q},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(L){return{$$typeof:f,render:L}},Ve.isValidElement=N,Ve.lazy=function(L){return{$$typeof:v,_payload:{_status:-1,_result:L},_init:Ue}},Ve.memo=function(L,Q){return{$$typeof:y,type:L,compare:Q===void 0?null:Q}},Ve.startTransition=function(L){var Q=te.transition;te.transition={};try{L()}finally{te.transition=Q}},Ve.unstable_act=ae,Ve.useCallback=function(L,Q){return Re.current.useCallback(L,Q)},Ve.useContext=function(L){return Re.current.useContext(L)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(L){return Re.current.useDeferredValue(L)},Ve.useEffect=function(L,Q){return Re.current.useEffect(L,Q)},Ve.useId=function(){return Re.current.useId()},Ve.useImperativeHandle=function(L,Q,Ae){return Re.current.useImperativeHandle(L,Q,Ae)},Ve.useInsertionEffect=function(L,Q){return Re.current.useInsertionEffect(L,Q)},Ve.useLayoutEffect=function(L,Q){return Re.current.useLayoutEffect(L,Q)},Ve.useMemo=function(L,Q){return Re.current.useMemo(L,Q)},Ve.useReducer=function(L,Q,Ae){return Re.current.useReducer(L,Q,Ae)},Ve.useRef=function(L){return Re.current.useRef(L)},Ve.useState=function(L){return Re.current.useState(L)},Ve.useSyncExternalStore=function(L,Q,Ae){return Re.current.useSyncExternalStore(L,Q,Ae)},Ve.useTransition=function(){return Re.current.useTransition()},Ve.version="18.3.1",Ve}var Pg;function yf(){return Pg||(Pg=1,Td.exports=w0()),Td.exports}var kg;function E0(){if(kg)return za;kg=1;var r=yf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(f,g,y){var v,E={},I=null,M=null;y!==void 0&&(I=""+y),g.key!==void 0&&(I=""+g.key),g.ref!==void 0&&(M=g.ref);for(v in g)s.call(g,v)&&!l.hasOwnProperty(v)&&(E[v]=g[v]);if(f&&f.defaultProps)for(v in g=f.defaultProps,g)E[v]===void 0&&(E[v]=g[v]);return{$$typeof:e,type:f,key:I,ref:M,props:E,_owner:o.current}}return za.Fragment=t,za.jsx=h,za.jsxs=h,za}var Ng;function T0(){return Ng||(Ng=1,Ed.exports=E0()),Ed.exports}var A=T0(),he=yf();const Ee=I_(he),I0=v0({__proto__:null,default:Ee},[he]);var Bu={},Id={exports:{}},tn={},Sd={exports:{}},Ad={};var xg;function S0(){return xg||(xg=1,(function(r){function e(te,ge){var ae=te.length;te.push(ge);e:for(;0<ae;){var L=ae-1>>>1,Q=te[L];if(0<o(Q,ge))te[L]=ge,te[ae]=Q,ae=L;else break e}}function t(te){return te.length===0?null:te[0]}function s(te){if(te.length===0)return null;var ge=te[0],ae=te.pop();if(ae!==ge){te[0]=ae;e:for(var L=0,Q=te.length,Ae=Q>>>1;L<Ae;){var Pe=2*(L+1)-1,Ne=te[Pe],xe=Pe+1,$e=te[xe];if(0>o(Ne,ae))xe<Q&&0>o($e,Ne)?(te[L]=$e,te[xe]=ae,L=xe):(te[L]=Ne,te[Pe]=ae,L=Pe);else if(xe<Q&&0>o($e,ae))te[L]=$e,te[xe]=ae,L=xe;else break e}}return ge}function o(te,ge){var ae=te.sortIndex-ge.sortIndex;return ae!==0?ae:te.id-ge.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var h=Date,f=h.now();r.unstable_now=function(){return h.now()-f}}var g=[],y=[],v=1,E=null,I=3,M=!1,W=!1,q=!1,F=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,re=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(te){for(var ge=t(y);ge!==null;){if(ge.callback===null)s(y);else if(ge.startTime<=te)s(y),ge.sortIndex=ge.expirationTime,e(g,ge);else break;ge=t(y)}}function ee(te){if(q=!1,b(te),!W)if(t(g)!==null)W=!0,Ue(se);else{var ge=t(y);ge!==null&&Re(ee,ge.startTime-te)}}function se(te,ge){W=!1,q&&(q=!1,K(S),S=-1),M=!0;var ae=I;try{for(b(ge),E=t(g);E!==null&&(!(E.expirationTime>ge)||te&&!x());){var L=E.callback;if(typeof L=="function"){E.callback=null,I=E.priorityLevel;var Q=L(E.expirationTime<=ge);ge=r.unstable_now(),typeof Q=="function"?E.callback=Q:E===t(g)&&s(g),b(ge)}else s(g);E=t(g)}if(E!==null)var Ae=!0;else{var Pe=t(y);Pe!==null&&Re(ee,Pe.startTime-ge),Ae=!1}return Ae}finally{E=null,I=ae,M=!1}}var J=!1,P=null,S=-1,k=5,N=-1;function x(){return!(r.unstable_now()-N<k)}function O(){if(P!==null){var te=r.unstable_now();N=te;var ge=!0;try{ge=P(!0,te)}finally{ge?R():(J=!1,P=null)}}else J=!1}var R;if(typeof re=="function")R=function(){re(O)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,De=fe.port2;fe.port1.onmessage=O,R=function(){De.postMessage(null)}}else R=function(){F(O,0)};function Ue(te){P=te,J||(J=!0,R())}function Re(te,ge){S=F(function(){te(r.unstable_now())},ge)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(te){te.callback=null},r.unstable_continueExecution=function(){W||M||(W=!0,Ue(se))},r.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<te?Math.floor(1e3/te):5},r.unstable_getCurrentPriorityLevel=function(){return I},r.unstable_getFirstCallbackNode=function(){return t(g)},r.unstable_next=function(te){switch(I){case 1:case 2:case 3:var ge=3;break;default:ge=I}var ae=I;I=ge;try{return te()}finally{I=ae}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(te,ge){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var ae=I;I=te;try{return ge()}finally{I=ae}},r.unstable_scheduleCallback=function(te,ge,ae){var L=r.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?L+ae:L):ae=L,te){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=ae+Q,te={id:v++,callback:ge,priorityLevel:te,startTime:ae,expirationTime:Q,sortIndex:-1},ae>L?(te.sortIndex=ae,e(y,te),t(g)===null&&te===t(y)&&(q?(K(S),S=-1):q=!0,Re(ee,ae-L))):(te.sortIndex=Q,e(g,te),W||M||(W=!0,Ue(se))),te},r.unstable_shouldYield=x,r.unstable_wrapCallback=function(te){var ge=I;return function(){var ae=I;I=ge;try{return te.apply(this,arguments)}finally{I=ae}}}})(Ad)),Ad}var Dg;function A0(){return Dg||(Dg=1,Sd.exports=S0()),Sd.exports}var Vg;function C0(){if(Vg)return tn;Vg=1;var r=yf(),e=A0();function t(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(n,i){h(n,i),h(n+"Capture",i)}function h(n,i){for(o[n]=i,n=0;n<i.length;n++)s.add(i[n])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},E={};function I(n){return g.call(E,n)?!0:g.call(v,n)?!1:y.test(n)?E[n]=!0:(v[n]=!0,!1)}function M(n,i,a,c){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function W(n,i,a,c){if(i===null||typeof i>"u"||M(n,i,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function q(n,i,a,c,d,p,w){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=i,this.sanitizeURL=p,this.removeEmptyString=w}var F={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){F[n]=new q(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];F[i]=new q(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){F[n]=new q(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){F[n]=new q(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){F[n]=new q(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){F[n]=new q(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){F[n]=new q(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){F[n]=new q(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){F[n]=new q(n,5,!1,n.toLowerCase(),null,!1,!1)});var K=/[\-:]([a-z])/g;function re(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(K,re);F[i]=new q(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(K,re);F[i]=new q(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(K,re);F[i]=new q(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){F[n]=new q(n,1,!1,n.toLowerCase(),null,!1,!1)}),F.xlinkHref=new q("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){F[n]=new q(n,1,!1,n.toLowerCase(),null,!0,!0)});function b(n,i,a,c){var d=F.hasOwnProperty(i)?F[i]:null;(d!==null?d.type!==0:c||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(W(i,a,d,c)&&(a=null),c||d===null?I(i)&&(a===null?n.removeAttribute(i):n.setAttribute(i,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(i=d.attributeName,c=d.attributeNamespace,a===null?n.removeAttribute(i):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?n.setAttributeNS(c,i,a):n.setAttribute(i,a))))}var ee=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,se=Symbol.for("react.element"),J=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),x=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),fe=Symbol.for("react.suspense_list"),De=Symbol.for("react.memo"),Ue=Symbol.for("react.lazy"),Re=Symbol.for("react.offscreen"),te=Symbol.iterator;function ge(n){return n===null||typeof n!="object"?null:(n=te&&n[te]||n["@@iterator"],typeof n=="function"?n:null)}var ae=Object.assign,L;function Q(n){if(L===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);L=i&&i[1]||""}return`
`+L+n}var Ae=!1;function Pe(n,i){if(!n||Ae)return"";Ae=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(z){var c=z}Reflect.construct(n,[],i)}else{try{i.call()}catch(z){c=z}n.call(i.prototype)}else{try{throw Error()}catch(z){c=z}n()}}catch(z){if(z&&c&&typeof z.stack=="string"){for(var d=z.stack.split(`
`),p=c.stack.split(`
`),w=d.length-1,C=p.length-1;1<=w&&0<=C&&d[w]!==p[C];)C--;for(;1<=w&&0<=C;w--,C--)if(d[w]!==p[C]){if(w!==1||C!==1)do if(w--,C--,0>C||d[w]!==p[C]){var D=`
`+d[w].replace(" at new "," at ");return n.displayName&&D.includes("<anonymous>")&&(D=D.replace("<anonymous>",n.displayName)),D}while(1<=w&&0<=C);break}}}finally{Ae=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?Q(n):""}function Ne(n){switch(n.tag){case 5:return Q(n.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 2:case 15:return n=Pe(n.type,!1),n;case 11:return n=Pe(n.type.render,!1),n;case 1:return n=Pe(n.type,!0),n;default:return""}}function xe(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case P:return"Fragment";case J:return"Portal";case k:return"Profiler";case S:return"StrictMode";case R:return"Suspense";case fe:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case x:return(n.displayName||"Context")+".Consumer";case N:return(n._context.displayName||"Context")+".Provider";case O:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case De:return i=n.displayName||null,i!==null?i:xe(n.type)||"Memo";case Ue:i=n._payload,n=n._init;try{return xe(n(i))}catch{}}return null}function $e(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xe(i);case 8:return i===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function je(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ge(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function At(n){var i=Ge(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),c=""+n[i];if(!n.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,p=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return d.call(this)},set:function(w){c=""+w,p.call(this,w)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function _n(n){n._valueTracker||(n._valueTracker=At(n))}function Ko(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),c="";return n&&(c=Ge(n)?n.checked?"true":"false":n.value),n=c,n!==a?(i.setValue(n),!0):!1}function $r(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function ki(n,i){var a=i.checked;return ae({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function Cl(n,i){var a=i.defaultValue==null?"":i.defaultValue,c=i.checked!=null?i.checked:i.defaultChecked;a=je(i.value!=null?i.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Ni(n,i){i=i.checked,i!=null&&b(n,"checked",i,!1)}function $s(n,i){Ni(n,i);var a=je(i.value),c=i.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?mt(n,i.type,a):i.hasOwnProperty("defaultValue")&&mt(n,i.type,je(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function Qo(n,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var c=i.type;if(!(c!=="submit"&&c!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,a||i===n.value||(n.value=i),n.defaultValue=i}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function mt(n,i,a){(i!=="number"||$r(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var ut=Array.isArray;function Rn(n,i,a,c){if(n=n.options,i){i={};for(var d=0;d<a.length;d++)i["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=i.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&c&&(n[a].defaultSelected=!0)}else{for(a=""+je(a),i=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}i!==null||n[d].disabled||(i=n[d])}i!==null&&(i.selected=!0)}}function Xo(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return ae({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Yo(n,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(t(92));if(ut(a)){if(1<a.length)throw Error(t(93));a=a[0]}i=a}i==null&&(i=""),a=i}n._wrapperState={initialValue:je(a)}}function Rl(n,i){var a=je(i.value),c=je(i.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),i.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function qr(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function Jo(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xi(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?Jo(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Wr,Pl=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,c,d){MSApp.execUnsafeLocalFunction(function(){return n(i,a,c,d)})}:n})(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(Wr=Wr||document.createElement("div"),Wr.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Wr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function qs(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var Hr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kl=["Webkit","ms","Moz","O"];Object.keys(Hr).forEach(function(n){kl.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),Hr[i]=Hr[n]})});function Gr(n,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||Hr.hasOwnProperty(n)&&Hr[n]?(""+i).trim():i+"px"}function Di(n,i){n=n.style;for(var a in i)if(i.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=Gr(a,i[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,d):n[a]=d}}var Zo=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Pn(n,i){if(i){if(Zo[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function Vi(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kr=null;function Oi(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var pr=null,mr=null,at=null;function ea(n){if(n=Ra(n)){if(typeof pr!="function")throw Error(t(280));var i=n.stateNode;i&&(i=nu(i),pr(n.stateNode,n.type,i))}}function Qr(n){mr?at?at.push(n):at=[n]:mr=n}function Xr(){if(mr){var n=mr,i=at;if(at=mr=null,ea(n),i)for(n=0;n<i.length;n++)ea(i[n])}}function Nl(n,i){return n(i)}function xl(){}var Bn=!1;function Dl(n,i,a){if(Bn)return n(i,a);Bn=!0;try{return Nl(n,i,a)}finally{Bn=!1,(mr!==null||at!==null)&&(xl(),Xr())}}function Ws(n,i){var a=n.stateNode;if(a===null)return null;var c=nu(a);if(c===null)return null;a=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,i,typeof a));return a}var Yr=!1;if(f)try{var Jr={};Object.defineProperty(Jr,"passive",{get:function(){Yr=!0}}),window.addEventListener("test",Jr,Jr),window.removeEventListener("test",Jr,Jr)}catch{Yr=!1}function Vl(n,i,a,c,d,p,w,C,D){var z=Array.prototype.slice.call(arguments,3);try{i.apply(a,z)}catch(Y){this.onError(Y)}}var gr=!1,zn=null,Mi=!1,vn=null,Ol={onError:function(n){gr=!0,zn=n}};function Ml(n,i,a,c,d,p,w,C,D){gr=!1,zn=null,Vl.apply(Ol,arguments)}function ta(n,i,a,c,d,p,w,C,D){if(Ml.apply(this,arguments),gr){if(gr){var z=zn;gr=!1,zn=null}else throw Error(t(198));Mi||(Mi=!0,vn=z)}}function kn(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function na(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function Ll(n){if(kn(n)!==n)throw Error(t(188))}function bl(n){var i=n.alternate;if(!i){if(i=kn(n),i===null)throw Error(t(188));return i!==n?null:n}for(var a=n,c=i;;){var d=a.return;if(d===null)break;var p=d.alternate;if(p===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===a)return Ll(d),n;if(p===c)return Ll(d),i;p=p.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=p;else{for(var w=!1,C=d.child;C;){if(C===a){w=!0,a=d,c=p;break}if(C===c){w=!0,c=d,a=p;break}C=C.sibling}if(!w){for(C=p.child;C;){if(C===a){w=!0,a=p,c=d;break}if(C===c){w=!0,c=p,a=d;break}C=C.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:i}function jl(n){return n=bl(n),n!==null?Hs(n):null}function Hs(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=Hs(n);if(i!==null)return i;n=n.sibling}return null}var ra=e.unstable_scheduleCallback,Li=e.unstable_cancelCallback,Gs=e.unstable_shouldYield,yr=e.unstable_requestPaint,Je=e.unstable_now,Jc=e.unstable_getCurrentPriorityLevel,bi=e.unstable_ImmediatePriority,sa=e.unstable_UserBlockingPriority,Ks=e.unstable_NormalPriority,ia=e.unstable_LowPriority,ji=e.unstable_IdlePriority,Qs=null,sn=null;function Fl(n){if(sn&&typeof sn.onCommitFiberRoot=="function")try{sn.onCommitFiberRoot(Qs,n,void 0,(n.current.flags&128)===128)}catch{}}var on=Math.clz32?Math.clz32:Xs,$n=Math.log,wn=Math.LN2;function Xs(n){return n>>>=0,n===0?32:31-($n(n)/wn|0)|0}var qn=64,Zr=4194304;function He(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function _r(n,i){var a=n.pendingLanes;if(a===0)return 0;var c=0,d=n.suspendedLanes,p=n.pingedLanes,w=a&268435455;if(w!==0){var C=w&~d;C!==0?c=He(C):(p&=w,p!==0&&(c=He(p)))}else w=a&~d,w!==0?c=He(w):p!==0&&(c=He(p));if(c===0)return 0;if(i!==0&&i!==c&&(i&d)===0&&(d=c&-c,p=i&-i,d>=p||d===16&&(p&4194240)!==0))return i;if((c&4)!==0&&(c|=a&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=c;0<i;)a=31-on(i),d=1<<a,c|=n[a],i&=~d;return c}function Ys(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Js(n,i){for(var a=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,p=n.pendingLanes;0<p;){var w=31-on(p),C=1<<w,D=d[w];D===-1?((C&a)===0||(C&c)!==0)&&(d[w]=Ys(C,i)):D<=i&&(n.expiredLanes|=C),p&=~C}}function oa(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function aa(){var n=qn;return qn<<=1,(qn&4194240)===0&&(qn=64),n}function la(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function Zs(n,i,a){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-on(i),n[i]=a}function Zc(n,i){var a=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-on(a),p=1<<d;i[d]=0,c[d]=-1,n[d]=-1,a&=~p}}function ua(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var c=31-on(a),d=1<<c;d&i|n[c]&i&&(n[c]|=i),a&=~d}}var Fe=0;function Wn(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var ca,Fi,ha,da,fa,Hn=!1,Ui=[],Gn=null,Kn=null,xt=null,ei=new Map,vr=new Map,an=[],Ul="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function es(n,i){switch(n){case"focusin":case"focusout":Gn=null;break;case"dragenter":case"dragleave":Kn=null;break;case"mouseover":case"mouseout":xt=null;break;case"pointerover":case"pointerout":ei.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":vr.delete(i.pointerId)}}function Nn(n,i,a,c,d,p){return n===null||n.nativeEvent!==p?(n={blockedOn:i,domEventName:a,eventSystemFlags:c,nativeEvent:p,targetContainers:[d]},i!==null&&(i=Ra(i),i!==null&&Fi(i)),n):(n.eventSystemFlags|=c,i=n.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),n)}function Bl(n,i,a,c,d){switch(i){case"focusin":return Gn=Nn(Gn,n,i,a,c,d),!0;case"dragenter":return Kn=Nn(Kn,n,i,a,c,d),!0;case"mouseover":return xt=Nn(xt,n,i,a,c,d),!0;case"pointerover":var p=d.pointerId;return ei.set(p,Nn(ei.get(p)||null,n,i,a,c,d)),!0;case"gotpointercapture":return p=d.pointerId,vr.set(p,Nn(vr.get(p)||null,n,i,a,c,d)),!0}return!1}function Bi(n){var i=si(n.target);if(i!==null){var a=kn(i);if(a!==null){if(i=a.tag,i===13){if(i=na(a),i!==null){n.blockedOn=i,fa(n.priority,function(){ha(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Xe(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=zi(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Kr=c,a.target.dispatchEvent(c),Kr=null}else return i=Ra(a),i!==null&&Fi(i),n.blockedOn=a,!1;i.shift()}return!0}function zl(n,i,a){Xe(n)&&a.delete(i)}function eh(){Hn=!1,Gn!==null&&Xe(Gn)&&(Gn=null),Kn!==null&&Xe(Kn)&&(Kn=null),xt!==null&&Xe(xt)&&(xt=null),ei.forEach(zl),vr.forEach(zl)}function ts(n,i){n.blockedOn===i&&(n.blockedOn=null,Hn||(Hn=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,eh)))}function ns(n){function i(d){return ts(d,n)}if(0<Ui.length){ts(Ui[0],n);for(var a=1;a<Ui.length;a++){var c=Ui[a];c.blockedOn===n&&(c.blockedOn=null)}}for(Gn!==null&&ts(Gn,n),Kn!==null&&ts(Kn,n),xt!==null&&ts(xt,n),ei.forEach(i),vr.forEach(i),a=0;a<an.length;a++)c=an[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<an.length&&(a=an[0],a.blockedOn===null);)Bi(a),a.blockedOn===null&&an.shift()}var wr=ee.ReactCurrentBatchConfig,Er=!0;function Qn(n,i,a,c){var d=Fe,p=wr.transition;wr.transition=null;try{Fe=1,pa(n,i,a,c)}finally{Fe=d,wr.transition=p}}function $l(n,i,a,c){var d=Fe,p=wr.transition;wr.transition=null;try{Fe=4,pa(n,i,a,c)}finally{Fe=d,wr.transition=p}}function pa(n,i,a,c){if(Er){var d=zi(n,i,a,c);if(d===null)hh(n,i,c,Xn,a),es(n,c);else if(Bl(d,n,i,a,c))c.stopPropagation();else if(es(n,c),i&4&&-1<Ul.indexOf(n)){for(;d!==null;){var p=Ra(d);if(p!==null&&ca(p),p=zi(n,i,a,c),p===null&&hh(n,i,c,Xn,a),p===d)break;d=p}d!==null&&c.stopPropagation()}else hh(n,i,c,null,a)}}var Xn=null;function zi(n,i,a,c){if(Xn=null,n=Oi(c),n=si(n),n!==null)if(i=kn(n),i===null)n=null;else if(a=i.tag,a===13){if(n=na(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return Xn=n,null}function $i(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Jc()){case bi:return 1;case sa:return 4;case Ks:case ia:return 16;case ji:return 536870912;default:return 16}default:return 16}}var ln=null,qi=null,Tr=null;function ql(){if(Tr)return Tr;var n,i=qi,a=i.length,c,d="value"in ln?ln.value:ln.textContent,p=d.length;for(n=0;n<a&&i[n]===d[n];n++);var w=a-n;for(c=1;c<=w&&i[a-c]===d[p-c];c++);return Tr=d.slice(n,1<c?1-c:void 0)}function ti(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Yn(){return!0}function ma(){return!1}function Ft(n){function i(a,c,d,p,w){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=p,this.target=w,this.currentTarget=null;for(var C in n)n.hasOwnProperty(C)&&(a=n[C],this[C]=a?a(p):p[C]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Yn:ma,this.isPropagationStopped=ma,this}return ae(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Yn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Yn)},persist:function(){},isPersistent:Yn}),i}var Jn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ni=Ft(Jn),rs=ae({},Jn,{view:0,detail:0}),Wi=Ft(rs),Hi,Gi,un,ri=ae({},rs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ke,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==un&&(un&&n.type==="mousemove"?(Hi=n.screenX-un.screenX,Gi=n.screenY-un.screenY):Gi=Hi=0,un=n),Hi)},movementY:function(n){return"movementY"in n?n.movementY:Gi}}),ga=Ft(ri),Wl=ae({},ri,{dataTransfer:0}),Hl=Ft(Wl),Ki=ae({},rs,{relatedTarget:0}),Dt=Ft(Ki),Gl=ae({},Jn,{animationName:0,elapsedTime:0,pseudoElement:0}),Kl=Ft(Gl),ss=ae({},Jn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),u=Ft(ss),m=ae({},Jn,{data:0}),_=Ft(m),T={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},U={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ie(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=$[n])?!!i[n]:!1}function ke(){return ie}var ct=ae({},rs,{key:function(n){if(n.key){var i=T[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=ti(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?U[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ke,charCode:function(n){return n.type==="keypress"?ti(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ti(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Ke=Ft(ct),gt=ae({},ri,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cn=Ft(gt),Ir=ae({},rs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ke}),Zn=Ft(Ir),er=ae({},Jn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qi=Ft(er),ya=ae({},ri,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),fE=Ft(ya),pE=[9,13,27,32],th=f&&"CompositionEvent"in window,_a=null;f&&"documentMode"in document&&(_a=document.documentMode);var mE=f&&"TextEvent"in window&&!_a,vp=f&&(!th||_a&&8<_a&&11>=_a),wp=" ",Ep=!1;function Tp(n,i){switch(n){case"keyup":return pE.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ip(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Xi=!1;function gE(n,i){switch(n){case"compositionend":return Ip(i);case"keypress":return i.which!==32?null:(Ep=!0,wp);case"textInput":return n=i.data,n===wp&&Ep?null:n;default:return null}}function yE(n,i){if(Xi)return n==="compositionend"||!th&&Tp(n,i)?(n=ql(),Tr=qi=ln=null,Xi=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return vp&&i.locale!=="ko"?null:i.data;default:return null}}var _E={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sp(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!_E[n.type]:i==="textarea"}function Ap(n,i,a,c){Qr(c),i=Zl(i,"onChange"),0<i.length&&(a=new ni("onChange","change",null,a,c),n.push({event:a,listeners:i}))}var va=null,wa=null;function vE(n){$p(n,0)}function Ql(n){var i=to(n);if(Ko(i))return n}function wE(n,i){if(n==="change")return i}var Cp=!1;if(f){var nh;if(f){var rh="oninput"in document;if(!rh){var Rp=document.createElement("div");Rp.setAttribute("oninput","return;"),rh=typeof Rp.oninput=="function"}nh=rh}else nh=!1;Cp=nh&&(!document.documentMode||9<document.documentMode)}function Pp(){va&&(va.detachEvent("onpropertychange",kp),wa=va=null)}function kp(n){if(n.propertyName==="value"&&Ql(wa)){var i=[];Ap(i,wa,n,Oi(n)),Dl(vE,i)}}function EE(n,i,a){n==="focusin"?(Pp(),va=i,wa=a,va.attachEvent("onpropertychange",kp)):n==="focusout"&&Pp()}function TE(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Ql(wa)}function IE(n,i){if(n==="click")return Ql(i)}function SE(n,i){if(n==="input"||n==="change")return Ql(i)}function AE(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var xn=typeof Object.is=="function"?Object.is:AE;function Ea(n,i){if(xn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),c=Object.keys(i);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!g.call(i,d)||!xn(n[d],i[d]))return!1}return!0}function Np(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function xp(n,i){var a=Np(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=i&&c>=i)return{node:a,offset:i-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Np(a)}}function Dp(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Dp(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Vp(){for(var n=window,i=$r();i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=$r(n.document)}return i}function sh(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function CE(n){var i=Vp(),a=n.focusedElem,c=n.selectionRange;if(i!==a&&a&&a.ownerDocument&&Dp(a.ownerDocument.documentElement,a)){if(c!==null&&sh(a)){if(i=c.start,n=c.end,n===void 0&&(n=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(n,a.value.length);else if(n=(i=a.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,p=Math.min(c.start,d);c=c.end===void 0?p:Math.min(c.end,d),!n.extend&&p>c&&(d=c,c=p,p=d),d=xp(a,p);var w=xp(a,c);d&&w&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==w.node||n.focusOffset!==w.offset)&&(i=i.createRange(),i.setStart(d.node,d.offset),n.removeAllRanges(),p>c?(n.addRange(i),n.extend(w.node,w.offset)):(i.setEnd(w.node,w.offset),n.addRange(i)))}}for(i=[],n=a;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)n=i[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var RE=f&&"documentMode"in document&&11>=document.documentMode,Yi=null,ih=null,Ta=null,oh=!1;function Op(n,i,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;oh||Yi==null||Yi!==$r(c)||(c=Yi,"selectionStart"in c&&sh(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ta&&Ea(Ta,c)||(Ta=c,c=Zl(ih,"onSelect"),0<c.length&&(i=new ni("onSelect","select",null,i,a),n.push({event:i,listeners:c}),i.target=Yi)))}function Xl(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var Ji={animationend:Xl("Animation","AnimationEnd"),animationiteration:Xl("Animation","AnimationIteration"),animationstart:Xl("Animation","AnimationStart"),transitionend:Xl("Transition","TransitionEnd")},ah={},Mp={};f&&(Mp=document.createElement("div").style,"AnimationEvent"in window||(delete Ji.animationend.animation,delete Ji.animationiteration.animation,delete Ji.animationstart.animation),"TransitionEvent"in window||delete Ji.transitionend.transition);function Yl(n){if(ah[n])return ah[n];if(!Ji[n])return n;var i=Ji[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in Mp)return ah[n]=i[a];return n}var Lp=Yl("animationend"),bp=Yl("animationiteration"),jp=Yl("animationstart"),Fp=Yl("transitionend"),Up=new Map,Bp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function is(n,i){Up.set(n,i),l(i,[n])}for(var lh=0;lh<Bp.length;lh++){var uh=Bp[lh],PE=uh.toLowerCase(),kE=uh[0].toUpperCase()+uh.slice(1);is(PE,"on"+kE)}is(Lp,"onAnimationEnd"),is(bp,"onAnimationIteration"),is(jp,"onAnimationStart"),is("dblclick","onDoubleClick"),is("focusin","onFocus"),is("focusout","onBlur"),is(Fp,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ia="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),NE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ia));function zp(n,i,a){var c=n.type||"unknown-event";n.currentTarget=a,ta(c,i,void 0,n),n.currentTarget=null}function $p(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],d=c.event;c=c.listeners;e:{var p=void 0;if(i)for(var w=c.length-1;0<=w;w--){var C=c[w],D=C.instance,z=C.currentTarget;if(C=C.listener,D!==p&&d.isPropagationStopped())break e;zp(d,C,z),p=D}else for(w=0;w<c.length;w++){if(C=c[w],D=C.instance,z=C.currentTarget,C=C.listener,D!==p&&d.isPropagationStopped())break e;zp(d,C,z),p=D}}}if(Mi)throw n=vn,Mi=!1,vn=null,n}function Ze(n,i){var a=i[yh];a===void 0&&(a=i[yh]=new Set);var c=n+"__bubble";a.has(c)||(qp(i,n,2,!1),a.add(c))}function ch(n,i,a){var c=0;i&&(c|=4),qp(a,n,c,i)}var Jl="_reactListening"+Math.random().toString(36).slice(2);function Sa(n){if(!n[Jl]){n[Jl]=!0,s.forEach(function(a){a!=="selectionchange"&&(NE.has(a)||ch(a,!1,n),ch(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Jl]||(i[Jl]=!0,ch("selectionchange",!1,i))}}function qp(n,i,a,c){switch($i(i)){case 1:var d=Qn;break;case 4:d=$l;break;default:d=pa}a=d.bind(null,i,a,n),d=void 0,!Yr||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(i,a,{capture:!0,passive:d}):n.addEventListener(i,a,!0):d!==void 0?n.addEventListener(i,a,{passive:d}):n.addEventListener(i,a,!1)}function hh(n,i,a,c,d){var p=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var C=c.stateNode.containerInfo;if(C===d||C.nodeType===8&&C.parentNode===d)break;if(w===4)for(w=c.return;w!==null;){var D=w.tag;if((D===3||D===4)&&(D=w.stateNode.containerInfo,D===d||D.nodeType===8&&D.parentNode===d))return;w=w.return}for(;C!==null;){if(w=si(C),w===null)return;if(D=w.tag,D===5||D===6){c=p=w;continue e}C=C.parentNode}}c=c.return}Dl(function(){var z=p,Y=Oi(a),Z=[];e:{var X=Up.get(n);if(X!==void 0){var le=ni,de=n;switch(n){case"keypress":if(ti(a)===0)break e;case"keydown":case"keyup":le=Ke;break;case"focusin":de="focus",le=Dt;break;case"focusout":de="blur",le=Dt;break;case"beforeblur":case"afterblur":le=Dt;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=ga;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=Hl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=Zn;break;case Lp:case bp:case jp:le=Kl;break;case Fp:le=Qi;break;case"scroll":le=Wi;break;case"wheel":le=fE;break;case"copy":case"cut":case"paste":le=u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=cn}var pe=(i&4)!==0,ht=!pe&&n==="scroll",j=pe?X!==null?X+"Capture":null:X;pe=[];for(var V=z,B;V!==null;){B=V;var ne=B.stateNode;if(B.tag===5&&ne!==null&&(B=ne,j!==null&&(ne=Ws(V,j),ne!=null&&pe.push(Aa(V,ne,B)))),ht)break;V=V.return}0<pe.length&&(X=new le(X,de,null,a,Y),Z.push({event:X,listeners:pe}))}}if((i&7)===0){e:{if(X=n==="mouseover"||n==="pointerover",le=n==="mouseout"||n==="pointerout",X&&a!==Kr&&(de=a.relatedTarget||a.fromElement)&&(si(de)||de[Sr]))break e;if((le||X)&&(X=Y.window===Y?Y:(X=Y.ownerDocument)?X.defaultView||X.parentWindow:window,le?(de=a.relatedTarget||a.toElement,le=z,de=de?si(de):null,de!==null&&(ht=kn(de),de!==ht||de.tag!==5&&de.tag!==6)&&(de=null)):(le=null,de=z),le!==de)){if(pe=ga,ne="onMouseLeave",j="onMouseEnter",V="mouse",(n==="pointerout"||n==="pointerover")&&(pe=cn,ne="onPointerLeave",j="onPointerEnter",V="pointer"),ht=le==null?X:to(le),B=de==null?X:to(de),X=new pe(ne,V+"leave",le,a,Y),X.target=ht,X.relatedTarget=B,ne=null,si(Y)===z&&(pe=new pe(j,V+"enter",de,a,Y),pe.target=B,pe.relatedTarget=ht,ne=pe),ht=ne,le&&de)t:{for(pe=le,j=de,V=0,B=pe;B;B=Zi(B))V++;for(B=0,ne=j;ne;ne=Zi(ne))B++;for(;0<V-B;)pe=Zi(pe),V--;for(;0<B-V;)j=Zi(j),B--;for(;V--;){if(pe===j||j!==null&&pe===j.alternate)break t;pe=Zi(pe),j=Zi(j)}pe=null}else pe=null;le!==null&&Wp(Z,X,le,pe,!1),de!==null&&ht!==null&&Wp(Z,ht,de,pe,!0)}}e:{if(X=z?to(z):window,le=X.nodeName&&X.nodeName.toLowerCase(),le==="select"||le==="input"&&X.type==="file")var me=wE;else if(Sp(X))if(Cp)me=SE;else{me=TE;var ve=EE}else(le=X.nodeName)&&le.toLowerCase()==="input"&&(X.type==="checkbox"||X.type==="radio")&&(me=IE);if(me&&(me=me(n,z))){Ap(Z,me,a,Y);break e}ve&&ve(n,X,z),n==="focusout"&&(ve=X._wrapperState)&&ve.controlled&&X.type==="number"&&mt(X,"number",X.value)}switch(ve=z?to(z):window,n){case"focusin":(Sp(ve)||ve.contentEditable==="true")&&(Yi=ve,ih=z,Ta=null);break;case"focusout":Ta=ih=Yi=null;break;case"mousedown":oh=!0;break;case"contextmenu":case"mouseup":case"dragend":oh=!1,Op(Z,a,Y);break;case"selectionchange":if(RE)break;case"keydown":case"keyup":Op(Z,a,Y)}var we;if(th)e:{switch(n){case"compositionstart":var Ie="onCompositionStart";break e;case"compositionend":Ie="onCompositionEnd";break e;case"compositionupdate":Ie="onCompositionUpdate";break e}Ie=void 0}else Xi?Tp(n,a)&&(Ie="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Ie="onCompositionStart");Ie&&(vp&&a.locale!=="ko"&&(Xi||Ie!=="onCompositionStart"?Ie==="onCompositionEnd"&&Xi&&(we=ql()):(ln=Y,qi="value"in ln?ln.value:ln.textContent,Xi=!0)),ve=Zl(z,Ie),0<ve.length&&(Ie=new _(Ie,n,null,a,Y),Z.push({event:Ie,listeners:ve}),we?Ie.data=we:(we=Ip(a),we!==null&&(Ie.data=we)))),(we=mE?gE(n,a):yE(n,a))&&(z=Zl(z,"onBeforeInput"),0<z.length&&(Y=new _("onBeforeInput","beforeinput",null,a,Y),Z.push({event:Y,listeners:z}),Y.data=we))}$p(Z,i)})}function Aa(n,i,a){return{instance:n,listener:i,currentTarget:a}}function Zl(n,i){for(var a=i+"Capture",c=[];n!==null;){var d=n,p=d.stateNode;d.tag===5&&p!==null&&(d=p,p=Ws(n,a),p!=null&&c.unshift(Aa(n,p,d)),p=Ws(n,i),p!=null&&c.push(Aa(n,p,d))),n=n.return}return c}function Zi(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Wp(n,i,a,c,d){for(var p=i._reactName,w=[];a!==null&&a!==c;){var C=a,D=C.alternate,z=C.stateNode;if(D!==null&&D===c)break;C.tag===5&&z!==null&&(C=z,d?(D=Ws(a,p),D!=null&&w.unshift(Aa(a,D,C))):d||(D=Ws(a,p),D!=null&&w.push(Aa(a,D,C)))),a=a.return}w.length!==0&&n.push({event:i,listeners:w})}var xE=/\r\n?/g,DE=/\u0000|\uFFFD/g;function Hp(n){return(typeof n=="string"?n:""+n).replace(xE,`
`).replace(DE,"")}function eu(n,i,a){if(i=Hp(i),Hp(n)!==i&&a)throw Error(t(425))}function tu(){}var dh=null,fh=null;function ph(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var mh=typeof setTimeout=="function"?setTimeout:void 0,VE=typeof clearTimeout=="function"?clearTimeout:void 0,Gp=typeof Promise=="function"?Promise:void 0,OE=typeof queueMicrotask=="function"?queueMicrotask:typeof Gp<"u"?function(n){return Gp.resolve(null).then(n).catch(ME)}:mh;function ME(n){setTimeout(function(){throw n})}function gh(n,i){var a=i,c=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){n.removeChild(d),ns(i);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);ns(i)}function os(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function Kp(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}var eo=Math.random().toString(36).slice(2),tr="__reactFiber$"+eo,Ca="__reactProps$"+eo,Sr="__reactContainer$"+eo,yh="__reactEvents$"+eo,LE="__reactListeners$"+eo,bE="__reactHandles$"+eo;function si(n){var i=n[tr];if(i)return i;for(var a=n.parentNode;a;){if(i=a[Sr]||a[tr]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=Kp(n);n!==null;){if(a=n[tr])return a;n=Kp(n)}return i}n=a,a=n.parentNode}return null}function Ra(n){return n=n[tr]||n[Sr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function to(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function nu(n){return n[Ca]||null}var _h=[],no=-1;function as(n){return{current:n}}function et(n){0>no||(n.current=_h[no],_h[no]=null,no--)}function Ye(n,i){no++,_h[no]=n.current,n.current=i}var ls={},Ut=as(ls),Xt=as(!1),ii=ls;function ro(n,i){var a=n.type.contextTypes;if(!a)return ls;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===i)return c.__reactInternalMemoizedMaskedChildContext;var d={},p;for(p in a)d[p]=i[p];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=d),d}function Yt(n){return n=n.childContextTypes,n!=null}function ru(){et(Xt),et(Ut)}function Qp(n,i,a){if(Ut.current!==ls)throw Error(t(168));Ye(Ut,i),Ye(Xt,a)}function Xp(n,i,a){var c=n.stateNode;if(i=i.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in i))throw Error(t(108,$e(n)||"Unknown",d));return ae({},a,c)}function su(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ls,ii=Ut.current,Ye(Ut,n),Ye(Xt,Xt.current),!0}function Yp(n,i,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=Xp(n,i,ii),c.__reactInternalMemoizedMergedChildContext=n,et(Xt),et(Ut),Ye(Ut,n)):et(Xt),Ye(Xt,a)}var Ar=null,iu=!1,vh=!1;function Jp(n){Ar===null?Ar=[n]:Ar.push(n)}function jE(n){iu=!0,Jp(n)}function us(){if(!vh&&Ar!==null){vh=!0;var n=0,i=Fe;try{var a=Ar;for(Fe=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}Ar=null,iu=!1}catch(d){throw Ar!==null&&(Ar=Ar.slice(n+1)),ra(bi,us),d}finally{Fe=i,vh=!1}}return null}var so=[],io=0,ou=null,au=0,En=[],Tn=0,oi=null,Cr=1,Rr="";function ai(n,i){so[io++]=au,so[io++]=ou,ou=n,au=i}function Zp(n,i,a){En[Tn++]=Cr,En[Tn++]=Rr,En[Tn++]=oi,oi=n;var c=Cr;n=Rr;var d=32-on(c)-1;c&=~(1<<d),a+=1;var p=32-on(i)+d;if(30<p){var w=d-d%5;p=(c&(1<<w)-1).toString(32),c>>=w,d-=w,Cr=1<<32-on(i)+d|a<<d|c,Rr=p+n}else Cr=1<<p|a<<d|c,Rr=n}function wh(n){n.return!==null&&(ai(n,1),Zp(n,1,0))}function Eh(n){for(;n===ou;)ou=so[--io],so[io]=null,au=so[--io],so[io]=null;for(;n===oi;)oi=En[--Tn],En[Tn]=null,Rr=En[--Tn],En[Tn]=null,Cr=En[--Tn],En[Tn]=null}var hn=null,dn=null,nt=!1,Dn=null;function em(n,i){var a=Cn(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=n,i=n.deletions,i===null?(n.deletions=[a],n.flags|=16):i.push(a)}function tm(n,i){switch(n.tag){case 5:var a=n.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,hn=n,dn=os(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,hn=n,dn=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=oi!==null?{id:Cr,overflow:Rr}:null,n.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=Cn(18,null,null,0),a.stateNode=i,a.return=n,n.child=a,hn=n,dn=null,!0):!1;default:return!1}}function Th(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Ih(n){if(nt){var i=dn;if(i){var a=i;if(!tm(n,i)){if(Th(n))throw Error(t(418));i=os(a.nextSibling);var c=hn;i&&tm(n,i)?em(c,a):(n.flags=n.flags&-4097|2,nt=!1,hn=n)}}else{if(Th(n))throw Error(t(418));n.flags=n.flags&-4097|2,nt=!1,hn=n}}}function nm(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;hn=n}function lu(n){if(n!==hn)return!1;if(!nt)return nm(n),nt=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!ph(n.type,n.memoizedProps)),i&&(i=dn)){if(Th(n))throw rm(),Error(t(418));for(;i;)em(n,i),i=os(i.nextSibling)}if(nm(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(i===0){dn=os(n.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}n=n.nextSibling}dn=null}}else dn=hn?os(n.stateNode.nextSibling):null;return!0}function rm(){for(var n=dn;n;)n=os(n.nextSibling)}function oo(){dn=hn=null,nt=!1}function Sh(n){Dn===null?Dn=[n]:Dn.push(n)}var FE=ee.ReactCurrentBatchConfig;function Pa(n,i,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var d=c,p=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===p?i.ref:(i=function(w){var C=d.refs;w===null?delete C[p]:C[p]=w},i._stringRef=p,i)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function uu(n,i){throw n=Object.prototype.toString.call(i),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function sm(n){var i=n._init;return i(n._payload)}function im(n){function i(j,V){if(n){var B=j.deletions;B===null?(j.deletions=[V],j.flags|=16):B.push(V)}}function a(j,V){if(!n)return null;for(;V!==null;)i(j,V),V=V.sibling;return null}function c(j,V){for(j=new Map;V!==null;)V.key!==null?j.set(V.key,V):j.set(V.index,V),V=V.sibling;return j}function d(j,V){return j=ys(j,V),j.index=0,j.sibling=null,j}function p(j,V,B){return j.index=B,n?(B=j.alternate,B!==null?(B=B.index,B<V?(j.flags|=2,V):B):(j.flags|=2,V)):(j.flags|=1048576,V)}function w(j){return n&&j.alternate===null&&(j.flags|=2),j}function C(j,V,B,ne){return V===null||V.tag!==6?(V=md(B,j.mode,ne),V.return=j,V):(V=d(V,B),V.return=j,V)}function D(j,V,B,ne){var me=B.type;return me===P?Y(j,V,B.props.children,ne,B.key):V!==null&&(V.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===Ue&&sm(me)===V.type)?(ne=d(V,B.props),ne.ref=Pa(j,V,B),ne.return=j,ne):(ne=Vu(B.type,B.key,B.props,null,j.mode,ne),ne.ref=Pa(j,V,B),ne.return=j,ne)}function z(j,V,B,ne){return V===null||V.tag!==4||V.stateNode.containerInfo!==B.containerInfo||V.stateNode.implementation!==B.implementation?(V=gd(B,j.mode,ne),V.return=j,V):(V=d(V,B.children||[]),V.return=j,V)}function Y(j,V,B,ne,me){return V===null||V.tag!==7?(V=mi(B,j.mode,ne,me),V.return=j,V):(V=d(V,B),V.return=j,V)}function Z(j,V,B){if(typeof V=="string"&&V!==""||typeof V=="number")return V=md(""+V,j.mode,B),V.return=j,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case se:return B=Vu(V.type,V.key,V.props,null,j.mode,B),B.ref=Pa(j,null,V),B.return=j,B;case J:return V=gd(V,j.mode,B),V.return=j,V;case Ue:var ne=V._init;return Z(j,ne(V._payload),B)}if(ut(V)||ge(V))return V=mi(V,j.mode,B,null),V.return=j,V;uu(j,V)}return null}function X(j,V,B,ne){var me=V!==null?V.key:null;if(typeof B=="string"&&B!==""||typeof B=="number")return me!==null?null:C(j,V,""+B,ne);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case se:return B.key===me?D(j,V,B,ne):null;case J:return B.key===me?z(j,V,B,ne):null;case Ue:return me=B._init,X(j,V,me(B._payload),ne)}if(ut(B)||ge(B))return me!==null?null:Y(j,V,B,ne,null);uu(j,B)}return null}function le(j,V,B,ne,me){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return j=j.get(B)||null,C(V,j,""+ne,me);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case se:return j=j.get(ne.key===null?B:ne.key)||null,D(V,j,ne,me);case J:return j=j.get(ne.key===null?B:ne.key)||null,z(V,j,ne,me);case Ue:var ve=ne._init;return le(j,V,B,ve(ne._payload),me)}if(ut(ne)||ge(ne))return j=j.get(B)||null,Y(V,j,ne,me,null);uu(V,ne)}return null}function de(j,V,B,ne){for(var me=null,ve=null,we=V,Ie=V=0,Pt=null;we!==null&&Ie<B.length;Ie++){we.index>Ie?(Pt=we,we=null):Pt=we.sibling;var We=X(j,we,B[Ie],ne);if(We===null){we===null&&(we=Pt);break}n&&we&&We.alternate===null&&i(j,we),V=p(We,V,Ie),ve===null?me=We:ve.sibling=We,ve=We,we=Pt}if(Ie===B.length)return a(j,we),nt&&ai(j,Ie),me;if(we===null){for(;Ie<B.length;Ie++)we=Z(j,B[Ie],ne),we!==null&&(V=p(we,V,Ie),ve===null?me=we:ve.sibling=we,ve=we);return nt&&ai(j,Ie),me}for(we=c(j,we);Ie<B.length;Ie++)Pt=le(we,j,Ie,B[Ie],ne),Pt!==null&&(n&&Pt.alternate!==null&&we.delete(Pt.key===null?Ie:Pt.key),V=p(Pt,V,Ie),ve===null?me=Pt:ve.sibling=Pt,ve=Pt);return n&&we.forEach(function(_s){return i(j,_s)}),nt&&ai(j,Ie),me}function pe(j,V,B,ne){var me=ge(B);if(typeof me!="function")throw Error(t(150));if(B=me.call(B),B==null)throw Error(t(151));for(var ve=me=null,we=V,Ie=V=0,Pt=null,We=B.next();we!==null&&!We.done;Ie++,We=B.next()){we.index>Ie?(Pt=we,we=null):Pt=we.sibling;var _s=X(j,we,We.value,ne);if(_s===null){we===null&&(we=Pt);break}n&&we&&_s.alternate===null&&i(j,we),V=p(_s,V,Ie),ve===null?me=_s:ve.sibling=_s,ve=_s,we=Pt}if(We.done)return a(j,we),nt&&ai(j,Ie),me;if(we===null){for(;!We.done;Ie++,We=B.next())We=Z(j,We.value,ne),We!==null&&(V=p(We,V,Ie),ve===null?me=We:ve.sibling=We,ve=We);return nt&&ai(j,Ie),me}for(we=c(j,we);!We.done;Ie++,We=B.next())We=le(we,j,Ie,We.value,ne),We!==null&&(n&&We.alternate!==null&&we.delete(We.key===null?Ie:We.key),V=p(We,V,Ie),ve===null?me=We:ve.sibling=We,ve=We);return n&&we.forEach(function(_0){return i(j,_0)}),nt&&ai(j,Ie),me}function ht(j,V,B,ne){if(typeof B=="object"&&B!==null&&B.type===P&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case se:e:{for(var me=B.key,ve=V;ve!==null;){if(ve.key===me){if(me=B.type,me===P){if(ve.tag===7){a(j,ve.sibling),V=d(ve,B.props.children),V.return=j,j=V;break e}}else if(ve.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===Ue&&sm(me)===ve.type){a(j,ve.sibling),V=d(ve,B.props),V.ref=Pa(j,ve,B),V.return=j,j=V;break e}a(j,ve);break}else i(j,ve);ve=ve.sibling}B.type===P?(V=mi(B.props.children,j.mode,ne,B.key),V.return=j,j=V):(ne=Vu(B.type,B.key,B.props,null,j.mode,ne),ne.ref=Pa(j,V,B),ne.return=j,j=ne)}return w(j);case J:e:{for(ve=B.key;V!==null;){if(V.key===ve)if(V.tag===4&&V.stateNode.containerInfo===B.containerInfo&&V.stateNode.implementation===B.implementation){a(j,V.sibling),V=d(V,B.children||[]),V.return=j,j=V;break e}else{a(j,V);break}else i(j,V);V=V.sibling}V=gd(B,j.mode,ne),V.return=j,j=V}return w(j);case Ue:return ve=B._init,ht(j,V,ve(B._payload),ne)}if(ut(B))return de(j,V,B,ne);if(ge(B))return pe(j,V,B,ne);uu(j,B)}return typeof B=="string"&&B!==""||typeof B=="number"?(B=""+B,V!==null&&V.tag===6?(a(j,V.sibling),V=d(V,B),V.return=j,j=V):(a(j,V),V=md(B,j.mode,ne),V.return=j,j=V),w(j)):a(j,V)}return ht}var ao=im(!0),om=im(!1),cu=as(null),hu=null,lo=null,Ah=null;function Ch(){Ah=lo=hu=null}function Rh(n){var i=cu.current;et(cu),n._currentValue=i}function Ph(n,i,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),n===a)break;n=n.return}}function uo(n,i){hu=n,Ah=lo=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&i)!==0&&(Jt=!0),n.firstContext=null)}function In(n){var i=n._currentValue;if(Ah!==n)if(n={context:n,memoizedValue:i,next:null},lo===null){if(hu===null)throw Error(t(308));lo=n,hu.dependencies={lanes:0,firstContext:n}}else lo=lo.next=n;return i}var li=null;function kh(n){li===null?li=[n]:li.push(n)}function am(n,i,a,c){var d=i.interleaved;return d===null?(a.next=a,kh(i)):(a.next=d.next,d.next=a),i.interleaved=a,Pr(n,c)}function Pr(n,i){n.lanes|=i;var a=n.alternate;for(a!==null&&(a.lanes|=i),a=n,n=n.return;n!==null;)n.childLanes|=i,a=n.alternate,a!==null&&(a.childLanes|=i),a=n,n=n.return;return a.tag===3?a.stateNode:null}var cs=!1;function Nh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lm(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function kr(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function hs(n,i,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(qe&2)!==0){var d=c.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),c.pending=i,Pr(n,a)}return d=c.interleaved,d===null?(i.next=i,kh(c)):(i.next=d.next,d.next=i),c.interleaved=i,Pr(n,a)}function du(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,ua(n,a)}}function um(n,i){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};p===null?d=p=w:p=p.next=w,a=a.next}while(a!==null);p===null?d=p=i:p=p.next=i}else d=p=i;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}function fu(n,i,a,c){var d=n.updateQueue;cs=!1;var p=d.firstBaseUpdate,w=d.lastBaseUpdate,C=d.shared.pending;if(C!==null){d.shared.pending=null;var D=C,z=D.next;D.next=null,w===null?p=z:w.next=z,w=D;var Y=n.alternate;Y!==null&&(Y=Y.updateQueue,C=Y.lastBaseUpdate,C!==w&&(C===null?Y.firstBaseUpdate=z:C.next=z,Y.lastBaseUpdate=D))}if(p!==null){var Z=d.baseState;w=0,Y=z=D=null,C=p;do{var X=C.lane,le=C.eventTime;if((c&X)===X){Y!==null&&(Y=Y.next={eventTime:le,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});e:{var de=n,pe=C;switch(X=i,le=a,pe.tag){case 1:if(de=pe.payload,typeof de=="function"){Z=de.call(le,Z,X);break e}Z=de;break e;case 3:de.flags=de.flags&-65537|128;case 0:if(de=pe.payload,X=typeof de=="function"?de.call(le,Z,X):de,X==null)break e;Z=ae({},Z,X);break e;case 2:cs=!0}}C.callback!==null&&C.lane!==0&&(n.flags|=64,X=d.effects,X===null?d.effects=[C]:X.push(C))}else le={eventTime:le,lane:X,tag:C.tag,payload:C.payload,callback:C.callback,next:null},Y===null?(z=Y=le,D=Z):Y=Y.next=le,w|=X;if(C=C.next,C===null){if(C=d.shared.pending,C===null)break;X=C,C=X.next,X.next=null,d.lastBaseUpdate=X,d.shared.pending=null}}while(!0);if(Y===null&&(D=Z),d.baseState=D,d.firstBaseUpdate=z,d.lastBaseUpdate=Y,i=d.shared.interleaved,i!==null){d=i;do w|=d.lane,d=d.next;while(d!==i)}else p===null&&(d.shared.lanes=0);hi|=w,n.lanes=w,n.memoizedState=Z}}function cm(n,i,a){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var c=n[i],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var ka={},nr=as(ka),Na=as(ka),xa=as(ka);function ui(n){if(n===ka)throw Error(t(174));return n}function xh(n,i){switch(Ye(xa,i),Ye(Na,n),Ye(nr,ka),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:xi(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=xi(i,n)}et(nr),Ye(nr,i)}function co(){et(nr),et(Na),et(xa)}function hm(n){ui(xa.current);var i=ui(nr.current),a=xi(i,n.type);i!==a&&(Ye(Na,n),Ye(nr,a))}function Dh(n){Na.current===n&&(et(nr),et(Na))}var rt=as(0);function pu(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Vh=[];function Oh(){for(var n=0;n<Vh.length;n++)Vh[n]._workInProgressVersionPrimary=null;Vh.length=0}var mu=ee.ReactCurrentDispatcher,Mh=ee.ReactCurrentBatchConfig,ci=0,st=null,Et=null,Ct=null,gu=!1,Da=!1,Va=0,UE=0;function Bt(){throw Error(t(321))}function Lh(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!xn(n[a],i[a]))return!1;return!0}function bh(n,i,a,c,d,p){if(ci=p,st=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,mu.current=n===null||n.memoizedState===null?qE:WE,n=a(c,d),Da){p=0;do{if(Da=!1,Va=0,25<=p)throw Error(t(301));p+=1,Ct=Et=null,i.updateQueue=null,mu.current=HE,n=a(c,d)}while(Da)}if(mu.current=vu,i=Et!==null&&Et.next!==null,ci=0,Ct=Et=st=null,gu=!1,i)throw Error(t(300));return n}function jh(){var n=Va!==0;return Va=0,n}function rr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?st.memoizedState=Ct=n:Ct=Ct.next=n,Ct}function Sn(){if(Et===null){var n=st.alternate;n=n!==null?n.memoizedState:null}else n=Et.next;var i=Ct===null?st.memoizedState:Ct.next;if(i!==null)Ct=i,Et=n;else{if(n===null)throw Error(t(310));Et=n,n={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},Ct===null?st.memoizedState=Ct=n:Ct=Ct.next=n}return Ct}function Oa(n,i){return typeof i=="function"?i(n):i}function Fh(n){var i=Sn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=Et,d=c.baseQueue,p=a.pending;if(p!==null){if(d!==null){var w=d.next;d.next=p.next,p.next=w}c.baseQueue=d=p,a.pending=null}if(d!==null){p=d.next,c=c.baseState;var C=w=null,D=null,z=p;do{var Y=z.lane;if((ci&Y)===Y)D!==null&&(D=D.next={lane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),c=z.hasEagerState?z.eagerState:n(c,z.action);else{var Z={lane:Y,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null};D===null?(C=D=Z,w=c):D=D.next=Z,st.lanes|=Y,hi|=Y}z=z.next}while(z!==null&&z!==p);D===null?w=c:D.next=C,xn(c,i.memoizedState)||(Jt=!0),i.memoizedState=c,i.baseState=w,i.baseQueue=D,a.lastRenderedState=c}if(n=a.interleaved,n!==null){d=n;do p=d.lane,st.lanes|=p,hi|=p,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function Uh(n){var i=Sn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,d=a.pending,p=i.memoizedState;if(d!==null){a.pending=null;var w=d=d.next;do p=n(p,w.action),w=w.next;while(w!==d);xn(p,i.memoizedState)||(Jt=!0),i.memoizedState=p,i.baseQueue===null&&(i.baseState=p),a.lastRenderedState=p}return[p,c]}function dm(){}function fm(n,i){var a=st,c=Sn(),d=i(),p=!xn(c.memoizedState,d);if(p&&(c.memoizedState=d,Jt=!0),c=c.queue,Bh(gm.bind(null,a,c,n),[n]),c.getSnapshot!==i||p||Ct!==null&&Ct.memoizedState.tag&1){if(a.flags|=2048,Ma(9,mm.bind(null,a,c,d,i),void 0,null),Rt===null)throw Error(t(349));(ci&30)!==0||pm(a,i,d)}return d}function pm(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=st.updateQueue,i===null?(i={lastEffect:null,stores:null},st.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function mm(n,i,a,c){i.value=a,i.getSnapshot=c,ym(i)&&_m(n)}function gm(n,i,a){return a(function(){ym(i)&&_m(n)})}function ym(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!xn(n,a)}catch{return!0}}function _m(n){var i=Pr(n,1);i!==null&&Ln(i,n,1,-1)}function vm(n){var i=rr();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Oa,lastRenderedState:n},i.queue=n,n=n.dispatch=$E.bind(null,st,n),[i.memoizedState,n]}function Ma(n,i,a,c){return n={tag:n,create:i,destroy:a,deps:c,next:null},i=st.updateQueue,i===null?(i={lastEffect:null,stores:null},st.updateQueue=i,i.lastEffect=n.next=n):(a=i.lastEffect,a===null?i.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,i.lastEffect=n)),n}function wm(){return Sn().memoizedState}function yu(n,i,a,c){var d=rr();st.flags|=n,d.memoizedState=Ma(1|i,a,void 0,c===void 0?null:c)}function _u(n,i,a,c){var d=Sn();c=c===void 0?null:c;var p=void 0;if(Et!==null){var w=Et.memoizedState;if(p=w.destroy,c!==null&&Lh(c,w.deps)){d.memoizedState=Ma(i,a,p,c);return}}st.flags|=n,d.memoizedState=Ma(1|i,a,p,c)}function Em(n,i){return yu(8390656,8,n,i)}function Bh(n,i){return _u(2048,8,n,i)}function Tm(n,i){return _u(4,2,n,i)}function Im(n,i){return _u(4,4,n,i)}function Sm(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Am(n,i,a){return a=a!=null?a.concat([n]):null,_u(4,4,Sm.bind(null,i,n),a)}function zh(){}function Cm(n,i){var a=Sn();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&Lh(i,c[1])?c[0]:(a.memoizedState=[n,i],n)}function Rm(n,i){var a=Sn();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&Lh(i,c[1])?c[0]:(n=n(),a.memoizedState=[n,i],n)}function Pm(n,i,a){return(ci&21)===0?(n.baseState&&(n.baseState=!1,Jt=!0),n.memoizedState=a):(xn(a,i)||(a=aa(),st.lanes|=a,hi|=a,n.baseState=!0),i)}function BE(n,i){var a=Fe;Fe=a!==0&&4>a?a:4,n(!0);var c=Mh.transition;Mh.transition={};try{n(!1),i()}finally{Fe=a,Mh.transition=c}}function km(){return Sn().memoizedState}function zE(n,i,a){var c=ms(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},Nm(n))xm(i,a);else if(a=am(n,i,a,c),a!==null){var d=Kt();Ln(a,n,c,d),Dm(a,i,c)}}function $E(n,i,a){var c=ms(n),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(Nm(n))xm(i,d);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=i.lastRenderedReducer,p!==null))try{var w=i.lastRenderedState,C=p(w,a);if(d.hasEagerState=!0,d.eagerState=C,xn(C,w)){var D=i.interleaved;D===null?(d.next=d,kh(i)):(d.next=D.next,D.next=d),i.interleaved=d;return}}catch{}a=am(n,i,d,c),a!==null&&(d=Kt(),Ln(a,n,c,d),Dm(a,i,c))}}function Nm(n){var i=n.alternate;return n===st||i!==null&&i===st}function xm(n,i){Da=gu=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function Dm(n,i,a){if((a&4194240)!==0){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,ua(n,a)}}var vu={readContext:In,useCallback:Bt,useContext:Bt,useEffect:Bt,useImperativeHandle:Bt,useInsertionEffect:Bt,useLayoutEffect:Bt,useMemo:Bt,useReducer:Bt,useRef:Bt,useState:Bt,useDebugValue:Bt,useDeferredValue:Bt,useTransition:Bt,useMutableSource:Bt,useSyncExternalStore:Bt,useId:Bt,unstable_isNewReconciler:!1},qE={readContext:In,useCallback:function(n,i){return rr().memoizedState=[n,i===void 0?null:i],n},useContext:In,useEffect:Em,useImperativeHandle:function(n,i,a){return a=a!=null?a.concat([n]):null,yu(4194308,4,Sm.bind(null,i,n),a)},useLayoutEffect:function(n,i){return yu(4194308,4,n,i)},useInsertionEffect:function(n,i){return yu(4,2,n,i)},useMemo:function(n,i){var a=rr();return i=i===void 0?null:i,n=n(),a.memoizedState=[n,i],n},useReducer:function(n,i,a){var c=rr();return i=a!==void 0?a(i):i,c.memoizedState=c.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},c.queue=n,n=n.dispatch=zE.bind(null,st,n),[c.memoizedState,n]},useRef:function(n){var i=rr();return n={current:n},i.memoizedState=n},useState:vm,useDebugValue:zh,useDeferredValue:function(n){return rr().memoizedState=n},useTransition:function(){var n=vm(!1),i=n[0];return n=BE.bind(null,n[1]),rr().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,a){var c=st,d=rr();if(nt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=i(),Rt===null)throw Error(t(349));(ci&30)!==0||pm(c,i,a)}d.memoizedState=a;var p={value:a,getSnapshot:i};return d.queue=p,Em(gm.bind(null,c,p,n),[n]),c.flags|=2048,Ma(9,mm.bind(null,c,p,a,i),void 0,null),a},useId:function(){var n=rr(),i=Rt.identifierPrefix;if(nt){var a=Rr,c=Cr;a=(c&~(1<<32-on(c)-1)).toString(32)+a,i=":"+i+"R"+a,a=Va++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=UE++,i=":"+i+"r"+a.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},WE={readContext:In,useCallback:Cm,useContext:In,useEffect:Bh,useImperativeHandle:Am,useInsertionEffect:Tm,useLayoutEffect:Im,useMemo:Rm,useReducer:Fh,useRef:wm,useState:function(){return Fh(Oa)},useDebugValue:zh,useDeferredValue:function(n){var i=Sn();return Pm(i,Et.memoizedState,n)},useTransition:function(){var n=Fh(Oa)[0],i=Sn().memoizedState;return[n,i]},useMutableSource:dm,useSyncExternalStore:fm,useId:km,unstable_isNewReconciler:!1},HE={readContext:In,useCallback:Cm,useContext:In,useEffect:Bh,useImperativeHandle:Am,useInsertionEffect:Tm,useLayoutEffect:Im,useMemo:Rm,useReducer:Uh,useRef:wm,useState:function(){return Uh(Oa)},useDebugValue:zh,useDeferredValue:function(n){var i=Sn();return Et===null?i.memoizedState=n:Pm(i,Et.memoizedState,n)},useTransition:function(){var n=Uh(Oa)[0],i=Sn().memoizedState;return[n,i]},useMutableSource:dm,useSyncExternalStore:fm,useId:km,unstable_isNewReconciler:!1};function Vn(n,i){if(n&&n.defaultProps){i=ae({},i),n=n.defaultProps;for(var a in n)i[a]===void 0&&(i[a]=n[a]);return i}return i}function $h(n,i,a,c){i=n.memoizedState,a=a(c,i),a=a==null?i:ae({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var wu={isMounted:function(n){return(n=n._reactInternals)?kn(n)===n:!1},enqueueSetState:function(n,i,a){n=n._reactInternals;var c=Kt(),d=ms(n),p=kr(c,d);p.payload=i,a!=null&&(p.callback=a),i=hs(n,p,d),i!==null&&(Ln(i,n,d,c),du(i,n,d))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var c=Kt(),d=ms(n),p=kr(c,d);p.tag=1,p.payload=i,a!=null&&(p.callback=a),i=hs(n,p,d),i!==null&&(Ln(i,n,d,c),du(i,n,d))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=Kt(),c=ms(n),d=kr(a,c);d.tag=2,i!=null&&(d.callback=i),i=hs(n,d,c),i!==null&&(Ln(i,n,c,a),du(i,n,c))}};function Vm(n,i,a,c,d,p,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,p,w):i.prototype&&i.prototype.isPureReactComponent?!Ea(a,c)||!Ea(d,p):!0}function Om(n,i,a){var c=!1,d=ls,p=i.contextType;return typeof p=="object"&&p!==null?p=In(p):(d=Yt(i)?ii:Ut.current,c=i.contextTypes,p=(c=c!=null)?ro(n,d):ls),i=new i(a,p),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=wu,n.stateNode=i,i._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=p),i}function Mm(n,i,a,c){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,c),i.state!==n&&wu.enqueueReplaceState(i,i.state,null)}function qh(n,i,a,c){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs={},Nh(n);var p=i.contextType;typeof p=="object"&&p!==null?d.context=In(p):(p=Yt(i)?ii:Ut.current,d.context=ro(n,p)),d.state=n.memoizedState,p=i.getDerivedStateFromProps,typeof p=="function"&&($h(n,i,p,a),d.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(i=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),i!==d.state&&wu.enqueueReplaceState(d,d.state,null),fu(n,a,d,c),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function ho(n,i){try{var a="",c=i;do a+=Ne(c),c=c.return;while(c);var d=a}catch(p){d=`
Error generating stack: `+p.message+`
`+p.stack}return{value:n,source:i,stack:d,digest:null}}function Wh(n,i,a){return{value:n,source:null,stack:a??null,digest:i??null}}function Hh(n,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var GE=typeof WeakMap=="function"?WeakMap:Map;function Lm(n,i,a){a=kr(-1,a),a.tag=3,a.payload={element:null};var c=i.value;return a.callback=function(){Ru||(Ru=!0,ad=c),Hh(n,i)},a}function bm(n,i,a){a=kr(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=i.value;a.payload=function(){return c(d)},a.callback=function(){Hh(n,i)}}var p=n.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(a.callback=function(){Hh(n,i),typeof c!="function"&&(fs===null?fs=new Set([this]):fs.add(this));var w=i.stack;this.componentDidCatch(i.value,{componentStack:w!==null?w:""})}),a}function jm(n,i,a){var c=n.pingCache;if(c===null){c=n.pingCache=new GE;var d=new Set;c.set(i,d)}else d=c.get(i),d===void 0&&(d=new Set,c.set(i,d));d.has(a)||(d.add(a),n=a0.bind(null,n,i,a),i.then(n,n))}function Fm(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function Um(n,i,a,c,d){return(n.mode&1)===0?(n===i?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=kr(-1,1),i.tag=2,hs(a,i,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=d,n)}var KE=ee.ReactCurrentOwner,Jt=!1;function Gt(n,i,a,c){i.child=n===null?om(i,null,a,c):ao(i,n.child,a,c)}function Bm(n,i,a,c,d){a=a.render;var p=i.ref;return uo(i,d),c=bh(n,i,a,c,p,d),a=jh(),n!==null&&!Jt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~d,Nr(n,i,d)):(nt&&a&&wh(i),i.flags|=1,Gt(n,i,c,d),i.child)}function zm(n,i,a,c,d){if(n===null){var p=a.type;return typeof p=="function"&&!pd(p)&&p.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=p,$m(n,i,p,c,d)):(n=Vu(a.type,null,c,i,i.mode,d),n.ref=i.ref,n.return=i,i.child=n)}if(p=n.child,(n.lanes&d)===0){var w=p.memoizedProps;if(a=a.compare,a=a!==null?a:Ea,a(w,c)&&n.ref===i.ref)return Nr(n,i,d)}return i.flags|=1,n=ys(p,c),n.ref=i.ref,n.return=i,i.child=n}function $m(n,i,a,c,d){if(n!==null){var p=n.memoizedProps;if(Ea(p,c)&&n.ref===i.ref)if(Jt=!1,i.pendingProps=c=p,(n.lanes&d)!==0)(n.flags&131072)!==0&&(Jt=!0);else return i.lanes=n.lanes,Nr(n,i,d)}return Gh(n,i,a,c,d)}function qm(n,i,a){var c=i.pendingProps,d=c.children,p=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ye(po,fn),fn|=a;else{if((a&1073741824)===0)return n=p!==null?p.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,Ye(po,fn),fn|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=p!==null?p.baseLanes:a,Ye(po,fn),fn|=c}else p!==null?(c=p.baseLanes|a,i.memoizedState=null):c=a,Ye(po,fn),fn|=c;return Gt(n,i,d,a),i.child}function Wm(n,i){var a=i.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function Gh(n,i,a,c,d){var p=Yt(a)?ii:Ut.current;return p=ro(i,p),uo(i,d),a=bh(n,i,a,c,p,d),c=jh(),n!==null&&!Jt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~d,Nr(n,i,d)):(nt&&c&&wh(i),i.flags|=1,Gt(n,i,a,d),i.child)}function Hm(n,i,a,c,d){if(Yt(a)){var p=!0;su(i)}else p=!1;if(uo(i,d),i.stateNode===null)Tu(n,i),Om(i,a,c),qh(i,a,c,d),c=!0;else if(n===null){var w=i.stateNode,C=i.memoizedProps;w.props=C;var D=w.context,z=a.contextType;typeof z=="object"&&z!==null?z=In(z):(z=Yt(a)?ii:Ut.current,z=ro(i,z));var Y=a.getDerivedStateFromProps,Z=typeof Y=="function"||typeof w.getSnapshotBeforeUpdate=="function";Z||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(C!==c||D!==z)&&Mm(i,w,c,z),cs=!1;var X=i.memoizedState;w.state=X,fu(i,c,w,d),D=i.memoizedState,C!==c||X!==D||Xt.current||cs?(typeof Y=="function"&&($h(i,a,Y,c),D=i.memoizedState),(C=cs||Vm(i,a,C,c,X,D,z))?(Z||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(i.flags|=4194308)):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=D),w.props=c,w.state=D,w.context=z,c=C):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{w=i.stateNode,lm(n,i),C=i.memoizedProps,z=i.type===i.elementType?C:Vn(i.type,C),w.props=z,Z=i.pendingProps,X=w.context,D=a.contextType,typeof D=="object"&&D!==null?D=In(D):(D=Yt(a)?ii:Ut.current,D=ro(i,D));var le=a.getDerivedStateFromProps;(Y=typeof le=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(C!==Z||X!==D)&&Mm(i,w,c,D),cs=!1,X=i.memoizedState,w.state=X,fu(i,c,w,d);var de=i.memoizedState;C!==Z||X!==de||Xt.current||cs?(typeof le=="function"&&($h(i,a,le,c),de=i.memoizedState),(z=cs||Vm(i,a,z,c,X,de,D)||!1)?(Y||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(c,de,D),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(c,de,D)),typeof w.componentDidUpdate=="function"&&(i.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof w.componentDidUpdate!="function"||C===n.memoizedProps&&X===n.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&X===n.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=de),w.props=c,w.state=de,w.context=D,c=z):(typeof w.componentDidUpdate!="function"||C===n.memoizedProps&&X===n.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&X===n.memoizedState||(i.flags|=1024),c=!1)}return Kh(n,i,a,c,p,d)}function Kh(n,i,a,c,d,p){Wm(n,i);var w=(i.flags&128)!==0;if(!c&&!w)return d&&Yp(i,a,!1),Nr(n,i,p);c=i.stateNode,KE.current=i;var C=w&&typeof a.getDerivedStateFromError!="function"?null:c.render();return i.flags|=1,n!==null&&w?(i.child=ao(i,n.child,null,p),i.child=ao(i,null,C,p)):Gt(n,i,C,p),i.memoizedState=c.state,d&&Yp(i,a,!0),i.child}function Gm(n){var i=n.stateNode;i.pendingContext?Qp(n,i.pendingContext,i.pendingContext!==i.context):i.context&&Qp(n,i.context,!1),xh(n,i.containerInfo)}function Km(n,i,a,c,d){return oo(),Sh(d),i.flags|=256,Gt(n,i,a,c),i.child}var Qh={dehydrated:null,treeContext:null,retryLane:0};function Xh(n){return{baseLanes:n,cachePool:null,transitions:null}}function Qm(n,i,a){var c=i.pendingProps,d=rt.current,p=!1,w=(i.flags&128)!==0,C;if((C=w)||(C=n!==null&&n.memoizedState===null?!1:(d&2)!==0),C?(p=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),Ye(rt,d&1),n===null)return Ih(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((i.mode&1)===0?i.lanes=1:n.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(w=c.children,n=c.fallback,p?(c=i.mode,p=i.child,w={mode:"hidden",children:w},(c&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=w):p=Ou(w,c,0,null),n=mi(n,c,a,null),p.return=i,n.return=i,p.sibling=n,i.child=p,i.child.memoizedState=Xh(a),i.memoizedState=Qh,n):Yh(i,w));if(d=n.memoizedState,d!==null&&(C=d.dehydrated,C!==null))return QE(n,i,w,c,C,d,a);if(p){p=c.fallback,w=i.mode,d=n.child,C=d.sibling;var D={mode:"hidden",children:c.children};return(w&1)===0&&i.child!==d?(c=i.child,c.childLanes=0,c.pendingProps=D,i.deletions=null):(c=ys(d,D),c.subtreeFlags=d.subtreeFlags&14680064),C!==null?p=ys(C,p):(p=mi(p,w,a,null),p.flags|=2),p.return=i,c.return=i,c.sibling=p,i.child=c,c=p,p=i.child,w=n.child.memoizedState,w=w===null?Xh(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},p.memoizedState=w,p.childLanes=n.childLanes&~a,i.memoizedState=Qh,c}return p=n.child,n=p.sibling,c=ys(p,{mode:"visible",children:c.children}),(i.mode&1)===0&&(c.lanes=a),c.return=i,c.sibling=null,n!==null&&(a=i.deletions,a===null?(i.deletions=[n],i.flags|=16):a.push(n)),i.child=c,i.memoizedState=null,c}function Yh(n,i){return i=Ou({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function Eu(n,i,a,c){return c!==null&&Sh(c),ao(i,n.child,null,a),n=Yh(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function QE(n,i,a,c,d,p,w){if(a)return i.flags&256?(i.flags&=-257,c=Wh(Error(t(422))),Eu(n,i,w,c)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(p=c.fallback,d=i.mode,c=Ou({mode:"visible",children:c.children},d,0,null),p=mi(p,d,w,null),p.flags|=2,c.return=i,p.return=i,c.sibling=p,i.child=c,(i.mode&1)!==0&&ao(i,n.child,null,w),i.child.memoizedState=Xh(w),i.memoizedState=Qh,p);if((i.mode&1)===0)return Eu(n,i,w,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var C=c.dgst;return c=C,p=Error(t(419)),c=Wh(p,c,void 0),Eu(n,i,w,c)}if(C=(w&n.childLanes)!==0,Jt||C){if(c=Rt,c!==null){switch(w&-w){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|w))!==0?0:d,d!==0&&d!==p.retryLane&&(p.retryLane=d,Pr(n,d),Ln(c,n,d,-1))}return fd(),c=Wh(Error(t(421))),Eu(n,i,w,c)}return d.data==="$?"?(i.flags|=128,i.child=n.child,i=l0.bind(null,n),d._reactRetry=i,null):(n=p.treeContext,dn=os(d.nextSibling),hn=i,nt=!0,Dn=null,n!==null&&(En[Tn++]=Cr,En[Tn++]=Rr,En[Tn++]=oi,Cr=n.id,Rr=n.overflow,oi=i),i=Yh(i,c.children),i.flags|=4096,i)}function Xm(n,i,a){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i),Ph(n.return,i,a)}function Jh(n,i,a,c,d){var p=n.memoizedState;p===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(p.isBackwards=i,p.rendering=null,p.renderingStartTime=0,p.last=c,p.tail=a,p.tailMode=d)}function Ym(n,i,a){var c=i.pendingProps,d=c.revealOrder,p=c.tail;if(Gt(n,i,c.children,a),c=rt.current,(c&2)!==0)c=c&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Xm(n,a,i);else if(n.tag===19)Xm(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(Ye(rt,c),(i.mode&1)===0)i.memoizedState=null;else switch(d){case"forwards":for(a=i.child,d=null;a!==null;)n=a.alternate,n!==null&&pu(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=i.child,i.child=null):(d=a.sibling,a.sibling=null),Jh(i,!1,d,a,p);break;case"backwards":for(a=null,d=i.child,i.child=null;d!==null;){if(n=d.alternate,n!==null&&pu(n)===null){i.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}Jh(i,!0,a,null,p);break;case"together":Jh(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Tu(n,i){(i.mode&1)===0&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function Nr(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),hi|=i.lanes,(a&i.childLanes)===0)return null;if(n!==null&&i.child!==n.child)throw Error(t(153));if(i.child!==null){for(n=i.child,a=ys(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=ys(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function XE(n,i,a){switch(i.tag){case 3:Gm(i),oo();break;case 5:hm(i);break;case 1:Yt(i.type)&&su(i);break;case 4:xh(i,i.stateNode.containerInfo);break;case 10:var c=i.type._context,d=i.memoizedProps.value;Ye(cu,c._currentValue),c._currentValue=d;break;case 13:if(c=i.memoizedState,c!==null)return c.dehydrated!==null?(Ye(rt,rt.current&1),i.flags|=128,null):(a&i.child.childLanes)!==0?Qm(n,i,a):(Ye(rt,rt.current&1),n=Nr(n,i,a),n!==null?n.sibling:null);Ye(rt,rt.current&1);break;case 19:if(c=(a&i.childLanes)!==0,(n.flags&128)!==0){if(c)return Ym(n,i,a);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Ye(rt,rt.current),c)break;return null;case 22:case 23:return i.lanes=0,qm(n,i,a)}return Nr(n,i,a)}var Jm,Zh,Zm,eg;Jm=function(n,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Zh=function(){},Zm=function(n,i,a,c){var d=n.memoizedProps;if(d!==c){n=i.stateNode,ui(nr.current);var p=null;switch(a){case"input":d=ki(n,d),c=ki(n,c),p=[];break;case"select":d=ae({},d,{value:void 0}),c=ae({},c,{value:void 0}),p=[];break;case"textarea":d=Xo(n,d),c=Xo(n,c),p=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=tu)}Pn(a,c);var w;a=null;for(z in d)if(!c.hasOwnProperty(z)&&d.hasOwnProperty(z)&&d[z]!=null)if(z==="style"){var C=d[z];for(w in C)C.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else z!=="dangerouslySetInnerHTML"&&z!=="children"&&z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&z!=="autoFocus"&&(o.hasOwnProperty(z)?p||(p=[]):(p=p||[]).push(z,null));for(z in c){var D=c[z];if(C=d?.[z],c.hasOwnProperty(z)&&D!==C&&(D!=null||C!=null))if(z==="style")if(C){for(w in C)!C.hasOwnProperty(w)||D&&D.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in D)D.hasOwnProperty(w)&&C[w]!==D[w]&&(a||(a={}),a[w]=D[w])}else a||(p||(p=[]),p.push(z,a)),a=D;else z==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,C=C?C.__html:void 0,D!=null&&C!==D&&(p=p||[]).push(z,D)):z==="children"?typeof D!="string"&&typeof D!="number"||(p=p||[]).push(z,""+D):z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&(o.hasOwnProperty(z)?(D!=null&&z==="onScroll"&&Ze("scroll",n),p||C===D||(p=[])):(p=p||[]).push(z,D))}a&&(p=p||[]).push("style",a);var z=p;(i.updateQueue=z)&&(i.flags|=4)}},eg=function(n,i,a,c){a!==c&&(i.flags|=4)};function La(n,i){if(!nt)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function zt(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(i)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=a,i}function YE(n,i,a){var c=i.pendingProps;switch(Eh(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zt(i),null;case 1:return Yt(i.type)&&ru(),zt(i),null;case 3:return c=i.stateNode,co(),et(Xt),et(Ut),Oh(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(lu(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Dn!==null&&(cd(Dn),Dn=null))),Zh(n,i),zt(i),null;case 5:Dh(i);var d=ui(xa.current);if(a=i.type,n!==null&&i.stateNode!=null)Zm(n,i,a,c,d),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!c){if(i.stateNode===null)throw Error(t(166));return zt(i),null}if(n=ui(nr.current),lu(i)){c=i.stateNode,a=i.type;var p=i.memoizedProps;switch(c[tr]=i,c[Ca]=p,n=(i.mode&1)!==0,a){case"dialog":Ze("cancel",c),Ze("close",c);break;case"iframe":case"object":case"embed":Ze("load",c);break;case"video":case"audio":for(d=0;d<Ia.length;d++)Ze(Ia[d],c);break;case"source":Ze("error",c);break;case"img":case"image":case"link":Ze("error",c),Ze("load",c);break;case"details":Ze("toggle",c);break;case"input":Cl(c,p),Ze("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!p.multiple},Ze("invalid",c);break;case"textarea":Yo(c,p),Ze("invalid",c)}Pn(a,p),d=null;for(var w in p)if(p.hasOwnProperty(w)){var C=p[w];w==="children"?typeof C=="string"?c.textContent!==C&&(p.suppressHydrationWarning!==!0&&eu(c.textContent,C,n),d=["children",C]):typeof C=="number"&&c.textContent!==""+C&&(p.suppressHydrationWarning!==!0&&eu(c.textContent,C,n),d=["children",""+C]):o.hasOwnProperty(w)&&C!=null&&w==="onScroll"&&Ze("scroll",c)}switch(a){case"input":_n(c),Qo(c,p,!0);break;case"textarea":_n(c),qr(c);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(c.onclick=tu)}c=d,i.updateQueue=c,c!==null&&(i.flags|=4)}else{w=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Jo(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=w.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=w.createElement(a,{is:c.is}):(n=w.createElement(a),a==="select"&&(w=n,c.multiple?w.multiple=!0:c.size&&(w.size=c.size))):n=w.createElementNS(n,a),n[tr]=i,n[Ca]=c,Jm(n,i,!1,!1),i.stateNode=n;e:{switch(w=Vi(a,c),a){case"dialog":Ze("cancel",n),Ze("close",n),d=c;break;case"iframe":case"object":case"embed":Ze("load",n),d=c;break;case"video":case"audio":for(d=0;d<Ia.length;d++)Ze(Ia[d],n);d=c;break;case"source":Ze("error",n),d=c;break;case"img":case"image":case"link":Ze("error",n),Ze("load",n),d=c;break;case"details":Ze("toggle",n),d=c;break;case"input":Cl(n,c),d=ki(n,c),Ze("invalid",n);break;case"option":d=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},d=ae({},c,{value:void 0}),Ze("invalid",n);break;case"textarea":Yo(n,c),d=Xo(n,c),Ze("invalid",n);break;default:d=c}Pn(a,d),C=d;for(p in C)if(C.hasOwnProperty(p)){var D=C[p];p==="style"?Di(n,D):p==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,D!=null&&Pl(n,D)):p==="children"?typeof D=="string"?(a!=="textarea"||D!=="")&&qs(n,D):typeof D=="number"&&qs(n,""+D):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(o.hasOwnProperty(p)?D!=null&&p==="onScroll"&&Ze("scroll",n):D!=null&&b(n,p,D,w))}switch(a){case"input":_n(n),Qo(n,c,!1);break;case"textarea":_n(n),qr(n);break;case"option":c.value!=null&&n.setAttribute("value",""+je(c.value));break;case"select":n.multiple=!!c.multiple,p=c.value,p!=null?Rn(n,!!c.multiple,p,!1):c.defaultValue!=null&&Rn(n,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=tu)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return zt(i),null;case 6:if(n&&i.stateNode!=null)eg(n,i,n.memoizedProps,c);else{if(typeof c!="string"&&i.stateNode===null)throw Error(t(166));if(a=ui(xa.current),ui(nr.current),lu(i)){if(c=i.stateNode,a=i.memoizedProps,c[tr]=i,(p=c.nodeValue!==a)&&(n=hn,n!==null))switch(n.tag){case 3:eu(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&eu(c.nodeValue,a,(n.mode&1)!==0)}p&&(i.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[tr]=i,i.stateNode=c}return zt(i),null;case 13:if(et(rt),c=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(nt&&dn!==null&&(i.mode&1)!==0&&(i.flags&128)===0)rm(),oo(),i.flags|=98560,p=!1;else if(p=lu(i),c!==null&&c.dehydrated!==null){if(n===null){if(!p)throw Error(t(318));if(p=i.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(t(317));p[tr]=i}else oo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;zt(i),p=!1}else Dn!==null&&(cd(Dn),Dn=null),p=!0;if(!p)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=a,i):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(i.child.flags|=8192,(i.mode&1)!==0&&(n===null||(rt.current&1)!==0?Tt===0&&(Tt=3):fd())),i.updateQueue!==null&&(i.flags|=4),zt(i),null);case 4:return co(),Zh(n,i),n===null&&Sa(i.stateNode.containerInfo),zt(i),null;case 10:return Rh(i.type._context),zt(i),null;case 17:return Yt(i.type)&&ru(),zt(i),null;case 19:if(et(rt),p=i.memoizedState,p===null)return zt(i),null;if(c=(i.flags&128)!==0,w=p.rendering,w===null)if(c)La(p,!1);else{if(Tt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(w=pu(n),w!==null){for(i.flags|=128,La(p,!1),c=w.updateQueue,c!==null&&(i.updateQueue=c,i.flags|=4),i.subtreeFlags=0,c=a,a=i.child;a!==null;)p=a,n=c,p.flags&=14680066,w=p.alternate,w===null?(p.childLanes=0,p.lanes=n,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=w.childLanes,p.lanes=w.lanes,p.child=w.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=w.memoizedProps,p.memoizedState=w.memoizedState,p.updateQueue=w.updateQueue,p.type=w.type,n=w.dependencies,p.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Ye(rt,rt.current&1|2),i.child}n=n.sibling}p.tail!==null&&Je()>mo&&(i.flags|=128,c=!0,La(p,!1),i.lanes=4194304)}else{if(!c)if(n=pu(w),n!==null){if(i.flags|=128,c=!0,a=n.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),La(p,!0),p.tail===null&&p.tailMode==="hidden"&&!w.alternate&&!nt)return zt(i),null}else 2*Je()-p.renderingStartTime>mo&&a!==1073741824&&(i.flags|=128,c=!0,La(p,!1),i.lanes=4194304);p.isBackwards?(w.sibling=i.child,i.child=w):(a=p.last,a!==null?a.sibling=w:i.child=w,p.last=w)}return p.tail!==null?(i=p.tail,p.rendering=i,p.tail=i.sibling,p.renderingStartTime=Je(),i.sibling=null,a=rt.current,Ye(rt,c?a&1|2:a&1),i):(zt(i),null);case 22:case 23:return dd(),c=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(i.flags|=8192),c&&(i.mode&1)!==0?(fn&1073741824)!==0&&(zt(i),i.subtreeFlags&6&&(i.flags|=8192)):zt(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function JE(n,i){switch(Eh(i),i.tag){case 1:return Yt(i.type)&&ru(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return co(),et(Xt),et(Ut),Oh(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 5:return Dh(i),null;case 13:if(et(rt),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(t(340));oo()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return et(rt),null;case 4:return co(),null;case 10:return Rh(i.type._context),null;case 22:case 23:return dd(),null;case 24:return null;default:return null}}var Iu=!1,$t=!1,ZE=typeof WeakSet=="function"?WeakSet:Set,ce=null;function fo(n,i){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){lt(n,i,c)}else a.current=null}function ed(n,i,a){try{a()}catch(c){lt(n,i,c)}}var tg=!1;function e0(n,i){if(dh=Er,n=Vp(),sh(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break e}var w=0,C=-1,D=-1,z=0,Y=0,Z=n,X=null;t:for(;;){for(var le;Z!==a||d!==0&&Z.nodeType!==3||(C=w+d),Z!==p||c!==0&&Z.nodeType!==3||(D=w+c),Z.nodeType===3&&(w+=Z.nodeValue.length),(le=Z.firstChild)!==null;)X=Z,Z=le;for(;;){if(Z===n)break t;if(X===a&&++z===d&&(C=w),X===p&&++Y===c&&(D=w),(le=Z.nextSibling)!==null)break;Z=X,X=Z.parentNode}Z=le}a=C===-1||D===-1?null:{start:C,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(fh={focusedElem:n,selectionRange:a},Er=!1,ce=i;ce!==null;)if(i=ce,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,ce=n;else for(;ce!==null;){i=ce;try{var de=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(de!==null){var pe=de.memoizedProps,ht=de.memoizedState,j=i.stateNode,V=j.getSnapshotBeforeUpdate(i.elementType===i.type?pe:Vn(i.type,pe),ht);j.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var B=i.stateNode.containerInfo;B.nodeType===1?B.textContent="":B.nodeType===9&&B.documentElement&&B.removeChild(B.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ne){lt(i,i.return,ne)}if(n=i.sibling,n!==null){n.return=i.return,ce=n;break}ce=i.return}return de=tg,tg=!1,de}function ba(n,i,a){var c=i.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&n)===n){var p=d.destroy;d.destroy=void 0,p!==void 0&&ed(i,a,p)}d=d.next}while(d!==c)}}function Su(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==i)}}function td(n){var i=n.ref;if(i!==null){var a=n.stateNode;n.tag,n=a,typeof i=="function"?i(n):i.current=n}}function ng(n){var i=n.alternate;i!==null&&(n.alternate=null,ng(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[tr],delete i[Ca],delete i[yh],delete i[LE],delete i[bE])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function rg(n){return n.tag===5||n.tag===3||n.tag===4}function sg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||rg(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function nd(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(n,i):a.insertBefore(n,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(n,a)):(i=a,i.appendChild(n)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=tu));else if(c!==4&&(n=n.child,n!==null))for(nd(n,i,a),n=n.sibling;n!==null;)nd(n,i,a),n=n.sibling}function rd(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(rd(n,i,a),n=n.sibling;n!==null;)rd(n,i,a),n=n.sibling}var Vt=null,On=!1;function ds(n,i,a){for(a=a.child;a!==null;)ig(n,i,a),a=a.sibling}function ig(n,i,a){if(sn&&typeof sn.onCommitFiberUnmount=="function")try{sn.onCommitFiberUnmount(Qs,a)}catch{}switch(a.tag){case 5:$t||fo(a,i);case 6:var c=Vt,d=On;Vt=null,ds(n,i,a),Vt=c,On=d,Vt!==null&&(On?(n=Vt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Vt.removeChild(a.stateNode));break;case 18:Vt!==null&&(On?(n=Vt,a=a.stateNode,n.nodeType===8?gh(n.parentNode,a):n.nodeType===1&&gh(n,a),ns(n)):gh(Vt,a.stateNode));break;case 4:c=Vt,d=On,Vt=a.stateNode.containerInfo,On=!0,ds(n,i,a),Vt=c,On=d;break;case 0:case 11:case 14:case 15:if(!$t&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var p=d,w=p.destroy;p=p.tag,w!==void 0&&((p&2)!==0||(p&4)!==0)&&ed(a,i,w),d=d.next}while(d!==c)}ds(n,i,a);break;case 1:if(!$t&&(fo(a,i),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(C){lt(a,i,C)}ds(n,i,a);break;case 21:ds(n,i,a);break;case 22:a.mode&1?($t=(c=$t)||a.memoizedState!==null,ds(n,i,a),$t=c):ds(n,i,a);break;default:ds(n,i,a)}}function og(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new ZE),i.forEach(function(c){var d=u0.bind(null,n,c);a.has(c)||(a.add(c),c.then(d,d))})}}function Mn(n,i){var a=i.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var p=n,w=i,C=w;e:for(;C!==null;){switch(C.tag){case 5:Vt=C.stateNode,On=!1;break e;case 3:Vt=C.stateNode.containerInfo,On=!0;break e;case 4:Vt=C.stateNode.containerInfo,On=!0;break e}C=C.return}if(Vt===null)throw Error(t(160));ig(p,w,d),Vt=null,On=!1;var D=d.alternate;D!==null&&(D.return=null),d.return=null}catch(z){lt(d,i,z)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)ag(i,n),i=i.sibling}function ag(n,i){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Mn(i,n),sr(n),c&4){try{ba(3,n,n.return),Su(3,n)}catch(pe){lt(n,n.return,pe)}try{ba(5,n,n.return)}catch(pe){lt(n,n.return,pe)}}break;case 1:Mn(i,n),sr(n),c&512&&a!==null&&fo(a,a.return);break;case 5:if(Mn(i,n),sr(n),c&512&&a!==null&&fo(a,a.return),n.flags&32){var d=n.stateNode;try{qs(d,"")}catch(pe){lt(n,n.return,pe)}}if(c&4&&(d=n.stateNode,d!=null)){var p=n.memoizedProps,w=a!==null?a.memoizedProps:p,C=n.type,D=n.updateQueue;if(n.updateQueue=null,D!==null)try{C==="input"&&p.type==="radio"&&p.name!=null&&Ni(d,p),Vi(C,w);var z=Vi(C,p);for(w=0;w<D.length;w+=2){var Y=D[w],Z=D[w+1];Y==="style"?Di(d,Z):Y==="dangerouslySetInnerHTML"?Pl(d,Z):Y==="children"?qs(d,Z):b(d,Y,Z,z)}switch(C){case"input":$s(d,p);break;case"textarea":Rl(d,p);break;case"select":var X=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!p.multiple;var le=p.value;le!=null?Rn(d,!!p.multiple,le,!1):X!==!!p.multiple&&(p.defaultValue!=null?Rn(d,!!p.multiple,p.defaultValue,!0):Rn(d,!!p.multiple,p.multiple?[]:"",!1))}d[Ca]=p}catch(pe){lt(n,n.return,pe)}}break;case 6:if(Mn(i,n),sr(n),c&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,p=n.memoizedProps;try{d.nodeValue=p}catch(pe){lt(n,n.return,pe)}}break;case 3:if(Mn(i,n),sr(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{ns(i.containerInfo)}catch(pe){lt(n,n.return,pe)}break;case 4:Mn(i,n),sr(n);break;case 13:Mn(i,n),sr(n),d=n.child,d.flags&8192&&(p=d.memoizedState!==null,d.stateNode.isHidden=p,!p||d.alternate!==null&&d.alternate.memoizedState!==null||(od=Je())),c&4&&og(n);break;case 22:if(Y=a!==null&&a.memoizedState!==null,n.mode&1?($t=(z=$t)||Y,Mn(i,n),$t=z):Mn(i,n),sr(n),c&8192){if(z=n.memoizedState!==null,(n.stateNode.isHidden=z)&&!Y&&(n.mode&1)!==0)for(ce=n,Y=n.child;Y!==null;){for(Z=ce=Y;ce!==null;){switch(X=ce,le=X.child,X.tag){case 0:case 11:case 14:case 15:ba(4,X,X.return);break;case 1:fo(X,X.return);var de=X.stateNode;if(typeof de.componentWillUnmount=="function"){c=X,a=X.return;try{i=c,de.props=i.memoizedProps,de.state=i.memoizedState,de.componentWillUnmount()}catch(pe){lt(c,a,pe)}}break;case 5:fo(X,X.return);break;case 22:if(X.memoizedState!==null){cg(Z);continue}}le!==null?(le.return=X,ce=le):cg(Z)}Y=Y.sibling}e:for(Y=null,Z=n;;){if(Z.tag===5){if(Y===null){Y=Z;try{d=Z.stateNode,z?(p=d.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(C=Z.stateNode,D=Z.memoizedProps.style,w=D!=null&&D.hasOwnProperty("display")?D.display:null,C.style.display=Gr("display",w))}catch(pe){lt(n,n.return,pe)}}}else if(Z.tag===6){if(Y===null)try{Z.stateNode.nodeValue=z?"":Z.memoizedProps}catch(pe){lt(n,n.return,pe)}}else if((Z.tag!==22&&Z.tag!==23||Z.memoizedState===null||Z===n)&&Z.child!==null){Z.child.return=Z,Z=Z.child;continue}if(Z===n)break e;for(;Z.sibling===null;){if(Z.return===null||Z.return===n)break e;Y===Z&&(Y=null),Z=Z.return}Y===Z&&(Y=null),Z.sibling.return=Z.return,Z=Z.sibling}}break;case 19:Mn(i,n),sr(n),c&4&&og(n);break;case 21:break;default:Mn(i,n),sr(n)}}function sr(n){var i=n.flags;if(i&2){try{e:{for(var a=n.return;a!==null;){if(rg(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(qs(d,""),c.flags&=-33);var p=sg(n);rd(n,p,d);break;case 3:case 4:var w=c.stateNode.containerInfo,C=sg(n);nd(n,C,w);break;default:throw Error(t(161))}}catch(D){lt(n,n.return,D)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function t0(n,i,a){ce=n,lg(n)}function lg(n,i,a){for(var c=(n.mode&1)!==0;ce!==null;){var d=ce,p=d.child;if(d.tag===22&&c){var w=d.memoizedState!==null||Iu;if(!w){var C=d.alternate,D=C!==null&&C.memoizedState!==null||$t;C=Iu;var z=$t;if(Iu=w,($t=D)&&!z)for(ce=d;ce!==null;)w=ce,D=w.child,w.tag===22&&w.memoizedState!==null?hg(d):D!==null?(D.return=w,ce=D):hg(d);for(;p!==null;)ce=p,lg(p),p=p.sibling;ce=d,Iu=C,$t=z}ug(n)}else(d.subtreeFlags&8772)!==0&&p!==null?(p.return=d,ce=p):ug(n)}}function ug(n){for(;ce!==null;){var i=ce;if((i.flags&8772)!==0){var a=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:$t||Su(5,i);break;case 1:var c=i.stateNode;if(i.flags&4&&!$t)if(a===null)c.componentDidMount();else{var d=i.elementType===i.type?a.memoizedProps:Vn(i.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var p=i.updateQueue;p!==null&&cm(i,p,c);break;case 3:var w=i.updateQueue;if(w!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}cm(i,w,a)}break;case 5:var C=i.stateNode;if(a===null&&i.flags&4){a=C;var D=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":D.autoFocus&&a.focus();break;case"img":D.src&&(a.src=D.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var z=i.alternate;if(z!==null){var Y=z.memoizedState;if(Y!==null){var Z=Y.dehydrated;Z!==null&&ns(Z)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}$t||i.flags&512&&td(i)}catch(X){lt(i,i.return,X)}}if(i===n){ce=null;break}if(a=i.sibling,a!==null){a.return=i.return,ce=a;break}ce=i.return}}function cg(n){for(;ce!==null;){var i=ce;if(i===n){ce=null;break}var a=i.sibling;if(a!==null){a.return=i.return,ce=a;break}ce=i.return}}function hg(n){for(;ce!==null;){var i=ce;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{Su(4,i)}catch(D){lt(i,a,D)}break;case 1:var c=i.stateNode;if(typeof c.componentDidMount=="function"){var d=i.return;try{c.componentDidMount()}catch(D){lt(i,d,D)}}var p=i.return;try{td(i)}catch(D){lt(i,p,D)}break;case 5:var w=i.return;try{td(i)}catch(D){lt(i,w,D)}}}catch(D){lt(i,i.return,D)}if(i===n){ce=null;break}var C=i.sibling;if(C!==null){C.return=i.return,ce=C;break}ce=i.return}}var n0=Math.ceil,Au=ee.ReactCurrentDispatcher,sd=ee.ReactCurrentOwner,An=ee.ReactCurrentBatchConfig,qe=0,Rt=null,yt=null,Ot=0,fn=0,po=as(0),Tt=0,ja=null,hi=0,Cu=0,id=0,Fa=null,Zt=null,od=0,mo=1/0,xr=null,Ru=!1,ad=null,fs=null,Pu=!1,ps=null,ku=0,Ua=0,ld=null,Nu=-1,xu=0;function Kt(){return(qe&6)!==0?Je():Nu!==-1?Nu:Nu=Je()}function ms(n){return(n.mode&1)===0?1:(qe&2)!==0&&Ot!==0?Ot&-Ot:FE.transition!==null?(xu===0&&(xu=aa()),xu):(n=Fe,n!==0||(n=window.event,n=n===void 0?16:$i(n.type)),n)}function Ln(n,i,a,c){if(50<Ua)throw Ua=0,ld=null,Error(t(185));Zs(n,a,c),((qe&2)===0||n!==Rt)&&(n===Rt&&((qe&2)===0&&(Cu|=a),Tt===4&&gs(n,Ot)),en(n,c),a===1&&qe===0&&(i.mode&1)===0&&(mo=Je()+500,iu&&us()))}function en(n,i){var a=n.callbackNode;Js(n,i);var c=_r(n,n===Rt?Ot:0);if(c===0)a!==null&&Li(a),n.callbackNode=null,n.callbackPriority=0;else if(i=c&-c,n.callbackPriority!==i){if(a!=null&&Li(a),i===1)n.tag===0?jE(fg.bind(null,n)):Jp(fg.bind(null,n)),OE(function(){(qe&6)===0&&us()}),a=null;else{switch(Wn(c)){case 1:a=bi;break;case 4:a=sa;break;case 16:a=Ks;break;case 536870912:a=ji;break;default:a=Ks}a=Eg(a,dg.bind(null,n))}n.callbackPriority=i,n.callbackNode=a}}function dg(n,i){if(Nu=-1,xu=0,(qe&6)!==0)throw Error(t(327));var a=n.callbackNode;if(go()&&n.callbackNode!==a)return null;var c=_r(n,n===Rt?Ot:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||i)i=Du(n,c);else{i=c;var d=qe;qe|=2;var p=mg();(Rt!==n||Ot!==i)&&(xr=null,mo=Je()+500,fi(n,i));do try{i0();break}catch(C){pg(n,C)}while(!0);Ch(),Au.current=p,qe=d,yt!==null?i=0:(Rt=null,Ot=0,i=Tt)}if(i!==0){if(i===2&&(d=oa(n),d!==0&&(c=d,i=ud(n,d))),i===1)throw a=ja,fi(n,0),gs(n,c),en(n,Je()),a;if(i===6)gs(n,c);else{if(d=n.current.alternate,(c&30)===0&&!r0(d)&&(i=Du(n,c),i===2&&(p=oa(n),p!==0&&(c=p,i=ud(n,p))),i===1))throw a=ja,fi(n,0),gs(n,c),en(n,Je()),a;switch(n.finishedWork=d,n.finishedLanes=c,i){case 0:case 1:throw Error(t(345));case 2:pi(n,Zt,xr);break;case 3:if(gs(n,c),(c&130023424)===c&&(i=od+500-Je(),10<i)){if(_r(n,0)!==0)break;if(d=n.suspendedLanes,(d&c)!==c){Kt(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=mh(pi.bind(null,n,Zt,xr),i);break}pi(n,Zt,xr);break;case 4:if(gs(n,c),(c&4194240)===c)break;for(i=n.eventTimes,d=-1;0<c;){var w=31-on(c);p=1<<w,w=i[w],w>d&&(d=w),c&=~p}if(c=d,c=Je()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*n0(c/1960))-c,10<c){n.timeoutHandle=mh(pi.bind(null,n,Zt,xr),c);break}pi(n,Zt,xr);break;case 5:pi(n,Zt,xr);break;default:throw Error(t(329))}}}return en(n,Je()),n.callbackNode===a?dg.bind(null,n):null}function ud(n,i){var a=Fa;return n.current.memoizedState.isDehydrated&&(fi(n,i).flags|=256),n=Du(n,i),n!==2&&(i=Zt,Zt=a,i!==null&&cd(i)),n}function cd(n){Zt===null?Zt=n:Zt.push.apply(Zt,n)}function r0(n){for(var i=n;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],p=d.getSnapshot;d=d.value;try{if(!xn(p(),d))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function gs(n,i){for(i&=~id,i&=~Cu,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var a=31-on(i),c=1<<a;n[a]=-1,i&=~c}}function fg(n){if((qe&6)!==0)throw Error(t(327));go();var i=_r(n,0);if((i&1)===0)return en(n,Je()),null;var a=Du(n,i);if(n.tag!==0&&a===2){var c=oa(n);c!==0&&(i=c,a=ud(n,c))}if(a===1)throw a=ja,fi(n,0),gs(n,i),en(n,Je()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,pi(n,Zt,xr),en(n,Je()),null}function hd(n,i){var a=qe;qe|=1;try{return n(i)}finally{qe=a,qe===0&&(mo=Je()+500,iu&&us())}}function di(n){ps!==null&&ps.tag===0&&(qe&6)===0&&go();var i=qe;qe|=1;var a=An.transition,c=Fe;try{if(An.transition=null,Fe=1,n)return n()}finally{Fe=c,An.transition=a,qe=i,(qe&6)===0&&us()}}function dd(){fn=po.current,et(po)}function fi(n,i){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,VE(a)),yt!==null)for(a=yt.return;a!==null;){var c=a;switch(Eh(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&ru();break;case 3:co(),et(Xt),et(Ut),Oh();break;case 5:Dh(c);break;case 4:co();break;case 13:et(rt);break;case 19:et(rt);break;case 10:Rh(c.type._context);break;case 22:case 23:dd()}a=a.return}if(Rt=n,yt=n=ys(n.current,null),Ot=fn=i,Tt=0,ja=null,id=Cu=hi=0,Zt=Fa=null,li!==null){for(i=0;i<li.length;i++)if(a=li[i],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,p=a.pending;if(p!==null){var w=p.next;p.next=d,c.next=w}a.pending=c}li=null}return n}function pg(n,i){do{var a=yt;try{if(Ch(),mu.current=vu,gu){for(var c=st.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}gu=!1}if(ci=0,Ct=Et=st=null,Da=!1,Va=0,sd.current=null,a===null||a.return===null){Tt=1,ja=i,yt=null;break}e:{var p=n,w=a.return,C=a,D=i;if(i=Ot,C.flags|=32768,D!==null&&typeof D=="object"&&typeof D.then=="function"){var z=D,Y=C,Z=Y.tag;if((Y.mode&1)===0&&(Z===0||Z===11||Z===15)){var X=Y.alternate;X?(Y.updateQueue=X.updateQueue,Y.memoizedState=X.memoizedState,Y.lanes=X.lanes):(Y.updateQueue=null,Y.memoizedState=null)}var le=Fm(w);if(le!==null){le.flags&=-257,Um(le,w,C,p,i),le.mode&1&&jm(p,z,i),i=le,D=z;var de=i.updateQueue;if(de===null){var pe=new Set;pe.add(D),i.updateQueue=pe}else de.add(D);break e}else{if((i&1)===0){jm(p,z,i),fd();break e}D=Error(t(426))}}else if(nt&&C.mode&1){var ht=Fm(w);if(ht!==null){(ht.flags&65536)===0&&(ht.flags|=256),Um(ht,w,C,p,i),Sh(ho(D,C));break e}}p=D=ho(D,C),Tt!==4&&(Tt=2),Fa===null?Fa=[p]:Fa.push(p),p=w;do{switch(p.tag){case 3:p.flags|=65536,i&=-i,p.lanes|=i;var j=Lm(p,D,i);um(p,j);break e;case 1:C=D;var V=p.type,B=p.stateNode;if((p.flags&128)===0&&(typeof V.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(fs===null||!fs.has(B)))){p.flags|=65536,i&=-i,p.lanes|=i;var ne=bm(p,C,i);um(p,ne);break e}}p=p.return}while(p!==null)}yg(a)}catch(me){i=me,yt===a&&a!==null&&(yt=a=a.return);continue}break}while(!0)}function mg(){var n=Au.current;return Au.current=vu,n===null?vu:n}function fd(){(Tt===0||Tt===3||Tt===2)&&(Tt=4),Rt===null||(hi&268435455)===0&&(Cu&268435455)===0||gs(Rt,Ot)}function Du(n,i){var a=qe;qe|=2;var c=mg();(Rt!==n||Ot!==i)&&(xr=null,fi(n,i));do try{s0();break}catch(d){pg(n,d)}while(!0);if(Ch(),qe=a,Au.current=c,yt!==null)throw Error(t(261));return Rt=null,Ot=0,Tt}function s0(){for(;yt!==null;)gg(yt)}function i0(){for(;yt!==null&&!Gs();)gg(yt)}function gg(n){var i=wg(n.alternate,n,fn);n.memoizedProps=n.pendingProps,i===null?yg(n):yt=i,sd.current=null}function yg(n){var i=n;do{var a=i.alternate;if(n=i.return,(i.flags&32768)===0){if(a=YE(a,i,fn),a!==null){yt=a;return}}else{if(a=JE(a,i),a!==null){a.flags&=32767,yt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Tt=6,yt=null;return}}if(i=i.sibling,i!==null){yt=i;return}yt=i=n}while(i!==null);Tt===0&&(Tt=5)}function pi(n,i,a){var c=Fe,d=An.transition;try{An.transition=null,Fe=1,o0(n,i,a,c)}finally{An.transition=d,Fe=c}return null}function o0(n,i,a,c){do go();while(ps!==null);if((qe&6)!==0)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var p=a.lanes|a.childLanes;if(Zc(n,p),n===Rt&&(yt=Rt=null,Ot=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Pu||(Pu=!0,Eg(Ks,function(){return go(),null})),p=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||p){p=An.transition,An.transition=null;var w=Fe;Fe=1;var C=qe;qe|=4,sd.current=null,e0(n,a),ag(a,n),CE(fh),Er=!!dh,fh=dh=null,n.current=a,t0(a),yr(),qe=C,Fe=w,An.transition=p}else n.current=a;if(Pu&&(Pu=!1,ps=n,ku=d),p=n.pendingLanes,p===0&&(fs=null),Fl(a.stateNode),en(n,Je()),i!==null)for(c=n.onRecoverableError,a=0;a<i.length;a++)d=i[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(Ru)throw Ru=!1,n=ad,ad=null,n;return(ku&1)!==0&&n.tag!==0&&go(),p=n.pendingLanes,(p&1)!==0?n===ld?Ua++:(Ua=0,ld=n):Ua=0,us(),null}function go(){if(ps!==null){var n=Wn(ku),i=An.transition,a=Fe;try{if(An.transition=null,Fe=16>n?16:n,ps===null)var c=!1;else{if(n=ps,ps=null,ku=0,(qe&6)!==0)throw Error(t(331));var d=qe;for(qe|=4,ce=n.current;ce!==null;){var p=ce,w=p.child;if((ce.flags&16)!==0){var C=p.deletions;if(C!==null){for(var D=0;D<C.length;D++){var z=C[D];for(ce=z;ce!==null;){var Y=ce;switch(Y.tag){case 0:case 11:case 15:ba(8,Y,p)}var Z=Y.child;if(Z!==null)Z.return=Y,ce=Z;else for(;ce!==null;){Y=ce;var X=Y.sibling,le=Y.return;if(ng(Y),Y===z){ce=null;break}if(X!==null){X.return=le,ce=X;break}ce=le}}}var de=p.alternate;if(de!==null){var pe=de.child;if(pe!==null){de.child=null;do{var ht=pe.sibling;pe.sibling=null,pe=ht}while(pe!==null)}}ce=p}}if((p.subtreeFlags&2064)!==0&&w!==null)w.return=p,ce=w;else e:for(;ce!==null;){if(p=ce,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:ba(9,p,p.return)}var j=p.sibling;if(j!==null){j.return=p.return,ce=j;break e}ce=p.return}}var V=n.current;for(ce=V;ce!==null;){w=ce;var B=w.child;if((w.subtreeFlags&2064)!==0&&B!==null)B.return=w,ce=B;else e:for(w=V;ce!==null;){if(C=ce,(C.flags&2048)!==0)try{switch(C.tag){case 0:case 11:case 15:Su(9,C)}}catch(me){lt(C,C.return,me)}if(C===w){ce=null;break e}var ne=C.sibling;if(ne!==null){ne.return=C.return,ce=ne;break e}ce=C.return}}if(qe=d,us(),sn&&typeof sn.onPostCommitFiberRoot=="function")try{sn.onPostCommitFiberRoot(Qs,n)}catch{}c=!0}return c}finally{Fe=a,An.transition=i}}return!1}function _g(n,i,a){i=ho(a,i),i=Lm(n,i,1),n=hs(n,i,1),i=Kt(),n!==null&&(Zs(n,1,i),en(n,i))}function lt(n,i,a){if(n.tag===3)_g(n,n,a);else for(;i!==null;){if(i.tag===3){_g(i,n,a);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(fs===null||!fs.has(c))){n=ho(a,n),n=bm(i,n,1),i=hs(i,n,1),n=Kt(),i!==null&&(Zs(i,1,n),en(i,n));break}}i=i.return}}function a0(n,i,a){var c=n.pingCache;c!==null&&c.delete(i),i=Kt(),n.pingedLanes|=n.suspendedLanes&a,Rt===n&&(Ot&a)===a&&(Tt===4||Tt===3&&(Ot&130023424)===Ot&&500>Je()-od?fi(n,0):id|=a),en(n,i)}function vg(n,i){i===0&&((n.mode&1)===0?i=1:(i=Zr,Zr<<=1,(Zr&130023424)===0&&(Zr=4194304)));var a=Kt();n=Pr(n,i),n!==null&&(Zs(n,i,a),en(n,a))}function l0(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),vg(n,a)}function u0(n,i){var a=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(i),vg(n,a)}var wg;wg=function(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps||Xt.current)Jt=!0;else{if((n.lanes&a)===0&&(i.flags&128)===0)return Jt=!1,XE(n,i,a);Jt=(n.flags&131072)!==0}else Jt=!1,nt&&(i.flags&1048576)!==0&&Zp(i,au,i.index);switch(i.lanes=0,i.tag){case 2:var c=i.type;Tu(n,i),n=i.pendingProps;var d=ro(i,Ut.current);uo(i,a),d=bh(null,i,c,n,d,a);var p=jh();return i.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Yt(c)?(p=!0,su(i)):p=!1,i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Nh(i),d.updater=wu,i.stateNode=d,d._reactInternals=i,qh(i,c,n,a),i=Kh(null,i,c,!0,p,a)):(i.tag=0,nt&&p&&wh(i),Gt(null,i,d,a),i=i.child),i;case 16:c=i.elementType;e:{switch(Tu(n,i),n=i.pendingProps,d=c._init,c=d(c._payload),i.type=c,d=i.tag=h0(c),n=Vn(c,n),d){case 0:i=Gh(null,i,c,n,a);break e;case 1:i=Hm(null,i,c,n,a);break e;case 11:i=Bm(null,i,c,n,a);break e;case 14:i=zm(null,i,c,Vn(c.type,n),a);break e}throw Error(t(306,c,""))}return i;case 0:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:Vn(c,d),Gh(n,i,c,d,a);case 1:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:Vn(c,d),Hm(n,i,c,d,a);case 3:e:{if(Gm(i),n===null)throw Error(t(387));c=i.pendingProps,p=i.memoizedState,d=p.element,lm(n,i),fu(i,c,null,a);var w=i.memoizedState;if(c=w.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){d=ho(Error(t(423)),i),i=Km(n,i,c,a,d);break e}else if(c!==d){d=ho(Error(t(424)),i),i=Km(n,i,c,a,d);break e}else for(dn=os(i.stateNode.containerInfo.firstChild),hn=i,nt=!0,Dn=null,a=om(i,null,c,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(oo(),c===d){i=Nr(n,i,a);break e}Gt(n,i,c,a)}i=i.child}return i;case 5:return hm(i),n===null&&Ih(i),c=i.type,d=i.pendingProps,p=n!==null?n.memoizedProps:null,w=d.children,ph(c,d)?w=null:p!==null&&ph(c,p)&&(i.flags|=32),Wm(n,i),Gt(n,i,w,a),i.child;case 6:return n===null&&Ih(i),null;case 13:return Qm(n,i,a);case 4:return xh(i,i.stateNode.containerInfo),c=i.pendingProps,n===null?i.child=ao(i,null,c,a):Gt(n,i,c,a),i.child;case 11:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:Vn(c,d),Bm(n,i,c,d,a);case 7:return Gt(n,i,i.pendingProps,a),i.child;case 8:return Gt(n,i,i.pendingProps.children,a),i.child;case 12:return Gt(n,i,i.pendingProps.children,a),i.child;case 10:e:{if(c=i.type._context,d=i.pendingProps,p=i.memoizedProps,w=d.value,Ye(cu,c._currentValue),c._currentValue=w,p!==null)if(xn(p.value,w)){if(p.children===d.children&&!Xt.current){i=Nr(n,i,a);break e}}else for(p=i.child,p!==null&&(p.return=i);p!==null;){var C=p.dependencies;if(C!==null){w=p.child;for(var D=C.firstContext;D!==null;){if(D.context===c){if(p.tag===1){D=kr(-1,a&-a),D.tag=2;var z=p.updateQueue;if(z!==null){z=z.shared;var Y=z.pending;Y===null?D.next=D:(D.next=Y.next,Y.next=D),z.pending=D}}p.lanes|=a,D=p.alternate,D!==null&&(D.lanes|=a),Ph(p.return,a,i),C.lanes|=a;break}D=D.next}}else if(p.tag===10)w=p.type===i.type?null:p.child;else if(p.tag===18){if(w=p.return,w===null)throw Error(t(341));w.lanes|=a,C=w.alternate,C!==null&&(C.lanes|=a),Ph(w,a,i),w=p.sibling}else w=p.child;if(w!==null)w.return=p;else for(w=p;w!==null;){if(w===i){w=null;break}if(p=w.sibling,p!==null){p.return=w.return,w=p;break}w=w.return}p=w}Gt(n,i,d.children,a),i=i.child}return i;case 9:return d=i.type,c=i.pendingProps.children,uo(i,a),d=In(d),c=c(d),i.flags|=1,Gt(n,i,c,a),i.child;case 14:return c=i.type,d=Vn(c,i.pendingProps),d=Vn(c.type,d),zm(n,i,c,d,a);case 15:return $m(n,i,i.type,i.pendingProps,a);case 17:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:Vn(c,d),Tu(n,i),i.tag=1,Yt(c)?(n=!0,su(i)):n=!1,uo(i,a),Om(i,c,d),qh(i,c,d,a),Kh(null,i,c,!0,n,a);case 19:return Ym(n,i,a);case 22:return qm(n,i,a)}throw Error(t(156,i.tag))};function Eg(n,i){return ra(n,i)}function c0(n,i,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cn(n,i,a,c){return new c0(n,i,a,c)}function pd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function h0(n){if(typeof n=="function")return pd(n)?1:0;if(n!=null){if(n=n.$$typeof,n===O)return 11;if(n===De)return 14}return 2}function ys(n,i){var a=n.alternate;return a===null?(a=Cn(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Vu(n,i,a,c,d,p){var w=2;if(c=n,typeof n=="function")pd(n)&&(w=1);else if(typeof n=="string")w=5;else e:switch(n){case P:return mi(a.children,d,p,i);case S:w=8,d|=8;break;case k:return n=Cn(12,a,i,d|2),n.elementType=k,n.lanes=p,n;case R:return n=Cn(13,a,i,d),n.elementType=R,n.lanes=p,n;case fe:return n=Cn(19,a,i,d),n.elementType=fe,n.lanes=p,n;case Re:return Ou(a,d,p,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case N:w=10;break e;case x:w=9;break e;case O:w=11;break e;case De:w=14;break e;case Ue:w=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return i=Cn(w,a,i,d),i.elementType=n,i.type=c,i.lanes=p,i}function mi(n,i,a,c){return n=Cn(7,n,c,i),n.lanes=a,n}function Ou(n,i,a,c){return n=Cn(22,n,c,i),n.elementType=Re,n.lanes=a,n.stateNode={isHidden:!1},n}function md(n,i,a){return n=Cn(6,n,null,i),n.lanes=a,n}function gd(n,i,a){return i=Cn(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function d0(n,i,a,c,d){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=la(0),this.expirationTimes=la(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=la(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function yd(n,i,a,c,d,p,w,C,D){return n=new d0(n,i,a,C,D),i===1?(i=1,p===!0&&(i|=8)):i=0,p=Cn(3,null,null,i),n.current=p,p.stateNode=n,p.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nh(p),n}function f0(n,i,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:J,key:c==null?null:""+c,children:n,containerInfo:i,implementation:a}}function Tg(n){if(!n)return ls;n=n._reactInternals;e:{if(kn(n)!==n||n.tag!==1)throw Error(t(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Yt(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Yt(a))return Xp(n,a,i)}return i}function Ig(n,i,a,c,d,p,w,C,D){return n=yd(a,c,!0,n,d,p,w,C,D),n.context=Tg(null),a=n.current,c=Kt(),d=ms(a),p=kr(c,d),p.callback=i??null,hs(a,p,d),n.current.lanes=d,Zs(n,d,c),en(n,c),n}function Mu(n,i,a,c){var d=i.current,p=Kt(),w=ms(d);return a=Tg(a),i.context===null?i.context=a:i.pendingContext=a,i=kr(p,w),i.payload={element:n},c=c===void 0?null:c,c!==null&&(i.callback=c),n=hs(d,i,w),n!==null&&(Ln(n,d,w,p),du(n,d,w)),w}function Lu(n){return n=n.current,n.child?(n.child.tag===5,n.child.stateNode):null}function Sg(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function _d(n,i){Sg(n,i),(n=n.alternate)&&Sg(n,i)}function p0(){return null}var Ag=typeof reportError=="function"?reportError:function(n){console.error(n)};function vd(n){this._internalRoot=n}bu.prototype.render=vd.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(t(409));Mu(n,i,null,null)},bu.prototype.unmount=vd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;di(function(){Mu(null,n,null,null)}),i[Sr]=null}};function bu(n){this._internalRoot=n}bu.prototype.unstable_scheduleHydration=function(n){if(n){var i=da();n={blockedOn:null,target:n,priority:i};for(var a=0;a<an.length&&i!==0&&i<an[a].priority;a++);an.splice(a,0,n),a===0&&Bi(n)}};function wd(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function ju(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Cg(){}function m0(n,i,a,c,d){if(d){if(typeof c=="function"){var p=c;c=function(){var z=Lu(w);p.call(z)}}var w=Ig(i,c,n,0,null,!1,!1,"",Cg);return n._reactRootContainer=w,n[Sr]=w.current,Sa(n.nodeType===8?n.parentNode:n),di(),w}for(;d=n.lastChild;)n.removeChild(d);if(typeof c=="function"){var C=c;c=function(){var z=Lu(D);C.call(z)}}var D=yd(n,0,!1,null,null,!1,!1,"",Cg);return n._reactRootContainer=D,n[Sr]=D.current,Sa(n.nodeType===8?n.parentNode:n),di(function(){Mu(i,D,a,c)}),D}function Fu(n,i,a,c,d){var p=a._reactRootContainer;if(p){var w=p;if(typeof d=="function"){var C=d;d=function(){var D=Lu(w);C.call(D)}}Mu(i,w,n,d)}else w=m0(a,i,n,d,c);return Lu(w)}ca=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var a=He(i.pendingLanes);a!==0&&(ua(i,a|1),en(i,Je()),(qe&6)===0&&(mo=Je()+500,us()))}break;case 13:di(function(){var c=Pr(n,1);if(c!==null){var d=Kt();Ln(c,n,1,d)}}),_d(n,1)}},Fi=function(n){if(n.tag===13){var i=Pr(n,134217728);if(i!==null){var a=Kt();Ln(i,n,134217728,a)}_d(n,134217728)}},ha=function(n){if(n.tag===13){var i=ms(n),a=Pr(n,i);if(a!==null){var c=Kt();Ln(a,n,i,c)}_d(n,i)}},da=function(){return Fe},fa=function(n,i){var a=Fe;try{return Fe=n,i()}finally{Fe=a}},pr=function(n,i,a){switch(i){case"input":if($s(n,a),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var c=a[i];if(c!==n&&c.form===n.form){var d=nu(c);if(!d)throw Error(t(90));Ko(c),$s(c,d)}}}break;case"textarea":Rl(n,a);break;case"select":i=a.value,i!=null&&Rn(n,!!a.multiple,i,!1)}},Nl=hd,xl=di;var g0={usingClientEntryPoint:!1,Events:[Ra,to,nu,Qr,Xr,hd]},Ba={findFiberByHostInstance:si,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},y0={bundleType:Ba.bundleType,version:Ba.version,rendererPackageName:Ba.rendererPackageName,rendererConfig:Ba.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ee.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=jl(n),n===null?null:n.stateNode},findFiberByHostInstance:Ba.findFiberByHostInstance||p0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Uu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Uu.isDisabled&&Uu.supportsFiber)try{Qs=Uu.inject(y0),sn=Uu}catch{}}return tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=g0,tn.createPortal=function(n,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wd(i))throw Error(t(200));return f0(n,i,null,a)},tn.createRoot=function(n,i){if(!wd(n))throw Error(t(299));var a=!1,c="",d=Ag;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onRecoverableError!==void 0&&(d=i.onRecoverableError)),i=yd(n,1,!1,null,null,a,!1,c,d),n[Sr]=i.current,Sa(n.nodeType===8?n.parentNode:n),new vd(i)},tn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=jl(i),n=n===null?null:n.stateNode,n},tn.flushSync=function(n){return di(n)},tn.hydrate=function(n,i,a){if(!ju(i))throw Error(t(200));return Fu(null,n,i,!0,a)},tn.hydrateRoot=function(n,i,a){if(!wd(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,p="",w=Ag;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),i=Ig(i,null,n,1,a??null,d,!1,p,w),n[Sr]=i.current,Sa(n),c)for(n=0;n<c.length;n++)a=c[n],d=a._getVersion,d=d(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,d]:i.mutableSourceEagerHydrationData.push(a,d);return new bu(i)},tn.render=function(n,i,a){if(!ju(i))throw Error(t(200));return Fu(null,n,i,!1,a)},tn.unmountComponentAtNode=function(n){if(!ju(n))throw Error(t(40));return n._reactRootContainer?(di(function(){Fu(null,null,n,!1,function(){n._reactRootContainer=null,n[Sr]=null})}),!0):!1},tn.unstable_batchedUpdates=hd,tn.unstable_renderSubtreeIntoContainer=function(n,i,a,c){if(!ju(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Fu(n,i,a,!1,c)},tn.version="18.3.1-next-f1338f8080-20240426",tn}var Og;function S_(){if(Og)return Id.exports;Og=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Id.exports=C0(),Id.exports}var Mg;function R0(){if(Mg)return Bu;Mg=1;var r=S_();return Bu.createRoot=r.createRoot,Bu.hydrateRoot=r.hydrateRoot,Bu}var P0=R0();const k0=I_(P0);S_();function Za(){return Za=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},Za.apply(this,arguments)}var Is;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(Is||(Is={}));const Lg="popstate";function N0(r){r===void 0&&(r={});function e(o,l){let{pathname:h="/",search:f="",hash:g=""}=Ci(o.location.hash.substr(1));return!h.startsWith("/")&&!h.startsWith(".")&&(h="/"+h),Bd("",{pathname:h,search:f,hash:g},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(o,l){let h=o.document.querySelector("base"),f="";if(h&&h.getAttribute("href")){let g=o.location.href,y=g.indexOf("#");f=y===-1?g:g.slice(0,y)}return f+"#"+(typeof l=="string"?l:sc(l))}function s(o,l){Cc(o.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(l)+")")}return D0(e,t,s,r)}function pt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Cc(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function x0(){return Math.random().toString(36).substr(2,8)}function bg(r,e){return{usr:r.state,key:r.key,idx:e}}function Bd(r,e,t,s){return t===void 0&&(t=null),Za({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?Ci(e):e,{state:t,key:e&&e.key||s||x0()})}function sc(r){let{pathname:e="/",search:t="",hash:s=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function Ci(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let s=r.indexOf("?");s>=0&&(e.search=r.substr(s),r=r.substr(0,s)),r&&(e.pathname=r)}return e}function D0(r,e,t,s){s===void 0&&(s={});let{window:o=document.defaultView,v5Compat:l=!1}=s,h=o.history,f=Is.Pop,g=null,y=v();y==null&&(y=0,h.replaceState(Za({},h.state,{idx:y}),""));function v(){return(h.state||{idx:null}).idx}function E(){f=Is.Pop;let F=v(),K=F==null?null:F-y;y=F,g&&g({action:f,location:q.location,delta:K})}function I(F,K){f=Is.Push;let re=Bd(q.location,F,K);t&&t(re,F),y=v()+1;let b=bg(re,y),ee=q.createHref(re);try{h.pushState(b,"",ee)}catch(se){if(se instanceof DOMException&&se.name==="DataCloneError")throw se;o.location.assign(ee)}l&&g&&g({action:f,location:q.location,delta:1})}function M(F,K){f=Is.Replace;let re=Bd(q.location,F,K);t&&t(re,F),y=v();let b=bg(re,y),ee=q.createHref(re);h.replaceState(b,"",ee),l&&g&&g({action:f,location:q.location,delta:0})}function W(F){let K=o.location.origin!=="null"?o.location.origin:o.location.href,re=typeof F=="string"?F:sc(F);return re=re.replace(/ $/,"%20"),pt(K,"No window.location.(origin|href) available to create URL for href: "+re),new URL(re,K)}let q={get action(){return f},get location(){return r(o,h)},listen(F){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(Lg,E),g=F,()=>{o.removeEventListener(Lg,E),g=null}},createHref(F){return e(o,F)},createURL:W,encodeLocation(F){let K=W(F);return{pathname:K.pathname,search:K.search,hash:K.hash}},push:I,replace:M,go(F){return h.go(F)}};return q}var jg;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(jg||(jg={}));function V0(r,e,t){return t===void 0&&(t="/"),O0(r,e,t)}function O0(r,e,t,s){let o=typeof e=="string"?Ci(e):e,l=_f(o.pathname||"/",t);if(l==null)return null;let h=A_(r);M0(h);let f=null;for(let g=0;f==null&&g<h.length;++g){let y=G0(l);f=q0(h[g],y)}return f}function A_(r,e,t,s){e===void 0&&(e=[]),t===void 0&&(t=[]),s===void 0&&(s="");let o=(l,h,f)=>{let g={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};g.relativePath.startsWith("/")&&(pt(g.relativePath.startsWith(s),'Absolute route path "'+g.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),g.relativePath=g.relativePath.slice(s.length));let y=Cs([s,g.relativePath]),v=t.concat(g);l.children&&l.children.length>0&&(pt(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+y+'".')),A_(l.children,e,v,y)),!(l.path==null&&!l.index)&&e.push({path:y,score:z0(y,l.index),routesMeta:v})};return r.forEach((l,h)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))o(l,h);else for(let g of C_(l.path))o(l,h,g)}),e}function C_(r){let e=r.split("/");if(e.length===0)return[];let[t,...s]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(s.length===0)return o?[l,""]:[l];let h=C_(s.join("/")),f=[];return f.push(...h.map(g=>g===""?l:[l,g].join("/"))),o&&f.push(...h),f.map(g=>r.startsWith("/")&&g===""?"/":g)}function M0(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:$0(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}const L0=/^:[\w-]+$/,b0=3,j0=2,F0=1,U0=10,B0=-2,Fg=r=>r==="*";function z0(r,e){let t=r.split("/"),s=t.length;return t.some(Fg)&&(s+=B0),e&&(s+=j0),t.filter(o=>!Fg(o)).reduce((o,l)=>o+(L0.test(l)?b0:l===""?F0:U0),s)}function $0(r,e){return r.length===e.length&&r.slice(0,-1).every((s,o)=>s===e[o])?r[r.length-1]-e[e.length-1]:0}function q0(r,e,t){let{routesMeta:s}=r,o={},l="/",h=[];for(let f=0;f<s.length;++f){let g=s[f],y=f===s.length-1,v=l==="/"?e:e.slice(l.length)||"/",E=W0({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},v),I=g.route;if(!E)return null;Object.assign(o,E.params),h.push({params:o,pathname:Cs([l,E.pathname]),pathnameBase:J0(Cs([l,E.pathnameBase])),route:I}),E.pathnameBase!=="/"&&(l=Cs([l,E.pathnameBase]))}return h}function W0(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,s]=H0(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let l=o[0],h=l.replace(/(.)\/+$/,"$1"),f=o.slice(1);return{params:s.reduce((y,v,E)=>{let{paramName:I,isOptional:M}=v;if(I==="*"){let q=f[E]||"";h=l.slice(0,l.length-q.length).replace(/(.)\/+$/,"$1")}const W=f[E];return M&&!W?y[I]=void 0:y[I]=(W||"").replace(/%2F/g,"/"),y},{}),pathname:l,pathnameBase:h,pattern:r}}function H0(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Cc(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,f,g)=>(s.push({paramName:f,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(s.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function G0(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Cc(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function _f(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=r.charAt(t);return s&&s!=="/"?null:r.slice(t)||"/"}const K0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Q0=r=>K0.test(r);function X0(r,e){e===void 0&&(e="/");let{pathname:t,search:s="",hash:o=""}=typeof r=="string"?Ci(r):r,l;if(t)if(Q0(t))l=t;else{if(t.includes("//")){let h=t;t=t.replace(/\/\/+/g,"/"),Cc(!1,"Pathnames cannot have embedded double slashes - normalizing "+(h+" -> "+t))}t.startsWith("/")?l=Ug(t.substring(1),"/"):l=Ug(t,e)}else l=e;return{pathname:l,search:Z0(s),hash:eT(o)}}function Ug(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Cd(r,e,t,s){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Y0(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function vf(r,e){let t=Y0(r);return e?t.map((s,o)=>o===t.length-1?s.pathname:s.pathnameBase):t.map(s=>s.pathnameBase)}function wf(r,e,t,s){s===void 0&&(s=!1);let o;typeof r=="string"?o=Ci(r):(o=Za({},r),pt(!o.pathname||!o.pathname.includes("?"),Cd("?","pathname","search",o)),pt(!o.pathname||!o.pathname.includes("#"),Cd("#","pathname","hash",o)),pt(!o.search||!o.search.includes("#"),Cd("#","search","hash",o)));let l=r===""||o.pathname==="",h=l?"/":o.pathname,f;if(h==null)f=t;else{let E=e.length-1;if(!s&&h.startsWith("..")){let I=h.split("/");for(;I[0]==="..";)I.shift(),E-=1;o.pathname=I.join("/")}f=E>=0?e[E]:"/"}let g=X0(o,f),y=h&&h!=="/"&&h.endsWith("/"),v=(l||h===".")&&t.endsWith("/");return!g.pathname.endsWith("/")&&(y||v)&&(g.pathname+="/"),g}const Cs=r=>r.join("/").replace(/\/\/+/g,"/"),J0=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),Z0=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,eT=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function tT(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const R_=["post","put","patch","delete"];new Set(R_);const nT=["get",...R_];new Set(nT);function el(){return el=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},el.apply(this,arguments)}const Ef=he.createContext(null),rT=he.createContext(null),Fs=he.createContext(null),Rc=he.createContext(null),Br=he.createContext({outlet:null,matches:[],isDataRoute:!1}),P_=he.createContext(null);function sT(r,e){let{relative:t}=e===void 0?{}:e;bo()||pt(!1);let{basename:s,navigator:o}=he.useContext(Fs),{hash:l,pathname:h,search:f}=N_(r,{relative:t}),g=h;return s!=="/"&&(g=h==="/"?s:Cs([s,h])),o.createHref({pathname:g,search:f,hash:l})}function bo(){return he.useContext(Rc)!=null}function cl(){return bo()||pt(!1),he.useContext(Rc).location}function k_(r){he.useContext(Fs).static||he.useLayoutEffect(r)}function Pc(){let{isDataRoute:r}=he.useContext(Br);return r?_T():iT()}function iT(){bo()||pt(!1);let r=he.useContext(Ef),{basename:e,future:t,navigator:s}=he.useContext(Fs),{matches:o}=he.useContext(Br),{pathname:l}=cl(),h=JSON.stringify(vf(o,t.v7_relativeSplatPath)),f=he.useRef(!1);return k_(()=>{f.current=!0}),he.useCallback(function(y,v){if(v===void 0&&(v={}),!f.current)return;if(typeof y=="number"){s.go(y);return}let E=wf(y,JSON.parse(h),l,v.relative==="path");r==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:Cs([e,E.pathname])),(v.replace?s.replace:s.push)(E,v.state,v)},[e,s,h,l,r])}function oT(){let{matches:r}=he.useContext(Br),e=r[r.length-1];return e?e.params:{}}function N_(r,e){let{relative:t}=e===void 0?{}:e,{future:s}=he.useContext(Fs),{matches:o}=he.useContext(Br),{pathname:l}=cl(),h=JSON.stringify(vf(o,s.v7_relativeSplatPath));return he.useMemo(()=>wf(r,JSON.parse(h),l,t==="path"),[r,h,l,t])}function aT(r,e){return lT(r,e)}function lT(r,e,t,s){bo()||pt(!1);let{navigator:o}=he.useContext(Fs),{matches:l}=he.useContext(Br),h=l[l.length-1],f=h?h.params:{};h&&h.pathname;let g=h?h.pathnameBase:"/";h&&h.route;let y=cl(),v;if(e){var E;let F=typeof e=="string"?Ci(e):e;g==="/"||(E=F.pathname)!=null&&E.startsWith(g)||pt(!1),v=F}else v=y;let I=v.pathname||"/",M=I;if(g!=="/"){let F=g.replace(/^\//,"").split("/");M="/"+I.replace(/^\//,"").split("/").slice(F.length).join("/")}let W=V0(r,{pathname:M}),q=fT(W&&W.map(F=>Object.assign({},F,{params:Object.assign({},f,F.params),pathname:Cs([g,o.encodeLocation?o.encodeLocation(F.pathname).pathname:F.pathname]),pathnameBase:F.pathnameBase==="/"?g:Cs([g,o.encodeLocation?o.encodeLocation(F.pathnameBase).pathname:F.pathnameBase])})),l,t,s);return e&&q?he.createElement(Rc.Provider,{value:{location:el({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:Is.Pop}},q):q}function uT(){let r=yT(),e=tT(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return he.createElement(he.Fragment,null,he.createElement("h2",null,"Unexpected Application Error!"),he.createElement("h3",{style:{fontStyle:"italic"}},e),t?he.createElement("pre",{style:o},t):null,null)}const cT=he.createElement(uT,null);class hT extends he.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?he.createElement(Br.Provider,{value:this.props.routeContext},he.createElement(P_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function dT(r){let{routeContext:e,match:t,children:s}=r,o=he.useContext(Ef);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),he.createElement(Br.Provider,{value:e},s)}function fT(r,e,t,s){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),s===void 0&&(s=null),r==null){var l;if(!t)return null;if(t.errors)r=t.matches;else if((l=s)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let h=r,f=(o=t)==null?void 0:o.errors;if(f!=null){let v=h.findIndex(E=>E.route.id&&f?.[E.route.id]!==void 0);v>=0||pt(!1),h=h.slice(0,Math.min(h.length,v+1))}let g=!1,y=-1;if(t&&s&&s.v7_partialHydration)for(let v=0;v<h.length;v++){let E=h[v];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(y=v),E.route.id){let{loaderData:I,errors:M}=t,W=E.route.loader&&I[E.route.id]===void 0&&(!M||M[E.route.id]===void 0);if(E.route.lazy||W){g=!0,y>=0?h=h.slice(0,y+1):h=[h[0]];break}}}return h.reduceRight((v,E,I)=>{let M,W=!1,q=null,F=null;t&&(M=f&&E.route.id?f[E.route.id]:void 0,q=E.route.errorElement||cT,g&&(y<0&&I===0?(vT("route-fallback"),W=!0,F=null):y===I&&(W=!0,F=E.route.hydrateFallbackElement||null)));let K=e.concat(h.slice(0,I+1)),re=()=>{let b;return M?b=q:W?b=F:E.route.Component?b=he.createElement(E.route.Component,null):E.route.element?b=E.route.element:b=v,he.createElement(dT,{match:E,routeContext:{outlet:v,matches:K,isDataRoute:t!=null},children:b})};return t&&(E.route.ErrorBoundary||E.route.errorElement||I===0)?he.createElement(hT,{location:t.location,revalidation:t.revalidation,component:q,error:M,children:re(),routeContext:{outlet:null,matches:K,isDataRoute:!0}}):re()},null)}var x_=(function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r})(x_||{}),D_=(function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r})(D_||{});function pT(r){let e=he.useContext(Ef);return e||pt(!1),e}function mT(r){let e=he.useContext(rT);return e||pt(!1),e}function gT(r){let e=he.useContext(Br);return e||pt(!1),e}function V_(r){let e=gT(),t=e.matches[e.matches.length-1];return t.route.id||pt(!1),t.route.id}function yT(){var r;let e=he.useContext(P_),t=mT(),s=V_();return e!==void 0?e:(r=t.errors)==null?void 0:r[s]}function _T(){let{router:r}=pT(x_.UseNavigateStable),e=V_(D_.UseNavigateStable),t=he.useRef(!1);return k_(()=>{t.current=!0}),he.useCallback(function(o,l){l===void 0&&(l={}),t.current&&(typeof o=="number"?r.navigate(o):r.navigate(o,el({fromRouteId:e},l)))},[r,e])}const Bg={};function vT(r,e,t){Bg[r]||(Bg[r]=!0)}function wT(r,e){r?.v7_startTransition,r?.v7_relativeSplatPath}function zd(r){let{to:e,replace:t,state:s,relative:o}=r;bo()||pt(!1);let{future:l,static:h}=he.useContext(Fs),{matches:f}=he.useContext(Br),{pathname:g}=cl(),y=Pc(),v=wf(e,vf(f,l.v7_relativeSplatPath),g,o==="path"),E=JSON.stringify(v);return he.useEffect(()=>y(JSON.parse(E),{replace:t,state:s,relative:o}),[y,E,o,t,s]),null}function Dr(r){pt(!1)}function ET(r){let{basename:e="/",children:t=null,location:s,navigationType:o=Is.Pop,navigator:l,static:h=!1,future:f}=r;bo()&&pt(!1);let g=e.replace(/^\/*/,"/"),y=he.useMemo(()=>({basename:g,navigator:l,static:h,future:el({v7_relativeSplatPath:!1},f)}),[g,f,l,h]);typeof s=="string"&&(s=Ci(s));let{pathname:v="/",search:E="",hash:I="",state:M=null,key:W="default"}=s,q=he.useMemo(()=>{let F=_f(v,g);return F==null?null:{location:{pathname:F,search:E,hash:I,state:M,key:W},navigationType:o}},[g,v,E,I,M,W,o]);return q==null?null:he.createElement(Fs.Provider,{value:y},he.createElement(Rc.Provider,{children:t,value:q}))}function TT(r){let{children:e,location:t}=r;return aT($d(e),t)}new Promise(()=>{});function $d(r,e){e===void 0&&(e=[]);let t=[];return he.Children.forEach(r,(s,o)=>{if(!he.isValidElement(s))return;let l=[...e,o];if(s.type===he.Fragment){t.push.apply(t,$d(s.props.children,l));return}s.type!==Dr&&pt(!1),!s.props.index||!s.props.children||pt(!1);let h={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(h.children=$d(s.props.children,l)),t.push(h)}),t}function qd(){return qd=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},qd.apply(this,arguments)}function IT(r,e){if(r==null)return{};var t={},s=Object.keys(r),o,l;for(l=0;l<s.length;l++)o=s[l],!(e.indexOf(o)>=0)&&(t[o]=r[o]);return t}function ST(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function AT(r,e){return r.button===0&&(!e||e==="_self")&&!ST(r)}const CT=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],RT="6";try{window.__reactRouterVersion=RT}catch{}const PT="startTransition",zg=I0[PT];function kT(r){let{basename:e,children:t,future:s,window:o}=r,l=he.useRef();l.current==null&&(l.current=N0({window:o,v5Compat:!0}));let h=l.current,[f,g]=he.useState({action:h.action,location:h.location}),{v7_startTransition:y}=s||{},v=he.useCallback(E=>{y&&zg?zg(()=>g(E)):g(E)},[g,y]);return he.useLayoutEffect(()=>h.listen(v),[h,v]),he.useEffect(()=>wT(s),[s]),he.createElement(ET,{basename:e,children:t,location:f.location,navigationType:f.action,navigator:h,future:s})}const NT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",xT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yo=he.forwardRef(function(e,t){let{onClick:s,relative:o,reloadDocument:l,replace:h,state:f,target:g,to:y,preventScrollReset:v,viewTransition:E}=e,I=IT(e,CT),{basename:M}=he.useContext(Fs),W,q=!1;if(typeof y=="string"&&xT.test(y)&&(W=y,NT))try{let b=new URL(window.location.href),ee=y.startsWith("//")?new URL(b.protocol+y):new URL(y),se=_f(ee.pathname,M);ee.origin===b.origin&&se!=null?y=se+ee.search+ee.hash:q=!0}catch{}let F=sT(y,{relative:o}),K=DT(y,{replace:h,state:f,target:g,preventScrollReset:v,relative:o,viewTransition:E});function re(b){s&&s(b),b.defaultPrevented||K(b)}return he.createElement("a",qd({},I,{href:W||F,onClick:q||l?s:re,ref:t,target:g}))});var $g;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})($g||($g={}));var qg;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(qg||(qg={}));function DT(r,e){let{target:t,replace:s,state:o,preventScrollReset:l,relative:h,viewTransition:f}=e===void 0?{}:e,g=Pc(),y=cl(),v=N_(r,{relative:h});return he.useCallback(E=>{if(AT(E,t)){E.preventDefault();let I=s!==void 0?s:sc(y)===sc(v);g(r,{replace:I,state:o,preventScrollReset:l,relative:h,viewTransition:f})}},[y,g,v,s,o,t,r,l,h,f])}const VT=()=>{};var Wg={};const O_=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},OT=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const o=r[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],h=r[t++],f=r[t++],g=((o&7)<<18|(l&63)<<12|(h&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const l=r[t++],h=r[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},M_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const l=r[o],h=o+1<r.length,f=h?r[o+1]:0,g=o+2<r.length,y=g?r[o+2]:0,v=l>>2,E=(l&3)<<4|f>>4;let I=(f&15)<<2|y>>6,M=y&63;g||(M=64,h||(I=64)),s.push(t[v],t[E],t[I],t[M])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(O_(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):OT(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],f=o<r.length?t[r.charAt(o)]:0;++o;const y=o<r.length?t[r.charAt(o)]:64;++o;const E=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||f==null||y==null||E==null)throw new MT;const I=l<<2|f>>4;if(s.push(I),y!==64){const M=f<<4&240|y>>2;if(s.push(M),E!==64){const W=y<<6&192|E;s.push(W)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class MT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const LT=function(r){const e=O_(r);return M_.encodeByteArray(e,!0)},ic=function(r){return LT(r).replace(/\./g,"")},L_=function(r){try{return M_.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function bT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const jT=()=>bT().__FIREBASE_DEFAULTS__,FT=()=>{if(typeof process>"u"||typeof Wg>"u")return;const r=Wg.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},UT=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&L_(r[1]);return e&&JSON.parse(e)},kc=()=>{try{return VT()||jT()||FT()||UT()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},b_=r=>kc()?.emulatorHosts?.[r],BT=r=>{const e=b_(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},j_=()=>kc()?.config,F_=r=>kc()?.[`_${r}`];class zT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}function jo(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function U_(r){return(await fetch(r,{credentials:"include"})).ok}function $T(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...r};return[ic(JSON.stringify(t)),ic(JSON.stringify(h)),""].join(".")}const Ha={};function qT(){const r={prod:[],emulator:[]};for(const e of Object.keys(Ha))Ha[e]?r.emulator.push(e):r.prod.push(e);return r}function WT(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Hg=!1;function B_(r,e){if(typeof window>"u"||typeof document>"u"||!jo(window.location.host)||Ha[r]===e||Ha[r]||Hg)return;Ha[r]=e;function t(I){return`__firebase__banner__${I}`}const s="__firebase__banner",l=qT().prod.length>0;function h(){const I=document.getElementById(s);I&&I.remove()}function f(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function g(I,M){I.setAttribute("width","24"),I.setAttribute("id",M),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function y(){const I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{Hg=!0,h()},I}function v(I,M){I.setAttribute("id",M),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function E(){const I=WT(s),M=t("text"),W=document.getElementById(M)||document.createElement("span"),q=t("learnmore"),F=document.getElementById(q)||document.createElement("a"),K=t("preprendIcon"),re=document.getElementById(K)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){const b=I.element;f(b),v(F,q);const ee=y();g(re,K),b.append(re,W,F,ee),document.body.appendChild(b)}l?(W.innerText="Preview backend disconnected.",re.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(re.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,W.innerText="Preview backend running in this workspace."),W.setAttribute("id",M)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}function Ht(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function HT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ht())}function GT(){const r=kc()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function KT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function QT(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function XT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function YT(){const r=Ht();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function JT(){return!GT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ZT(){try{return typeof indexedDB=="object"}catch{return!1}}function eI(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}const tI="FirebaseError";class zr extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=tI,Object.setPrototypeOf(this,zr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hl.prototype.create)}}class hl{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?nI(l,s):"Error",f=`${this.serviceName}: ${h} (${o}).`;return new zr(o,f,s)}}function nI(r,e){return r.replace(rI,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const rI=/\{\$([^}]+)}/g;function sI(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function wi(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=r[o],h=e[o];if(Gg(l)&&Gg(h)){if(!wi(l,h))return!1}else if(l!==h)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function Gg(r){return r!==null&&typeof r=="object"}function dl(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function iI(r,e){const t=new oI(r,e);return t.subscribe.bind(t)}class oI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");aI(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=Rd),o.error===void 0&&(o.error=Rd),o.complete===void 0&&(o.complete=Rd);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function aI(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Rd(){}function St(r){return r&&r._delegate?r._delegate:r}class Ei{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const gi="[DEFAULT]";class lI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new zT;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(cI(e))try{this.getOrInitializeService({instanceIdentifier:gi})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=gi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=gi){return this.instances.has(e)}getOptions(e=gi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,h]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);s===f&&h.resolve(o)}return o}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:uI(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=gi){return this.component?this.component.multipleInstances?e:gi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function uI(r){return r===gi?void 0:r}function cI(r){return r.instantiationMode==="EAGER"}class hI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new lI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Oe;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Oe||(Oe={}));const dI={debug:Oe.DEBUG,verbose:Oe.VERBOSE,info:Oe.INFO,warn:Oe.WARN,error:Oe.ERROR,silent:Oe.SILENT},fI=Oe.INFO,pI={[Oe.DEBUG]:"log",[Oe.VERBOSE]:"log",[Oe.INFO]:"info",[Oe.WARN]:"warn",[Oe.ERROR]:"error"},mI=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=pI[e];if(o)console[o](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Tf{constructor(e){this.name=e,this._logLevel=fI,this._logHandler=mI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?dI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Oe.DEBUG,...e),this._logHandler(this,Oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Oe.VERBOSE,...e),this._logHandler(this,Oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Oe.INFO,...e),this._logHandler(this,Oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Oe.WARN,...e),this._logHandler(this,Oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Oe.ERROR,...e),this._logHandler(this,Oe.ERROR,...e)}}const gI=(r,e)=>e.some(t=>r instanceof t);let Kg,Qg;function yI(){return Kg||(Kg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _I(){return Qg||(Qg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const z_=new WeakMap,Wd=new WeakMap,$_=new WeakMap,Pd=new WeakMap,If=new WeakMap;function vI(r){const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",h)},l=()=>{t(Rs(r.result)),o()},h=()=>{s(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&z_.set(t,r)}).catch(()=>{}),If.set(e,r),e}function wI(r){if(Wd.has(r))return;const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",h),r.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",h),r.addEventListener("abort",h)});Wd.set(r,e)}let Hd={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Wd.get(r);if(e==="objectStoreNames")return r.objectStoreNames||$_.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Rs(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function EI(r){Hd=r(Hd)}function TI(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(kd(this),e,...t);return $_.set(s,e.sort?e.sort():[e]),Rs(s)}:_I().includes(r)?function(...e){return r.apply(kd(this),e),Rs(z_.get(this))}:function(...e){return Rs(r.apply(kd(this),e))}}function II(r){return typeof r=="function"?TI(r):(r instanceof IDBTransaction&&wI(r),gI(r,yI())?new Proxy(r,Hd):r)}function Rs(r){if(r instanceof IDBRequest)return vI(r);if(Pd.has(r))return Pd.get(r);const e=II(r);return e!==r&&(Pd.set(r,e),If.set(e,r)),e}const kd=r=>If.get(r);function SI(r,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const h=indexedDB.open(r,e),f=Rs(h);return s&&h.addEventListener("upgradeneeded",g=>{s(Rs(h.result),g.oldVersion,g.newVersion,Rs(h.transaction),g)}),t&&h.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),f.then(g=>{l&&g.addEventListener("close",()=>l()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),f}const AI=["get","getKey","getAll","getAllKeys","count"],CI=["put","add","delete","clear"],Nd=new Map;function Xg(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Nd.get(e))return Nd.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=CI.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||AI.includes(t)))return;const l=async function(h,...f){const g=this.transaction(h,o?"readwrite":"readonly");let y=g.store;return s&&(y=y.index(f.shift())),(await Promise.all([y[t](...f),o&&g.done]))[0]};return Nd.set(e,l),l}EI(r=>({...r,get:(e,t,s)=>Xg(e,t)||r.get(e,t,s),has:(e,t)=>!!Xg(e,t)||r.has(e,t)}));class RI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(PI(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function PI(r){return r.getComponent()?.type==="VERSION"}const Gd="@firebase/app",Yg="0.14.6";const Lr=new Tf("@firebase/app"),kI="@firebase/app-compat",NI="@firebase/analytics-compat",xI="@firebase/analytics",DI="@firebase/app-check-compat",VI="@firebase/app-check",OI="@firebase/auth",MI="@firebase/auth-compat",LI="@firebase/database",bI="@firebase/data-connect",jI="@firebase/database-compat",FI="@firebase/functions",UI="@firebase/functions-compat",BI="@firebase/installations",zI="@firebase/installations-compat",$I="@firebase/messaging",qI="@firebase/messaging-compat",WI="@firebase/performance",HI="@firebase/performance-compat",GI="@firebase/remote-config",KI="@firebase/remote-config-compat",QI="@firebase/storage",XI="@firebase/storage-compat",YI="@firebase/firestore",JI="@firebase/ai",ZI="@firebase/firestore-compat",eS="firebase",tS="12.6.0";const Kd="[DEFAULT]",nS={[Gd]:"fire-core",[kI]:"fire-core-compat",[xI]:"fire-analytics",[NI]:"fire-analytics-compat",[VI]:"fire-app-check",[DI]:"fire-app-check-compat",[OI]:"fire-auth",[MI]:"fire-auth-compat",[LI]:"fire-rtdb",[bI]:"fire-data-connect",[jI]:"fire-rtdb-compat",[FI]:"fire-fn",[UI]:"fire-fn-compat",[BI]:"fire-iid",[zI]:"fire-iid-compat",[$I]:"fire-fcm",[qI]:"fire-fcm-compat",[WI]:"fire-perf",[HI]:"fire-perf-compat",[GI]:"fire-rc",[KI]:"fire-rc-compat",[QI]:"fire-gcs",[XI]:"fire-gcs-compat",[YI]:"fire-fst",[ZI]:"fire-fst-compat",[JI]:"fire-vertex","fire-js":"fire-js",[eS]:"fire-js-all"};const oc=new Map,rS=new Map,Qd=new Map;function Jg(r,e){try{r.container.addComponent(e)}catch(t){Lr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Po(r){const e=r.name;if(Qd.has(e))return Lr.debug(`There were multiple attempts to register component ${e}.`),!1;Qd.set(e,r);for(const t of oc.values())Jg(t,r);for(const t of rS.values())Jg(t,r);return!0}function Sf(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function bn(r){return r==null?!1:r.settings!==void 0}const sS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ps=new hl("app","Firebase",sS);class iS{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ei("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ps.create("app-deleted",{appName:this._name})}}const Fo=tS;function q_(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s={name:Kd,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw Ps.create("bad-app-name",{appName:String(o)});if(t||(t=j_()),!t)throw Ps.create("no-options");const l=oc.get(o);if(l){if(wi(t,l.options)&&wi(s,l.config))return l;throw Ps.create("duplicate-app",{appName:o})}const h=new hI(o);for(const g of Qd.values())h.addComponent(g);const f=new iS(t,s,h);return oc.set(o,f),f}function W_(r=Kd){const e=oc.get(r);if(!e&&r===Kd&&j_())return q_();if(!e)throw Ps.create("no-app",{appName:r});return e}function ks(r,e,t){let s=nS[r]??r;t&&(s+=`-${t}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const h=[`Unable to register library "${s}" with version "${e}":`];o&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Lr.warn(h.join(" "));return}Po(new Ei(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const oS="firebase-heartbeat-database",aS=1,tl="firebase-heartbeat-store";let xd=null;function H_(){return xd||(xd=SI(oS,aS,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(tl)}catch(t){console.warn(t)}}}}).catch(r=>{throw Ps.create("idb-open",{originalErrorMessage:r.message})})),xd}async function lS(r){try{const t=(await H_()).transaction(tl),s=await t.objectStore(tl).get(G_(r));return await t.done,s}catch(e){if(e instanceof zr)Lr.warn(e.message);else{const t=Ps.create("idb-get",{originalErrorMessage:e?.message});Lr.warn(t.message)}}}async function Zg(r,e){try{const s=(await H_()).transaction(tl,"readwrite");await s.objectStore(tl).put(e,G_(r)),await s.done}catch(t){if(t instanceof zr)Lr.warn(t.message);else{const s=Ps.create("idb-set",{originalErrorMessage:t?.message});Lr.warn(s.message)}}}function G_(r){return`${r.name}!${r.options.appId}`}const uS=1024,cS=30;class hS{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new fS(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=ey();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:t}),this._heartbeatsCache.heartbeats.length>cS){const o=pS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Lr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=ey(),{heartbeatsToSend:t,unsentEntries:s}=dS(this._heartbeatsCache.heartbeats),o=ic(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Lr.warn(e),""}}}function ey(){return new Date().toISOString().substring(0,10)}function dS(r,e=uS){const t=[];let s=r.slice();for(const o of r){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),ty(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),ty(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class fS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ZT()?eI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await lS(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Zg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Zg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function ty(r){return ic(JSON.stringify({version:2,heartbeats:r})).length}function pS(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}function mS(r){Po(new Ei("platform-logger",e=>new RI(e),"PRIVATE")),Po(new Ei("heartbeat",e=>new hS(e),"PRIVATE")),ks(Gd,Yg,r),ks(Gd,Yg,"esm2020"),ks("fire-js","")}mS("");function K_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const gS=K_,Q_=new hl("auth","Firebase",K_());const ac=new Tf("@firebase/auth");function yS(r,...e){ac.logLevel<=Oe.WARN&&ac.warn(`Auth (${Fo}): ${r}`,...e)}function Ku(r,...e){ac.logLevel<=Oe.ERROR&&ac.error(`Auth (${Fo}): ${r}`,...e)}function dr(r,...e){throw Cf(r,...e)}function Fn(r,...e){return Cf(r,...e)}function Af(r,e,t){const s={...gS(),[e]:t};return new hl("auth","Firebase",s).create(e,{appName:r.name})}function vi(r){return Af(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _S(r,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&dr(r,"argument-error"),Af(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Cf(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return Q_.create(r,...e)}function Se(r,e,...t){if(!r)throw Cf(e,...t)}function Or(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Ku(e),new Error(e)}function br(r,e){r||Or(e)}function Xd(){return typeof self<"u"&&self.location?.href||""}function vS(){return ny()==="http:"||ny()==="https:"}function ny(){return typeof self<"u"&&self.location?.protocol||null}function wS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(vS()||QT()||"connection"in navigator)?navigator.onLine:!0}function ES(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class fl{constructor(e,t){this.shortDelay=e,this.longDelay=t,br(t>e,"Short delay should be less than long delay!"),this.isMobile=HT()||XT()}get(){return wS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Rf(r,e){br(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class X_{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Or("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Or("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Or("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const TS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const IS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],SS=new fl(3e4,6e4);function Pf(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Uo(r,e,t,s,o={}){return Y_(r,o,async()=>{let l={},h={};s&&(e==="GET"?h=s:l={body:JSON.stringify(s)});const f=dl({key:r.config.apiKey,...h}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const y={method:e,headers:g,...l};return KT()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&jo(r.emulatorConfig.host)&&(y.credentials="include"),X_.fetch()(await J_(r,r.config.apiHost,t,f),y)})}async function Y_(r,e,t){r._canInitEmulator=!1;const s={...TS,...e};try{const o=new CS(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw zu(r,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const f=l.ok?h.errorMessage:h.error.message,[g,y]=f.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw zu(r,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw zu(r,"email-already-in-use",h);if(g==="USER_DISABLED")throw zu(r,"user-disabled",h);const v=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Af(r,v,y);dr(r,v)}}catch(o){if(o instanceof zr)throw o;dr(r,"network-request-failed",{message:String(o)})}}async function AS(r,e,t,s,o={}){const l=await Uo(r,e,t,s,o);return"mfaPendingCredential"in l&&dr(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function J_(r,e,t,s){const o=`${e}${t}?${s}`,l=r,h=l.config.emulator?Rf(r.config,o):`${r.config.apiScheme}://${o}`;return IS.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}class CS{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Fn(this.auth,"network-request-failed")),SS.get())})}}function zu(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=Fn(r,e,s);return o.customData._tokenResponse=t,o}async function RS(r,e){return Uo(r,"POST","/v1/accounts:delete",e)}async function lc(r,e){return Uo(r,"POST","/v1/accounts:lookup",e)}function Ga(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function PS(r,e=!1){const t=St(r),s=await t.getIdToken(e),o=kf(s);Se(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l?.sign_in_provider;return{claims:o,token:s,authTime:Ga(Dd(o.auth_time)),issuedAtTime:Ga(Dd(o.iat)),expirationTime:Ga(Dd(o.exp)),signInProvider:h||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Dd(r){return Number(r)*1e3}function kf(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return Ku("JWT malformed, contained fewer than 3 sections"),null;try{const o=L_(t);return o?JSON.parse(o):(Ku("Failed to decode base64 JWT payload"),null)}catch(o){return Ku("Caught error parsing JWT payload as JSON",o?.toString()),null}}function ry(r){const e=kf(r);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function nl(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof zr&&kS(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function kS({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class NS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Yd{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ga(this.lastLoginAt),this.creationTime=Ga(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function uc(r){const e=r.auth,t=await r.getIdToken(),s=await nl(r,lc(e,{idToken:t}));Se(s?.users.length,e,"internal-error");const o=s.users[0];r._notifyReloadListener(o);const l=o.providerUserInfo?.length?Z_(o.providerUserInfo):[],h=DS(r.providerData,l),f=r.isAnonymous,g=!(r.email&&o.passwordHash)&&!h?.length,y=f?g:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Yd(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(r,v)}async function xS(r){const e=St(r);await uc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function DS(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function Z_(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function VS(r,e){const t=await Y_(r,{},async()=>{const s=dl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,h=await J_(r,o,"/v1/token",`key=${l}`),f=await r._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:f,body:s};return r.emulatorConfig&&jo(r.emulatorConfig.host)&&(g.credentials="include"),X_.fetch()(h,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function OS(r,e){return Uo(r,"POST","/v2/accounts:revokeToken",Pf(r,e))}class Io{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ry(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const t=ry(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:l}=await VS(e,t);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:l}=t,h=new Io;return s&&(Se(typeof s=="string","internal-error",{appName:e}),h.refreshToken=s),o&&(Se(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(Se(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Io,this.toJSON())}_performRefresh(){return Or("not implemented")}}function vs(r,e){Se(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class jn{constructor({uid:e,auth:t,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new NS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Yd(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await nl(this,this.stsTokenManager.getToken(this.auth,e));return Se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return PS(this,e)}reload(){return xS(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new jn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await uc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(bn(this.auth.app))return Promise.reject(vi(this.auth));const e=await this.getIdToken();return await nl(this,RS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,h=t.photoURL??void 0,f=t.tenantId??void 0,g=t._redirectEventId??void 0,y=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:E,emailVerified:I,isAnonymous:M,providerData:W,stsTokenManager:q}=t;Se(E&&q,e,"internal-error");const F=Io.fromJSON(this.name,q);Se(typeof E=="string",e,"internal-error"),vs(s,e.name),vs(o,e.name),Se(typeof I=="boolean",e,"internal-error"),Se(typeof M=="boolean",e,"internal-error"),vs(l,e.name),vs(h,e.name),vs(f,e.name),vs(g,e.name),vs(y,e.name),vs(v,e.name);const K=new jn({uid:E,auth:e,email:o,emailVerified:I,displayName:s,isAnonymous:M,photoURL:h,phoneNumber:l,tenantId:f,stsTokenManager:F,createdAt:y,lastLoginAt:v});return W&&Array.isArray(W)&&(K.providerData=W.map(re=>({...re}))),g&&(K._redirectEventId=g),K}static async _fromIdTokenResponse(e,t,s=!1){const o=new Io;o.updateFromServerResponse(t);const l=new jn({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await uc(l),l}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];Se(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?Z_(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!l?.length,f=new Io;f.updateFromIdToken(s);const g=new jn({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:h}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Yd(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!l?.length};return Object.assign(g,y),g}}const sy=new Map;function Mr(r){br(r instanceof Function,"Expected a class definition");let e=sy.get(r);return e?(br(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,sy.set(r,e),e)}class ev{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ev.type="NONE";const iy=ev;function Qu(r,e,t){return`firebase:${r}:${e}:${t}`}class So{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=Qu(this.userKey,o.apiKey,l),this.fullPersistenceKey=Qu("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await lc(this.auth,{idToken:e}).catch(()=>{});return t?jn._fromGetAccountInfoResponse(this.auth,t,e):null}return jn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new So(Mr(iy),e,s);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=o[0]||Mr(iy);const h=Qu(s,e.config.apiKey,e.name);let f=null;for(const y of t)try{const v=await y._get(h);if(v){let E;if(typeof v=="string"){const I=await lc(e,{idToken:v}).catch(()=>{});if(!I)break;E=await jn._fromGetAccountInfoResponse(e,I,v)}else E=jn._fromJSON(e,v);y!==l&&(f=E),l=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new So(l,e,s):(l=g[0],f&&await l._set(h,f.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(h)}catch{}})),new So(l,e,s))}}function oy(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(sv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(tv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ov(e))return"Blackberry";if(av(e))return"Webos";if(nv(e))return"Safari";if((e.includes("chrome/")||rv(e))&&!e.includes("edge/"))return"Chrome";if(iv(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if(s?.length===2)return s[1]}return"Other"}function tv(r=Ht()){return/firefox\//i.test(r)}function nv(r=Ht()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function rv(r=Ht()){return/crios\//i.test(r)}function sv(r=Ht()){return/iemobile/i.test(r)}function iv(r=Ht()){return/android/i.test(r)}function ov(r=Ht()){return/blackberry/i.test(r)}function av(r=Ht()){return/webos/i.test(r)}function Nf(r=Ht()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function MS(r=Ht()){return Nf(r)&&!!window.navigator?.standalone}function LS(){return YT()&&document.documentMode===10}function lv(r=Ht()){return Nf(r)||iv(r)||av(r)||ov(r)||/windows phone/i.test(r)||sv(r)}function uv(r,e=[]){let t;switch(r){case"Browser":t=oy(Ht());break;case"Worker":t=`${oy(Ht())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Fo}/${s}`}class bS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((h,f)=>{try{const g=e(l);h(g)}catch(g){f(g)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function jS(r,e={}){return Uo(r,"GET","/v2/passwordPolicy",Pf(r,e))}const FS=6;class US{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??FS,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class BS{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ay(this),this.idTokenSubscription=new ay(this),this.beforeStateQueue=new bS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Q_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Mr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await So.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await lc(this,{idToken:e}),s=await jn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(bn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(h,h))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,h=s?._redirectEventId,f=await this.tryRedirectSignIn(e);(!l||l===h)&&f?.user&&(s=f.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await uc(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ES()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(bn(this.app))return Promise.reject(vi(this));const t=e?St(e):null;return t&&Se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return bn(this.app)?Promise.reject(vi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return bn(this.app)?Promise.reject(vi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Mr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await jS(this),t=new US(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new hl("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await OS(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Mr(e)||this._popupRedirectResolver;Se(t,this,"argument-error"),this.redirectPersistenceManager=await So.create(this,[Mr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(f,this,"internal-error"),f.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,s,o);return()=>{h=!0,g()}}else{const g=e.addObserver(t);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=uv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(bn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&yS(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Nc(r){return St(r)}class ay{constructor(e){this.auth=e,this.observer=null,this.addObserver=iI(t=>this.observer=t)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let xf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function zS(r){xf=r}function $S(r){return xf.loadJS(r)}function qS(){return xf.gapiScript}function WS(r){return`__${r}${Math.floor(Math.random()*1e6)}`}function HS(r,e){const t=Sf(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(wi(l,e??{}))return o;dr(o,"already-initialized")}return t.initialize({options:e})}function GS(r,e){const t=e?.persistence||[],s=(Array.isArray(t)?t:[t]).map(Mr);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e?.popupRedirectResolver)}function KS(r,e,t){const s=Nc(r);Se(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=cv(e),{host:h,port:f}=QS(e),g=f===null?"":`:${f}`,y={url:`${l}//${h}${g}/`},v=Object.freeze({host:h,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Se(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Se(wi(y,s.config.emulator)&&wi(v,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=v,s.settings.appVerificationDisabledForTesting=!0,jo(h)?(U_(`${l}//${h}${g}`),B_("Auth",!0)):XS()}function cv(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function QS(r){const e=cv(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:ly(s.substr(l.length+1))}}else{const[l,h]=s.split(":");return{host:l,port:ly(h)}}}function ly(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function XS(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class hv{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Or("not implemented")}_getIdTokenResponse(e){return Or("not implemented")}_linkToIdToken(e,t){return Or("not implemented")}_getReauthenticationResolver(e){return Or("not implemented")}}async function Ao(r,e){return AS(r,"POST","/v1/accounts:signInWithIdp",Pf(r,e))}const YS="http://localhost";class Ti extends hv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ti(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):dr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...l}=t;if(!s||!o)return null;const h=new Ti(s,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return Ao(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Ao(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ao(e,t)}buildRequest(){const e={requestUri:YS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=dl(t)}return e}}class Df{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class pl extends Df{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ws extends pl{constructor(){super("facebook.com")}static credential(e){return Ti._fromParams({providerId:ws.PROVIDER_ID,signInMethod:ws.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ws.credentialFromTaggedObject(e)}static credentialFromError(e){return ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ws.credential(e.oauthAccessToken)}catch{return null}}}ws.FACEBOOK_SIGN_IN_METHOD="facebook.com";ws.PROVIDER_ID="facebook.com";class Vr extends pl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ti._fromParams({providerId:Vr.PROVIDER_ID,signInMethod:Vr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Vr.credentialFromTaggedObject(e)}static credentialFromError(e){return Vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Vr.credential(t,s)}catch{return null}}}Vr.GOOGLE_SIGN_IN_METHOD="google.com";Vr.PROVIDER_ID="google.com";class Es extends pl{constructor(){super("github.com")}static credential(e){return Ti._fromParams({providerId:Es.PROVIDER_ID,signInMethod:Es.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Es.credentialFromTaggedObject(e)}static credentialFromError(e){return Es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Es.credential(e.oauthAccessToken)}catch{return null}}}Es.GITHUB_SIGN_IN_METHOD="github.com";Es.PROVIDER_ID="github.com";class Ts extends pl{constructor(){super("twitter.com")}static credential(e,t){return Ti._fromParams({providerId:Ts.PROVIDER_ID,signInMethod:Ts.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ts.credentialFromTaggedObject(e)}static credentialFromError(e){return Ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Ts.credential(t,s)}catch{return null}}}Ts.TWITTER_SIGN_IN_METHOD="twitter.com";Ts.PROVIDER_ID="twitter.com";class ko{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const l=await jn._fromIdTokenResponse(e,s,o),h=uy(s);return new ko({user:l,providerId:h,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=uy(s);return new ko({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function uy(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}class cc extends zr{constructor(e,t,s,o){super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,cc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new cc(e,t,s,o)}}function dv(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?cc._fromErrorAndOperation(r,l,e,s):l})}async function JS(r,e,t=!1){const s=await nl(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return ko._forOperation(r,"link",s)}async function ZS(r,e,t=!1){const{auth:s}=r;if(bn(s.app))return Promise.reject(vi(s));const o="reauthenticate";try{const l=await nl(r,dv(s,o,e,r),t);Se(l.idToken,s,"internal-error");const h=kf(l.idToken);Se(h,s,"internal-error");const{sub:f}=h;return Se(r.uid===f,s,"user-mismatch"),ko._forOperation(r,o,l)}catch(l){throw l?.code==="auth/user-not-found"&&dr(s,"user-mismatch"),l}}async function e1(r,e,t=!1){if(bn(r.app))return Promise.reject(vi(r));const s="signIn",o=await dv(r,s,e),l=await ko._fromIdTokenResponse(r,s,o);return t||await r._updateCurrentUser(l.user),l}function t1(r,e,t,s){return St(r).onIdTokenChanged(e,t,s)}function n1(r,e,t){return St(r).beforeAuthStateChanged(e,t)}function r1(r,e,t,s){return St(r).onAuthStateChanged(e,t,s)}function s1(r){return St(r).signOut()}const hc="__sak";class fv{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(hc,"1"),this.storage.removeItem(hc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const i1=1e3,o1=10;class pv extends fv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=lv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,f,g)=>{this.notifyListeners(h,g)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(s);!t&&this.localCache[s]===h||this.notifyListeners(s,h)},l=this.storage.getItem(s);LS()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,o1):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},i1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}pv.type="LOCAL";const a1=pv;class mv extends fv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}mv.type="SESSION";const gv=mv;function l1(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class xc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new xc(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!h?.size)return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const f=Array.from(h).map(async y=>y(t.origin,l)),g=await l1(f);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}xc.receivers=[];function Vf(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}class u1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((f,g)=>{const y=Vf("",20);o.port1.start();const v=setTimeout(()=>{g(new Error("unsupported_event"))},s);h={messageChannel:o,onMessage(E){const I=E;if(I.data.eventId===y)switch(I.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(I.data.response);break;default:clearTimeout(v),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}function or(){return window}function c1(r){or().location.href=r}function yv(){return typeof or().WorkerGlobalScope<"u"&&typeof or().importScripts=="function"}async function h1(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function d1(){return navigator?.serviceWorker?.controller||null}function f1(){return yv()?self:null}const _v="firebaseLocalStorageDb",p1=1,dc="firebaseLocalStorage",vv="fbase_key";class ml{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Dc(r,e){return r.transaction([dc],e?"readwrite":"readonly").objectStore(dc)}function m1(){const r=indexedDB.deleteDatabase(_v);return new ml(r).toPromise()}function Jd(){const r=indexedDB.open(_v,p1);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(dc,{keyPath:vv})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(dc)?e(s):(s.close(),await m1(),e(await Jd()))})})}async function cy(r,e,t){const s=Dc(r,!0).put({[vv]:e,value:t});return new ml(s).toPromise()}async function g1(r,e){const t=Dc(r,!1).get(e),s=await new ml(t).toPromise();return s===void 0?null:s.value}function hy(r,e){const t=Dc(r,!0).delete(e);return new ml(t).toPromise()}const y1=800,_1=3;class wv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Jd(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>_1)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return yv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xc._getInstance(f1()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await h1(),!this.activeServiceWorker)return;this.sender=new u1(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||d1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Jd();return await cy(e,hc,"1"),await hy(e,hc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>cy(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>g1(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>hy(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Dc(o,!1).getAll();return new ml(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),y1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}wv.type="LOCAL";const v1=wv;new fl(3e4,6e4);function Ev(r,e){return e?Mr(e):(Se(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class Of extends hv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ao(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ao(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ao(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function w1(r){return e1(r.auth,new Of(r),r.bypassAuthState)}function E1(r){const{auth:e,user:t}=r;return Se(t,e,"internal-error"),ZS(t,new Of(r),r.bypassAuthState)}async function T1(r){const{auth:e,user:t}=r;return Se(t,e,"internal-error"),JS(t,new Of(r),r.bypassAuthState)}class Tv{constructor(e,t,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:l,error:h,type:f}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return w1;case"linkViaPopup":case"linkViaRedirect":return T1;case"reauthViaPopup":case"reauthViaRedirect":return E1;default:dr(this.auth,"internal-error")}}resolve(e){br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const I1=new fl(2e3,1e4);async function S1(r,e,t){if(bn(r.app))return Promise.reject(Fn(r,"operation-not-supported-in-this-environment"));const s=Nc(r);_S(r,e,Df);const o=Ev(s,t);return new yi(s,"signInViaPopup",e,o).executeNotNull()}class yi extends Tv{constructor(e,t,s,o,l){super(e,t,o,l),this.provider=s,this.authWindow=null,this.pollId=null,yi.currentPopupAction&&yi.currentPopupAction.cancel(),yi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){br(this.filter.length===1,"Popup operations only handle one event");const e=Vf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Fn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Fn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,yi.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,I1.get())};e()}}yi.currentPopupAction=null;const A1="pendingRedirect",Xu=new Map;class C1 extends Tv{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Xu.get(this.auth._key());if(!e){try{const s=await R1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Xu.set(this.auth._key(),e)}return this.bypassAuthState||Xu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function R1(r,e){const t=N1(e),s=k1(r);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function P1(r,e){Xu.set(r._key(),e)}function k1(r){return Mr(r._redirectPersistence)}function N1(r){return Qu(A1,r.config.apiKey,r.name)}async function x1(r,e,t=!1){if(bn(r.app))return Promise.reject(vi(r));const s=Nc(r),o=Ev(s,e),h=await new C1(s,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await s._persistUserIfCurrent(h.user),await s._setRedirectUser(null,e)),h}const D1=600*1e3;class V1{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!O1(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Iv(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Fn(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=D1&&this.cachedEventUids.clear(),this.cachedEventUids.has(dy(e))}saveEventToCache(e){this.cachedEventUids.add(dy(e)),this.lastProcessedEventTime=Date.now()}}function dy(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Iv({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function O1(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Iv(r);default:return!1}}async function M1(r,e={}){return Uo(r,"GET","/v1/projects",e)}const L1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,b1=/^https?/;async function j1(r){if(r.config.emulator)return;const{authorizedDomains:e}=await M1(r);for(const t of e)try{if(F1(t))return}catch{}dr(r,"unauthorized-domain")}function F1(r){const e=Xd(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===s}if(!b1.test(t))return!1;if(L1.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const U1=new fl(3e4,6e4);function fy(){const r=or().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function B1(r){return new Promise((e,t)=>{function s(){fy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fy(),t(Fn(r,"network-request-failed"))},timeout:U1.get()})}if(or().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(or().gapi?.load)s();else{const o=WS("iframefcb");return or()[o]=()=>{gapi.load?s():t(Fn(r,"network-request-failed"))},$S(`${qS()}?onload=${o}`).catch(l=>t(l))}}).catch(e=>{throw Yu=null,e})}let Yu=null;function z1(r){return Yu=Yu||B1(r),Yu}const $1=new fl(5e3,15e3),q1="__/auth/iframe",W1="emulator/auth/iframe",H1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},G1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function K1(r){const e=r.config;Se(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Rf(e,W1):`https://${r.config.authDomain}/${q1}`,s={apiKey:e.apiKey,appName:r.name,v:Fo},o=G1.get(r.config.apiHost);o&&(s.eid=o);const l=r._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${dl(s).slice(1)}`}async function Q1(r){const e=await z1(r),t=or().gapi;return Se(t,r,"internal-error"),e.open({where:document.body,url:K1(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:H1,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const h=Fn(r,"network-request-failed"),f=or().setTimeout(()=>{l(h)},$1.get());function g(){or().clearTimeout(f),o(s)}s.ping(g).then(g,()=>{l(h)})}))}const X1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Y1=500,J1=600,Z1="_blank",eA="http://localhost";class py{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function tA(r,e,t,s=Y1,o=J1){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const g={...X1,width:s.toString(),height:o.toString(),top:l,left:h},y=Ht().toLowerCase();t&&(f=rv(y)?Z1:t),tv(y)&&(e=e||eA,g.scrollbars="yes");const v=Object.entries(g).reduce((I,[M,W])=>`${I}${M}=${W},`,"");if(MS(y)&&f!=="_self")return nA(e||"",f),new py(null);const E=window.open(e||"",f,v);Se(E,r,"popup-blocked");try{E.focus()}catch{}return new py(E)}function nA(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}const rA="__/auth/handler",sA="emulator/auth/handler",iA=encodeURIComponent("fac");async function my(r,e,t,s,o,l){Se(r.config.authDomain,r,"auth-domain-config-required"),Se(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:Fo,eventId:o};if(e instanceof Df){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",sI(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))h[v]=E}if(e instanceof pl){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(h.scopes=v.join(","))}r.tenantId&&(h.tid=r.tenantId);const f=h;for(const v of Object.keys(f))f[v]===void 0&&delete f[v];const g=await r._getAppCheckToken(),y=g?`#${iA}=${encodeURIComponent(g)}`:"";return`${oA(r)}?${dl(f).slice(1)}${y}`}function oA({config:r}){return r.emulator?Rf(r,sA):`https://${r.authDomain}/${rA}`}const Vd="webStorageSupport";class aA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gv,this._completeRedirectFn=x1,this._overrideRedirectResult=P1}async _openPopup(e,t,s,o){br(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await my(e,t,s,Xd(),o);return tA(e,l,Vf())}async _openRedirect(e,t,s,o){await this._originValidation(e);const l=await my(e,t,s,Xd(),o);return c1(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(br(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await Q1(e),s=new V1(e);return t.register("authEvent",o=>(Se(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Vd,{type:Vd},o=>{const l=o?.[0]?.[Vd];l!==void 0&&t(!!l),dr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=j1(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return lv()||nv()||Nf()}}const lA=aA;var gy="@firebase/auth",yy="1.12.0";class uA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function cA(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function hA(r){Po(new Ei("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:f}=s.options;Se(h&&!h.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:h,authDomain:f,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:uv(r)},y=new BS(s,o,l,g);return GS(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Po(new Ei("auth-internal",e=>{const t=Nc(e.getProvider("auth").getImmediate());return(s=>new uA(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ks(gy,yy,cA(r)),ks(gy,yy,"esm2020")}const dA=300,fA=F_("authIdTokenMaxAge")||dA;let _y=null;const pA=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>fA)return;const o=t?.token;_y!==o&&(_y=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function mA(r=W_()){const e=Sf(r,"auth");if(e.isInitialized())return e.getImmediate();const t=HS(r,{popupRedirectResolver:lA,persistence:[v1,a1,gv]}),s=F_("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const h=pA(l.toString());n1(t,h,()=>h(t.currentUser)),t1(t,f=>h(f))}}const o=b_("auth");return o&&KS(t,`http://${o}`),t}function gA(){return document.getElementsByTagName("head")?.[0]??document}zS({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const l=Fn("internal-error");l.customData=o,t(l)},s.type="text/javascript",s.charset="UTF-8",gA().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});hA("Browser");var vy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ns,Sv;(function(){var r;function e(P,S){function k(){}k.prototype=S.prototype,P.F=S.prototype,P.prototype=new k,P.prototype.constructor=P,P.D=function(N,x,O){for(var R=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)R[fe-2]=arguments[fe];return S.prototype[x].apply(N,R)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(P,S,k){k||(k=0);const N=Array(16);if(typeof S=="string")for(var x=0;x<16;++x)N[x]=S.charCodeAt(k++)|S.charCodeAt(k++)<<8|S.charCodeAt(k++)<<16|S.charCodeAt(k++)<<24;else for(x=0;x<16;++x)N[x]=S[k++]|S[k++]<<8|S[k++]<<16|S[k++]<<24;S=P.g[0],k=P.g[1],x=P.g[2];let O=P.g[3],R;R=S+(O^k&(x^O))+N[0]+3614090360&4294967295,S=k+(R<<7&4294967295|R>>>25),R=O+(x^S&(k^x))+N[1]+3905402710&4294967295,O=S+(R<<12&4294967295|R>>>20),R=x+(k^O&(S^k))+N[2]+606105819&4294967295,x=O+(R<<17&4294967295|R>>>15),R=k+(S^x&(O^S))+N[3]+3250441966&4294967295,k=x+(R<<22&4294967295|R>>>10),R=S+(O^k&(x^O))+N[4]+4118548399&4294967295,S=k+(R<<7&4294967295|R>>>25),R=O+(x^S&(k^x))+N[5]+1200080426&4294967295,O=S+(R<<12&4294967295|R>>>20),R=x+(k^O&(S^k))+N[6]+2821735955&4294967295,x=O+(R<<17&4294967295|R>>>15),R=k+(S^x&(O^S))+N[7]+4249261313&4294967295,k=x+(R<<22&4294967295|R>>>10),R=S+(O^k&(x^O))+N[8]+1770035416&4294967295,S=k+(R<<7&4294967295|R>>>25),R=O+(x^S&(k^x))+N[9]+2336552879&4294967295,O=S+(R<<12&4294967295|R>>>20),R=x+(k^O&(S^k))+N[10]+4294925233&4294967295,x=O+(R<<17&4294967295|R>>>15),R=k+(S^x&(O^S))+N[11]+2304563134&4294967295,k=x+(R<<22&4294967295|R>>>10),R=S+(O^k&(x^O))+N[12]+1804603682&4294967295,S=k+(R<<7&4294967295|R>>>25),R=O+(x^S&(k^x))+N[13]+4254626195&4294967295,O=S+(R<<12&4294967295|R>>>20),R=x+(k^O&(S^k))+N[14]+2792965006&4294967295,x=O+(R<<17&4294967295|R>>>15),R=k+(S^x&(O^S))+N[15]+1236535329&4294967295,k=x+(R<<22&4294967295|R>>>10),R=S+(x^O&(k^x))+N[1]+4129170786&4294967295,S=k+(R<<5&4294967295|R>>>27),R=O+(k^x&(S^k))+N[6]+3225465664&4294967295,O=S+(R<<9&4294967295|R>>>23),R=x+(S^k&(O^S))+N[11]+643717713&4294967295,x=O+(R<<14&4294967295|R>>>18),R=k+(O^S&(x^O))+N[0]+3921069994&4294967295,k=x+(R<<20&4294967295|R>>>12),R=S+(x^O&(k^x))+N[5]+3593408605&4294967295,S=k+(R<<5&4294967295|R>>>27),R=O+(k^x&(S^k))+N[10]+38016083&4294967295,O=S+(R<<9&4294967295|R>>>23),R=x+(S^k&(O^S))+N[15]+3634488961&4294967295,x=O+(R<<14&4294967295|R>>>18),R=k+(O^S&(x^O))+N[4]+3889429448&4294967295,k=x+(R<<20&4294967295|R>>>12),R=S+(x^O&(k^x))+N[9]+568446438&4294967295,S=k+(R<<5&4294967295|R>>>27),R=O+(k^x&(S^k))+N[14]+3275163606&4294967295,O=S+(R<<9&4294967295|R>>>23),R=x+(S^k&(O^S))+N[3]+4107603335&4294967295,x=O+(R<<14&4294967295|R>>>18),R=k+(O^S&(x^O))+N[8]+1163531501&4294967295,k=x+(R<<20&4294967295|R>>>12),R=S+(x^O&(k^x))+N[13]+2850285829&4294967295,S=k+(R<<5&4294967295|R>>>27),R=O+(k^x&(S^k))+N[2]+4243563512&4294967295,O=S+(R<<9&4294967295|R>>>23),R=x+(S^k&(O^S))+N[7]+1735328473&4294967295,x=O+(R<<14&4294967295|R>>>18),R=k+(O^S&(x^O))+N[12]+2368359562&4294967295,k=x+(R<<20&4294967295|R>>>12),R=S+(k^x^O)+N[5]+4294588738&4294967295,S=k+(R<<4&4294967295|R>>>28),R=O+(S^k^x)+N[8]+2272392833&4294967295,O=S+(R<<11&4294967295|R>>>21),R=x+(O^S^k)+N[11]+1839030562&4294967295,x=O+(R<<16&4294967295|R>>>16),R=k+(x^O^S)+N[14]+4259657740&4294967295,k=x+(R<<23&4294967295|R>>>9),R=S+(k^x^O)+N[1]+2763975236&4294967295,S=k+(R<<4&4294967295|R>>>28),R=O+(S^k^x)+N[4]+1272893353&4294967295,O=S+(R<<11&4294967295|R>>>21),R=x+(O^S^k)+N[7]+4139469664&4294967295,x=O+(R<<16&4294967295|R>>>16),R=k+(x^O^S)+N[10]+3200236656&4294967295,k=x+(R<<23&4294967295|R>>>9),R=S+(k^x^O)+N[13]+681279174&4294967295,S=k+(R<<4&4294967295|R>>>28),R=O+(S^k^x)+N[0]+3936430074&4294967295,O=S+(R<<11&4294967295|R>>>21),R=x+(O^S^k)+N[3]+3572445317&4294967295,x=O+(R<<16&4294967295|R>>>16),R=k+(x^O^S)+N[6]+76029189&4294967295,k=x+(R<<23&4294967295|R>>>9),R=S+(k^x^O)+N[9]+3654602809&4294967295,S=k+(R<<4&4294967295|R>>>28),R=O+(S^k^x)+N[12]+3873151461&4294967295,O=S+(R<<11&4294967295|R>>>21),R=x+(O^S^k)+N[15]+530742520&4294967295,x=O+(R<<16&4294967295|R>>>16),R=k+(x^O^S)+N[2]+3299628645&4294967295,k=x+(R<<23&4294967295|R>>>9),R=S+(x^(k|~O))+N[0]+4096336452&4294967295,S=k+(R<<6&4294967295|R>>>26),R=O+(k^(S|~x))+N[7]+1126891415&4294967295,O=S+(R<<10&4294967295|R>>>22),R=x+(S^(O|~k))+N[14]+2878612391&4294967295,x=O+(R<<15&4294967295|R>>>17),R=k+(O^(x|~S))+N[5]+4237533241&4294967295,k=x+(R<<21&4294967295|R>>>11),R=S+(x^(k|~O))+N[12]+1700485571&4294967295,S=k+(R<<6&4294967295|R>>>26),R=O+(k^(S|~x))+N[3]+2399980690&4294967295,O=S+(R<<10&4294967295|R>>>22),R=x+(S^(O|~k))+N[10]+4293915773&4294967295,x=O+(R<<15&4294967295|R>>>17),R=k+(O^(x|~S))+N[1]+2240044497&4294967295,k=x+(R<<21&4294967295|R>>>11),R=S+(x^(k|~O))+N[8]+1873313359&4294967295,S=k+(R<<6&4294967295|R>>>26),R=O+(k^(S|~x))+N[15]+4264355552&4294967295,O=S+(R<<10&4294967295|R>>>22),R=x+(S^(O|~k))+N[6]+2734768916&4294967295,x=O+(R<<15&4294967295|R>>>17),R=k+(O^(x|~S))+N[13]+1309151649&4294967295,k=x+(R<<21&4294967295|R>>>11),R=S+(x^(k|~O))+N[4]+4149444226&4294967295,S=k+(R<<6&4294967295|R>>>26),R=O+(k^(S|~x))+N[11]+3174756917&4294967295,O=S+(R<<10&4294967295|R>>>22),R=x+(S^(O|~k))+N[2]+718787259&4294967295,x=O+(R<<15&4294967295|R>>>17),R=k+(O^(x|~S))+N[9]+3951481745&4294967295,P.g[0]=P.g[0]+S&4294967295,P.g[1]=P.g[1]+(x+(R<<21&4294967295|R>>>11))&4294967295,P.g[2]=P.g[2]+x&4294967295,P.g[3]=P.g[3]+O&4294967295}s.prototype.v=function(P,S){S===void 0&&(S=P.length);const k=S-this.blockSize,N=this.C;let x=this.h,O=0;for(;O<S;){if(x==0)for(;O<=k;)o(this,P,O),O+=this.blockSize;if(typeof P=="string"){for(;O<S;)if(N[x++]=P.charCodeAt(O++),x==this.blockSize){o(this,N),x=0;break}}else for(;O<S;)if(N[x++]=P[O++],x==this.blockSize){o(this,N),x=0;break}}this.h=x,this.o+=S},s.prototype.A=function(){var P=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);P[0]=128;for(var S=1;S<P.length-8;++S)P[S]=0;S=this.o*8;for(var k=P.length-8;k<P.length;++k)P[k]=S&255,S/=256;for(this.v(P),P=Array(16),S=0,k=0;k<4;++k)for(let N=0;N<32;N+=8)P[S++]=this.g[k]>>>N&255;return P};function l(P,S){var k=f;return Object.prototype.hasOwnProperty.call(k,P)?k[P]:k[P]=S(P)}function h(P,S){this.h=S;const k=[];let N=!0;for(let x=P.length-1;x>=0;x--){const O=P[x]|0;N&&O==S||(k[x]=O,N=!1)}this.g=k}var f={};function g(P){return-128<=P&&P<128?l(P,function(S){return new h([S|0],S<0?-1:0)}):new h([P|0],P<0?-1:0)}function y(P){if(isNaN(P)||!isFinite(P))return E;if(P<0)return F(y(-P));const S=[];let k=1;for(let N=0;P>=k;N++)S[N]=P/k|0,k*=4294967296;return new h(S,0)}function v(P,S){if(P.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(P.charAt(0)=="-")return F(v(P.substring(1),S));if(P.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=y(Math.pow(S,8));let N=E;for(let O=0;O<P.length;O+=8){var x=Math.min(8,P.length-O);const R=parseInt(P.substring(O,O+x),S);x<8?(x=y(Math.pow(S,x)),N=N.j(x).add(y(R))):(N=N.j(k),N=N.add(y(R)))}return N}var E=g(0),I=g(1),M=g(16777216);r=h.prototype,r.m=function(){if(q(this))return-F(this).m();let P=0,S=1;for(let k=0;k<this.g.length;k++){const N=this.i(k);P+=(N>=0?N:4294967296+N)*S,S*=4294967296}return P},r.toString=function(P){if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(W(this))return"0";if(q(this))return"-"+F(this).toString(P);const S=y(Math.pow(P,6));var k=this;let N="";for(;;){const x=ee(k,S).g;k=K(k,x.j(S));let O=((k.g.length>0?k.g[0]:k.h)>>>0).toString(P);if(k=x,W(k))return O+N;for(;O.length<6;)O="0"+O;N=O+N}},r.i=function(P){return P<0?0:P<this.g.length?this.g[P]:this.h};function W(P){if(P.h!=0)return!1;for(let S=0;S<P.g.length;S++)if(P.g[S]!=0)return!1;return!0}function q(P){return P.h==-1}r.l=function(P){return P=K(this,P),q(P)?-1:W(P)?0:1};function F(P){const S=P.g.length,k=[];for(let N=0;N<S;N++)k[N]=~P.g[N];return new h(k,~P.h).add(I)}r.abs=function(){return q(this)?F(this):this},r.add=function(P){const S=Math.max(this.g.length,P.g.length),k=[];let N=0;for(let x=0;x<=S;x++){let O=N+(this.i(x)&65535)+(P.i(x)&65535),R=(O>>>16)+(this.i(x)>>>16)+(P.i(x)>>>16);N=R>>>16,O&=65535,R&=65535,k[x]=R<<16|O}return new h(k,k[k.length-1]&-2147483648?-1:0)};function K(P,S){return P.add(F(S))}r.j=function(P){if(W(this)||W(P))return E;if(q(this))return q(P)?F(this).j(F(P)):F(F(this).j(P));if(q(P))return F(this.j(F(P)));if(this.l(M)<0&&P.l(M)<0)return y(this.m()*P.m());const S=this.g.length+P.g.length,k=[];for(var N=0;N<2*S;N++)k[N]=0;for(N=0;N<this.g.length;N++)for(let x=0;x<P.g.length;x++){const O=this.i(N)>>>16,R=this.i(N)&65535,fe=P.i(x)>>>16,De=P.i(x)&65535;k[2*N+2*x]+=R*De,re(k,2*N+2*x),k[2*N+2*x+1]+=O*De,re(k,2*N+2*x+1),k[2*N+2*x+1]+=R*fe,re(k,2*N+2*x+1),k[2*N+2*x+2]+=O*fe,re(k,2*N+2*x+2)}for(P=0;P<S;P++)k[P]=k[2*P+1]<<16|k[2*P];for(P=S;P<2*S;P++)k[P]=0;return new h(k,0)};function re(P,S){for(;(P[S]&65535)!=P[S];)P[S+1]+=P[S]>>>16,P[S]&=65535,S++}function b(P,S){this.g=P,this.h=S}function ee(P,S){if(W(S))throw Error("division by zero");if(W(P))return new b(E,E);if(q(P))return S=ee(F(P),S),new b(F(S.g),F(S.h));if(q(S))return S=ee(P,F(S)),new b(F(S.g),S.h);if(P.g.length>30){if(q(P)||q(S))throw Error("slowDivide_ only works with positive integers.");for(var k=I,N=S;N.l(P)<=0;)k=se(k),N=se(N);var x=J(k,1),O=J(N,1);for(N=J(N,2),k=J(k,2);!W(N);){var R=O.add(N);R.l(P)<=0&&(x=x.add(k),O=R),N=J(N,1),k=J(k,1)}return S=K(P,x.j(S)),new b(x,S)}for(x=E;P.l(S)>=0;){for(k=Math.max(1,Math.floor(P.m()/S.m())),N=Math.ceil(Math.log(k)/Math.LN2),N=N<=48?1:Math.pow(2,N-48),O=y(k),R=O.j(S);q(R)||R.l(P)>0;)k-=N,O=y(k),R=O.j(S);W(O)&&(O=I),x=x.add(O),P=K(P,R)}return new b(x,P)}r.B=function(P){return ee(this,P).h},r.and=function(P){const S=Math.max(this.g.length,P.g.length),k=[];for(let N=0;N<S;N++)k[N]=this.i(N)&P.i(N);return new h(k,this.h&P.h)},r.or=function(P){const S=Math.max(this.g.length,P.g.length),k=[];for(let N=0;N<S;N++)k[N]=this.i(N)|P.i(N);return new h(k,this.h|P.h)},r.xor=function(P){const S=Math.max(this.g.length,P.g.length),k=[];for(let N=0;N<S;N++)k[N]=this.i(N)^P.i(N);return new h(k,this.h^P.h)};function se(P){const S=P.g.length+1,k=[];for(let N=0;N<S;N++)k[N]=P.i(N)<<1|P.i(N-1)>>>31;return new h(k,P.h)}function J(P,S){const k=S>>5;S%=32;const N=P.g.length-k,x=[];for(let O=0;O<N;O++)x[O]=S>0?P.i(O+k)>>>S|P.i(O+k+1)<<32-S:P.i(O+k);return new h(x,P.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Sv=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=v,Ns=h}).apply(typeof vy<"u"?vy:typeof self<"u"?self:typeof window<"u"?window:{});var $u=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Av,$a,Cv,Ju,Zd,Rv,Pv,kv;(function(){var r,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof $u=="object"&&$u];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=t(this);function o(u,m){if(m)e:{var _=s;u=u.split(".");for(var T=0;T<u.length-1;T++){var U=u[T];if(!(U in _))break e;_=_[U]}u=u[u.length-1],T=_[u],m=m(T),m!=T&&m!=null&&e(_,u,{configurable:!0,writable:!0,value:m})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(m){var _=[],T;for(T in m)Object.prototype.hasOwnProperty.call(m,T)&&_.push([T,m[T]]);return _}});var l=l||{},h=this||self;function f(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function g(u,m,_){return u.call.apply(u.bind,arguments)}function y(u,m,_){return y=g,y.apply(null,arguments)}function v(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var T=_.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function E(u,m){function _(){}_.prototype=m.prototype,u.Z=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Ob=function(T,U,$){for(var ie=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)ie[ke-2]=arguments[ke];return m.prototype[U].apply(T,ie)}}var I=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function M(u){const m=u.length;if(m>0){const _=Array(m);for(let T=0;T<m;T++)_[T]=u[T];return _}return[]}function W(u,m){for(let T=1;T<arguments.length;T++){const U=arguments[T];var _=typeof U;if(_=_!="object"?_:U?Array.isArray(U)?"array":_:"null",_=="array"||_=="object"&&typeof U.length=="number"){_=u.length||0;const $=U.length||0;u.length=_+$;for(let ie=0;ie<$;ie++)u[_+ie]=U[ie]}else u.push(U)}}class q{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function F(u){h.setTimeout(()=>{throw u},0)}function K(){var u=P;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class re{constructor(){this.h=this.g=null}add(m,_){const T=b.get();T.set(m,_),this.h?this.h.next=T:this.g=T,this.h=T}}var b=new q(()=>new ee,u=>u.reset());class ee{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let se,J=!1,P=new re,S=()=>{const u=Promise.resolve(void 0);se=()=>{u.then(k)}};function k(){for(var u;u=K();){try{u.h.call(u.g)}catch(_){F(_)}var m=b;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}J=!1}function N(){this.u=this.u,this.C=this.C}N.prototype.u=!1,N.prototype.dispose=function(){this.u||(this.u=!0,this.N())},N.prototype[Symbol.dispose]=function(){this.dispose()},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function x(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}x.prototype.h=function(){this.defaultPrevented=!0};var O=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};h.addEventListener("test",_,m),h.removeEventListener("test",_,m)}catch{}return u})();function R(u){return/^[\s\xa0]*$/.test(u)}function fe(u,m){x.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}E(fe,x),fe.prototype.init=function(u,m){const _=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(_=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&fe.Z.h.call(this)},fe.prototype.h=function(){fe.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var De="closure_listenable_"+(Math.random()*1e6|0),Ue=0;function Re(u,m,_,T,U){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!T,this.ha=U,this.key=++Ue,this.da=this.fa=!1}function te(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ge(u,m,_){for(const T in u)m.call(_,u[T],T,u)}function ae(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function L(u){const m={};for(const _ in u)m[_]=u[_];return m}const Q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ae(u,m){let _,T;for(let U=1;U<arguments.length;U++){T=arguments[U];for(_ in T)u[_]=T[_];for(let $=0;$<Q.length;$++)_=Q[$],Object.prototype.hasOwnProperty.call(T,_)&&(u[_]=T[_])}}function Pe(u){this.src=u,this.g={},this.h=0}Pe.prototype.add=function(u,m,_,T,U){const $=u.toString();u=this.g[$],u||(u=this.g[$]=[],this.h++);const ie=xe(u,m,T,U);return ie>-1?(m=u[ie],_||(m.fa=!1)):(m=new Re(m,this.src,$,!!T,U),m.fa=_,u.push(m)),m};function Ne(u,m){const _=m.type;if(_ in u.g){var T=u.g[_],U=Array.prototype.indexOf.call(T,m,void 0),$;($=U>=0)&&Array.prototype.splice.call(T,U,1),$&&(te(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function xe(u,m,_,T){for(let U=0;U<u.length;++U){const $=u[U];if(!$.da&&$.listener==m&&$.capture==!!_&&$.ha==T)return U}return-1}var $e="closure_lm_"+(Math.random()*1e6|0),je={};function Ge(u,m,_,T,U){if(Array.isArray(m)){for(let $=0;$<m.length;$++)Ge(u,m[$],_,T,U);return null}return _=Qo(_),u&&u[De]?u.J(m,_,f(T)?!!T.capture:!1,U):At(u,m,_,!1,T,U)}function At(u,m,_,T,U,$){if(!m)throw Error("Invalid event type");const ie=f(U)?!!U.capture:!!U;let ke=Ni(u);if(ke||(u[$e]=ke=new Pe(u)),_=ke.add(m,_,T,ie,$),_.proxy)return _;if(T=_n(),_.proxy=T,T.src=u,T.listener=_,u.addEventListener)O||(U=ie),U===void 0&&(U=!1),u.addEventListener(m.toString(),T,U);else if(u.attachEvent)u.attachEvent(ki(m.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return _}function _n(){function u(_){return m.call(u.src,u.listener,_)}const m=Cl;return u}function Ko(u,m,_,T,U){if(Array.isArray(m))for(var $=0;$<m.length;$++)Ko(u,m[$],_,T,U);else T=f(T)?!!T.capture:!!T,_=Qo(_),u&&u[De]?(u=u.i,$=String(m).toString(),$ in u.g&&(m=u.g[$],_=xe(m,_,T,U),_>-1&&(te(m[_]),Array.prototype.splice.call(m,_,1),m.length==0&&(delete u.g[$],u.h--)))):u&&(u=Ni(u))&&(m=u.g[m.toString()],u=-1,m&&(u=xe(m,_,T,U)),(_=u>-1?m[u]:null)&&$r(_))}function $r(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[De])Ne(m.i,u);else{var _=u.type,T=u.proxy;m.removeEventListener?m.removeEventListener(_,T,u.capture):m.detachEvent?m.detachEvent(ki(_),T):m.addListener&&m.removeListener&&m.removeListener(T),(_=Ni(m))?(Ne(_,u),_.h==0&&(_.src=null,m[$e]=null)):te(u)}}}function ki(u){return u in je?je[u]:je[u]="on"+u}function Cl(u,m){if(u.da)u=!0;else{m=new fe(m,this);const _=u.listener,T=u.ha||u.src;u.fa&&$r(u),u=_.call(T,m)}return u}function Ni(u){return u=u[$e],u instanceof Pe?u:null}var $s="__closure_events_fn_"+(Math.random()*1e9>>>0);function Qo(u){return typeof u=="function"?u:(u[$s]||(u[$s]=function(m){return u.handleEvent(m)}),u[$s])}function mt(){N.call(this),this.i=new Pe(this),this.M=this,this.G=null}E(mt,N),mt.prototype[De]=!0,mt.prototype.removeEventListener=function(u,m,_,T){Ko(this,u,m,_,T)};function ut(u,m){var _,T=u.G;if(T)for(_=[];T;T=T.G)_.push(T);if(u=u.M,T=m.type||m,typeof m=="string")m=new x(m,u);else if(m instanceof x)m.target=m.target||u;else{var U=m;m=new x(T,u),Ae(m,U)}U=!0;let $,ie;if(_)for(ie=_.length-1;ie>=0;ie--)$=m.g=_[ie],U=Rn($,T,!0,m)&&U;if($=m.g=u,U=Rn($,T,!0,m)&&U,U=Rn($,T,!1,m)&&U,_)for(ie=0;ie<_.length;ie++)$=m.g=_[ie],U=Rn($,T,!1,m)&&U}mt.prototype.N=function(){if(mt.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const _=u.g[m];for(let T=0;T<_.length;T++)te(_[T]);delete u.g[m],u.h--}}this.G=null},mt.prototype.J=function(u,m,_,T){return this.i.add(String(u),m,!1,_,T)},mt.prototype.K=function(u,m,_,T){return this.i.add(String(u),m,!0,_,T)};function Rn(u,m,_,T){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let U=!0;for(let $=0;$<m.length;++$){const ie=m[$];if(ie&&!ie.da&&ie.capture==_){const ke=ie.listener,ct=ie.ha||ie.src;ie.fa&&Ne(u.i,ie),U=ke.call(ct,T)!==!1&&U}}return U&&!T.defaultPrevented}function Xo(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=y(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:h.setTimeout(u,m||0)}function Yo(u){u.g=Xo(()=>{u.g=null,u.i&&(u.i=!1,Yo(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Rl extends N{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Yo(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qr(u){N.call(this),this.h=u,this.g={}}E(qr,N);var Jo=[];function xi(u){ge(u.g,function(m,_){this.g.hasOwnProperty(_)&&$r(m)},u),u.g={}}qr.prototype.N=function(){qr.Z.N.call(this),xi(this)},qr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Wr=h.JSON.stringify,Pl=h.JSON.parse,qs=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function Hr(){}function kl(){}var Gr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Di(){x.call(this,"d")}E(Di,x);function Zo(){x.call(this,"c")}E(Zo,x);var Pn={},Vi=null;function Kr(){return Vi=Vi||new mt}Pn.Ia="serverreachability";function Oi(u){x.call(this,Pn.Ia,u)}E(Oi,x);function pr(u){const m=Kr();ut(m,new Oi(m))}Pn.STAT_EVENT="statevent";function mr(u,m){x.call(this,Pn.STAT_EVENT,u),this.stat=m}E(mr,x);function at(u){const m=Kr();ut(m,new mr(m,u))}Pn.Ja="timingevent";function ea(u,m){x.call(this,Pn.Ja,u),this.size=m}E(ea,x);function Qr(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},m)}function Xr(){this.g=!0}Xr.prototype.ua=function(){this.g=!1};function Nl(u,m,_,T,U,$){u.info(function(){if(u.g)if($){var ie="",ke=$.split("&");for(let Ke=0;Ke<ke.length;Ke++){var ct=ke[Ke].split("=");if(ct.length>1){const gt=ct[0];ct=ct[1];const cn=gt.split("_");ie=cn.length>=2&&cn[1]=="type"?ie+(gt+"="+ct+"&"):ie+(gt+"=redacted&")}}}else ie=null;else ie=$;return"XMLHTTP REQ ("+T+") [attempt "+U+"]: "+m+`
`+_+`
`+ie})}function xl(u,m,_,T,U,$,ie){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+U+"]: "+m+`
`+_+`
`+$+" "+ie})}function Bn(u,m,_,T){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Ws(u,_)+(T?" "+T:"")})}function Dl(u,m){u.info(function(){return"TIMEOUT: "+m})}Xr.prototype.info=function(){};function Ws(u,m){if(!u.g)return m;if(!m)return null;try{const $=JSON.parse(m);if($){for(u=0;u<$.length;u++)if(Array.isArray($[u])){var _=$[u];if(!(_.length<2)){var T=_[1];if(Array.isArray(T)&&!(T.length<1)){var U=T[0];if(U!="noop"&&U!="stop"&&U!="close")for(let ie=1;ie<T.length;ie++)T[ie]=""}}}}return Wr($)}catch{return m}}var Yr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Jr={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Vl;function gr(){}E(gr,Hr),gr.prototype.g=function(){return new XMLHttpRequest},Vl=new gr;function zn(u){return encodeURIComponent(String(u))}function Mi(u){var m=1;u=u.split(":");const _=[];for(;m>0&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function vn(u,m,_,T){this.j=u,this.i=m,this.l=_,this.S=T||1,this.V=new qr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ol}function Ol(){this.i=null,this.g="",this.h=!1}var Ml={},ta={};function kn(u,m,_){u.M=1,u.A=_r(wn(m)),u.u=_,u.R=!0,na(u,null)}function na(u,m){u.F=Date.now(),Hs(u),u.B=wn(u.A);var _=u.B,T=u.S;Array.isArray(T)||(T=[String(T)]),da(_.i,"t",T),u.C=0,_=u.j.L,u.h=new Ol,u.g=Wl(u.j,_?m:null,!u.u),u.P>0&&(u.O=new Rl(y(u.Y,u,u.g),u.P)),m=u.V,_=u.g,T=u.ba;var U="readystatechange";Array.isArray(U)||(U&&(Jo[0]=U.toString()),U=Jo);for(let $=0;$<U.length;$++){const ie=Ge(_,U[$],T||m.handleEvent,!1,m.h||m);if(!ie)break;m.g[ie.key]=ie}m=u.J?L(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),pr(),Nl(u.i,u.v,u.B,u.l,u.S,u.u)}vn.prototype.ba=function(u){u=u.target;const m=this.O;m&&Qn(u)==3?m.j():this.Y(u)},vn.prototype.Y=function(u){try{if(u==this.g)e:{const ke=Qn(this.g),ct=this.g.ya(),Ke=this.g.ca();if(!(ke<3)&&(ke!=3||this.g&&(this.h.h||this.g.la()||$l(this.g)))){this.K||ke!=4||ct==7||(ct==8||Ke<=0?pr(3):pr(2)),Li(this);var m=this.g.ca();this.X=m;var _=Ll(this);if(this.o=m==200,xl(this.i,this.v,this.B,this.l,this.S,ke,m),this.o){if(this.U&&!this.L){t:{if(this.g){var T,U=this.g;if((T=U.g?U.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(T)){var $=T;break t}}$=null}if(u=$)Bn(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Je(this,u);else{this.o=!1,this.m=3,at(12),yr(this),Gs(this);break e}}if(this.R){u=!0;let gt;for(;!this.K&&this.C<_.length;)if(gt=jl(this,_),gt==ta){ke==4&&(this.m=4,at(14),u=!1),Bn(this.i,this.l,null,"[Incomplete Response]");break}else if(gt==Ml){this.m=4,at(15),Bn(this.i,this.l,_,"[Invalid Chunk]"),u=!1;break}else Bn(this.i,this.l,gt,null),Je(this,gt);if(bl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ke!=4||_.length!=0||this.h.h||(this.m=1,at(16),u=!1),this.o=this.o&&u,!u)Bn(this.i,this.l,_,"[Invalid Chunked Response]"),yr(this),Gs(this);else if(_.length>0&&!this.W){this.W=!0;var ie=this.j;ie.g==this&&ie.aa&&!ie.P&&(ie.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),ni(ie),ie.P=!0,at(11))}}else Bn(this.i,this.l,_,null),Je(this,_);ke==4&&yr(this),this.o&&!this.K&&(ke==4?Hi(this.j,this):(this.o=!1,Hs(this)))}else pa(this.g),m==400&&_.indexOf("Unknown SID")>0?(this.m=3,at(12)):(this.m=0,at(13)),yr(this),Gs(this)}}}catch{}};function Ll(u){if(!bl(u))return u.g.la();const m=$l(u.g);if(m==="")return"";let _="";const T=m.length,U=Qn(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return yr(u),Gs(u),"";u.h.i=new h.TextDecoder}for(let $=0;$<T;$++)u.h.h=!0,_+=u.h.i.decode(m[$],{stream:!(U&&$==T-1)});return m.length=0,u.h.g+=_,u.C=0,u.h.g}function bl(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function jl(u,m){var _=u.C,T=m.indexOf(`
`,_);return T==-1?ta:(_=Number(m.substring(_,T)),isNaN(_)?Ml:(T+=1,T+_>m.length?ta:(m=m.slice(T,T+_),u.C=T+_,m)))}vn.prototype.cancel=function(){this.K=!0,yr(this)};function Hs(u){u.T=Date.now()+u.H,ra(u,u.H)}function ra(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Qr(y(u.aa,u),m)}function Li(u){u.D&&(h.clearTimeout(u.D),u.D=null)}vn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Dl(this.i,this.B),this.M!=2&&(pr(),at(17)),yr(this),this.m=2,Gs(this)):ra(this,this.T-u)};function Gs(u){u.j.I==0||u.K||Hi(u.j,u)}function yr(u){Li(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,xi(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function Je(u,m){try{var _=u.j;if(_.I!=0&&(_.g==u||ia(_.h,u))){if(!u.L&&ia(_.h,u)&&_.I==3){try{var T=_.Ba.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var U=T;if(U[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<u.F)Wi(_),ln(_);else break e;Jn(_),at(18)}}else _.xa=U[1],0<_.xa-_.K&&U[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=Qr(y(_.Va,_),6e3));Ks(_.h)<=1&&_.ta&&(_.ta=void 0)}else un(_,11)}else if((u.L||_.g==u)&&Wi(_),!R(m))for(U=_.Ba.g.parse(m),m=0;m<U.length;m++){let Ke=U[m];const gt=Ke[0];if(!(gt<=_.K))if(_.K=gt,Ke=Ke[1],_.I==2)if(Ke[0]=="c"){_.M=Ke[1],_.ba=Ke[2];const cn=Ke[3];cn!=null&&(_.ka=cn,_.j.info("VER="+_.ka));const Ir=Ke[4];Ir!=null&&(_.za=Ir,_.j.info("SVER="+_.za));const Zn=Ke[5];Zn!=null&&typeof Zn=="number"&&Zn>0&&(T=1.5*Zn,_.O=T,_.j.info("backChannelRequestTimeoutMs_="+T)),T=_;const er=u.g;if(er){const Qi=er.g?er.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Qi){var $=T.h;$.g||Qi.indexOf("spdy")==-1&&Qi.indexOf("quic")==-1&&Qi.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(ji($,$.h),$.h=null))}if(T.G){const ya=er.g?er.g.getResponseHeader("X-HTTP-Session-Id"):null;ya&&(T.wa=ya,He(T.J,T.G,ya))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-u.F,_.j.info("Handshake RTT: "+_.T+"ms")),T=_;var ie=u;if(T.na=ga(T,T.L?T.ba:null,T.W),ie.L){Qs(T.h,ie);var ke=ie,ct=T.O;ct&&(ke.H=ct),ke.D&&(Li(ke),Hs(ke)),T.g=ie}else Ft(T);_.i.length>0&&Tr(_)}else Ke[0]!="stop"&&Ke[0]!="close"||un(_,7);else _.I==3&&(Ke[0]=="stop"||Ke[0]=="close"?Ke[0]=="stop"?un(_,7):$i(_):Ke[0]!="noop"&&_.l&&_.l.qa(Ke),_.A=0)}}pr(4)}catch{}}var Jc=class{constructor(u,m){this.g=u,this.map=m}};function bi(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function sa(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Ks(u){return u.h?1:u.g?u.g.size:0}function ia(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function ji(u,m){u.g?u.g.add(m):u.h=m}function Qs(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}bi.prototype.cancel=function(){if(this.i=sn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function sn(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.G);return m}return M(u.i)}var Fl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function on(u,m){if(u){u=u.split("&");for(let _=0;_<u.length;_++){const T=u[_].indexOf("=");let U,$=null;T>=0?(U=u[_].substring(0,T),$=u[_].substring(T+1)):U=u[_],m(U,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function $n(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof $n?(this.l=u.l,Xs(this,u.j),this.o=u.o,this.g=u.g,qn(this,u.u),this.h=u.h,Zr(this,fa(u.i)),this.m=u.m):u&&(m=String(u).match(Fl))?(this.l=!1,Xs(this,m[1]||"",!0),this.o=Ys(m[2]||""),this.g=Ys(m[3]||"",!0),qn(this,m[4]),this.h=Ys(m[5]||"",!0),Zr(this,m[6]||"",!0),this.m=Ys(m[7]||"")):(this.l=!1,this.i=new Fe(null,this.l))}$n.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(Js(m,aa,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Js(m,aa,!0),"@"),u.push(zn(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&u.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(Js(_,_.charAt(0)=="/"?Zs:la,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",Js(_,ua)),u.join("")},$n.prototype.resolve=function(u){const m=wn(this);let _=!!u.j;_?Xs(m,u.j):_=!!u.o,_?m.o=u.o:_=!!u.g,_?m.g=u.g:_=u.u!=null;var T=u.h;if(_)qn(m,u.u);else if(_=!!u.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var U=m.h.lastIndexOf("/");U!=-1&&(T=m.h.slice(0,U+1)+T)}if(U=T,U==".."||U==".")T="";else if(U.indexOf("./")!=-1||U.indexOf("/.")!=-1){T=U.lastIndexOf("/",0)==0,U=U.split("/");const $=[];for(let ie=0;ie<U.length;){const ke=U[ie++];ke=="."?T&&ie==U.length&&$.push(""):ke==".."?(($.length>1||$.length==1&&$[0]!="")&&$.pop(),T&&ie==U.length&&$.push("")):($.push(ke),T=!0)}T=$.join("/")}else T=U}return _?m.h=T:_=u.i.toString()!=="",_?Zr(m,fa(u.i)):_=!!u.m,_&&(m.m=u.m),m};function wn(u){return new $n(u)}function Xs(u,m,_){u.j=_?Ys(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function qn(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function Zr(u,m,_){m instanceof Fe?(u.i=m,Ui(u.i,u.l)):(_||(m=Js(m,Zc)),u.i=new Fe(m,u.l))}function He(u,m,_){u.i.set(m,_)}function _r(u){return He(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Ys(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Js(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,oa),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function oa(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var aa=/[#\/\?@]/g,la=/[#\?:]/g,Zs=/[#\?]/g,Zc=/[#\?@]/g,ua=/#/g;function Fe(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Wn(u){u.g||(u.g=new Map,u.h=0,u.i&&on(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}r=Fe.prototype,r.add=function(u,m){Wn(this),this.i=null,u=Hn(this,u);let _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function ca(u,m){Wn(u),m=Hn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Fi(u,m){return Wn(u),m=Hn(u,m),u.g.has(m)}r.forEach=function(u,m){Wn(this),this.g.forEach(function(_,T){_.forEach(function(U){u.call(m,U,T,this)},this)},this)};function ha(u,m){Wn(u);let _=[];if(typeof m=="string")Fi(u,m)&&(_=_.concat(u.g.get(Hn(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)_=_.concat(u[m]);return _}r.set=function(u,m){return Wn(this),this.i=null,u=Hn(this,u),Fi(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=ha(this,u),u.length>0?String(u[0]):m):m};function da(u,m,_){ca(u,m),_.length>0&&(u.i=null,u.g.set(Hn(u,m),M(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let T=0;T<m.length;T++){var _=m[T];const U=zn(_);_=ha(this,_);for(let $=0;$<_.length;$++){let ie=U;_[$]!==""&&(ie+="="+zn(_[$])),u.push(ie)}}return this.i=u.join("&")};function fa(u){const m=new Fe;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function Hn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function Ui(u,m){m&&!u.j&&(Wn(u),u.i=null,u.g.forEach(function(_,T){const U=T.toLowerCase();T!=U&&(ca(this,T),da(this,U,_))},u)),u.j=m}function Gn(u,m){const _=new Xr;if(h.Image){const T=new Image;T.onload=v(xt,_,"TestLoadImage: loaded",!0,m,T),T.onerror=v(xt,_,"TestLoadImage: error",!1,m,T),T.onabort=v(xt,_,"TestLoadImage: abort",!1,m,T),T.ontimeout=v(xt,_,"TestLoadImage: timeout",!1,m,T),h.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else m(!1)}function Kn(u,m){const _=new Xr,T=new AbortController,U=setTimeout(()=>{T.abort(),xt(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:T.signal}).then($=>{clearTimeout(U),$.ok?xt(_,"TestPingServer: ok",!0,m):xt(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(U),xt(_,"TestPingServer: error",!1,m)})}function xt(u,m,_,T,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),T(_)}catch{}}function ei(){this.g=new qs}function vr(u){this.i=u.Sb||null,this.h=u.ab||!1}E(vr,Hr),vr.prototype.g=function(){return new an(this.i,this.h)};function an(u,m){mt.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(an,mt),r=an.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,Nn(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||h).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,es(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Nn(this)),this.g&&(this.readyState=3,Nn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ul(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ul(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?es(this):Nn(this),this.readyState==3&&Ul(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,es(this))},r.Na=function(u){this.g&&(this.response=u,es(this))},r.ga=function(){this.g&&es(this)};function es(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Nn(u)}r.setRequestHeader=function(u,m){this.A.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function Nn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(an.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Bl(u){let m="";return ge(u,function(_,T){m+=T,m+=":",m+=_,m+=`\r
`}),m}function Bi(u,m,_){e:{for(T in _){var T=!1;break e}T=!0}T||(_=Bl(_),typeof u=="string"?_!=null&&zn(_):He(u,m,_))}function Xe(u){mt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(Xe,mt);var zl=/^https?$/i,eh=["POST","PUT"];r=Xe.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,m,_,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Vl.g(),this.g.onreadystatechange=I(y(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch($){ts(this,$);return}if(u=_||"",_=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var U in T)_.set(U,T[U]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const $ of T.keys())_.set($,T.get($));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(_.keys()).find($=>$.toLowerCase()=="content-type"),U=h.FormData&&u instanceof h.FormData,!(Array.prototype.indexOf.call(eh,m,void 0)>=0)||T||U||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,ie]of _)this.g.setRequestHeader($,ie);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch($){ts(this,$)}};function ts(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,ns(u),Er(u)}function ns(u){u.A||(u.A=!0,ut(u,"complete"),ut(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,ut(this,"complete"),ut(this,"abort"),Er(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Er(this,!0)),Xe.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?wr(this):this.Xa())},r.Xa=function(){wr(this)};function wr(u){if(u.h&&typeof l<"u"){if(u.v&&Qn(u)==4)setTimeout(u.Ca.bind(u),0);else if(ut(u,"readystatechange"),Qn(u)==4){u.h=!1;try{const $=u.ca();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var T;if(T=$===0){let ie=String(u.D).match(Fl)[1]||null;!ie&&h.self&&h.self.location&&(ie=h.self.location.protocol.slice(0,-1)),T=!zl.test(ie?ie.toLowerCase():"")}_=T}if(_)ut(u,"complete"),ut(u,"success");else{u.o=6;try{var U=Qn(u)>2?u.g.statusText:""}catch{U=""}u.l=U+" ["+u.ca()+"]",ns(u)}}finally{Er(u)}}}}function Er(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const _=u.g;u.g=null,m||ut(u,"ready");try{_.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Qn(u){return u.g?u.g.readyState:0}r.ca=function(){try{return Qn(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Pl(m)}};function $l(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function pa(u){const m={};u=(u.g&&Qn(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(R(u[T]))continue;var _=Mi(u[T]);const U=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const $=m[U]||[];m[U]=$,$.push(_)}ae(m,function(T){return T.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xn(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function zi(u){this.za=0,this.i=[],this.j=new Xr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Xn("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Xn("baseRetryDelayMs",5e3,u),this.Za=Xn("retryDelaySeedMs",1e4,u),this.Ta=Xn("forwardChannelMaxRetries",2,u),this.va=Xn("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new bi(u&&u.concurrentRequestLimit),this.Ba=new ei,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=zi.prototype,r.ka=8,r.I=1,r.connect=function(u,m,_,T){at(0),this.W=u,this.H=m||{},_&&T!==void 0&&(this.H.OSID=_,this.H.OAID=T),this.F=this.X,this.J=ga(this,null,this.W),Tr(this)};function $i(u){if(qi(u),u.I==3){var m=u.V++,_=wn(u.J);if(He(_,"SID",u.M),He(_,"RID",m),He(_,"TYPE","terminate"),Yn(u,_),m=new vn(u,u.j,m),m.M=2,m.A=_r(wn(_)),_=!1,h.navigator&&h.navigator.sendBeacon)try{_=h.navigator.sendBeacon(m.A.toString(),"")}catch{}!_&&h.Image&&(new Image().src=m.A,_=!0),_||(m.g=Wl(m.j,null),m.g.ea(m.A)),m.F=Date.now(),Hs(m)}ri(u)}function ln(u){u.g&&(ni(u),u.g.cancel(),u.g=null)}function qi(u){ln(u),u.v&&(h.clearTimeout(u.v),u.v=null),Wi(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&h.clearTimeout(u.m),u.m=null)}function Tr(u){if(!sa(u.h)&&!u.m){u.m=!0;var m=u.Ea;se||S(),J||(se(),J=!0),P.add(m,u),u.D=0}}function ql(u,m){return Ks(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Qr(y(u.Ea,u,m),Gi(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const U=new vn(this,this.j,u);let $=this.o;if(this.U&&($?($=L($),Ae($,this.U)):$=this.U),this.u!==null||this.R||(U.J=$,$=null),this.S)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var T=this.i[_];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(m+=T,m>4096){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=ma(this,U,m),_=wn(this.J),He(_,"RID",u),He(_,"CVER",22),this.G&&He(_,"X-HTTP-Session-Id",this.G),Yn(this,_),$&&(this.R?m="headers="+zn(Bl($))+"&"+m:this.u&&Bi(_,this.u,$)),ji(this.h,U),this.Ra&&He(_,"TYPE","init"),this.S?(He(_,"$req",m),He(_,"SID","null"),U.U=!0,kn(U,_,null)):kn(U,_,m),this.I=2}}else this.I==3&&(u?ti(this,u):this.i.length==0||sa(this.h)||ti(this))};function ti(u,m){var _;m?_=m.l:_=u.V++;const T=wn(u.J);He(T,"SID",u.M),He(T,"RID",_),He(T,"AID",u.K),Yn(u,T),u.u&&u.o&&Bi(T,u.u,u.o),_=new vn(u,u.j,_,u.D+1),u.u===null&&(_.J=u.o),m&&(u.i=m.G.concat(u.i)),m=ma(u,_,1e3),_.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),ji(u.h,_),kn(_,T,m)}function Yn(u,m){u.H&&ge(u.H,function(_,T){He(m,T,_)}),u.l&&ge({},function(_,T){He(m,T,_)})}function ma(u,m,_){_=Math.min(u.i.length,_);const T=u.l?y(u.l.Ka,u.l,u):null;e:{var U=u.i;let ke=-1;for(;;){const ct=["count="+_];ke==-1?_>0?(ke=U[0].g,ct.push("ofs="+ke)):ke=0:ct.push("ofs="+ke);let Ke=!0;for(let gt=0;gt<_;gt++){var $=U[gt].g;const cn=U[gt].map;if($-=ke,$<0)ke=Math.max(0,U[gt].g-100),Ke=!1;else try{$="req"+$+"_"||"";try{var ie=cn instanceof Map?cn:Object.entries(cn);for(const[Ir,Zn]of ie){let er=Zn;f(Zn)&&(er=Wr(Zn)),ct.push($+Ir+"="+encodeURIComponent(er))}}catch(Ir){throw ct.push($+"type="+encodeURIComponent("_badmap")),Ir}}catch{T&&T(cn)}}if(Ke){ie=ct.join("&");break e}}ie=void 0}return u=u.i.splice(0,_),m.G=u,ie}function Ft(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;se||S(),J||(se(),J=!0),P.add(m,u),u.A=0}}function Jn(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Qr(y(u.Da,u),Gi(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,rs(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Qr(y(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,at(10),ln(this),rs(this))};function ni(u){u.B!=null&&(h.clearTimeout(u.B),u.B=null)}function rs(u){u.g=new vn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=wn(u.na);He(m,"RID","rpc"),He(m,"SID",u.M),He(m,"AID",u.K),He(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&He(m,"TO",u.ia),He(m,"TYPE","xmlhttp"),Yn(u,m),u.u&&u.o&&Bi(m,u.u,u.o),u.O&&(u.g.H=u.O);var _=u.g;u=u.ba,_.M=1,_.A=_r(wn(m)),_.u=null,_.R=!0,na(_,u)}r.Va=function(){this.C!=null&&(this.C=null,ln(this),Jn(this),at(19))};function Wi(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function Hi(u,m){var _=null;if(u.g==m){Wi(u),ni(u),u.g=null;var T=2}else if(ia(u.h,m))_=m.G,Qs(u.h,m),T=1;else return;if(u.I!=0){if(m.o)if(T==1){_=m.u?m.u.length:0,m=Date.now()-m.F;var U=u.D;T=Kr(),ut(T,new ea(T,_)),Tr(u)}else Ft(u);else if(U=m.m,U==3||U==0&&m.X>0||!(T==1&&ql(u,m)||T==2&&Jn(u)))switch(_&&_.length>0&&(m=u.h,m.i=m.i.concat(_)),U){case 1:un(u,5);break;case 4:un(u,10);break;case 3:un(u,6);break;default:un(u,2)}}}function Gi(u,m){let _=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(_*=2),_*m}function un(u,m){if(u.j.info("Error code "+m),m==2){var _=y(u.bb,u),T=u.Ua;const U=!T;T=new $n(T||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Xs(T,"https"),_r(T),U?Gn(T.toString(),_):Kn(T.toString(),_)}else at(2);u.I=0,u.l&&u.l.pa(m),ri(u),qi(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),at(2)):(this.j.info("Failed to ping google.com"),at(1))};function ri(u){if(u.I=0,u.ja=[],u.l){const m=sn(u.h);(m.length!=0||u.i.length!=0)&&(W(u.ja,m),W(u.ja,u.i),u.h.i.length=0,M(u.i),u.i.length=0),u.l.oa()}}function ga(u,m,_){var T=_ instanceof $n?wn(_):new $n(_);if(T.g!="")m&&(T.g=m+"."+T.g),qn(T,T.u);else{var U=h.location;T=U.protocol,m=m?m+"."+U.hostname:U.hostname,U=+U.port;const $=new $n(null);T&&Xs($,T),m&&($.g=m),U&&qn($,U),_&&($.h=_),T=$}return _=u.G,m=u.wa,_&&m&&He(T,_,m),He(T,"VER",u.ka),Yn(u,T),T}function Wl(u,m,_){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new Xe(new vr({ab:_})):new Xe(u.ma),m.Fa(u.L),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Hl(){}r=Hl.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Ki(){}Ki.prototype.g=function(u,m){return new Dt(u,m)};function Dt(u,m){mt.call(this),this.g=new zi(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!R(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!R(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new ss(this)}E(Dt,mt),Dt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Dt.prototype.close=function(){$i(this.g)},Dt.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.v&&(_={},_.__data__=Wr(u),u=_);m.i.push(new Jc(m.Ya++,u)),m.I==3&&Tr(m)},Dt.prototype.N=function(){this.g.l=null,delete this.j,$i(this.g),delete this.g,Dt.Z.N.call(this)};function Gl(u){Di.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const _ in m){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}E(Gl,Di);function Kl(){Zo.call(this),this.status=1}E(Kl,Zo);function ss(u){this.g=u}E(ss,Hl),ss.prototype.ra=function(){ut(this.g,"a")},ss.prototype.qa=function(u){ut(this.g,new Gl(u))},ss.prototype.pa=function(u){ut(this.g,new Kl)},ss.prototype.oa=function(){ut(this.g,"b")},Ki.prototype.createWebChannel=Ki.prototype.g,Dt.prototype.send=Dt.prototype.o,Dt.prototype.open=Dt.prototype.m,Dt.prototype.close=Dt.prototype.close,kv=function(){return new Ki},Pv=function(){return Kr()},Rv=Pn,Zd={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Yr.NO_ERROR=0,Yr.TIMEOUT=8,Yr.HTTP_ERROR=6,Ju=Yr,Jr.COMPLETE="complete",Cv=Jr,kl.EventType=Gr,Gr.OPEN="a",Gr.CLOSE="b",Gr.ERROR="c",Gr.MESSAGE="d",mt.prototype.listen=mt.prototype.J,$a=kl,Xe.prototype.listenOnce=Xe.prototype.K,Xe.prototype.getLastError=Xe.prototype.Ha,Xe.prototype.getLastErrorCode=Xe.prototype.ya,Xe.prototype.getStatus=Xe.prototype.ca,Xe.prototype.getResponseJson=Xe.prototype.La,Xe.prototype.getResponseText=Xe.prototype.la,Xe.prototype.send=Xe.prototype.ea,Xe.prototype.setWithCredentials=Xe.prototype.Fa,Av=Xe}).apply(typeof $u<"u"?$u:typeof self<"u"?self:typeof window<"u"?window:{});const wy="@firebase/firestore",Ey="4.9.3";class Wt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Wt.UNAUTHENTICATED=new Wt(null),Wt.GOOGLE_CREDENTIALS=new Wt("google-credentials-uid"),Wt.FIRST_PARTY=new Wt("first-party-uid"),Wt.MOCK_USER=new Wt("mock-user");let Bo="12.7.0";const Ii=new Tf("@firebase/firestore");function _o(){return Ii.logLevel}function ue(r,...e){if(Ii.logLevel<=Oe.DEBUG){const t=e.map(Mf);Ii.debug(`Firestore (${Bo}): ${r}`,...t)}}function jr(r,...e){if(Ii.logLevel<=Oe.ERROR){const t=e.map(Mf);Ii.error(`Firestore (${Bo}): ${r}`,...t)}}function No(r,...e){if(Ii.logLevel<=Oe.WARN){const t=e.map(Mf);Ii.warn(`Firestore (${Bo}): ${r}`,...t)}}function Mf(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}function _e(r,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,Nv(r,s,t)}function Nv(r,e,t){let s=`FIRESTORE (${Bo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw jr(s),new Error(s)}function ze(r,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,r||Nv(e,o,s)}function Ce(r,e){return r}const H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oe extends zr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ar{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class xv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Wt.UNAUTHENTICATED)))}shutdown(){}}class _A{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class vA{constructor(e){this.t=e,this.currentUser=Wt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ze(this.o===void 0,42304);let s=this.i;const o=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let l=new ar;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ar,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},f=g=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((g=>f(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?f(g):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ar)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(ze(typeof s.accessToken=="string",31837,{l:s}),new xv(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ze(e===null||typeof e=="string",2055,{h:e}),new Wt(e)}}class wA{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Wt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class EA{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new wA(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Wt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Ty{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class TA{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,bn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ze(this.o===void 0,3512);const s=l=>{l.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,ue("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const o=l=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Ty(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ze(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Ty(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function IA(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}class Lf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=IA(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%62))}return s}}function Me(r,e){return r<e?-1:r>e?1:0}function ef(r,e){const t=Math.min(r.length,e.length);for(let s=0;s<t;s++){const o=r.charAt(s),l=e.charAt(s);if(o!==l)return Od(o)===Od(l)?Me(o,l):Od(o)?1:-1}return Me(r.length,e.length)}const SA=55296,AA=57343;function Od(r){const e=r.charCodeAt(0);return e>=SA&&e<=AA}function xo(r,e,t){return r.length===e.length&&r.every(((s,o)=>t(s,e[o])))}const Iy="__name__";class ir{constructor(e,t,s){t===void 0?t=0:t>e.length&&_e(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&_e(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return ir.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ir?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=ir.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Me(e.length,t.length)}static compareSegments(e,t){const s=ir.isNumericId(e),o=ir.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?ir.extractNumericId(e).compare(ir.extractNumericId(t)):ef(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ns.fromString(e.substring(4,e.length-2))}}class Qe extends ir{construct(e,t,s){return new Qe(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new oe(H.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new Qe(t)}static emptyPath(){return new Qe([])}}const CA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Lt extends ir{construct(e,t,s){return new Lt(e,t,s)}static isValidIdentifier(e){return CA.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Lt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Iy}static keyField(){return new Lt([Iy])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new oe(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let h=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new oe(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new oe(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else f==="`"?(h=!h,o++):f!=="."||h?(s+=f,o++):(l(),o++)}if(l(),h)throw new oe(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Lt(t)}static emptyPath(){return new Lt([])}}class ye{constructor(e){this.path=e}static fromPath(e){return new ye(Qe.fromString(e))}static fromName(e){return new ye(Qe.fromString(e).popFirst(5))}static empty(){return new ye(Qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Qe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new Qe(e.slice()))}}function Dv(r,e,t){if(!t)throw new oe(H.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function RA(r,e,t,s){if(e===!0&&s===!0)throw new oe(H.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Sy(r){if(!ye.isDocumentKey(r))throw new oe(H.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Ay(r){if(ye.isDocumentKey(r))throw new oe(H.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Vv(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Vc(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":_e(12329,{type:typeof r})}function Fr(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new oe(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Vc(r);throw new oe(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function wt(r,e){const t={typeString:r};return e&&(t.value=e),t}function gl(r,e){if(!Vv(r))throw new oe(H.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){t=`JSON missing required field: '${s}'`;break}const h=r[s];if(o&&typeof h!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(l!==void 0&&h!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new oe(H.INVALID_ARGUMENT,t);return!0}const Cy=-62135596800,Ry=1e6;class tt{static now(){return tt.fromMillis(Date.now())}static fromDate(e){return tt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*Ry);return new tt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new oe(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new oe(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Cy)throw new oe(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oe(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ry}_compareTo(e){return this.seconds===e.seconds?Me(this.nanoseconds,e.nanoseconds):Me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:tt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(gl(e,tt._jsonSchema))return new tt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Cy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}tt._jsonSchemaVersion="firestore/timestamp/1.0",tt._jsonSchema={type:wt("string",tt._jsonSchemaVersion),seconds:wt("number"),nanoseconds:wt("number")};class Te{static fromTimestamp(e){return new Te(e)}static min(){return new Te(new tt(0,0))}static max(){return new Te(new tt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const rl=-1;function PA(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Te.fromTimestamp(s===1e9?new tt(t+1,0):new tt(t,s));return new Vs(o,ye.empty(),e)}function kA(r){return new Vs(r.readTime,r.key,rl)}class Vs{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Vs(Te.min(),ye.empty(),rl)}static max(){return new Vs(Te.max(),ye.empty(),rl)}}function NA(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=ye.comparator(r.documentKey,e.documentKey),t!==0?t:Me(r.largestBatchId,e.largestBatchId))}const xA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class DA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function zo(r){if(r.code!==H.FAILED_PRECONDITION||r.message!==xA)throw r;ue("LocalStore","Unexpectedly lost primary lease")}class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&_e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new G(((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof G?t:G.resolve(t)}catch(t){return G.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):G.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):G.reject(t)}static resolve(e){return new G(((t,s)=>{t(e)}))}static reject(e){return new G(((t,s)=>{s(e)}))}static waitFor(e){return new G(((t,s)=>{let o=0,l=0,h=!1;e.forEach((f=>{++o,f.next((()=>{++l,h&&l===o&&t()}),(g=>s(g)))})),h=!0,l===o&&t()}))}static or(e){let t=G.resolve(!1);for(const s of e)t=t.next((o=>o?G.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,l)=>{s.push(t.call(this,o,l))})),this.waitFor(s)}static mapArray(e,t){return new G(((s,o)=>{const l=e.length,h=new Array(l);let f=0;for(let g=0;g<l;g++){const y=g;t(e[y]).next((v=>{h[y]=v,++f,f===l&&s(h)}),(v=>o(v)))}}))}static doWhile(e,t){return new G(((s,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):s()};l()}))}}function VA(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function $o(r){return r.name==="IndexedDbTransactionError"}class Oc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Oc.ce=-1;const bf=-1;function yl(r){return r==null}function fc(r){return r===0&&1/r==-1/0}function OA(r){return typeof r=="number"&&Number.isInteger(r)&&!fc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const Ov="";function MA(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Py(e)),e=LA(r.get(t),e);return Py(e)}function LA(r,e){let t=e;const s=r.length;for(let o=0;o<s;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case Ov:t+="";break;default:t+=l}}return t}function Py(r){return r+Ov+""}function ky(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Us(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function Mv(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class ot{constructor(e,t){this.comparator=e,this.root=t||Mt.EMPTY}insert(e,t){return new ot(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Mt.BLACK,null,null))}remove(e){return new ot(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Mt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qu(this.root,e,this.comparator,!1)}getReverseIterator(){return new qu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qu(this.root,e,this.comparator,!0)}}class qu{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Mt{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??Mt.RED,this.left=o??Mt.EMPTY,this.right=l??Mt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new Mt(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Mt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Mt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Mt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Mt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw _e(27949);return e+(this.isRed()?0:1)}}Mt.EMPTY=null,Mt.RED=!0,Mt.BLACK=!1;Mt.EMPTY=new class{constructor(){this.size=0}get key(){throw _e(57766)}get value(){throw _e(16141)}get color(){throw _e(16727)}get left(){throw _e(29726)}get right(){throw _e(36894)}copy(e,t,s,o,l){return this}insert(e,t,s){return new Mt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class It{constructor(e){this.comparator=e,this.data=new ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ny(this.data.getIterator())}getIteratorFrom(e){return new Ny(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof It)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new It(this.comparator);return t.data=e,t}}class Ny{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class gn{constructor(e){this.fields=e,e.sort(Lt.comparator)}static empty(){return new gn([])}unionWith(e){let t=new It(Lt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new gn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return xo(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}class Lv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class jt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Lv("Invalid base64 string: "+l):l}})(e);return new jt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l})(e);return new jt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}jt.EMPTY_BYTE_STRING=new jt("");const bA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Os(r){if(ze(!!r,39018),typeof r=="string"){let e=0;const t=bA.exec(r);if(ze(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:dt(r.seconds),nanos:dt(r.nanos)}}function dt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ms(r){return typeof r=="string"?jt.fromBase64String(r):jt.fromUint8Array(r)}const bv="server_timestamp",jv="__type__",Fv="__previous_value__",Uv="__local_write_time__";function jf(r){return(r?.mapValue?.fields||{})[jv]?.stringValue===bv}function Mc(r){const e=r.mapValue.fields[Fv];return jf(e)?Mc(e):e}function sl(r){const e=Os(r.mapValue.fields[Uv].timestampValue);return new tt(e.seconds,e.nanos)}class jA{constructor(e,t,s,o,l,h,f,g,y,v){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=v}}const pc="(default)";class il{constructor(e,t){this.projectId=e,this.database=t||pc}static empty(){return new il("","")}get isDefaultDatabase(){return this.database===pc}isEqual(e){return e instanceof il&&e.projectId===this.projectId&&e.database===this.database}}const Bv="__type__",FA="__max__",Wu={mapValue:{}},zv="__vector__",mc="value";function Ls(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?jf(r)?4:BA(r)?9007199254740991:UA(r)?10:11:_e(28295,{value:r})}function fr(r,e){if(r===e)return!0;const t=Ls(r);if(t!==Ls(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return sl(r).isEqual(sl(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=Os(o.timestampValue),f=Os(l.timestampValue);return h.seconds===f.seconds&&h.nanos===f.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,l){return Ms(o.bytesValue).isEqual(Ms(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,l){return dt(o.geoPointValue.latitude)===dt(l.geoPointValue.latitude)&&dt(o.geoPointValue.longitude)===dt(l.geoPointValue.longitude)})(r,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return dt(o.integerValue)===dt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=dt(o.doubleValue),f=dt(l.doubleValue);return h===f?fc(h)===fc(f):isNaN(h)&&isNaN(f)}return!1})(r,e);case 9:return xo(r.arrayValue.values||[],e.arrayValue.values||[],fr);case 10:case 11:return(function(o,l){const h=o.mapValue.fields||{},f=l.mapValue.fields||{};if(ky(h)!==ky(f))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(f[g]===void 0||!fr(h[g],f[g])))return!1;return!0})(r,e);default:return _e(52216,{left:r})}}function ol(r,e){return(r.values||[]).find((t=>fr(t,e)))!==void 0}function Do(r,e){if(r===e)return 0;const t=Ls(r),s=Ls(e);if(t!==s)return Me(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Me(r.booleanValue,e.booleanValue);case 2:return(function(l,h){const f=dt(l.integerValue||l.doubleValue),g=dt(h.integerValue||h.doubleValue);return f<g?-1:f>g?1:f===g?0:isNaN(f)?isNaN(g)?0:-1:1})(r,e);case 3:return xy(r.timestampValue,e.timestampValue);case 4:return xy(sl(r),sl(e));case 5:return ef(r.stringValue,e.stringValue);case 6:return(function(l,h){const f=Ms(l),g=Ms(h);return f.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(l,h){const f=l.split("/"),g=h.split("/");for(let y=0;y<f.length&&y<g.length;y++){const v=Me(f[y],g[y]);if(v!==0)return v}return Me(f.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,h){const f=Me(dt(l.latitude),dt(h.latitude));return f!==0?f:Me(dt(l.longitude),dt(h.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Dy(r.arrayValue,e.arrayValue);case 10:return(function(l,h){const f=l.fields||{},g=h.fields||{},y=f[mc]?.arrayValue,v=g[mc]?.arrayValue,E=Me(y?.values?.length||0,v?.values?.length||0);return E!==0?E:Dy(y,v)})(r.mapValue,e.mapValue);case 11:return(function(l,h){if(l===Wu.mapValue&&h===Wu.mapValue)return 0;if(l===Wu.mapValue)return 1;if(h===Wu.mapValue)return-1;const f=l.fields||{},g=Object.keys(f),y=h.fields||{},v=Object.keys(y);g.sort(),v.sort();for(let E=0;E<g.length&&E<v.length;++E){const I=ef(g[E],v[E]);if(I!==0)return I;const M=Do(f[g[E]],y[v[E]]);if(M!==0)return M}return Me(g.length,v.length)})(r.mapValue,e.mapValue);default:throw _e(23264,{he:t})}}function xy(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Me(r,e);const t=Os(r),s=Os(e),o=Me(t.seconds,s.seconds);return o!==0?o:Me(t.nanos,s.nanos)}function Dy(r,e){const t=r.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=Do(t[o],s[o]);if(l)return l}return Me(t.length,s.length)}function Vo(r){return tf(r)}function tf(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const s=Os(t);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Ms(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return ye.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=tf(l);return s+"]"})(r.arrayValue):"mapValue"in r?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of s)l?l=!1:o+=",",o+=`${h}:${tf(t.fields[h])}`;return o+"}"})(r.mapValue):_e(61005,{value:r})}function Zu(r){switch(Ls(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Mc(r);return e?16+Zu(e):16;case 5:return 2*r.stringValue.length;case 6:return Ms(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,l)=>o+Zu(l)),0)})(r.arrayValue);case 10:case 11:return(function(s){let o=0;return Us(s.fields,((l,h)=>{o+=l.length+Zu(h)})),o})(r.mapValue);default:throw _e(13486,{value:r})}}function Vy(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function nf(r){return!!r&&"integerValue"in r}function Ff(r){return!!r&&"arrayValue"in r}function Oy(r){return!!r&&"nullValue"in r}function My(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function ec(r){return!!r&&"mapValue"in r}function UA(r){return(r?.mapValue?.fields||{})[Bv]?.stringValue===zv}function Ka(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Us(r.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Ka(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ka(r.arrayValue.values[t]);return e}return{...r}}function BA(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===FA}class Qt{constructor(e){this.value=e}static empty(){return new Qt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!ec(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ka(t)}setAll(e){let t=Lt.emptyPath(),s={},o=[];e.forEach(((h,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,s,o),s={},o=[],t=f.popLast()}h?s[f.lastSegment()]=Ka(h):o.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());ec(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return fr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];ec(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){Us(t,((o,l)=>e[o]=l));for(const o of s)delete e[o]}clone(){return new Qt(Ka(this.value))}}function $v(r){const e=[];return Us(r.fields,((t,s)=>{const o=new Lt([t]);if(ec(s)){const l=$v(s.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)})),new gn(e)}class Nt{constructor(e,t,s,o,l,h,f){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=h,this.documentState=f}static newInvalidDocument(e){return new Nt(e,0,Te.min(),Te.min(),Te.min(),Qt.empty(),0)}static newFoundDocument(e,t,s,o){return new Nt(e,1,t,Te.min(),s,o,0)}static newNoDocument(e,t){return new Nt(e,2,t,Te.min(),Te.min(),Qt.empty(),0)}static newUnknownDocument(e,t){return new Nt(e,3,t,Te.min(),Te.min(),Qt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Nt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Nt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class gc{constructor(e,t){this.position=e,this.inclusive=t}}function Ly(r,e,t){let s=0;for(let o=0;o<r.position.length;o++){const l=e[o],h=r.position[o];if(l.field.isKeyField()?s=ye.comparator(ye.fromName(h.referenceValue),t.key):s=Do(h,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function by(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!fr(r.position[t],e.position[t]))return!1;return!0}class yc{constructor(e,t="asc"){this.field=e,this.dir=t}}function zA(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class qv{}class vt extends qv{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new qA(e,t,s):t==="array-contains"?new GA(e,s):t==="in"?new KA(e,s):t==="not-in"?new QA(e,s):t==="array-contains-any"?new XA(e,s):new vt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new WA(e,s):new HA(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Do(t,this.value)):t!==null&&Ls(this.value)===Ls(t)&&this.matchesComparison(Do(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Un extends qv{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Un(e,t)}matches(e){return Wv(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Wv(r){return r.op==="and"}function Hv(r){return $A(r)&&Wv(r)}function $A(r){for(const e of r.filters)if(e instanceof Un)return!1;return!0}function rf(r){if(r instanceof vt)return r.field.canonicalString()+r.op.toString()+Vo(r.value);if(Hv(r))return r.filters.map((e=>rf(e))).join(",");{const e=r.filters.map((t=>rf(t))).join(",");return`${r.op}(${e})`}}function Gv(r,e){return r instanceof vt?(function(s,o){return o instanceof vt&&s.op===o.op&&s.field.isEqual(o.field)&&fr(s.value,o.value)})(r,e):r instanceof Un?(function(s,o){return o instanceof Un&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((l,h,f)=>l&&Gv(h,o.filters[f])),!0):!1})(r,e):void _e(19439)}function Kv(r){return r instanceof vt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Vo(t.value)}`})(r):r instanceof Un?(function(t){return t.op.toString()+" {"+t.getFilters().map(Kv).join(" ,")+"}"})(r):"Filter"}class qA extends vt{constructor(e,t,s){super(e,t,s),this.key=ye.fromName(s.referenceValue)}matches(e){const t=ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class WA extends vt{constructor(e,t){super(e,"in",t),this.keys=Qv("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class HA extends vt{constructor(e,t){super(e,"not-in",t),this.keys=Qv("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Qv(r,e){return(e.arrayValue?.values||[]).map((t=>ye.fromName(t.referenceValue)))}class GA extends vt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ff(t)&&ol(t.arrayValue,this.value)}}class KA extends vt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ol(this.value.arrayValue,t)}}class QA extends vt{constructor(e,t){super(e,"not-in",t)}matches(e){if(ol(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ol(this.value.arrayValue,t)}}class XA extends vt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ff(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>ol(this.value.arrayValue,s)))}}class YA{constructor(e,t=null,s=[],o=[],l=null,h=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=h,this.endAt=f,this.Te=null}}function jy(r,e=null,t=[],s=[],o=null,l=null,h=null){return new YA(r,e,t,s,o,l,h)}function Uf(r){const e=Ce(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>rf(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),yl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Vo(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Vo(s))).join(",")),e.Te=t}return e.Te}function Bf(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!zA(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!Gv(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!by(r.startAt,e.startAt)&&by(r.endAt,e.endAt)}function sf(r){return ye.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}class _l{constructor(e,t=null,s=[],o=[],l=null,h="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=h,this.startAt=f,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function JA(r,e,t,s,o,l,h,f){return new _l(r,e,t,s,o,l,h,f)}function zf(r){return new _l(r)}function Fy(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function Xv(r){return r.collectionGroup!==null}function Qa(r){const e=Ce(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let f=new It(Lt.comparator);return h.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(f=f.add(y.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new yc(l,s))})),t.has(Lt.keyField().canonicalString())||e.Ie.push(new yc(Lt.keyField(),s))}return e.Ie}function lr(r){const e=Ce(r);return e.Ee||(e.Ee=ZA(e,Qa(r))),e.Ee}function ZA(r,e){if(r.limitType==="F")return jy(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new yc(o.field,l)}));const t=r.endAt?new gc(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new gc(r.startAt.position,r.startAt.inclusive):null;return jy(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function of(r,e){const t=r.filters.concat([e]);return new _l(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function af(r,e,t){return new _l(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Lc(r,e){return Bf(lr(r),lr(e))&&r.limitType===e.limitType}function Yv(r){return`${Uf(lr(r))}|lt:${r.limitType}`}function vo(r){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>Kv(o))).join(", ")}]`),yl(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>Vo(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>Vo(o))).join(",")),`Target(${s})`})(lr(r))}; limitType=${r.limitType})`}function bc(r,e){return e.isFoundDocument()&&(function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):ye.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(r,e)&&(function(s,o){for(const l of Qa(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0})(r,e)&&(function(s,o){return!(s.startAt&&!(function(h,f,g){const y=Ly(h,f,g);return h.inclusive?y<=0:y<0})(s.startAt,Qa(s),o)||s.endAt&&!(function(h,f,g){const y=Ly(h,f,g);return h.inclusive?y>=0:y>0})(s.endAt,Qa(s),o))})(r,e)}function eC(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Jv(r){return(e,t)=>{let s=!1;for(const o of Qa(r)){const l=tC(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function tC(r,e,t){const s=r.field.isKeyField()?ye.comparator(e.key,t.key):(function(l,h,f){const g=h.data.field(l),y=f.data.field(l);return g!==null&&y!==null?Do(g,y):_e(42886)})(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return _e(19790,{direction:r.dir})}}class Ri{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Us(this.inner,((t,s)=>{for(const[o,l]of s)e(o,l)}))}isEmpty(){return Mv(this.inner)}size(){return this.innerSize}}const nC=new ot(ye.comparator);function Ur(){return nC}const Zv=new ot(ye.comparator);function qa(...r){let e=Zv;for(const t of r)e=e.insert(t.key,t);return e}function ew(r){let e=Zv;return r.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function _i(){return Xa()}function tw(){return Xa()}function Xa(){return new Ri((r=>r.toString()),((r,e)=>r.isEqual(e)))}const rC=new ot(ye.comparator),sC=new It(ye.comparator);function Le(...r){let e=sC;for(const t of r)e=e.add(t);return e}const iC=new It(Me);function oC(){return iC}function $f(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fc(e)?"-0":e}}function nw(r){return{integerValue:""+r}}function aC(r,e){return OA(e)?nw(e):$f(r,e)}class jc{constructor(){this._=void 0}}function lC(r,e,t){return r instanceof al?(function(o,l){const h={fields:{[jv]:{stringValue:bv},[Uv]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&jf(l)&&(l=Mc(l)),l&&(h.fields[Fv]=l),{mapValue:h}})(t,e):r instanceof ll?sw(r,e):r instanceof ul?iw(r,e):(function(o,l){const h=rw(o,l),f=Uy(h)+Uy(o.Ae);return nf(h)&&nf(o.Ae)?nw(f):$f(o.serializer,f)})(r,e)}function uC(r,e,t){return r instanceof ll?sw(r,e):r instanceof ul?iw(r,e):t}function rw(r,e){return r instanceof _c?(function(s){return nf(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class al extends jc{}class ll extends jc{constructor(e){super(),this.elements=e}}function sw(r,e){const t=ow(e);for(const s of r.elements)t.some((o=>fr(o,s)))||t.push(s);return{arrayValue:{values:t}}}class ul extends jc{constructor(e){super(),this.elements=e}}function iw(r,e){let t=ow(e);for(const s of r.elements)t=t.filter((o=>!fr(o,s)));return{arrayValue:{values:t}}}class _c extends jc{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Uy(r){return dt(r.integerValue||r.doubleValue)}function ow(r){return Ff(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class cC{constructor(e,t){this.field=e,this.transform=t}}function hC(r,e){return r.field.isEqual(e.field)&&(function(s,o){return s instanceof ll&&o instanceof ll||s instanceof ul&&o instanceof ul?xo(s.elements,o.elements,fr):s instanceof _c&&o instanceof _c?fr(s.Ae,o.Ae):s instanceof al&&o instanceof al})(r.transform,e.transform)}class dC{constructor(e,t){this.version=e,this.transformResults=t}}class bt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new bt}static exists(e){return new bt(void 0,e)}static updateTime(e){return new bt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function tc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Fc{}function aw(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Uc(r.key,bt.none()):new vl(r.key,r.data,bt.none());{const t=r.data,s=Qt.empty();let o=new It(Lt.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?s.delete(l):s.set(l,h),o=o.add(l)}return new Bs(r.key,s,new gn(o.toArray()),bt.none())}}function fC(r,e,t){r instanceof vl?(function(o,l,h){const f=o.value.clone(),g=zy(o.fieldTransforms,l,h.transformResults);f.setAll(g),l.convertToFoundDocument(h.version,f).setHasCommittedMutations()})(r,e,t):r instanceof Bs?(function(o,l,h){if(!tc(o.precondition,l))return void l.convertToUnknownDocument(h.version);const f=zy(o.fieldTransforms,l,h.transformResults),g=l.data;g.setAll(lw(o)),g.setAll(f),l.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(r,e,t):(function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function Ya(r,e,t,s){return r instanceof vl?(function(l,h,f,g){if(!tc(l.precondition,h))return f;const y=l.value.clone(),v=$y(l.fieldTransforms,g,h);return y.setAll(v),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null})(r,e,t,s):r instanceof Bs?(function(l,h,f,g){if(!tc(l.precondition,h))return f;const y=$y(l.fieldTransforms,g,h),v=h.data;return v.setAll(lw(l)),v.setAll(y),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(r,e,t,s):(function(l,h,f){return tc(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):f})(r,e,t)}function pC(r,e){let t=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),l=rw(s.transform,o||null);l!=null&&(t===null&&(t=Qt.empty()),t.set(s.field,l))}return t||null}function By(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&xo(s,o,((l,h)=>hC(l,h)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class vl extends Fc{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Bs extends Fc{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function lw(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}})),e}function zy(r,e,t){const s=new Map;ze(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let o=0;o<t.length;o++){const l=r[o],h=l.transform,f=e.data.field(l.field);s.set(l.field,uC(h,f,t[o]))}return s}function $y(r,e,t){const s=new Map;for(const o of r){const l=o.transform,h=t.data.field(o.field);s.set(o.field,lC(l,h,e))}return s}class Uc extends Fc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class uw extends Fc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class mC{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&fC(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Ya(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Ya(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=tw();return this.mutations.forEach((o=>{const l=e.get(o.key),h=l.overlayedDocument;let f=this.applyToLocalView(h,l.mutatedFields);f=t.has(o.key)?null:f;const g=aw(h,f);g!==null&&s.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(Te.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Le())}isEqual(e){return this.batchId===e.batchId&&xo(this.mutations,e.mutations,((t,s)=>By(t,s)))&&xo(this.baseMutations,e.baseMutations,((t,s)=>By(t,s)))}}class qf{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){ze(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return rC})();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,s[h].version);return new qf(e,t,s,o)}}class gC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class yC{constructor(e,t){this.count=e,this.unchangedNames=t}}var _t,Be;function cw(r){switch(r){case H.OK:return _e(64938);case H.CANCELLED:case H.UNKNOWN:case H.DEADLINE_EXCEEDED:case H.RESOURCE_EXHAUSTED:case H.INTERNAL:case H.UNAVAILABLE:case H.UNAUTHENTICATED:return!1;case H.INVALID_ARGUMENT:case H.NOT_FOUND:case H.ALREADY_EXISTS:case H.PERMISSION_DENIED:case H.FAILED_PRECONDITION:case H.ABORTED:case H.OUT_OF_RANGE:case H.UNIMPLEMENTED:case H.DATA_LOSS:return!0;default:return _e(15467,{code:r})}}function hw(r){if(r===void 0)return jr("GRPC error has no .code"),H.UNKNOWN;switch(r){case _t.OK:return H.OK;case _t.CANCELLED:return H.CANCELLED;case _t.UNKNOWN:return H.UNKNOWN;case _t.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case _t.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case _t.INTERNAL:return H.INTERNAL;case _t.UNAVAILABLE:return H.UNAVAILABLE;case _t.UNAUTHENTICATED:return H.UNAUTHENTICATED;case _t.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case _t.NOT_FOUND:return H.NOT_FOUND;case _t.ALREADY_EXISTS:return H.ALREADY_EXISTS;case _t.PERMISSION_DENIED:return H.PERMISSION_DENIED;case _t.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case _t.ABORTED:return H.ABORTED;case _t.OUT_OF_RANGE:return H.OUT_OF_RANGE;case _t.UNIMPLEMENTED:return H.UNIMPLEMENTED;case _t.DATA_LOSS:return H.DATA_LOSS;default:return _e(39323,{code:r})}}(Be=_t||(_t={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";function _C(){return new TextEncoder}const vC=new Ns([4294967295,4294967295],0);function qy(r){const e=_C().encode(r),t=new Sv;return t.update(e),new Uint8Array(t.digest())}function Wy(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ns([t,s],0),new Ns([o,l],0)]}class Wf{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Wa(`Invalid padding: ${t}`);if(s<0)throw new Wa(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Wa(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Wa(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ns.fromNumber(this.ge)}ye(e,t,s){let o=e.add(t.multiply(Ns.fromNumber(s)));return o.compare(vC)===1&&(o=new Ns([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=qy(e),[s,o]=Wy(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(s,o,l);if(!this.we(h))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new Wf(l,o,t);return s.forEach((f=>h.insert(f))),h}insert(e){if(this.ge===0)return;const t=qy(e),[s,o]=Wy(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(s,o,l);this.Se(h)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Wa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Bc{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,wl.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Bc(Te.min(),o,new ot(Me),Ur(),Le())}}class wl{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new wl(s,t,Le(),Le(),Le())}}class nc{constructor(e,t,s,o){this.be=e,this.removedTargetIds=t,this.key=s,this.De=o}}class dw{constructor(e,t){this.targetId=e,this.Ce=t}}class fw{constructor(e,t,s=jt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class Hy{constructor(){this.ve=0,this.Fe=Gy(),this.Me=jt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Le(),t=Le(),s=Le();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:_e(38017,{changeType:l})}})),new wl(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=Gy()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ze(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class wC{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ur(),this.Je=Hu(),this.He=Hu(),this.Ye=new ot(Me)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:_e(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,s=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(sf(l))if(s===0){const h=new ye(l.path);this.et(t,h,Nt.newNoDocument(h,Te.min()))}else ze(s===1,20013,{expectedCount:s});else{const h=this._t(t);if(h!==s){const f=this.ut(e),g=f?this.ct(f,e,h):1;if(g!==0){this.it(t);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let h,f;try{h=Ms(s).toUint8Array()}catch(g){if(g instanceof Lv)return No("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{f=new Wf(h,o,l)}catch(g){return No(g instanceof Wa?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return f.ge===0?null:f}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let o=0;return s.forEach((l=>{const h=this.Ge.ht(),f=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,h)=>{const f=this.ot(h);if(f){if(l.current&&sf(f.target)){const g=new ye(f.target.path);this.It(g).has(h)||this.Et(h,g)||this.et(h,g,Nt.newNoDocument(g,e))}l.Be&&(t.set(h,l.ke()),l.qe())}}));let s=Le();this.He.forEach(((l,h)=>{let f=!0;h.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(s=s.add(l))})),this.je.forEach(((l,h)=>h.setReadTime(e)));const o=new Bc(e,t,this.Ye,this.je,s);return this.je=Ur(),this.Je=Hu(),this.He=Hu(),this.Ye=new ot(Me),o}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Hy,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new It(Me),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new It(Me),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ue("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Hy),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Hu(){return new ot(ye.comparator)}function Gy(){return new ot(ye.comparator)}const EC={asc:"ASCENDING",desc:"DESCENDING"},TC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},IC={and:"AND",or:"OR"};class SC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function lf(r,e){return r.useProto3Json||yl(e)?e:{value:e}}function vc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pw(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function AC(r,e){return vc(r,e.toTimestamp())}function yn(r){return ze(!!r,49232),Te.fromTimestamp((function(t){const s=Os(t);return new tt(s.seconds,s.nanos)})(r))}function Hf(r,e){return uf(r,e).canonicalString()}function uf(r,e){const t=(function(o){return new Qe(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function mw(r){const e=Qe.fromString(r);return ze(Ew(e),10190,{key:e.toString()}),e}function wc(r,e){return Hf(r.databaseId,e.path)}function Ja(r,e){const t=mw(e);if(t.get(1)!==r.databaseId.projectId)throw new oe(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new oe(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new ye(yw(t))}function gw(r,e){return Hf(r.databaseId,e)}function CC(r){const e=mw(r);return e.length===4?Qe.emptyPath():yw(e)}function cf(r){return new Qe(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function yw(r){return ze(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Ky(r,e,t){return{name:wc(r,e),fields:t.value.mapValue.fields}}function RC(r,e){return"found"in e?(function(s,o){ze(!!o.found,43571),o.found.name,o.found.updateTime;const l=Ja(s,o.found.name),h=yn(o.found.updateTime),f=o.found.createTime?yn(o.found.createTime):Te.min(),g=new Qt({mapValue:{fields:o.found.fields}});return Nt.newFoundDocument(l,h,f,g)})(r,e):"missing"in e?(function(s,o){ze(!!o.missing,3894),ze(!!o.readTime,22933);const l=Ja(s,o.missing),h=yn(o.readTime);return Nt.newNoDocument(l,h)})(r,e):_e(7234,{result:e})}function PC(r,e){let t;if("targetChange"in e){e.targetChange;const s=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:_e(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(y,v){return y.useProto3Json?(ze(v===void 0||typeof v=="string",58123),jt.fromBase64String(v||"")):(ze(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),jt.fromUint8Array(v||new Uint8Array))})(r,e.targetChange.resumeToken),h=e.targetChange.cause,f=h&&(function(y){const v=y.code===void 0?H.UNKNOWN:hw(y.code);return new oe(v,y.message||"")})(h);t=new fw(s,o,l,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Ja(r,s.document.name),l=yn(s.document.updateTime),h=s.document.createTime?yn(s.document.createTime):Te.min(),f=new Qt({mapValue:{fields:s.document.fields}}),g=Nt.newFoundDocument(o,l,h,f),y=s.targetIds||[],v=s.removedTargetIds||[];t=new nc(y,v,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Ja(r,s.document),l=s.readTime?yn(s.readTime):Te.min(),h=Nt.newNoDocument(o,l),f=s.removedTargetIds||[];t=new nc([],f,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Ja(r,s.document),l=s.removedTargetIds||[];t=new nc([],l,o,null)}else{if(!("filter"in e))return _e(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,h=new yC(o,l),f=s.targetId;t=new dw(f,h)}}return t}function _w(r,e){let t;if(e instanceof vl)t={update:Ky(r,e.key,e.value)};else if(e instanceof Uc)t={delete:wc(r,e.key)};else if(e instanceof Bs)t={update:Ky(r,e.key,e.data),updateMask:bC(e.fieldMask)};else{if(!(e instanceof uw))return _e(16599,{Vt:e.type});t={verify:wc(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,h){const f=h.transform;if(f instanceof al)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof ll)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof ul)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof _c)return{fieldPath:h.field.canonicalString(),increment:f.Ae};throw _e(20930,{transform:h.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:AC(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:_e(27497)})(r,e.precondition)),t}function kC(r,e){return r&&r.length>0?(ze(e!==void 0,14353),r.map((t=>(function(o,l){let h=o.updateTime?yn(o.updateTime):yn(l);return h.isEqual(Te.min())&&(h=yn(l)),new dC(h,o.transformResults||[])})(t,e)))):[]}function NC(r,e){return{documents:[gw(r,e.path)]}}function xC(r,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=gw(r,o);const l=(function(y){if(y.length!==0)return ww(Un.create(y,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const h=(function(y){if(y.length!==0)return y.map((v=>(function(I){return{field:wo(I.field),direction:OC(I.dir)}})(v)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const f=lf(r,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:o}}function DC(r){let e=CC(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){ze(s===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(E){const I=vw(E);return I instanceof Un&&Hv(I)?I.getFilters():[I]})(t.where));let h=[];t.orderBy&&(h=(function(E){return E.map((I=>(function(W){return new yc(Eo(W.field),(function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(W.direction))})(I)))})(t.orderBy));let f=null;t.limit&&(f=(function(E){let I;return I=typeof E=="object"?E.value:E,yl(I)?null:I})(t.limit));let g=null;t.startAt&&(g=(function(E){const I=!!E.before,M=E.values||[];return new gc(M,I)})(t.startAt));let y=null;return t.endAt&&(y=(function(E){const I=!E.before,M=E.values||[];return new gc(M,I)})(t.endAt)),JA(e,o,h,l,f,"F",g,y)}function VC(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function vw(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Eo(t.unaryFilter.field);return vt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Eo(t.unaryFilter.field);return vt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Eo(t.unaryFilter.field);return vt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Eo(t.unaryFilter.field);return vt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _e(61313);default:return _e(60726)}})(r):r.fieldFilter!==void 0?(function(t){return vt.create(Eo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _e(58110);default:return _e(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return Un.create(t.compositeFilter.filters.map((s=>vw(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return _e(1026)}})(t.compositeFilter.op))})(r):_e(30097,{filter:r})}function OC(r){return EC[r]}function MC(r){return TC[r]}function LC(r){return IC[r]}function wo(r){return{fieldPath:r.canonicalString()}}function Eo(r){return Lt.fromServerFormat(r.fieldPath)}function ww(r){return r instanceof vt?(function(t){if(t.op==="=="){if(My(t.value))return{unaryFilter:{field:wo(t.field),op:"IS_NAN"}};if(Oy(t.value))return{unaryFilter:{field:wo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(My(t.value))return{unaryFilter:{field:wo(t.field),op:"IS_NOT_NAN"}};if(Oy(t.value))return{unaryFilter:{field:wo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wo(t.field),op:MC(t.op),value:t.value}}})(r):r instanceof Un?(function(t){const s=t.getFilters().map((o=>ww(o)));return s.length===1?s[0]:{compositeFilter:{op:LC(t.op),filters:s}}})(r):_e(54877,{filter:r})}function bC(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Ew(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}class Ss{constructor(e,t,s,o,l=Te.min(),h=Te.min(),f=jt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new Ss(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ss(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class jC{constructor(e){this.yt=e}}function FC(r){const e=DC({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?af(e,e.limit,"L"):e}class UC{constructor(){this.Cn=new BC}addToCollectionParentIndex(e,t){return this.Cn.add(t),G.resolve()}getCollectionParents(e,t){return G.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return G.resolve()}deleteFieldIndex(e,t){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,t){return G.resolve()}getDocumentsMatchingTarget(e,t){return G.resolve(null)}getIndexType(e,t){return G.resolve(0)}getFieldIndexes(e,t){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,t){return G.resolve(Vs.min())}getMinOffsetFromCollectionGroup(e,t){return G.resolve(Vs.min())}updateCollectionGroup(e,t,s){return G.resolve()}updateIndexEntries(e,t){return G.resolve()}}class BC{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new It(Qe.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new It(Qe.comparator)).toArray()}}const Qy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Tw=41943040;class nn{static withCacheSize(e){return new nn(e,nn.DEFAULT_COLLECTION_PERCENTILE,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}nn.DEFAULT_COLLECTION_PERCENTILE=10,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nn.DEFAULT=new nn(Tw,nn.DEFAULT_COLLECTION_PERCENTILE,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nn.DISABLED=new nn(-1,0,0);class Oo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Oo(0)}static cr(){return new Oo(-1)}}const Xy="LruGarbageCollector",zC=1048576;function Yy([r,e],[t,s]){const o=Me(r,t);return o===0?Me(e,s):o}class $C{constructor(e){this.Ir=e,this.buffer=new It(Yy),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Yy(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class qC{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ue(Xy,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){$o(t)?ue(Xy,"Ignoring IndexedDB error during garbage collection: ",t):await zo(t)}await this.Vr(3e5)}))}}class WC{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return G.resolve(Oc.ce);const s=new $C(t);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(Qy)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Qy):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,o,l,h,f,g,y;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,h=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(s=E,f=Date.now(),this.removeTargets(e,s,t)))).next((E=>(l=E,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((E=>(y=Date.now(),_o()<=Oe.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-v}ms
	Determined least recently used ${o} in `+(f-h)+`ms
	Removed ${l} targets in `+(g-f)+`ms
	Removed ${E} documents in `+(y-g)+`ms
Total Duration: ${y-v}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:E}))))}}function HC(r,e){return new WC(r,e)}class GC{constructor(){this.changes=new Ri((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Nt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?G.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class KC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class QC{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&Ya(s.mutation,o,gn.empty(),tt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,Le()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=Le()){const o=_i();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((l=>{let h=qa();return l.forEach(((f,g)=>{h=h.insert(f,g.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const s=_i();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,Le())))}populateOverlays(e,t,s){const o=[];return s.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((h,f)=>{t.set(h,f)}))}))}computeViews(e,t,s,o){let l=Ur();const h=Xa(),f=(function(){return Xa()})();return t.forEach(((g,y)=>{const v=s.get(y.key);o.has(y.key)&&(v===void 0||v.mutation instanceof Bs)?l=l.insert(y.key,y):v!==void 0?(h.set(y.key,v.mutation.getFieldMask()),Ya(v.mutation,y,v.mutation.getFieldMask(),tt.now())):h.set(y.key,gn.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((y,v)=>h.set(y,v))),t.forEach(((y,v)=>f.set(y,new KC(v,h.get(y)??null)))),f)))}recalculateAndSaveOverlays(e,t){const s=Xa();let o=new ot(((h,f)=>h-f)),l=Le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const f of h)f.keys().forEach((g=>{const y=t.get(g);if(y===null)return;let v=s.get(g)||gn.empty();v=f.applyToLocalView(y,v),s.set(g,v);const E=(o.get(f.batchId)||Le()).add(g);o=o.insert(f.batchId,E)}))})).next((()=>{const h=[],f=o.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),y=g.key,v=g.value,E=tw();v.forEach((I=>{if(!l.has(I)){const M=aw(t.get(I),s.get(I));M!==null&&E.set(I,M),l=l.add(I)}})),h.push(this.documentOverlayCache.saveOverlays(e,y,E))}return G.waitFor(h)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return(function(h){return ye.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Xv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):G.resolve(_i());let f=rl,g=l;return h.next((y=>G.forEach(y,((v,E)=>(f<E.largestBatchId&&(f=E.largestBatchId),l.get(v)?G.resolve():this.remoteDocumentCache.getEntry(e,v).next((I=>{g=g.insert(v,I)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,g,y,Le()))).next((v=>({batchId:f,changes:ew(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ye(t)).next((s=>{let o=qa();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let h=qa();return this.indexManager.getCollectionParents(e,l).next((f=>G.forEach(f,(g=>{const y=(function(E,I){return new _l(I,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,s,o).next((v=>{v.forEach(((E,I)=>{h=h.insert(E,I)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o)))).next((h=>{l.forEach(((g,y)=>{const v=y.getKey();h.get(v)===null&&(h=h.insert(v,Nt.newInvalidDocument(v)))}));let f=qa();return h.forEach(((g,y)=>{const v=l.get(g);v!==void 0&&Ya(v.mutation,y,gn.empty(),tt.now()),bc(t,y)&&(f=f.insert(g,y))})),f}))}}class XC{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return G.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:yn(o.createTime)}})(t)),G.resolve()}getNamedQuery(e,t){return G.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:FC(o.bundledQuery),readTime:yn(o.readTime)}})(t)),G.resolve()}}class YC{constructor(){this.overlays=new ot(ye.comparator),this.qr=new Map}getOverlay(e,t){return G.resolve(this.overlays.get(t))}getOverlays(e,t){const s=_i();return G.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&s.set(o,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,l)=>{this.St(e,t,l)})),G.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),G.resolve()}getOverlaysForCollection(e,t,s){const o=_i(),l=t.length+1,h=new ye(t.child("")),f=this.overlays.getIteratorFrom(h);for(;f.hasNext();){const g=f.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&g.largestBatchId>s&&o.set(g.getKey(),g)}return G.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new ot(((y,v)=>y-v));const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>s){let v=l.get(y.largestBatchId);v===null&&(v=_i(),l=l.insert(y.largestBatchId,v)),v.set(y.getKey(),y)}}const f=_i(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,v)=>f.set(y,v))),!(f.size()>=o)););return G.resolve(f)}St(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new gC(t,s));let l=this.qr.get(t);l===void 0&&(l=Le(),this.qr.set(t,l)),this.qr.set(t,l.add(s.key))}}class JC{constructor(){this.sessionToken=jt.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,G.resolve()}}class Gf{constructor(){this.Qr=new It(kt.$r),this.Ur=new It(kt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new kt(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new kt(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new ye(new Qe([])),s=new kt(t,e),o=new kt(t,e+1),l=[];return this.Ur.forEachInRange([s,o],(h=>{this.Gr(h),l.push(h.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ye(new Qe([])),s=new kt(t,e),o=new kt(t,e+1);let l=Le();return this.Ur.forEachInRange([s,o],(h=>{l=l.add(h.key)})),l}containsKey(e){const t=new kt(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class kt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ye.comparator(e.key,t.key)||Me(e.Yr,t.Yr)}static Kr(e,t){return Me(e.Yr,t.Yr)||ye.comparator(e.key,t.key)}}class ZC{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new It(kt.$r)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new mC(l,t,s,o);this.mutationQueue.push(h);for(const f of o)this.Zr=this.Zr.add(new kt(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return G.resolve(h)}lookupMutationBatch(e,t){return G.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.ei(s),l=o<0?0:o;return G.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?bf:this.tr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new kt(t,0),o=new kt(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,o],(h=>{const f=this.Xr(h.Yr);l.push(f)})),G.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new It(Me);return t.forEach((o=>{const l=new kt(o,0),h=new kt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,h],(f=>{s=s.add(f.Yr)}))})),G.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;ye.isDocumentKey(l)||(l=l.child(""));const h=new kt(new ye(l),0);let f=new It(Me);return this.Zr.forEachWhile((g=>{const y=g.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(f=f.add(g.Yr)),!0)}),h),G.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){ze(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return G.forEach(t.mutations,(o=>{const l=new kt(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new kt(t,0),o=this.Zr.firstAfterOrEqual(s);return G.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class eR{constructor(e){this.ri=e,this.docs=(function(){return new ot(ye.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,h=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return G.resolve(s?s.document.mutableCopy():Nt.newInvalidDocument(t))}getEntries(e,t){let s=Ur();return t.forEach((o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():Nt.newInvalidDocument(o))})),G.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=Ur();const h=t.path,f=new ye(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:y,value:{document:v}}=g.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||NA(kA(v),s)<=0||(o.has(v.key)||bc(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return G.resolve(l)}getAllFromCollectionGroup(e,t,s,o){_e(9500)}ii(e,t){return G.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new tR(this)}getSize(e){return G.resolve(this.size)}}class tR extends GC{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),G.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class nR{constructor(e){this.persistence=e,this.si=new Ri((t=>Uf(t)),Bf),this.lastRemoteSnapshotVersion=Te.min(),this.highestTargetId=0,this.oi=0,this._i=new Gf,this.targetCount=0,this.ai=Oo.ur()}forEachTarget(e,t){return this.si.forEach(((s,o)=>t(o))),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),G.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Oo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,G.resolve()}updateTargetData(e,t){return this.Pr(t),G.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.si.forEach(((h,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.si.delete(h),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)})),G.waitFor(l).next((()=>o))}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return G.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),G.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((h=>{l.push(o.markPotentiallyOrphaned(e,h))})),G.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),G.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return G.resolve(s)}containsKey(e,t){return G.resolve(this._i.containsKey(t))}}class Iw{constructor(e,t){this.ui={},this.overlays={},this.ci=new Oc(0),this.li=!1,this.li=!0,this.hi=new JC,this.referenceDelegate=e(this),this.Pi=new nR(this),this.indexManager=new UC,this.remoteDocumentCache=(function(o){return new eR(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new jC(t),this.Ii=new XC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new YC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new ZC(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){ue("MemoryPersistence","Starting transaction:",e);const o=new rR(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ai(e,t){return G.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class rR extends DA{constructor(e){super(),this.currentSequenceNumber=e}}class Kf{constructor(e){this.persistence=e,this.Ri=new Gf,this.Vi=null}static mi(e){return new Kf(e)}get fi(){if(this.Vi)return this.Vi;throw _e(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),G.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),G.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),G.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.fi,(s=>{const o=ye.fromPath(s);return this.gi(e,o).next((l=>{l||t.removeEntry(o,Te.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return G.or([()=>G.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Ec{constructor(e,t){this.persistence=e,this.pi=new Ri((s=>MA(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=HC(this,t)}static mi(e,t){return new Ec(e,t)}Ei(){}di(e){return G.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return G.forEach(this.pi,((s,o)=>this.br(e,s,o).next((l=>l?G.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,(h=>this.br(e,h,t).next((f=>{f||(s++,l.removeEntry(h,Te.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),G.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),G.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),G.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Zu(e.data.value)),t}br(e,t,s){return G.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return G.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Qf{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=o}static As(e,t){let s=Le(),o=Le();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Qf(e,t.fromCache,s,o)}}class sR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class iR{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return JT()?8:VA(Ht())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.ys(e,t).next((h=>{l.result=h})).next((()=>{if(!l.result)return this.ws(e,t,o,s).next((h=>{l.result=h}))})).next((()=>{if(l.result)return;const h=new sR;return this.Ss(e,t,h).next((f=>{if(l.result=f,this.Vs)return this.bs(e,t,h,f.size)}))})).next((()=>l.result))}bs(e,t,s,o){return s.documentReadCount<this.fs?(_o()<=Oe.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",vo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),G.resolve()):(_o()<=Oe.DEBUG&&ue("QueryEngine","Query:",vo(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(_o()<=Oe.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",vo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,lr(t))):G.resolve())}ys(e,t){if(Fy(t))return G.resolve(null);let s=lr(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=af(t,null,"F"),s=lr(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const h=Le(...l);return this.ps.getDocuments(e,h).next((f=>this.indexManager.getMinOffset(e,s).next((g=>{const y=this.Ds(t,f);return this.Cs(t,y,h,g.readTime)?this.ys(e,af(t,null,"F")):this.vs(e,y,t,g)}))))})))))}ws(e,t,s,o){return Fy(t)||o.isEqual(Te.min())?G.resolve(null):this.ps.getDocuments(e,s).next((l=>{const h=this.Ds(t,l);return this.Cs(t,h,s,o)?G.resolve(null):(_o()<=Oe.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),vo(t)),this.vs(e,h,t,PA(o,rl)).next((f=>f)))}))}Ds(e,t){let s=new It(Jv(e));return t.forEach(((o,l)=>{bc(e,l)&&(s=s.add(l))})),s}Cs(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,s){return _o()<=Oe.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",vo(t)),this.ps.getDocumentsMatchingQuery(e,t,Vs.min(),s)}vs(e,t,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((l=>(t.forEach((h=>{l=l.insert(h.key,h)})),l)))}}const Xf="LocalStore",oR=3e8;class aR{constructor(e,t,s,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new ot(Me),this.xs=new Ri((l=>Uf(l)),Bf),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new QC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function lR(r,e,t,s){return new aR(r,e,t,s)}async function Sw(r,e){const t=Ce(r);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((l=>(o=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const h=[],f=[];let g=Le();for(const y of o){h.push(y.batchId);for(const v of y.mutations)g=g.add(v.key)}for(const y of l){f.push(y.batchId);for(const v of y.mutations)g=g.add(v.key)}return t.localDocuments.getDocuments(s,g).next((y=>({Ls:y,removedBatchIds:h,addedBatchIds:f})))}))}))}function uR(r,e){const t=Ce(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,g,y,v){const E=y.batch,I=E.keys();let M=G.resolve();return I.forEach((W=>{M=M.next((()=>v.getEntry(g,W))).next((q=>{const F=y.docVersions.get(W);ze(F!==null,48541),q.version.compareTo(F)<0&&(E.applyToRemoteDocument(q,y),q.isValidDocument()&&(q.setReadTime(y.commitVersion),v.addEntry(q)))}))})),M.next((()=>f.mutationQueue.removeMutationBatch(g,E)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(f){let g=Le();for(let y=0;y<f.mutationResults.length;++y)f.mutationResults[y].transformResults.length>0&&(g=g.add(f.batch.mutations[y].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function Aw(r){const e=Ce(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function cR(r,e){const t=Ce(r),s=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const h=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const f=[];e.targetChanges.forEach(((v,E)=>{const I=o.get(E);if(!I)return;f.push(t.Pi.removeMatchingKeys(l,v.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(l,v.addedDocuments,E))));let M=I.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?M=M.withResumeToken(jt.EMPTY_BYTE_STRING,Te.min()).withLastLimboFreeSnapshotVersion(Te.min()):v.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(v.resumeToken,s)),o=o.insert(E,M),(function(q,F,K){return q.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=oR?!0:K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0})(I,M,v)&&f.push(t.Pi.updateTargetData(l,M))}));let g=Ur(),y=Le();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),f.push(hR(l,h,e.documentUpdates).next((v=>{g=v.ks,y=v.qs}))),!s.isEqual(Te.min())){const v=t.Pi.getLastRemoteSnapshotVersion(l).next((E=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));f.push(v)}return G.waitFor(f).next((()=>h.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,y))).next((()=>g))})).then((l=>(t.Ms=o,l)))}function hR(r,e,t){let s=Le(),o=Le();return t.forEach((l=>s=s.add(l))),e.getEntries(r,s).next((l=>{let h=Ur();return t.forEach(((f,g)=>{const y=l.get(f);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(f)),g.isNoDocument()&&g.version.isEqual(Te.min())?(e.removeEntry(f,g.readTime),h=h.insert(f,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),h=h.insert(f,g)):ue(Xf,"Ignoring outdated watch update for ",f,". Current version:",y.version," Watch version:",g.version)})),{ks:h,qs:o}}))}function dR(r,e){const t=Ce(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=bf),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function fR(r,e){const t=Ce(r);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.Pi.getTargetData(s,e).next((l=>l?(o=l,G.resolve(o)):t.Pi.allocateTargetId(s).next((h=>(o=new Ss(e,h,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function hf(r,e,t){const s=Ce(r),o=s.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(h=>s.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!$o(h))throw h;ue(Xf,`Failed to update sequence numbers for target ${e}: ${h}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function Jy(r,e,t){const s=Ce(r);let o=Te.min(),l=Le();return s.persistence.runTransaction("Execute query","readwrite",(h=>(function(g,y,v){const E=Ce(g),I=E.xs.get(v);return I!==void 0?G.resolve(E.Ms.get(I)):E.Pi.getTargetData(y,v)})(s,h,lr(e)).next((f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(h,f.targetId).next((g=>{l=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(h,e,t?o:Te.min(),t?l:Le()))).next((f=>(pR(s,eC(e),f),{documents:f,Qs:l})))))}function pR(r,e,t){let s=r.Os.get(e)||Te.min();t.forEach(((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),r.Os.set(e,s)}class Zy{constructor(){this.activeTargetIds=oC()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class mR{constructor(){this.Mo=new Zy,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Zy,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class gR{Oo(e){}shutdown(){}}const e_="ConnectivityMonitor";class t_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ue(e_,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ue(e_,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Gu=null;function df(){return Gu===null?Gu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Gu++,"0x"+Gu.toString(16)}const Md="RestConnection",yR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class _R{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===pc?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,t,s,o,l){const h=df(),f=this.zo(e,t.toUriEncodedString());ue(Md,`Sending RPC '${e}' ${h}:`,f,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,l);const{host:y}=new URL(f),v=jo(y);return this.Jo(e,f,g,s,v).then((E=>(ue(Md,`Received RPC '${e}' ${h}: `,E),E)),(E=>{throw No(Md,`RPC '${e}' ${h} failed with error: `,E,"url: ",f,"request:",s),E}))}Ho(e,t,s,o,l,h){return this.Go(e,t,s,o,l)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Bo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),s&&s.headers.forEach(((o,l)=>e[l]=o))}zo(e,t){const s=yR[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}class vR{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const qt="WebChannelConnection";class wR extends _R{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,o,l){const h=df();return new Promise(((f,g)=>{const y=new Av;y.setWithCredentials(!0),y.listenOnce(Cv.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Ju.NO_ERROR:const E=y.getResponseJson();ue(qt,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(E)),f(E);break;case Ju.TIMEOUT:ue(qt,`RPC '${e}' ${h} timed out`),g(new oe(H.DEADLINE_EXCEEDED,"Request time out"));break;case Ju.HTTP_ERROR:const I=y.getStatus();if(ue(qt,`RPC '${e}' ${h} failed with status:`,I,"response text:",y.getResponseText()),I>0){let M=y.getResponseJson();Array.isArray(M)&&(M=M[0]);const W=M?.error;if(W&&W.status&&W.message){const q=(function(K){const re=K.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(re)>=0?re:H.UNKNOWN})(W.status);g(new oe(q,W.message))}else g(new oe(H.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new oe(H.UNAVAILABLE,"Connection failed."));break;default:_e(9055,{l_:e,streamId:h,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{ue(qt,`RPC '${e}' ${h} completed.`)}}));const v=JSON.stringify(o);ue(qt,`RPC '${e}' ${h} sending request:`,o),y.send(t,"POST",v,s,15)}))}T_(e,t,s){const o=df(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=kv(),f=Pv(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const v=l.join("");ue(qt,`Creating RPC '${e}' stream ${o}: ${v}`,g);const E=h.createWebChannel(v,g);this.I_(E);let I=!1,M=!1;const W=new vR({Yo:F=>{M?ue(qt,`Not sending because RPC '${e}' stream ${o} is closed:`,F):(I||(ue(qt,`Opening RPC '${e}' stream ${o} transport.`),E.open(),I=!0),ue(qt,`RPC '${e}' stream ${o} sending:`,F),E.send(F))},Zo:()=>E.close()}),q=(F,K,re)=>{F.listen(K,(b=>{try{re(b)}catch(ee){setTimeout((()=>{throw ee}),0)}}))};return q(E,$a.EventType.OPEN,(()=>{M||(ue(qt,`RPC '${e}' stream ${o} transport opened.`),W.o_())})),q(E,$a.EventType.CLOSE,(()=>{M||(M=!0,ue(qt,`RPC '${e}' stream ${o} transport closed`),W.a_(),this.E_(E))})),q(E,$a.EventType.ERROR,(F=>{M||(M=!0,No(qt,`RPC '${e}' stream ${o} transport errored. Name:`,F.name,"Message:",F.message),W.a_(new oe(H.UNAVAILABLE,"The operation could not be completed")))})),q(E,$a.EventType.MESSAGE,(F=>{if(!M){const K=F.data[0];ze(!!K,16349);const re=K,b=re?.error||re[0]?.error;if(b){ue(qt,`RPC '${e}' stream ${o} received error:`,b);const ee=b.status;let se=(function(S){const k=_t[S];if(k!==void 0)return hw(k)})(ee),J=b.message;se===void 0&&(se=H.INTERNAL,J="Unknown error status: "+ee+" with message "+b.message),M=!0,W.a_(new oe(se,J)),E.close()}else ue(qt,`RPC '${e}' stream ${o} received:`,K),W.u_(K)}})),q(f,Rv.STAT_EVENT,(F=>{F.stat===Zd.PROXY?ue(qt,`RPC '${e}' stream ${o} detected buffering proxy`):F.stat===Zd.NOPROXY&&ue(qt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{W.__()}),0),W}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Ld(){return typeof document<"u"?document:null}function zc(r){return new SC(r,!0)}class Yf{constructor(e,t,s=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-s);o>0&&ue("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const n_="PersistentStream";class Cw{constructor(e,t,s,o,l,h,f,g){this.Mi=e,this.S_=s,this.b_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Yf(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===H.RESOURCE_EXHAUSTED?(jr(t.toString()),jr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===t&&this.G_(s,o)}),(s=>{e((()=>{const o=new oe(H.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ue(n_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ue(n_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class ER extends Cw{constructor(e,t,s,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,h),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=PC(this.serializer,e),s=(function(l){if(!("targetChange"in l))return Te.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Te.min():h.readTime?yn(h.readTime):Te.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=cf(this.serializer),t.addTarget=(function(l,h){let f;const g=h.target;if(f=sf(g)?{documents:NC(l,g)}:{query:xC(l,g).ft},f.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){f.resumeToken=pw(l,h.resumeToken);const y=lf(l,h.expectedCount);y!==null&&(f.expectedCount=y)}else if(h.snapshotVersion.compareTo(Te.min())>0){f.readTime=vc(l,h.snapshotVersion.toTimestamp());const y=lf(l,h.expectedCount);y!==null&&(f.expectedCount=y)}return f})(this.serializer,e);const s=VC(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=cf(this.serializer),t.removeTarget=e,this.q_(t)}}class TR extends Cw{constructor(e,t,s,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,h),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ze(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ze(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ze(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=kC(e.writeResults,e.commitTime),s=yn(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=cf(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>_w(this.serializer,s)))};this.q_(t)}}class IR{}class SR extends IR{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new oe(H.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Go(e,uf(t,s),o,l,h))).catch((l=>{throw l.name==="FirebaseError"?(l.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new oe(H.UNKNOWN,l.toString())}))}Ho(e,t,s,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,f])=>this.connection.Ho(e,uf(t,s),o,h,f,l))).catch((h=>{throw h.name==="FirebaseError"?(h.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new oe(H.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class AR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(jr(t),this.aa=!1):ue("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Si="RemoteStore";class CR{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((h=>{s.enqueueAndForget((async()=>{Pi(this)&&(ue(Si,"Restarting streams for network reachability change."),await(async function(g){const y=Ce(g);y.Ea.add(4),await El(y),y.Ra.set("Unknown"),y.Ea.delete(4),await $c(y)})(this))}))})),this.Ra=new AR(s,o)}}async function $c(r){if(Pi(r))for(const e of r.da)await e(!0)}async function El(r){for(const e of r.da)await e(!1)}function Rw(r,e){const t=Ce(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),tp(t)?ep(t):qo(t).O_()&&Zf(t,e))}function Jf(r,e){const t=Ce(r),s=qo(t);t.Ia.delete(e),s.O_()&&Pw(t,e),t.Ia.size===0&&(s.O_()?s.L_():Pi(t)&&t.Ra.set("Unknown"))}function Zf(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Te.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}qo(r).Y_(e)}function Pw(r,e){r.Va.Ue(e),qo(r).Z_(e)}function ep(r){r.Va=new wC({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),qo(r).start(),r.Ra.ua()}function tp(r){return Pi(r)&&!qo(r).x_()&&r.Ia.size>0}function Pi(r){return Ce(r).Ea.size===0}function kw(r){r.Va=void 0}async function RR(r){r.Ra.set("Online")}async function PR(r){r.Ia.forEach(((e,t)=>{Zf(r,e)}))}async function kR(r,e){kw(r),tp(r)?(r.Ra.ha(e),ep(r)):r.Ra.set("Unknown")}async function NR(r,e,t){if(r.Ra.set("Online"),e instanceof fw&&e.state===2&&e.cause)try{await(async function(o,l){const h=l.cause;for(const f of l.targetIds)o.Ia.has(f)&&(await o.remoteSyncer.rejectListen(f,h),o.Ia.delete(f),o.Va.removeTarget(f))})(r,e)}catch(s){ue(Si,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Tc(r,s)}else if(e instanceof nc?r.Va.Ze(e):e instanceof dw?r.Va.st(e):r.Va.tt(e),!t.isEqual(Te.min()))try{const s=await Aw(r.localStore);t.compareTo(s)>=0&&await(function(l,h){const f=l.Va.Tt(h);return f.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const v=l.Ia.get(y);v&&l.Ia.set(y,v.withResumeToken(g.resumeToken,h))}})),f.targetMismatches.forEach(((g,y)=>{const v=l.Ia.get(g);if(!v)return;l.Ia.set(g,v.withResumeToken(jt.EMPTY_BYTE_STRING,v.snapshotVersion)),Pw(l,g);const E=new Ss(v.target,g,y,v.sequenceNumber);Zf(l,E)})),l.remoteSyncer.applyRemoteEvent(f)})(r,t)}catch(s){ue(Si,"Failed to raise snapshot:",s),await Tc(r,s)}}async function Tc(r,e,t){if(!$o(e))throw e;r.Ea.add(1),await El(r),r.Ra.set("Offline"),t||(t=()=>Aw(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ue(Si,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await $c(r)}))}function Nw(r,e){return e().catch((t=>Tc(r,t,e)))}async function qc(r){const e=Ce(r),t=bs(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:bf;for(;xR(e);)try{const o=await dR(e.localStore,s);if(o===null){e.Ta.length===0&&t.L_();break}s=o.batchId,DR(e,o)}catch(o){await Tc(e,o)}xw(e)&&Dw(e)}function xR(r){return Pi(r)&&r.Ta.length<10}function DR(r,e){r.Ta.push(e);const t=bs(r);t.O_()&&t.X_&&t.ea(e.mutations)}function xw(r){return Pi(r)&&!bs(r).x_()&&r.Ta.length>0}function Dw(r){bs(r).start()}async function VR(r){bs(r).ra()}async function OR(r){const e=bs(r);for(const t of r.Ta)e.ea(t.mutations)}async function MR(r,e,t){const s=r.Ta.shift(),o=qf.from(s,e,t);await Nw(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await qc(r)}async function LR(r,e){e&&bs(r).X_&&await(async function(s,o){if((function(h){return cw(h)&&h!==H.ABORTED})(o.code)){const l=s.Ta.shift();bs(s).B_(),await Nw(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o))),await qc(s)}})(r,e),xw(r)&&Dw(r)}async function r_(r,e){const t=Ce(r);t.asyncQueue.verifyOperationInProgress(),ue(Si,"RemoteStore received new credentials");const s=Pi(t);t.Ea.add(3),await El(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await $c(t)}async function bR(r,e){const t=Ce(r);e?(t.Ea.delete(2),await $c(t)):e||(t.Ea.add(2),await El(t),t.Ra.set("Unknown"))}function qo(r){return r.ma||(r.ma=(function(t,s,o){const l=Ce(t);return l.sa(),new ER(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Xo:RR.bind(null,r),t_:PR.bind(null,r),r_:kR.bind(null,r),H_:NR.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),tp(r)?ep(r):r.Ra.set("Unknown")):(await r.ma.stop(),kw(r))}))),r.ma}function bs(r){return r.fa||(r.fa=(function(t,s,o){const l=Ce(t);return l.sa(),new TR(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:VR.bind(null,r),r_:LR.bind(null,r),ta:OR.bind(null,r),na:MR.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await qc(r)):(await r.fa.stop(),r.Ta.length>0&&(ue(Si,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class np{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new ar,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const h=Date.now()+s,f=new np(e,t,h,o,l);return f.start(s),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new oe(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rp(r,e){if(jr("AsyncQueue",`${e}: ${r}`),$o(r))return new oe(H.UNAVAILABLE,`${e}: ${r}`);throw r}class Co{static emptySet(e){return new Co(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||ye.comparator(t.key,s.key):(t,s)=>ye.comparator(t.key,s.key),this.keyedMap=qa(),this.sortedSet=new ot(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Co)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Co;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class s_{constructor(){this.ga=new ot(ye.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):_e(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class Mo{constructor(e,t,s,o,l,h,f,g,y){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,t,s,o,l){const h=[];return t.forEach((f=>{h.push({type:0,doc:f})})),new Mo(e,t,Co.emptySet(t),h,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}class jR{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class FR{constructor(){this.queries=i_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const o=Ce(t),l=o.queries;o.queries=i_(),l.forEach(((h,f)=>{for(const g of f.Sa)g.onError(s)}))})(this,new oe(H.ABORTED,"Firestore shutting down"))}}function i_(){return new Ri((r=>Yv(r)),Lc)}async function Vw(r,e){const t=Ce(r);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.ba()&&e.Da()&&(s=2):(l=new jR,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const f=rp(h,`Initialization of query '${vo(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&sp(t)}async function Ow(r,e){const t=Ce(r),s=e.query;let o=3;const l=t.queries.get(s);if(l){const h=l.Sa.indexOf(e);h>=0&&(l.Sa.splice(h,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function UR(r,e){const t=Ce(r);let s=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const f of h.Sa)f.Fa(o)&&(s=!0);h.wa=o}}s&&sp(t)}function BR(r,e,t){const s=Ce(r),o=s.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);s.queries.delete(e)}function sp(r){r.Ca.forEach((e=>{e.next()}))}var ff,o_;(o_=ff||(ff={})).Ma="default",o_.Cache="cache";class Mw{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Mo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Mo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ff.Cache}}class Lw{constructor(e){this.key=e}}class bw{constructor(e){this.key=e}}class zR{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Le(),this.mutatedKeys=Le(),this.eu=Jv(e),this.tu=new Co(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new s_,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,f=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,E)=>{const I=o.get(v),M=bc(this.query,E)?E:null,W=!!I&&this.mutatedKeys.has(I.key),q=!!M&&(M.hasLocalMutations||this.mutatedKeys.has(M.key)&&M.hasCommittedMutations);let F=!1;I&&M?I.data.isEqual(M.data)?W!==q&&(s.track({type:3,doc:M}),F=!0):this.su(I,M)||(s.track({type:2,doc:M}),F=!0,(g&&this.eu(M,g)>0||y&&this.eu(M,y)<0)&&(f=!0)):!I&&M?(s.track({type:0,doc:M}),F=!0):I&&!M&&(s.track({type:1,doc:I}),F=!0,(g||y)&&(f=!0)),F&&(M?(h=h.add(M),l=q?l.add(v):l.delete(v)):(h=h.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const v=this.query.limitType==="F"?h.last():h.first();h=h.delete(v.key),l=l.delete(v.key),s.track({type:1,doc:v})}return{tu:h,iu:s,Cs:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((v,E)=>(function(M,W){const q=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e(20277,{Rt:F})}};return q(M)-q(W)})(v.type,E.type)||this.eu(v.doc,E.doc))),this.ou(s),o=o??!1;const f=t&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,y=g!==this.Za;return this.Za=g,h.length!==0||y?{snapshot:new Mo(this.query,e.tu,l,h,e.mutatedKeys,g===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new s_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Le(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new bw(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new Lw(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=Le();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Mo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ip="SyncEngine";class $R{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class qR{constructor(e){this.key=e,this.hu=!1}}class WR{constructor(e,t,s,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new Ri((f=>Yv(f)),Lc),this.Iu=new Map,this.Eu=new Set,this.du=new ot(ye.comparator),this.Au=new Map,this.Ru=new Gf,this.Vu={},this.mu=new Map,this.fu=Oo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function HR(r,e,t=!0){const s=$w(r);let o;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await jw(s,e,t,!0),o}async function GR(r,e){const t=$w(r);await jw(t,e,!0,!1)}async function jw(r,e,t,s){const o=await fR(r.localStore,lr(e)),l=o.targetId,h=r.sharedClientState.addLocalQueryTarget(l,t);let f;return s&&(f=await KR(r,e,l,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&Rw(r.remoteStore,o),f}async function KR(r,e,t,s,o){r.pu=(E,I,M)=>(async function(q,F,K,re){let b=F.view.ru(K);b.Cs&&(b=await Jy(q.localStore,F.query,!1).then((({documents:P})=>F.view.ru(P,b))));const ee=re&&re.targetChanges.get(F.targetId),se=re&&re.targetMismatches.get(F.targetId)!=null,J=F.view.applyChanges(b,q.isPrimaryClient,ee,se);return l_(q,F.targetId,J.au),J.snapshot})(r,E,I,M);const l=await Jy(r.localStore,e,!0),h=new zR(e,l.Qs),f=h.ru(l.documents),g=wl.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",o),y=h.applyChanges(f,r.isPrimaryClient,g);l_(r,t,y.au);const v=new $R(e,t,h);return r.Tu.set(e,v),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),y.snapshot}async function QR(r,e,t){const s=Ce(r),o=s.Tu.get(e),l=s.Iu.get(o.targetId);if(l.length>1)return s.Iu.set(o.targetId,l.filter((h=>!Lc(h,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await hf(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&Jf(s.remoteStore,o.targetId),pf(s,o.targetId)})).catch(zo)):(pf(s,o.targetId),await hf(s.localStore,o.targetId,!0))}async function XR(r,e){const t=Ce(r),s=t.Tu.get(e),o=t.Iu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Jf(t.remoteStore,s.targetId))}async function YR(r,e,t){const s=sP(r);try{const o=await(function(h,f){const g=Ce(h),y=tt.now(),v=f.reduce(((M,W)=>M.add(W.key)),Le());let E,I;return g.persistence.runTransaction("Locally write mutations","readwrite",(M=>{let W=Ur(),q=Le();return g.Ns.getEntries(M,v).next((F=>{W=F,W.forEach(((K,re)=>{re.isValidDocument()||(q=q.add(K))}))})).next((()=>g.localDocuments.getOverlayedDocuments(M,W))).next((F=>{E=F;const K=[];for(const re of f){const b=pC(re,E.get(re.key).overlayedDocument);b!=null&&K.push(new Bs(re.key,b,$v(b.value.mapValue),bt.exists(!0)))}return g.mutationQueue.addMutationBatch(M,y,K,f)})).next((F=>{I=F;const K=F.applyToLocalDocumentSet(E,q);return g.documentOverlayCache.saveOverlays(M,F.batchId,K)}))})).then((()=>({batchId:I.batchId,changes:ew(E)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(h,f,g){let y=h.Vu[h.currentUser.toKey()];y||(y=new ot(Me)),y=y.insert(f,g),h.Vu[h.currentUser.toKey()]=y})(s,o.batchId,t),await Tl(s,o.changes),await qc(s.remoteStore)}catch(o){const l=rp(o,"Failed to persist write");t.reject(l)}}async function Fw(r,e){const t=Ce(r);try{const s=await cR(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const h=t.Au.get(l);h&&(ze(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?ze(h.hu,14607):o.removedDocuments.size>0&&(ze(h.hu,42227),h.hu=!1))})),await Tl(t,s,e)}catch(s){await zo(s)}}function a_(r,e,t){const s=Ce(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Tu.forEach(((l,h)=>{const f=h.view.va(e);f.snapshot&&o.push(f.snapshot)})),(function(h,f){const g=Ce(h);g.onlineState=f;let y=!1;g.queries.forEach(((v,E)=>{for(const I of E.Sa)I.va(f)&&(y=!0)})),y&&sp(g)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function JR(r,e,t){const s=Ce(r);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Au.get(e),l=o&&o.key;if(l){let h=new ot(ye.comparator);h=h.insert(l,Nt.newNoDocument(l,Te.min()));const f=Le().add(l),g=new Bc(Te.min(),new Map,new ot(Me),h,f);await Fw(s,g),s.du=s.du.remove(l),s.Au.delete(e),op(s)}else await hf(s.localStore,e,!1).then((()=>pf(s,e,t))).catch(zo)}async function ZR(r,e){const t=Ce(r),s=e.batch.batchId;try{const o=await uR(t.localStore,e);Bw(t,s,null),Uw(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Tl(t,o)}catch(o){await zo(o)}}async function eP(r,e,t){const s=Ce(r);try{const o=await(function(h,f){const g=Ce(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let v;return g.mutationQueue.lookupMutationBatch(y,f).next((E=>(ze(E!==null,37113),v=E.keys(),g.mutationQueue.removeMutationBatch(y,E)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,v,f))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,v))).next((()=>g.localDocuments.getDocuments(y,v)))}))})(s.localStore,e);Bw(s,e,t),Uw(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Tl(s,o)}catch(o){await zo(o)}}function Uw(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function Bw(r,e,t){const s=Ce(r);let o=s.Vu[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function pf(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),t&&r.Pu.yu(s,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((s=>{r.Ru.containsKey(s)||zw(r,s)}))}function zw(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(Jf(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),op(r))}function l_(r,e,t){for(const s of t)s instanceof Lw?(r.Ru.addReference(s.key,e),tP(r,s)):s instanceof bw?(ue(ip,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||zw(r,s.key)):_e(19791,{wu:s})}function tP(r,e){const t=e.key,s=t.path.canonicalString();r.du.get(t)||r.Eu.has(s)||(ue(ip,"New document in limbo: "+t),r.Eu.add(s),op(r))}function op(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new ye(Qe.fromString(e)),s=r.fu.next();r.Au.set(s,new qR(t)),r.du=r.du.insert(t,s),Rw(r.remoteStore,new Ss(lr(zf(t.path)),s,"TargetPurposeLimboResolution",Oc.ce))}}async function Tl(r,e,t){const s=Ce(r),o=[],l=[],h=[];s.Tu.isEmpty()||(s.Tu.forEach(((f,g)=>{h.push(s.pu(g,e,t).then((y=>{if((y||t)&&s.isPrimaryClient){const v=y?!y.fromCache:t?.targetChanges.get(g.targetId)?.current;s.sharedClientState.updateQueryState(g.targetId,v?"current":"not-current")}if(y){o.push(y);const v=Qf.As(g.targetId,y);l.push(v)}})))})),await Promise.all(h),s.Pu.H_(o),await(async function(g,y){const v=Ce(g);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>G.forEach(y,(I=>G.forEach(I.Es,(M=>v.persistence.referenceDelegate.addReference(E,I.targetId,M))).next((()=>G.forEach(I.ds,(M=>v.persistence.referenceDelegate.removeReference(E,I.targetId,M)))))))))}catch(E){if(!$o(E))throw E;ue(Xf,"Failed to update sequence numbers: "+E)}for(const E of y){const I=E.targetId;if(!E.fromCache){const M=v.Ms.get(I),W=M.snapshotVersion,q=M.withLastLimboFreeSnapshotVersion(W);v.Ms=v.Ms.insert(I,q)}}})(s.localStore,l))}async function nP(r,e){const t=Ce(r);if(!t.currentUser.isEqual(e)){ue(ip,"User change. New user:",e.toKey());const s=await Sw(t.localStore,e);t.currentUser=e,(function(l,h){l.mu.forEach((f=>{f.forEach((g=>{g.reject(new oe(H.CANCELLED,h))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Tl(t,s.Ls)}}function rP(r,e){const t=Ce(r),s=t.Au.get(e);if(s&&s.hu)return Le().add(s.key);{let o=Le();const l=t.Iu.get(e);if(!l)return o;for(const h of l){const f=t.Tu.get(h);o=o.unionWith(f.view.nu)}return o}}function $w(r){const e=Ce(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=Fw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=JR.bind(null,e),e.Pu.H_=UR.bind(null,e.eventManager),e.Pu.yu=BR.bind(null,e.eventManager),e}function sP(r){const e=Ce(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ZR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=eP.bind(null,e),e}class Ic{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=zc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return lR(this.persistence,new iR,e.initialUser,this.serializer)}Cu(e){return new Iw(Kf.mi,this.serializer)}Du(e){return new mR}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ic.provider={build:()=>new Ic};class iP extends Ic{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ze(this.persistence.referenceDelegate instanceof Ec,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new qC(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?nn.withCacheSize(this.cacheSizeBytes):nn.DEFAULT;return new Iw((s=>Ec.mi(s,t)),this.serializer)}}class mf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>a_(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=nP.bind(null,this.syncEngine),await bR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new FR})()}createDatastore(e){const t=zc(e.databaseInfo.databaseId),s=(function(l){return new wR(l)})(e.databaseInfo);return(function(l,h,f,g){return new SR(l,h,f,g)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,l,h,f){return new CR(s,o,l,h,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>a_(this.syncEngine,t,0)),(function(){return t_.v()?new t_:new gR})())}createSyncEngine(e,t){return(function(o,l,h,f,g,y,v){const E=new WR(o,l,h,f,g,y);return v&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const s=Ce(t);ue(Si,"RemoteStore shutting down."),s.Ea.add(5),await El(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}mf.provider={build:()=>new mf};class qw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):jr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class oP{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new oe(H.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(o,l){const h=Ce(o),f={documents:l.map((E=>wc(h.serializer,E)))},g=await h.Ho("BatchGetDocuments",h.serializer.databaseId,Qe.emptyPath(),f,l.length),y=new Map;g.forEach((E=>{const I=RC(h.serializer,E);y.set(I.key.toString(),I)}));const v=[];return l.forEach((E=>{const I=y.get(E.toString());ze(!!I,55234,{key:E}),v.push(I)})),v})(this.datastore,e);return t.forEach((s=>this.recordVersion(s))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new Uc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,s)=>{const o=ye.fromPath(s);this.mutations.push(new uw(o,this.precondition(o)))})),await(async function(s,o){const l=Ce(s),h={writes:o.map((f=>_w(l.serializer,f)))};await l.Go("Commit",l.serializer.databaseId,Qe.emptyPath(),h)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw _e(50498,{Gu:e.constructor.name});t=Te.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new oe(H.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Te.min())?bt.exists(!1):bt.updateTime(t):bt.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Te.min()))throw new oe(H.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return bt.updateTime(t)}return bt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class aP{constructor(e,t,s,o,l){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=o,this.deferred=l,this.zu=s.maxAttempts,this.M_=new Yf(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new oP(this.datastore),t=this.Hu(e);t&&t.then((s=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(s)})).catch((o=>{this.Yu(o)}))))})).catch((s=>{this.Yu(s)}))}))}Hu(e){try{const t=this.updateFunction(e);return!yl(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!cw(t)}return!1}}const js="FirestoreClient";class lP{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=Wt.UNAUTHENTICATED,this.clientId=Lf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async h=>{ue(js,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(s,(h=>(ue(js,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ar;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=rp(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function bd(r,e){r.asyncQueue.verifyOperationInProgress(),ue(js,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener((async o=>{s.isEqual(o)||(await Sw(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function u_(r,e){r.asyncQueue.verifyOperationInProgress();const t=await uP(r);ue(js,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((s=>r_(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,o)=>r_(e.remoteStore,o))),r._onlineComponents=e}async function uP(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ue(js,"Using user provided OfflineComponentProvider");try{await bd(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===H.FAILED_PRECONDITION||o.code===H.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;No("Error using user provided cache. Falling back to memory cache: "+t),await bd(r,new Ic)}}else ue(js,"Using default OfflineComponentProvider"),await bd(r,new iP(void 0));return r._offlineComponents}async function ap(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ue(js,"Using user provided OnlineComponentProvider"),await u_(r,r._uninitializedComponentsProvider._online)):(ue(js,"Using default OnlineComponentProvider"),await u_(r,new mf))),r._onlineComponents}function cP(r){return ap(r).then((e=>e.syncEngine))}function hP(r){return ap(r).then((e=>e.datastore))}async function Ww(r){const e=await ap(r),t=e.eventManager;return t.onListen=HR.bind(null,e.syncEngine),t.onUnlisten=QR.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=GR.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=XR.bind(null,e.syncEngine),t}function dP(r,e,t={}){const s=new ar;return r.asyncQueue.enqueueAndForget((async()=>(function(l,h,f,g,y){const v=new qw({next:I=>{v.Nu(),h.enqueueAndForget((()=>Ow(l,E)));const M=I.docs.has(f);!M&&I.fromCache?y.reject(new oe(H.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&I.fromCache&&g&&g.source==="server"?y.reject(new oe(H.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(I)},error:I=>y.reject(I)}),E=new Mw(zf(f.path),v,{includeMetadataChanges:!0,qa:!0});return Vw(l,E)})(await Ww(r),r.asyncQueue,e,t,s))),s.promise}function fP(r,e,t={}){const s=new ar;return r.asyncQueue.enqueueAndForget((async()=>(function(l,h,f,g,y){const v=new qw({next:I=>{v.Nu(),h.enqueueAndForget((()=>Ow(l,E))),I.fromCache&&g.source==="server"?y.reject(new oe(H.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(I)},error:I=>y.reject(I)}),E=new Mw(f,v,{includeMetadataChanges:!0,qa:!0});return Vw(l,E)})(await Ww(r),r.asyncQueue,e,t,s))),s.promise}function Hw(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const c_=new Map;const Gw="firestore.googleapis.com",h_=!0;class d_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new oe(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Gw,this.ssl=h_}else this.host=e.host,this.ssl=e.ssl??h_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Tw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<zC)throw new oe(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}RA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Hw(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new oe(H.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new oe(H.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new oe(H.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wc{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new d_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new oe(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new oe(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new d_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new yA;switch(s.type){case"firstParty":return new EA(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new oe(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=c_.get(t);s&&(ue("ComponentProvider","Removing Datastore"),c_.delete(t),s.terminate())})(this),Promise.resolve()}}function pP(r,e,t,s={}){r=Fr(r,Wc);const o=jo(e),l=r._getSettings(),h={...l,emulatorOptions:r._getEmulatorOptions()},f=`${e}:${t}`;o&&(U_(`https://${f}`),B_("Firestore",!0)),l.host!==Gw&&l.host!==f&&No("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:f,ssl:o,emulatorOptions:s};if(!wi(g,h)&&(r._setSettings(g),s.mockUserToken)){let y,v;if(typeof s.mockUserToken=="string")y=s.mockUserToken,v=Wt.MOCK_USER;else{y=$T(s.mockUserToken,r._app?.options.projectId);const E=s.mockUserToken.sub||s.mockUserToken.user_id;if(!E)throw new oe(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Wt(E)}r._authCredentials=new _A(new xv(y,v))}}class Wo{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Wo(this.firestore,e,this._query)}}class ft{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ft(this.firestore,e,this._key)}toJSON(){return{type:ft._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(gl(t,ft._jsonSchema))return new ft(e,s||null,new ye(Qe.fromString(t.referencePath)))}}ft._jsonSchemaVersion="firestore/documentReference/1.0",ft._jsonSchema={type:wt("string",ft._jsonSchemaVersion),referencePath:wt("string")};class xs extends Wo{constructor(e,t,s){super(e,t,zf(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ft(this.firestore,null,new ye(e))}withConverter(e){return new xs(this.firestore,e,this._path)}}function rn(r,e,...t){if(r=St(r),Dv("collection","path",e),r instanceof Wc){const s=Qe.fromString(e,...t);return Ay(s),new xs(r,null,s)}{if(!(r instanceof ft||r instanceof xs))throw new oe(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Qe.fromString(e,...t));return Ay(s),new xs(r.firestore,null,s)}}function it(r,e,...t){if(r=St(r),arguments.length===1&&(e=Lf.newId()),Dv("doc","path",e),r instanceof Wc){const s=Qe.fromString(e,...t);return Sy(s),new ft(r,null,new ye(s))}{if(!(r instanceof ft||r instanceof xs))throw new oe(H.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Qe.fromString(e,...t));return Sy(s),new ft(r.firestore,r instanceof xs?r.converter:null,new ye(s))}}const f_="AsyncQueue";class p_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Yf(this,"async_queue_retry"),this._c=()=>{const s=Ld();s&&ue(f_,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=Ld();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Ld();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ar;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!$o(e))throw e;ue(f_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,jr("INTERNAL UNHANDLED ERROR: ",m_(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=np.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&_e(47125,{Pc:m_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function m_(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class Ho extends Wc{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new p_,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new p_(e),this._firestoreClient=void 0,await e}}}function mP(r,e){const t=typeof r=="object"?r:W_(),s=typeof r=="string"?r:pc,o=Sf(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=BT("firestore");l&&pP(o,...l)}return o}function Il(r){if(r._terminated)throw new oe(H.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||gP(r),r._firestoreClient}function gP(r){const e=r._freezeSettings(),t=(function(o,l,h,f){return new jA(o,l,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,Hw(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new lP(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(o){const l=o?._online.build();return{_offline:o?._offline.build(l),_online:l}})(r._componentsProvider))}class mn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new mn(jt.fromBase64String(e))}catch(t){throw new oe(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new mn(jt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:mn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(gl(e,mn._jsonSchema))return mn.fromBase64String(e.bytes)}}mn._jsonSchemaVersion="firestore/bytes/1.0",mn._jsonSchema={type:wt("string",mn._jsonSchemaVersion),bytes:wt("string")};class Sl{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new oe(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Hc{constructor(e){this._methodName=e}}class ur{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new oe(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new oe(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Me(this._lat,e._lat)||Me(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ur._jsonSchemaVersion}}static fromJSON(e){if(gl(e,ur._jsonSchema))return new ur(e.latitude,e.longitude)}}ur._jsonSchemaVersion="firestore/geoPoint/1.0",ur._jsonSchema={type:wt("string",ur._jsonSchemaVersion),latitude:wt("number"),longitude:wt("number")};class cr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:cr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(gl(e,cr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new cr(e.vectorValues);throw new oe(H.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}cr._jsonSchemaVersion="firestore/vectorValue/1.0",cr._jsonSchema={type:wt("string",cr._jsonSchemaVersion),vectorValues:wt("object")};const yP=/^__.*__$/;class _P{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Bs(e,this.data,this.fieldMask,t,this.fieldTransforms):new vl(e,this.data,t,this.fieldTransforms)}}class Kw{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Bs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Qw(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e(40011,{Ac:r})}}class lp{constructor(e,t,s,o,l,h){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new lp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Sc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Qw(this.Ac)&&yP.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class vP{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||zc(e)}Cc(e,t,s,o=!1){return new lp({Ac:e,methodName:t,Dc:s,path:Lt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Gc(r){const e=r._freezeSettings(),t=zc(r._databaseId);return new vP(r._databaseId,!!e.ignoreUndefinedProperties,t)}function up(r,e,t,s,o,l={}){const h=r.Cc(l.merge||l.mergeFields?2:0,e,t,o);hp("Data must be an object, but it was:",h,s);const f=Jw(s,h);let g,y;if(l.merge)g=new gn(h.fieldMask),y=h.fieldTransforms;else if(l.mergeFields){const v=[];for(const E of l.mergeFields){const I=gf(e,E,t);if(!h.contains(I))throw new oe(H.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);eE(v,I)||v.push(I)}g=new gn(v),y=h.fieldTransforms.filter((E=>g.covers(E.field)))}else g=null,y=h.fieldTransforms;return new _P(new Qt(f),g,y)}class Kc extends Hc{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Kc}}class cp extends Hc{_toFieldTransform(e){return new cC(e.path,new al)}isEqual(e){return e instanceof cp}}function Xw(r,e,t,s){const o=r.Cc(1,e,t);hp("Data must be an object, but it was:",o,s);const l=[],h=Qt.empty();Us(s,((g,y)=>{const v=dp(e,g,t);y=St(y);const E=o.yc(v);if(y instanceof Kc)l.push(v);else{const I=Al(y,E);I!=null&&(l.push(v),h.set(v,I))}}));const f=new gn(l);return new Kw(h,f,o.fieldTransforms)}function Yw(r,e,t,s,o,l){const h=r.Cc(1,e,t),f=[gf(e,s,t)],g=[o];if(l.length%2!=0)throw new oe(H.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<l.length;I+=2)f.push(gf(e,l[I])),g.push(l[I+1]);const y=[],v=Qt.empty();for(let I=f.length-1;I>=0;--I)if(!eE(y,f[I])){const M=f[I];let W=g[I];W=St(W);const q=h.yc(M);if(W instanceof Kc)y.push(M);else{const F=Al(W,q);F!=null&&(y.push(M),v.set(M,F))}}const E=new gn(y);return new Kw(v,E,h.fieldTransforms)}function wP(r,e,t,s=!1){return Al(t,r.Cc(s?4:3,e))}function Al(r,e){if(Zw(r=St(r)))return hp("Unsupported field value:",e,r),Jw(r,e);if(r instanceof Hc)return(function(s,o){if(!Qw(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const l=[];let h=0;for(const f of s){let g=Al(f,o.wc(h));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),h++}return{arrayValue:{values:l}}})(r,e)}return(function(s,o){if((s=St(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return aC(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=tt.fromDate(s);return{timestampValue:vc(o.serializer,l)}}if(s instanceof tt){const l=new tt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:vc(o.serializer,l)}}if(s instanceof ur)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof mn)return{bytesValue:pw(o.serializer,s._byteString)};if(s instanceof ft){const l=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(l))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Hf(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof cr)return(function(h,f){return{mapValue:{fields:{[Bv]:{stringValue:zv},[mc]:{arrayValue:{values:h.toArray().map((y=>{if(typeof y!="number")throw f.Sc("VectorValues must only contain numeric values.");return $f(f.serializer,y)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${Vc(s)}`)})(r,e)}function Jw(r,e){const t={};return Mv(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Us(r,((s,o)=>{const l=Al(o,e.mc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function Zw(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof tt||r instanceof ur||r instanceof mn||r instanceof ft||r instanceof Hc||r instanceof cr)}function hp(r,e,t){if(!Zw(t)||!Vv(t)){const s=Vc(t);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function gf(r,e,t){if((e=St(e))instanceof Sl)return e._internalPath;if(typeof e=="string")return dp(r,e);throw Sc("Field path arguments must be of type string or ",r,!1,void 0,t)}const EP=new RegExp("[~\\*/\\[\\]]");function dp(r,e,t){if(e.search(EP)>=0)throw Sc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Sl(...e.split("."))._internalPath}catch{throw Sc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Sc(r,e,t,s,o){const l=s&&!s.isEmpty(),h=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(l||h)&&(g+=" (found",l&&(g+=` in field ${s}`),h&&(g+=` in document ${o}`),g+=")"),new oe(H.INVALID_ARGUMENT,f+r+g)}function eE(r,e){return r.some((t=>t.isEqual(e)))}class Ac{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new ft(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new TP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(fp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class TP extends Ac{data(){return super.data()}}function fp(r,e){return typeof e=="string"?dp(r,e):e instanceof Sl?e._internalPath:e._delegate._internalPath}function IP(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new oe(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class pp{}class SP extends pp{}function Qc(r,e,...t){let s=[];e instanceof pp&&s.push(e),s=s.concat(t),(function(l){const h=l.filter((g=>g instanceof mp)).length,f=l.filter((g=>g instanceof Xc)).length;if(h>1||h>0&&f>0)throw new oe(H.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)r=o._apply(r);return r}class Xc extends SP{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Xc(e,t,s)}_apply(e){const t=this._parse(e);return tE(e._query,t),new Wo(e.firestore,e.converter,of(e._query,t))}_parse(e){const t=Gc(e.firestore);return(function(l,h,f,g,y,v,E){let I;if(y.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new oe(H.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){y_(E,v);const W=[];for(const q of E)W.push(g_(g,l,q));I={arrayValue:{values:W}}}else I=g_(g,l,E)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||y_(E,v),I=wP(f,h,E,v==="in"||v==="not-in");return vt.create(y,v,I)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Yc(r,e,t){const s=e,o=fp("where",r);return Xc._create(o,s,t)}class mp extends pp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new mp(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:Un.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let h=o;const f=l.getFlattenedFilters();for(const g of f)tE(h,g),h=of(h,g)})(e._query,t),new Wo(e.firestore,e.converter,of(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function g_(r,e,t){if(typeof(t=St(t))=="string"){if(t==="")throw new oe(H.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Xv(e)&&t.indexOf("/")!==-1)throw new oe(H.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Qe.fromString(t));if(!ye.isDocumentKey(s))throw new oe(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Vy(r,new ye(s))}if(t instanceof ft)return Vy(r,t._key);throw new oe(H.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Vc(t)}.`)}function y_(r,e){if(!Array.isArray(r)||r.length===0)throw new oe(H.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function tE(r,e){const t=(function(o,l){for(const h of o)for(const f of h.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new oe(H.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new oe(H.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class nE{convertValue(e,t="none"){switch(Ls(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ms(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw _e(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Us(e,((o,l)=>{s[o]=this.convertValue(l,t)})),s}convertVectorValue(e){const t=e.fields?.[mc].arrayValue?.values?.map((s=>dt(s.doubleValue)));return new cr(t)}convertGeoPoint(e){return new ur(dt(e.latitude),dt(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Mc(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(sl(e));default:return null}}convertTimestamp(e){const t=Os(e);return new tt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Qe.fromString(e);ze(Ew(s),9688,{name:e});const o=new il(s.get(1),s.get(3)),l=new ye(s.popFirst(5));return o.isEqual(t)||jr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function gp(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}class AP extends nE{constructor(e){super(),this.firestore=e}convertBytes(e){return new mn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ft(this.firestore,null,t)}}class To{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ds extends Ac{constructor(e,t,s,o,l,h){super(e,t,s,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new rc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(fp("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(H.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ds._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ds._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ds._jsonSchema={type:wt("string",Ds._jsonSchemaVersion),bundleSource:wt("string","DocumentSnapshot"),bundleName:wt("string"),bundle:wt("string")};class rc extends Ds{data(e={}){return super.data(e)}}class Ro{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new To(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new rc(this._firestore,this._userDataWriter,s.key,s,new To(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new oe(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((f=>{const g=new rc(o._firestore,o._userDataWriter,f.doc.key,f.doc,new To(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const g=new rc(o._firestore,o._userDataWriter,f.doc.key,f.doc,new To(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,v=-1;return f.type!==0&&(y=h.indexOf(f.doc.key),h=h.delete(f.doc.key)),f.type!==1&&(h=h.add(f.doc),v=h.indexOf(f.doc.key)),{type:CP(f.type),doc:g,oldIndex:y,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(H.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ro._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Lf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function CP(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e(61501,{type:r})}}function Ai(r){r=Fr(r,ft);const e=Fr(r.firestore,Ho);return dP(Il(e),r._key).then((t=>RP(e,r,t)))}Ro._jsonSchemaVersion="firestore/querySnapshot/1.0",Ro._jsonSchema={type:wt("string",Ro._jsonSchemaVersion),bundleSource:wt("string","QuerySnapshot"),bundleName:wt("string"),bundle:wt("string")};class yp extends nE{constructor(e){super(),this.firestore=e}convertBytes(e){return new mn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ft(this.firestore,null,t)}}function hr(r){r=Fr(r,Wo);const e=Fr(r.firestore,Ho),t=Il(e),s=new yp(e);return IP(r._query),fP(t,r._query).then((o=>new Ro(e,s,r,o)))}function Go(r,e,t){r=Fr(r,ft);const s=Fr(r.firestore,Ho),o=gp(r.converter,e,t);return rE(s,[up(Gc(s),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,bt.none())])}function rE(r,e){return(function(s,o){const l=new ar;return s.asyncQueue.enqueueAndForget((async()=>YR(await cP(s),o,l))),l.promise})(Il(r),e)}function RP(r,e,t){const s=t.docs.get(e._key),o=new yp(r);return new Ds(r,o,e._key,s,new To(t.hasPendingWrites,t.fromCache),e.converter)}const PP={maxAttempts:5};class kP{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Gc(e)}set(e,t,s){this._verifyNotCommitted();const o=As(e,this._firestore),l=gp(o.converter,t,s),h=up(this._dataReader,"WriteBatch.set",o._key,l,o.converter!==null,s);return this._mutations.push(h.toMutation(o._key,bt.none())),this}update(e,t,s,...o){this._verifyNotCommitted();const l=As(e,this._firestore);let h;return h=typeof(t=St(t))=="string"||t instanceof Sl?Yw(this._dataReader,"WriteBatch.update",l._key,t,s,o):Xw(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(h.toMutation(l._key,bt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=As(e,this._firestore);return this._mutations=this._mutations.concat(new Uc(t._key,bt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new oe(H.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function As(r,e){if((r=St(r)).firestore!==e)throw new oe(H.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}class NP{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Gc(e)}get(e){const t=As(e,this._firestore),s=new AP(this._firestore);return this._transaction.lookup([t._key]).then((o=>{if(!o||o.length!==1)return _e(24041);const l=o[0];if(l.isFoundDocument())return new Ac(this._firestore,s,l.key,l,t.converter);if(l.isNoDocument())return new Ac(this._firestore,s,t._key,null,t.converter);throw _e(18433,{doc:l})}))}set(e,t,s){const o=As(e,this._firestore),l=gp(o.converter,t,s),h=up(this._dataReader,"Transaction.set",o._key,l,o.converter!==null,s);return this._transaction.set(o._key,h),this}update(e,t,s,...o){const l=As(e,this._firestore);let h;return h=typeof(t=St(t))=="string"||t instanceof Sl?Yw(this._dataReader,"Transaction.update",l._key,t,s,o):Xw(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,h),this}delete(e){const t=As(e,this._firestore);return this._transaction.delete(t._key),this}}class xP extends NP{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=As(e,this._firestore),s=new yp(this._firestore);return super.get(e).then((o=>new Ds(this._firestore,s,t._key,o._document,new To(!1,!1),t.converter)))}}function sE(r,e,t){r=Fr(r,Ho);const s={...PP,...t};return(function(l){if(l.maxAttempts<1)throw new oe(H.INVALID_ARGUMENT,"Max attempts must be at least 1")})(s),(function(l,h,f){const g=new ar;return l.asyncQueue.enqueueAndForget((async()=>{const y=await hP(l);new aP(l.asyncQueue,y,f,h,g).ju()})),g.promise})(Il(r),(o=>e(new xP(r,o))),s)}function pn(){return new cp("serverTimestamp")}function iE(r){return Il(r=Fr(r,Ho)),new kP(r,(e=>rE(r,e)))}(function(e,t=!0){(function(o){Bo=o})(Fo),Po(new Ei("firestore",((s,{instanceIdentifier:o,options:l})=>{const h=s.getProvider("app").getImmediate(),f=new Ho(new vA(s.getProvider("auth-internal")),new TA(h,s.getProvider("app-check-internal")),(function(y,v){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new oe(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new il(y.options.projectId,v)})(h,o),h);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),ks(wy,Ey,e),ks(wy,Ey,"esm2020")})();var DP="firebase",VP="12.7.0";ks(DP,VP,"app");const OP={apiKey:"AIzaSyA-TURVnsMyyBOWreei2jGLcuXmOzyr_DQ",authDomain:"gamificationcollege.firebaseapp.com",projectId:"gamificationcollege",storageBucket:"gamificationcollege.firebasestorage.app",messagingSenderId:"237003198772",appId:"1:237003198772:web:37fc8130a083377a115561"},oE=q_(OP),jd=mA(oE),MP=new Vr,be=mP(oE),aE=Ee.createContext(null);function LP({children:r}){const[e,t]=Ee.useState(null),[s,o]=Ee.useState(null),[l,h]=Ee.useState(!0);Ee.useEffect(()=>{const y=r1(jd,async v=>{if(t(v),o(null),!v){h(!1);return}const E=it(be,"users",v.uid);(await Ai(E)).exists()||await Go(E,{displayName:v.displayName||"Utilisateur",role:"child",createdAt:pn()});const M=await Ai(E);o(M.data()?.role||"child"),h(!1)});return()=>y()},[]);const f=async()=>{await S1(jd,MP)},g=async()=>{await s1(jd)};return A.jsx(aE.Provider,{value:{user:e,role:s,loading:l,signInGoogle:f,signOutUser:g},children:r})}function zs(){const r=Ee.useContext(aE);if(!r)throw new Error("useAuth doit tre utilis sous <AuthProvider>");return r}function bP(){const{user:r,role:e,signOutUser:t}=zs();return A.jsx("div",{className:"card",style:{marginBottom:14},children:A.jsxs("div",{className:"row",style:{justifyContent:"space-between"},children:[A.jsxs("div",{children:[A.jsx("div",{style:{fontWeight:900,fontSize:"1.05rem"},children:"Malo  Rvisions"}),A.jsx("div",{className:"small",children:r?A.jsxs(A.Fragment,{children:["Connect : ",A.jsx("strong",{children:r.displayName})," ",A.jsx("span",{className:"badge",children:e})]}):"Non connect"})]}),A.jsxs("div",{className:"row",style:{gap:8},children:[A.jsx(yo,{className:"btn secondary",to:"/",children:"Accueil"}),r&&A.jsx(yo,{className:"btn secondary",to:"/recompenses",children:"Rcompenses"}),e==="parent"&&A.jsxs(A.Fragment,{children:[A.jsx(yo,{className:"btn secondary",to:"/admin/import",children:"Import (parent)"}),A.jsx(yo,{className:"btn secondary",to:"/admin/moderation",children:"Modration"}),A.jsx(yo,{className:"btn secondary",to:"/admin/progression",children:"Progression"})]}),r&&A.jsx("button",{className:"btn secondary",onClick:t,children:"Dconnexion"})]})]})})}function Fd({children:r}){const{user:e,loading:t}=zs();return t?A.jsx("div",{className:"card",children:"Chargement"}):e?A.jsx(A.Fragment,{children:r}):A.jsx(zd,{to:"/connexion",replace:!0})}function Ud({children:r}){const{user:e,role:t,loading:s}=zs();return s?A.jsx("div",{className:"card",children:"Chargement"}):e?t!=="parent"?A.jsx(zd,{to:"/",replace:!0}):A.jsx(A.Fragment,{children:r}):A.jsx(zd,{to:"/connexion",replace:!0})}function Lo(r){return(r||"").toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[]/g,"'").replace(/\s+/g," ").trim()}async function jP(){return(await hr(rn(be,"subjects"))).docs.map(e=>({id:e.id,...e.data()}))}async function lE(r,e){const{uid:t,includeHidden:s=!1,includeOverrides:o=!1}=e||{},l=Qc(rn(be,"themes"),Yc("subjectId","==",r)),f=(await hr(l)).docs.map(v=>({id:v.id,...v.data()}));let g=new Map;if(t)try{const v=await hr(rn(be,"users",t,"visibilityThemes"));g=new Map(v.docs.map(E=>[E.id,!!E.data().visible]))}catch{g=new Map}const y=f.filter(v=>{const E=g.get(v.id);return!(!s&&v.hidden||!s&&E===!1)});return o?y.map(v=>({...v,visibleOverride:g.get(v.id)})):y}async function uE(r,e){const{uid:t,includeHidden:s=!1,includeOverrides:o=!1}=e||{},l=Qc(rn(be,"exercises"),Yc("themeId","==",r)),f=(await hr(l)).docs.map(v=>({id:v.id,...v.data()}));let g=new Map;if(t)try{const v=await hr(rn(be,"users",t,"visibilityExercises"));g=new Map(v.docs.map(E=>[E.id,!!E.data().visible]))}catch{g=new Map}const y=f.filter(v=>{const E=g.get(v.id);return!(!s&&v.hidden||!s&&E===!1)});return o?y.map(v=>({...v,visibleOverride:g.get(v.id)})):y}async function FP(r){const e=iE(be);for(const t of r.subjects){e.set(it(be,"subjects",t.id),{title:t.title},{merge:!0});for(const s of t.themes){e.set(it(be,"themes",s.id),{subjectId:t.id,title:s.title,grade:r.grade},{merge:!0});for(const o of s.exercises){const l=it(be,"exercises",o.id),h={...o,themeId:s.id};h.tags=Array.isArray(h.tags)?h.tags.slice(0,3):[],h.type==="short_text"&&Array.isArray(h.expected)&&(h.expected=h.expected.map(f=>Lo(f))),h.type==="fill_blank"&&Array.isArray(h.expected)&&(h.expected=h.expected.map(f=>Lo(f))),e.set(l,h,{merge:!0})}}}await e.commit()}async function UP(r,e){await Go(it(be,"themes",r),{hidden:e},{merge:!0})}async function BP(r,e){await Go(it(be,"exercises",r),{hidden:e},{merge:!0})}async function zP(r,e,t){await Go(it(be,"users",r,"visibilityThemes",e),{visible:t},{merge:!0})}async function $P(r,e,t){await Go(it(be,"users",r,"visibilityExercises",e),{visible:t},{merge:!0})}async function _p(r){const e=it(be,"users",r,"stats","main"),t=await Ai(e);return t.exists()?t.data():(await Go(e,{xp:0,coins:0,streakDays:0,lastDoneDate:null,badges:[],updatedAt:pn()}),(await Ai(e)).data())}function __(r){return r.toISOString().slice(0,10)}function qP(r,e){return r===1?e?3:-1:r===2?e?5:-2:e?7:-3}function WP(r){return Math.max(0,Math.min(100,r))}function HP(r){return r>=80?"mastered":r>=60?"nearly":r>=30?"developing":"weak"}async function GP(r){const{uid:e,items:t,existingAttemptId:s}=r,o=new Date,l=__(o),h=t.length,f=t.filter(M=>M.correct).length;if(h===0)return{xpGain:0,coinsGain:0,streakDays:0,badges:[],score:0,outOf:0};const g=new Map;t.forEach(M=>{const W=Array.isArray(M.tags)?M.tags.slice(0,3):[],q=qP(M.difficulty,M.correct);W.forEach(F=>{const K=g.get(F)||{delta:0,correct:0,wrong:0};g.set(F,{delta:K.delta+q,correct:K.correct+(M.correct?1:0),wrong:K.wrong+(M.correct?0:1)})})});const y=f*10,v=Math.max(1,Math.min(3,Math.round(f/Math.max(1,h)*3)));let E=null;const I=s?it(be,"users",e,"attempts",s):it(rn(be,"users",e,"attempts"));return t.map(()=>it(rn(I,"items"))),await sE(be,async M=>{const W=it(be,"users",e,"stats","main"),q=it(be,"users",e,"progressSummary","main"),F=Array.from(g.keys()).map(x=>it(be,"users",e,"tagProgress",x)),[K,re,b]=await Promise.all([M.get(W),M.get(q),Promise.all(F.map(x=>M.get(x)))]),ee=K.exists()?K.data():{xp:0,coins:0,streakDays:0,lastDoneDate:null,badges:[]};let se=ee.streakDays||0;const J=ee.lastDoneDate;if(J!==l){const x=__(new Date(o.getTime()-864e5));se=J===x?se+1:1}const P=new Set(Array.isArray(ee.badges)?ee.badges:[]);se>=3&&P.add("3 jours daffile"),se>=7&&P.add("7 jours daffile"),f===h&&h>=10&&P.add("Zro faute (10+)");const S=re.exists()?re.data():null,k={weak:0,developing:0,nearly:0,mastered:0};for(let x=0;x<F.length;x++){const O=F[x],R=b[x],fe=O.id,De=g.get(fe),Ue=R.exists()?R.data():null,Re=typeof Ue?.mastery=="number"?Ue.mastery:0,te=Ue?.bucket,ge=WP(Re+De.delta),ae=HP(ge);te&&S&&(k[te]-=1),k[ae]+=1,M.set(O,{mastery:ge,bucket:ae,correctAnswers:(Ue?.correctAnswers||0)+De.correct,wrongAnswers:(Ue?.wrongAnswers||0)+De.wrong,lastDelta:De.delta,updatedAt:pn()},{merge:!0})}const N=S?.masteryBuckets||{weak:0,developing:0,nearly:0,mastered:0};M.set(W,{xp:(ee.xp||0)+y,coins:(ee.coins||0)+v,streakDays:se,lastDoneDate:l,badges:Array.from(P),updatedAt:pn()},{merge:!0}),M.set(q,{totalAnswers:(S?.totalAnswers||0)+h,correctAnswers:(S?.correctAnswers||0)+f,totalAttempts:(S?.totalAttempts||0)+1,masteryBuckets:{weak:(N.weak||0)+k.weak,developing:(N.developing||0)+k.developing,nearly:(N.nearly||0)+k.nearly,mastered:(N.mastered||0)+k.mastered},lastAttemptId:I.id,lastDate:l,updatedAt:pn()},{merge:!0}),E={xpGain:y,coinsGain:v,streakDays:se,badges:Array.from(P)}}),{...E||{xpGain:0,coinsGain:0,streakDays:0,badges:[]},score:f,outOf:h}}const cE=[{id:"badge_dragon",title:"Badge Dragon",description:"Un badge pique  afficher",priceCoins:10},{id:"skin_bleu",title:"Skin Bleu",description:"Personnalisation bleue de ton avatar",priceCoins:15},{id:"skin_or",title:"Skin Or",description:"Style dor rare",priceCoins:25,requiresXp:150},{id:"pack_stickers",title:"Pack Stickers",description:"Stickers virtuels  collectionner",priceCoins:8},{id:"titre_champion",title:"Titre Champion",description:"Titre spcial dans ton profil",priceCoins:20,requiresXp:100}];function KP(){return cE}async function hE(r){return(await hr(rn(be,"users",r,"inventory"))).docs.map(t=>({id:t.id,...t.data()}))}async function QP(r,e){const t=cE.find(h=>h.id===e);if(!t)throw new Error("Item inconnu");const s=it(be,"users",r,"stats","main"),o=it(be,"users",r,"inventory",e);return await sE(be,async h=>{const[f,g]=await Promise.all([h.get(s),h.get(o)]),y=f.exists()?f.data():await _p(r);if(g.exists())throw new Error("Dj possd");const v=y.coins||0,E=y.xp||0;if(v<t.priceCoins)throw new Error("Pas assez de pices");if(t.requiresXp&&E<t.requiresXp)throw new Error("XP insuffisant");return h.set(o,{acquiredAt:pn(),title:t.title,description:t.description,priceCoins:t.priceCoins,requiresXp:t.requiresXp||null}),h.set(s,{coins:v-t.priceCoins,xp:E,updatedAt:pn()},{merge:!0}),{coins:v-t.priceCoins,xp:E}})}const v_=[{id:"fr",title:"Franais"},{id:"math",title:"Maths"},{id:"en",title:"Anglais"},{id:"es",title:"Espagnol"},{id:"hist",title:"Histoire"}];function XP(){const{user:r}=zs(),[e,t]=Ee.useState([]),[s,o]=Ee.useState("fr"),[l,h]=Ee.useState([]),[f,g]=Ee.useState(null),[y,v]=Ee.useState([]);return Ee.useEffect(()=>{(async()=>{try{const E=await jP();t(E.length?E:v_)}catch{t(v_)}})()},[]),Ee.useEffect(()=>{(async()=>{const E=await lE(s,{uid:r?.uid});h(E)})()},[s,r]),Ee.useEffect(()=>{r&&(async()=>{const E=await _p(r.uid);g(E);const I=await hE(r.uid);v(I)})()},[r]),A.jsxs("div",{className:"container grid",children:[A.jsx("div",{className:"card",children:A.jsxs("div",{className:"row",style:{justifyContent:"space-between"},children:[A.jsxs("div",{children:[A.jsx("h2",{style:{margin:0},children:"Salut Malo "}),A.jsx("div",{className:"small",children:"Choisis une matire, puis un thme. Objectif : 10 questions par jour."})]}),f&&A.jsxs("div",{className:"kpi",children:[A.jsxs("div",{className:"pill",children:["XP: ",A.jsx("strong",{children:f.xp??0})]}),A.jsxs("div",{className:"pill",children:["Pices: ",A.jsx("strong",{children:f.coins??0})]}),A.jsxs("div",{className:"pill",children:["Srie: ",A.jsx("strong",{children:f.streakDays??0})," jours"]})]})]})}),A.jsxs("div",{className:"grid2",children:[A.jsxs("div",{className:"card",children:[A.jsx("h3",{style:{marginTop:0},children:"Matire"}),A.jsx("select",{className:"input",value:s,onChange:E=>o(E.target.value),children:e.map(E=>A.jsx("option",{value:E.id,children:E.title},E.id))}),A.jsx("div",{className:"small",style:{marginTop:8},children:"Priorits : Franais (grammaire & conjugaison) + Maths (fractions)."})]}),A.jsxs("div",{className:"card",children:[A.jsx("h3",{style:{marginTop:0},children:"Thmes"}),l.length===0?A.jsx("div",{className:"small",children:"Aucun thme pour linstant. (Parent : importe un pack JSON)"}):A.jsx("div",{className:"grid",children:l.map(E=>A.jsx(yo,{className:"btn secondary",to:`/theme/${E.id}`,children:E.title},E.id))})]})]}),f?.badges?.length?A.jsxs("div",{className:"card",children:[A.jsx("h3",{style:{marginTop:0},children:"Badges"}),A.jsx("div",{className:"row",children:f.badges.map(E=>A.jsx("span",{className:"badge",children:E},E))})]}):null,y.length?A.jsxs("div",{className:"card",children:[A.jsx("h3",{style:{marginTop:0},children:"Inventaire"}),A.jsx("div",{className:"row",children:y.map(E=>A.jsx("span",{className:"badge",children:E.title||E.id},E.id))})]}):null]})}function YP(){const{user:r,signInGoogle:e}=zs(),t=Pc();return Ee.useEffect(()=>{r&&t("/")},[r]),A.jsx("div",{className:"container",children:A.jsxs("div",{className:"card",children:[A.jsx("h2",{style:{marginTop:0},children:"Connexion"}),A.jsx("p",{className:"small",children:"Connexion Google recommande (simple sur tablette Android)."}),A.jsx("button",{className:"btn",onClick:e,children:"Se connecter avec Google"}),A.jsx("hr",{}),A.jsxs("p",{className:"small",children:["Astuce : aprs ta premire connexion (toi), va dans Firestore et mets ",A.jsxs("code",{children:["users/","{uid}",".role"]}),'  "parent".']})]})})}function JP(r,e){return r.type==="mcq"?e===r.answerIndex:r.type==="short_text"||r.type==="fill_blank"?r.expected.includes(Lo(e||"")):!1}function ZP(r,e){return r===1?e?3:-1:r===2?e?5:-2:e?7:-3}function ek(r){return Math.max(0,Math.min(100,r))}function tk(r){return r>=80?"mastered":r>=60?"nearly":r>=30?"developing":"weak"}function dE(r){return r.toISOString().slice(0,10)}function nk(r,e){const t=new Date(r+"T00:00:00");return t.setDate(t.getDate()+e),dE(t)}function rk(r,e,t){const s=Math.max(0,Math.min(100,r));let o=1;return s>=81||e==="mastered"?o=10:s>=61||e==="nearly"?o=4:s>=31||e==="developing"?o=2:o=1,nk(t,o)}async function sk(r){const{uid:e,subjectId:t,themeId:s,answers:o,exercises:l,durationSec:h}=r,g=dE(new Date),y=it(rn(be,"users",e,"attempts")),v=rn(be,"users",e,"attemptItems"),E=it(be,"users",e,"progressSummary","main"),I=l.map((fe,De)=>{const Ue=JP(fe,o[fe.id]);return{exerciseId:fe.id,subjectId:t,themeId:s,difficulty:fe.difficulty,tags:fe.tags?.slice(0,3)||[],correct:Ue,index:De}}),M=I.filter(fe=>fe.correct).length,W=I.length,q=new Map;I.forEach(fe=>{const De=ZP(fe.difficulty,fe.correct);fe.tags.forEach(Ue=>{const Re=q.get(Ue)||{delta:0,correct:0,wrong:0,results:[]};Re.delta+=De,Re.correct+=fe.correct?1:0,Re.wrong+=fe.correct?0:1,Re.results.push(fe.correct),q.set(Ue,Re)})});const F=Array.from(q.keys()),K=await Promise.all(F.map(fe=>Ai(it(be,"users",e,"tagProgress",fe)))),re=iE(be),b={subjectId:t,themeId:s,score:M,outOf:W,durationSec:h,itemsCount:I.length,date:g,createdAt:pn()};re.set(y,b),I.forEach(fe=>{const De=it(v);re.set(De,{...fe,createdAt:pn(),answer:o[fe.exerciseId]??null})});const ee={weak:0,developing:0,nearly:0,mastered:0},se={};F.forEach((fe,De)=>{const Ue=K[De],Re=Ue.exists()?Ue.data():null,te=q.get(fe),ae=[...Array.isArray(Re?.last7Results)?Re.last7Results:[],...te.results].slice(-7),L={correct:ae.filter(_n=>_n).length,wrong:ae.filter(_n=>!_n).length};let Q=Re?.streakCorrect||0,Ae=Re?.streakWrong||0;te.results.forEach(_n=>{_n?(Q+=1,Ae=0):(Ae+=1,Q=0)});const Pe=typeof Re?.mastery=="number"?Re.mastery:0,Ne=ek(Pe+te.delta),xe=tk(Ne),$e=Re?.bucket;$e&&(ee[$e]-=1),ee[xe]+=1;const je=rk(Ne,xe,g),Ge=it(be,"users",e,"tagProgress",fe),At={tagId:fe,mastery:Ne,bucket:xe,attempts:(Re?.attempts||0)+te.results.length,correctAnswers:(Re?.correctAnswers||0)+te.correct,wrongAnswers:(Re?.wrongAnswers||0)+te.wrong,last7Results:ae,last7:L,lastSeenAt:pn(),lastCorrectAt:te.correct>0?pn():Re?.lastCorrectAt||null,streakCorrect:Q,streakWrong:Ae,lastDelta:te.delta,nextDueDate:je,updatedAt:pn()};se[fe]=At,re.set(Ge,At,{merge:!0})});const J=await Ai(E),P=J.exists()?J.data():null,S=P?.masteryBuckets||{weak:0,developing:0,nearly:0,mastered:0},k={weak:(S.weak||0)+ee.weak,developing:(S.developing||0)+ee.developing,nearly:(S.nearly||0)+ee.nearly,mastered:(S.mastered||0)+ee.mastered},N=Object.values(se).sort((fe,De)=>fe.mastery-De.mastery).map(fe=>fe.tagId),x=Array.isArray(P?.topWeakTags)?P.topWeakTags:[],O=Array.from(new Set([...N,...x])).slice(0,3),R={totalAnswers:(P?.totalAnswers||0)+W,correctAnswers:(P?.correctAnswers||0)+M,totalAttempts:(P?.totalAttempts||0)+1,masteryBuckets:k,lastAttemptId:y.id,lastDate:g,updatedAt:pn(),topWeakTags:O};return re.set(E,R,{merge:!0}),await re.commit(),{attemptId:y.id,score:M,outOf:W,summary:R,tagsUpdated:se}}function w_(r,e){return r.type==="mcq"?e===r.answerIndex:r.type==="short_text"||r.type==="fill_blank"?r.expected.includes(Lo(e||"")):!1}function ik(){const{themeId:r}=oT(),e=Pc(),{user:t}=zs(),[s,o]=Ee.useState(null),[l,h]=Ee.useState([]),[f,g]=Ee.useState({}),[y]=Ee.useState(()=>Date.now()),[v,E]=Ee.useState(null),[I,M]=Ee.useState([]),[W,q]=Ee.useState([]),[F,K]=Ee.useState(!1);Ee.useEffect(()=>{(async()=>{if(!r)return;const b=await Ai(it(be,"themes",r));o(b.exists()?{id:r,...b.data()}:null);const se=[...await uE(r,{uid:t?.uid})].sort(()=>Math.random()-.5);h(se.slice(0,10)),g({}),E(null)})()},[r]);const re=async()=>{if(!t||!r||!s)return;const b=Math.max(1,Math.round((Date.now()-y)/1e3)),ee=l.map(N=>({exerciseId:N.id,difficulty:N.difficulty,tags:N.tags||[],correct:w_(N,f[N.id])})),se=await sk({uid:t.uid,subjectId:s.subjectId,themeId:r,answers:f,exercises:l,durationSec:b}),J=await GP({uid:t.uid,subjectId:s.subjectId,items:ee,existingAttemptId:se.attemptId}),P=new Set(l.flatMap(N=>N.tags||[])),S=Object.values(se.tagsUpdated||{}).filter(N=>N&&P.has(N.tagId||"")).sort((N,x)=>(N.mastery??0)-(x.mastery??0)).slice(0,3).map(N=>N.tagId);M(S),E({score:J.score,outOf:J.outOf,durationSec:b,...J});const k=l.map((N,x)=>{const O=f[N.id],R=w_(N,O);let fe="",De="";if(N.type==="mcq"){const Ue=N;fe=Ue.choices[Ue.answerIndex]||"",De=typeof O=="number"&&Ue.choices[O]||""}else(N.type==="short_text"||N.type==="fill_blank")&&(fe=N.expected[0]||"",De=O||"");return{id:N.id,prompt:N.prompt,correct:R,expected:fe||"",userAnswer:(De??"").toString()||"",idx:x+1}});q(k),K(!0)};return r?F&&W.length?A.jsxs("div",{className:"container grid",children:[A.jsxs("div",{className:"card",children:[A.jsxs("h2",{style:{margin:0},children:["Corrections  ",s?.title]}),v&&A.jsxs("div",{className:"small",children:["Score ",A.jsxs("strong",{children:[v.score,"/",v.outOf]}),"  ",v.durationSec,"s  +",v.xpGain," XP  +",v.coinsGain," pices"]})]}),A.jsxs("div",{className:"card",children:[A.jsx("div",{className:"grid",children:W.map(b=>A.jsxs("div",{className:"pill",style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:6,background:b.correct?"rgba(46, 204, 113, 0.12)":"rgba(255, 90, 111, 0.12)",border:b.correct?"1px solid rgba(46, 204, 113, 0.4)":"1px solid rgba(255, 90, 111, 0.4)"},children:[A.jsxs("div",{className:"small",children:["Question ",b.idx,"  ",b.correct?A.jsx("span",{className:"badge",style:{borderColor:"rgba(46,204,113,.6)",color:"#7fffb2"},children:" Bonne rponse"}):A.jsx("span",{className:"badge",style:{borderColor:"rgba(255,90,111,.6)",color:"#ff9fb0"},children:" Mauvaise rponse"})]}),A.jsx("div",{style:{fontWeight:700},children:b.prompt}),A.jsxs("div",{className:"small",children:["Ta rponse : ",A.jsx("strong",{children:b.userAnswer})]}),!b.correct&&A.jsxs("div",{className:"small",children:["Correction : ",A.jsx("strong",{children:b.expected})]})]},b.id))}),A.jsxs("div",{className:"row",style:{marginTop:16},children:[A.jsx("button",{className:"btn",onClick:()=>e("/"),children:"Retour  laccueil"}),A.jsx("button",{className:"btn secondary",onClick:()=>{K(!1),q([]),E(null),g({})},children:"Refaire une session"})]})]})]}):A.jsxs("div",{className:"container grid",children:[A.jsxs("div",{className:"card",children:[A.jsx("h2",{style:{margin:0},children:s?.title||"Session"}),A.jsx("div",{className:"small",children:"Fais de ton mieux. Objectif : rgularit "})]}),l.map((b,ee)=>A.jsxs("div",{className:"card",children:[A.jsxs("div",{className:"small",children:["Question ",ee+1," / ",l.length," ",A.jsxs("span",{className:"badge",children:["Difficult ",b.difficulty]})]}),A.jsx("div",{style:{fontWeight:800,marginTop:6},children:b.prompt}),b.type==="mcq"&&A.jsx("div",{className:"grid",style:{marginTop:10},children:b.choices.map((se,J)=>A.jsx("button",{type:"button",className:"btn "+(f[b.id]===J?"":"secondary"),onClick:()=>g(P=>({...P,[b.id]:J})),style:{textAlign:"left",opacity:f[b.id]===J?1:.85},"aria-pressed":f[b.id]===J,children:se},J))}),b.type==="short_text"&&A.jsx("div",{style:{marginTop:10},children:A.jsx("input",{className:"input",placeholder:"Ta rponse",value:f[b.id]??"",onChange:se=>g(J=>({...J,[b.id]:se.target.value}))})}),b.type==="fill_blank"&&A.jsxs("div",{style:{marginTop:10},children:[A.jsx("div",{className:"small",children:b.text}),A.jsx("input",{className:"input",placeholder:"Le mot manquant",value:f[b.id]??"",onChange:se=>g(J=>({...J,[b.id]:se.target.value}))})]})]},b.id)),A.jsxs("div",{className:"card",children:[A.jsxs("div",{className:"row",children:[A.jsx("button",{className:"btn",onClick:re,children:"Corriger et enregistrer"}),v&&A.jsxs("div",{className:"small",children:["Score ",A.jsxs("strong",{children:[v.score,"/",v.outOf]}),"  ",v.durationSec,"s  +",A.jsx("strong",{children:v.xpGain})," XP  +",A.jsx("strong",{children:v.coinsGain})," pices  Srie ",A.jsx("strong",{children:v.streakDays})]})]}),v?.badges?.length?A.jsx("div",{className:"row",style:{marginTop:10},children:v.badges.map(b=>A.jsx("span",{className:"badge",children:b},b))}):null,I.length?A.jsxs("div",{className:"small",style:{marginTop:10},children:["Tags  renforcer (thme) : ",I.map(b=>A.jsx("span",{className:"badge",children:b},b))]}):null]}),W.length?A.jsxs("div",{className:"card",children:[A.jsx("h3",{style:{marginTop:0},children:"Corrections"}),A.jsx("div",{className:"grid",children:W.map(b=>A.jsxs("div",{className:"pill",style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:6},children:[A.jsxs("div",{className:"small",children:["Question ",b.idx,"  ",b.correct?A.jsx("span",{className:"badge",children:" Bonne rponse"}):A.jsx("span",{className:"badge",children:" Mauvaise rponse"})]}),A.jsx("div",{style:{fontWeight:700},children:b.prompt}),A.jsxs("div",{className:"small",children:["Ta rponse : ",A.jsx("strong",{children:b.userAnswer})]}),!b.correct&&A.jsxs("div",{className:"small",children:["Correction : ",A.jsx("strong",{children:b.expected})]})]},b.id))})]}):null]}):A.jsx("div",{className:"container",children:A.jsx("div",{className:"card",children:"Thme introuvable."})})}function ok(){const[r,e]=Ee.useState(""),t=async s=>{if(!s)return;e("Lecture du fichier");const o=await s.text();let l;try{l=JSON.parse(o)}catch{e(" JSON invalide");return}if(!l?.subjects?.length){e(" Format inattendu (subjects manquant)");return}e("Import en cours"),await FP(l),e(" Import termin")};return A.jsx("div",{className:"container",children:A.jsxs("div",{className:"card",children:[A.jsx("h2",{style:{marginTop:0},children:"Import dexercices (Parent)"}),A.jsx("p",{className:"small",children:"Importe un pack JSON (gnr par moi) : matires  thmes  exercices."}),A.jsx("input",{className:"input",type:"file",accept:".json,application/json",onChange:s=>t(s.target.files?.[0]||null)}),r&&A.jsx("p",{className:"small",style:{marginTop:10},children:r}),A.jsx("hr",{}),A.jsx("p",{className:"small",children:"Conseil : commence par importer les packs Franais (grammaire + conjugaison) et Maths (fractions)."})]})})}const ak=[{id:"all",label:"Toutes"},{id:"fr",label:"Franais"},{id:"math",label:"Maths"},{id:"en",label:"Anglais"},{id:"es",label:"Espagnol"},{id:"hist",label:"Histoire"}];function lk(r){if(!r)return null;const e=r.split("_")[0];return e==="fr"||e==="math"||e==="en"||e==="es"||e==="hist"?e:null}function E_(r){return r.last7?r.last7:Array.isArray(r.last7Results)?{correct:r.last7Results.filter(Boolean).length,wrong:r.last7Results.filter(e=>!e).length}:{correct:0,wrong:0}}function uk(){const{user:r,role:e}=zs(),[t,s]=Ee.useState([]),[o,l]=Ee.useState(""),[h,f]=Ee.useState([]),[g,y]=Ee.useState(!1),[v,E]=Ee.useState("fr"),[I,M]=Ee.useState(null);Ee.useEffect(()=>{r&&(e==="parent"?(async()=>{const re=(await hr(Qc(rn(be,"users"),Yc("role","==","child")))).docs.map(b=>({id:b.id,displayName:b.data().displayName||"Enfant"}));s(re),re[0]&&l(re[0].id)})():l(r.uid))},[r,e]);const W=Ee.useCallback(async K=>{y(!0);const b=(await hr(rn(be,"users",K,"tagProgress"))).docs.map(J=>({id:J.id,tagId:J.id,...J.data()}));f(b);const se=(await hr(rn(be,"users",K,"progressSummary"))).docs.find(J=>J.id==="main");M(se?.data()||null),y(!1)},[]);Ee.useEffect(()=>{o&&W(o)},[o,W]);const q=h.filter(K=>v==="all"?!0:lk(K.tagId)===v).sort((K,re)=>(K.mastery||0)-(re.mastery||0)).slice(0,20),F=()=>{const K=[["tagId","mastery","bucket","attempts","correct","wrong","last7_correct","last7_wrong","nextDueDate"]];h.forEach(J=>{const P=E_(J);K.push([J.tagId||J.id,String(J.mastery??0),J.bucket||"",String(J.attempts??0),String(J.correctAnswers??0),String(J.wrongAnswers??0),String(P.correct),String(P.wrong),J.nextDueDate||""])});const re=K.map(J=>J.map(P=>`"${(P??"").toString().replace(/"/g,'""')}"`).join(",")).join(`
`),b=new Blob([re],{type:"text/csv;charset=utf-8;"}),ee=URL.createObjectURL(b),se=document.createElement("a");se.href=ee,se.download=`progress-${o||"user"}.csv`,se.click(),URL.revokeObjectURL(ee)};return A.jsxs("div",{className:"container",children:[A.jsxs("div",{className:"card",children:[A.jsx("h2",{style:{marginTop:0},children:"Progression par tag"}),A.jsxs("div",{className:"row",style:{gap:8,alignItems:"center"},children:[e==="parent"&&A.jsxs(A.Fragment,{children:[A.jsx("label",{className:"small",children:"Enfant"}),A.jsx("select",{className:"input",value:o,onChange:K=>l(K.target.value),children:t.map(K=>A.jsx("option",{value:K.id,children:K.displayName},K.id))})]}),A.jsx("label",{className:"small",children:"Matire"}),A.jsx("select",{className:"input",value:v,onChange:K=>E(K.target.value),children:ak.map(K=>A.jsx("option",{value:K.id,children:K.label},K.id))}),A.jsx("button",{className:"btn secondary",onClick:F,disabled:!h.length,children:"Tlcharger CSV"})]}),I&&A.jsxs("div",{className:"kpi",style:{marginTop:10},children:[A.jsxs("div",{className:"pill",children:["Rponses: ",A.jsx("strong",{children:I.totalAnswers||0})]}),A.jsxs("div",{className:"pill",children:["Taux: ",A.jsxs("strong",{children:[I.totalAnswers?Math.round((I.correctAnswers||0)/I.totalAnswers*100):0,"%"]})]}),A.jsxs("div",{className:"pill",children:["Tentatives: ",A.jsx("strong",{children:I.totalAttempts||0})]})]})]}),g?A.jsx("div",{className:"card",children:"Chargement"}):A.jsxs("div",{className:"card",children:[A.jsx("h3",{style:{marginTop:0},children:"Top 20 faibles"}),q.length===0?A.jsx("div",{className:"small",children:"Aucun tag pour le moment."}):A.jsx("div",{className:"grid",children:q.map(K=>{const re=E_(K);return A.jsx("div",{className:"pill",style:{justifyContent:"space-between",display:"flex",alignItems:"center"},children:A.jsxs("div",{children:[A.jsx("div",{style:{fontWeight:700},children:K.tagId}),A.jsxs("div",{className:"small",children:[K.mastery??0,"/100  ",K.bucket,"  ",re.correct,"/",re.correct+re.wrong," sur 7  Prochaine: ",K.nextDueDate||""]}),A.jsx("div",{style:{height:8,background:"rgba(255,255,255,0.08)",borderRadius:999,marginTop:6,width:"100%"},children:A.jsx("div",{style:{height:8,borderRadius:999,width:`${Math.min(100,Math.max(0,K.mastery||0))}%`,background:"linear-gradient(90deg,#ff5a6f,#7aa2ff)"}})}),A.jsx("div",{className:"row",style:{marginTop:6,gap:4},children:(K.last7Results||[]).map((b,ee)=>A.jsx("span",{style:{width:10,height:10,borderRadius:"50%",background:b?"#2ecc71":"#ff5a6f",opacity:.9}},ee))})]})},K.id)})})]})]})}const T_=[{id:"all",label:"Toutes"},{id:"fr",label:"Franais"},{id:"math",label:"Maths"},{id:"en",label:"Anglais"},{id:"es",label:"Espagnol"},{id:"hist",label:"Histoire"}];function ck(){const[r,e]=Ee.useState([]),[t,s]=Ee.useState(""),[o,l]=Ee.useState("all"),[h,f]=Ee.useState([]),[g,y]=Ee.useState(!1),[v,E]=Ee.useState({}),[I,M]=Ee.useState(null);Ee.useEffect(()=>{(async()=>{const ee=(await hr(Qc(rn(be,"users"),Yc("role","==","child")))).docs.map(se=>({id:se.id,displayName:se.data().displayName||"Enfant"}));e(ee),ee[0]&&s(ee[0].id)})()},[]),Ee.useEffect(()=>{t&&(y(!0),(async()=>{const b=T_.filter(P=>P.id!=="all").map(P=>P.id),ee=o==="all"?b:[o],se=[];for(const P of ee){const S=await lE(P,{uid:t,includeHidden:!0,includeOverrides:!0});se.push(...S)}const J=se.sort((P,S)=>(P.title||"").localeCompare(S.title||""));f(J),y(!1)})())},[t,o]);const W=async(b,ee)=>{t&&(await zP(t,b,ee),f(se=>se.map(J=>J.id===b?{...J,visibleOverride:ee}:J)))},q=async(b,ee)=>{await UP(b,ee),f(se=>se.map(J=>J.id===b?{...J,hidden:ee}:J))},F=async b=>{M(b);const ee=await uE(b,{uid:t,includeHidden:!0,includeOverrides:!0});E(se=>({...se,[b]:ee})),M(null)},K=async(b,ee)=>{await BP(b,ee),E(se=>{const J={};return Object.keys(se).forEach(P=>{J[P]=se[P].map(S=>S.id===b?{...S,hidden:ee}:S)}),{...se,...J}})},re=async(b,ee,se)=>{t&&(await $P(t,b,ee),E(J=>({...J,[se]:(J[se]||[]).map(P=>P.id===b?{...P,visibleOverride:ee}:P)})))};return A.jsxs("div",{className:"container",children:[A.jsxs("div",{className:"card",children:[A.jsx("h2",{style:{marginTop:0},children:"Modration contenus"}),A.jsxs("div",{className:"row",style:{gap:10},children:[A.jsxs("div",{className:"row",style:{gap:6},children:[A.jsx("span",{className:"small",children:"Enfant"}),A.jsx("select",{className:"input",value:t,onChange:b=>s(b.target.value),children:r.map(b=>A.jsx("option",{value:b.id,children:b.displayName},b.id))})]}),A.jsxs("div",{className:"row",style:{gap:6},children:[A.jsx("span",{className:"small",children:"Matire"}),A.jsx("select",{className:"input",value:o,onChange:b=>l(b.target.value),children:T_.map(b=>A.jsx("option",{value:b.id,children:b.label},b.id))})]})]})]}),g?A.jsx("div",{className:"card",children:"Chargement"}):A.jsxs("div",{className:"grid",children:[h.map(b=>{const ee=b.visibleOverride,se=ee!==void 0?ee:!b.hidden;return A.jsxs("div",{className:"card",children:[A.jsxs("div",{className:"row",style:{justifyContent:"space-between"},children:[A.jsxs("div",{children:[A.jsx("div",{style:{fontWeight:800},children:b.title}),A.jsx("div",{className:"small",children:b.subjectId}),b.hidden&&A.jsx("div",{className:"badge",children:"Masqu globalement"}),ee===!1&&A.jsx("div",{className:"badge",children:"Masqu pour lenfant"})]}),A.jsxs("div",{className:"row",children:[A.jsx("button",{className:"btn secondary",onClick:()=>W(b.id,!se),children:se?"Masquer pour lenfant":"Afficher pour lenfant"}),A.jsx("button",{className:"btn secondary",onClick:()=>q(b.id,!b.hidden),children:b.hidden?"Ractiver globalement":"Masquer globalement"}),A.jsx("button",{className:"btn secondary",onClick:()=>F(b.id),children:"Voir questions"})]})]}),(v[b.id]||[]).length>0&&A.jsxs("div",{style:{marginTop:10},children:[A.jsx("div",{className:"small",style:{marginBottom:6},children:"Questions"}),A.jsx("div",{className:"grid",children:v[b.id].map(J=>{const P=J.visibleOverride,S=P!==void 0?P:!J.hidden;return A.jsxs("div",{className:"pill",style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:6},children:[A.jsxs("div",{className:"small",children:[J.prompt?.slice(0,80)||J.id," ",J.hidden&&A.jsx("span",{className:"badge",children:"Masqu global"})," ",P===!1&&A.jsx("span",{className:"badge",children:"Masqu enfant"})]}),A.jsxs("div",{className:"row",children:[A.jsx("button",{className:"btn secondary",onClick:()=>re(J.id,!S,b.id),children:S?"Masquer enfant":"Afficher enfant"}),A.jsx("button",{className:"btn secondary",onClick:()=>K(J.id,!J.hidden),children:J.hidden?"Ractiver global":"Masquer global"})]})]},J.id)})})]}),I===b.id&&A.jsx("div",{className:"small",style:{marginTop:6},children:"Chargement des questions"})]},b.id)}),h.length===0&&A.jsx("div",{className:"card small",children:"Aucun thme."})]})]})}function hk(){const{user:r}=zs(),[e,t]=Ee.useState(null),[s,o]=Ee.useState({}),[l,h]=Ee.useState(""),[f,g]=Ee.useState(!1);Ee.useEffect(()=>{r&&(async()=>{const E=await _p(r.uid);t(E);const I=await hE(r.uid),M={};I.forEach(W=>{M[W.id]=W}),o(M)})()},[r]);const y=async E=>{if(r){h(""),g(!0);try{const I=await QP(r.uid,E.id);t(M=>({...M||{},coins:I.coins,xp:I.xp})),o(M=>({...M,[E.id]:{acquiredAt:new Date().toISOString()}}))}catch(I){h(I.message||"Erreur achat")}finally{g(!1)}}},v=KP();return A.jsxs("div",{className:"container",children:[A.jsxs("div",{className:"card",children:[A.jsx("h2",{style:{marginTop:0},children:"Rcompenses"}),A.jsx("div",{className:"small",children:"Utilise tes pices pour acheter et collectionner des items."}),e&&A.jsxs("div",{className:"kpi",style:{marginTop:8},children:[A.jsxs("div",{className:"pill",children:["Pices: ",A.jsx("strong",{children:e.coins||0})]}),A.jsxs("div",{className:"pill",children:["XP: ",A.jsx("strong",{children:e.xp||0})]})]}),l&&A.jsx("div",{className:"small",style:{color:"#ff5a6f",marginTop:8},children:l})]}),A.jsx("div",{className:"grid",children:v.map(E=>{const I=!!s[E.id],M=(e?.coins||0)>=E.priceCoins&&(!E.requiresXp||(e?.xp||0)>=E.requiresXp);return A.jsxs("div",{className:"card",style:{opacity:I?.7:1},children:[A.jsxs("div",{className:"row",style:{justifyContent:"space-between"},children:[A.jsxs("div",{children:[A.jsx("div",{style:{fontWeight:800},children:E.title}),A.jsx("div",{className:"small",children:E.description})]}),I&&A.jsx("span",{className:"badge",children:"Dj acquis"})]}),A.jsxs("div",{className:"row",style:{marginTop:10},children:[A.jsxs("div",{className:"pill",children:["Prix: ",E.priceCoins," pices"]}),E.requiresXp&&A.jsxs("div",{className:"pill",children:["Niv: ",E.requiresXp," XP"]})]}),!I&&A.jsx("button",{className:"btn",disabled:!M||f,onClick:()=>y(E),children:M?"Acheter":"Manque de pices/XP"})]},E.id)})})]})}function dk(){return A.jsx("div",{className:"container",children:A.jsx("div",{className:"card",children:"Page introuvable."})})}function fk(){return A.jsxs(kT,{children:[A.jsx("div",{className:"container",children:A.jsx(bP,{})}),A.jsxs(TT,{children:[A.jsx(Dr,{path:"/connexion",element:A.jsx(YP,{})}),A.jsx(Dr,{path:"/",element:A.jsx(Fd,{children:A.jsx(XP,{})})}),A.jsx(Dr,{path:"/theme/:themeId",element:A.jsx(Fd,{children:A.jsx(ik,{})})}),A.jsx(Dr,{path:"/admin/import",element:A.jsx(Ud,{children:A.jsx(ok,{})})}),A.jsx(Dr,{path:"/admin/progression",element:A.jsx(Ud,{children:A.jsx(uk,{})})}),A.jsx(Dr,{path:"/admin/moderation",element:A.jsx(Ud,{children:A.jsx(ck,{})})}),A.jsx(Dr,{path:"/recompenses",element:A.jsx(Fd,{children:A.jsx(hk,{})})}),A.jsx(Dr,{path:"*",element:A.jsx(dk,{})})]})]})}function pk(){"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("${import.meta.env.BASE_URL}sw.js").catch(()=>{})})}k0.createRoot(document.getElementById("root")).render(A.jsx(Ee.StrictMode,{children:A.jsx(LP,{children:A.jsx(fk,{})})}));pk();
