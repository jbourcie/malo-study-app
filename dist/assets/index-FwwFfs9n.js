function m0(r,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in r)){const l=Object.getOwnPropertyDescriptor(s,o);l&&Object.defineProperty(r,o,l.get?l:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function T_(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Ed={exports:{}},za={},Td={exports:{}},Ve={};var Ag;function g0(){if(Ag)return Ve;Ag=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),E=Symbol.iterator;function S(M){return M===null||typeof M!="object"?null:(M=E&&M[E]||M["@@iterator"],typeof M=="function"?M:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H=Object.assign,q={};function j(M,Q,Se){this.props=M,this.context=Q,this.refs=q,this.updater=Se||b}j.prototype.isReactComponent={},j.prototype.setState=function(M,Q){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,Q,"setState")},j.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function K(){}K.prototype=j.prototype;function re(M,Q,Se){this.props=M,this.context=Q,this.refs=q,this.updater=Se||b}var L=re.prototype=new K;L.constructor=re,H(L,j.prototype),L.isPureReactComponent=!0;var ee=Array.isArray,ie=Object.prototype.hasOwnProperty,J={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function I(M,Q,Se){var Ce,Ne={},xe=null,Be=null;if(Q!=null)for(Ce in Q.ref!==void 0&&(Be=Q.ref),Q.key!==void 0&&(xe=""+Q.key),Q)ie.call(Q,Ce)&&!C.hasOwnProperty(Ce)&&(Ne[Ce]=Q[Ce]);var be=arguments.length-2;if(be===1)Ne.children=Se;else if(1<be){for(var Ge=Array(be),At=0;At<be;At++)Ge[At]=arguments[At+2];Ne.children=Ge}if(M&&M.defaultProps)for(Ce in be=M.defaultProps,be)Ne[Ce]===void 0&&(Ne[Ce]=be[Ce]);return{$$typeof:r,type:M,key:xe,ref:Be,props:Ne,_owner:J.current}}function P(M,Q){return{$$typeof:r,type:M.type,key:Q,ref:M.ref,props:M.props,_owner:M._owner}}function N(M){return typeof M=="object"&&M!==null&&M.$$typeof===r}function x(M){var Q={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(Se){return Q[Se]})}var O=/\/+/g;function R(M,Q){return typeof M=="object"&&M!==null&&M.key!=null?x(""+M.key):Q.toString(36)}function fe(M,Q,Se,Ce,Ne){var xe=typeof M;(xe==="undefined"||xe==="boolean")&&(M=null);var Be=!1;if(M===null)Be=!0;else switch(xe){case"string":case"number":Be=!0;break;case"object":switch(M.$$typeof){case r:case e:Be=!0}}if(Be)return Be=M,Ne=Ne(Be),M=Ce===""?"."+R(Be,0):Ce,ee(Ne)?(Se="",M!=null&&(Se=M.replace(O,"$&/")+"/"),fe(Ne,Q,Se,"",function(At){return At})):Ne!=null&&(N(Ne)&&(Ne=P(Ne,Se+(!Ne.key||Be&&Be.key===Ne.key?"":(""+Ne.key).replace(O,"$&/")+"/")+M)),Q.push(Ne)),1;if(Be=0,Ce=Ce===""?".":Ce+":",ee(M))for(var be=0;be<M.length;be++){xe=M[be];var Ge=Ce+R(xe,be);Be+=fe(xe,Q,Se,Ge,Ne)}else if(Ge=S(M),typeof Ge=="function")for(M=Ge.call(M),be=0;!(xe=M.next()).done;)xe=xe.value,Ge=Ce+R(xe,be++),Be+=fe(xe,Q,Se,Ge,Ne);else if(xe==="object")throw Q=String(M),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.");return Be}function De(M,Q,Se){if(M==null)return M;var Ce=[],Ne=0;return fe(M,Ce,"","",function(xe){return Q.call(Se,xe,Ne++)}),Ce}function je(M){if(M._status===-1){var Q=M._result;Q=Q(),Q.then(function(Se){(M._status===0||M._status===-1)&&(M._status=1,M._result=Se)},function(Se){(M._status===0||M._status===-1)&&(M._status=2,M._result=Se)}),M._status===-1&&(M._status=0,M._result=Q)}if(M._status===1)return M._result.default;throw M._result}var Re={current:null},te={transition:null},ge={ReactCurrentDispatcher:Re,ReactCurrentBatchConfig:te,ReactCurrentOwner:J};function ae(){throw Error("act(...) is not supported in production builds of React.")}return Ve.Children={map:De,forEach:function(M,Q,Se){De(M,function(){Q.apply(this,arguments)},Se)},count:function(M){var Q=0;return De(M,function(){Q++}),Q},toArray:function(M){return De(M,function(Q){return Q})||[]},only:function(M){if(!N(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},Ve.Component=j,Ve.Fragment=t,Ve.Profiler=o,Ve.PureComponent=re,Ve.StrictMode=s,Ve.Suspense=g,Ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ge,Ve.act=ae,Ve.cloneElement=function(M,Q,Se){if(M==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+M+".");var Ce=H({},M.props),Ne=M.key,xe=M.ref,Be=M._owner;if(Q!=null){if(Q.ref!==void 0&&(xe=Q.ref,Be=J.current),Q.key!==void 0&&(Ne=""+Q.key),M.type&&M.type.defaultProps)var be=M.type.defaultProps;for(Ge in Q)ie.call(Q,Ge)&&!C.hasOwnProperty(Ge)&&(Ce[Ge]=Q[Ge]===void 0&&be!==void 0?be[Ge]:Q[Ge])}var Ge=arguments.length-2;if(Ge===1)Ce.children=Se;else if(1<Ge){be=Array(Ge);for(var At=0;At<Ge;At++)be[At]=arguments[At+2];Ce.children=be}return{$$typeof:r,type:M.type,key:Ne,ref:xe,props:Ce,_owner:Be}},Ve.createContext=function(M){return M={$$typeof:h,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},M.Provider={$$typeof:l,_context:M},M.Consumer=M},Ve.createElement=I,Ve.createFactory=function(M){var Q=I.bind(null,M);return Q.type=M,Q},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(M){return{$$typeof:f,render:M}},Ve.isValidElement=N,Ve.lazy=function(M){return{$$typeof:w,_payload:{_status:-1,_result:M},_init:je}},Ve.memo=function(M,Q){return{$$typeof:y,type:M,compare:Q===void 0?null:Q}},Ve.startTransition=function(M){var Q=te.transition;te.transition={};try{M()}finally{te.transition=Q}},Ve.unstable_act=ae,Ve.useCallback=function(M,Q){return Re.current.useCallback(M,Q)},Ve.useContext=function(M){return Re.current.useContext(M)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(M){return Re.current.useDeferredValue(M)},Ve.useEffect=function(M,Q){return Re.current.useEffect(M,Q)},Ve.useId=function(){return Re.current.useId()},Ve.useImperativeHandle=function(M,Q,Se){return Re.current.useImperativeHandle(M,Q,Se)},Ve.useInsertionEffect=function(M,Q){return Re.current.useInsertionEffect(M,Q)},Ve.useLayoutEffect=function(M,Q){return Re.current.useLayoutEffect(M,Q)},Ve.useMemo=function(M,Q){return Re.current.useMemo(M,Q)},Ve.useReducer=function(M,Q,Se){return Re.current.useReducer(M,Q,Se)},Ve.useRef=function(M){return Re.current.useRef(M)},Ve.useState=function(M){return Re.current.useState(M)},Ve.useSyncExternalStore=function(M,Q,Se){return Re.current.useSyncExternalStore(M,Q,Se)},Ve.useTransition=function(){return Re.current.useTransition()},Ve.version="18.3.1",Ve}var Rg;function gf(){return Rg||(Rg=1,Td.exports=g0()),Td.exports}var Cg;function y0(){if(Cg)return za;Cg=1;var r=gf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(f,g,y){var w,E={},S=null,b=null;y!==void 0&&(S=""+y),g.key!==void 0&&(S=""+g.key),g.ref!==void 0&&(b=g.ref);for(w in g)s.call(g,w)&&!l.hasOwnProperty(w)&&(E[w]=g[w]);if(f&&f.defaultProps)for(w in g=f.defaultProps,g)E[w]===void 0&&(E[w]=g[w]);return{$$typeof:e,type:f,key:S,ref:b,props:E,_owner:o.current}}return za.Fragment=t,za.jsx=h,za.jsxs=h,za}var Pg;function _0(){return Pg||(Pg=1,Ed.exports=y0()),Ed.exports}var k=_0(),he=gf();const ke=T_(he),v0=m0({__proto__:null,default:ke},[he]);var zu={},Id={exports:{}},tn={},Sd={exports:{}},Ad={};var kg;function w0(){return kg||(kg=1,(function(r){function e(te,ge){var ae=te.length;te.push(ge);e:for(;0<ae;){var M=ae-1>>>1,Q=te[M];if(0<o(Q,ge))te[M]=ge,te[ae]=Q,ae=M;else break e}}function t(te){return te.length===0?null:te[0]}function s(te){if(te.length===0)return null;var ge=te[0],ae=te.pop();if(ae!==ge){te[0]=ae;e:for(var M=0,Q=te.length,Se=Q>>>1;M<Se;){var Ce=2*(M+1)-1,Ne=te[Ce],xe=Ce+1,Be=te[xe];if(0>o(Ne,ae))xe<Q&&0>o(Be,Ne)?(te[M]=Be,te[xe]=ae,M=xe):(te[M]=Ne,te[Ce]=ae,M=Ce);else if(xe<Q&&0>o(Be,ae))te[M]=Be,te[xe]=ae,M=xe;else break e}}return ge}function o(te,ge){var ae=te.sortIndex-ge.sortIndex;return ae!==0?ae:te.id-ge.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var h=Date,f=h.now();r.unstable_now=function(){return h.now()-f}}var g=[],y=[],w=1,E=null,S=3,b=!1,H=!1,q=!1,j=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,re=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L(te){for(var ge=t(y);ge!==null;){if(ge.callback===null)s(y);else if(ge.startTime<=te)s(y),ge.sortIndex=ge.expirationTime,e(g,ge);else break;ge=t(y)}}function ee(te){if(q=!1,L(te),!H)if(t(g)!==null)H=!0,je(ie);else{var ge=t(y);ge!==null&&Re(ee,ge.startTime-te)}}function ie(te,ge){H=!1,q&&(q=!1,K(I),I=-1),b=!0;var ae=S;try{for(L(ge),E=t(g);E!==null&&(!(E.expirationTime>ge)||te&&!x());){var M=E.callback;if(typeof M=="function"){E.callback=null,S=E.priorityLevel;var Q=M(E.expirationTime<=ge);ge=r.unstable_now(),typeof Q=="function"?E.callback=Q:E===t(g)&&s(g),L(ge)}else s(g);E=t(g)}if(E!==null)var Se=!0;else{var Ce=t(y);Ce!==null&&Re(ee,Ce.startTime-ge),Se=!1}return Se}finally{E=null,S=ae,b=!1}}var J=!1,C=null,I=-1,P=5,N=-1;function x(){return!(r.unstable_now()-N<P)}function O(){if(C!==null){var te=r.unstable_now();N=te;var ge=!0;try{ge=C(!0,te)}finally{ge?R():(J=!1,C=null)}}else J=!1}var R;if(typeof re=="function")R=function(){re(O)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,De=fe.port2;fe.port1.onmessage=O,R=function(){De.postMessage(null)}}else R=function(){j(O,0)};function je(te){C=te,J||(J=!0,R())}function Re(te,ge){I=j(function(){te(r.unstable_now())},ge)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(te){te.callback=null},r.unstable_continueExecution=function(){H||b||(H=!0,je(ie))},r.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<te?Math.floor(1e3/te):5},r.unstable_getCurrentPriorityLevel=function(){return S},r.unstable_getFirstCallbackNode=function(){return t(g)},r.unstable_next=function(te){switch(S){case 1:case 2:case 3:var ge=3;break;default:ge=S}var ae=S;S=ge;try{return te()}finally{S=ae}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(te,ge){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var ae=S;S=te;try{return ge()}finally{S=ae}},r.unstable_scheduleCallback=function(te,ge,ae){var M=r.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?M+ae:M):ae=M,te){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=ae+Q,te={id:w++,callback:ge,priorityLevel:te,startTime:ae,expirationTime:Q,sortIndex:-1},ae>M?(te.sortIndex=ae,e(y,te),t(g)===null&&te===t(y)&&(q?(K(I),I=-1):q=!0,Re(ee,ae-M))):(te.sortIndex=Q,e(g,te),H||b||(H=!0,je(ie))),te},r.unstable_shouldYield=x,r.unstable_wrapCallback=function(te){var ge=S;return function(){var ae=S;S=ge;try{return te.apply(this,arguments)}finally{S=ae}}}})(Ad)),Ad}var Ng;function E0(){return Ng||(Ng=1,Sd.exports=w0()),Sd.exports}var xg;function T0(){if(xg)return tn;xg=1;var r=gf(),e=E0();function t(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(n,i){h(n,i),h(n+"Capture",i)}function h(n,i){for(o[n]=i,n=0;n<i.length;n++)s.add(i[n])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},E={};function S(n){return g.call(E,n)?!0:g.call(w,n)?!1:y.test(n)?E[n]=!0:(w[n]=!0,!1)}function b(n,i,a,c){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function H(n,i,a,c){if(i===null||typeof i>"u"||b(n,i,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function q(n,i,a,c,d,p,v){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=i,this.sanitizeURL=p,this.removeEmptyString=v}var j={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){j[n]=new q(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];j[i]=new q(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){j[n]=new q(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){j[n]=new q(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){j[n]=new q(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){j[n]=new q(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){j[n]=new q(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){j[n]=new q(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){j[n]=new q(n,5,!1,n.toLowerCase(),null,!1,!1)});var K=/[\-:]([a-z])/g;function re(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(K,re);j[i]=new q(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(K,re);j[i]=new q(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(K,re);j[i]=new q(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){j[n]=new q(n,1,!1,n.toLowerCase(),null,!1,!1)}),j.xlinkHref=new q("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){j[n]=new q(n,1,!1,n.toLowerCase(),null,!0,!0)});function L(n,i,a,c){var d=j.hasOwnProperty(i)?j[i]:null;(d!==null?d.type!==0:c||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(H(i,a,d,c)&&(a=null),c||d===null?S(i)&&(a===null?n.removeAttribute(i):n.setAttribute(i,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(i=d.attributeName,c=d.attributeNamespace,a===null?n.removeAttribute(i):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?n.setAttributeNS(c,i,a):n.setAttribute(i,a))))}var ee=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ie=Symbol.for("react.element"),J=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),x=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),fe=Symbol.for("react.suspense_list"),De=Symbol.for("react.memo"),je=Symbol.for("react.lazy"),Re=Symbol.for("react.offscreen"),te=Symbol.iterator;function ge(n){return n===null||typeof n!="object"?null:(n=te&&n[te]||n["@@iterator"],typeof n=="function"?n:null)}var ae=Object.assign,M;function Q(n){if(M===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);M=i&&i[1]||""}return`
`+M+n}var Se=!1;function Ce(n,i){if(!n||Se)return"";Se=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(B){var c=B}Reflect.construct(n,[],i)}else{try{i.call()}catch(B){c=B}n.call(i.prototype)}else{try{throw Error()}catch(B){c=B}n()}}catch(B){if(B&&c&&typeof B.stack=="string"){for(var d=B.stack.split(`
`),p=c.stack.split(`
`),v=d.length-1,A=p.length-1;1<=v&&0<=A&&d[v]!==p[A];)A--;for(;1<=v&&0<=A;v--,A--)if(d[v]!==p[A]){if(v!==1||A!==1)do if(v--,A--,0>A||d[v]!==p[A]){var D=`
`+d[v].replace(" at new "," at ");return n.displayName&&D.includes("<anonymous>")&&(D=D.replace("<anonymous>",n.displayName)),D}while(1<=v&&0<=A);break}}}finally{Se=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?Q(n):""}function Ne(n){switch(n.tag){case 5:return Q(n.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 2:case 15:return n=Ce(n.type,!1),n;case 11:return n=Ce(n.type.render,!1),n;case 1:return n=Ce(n.type,!0),n;default:return""}}function xe(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case C:return"Fragment";case J:return"Portal";case P:return"Profiler";case I:return"StrictMode";case R:return"Suspense";case fe:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case x:return(n.displayName||"Context")+".Consumer";case N:return(n._context.displayName||"Context")+".Provider";case O:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case De:return i=n.displayName||null,i!==null?i:xe(n.type)||"Memo";case je:i=n._payload,n=n._init;try{return xe(n(i))}catch{}}return null}function Be(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xe(i);case 8:return i===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function be(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ge(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function At(n){var i=Ge(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),c=""+n[i];if(!n.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,p=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return d.call(this)},set:function(v){c=""+v,p.call(this,v)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(v){c=""+v},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function yn(n){n._valueTracker||(n._valueTracker=At(n))}function Go(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),c="";return n&&(c=Ge(n)?n.checked?"true":"false":n.value),n=c,n!==a?(i.setValue(n),!0):!1}function Br(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function ks(n,i){var a=i.checked;return ae({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function Rl(n,i){var a=i.defaultValue==null?"":i.defaultValue,c=i.checked!=null?i.checked:i.defaultChecked;a=be(i.value!=null?i.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Ns(n,i){i=i.checked,i!=null&&L(n,"checked",i,!1)}function Bi(n,i){Ns(n,i);var a=be(i.value),c=i.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?mt(n,i.type,a):i.hasOwnProperty("defaultValue")&&mt(n,i.type,be(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function Ko(n,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var c=i.type;if(!(c!=="submit"&&c!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,a||i===n.value||(n.value=i),n.defaultValue=i}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function mt(n,i,a){(i!=="number"||Br(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var lt=Array.isArray;function Rn(n,i,a,c){if(n=n.options,i){i={};for(var d=0;d<a.length;d++)i["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=i.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&c&&(n[a].defaultSelected=!0)}else{for(a=""+be(a),i=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}i!==null||n[d].disabled||(i=n[d])}i!==null&&(i.selected=!0)}}function Qo(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return ae({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Xo(n,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(t(92));if(lt(a)){if(1<a.length)throw Error(t(93));a=a[0]}i=a}i==null&&(i=""),a=i}n._wrapperState={initialValue:be(a)}}function Cl(n,i){var a=be(i.value),c=be(i.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),i.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function $r(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function Yo(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xs(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?Yo(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var qr,Pl=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,c,d){MSApp.execUnsafeLocalFunction(function(){return n(i,a,c,d)})}:n})(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(qr=qr||document.createElement("div"),qr.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=qr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function $i(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var Wr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kl=["Webkit","ms","Moz","O"];Object.keys(Wr).forEach(function(n){kl.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),Wr[i]=Wr[n]})});function Hr(n,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||Wr.hasOwnProperty(n)&&Wr[n]?(""+i).trim():i+"px"}function Ds(n,i){n=n.style;for(var a in i)if(i.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=Hr(a,i[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,d):n[a]=d}}var Jo=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Cn(n,i){if(i){if(Jo[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function Vs(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gr=null;function Os(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var fr=null,pr=null,ot=null;function Zo(n){if(n=Ra(n)){if(typeof fr!="function")throw Error(t(280));var i=n.stateNode;i&&(i=nu(i),fr(n.stateNode,n.type,i))}}function Kr(n){pr?ot?ot.push(n):ot=[n]:pr=n}function Qr(){if(pr){var n=pr,i=ot;if(ot=pr=null,Zo(n),i)for(n=0;n<i.length;n++)Zo(i[n])}}function Nl(n,i){return n(i)}function xl(){}var zn=!1;function Dl(n,i,a){if(zn)return n(i,a);zn=!0;try{return Nl(n,i,a)}finally{zn=!1,(pr!==null||ot!==null)&&(xl(),Qr())}}function qi(n,i){var a=n.stateNode;if(a===null)return null;var c=nu(a);if(c===null)return null;a=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,i,typeof a));return a}var Xr=!1;if(f)try{var Yr={};Object.defineProperty(Yr,"passive",{get:function(){Xr=!0}}),window.addEventListener("test",Yr,Yr),window.removeEventListener("test",Yr,Yr)}catch{Xr=!1}function Vl(n,i,a,c,d,p,v,A,D){var B=Array.prototype.slice.call(arguments,3);try{i.apply(a,B)}catch(Y){this.onError(Y)}}var mr=!1,Bn=null,Ms=!1,_n=null,Ol={onError:function(n){mr=!0,Bn=n}};function Ml(n,i,a,c,d,p,v,A,D){mr=!1,Bn=null,Vl.apply(Ol,arguments)}function ea(n,i,a,c,d,p,v,A,D){if(Ml.apply(this,arguments),mr){if(mr){var B=Bn;mr=!1,Bn=null}else throw Error(t(198));Ms||(Ms=!0,_n=B)}}function Pn(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function ta(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function Ll(n){if(Pn(n)!==n)throw Error(t(188))}function bl(n){var i=n.alternate;if(!i){if(i=Pn(n),i===null)throw Error(t(188));return i!==n?null:n}for(var a=n,c=i;;){var d=a.return;if(d===null)break;var p=d.alternate;if(p===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===a)return Ll(d),n;if(p===c)return Ll(d),i;p=p.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=p;else{for(var v=!1,A=d.child;A;){if(A===a){v=!0,a=d,c=p;break}if(A===c){v=!0,c=d,a=p;break}A=A.sibling}if(!v){for(A=p.child;A;){if(A===a){v=!0,a=p,c=d;break}if(A===c){v=!0,c=p,a=d;break}A=A.sibling}if(!v)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:i}function Fl(n){return n=bl(n),n!==null?Wi(n):null}function Wi(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=Wi(n);if(i!==null)return i;n=n.sibling}return null}var na=e.unstable_scheduleCallback,Ls=e.unstable_cancelCallback,Hi=e.unstable_shouldYield,gr=e.unstable_requestPaint,Je=e.unstable_now,Jc=e.unstable_getCurrentPriorityLevel,bs=e.unstable_ImmediatePriority,ra=e.unstable_UserBlockingPriority,Gi=e.unstable_NormalPriority,ia=e.unstable_LowPriority,Fs=e.unstable_IdlePriority,Ki=null,rn=null;function jl(n){if(rn&&typeof rn.onCommitFiberRoot=="function")try{rn.onCommitFiberRoot(Ki,n,void 0,(n.current.flags&128)===128)}catch{}}var sn=Math.clz32?Math.clz32:Qi,$n=Math.log,vn=Math.LN2;function Qi(n){return n>>>=0,n===0?32:31-($n(n)/vn|0)|0}var qn=64,Jr=4194304;function He(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function yr(n,i){var a=n.pendingLanes;if(a===0)return 0;var c=0,d=n.suspendedLanes,p=n.pingedLanes,v=a&268435455;if(v!==0){var A=v&~d;A!==0?c=He(A):(p&=v,p!==0&&(c=He(p)))}else v=a&~d,v!==0?c=He(v):p!==0&&(c=He(p));if(c===0)return 0;if(i!==0&&i!==c&&(i&d)===0&&(d=c&-c,p=i&-i,d>=p||d===16&&(p&4194240)!==0))return i;if((c&4)!==0&&(c|=a&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=c;0<i;)a=31-sn(i),d=1<<a,c|=n[a],i&=~d;return c}function Xi(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yi(n,i){for(var a=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,p=n.pendingLanes;0<p;){var v=31-sn(p),A=1<<v,D=d[v];D===-1?((A&a)===0||(A&c)!==0)&&(d[v]=Xi(A,i)):D<=i&&(n.expiredLanes|=A),p&=~A}}function sa(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function oa(){var n=qn;return qn<<=1,(qn&4194240)===0&&(qn=64),n}function aa(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function Ji(n,i,a){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-sn(i),n[i]=a}function Zc(n,i){var a=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-sn(a),p=1<<d;i[d]=0,c[d]=-1,n[d]=-1,a&=~p}}function la(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var c=31-sn(a),d=1<<c;d&i|n[c]&i&&(n[c]|=i),a&=~d}}var Fe=0;function Wn(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var ua,js,ca,ha,da,Hn=!1,Us=[],Gn=null,Kn=null,xt=null,Zi=new Map,_r=new Map,on=[],Ul="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zr(n,i){switch(n){case"focusin":case"focusout":Gn=null;break;case"dragenter":case"dragleave":Kn=null;break;case"mouseover":case"mouseout":xt=null;break;case"pointerover":case"pointerout":Zi.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":_r.delete(i.pointerId)}}function kn(n,i,a,c,d,p){return n===null||n.nativeEvent!==p?(n={blockedOn:i,domEventName:a,eventSystemFlags:c,nativeEvent:p,targetContainers:[d]},i!==null&&(i=Ra(i),i!==null&&js(i)),n):(n.eventSystemFlags|=c,i=n.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),n)}function zl(n,i,a,c,d){switch(i){case"focusin":return Gn=kn(Gn,n,i,a,c,d),!0;case"dragenter":return Kn=kn(Kn,n,i,a,c,d),!0;case"mouseover":return xt=kn(xt,n,i,a,c,d),!0;case"pointerover":var p=d.pointerId;return Zi.set(p,kn(Zi.get(p)||null,n,i,a,c,d)),!0;case"gotpointercapture":return p=d.pointerId,_r.set(p,kn(_r.get(p)||null,n,i,a,c,d)),!0}return!1}function zs(n){var i=rs(n.target);if(i!==null){var a=Pn(i);if(a!==null){if(i=a.tag,i===13){if(i=ta(a),i!==null){n.blockedOn=i,da(n.priority,function(){ca(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Xe(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=Bs(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Gr=c,a.target.dispatchEvent(c),Gr=null}else return i=Ra(a),i!==null&&js(i),n.blockedOn=a,!1;i.shift()}return!0}function Bl(n,i,a){Xe(n)&&a.delete(i)}function eh(){Hn=!1,Gn!==null&&Xe(Gn)&&(Gn=null),Kn!==null&&Xe(Kn)&&(Kn=null),xt!==null&&Xe(xt)&&(xt=null),Zi.forEach(Bl),_r.forEach(Bl)}function ei(n,i){n.blockedOn===i&&(n.blockedOn=null,Hn||(Hn=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,eh)))}function ti(n){function i(d){return ei(d,n)}if(0<Us.length){ei(Us[0],n);for(var a=1;a<Us.length;a++){var c=Us[a];c.blockedOn===n&&(c.blockedOn=null)}}for(Gn!==null&&ei(Gn,n),Kn!==null&&ei(Kn,n),xt!==null&&ei(xt,n),Zi.forEach(i),_r.forEach(i),a=0;a<on.length;a++)c=on[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<on.length&&(a=on[0],a.blockedOn===null);)zs(a),a.blockedOn===null&&on.shift()}var vr=ee.ReactCurrentBatchConfig,wr=!0;function Qn(n,i,a,c){var d=Fe,p=vr.transition;vr.transition=null;try{Fe=1,fa(n,i,a,c)}finally{Fe=d,vr.transition=p}}function $l(n,i,a,c){var d=Fe,p=vr.transition;vr.transition=null;try{Fe=4,fa(n,i,a,c)}finally{Fe=d,vr.transition=p}}function fa(n,i,a,c){if(wr){var d=Bs(n,i,a,c);if(d===null)hh(n,i,c,Xn,a),Zr(n,c);else if(zl(d,n,i,a,c))c.stopPropagation();else if(Zr(n,c),i&4&&-1<Ul.indexOf(n)){for(;d!==null;){var p=Ra(d);if(p!==null&&ua(p),p=Bs(n,i,a,c),p===null&&hh(n,i,c,Xn,a),p===d)break;d=p}d!==null&&c.stopPropagation()}else hh(n,i,c,null,a)}}var Xn=null;function Bs(n,i,a,c){if(Xn=null,n=Os(c),n=rs(n),n!==null)if(i=Pn(n),i===null)n=null;else if(a=i.tag,a===13){if(n=ta(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return Xn=n,null}function $s(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Jc()){case bs:return 1;case ra:return 4;case Gi:case ia:return 16;case Fs:return 536870912;default:return 16}default:return 16}}var an=null,qs=null,Er=null;function ql(){if(Er)return Er;var n,i=qs,a=i.length,c,d="value"in an?an.value:an.textContent,p=d.length;for(n=0;n<a&&i[n]===d[n];n++);var v=a-n;for(c=1;c<=v&&i[a-c]===d[p-c];c++);return Er=d.slice(n,1<c?1-c:void 0)}function es(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Yn(){return!0}function pa(){return!1}function jt(n){function i(a,c,d,p,v){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=p,this.target=v,this.currentTarget=null;for(var A in n)n.hasOwnProperty(A)&&(a=n[A],this[A]=a?a(p):p[A]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Yn:pa,this.isPropagationStopped=pa,this}return ae(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Yn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Yn)},persist:function(){},isPersistent:Yn}),i}var Jn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ts=jt(Jn),ni=ae({},Jn,{view:0,detail:0}),Ws=jt(ni),Hs,Gs,ln,ns=ae({},ni,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pe,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ln&&(ln&&n.type==="mousemove"?(Hs=n.screenX-ln.screenX,Gs=n.screenY-ln.screenY):Gs=Hs=0,ln=n),Hs)},movementY:function(n){return"movementY"in n?n.movementY:Gs}}),ma=jt(ns),Wl=ae({},ns,{dataTransfer:0}),Hl=jt(Wl),Ks=ae({},ni,{relatedTarget:0}),Dt=jt(Ks),Gl=ae({},Jn,{animationName:0,elapsedTime:0,pseudoElement:0}),Kl=jt(Gl),ri=ae({},Jn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),u=jt(ri),m=ae({},Jn,{data:0}),_=jt(m),T={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},U={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function se(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=$[n])?!!i[n]:!1}function Pe(){return se}var ut=ae({},ni,{key:function(n){if(n.key){var i=T[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=es(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?U[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pe,charCode:function(n){return n.type==="keypress"?es(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?es(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Ke=jt(ut),gt=ae({},ns,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),un=jt(gt),Tr=ae({},ni,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pe}),Zn=jt(Tr),er=ae({},Jn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qs=jt(er),ga=ae({},ns,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),uE=jt(ga),cE=[9,13,27,32],th=f&&"CompositionEvent"in window,ya=null;f&&"documentMode"in document&&(ya=document.documentMode);var hE=f&&"TextEvent"in window&&!ya,yp=f&&(!th||ya&&8<ya&&11>=ya),_p=" ",vp=!1;function wp(n,i){switch(n){case"keyup":return cE.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ep(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Xs=!1;function dE(n,i){switch(n){case"compositionend":return Ep(i);case"keypress":return i.which!==32?null:(vp=!0,_p);case"textInput":return n=i.data,n===_p&&vp?null:n;default:return null}}function fE(n,i){if(Xs)return n==="compositionend"||!th&&wp(n,i)?(n=ql(),Er=qs=an=null,Xs=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return yp&&i.locale!=="ko"?null:i.data;default:return null}}var pE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tp(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!pE[n.type]:i==="textarea"}function Ip(n,i,a,c){Kr(c),i=Zl(i,"onChange"),0<i.length&&(a=new ts("onChange","change",null,a,c),n.push({event:a,listeners:i}))}var _a=null,va=null;function mE(n){zp(n,0)}function Ql(n){var i=to(n);if(Go(i))return n}function gE(n,i){if(n==="change")return i}var Sp=!1;if(f){var nh;if(f){var rh="oninput"in document;if(!rh){var Ap=document.createElement("div");Ap.setAttribute("oninput","return;"),rh=typeof Ap.oninput=="function"}nh=rh}else nh=!1;Sp=nh&&(!document.documentMode||9<document.documentMode)}function Rp(){_a&&(_a.detachEvent("onpropertychange",Cp),va=_a=null)}function Cp(n){if(n.propertyName==="value"&&Ql(va)){var i=[];Ip(i,va,n,Os(n)),Dl(mE,i)}}function yE(n,i,a){n==="focusin"?(Rp(),_a=i,va=a,_a.attachEvent("onpropertychange",Cp)):n==="focusout"&&Rp()}function _E(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Ql(va)}function vE(n,i){if(n==="click")return Ql(i)}function wE(n,i){if(n==="input"||n==="change")return Ql(i)}function EE(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Nn=typeof Object.is=="function"?Object.is:EE;function wa(n,i){if(Nn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),c=Object.keys(i);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!g.call(i,d)||!Nn(n[d],i[d]))return!1}return!0}function Pp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function kp(n,i){var a=Pp(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=i&&c>=i)return{node:a,offset:i-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Pp(a)}}function Np(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Np(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function xp(){for(var n=window,i=Br();i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=Br(n.document)}return i}function ih(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function TE(n){var i=xp(),a=n.focusedElem,c=n.selectionRange;if(i!==a&&a&&a.ownerDocument&&Np(a.ownerDocument.documentElement,a)){if(c!==null&&ih(a)){if(i=c.start,n=c.end,n===void 0&&(n=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(n,a.value.length);else if(n=(i=a.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,p=Math.min(c.start,d);c=c.end===void 0?p:Math.min(c.end,d),!n.extend&&p>c&&(d=c,c=p,p=d),d=kp(a,p);var v=kp(a,c);d&&v&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==v.node||n.focusOffset!==v.offset)&&(i=i.createRange(),i.setStart(d.node,d.offset),n.removeAllRanges(),p>c?(n.addRange(i),n.extend(v.node,v.offset)):(i.setEnd(v.node,v.offset),n.addRange(i)))}}for(i=[],n=a;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)n=i[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var IE=f&&"documentMode"in document&&11>=document.documentMode,Ys=null,sh=null,Ea=null,oh=!1;function Dp(n,i,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;oh||Ys==null||Ys!==Br(c)||(c=Ys,"selectionStart"in c&&ih(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ea&&wa(Ea,c)||(Ea=c,c=Zl(sh,"onSelect"),0<c.length&&(i=new ts("onSelect","select",null,i,a),n.push({event:i,listeners:c}),i.target=Ys)))}function Xl(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var Js={animationend:Xl("Animation","AnimationEnd"),animationiteration:Xl("Animation","AnimationIteration"),animationstart:Xl("Animation","AnimationStart"),transitionend:Xl("Transition","TransitionEnd")},ah={},Vp={};f&&(Vp=document.createElement("div").style,"AnimationEvent"in window||(delete Js.animationend.animation,delete Js.animationiteration.animation,delete Js.animationstart.animation),"TransitionEvent"in window||delete Js.transitionend.transition);function Yl(n){if(ah[n])return ah[n];if(!Js[n])return n;var i=Js[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in Vp)return ah[n]=i[a];return n}var Op=Yl("animationend"),Mp=Yl("animationiteration"),Lp=Yl("animationstart"),bp=Yl("transitionend"),Fp=new Map,jp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ii(n,i){Fp.set(n,i),l(i,[n])}for(var lh=0;lh<jp.length;lh++){var uh=jp[lh],SE=uh.toLowerCase(),AE=uh[0].toUpperCase()+uh.slice(1);ii(SE,"on"+AE)}ii(Op,"onAnimationEnd"),ii(Mp,"onAnimationIteration"),ii(Lp,"onAnimationStart"),ii("dblclick","onDoubleClick"),ii("focusin","onFocus"),ii("focusout","onBlur"),ii(bp,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ta="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),RE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ta));function Up(n,i,a){var c=n.type||"unknown-event";n.currentTarget=a,ea(c,i,void 0,n),n.currentTarget=null}function zp(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],d=c.event;c=c.listeners;e:{var p=void 0;if(i)for(var v=c.length-1;0<=v;v--){var A=c[v],D=A.instance,B=A.currentTarget;if(A=A.listener,D!==p&&d.isPropagationStopped())break e;Up(d,A,B),p=D}else for(v=0;v<c.length;v++){if(A=c[v],D=A.instance,B=A.currentTarget,A=A.listener,D!==p&&d.isPropagationStopped())break e;Up(d,A,B),p=D}}}if(Ms)throw n=_n,Ms=!1,_n=null,n}function Ze(n,i){var a=i[yh];a===void 0&&(a=i[yh]=new Set);var c=n+"__bubble";a.has(c)||(Bp(i,n,2,!1),a.add(c))}function ch(n,i,a){var c=0;i&&(c|=4),Bp(a,n,c,i)}var Jl="_reactListening"+Math.random().toString(36).slice(2);function Ia(n){if(!n[Jl]){n[Jl]=!0,s.forEach(function(a){a!=="selectionchange"&&(RE.has(a)||ch(a,!1,n),ch(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Jl]||(i[Jl]=!0,ch("selectionchange",!1,i))}}function Bp(n,i,a,c){switch($s(i)){case 1:var d=Qn;break;case 4:d=$l;break;default:d=fa}a=d.bind(null,i,a,n),d=void 0,!Xr||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(i,a,{capture:!0,passive:d}):n.addEventListener(i,a,!0):d!==void 0?n.addEventListener(i,a,{passive:d}):n.addEventListener(i,a,!1)}function hh(n,i,a,c,d){var p=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var A=c.stateNode.containerInfo;if(A===d||A.nodeType===8&&A.parentNode===d)break;if(v===4)for(v=c.return;v!==null;){var D=v.tag;if((D===3||D===4)&&(D=v.stateNode.containerInfo,D===d||D.nodeType===8&&D.parentNode===d))return;v=v.return}for(;A!==null;){if(v=rs(A),v===null)return;if(D=v.tag,D===5||D===6){c=p=v;continue e}A=A.parentNode}}c=c.return}Dl(function(){var B=p,Y=Os(a),Z=[];e:{var X=Fp.get(n);if(X!==void 0){var le=ts,de=n;switch(n){case"keypress":if(es(a)===0)break e;case"keydown":case"keyup":le=Ke;break;case"focusin":de="focus",le=Dt;break;case"focusout":de="blur",le=Dt;break;case"beforeblur":case"afterblur":le=Dt;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=ma;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=Hl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=Zn;break;case Op:case Mp:case Lp:le=Kl;break;case bp:le=Qs;break;case"scroll":le=Ws;break;case"wheel":le=uE;break;case"copy":case"cut":case"paste":le=u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=un}var pe=(i&4)!==0,ct=!pe&&n==="scroll",F=pe?X!==null?X+"Capture":null:X;pe=[];for(var V=B,z;V!==null;){z=V;var ne=z.stateNode;if(z.tag===5&&ne!==null&&(z=ne,F!==null&&(ne=qi(V,F),ne!=null&&pe.push(Sa(V,ne,z)))),ct)break;V=V.return}0<pe.length&&(X=new le(X,de,null,a,Y),Z.push({event:X,listeners:pe}))}}if((i&7)===0){e:{if(X=n==="mouseover"||n==="pointerover",le=n==="mouseout"||n==="pointerout",X&&a!==Gr&&(de=a.relatedTarget||a.fromElement)&&(rs(de)||de[Ir]))break e;if((le||X)&&(X=Y.window===Y?Y:(X=Y.ownerDocument)?X.defaultView||X.parentWindow:window,le?(de=a.relatedTarget||a.toElement,le=B,de=de?rs(de):null,de!==null&&(ct=Pn(de),de!==ct||de.tag!==5&&de.tag!==6)&&(de=null)):(le=null,de=B),le!==de)){if(pe=ma,ne="onMouseLeave",F="onMouseEnter",V="mouse",(n==="pointerout"||n==="pointerover")&&(pe=un,ne="onPointerLeave",F="onPointerEnter",V="pointer"),ct=le==null?X:to(le),z=de==null?X:to(de),X=new pe(ne,V+"leave",le,a,Y),X.target=ct,X.relatedTarget=z,ne=null,rs(Y)===B&&(pe=new pe(F,V+"enter",de,a,Y),pe.target=z,pe.relatedTarget=ct,ne=pe),ct=ne,le&&de)t:{for(pe=le,F=de,V=0,z=pe;z;z=Zs(z))V++;for(z=0,ne=F;ne;ne=Zs(ne))z++;for(;0<V-z;)pe=Zs(pe),V--;for(;0<z-V;)F=Zs(F),z--;for(;V--;){if(pe===F||F!==null&&pe===F.alternate)break t;pe=Zs(pe),F=Zs(F)}pe=null}else pe=null;le!==null&&$p(Z,X,le,pe,!1),de!==null&&ct!==null&&$p(Z,ct,de,pe,!0)}}e:{if(X=B?to(B):window,le=X.nodeName&&X.nodeName.toLowerCase(),le==="select"||le==="input"&&X.type==="file")var me=gE;else if(Tp(X))if(Sp)me=wE;else{me=_E;var ve=yE}else(le=X.nodeName)&&le.toLowerCase()==="input"&&(X.type==="checkbox"||X.type==="radio")&&(me=vE);if(me&&(me=me(n,B))){Ip(Z,me,a,Y);break e}ve&&ve(n,X,B),n==="focusout"&&(ve=X._wrapperState)&&ve.controlled&&X.type==="number"&&mt(X,"number",X.value)}switch(ve=B?to(B):window,n){case"focusin":(Tp(ve)||ve.contentEditable==="true")&&(Ys=ve,sh=B,Ea=null);break;case"focusout":Ea=sh=Ys=null;break;case"mousedown":oh=!0;break;case"contextmenu":case"mouseup":case"dragend":oh=!1,Dp(Z,a,Y);break;case"selectionchange":if(IE)break;case"keydown":case"keyup":Dp(Z,a,Y)}var we;if(th)e:{switch(n){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else Xs?wp(n,a)&&(Te="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Te="onCompositionStart");Te&&(yp&&a.locale!=="ko"&&(Xs||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&Xs&&(we=ql()):(an=Y,qs="value"in an?an.value:an.textContent,Xs=!0)),ve=Zl(B,Te),0<ve.length&&(Te=new _(Te,n,null,a,Y),Z.push({event:Te,listeners:ve}),we?Te.data=we:(we=Ep(a),we!==null&&(Te.data=we)))),(we=hE?dE(n,a):fE(n,a))&&(B=Zl(B,"onBeforeInput"),0<B.length&&(Y=new _("onBeforeInput","beforeinput",null,a,Y),Z.push({event:Y,listeners:B}),Y.data=we))}zp(Z,i)})}function Sa(n,i,a){return{instance:n,listener:i,currentTarget:a}}function Zl(n,i){for(var a=i+"Capture",c=[];n!==null;){var d=n,p=d.stateNode;d.tag===5&&p!==null&&(d=p,p=qi(n,a),p!=null&&c.unshift(Sa(n,p,d)),p=qi(n,i),p!=null&&c.push(Sa(n,p,d))),n=n.return}return c}function Zs(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function $p(n,i,a,c,d){for(var p=i._reactName,v=[];a!==null&&a!==c;){var A=a,D=A.alternate,B=A.stateNode;if(D!==null&&D===c)break;A.tag===5&&B!==null&&(A=B,d?(D=qi(a,p),D!=null&&v.unshift(Sa(a,D,A))):d||(D=qi(a,p),D!=null&&v.push(Sa(a,D,A)))),a=a.return}v.length!==0&&n.push({event:i,listeners:v})}var CE=/\r\n?/g,PE=/\u0000|\uFFFD/g;function qp(n){return(typeof n=="string"?n:""+n).replace(CE,`
`).replace(PE,"")}function eu(n,i,a){if(i=qp(i),qp(n)!==i&&a)throw Error(t(425))}function tu(){}var dh=null,fh=null;function ph(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var mh=typeof setTimeout=="function"?setTimeout:void 0,kE=typeof clearTimeout=="function"?clearTimeout:void 0,Wp=typeof Promise=="function"?Promise:void 0,NE=typeof queueMicrotask=="function"?queueMicrotask:typeof Wp<"u"?function(n){return Wp.resolve(null).then(n).catch(xE)}:mh;function xE(n){setTimeout(function(){throw n})}function gh(n,i){var a=i,c=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){n.removeChild(d),ti(i);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);ti(i)}function si(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function Hp(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}var eo=Math.random().toString(36).slice(2),tr="__reactFiber$"+eo,Aa="__reactProps$"+eo,Ir="__reactContainer$"+eo,yh="__reactEvents$"+eo,DE="__reactListeners$"+eo,VE="__reactHandles$"+eo;function rs(n){var i=n[tr];if(i)return i;for(var a=n.parentNode;a;){if(i=a[Ir]||a[tr]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=Hp(n);n!==null;){if(a=n[tr])return a;n=Hp(n)}return i}n=a,a=n.parentNode}return null}function Ra(n){return n=n[tr]||n[Ir],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function to(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function nu(n){return n[Aa]||null}var _h=[],no=-1;function oi(n){return{current:n}}function et(n){0>no||(n.current=_h[no],_h[no]=null,no--)}function Ye(n,i){no++,_h[no]=n.current,n.current=i}var ai={},Ut=oi(ai),Xt=oi(!1),is=ai;function ro(n,i){var a=n.type.contextTypes;if(!a)return ai;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===i)return c.__reactInternalMemoizedMaskedChildContext;var d={},p;for(p in a)d[p]=i[p];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=d),d}function Yt(n){return n=n.childContextTypes,n!=null}function ru(){et(Xt),et(Ut)}function Gp(n,i,a){if(Ut.current!==ai)throw Error(t(168));Ye(Ut,i),Ye(Xt,a)}function Kp(n,i,a){var c=n.stateNode;if(i=i.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in i))throw Error(t(108,Be(n)||"Unknown",d));return ae({},a,c)}function iu(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ai,is=Ut.current,Ye(Ut,n),Ye(Xt,Xt.current),!0}function Qp(n,i,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=Kp(n,i,is),c.__reactInternalMemoizedMergedChildContext=n,et(Xt),et(Ut),Ye(Ut,n)):et(Xt),Ye(Xt,a)}var Sr=null,su=!1,vh=!1;function Xp(n){Sr===null?Sr=[n]:Sr.push(n)}function OE(n){su=!0,Xp(n)}function li(){if(!vh&&Sr!==null){vh=!0;var n=0,i=Fe;try{var a=Sr;for(Fe=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}Sr=null,su=!1}catch(d){throw Sr!==null&&(Sr=Sr.slice(n+1)),na(bs,li),d}finally{Fe=i,vh=!1}}return null}var io=[],so=0,ou=null,au=0,wn=[],En=0,ss=null,Ar=1,Rr="";function os(n,i){io[so++]=au,io[so++]=ou,ou=n,au=i}function Yp(n,i,a){wn[En++]=Ar,wn[En++]=Rr,wn[En++]=ss,ss=n;var c=Ar;n=Rr;var d=32-sn(c)-1;c&=~(1<<d),a+=1;var p=32-sn(i)+d;if(30<p){var v=d-d%5;p=(c&(1<<v)-1).toString(32),c>>=v,d-=v,Ar=1<<32-sn(i)+d|a<<d|c,Rr=p+n}else Ar=1<<p|a<<d|c,Rr=n}function wh(n){n.return!==null&&(os(n,1),Yp(n,1,0))}function Eh(n){for(;n===ou;)ou=io[--so],io[so]=null,au=io[--so],io[so]=null;for(;n===ss;)ss=wn[--En],wn[En]=null,Rr=wn[--En],wn[En]=null,Ar=wn[--En],wn[En]=null}var cn=null,hn=null,nt=!1,xn=null;function Jp(n,i){var a=An(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=n,i=n.deletions,i===null?(n.deletions=[a],n.flags|=16):i.push(a)}function Zp(n,i){switch(n.tag){case 5:var a=n.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,cn=n,hn=si(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,cn=n,hn=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=ss!==null?{id:Ar,overflow:Rr}:null,n.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=An(18,null,null,0),a.stateNode=i,a.return=n,n.child=a,cn=n,hn=null,!0):!1;default:return!1}}function Th(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Ih(n){if(nt){var i=hn;if(i){var a=i;if(!Zp(n,i)){if(Th(n))throw Error(t(418));i=si(a.nextSibling);var c=cn;i&&Zp(n,i)?Jp(c,a):(n.flags=n.flags&-4097|2,nt=!1,cn=n)}}else{if(Th(n))throw Error(t(418));n.flags=n.flags&-4097|2,nt=!1,cn=n}}}function em(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;cn=n}function lu(n){if(n!==cn)return!1;if(!nt)return em(n),nt=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!ph(n.type,n.memoizedProps)),i&&(i=hn)){if(Th(n))throw tm(),Error(t(418));for(;i;)Jp(n,i),i=si(i.nextSibling)}if(em(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(i===0){hn=si(n.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}n=n.nextSibling}hn=null}}else hn=cn?si(n.stateNode.nextSibling):null;return!0}function tm(){for(var n=hn;n;)n=si(n.nextSibling)}function oo(){hn=cn=null,nt=!1}function Sh(n){xn===null?xn=[n]:xn.push(n)}var ME=ee.ReactCurrentBatchConfig;function Ca(n,i,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var d=c,p=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===p?i.ref:(i=function(v){var A=d.refs;v===null?delete A[p]:A[p]=v},i._stringRef=p,i)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function uu(n,i){throw n=Object.prototype.toString.call(i),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function nm(n){var i=n._init;return i(n._payload)}function rm(n){function i(F,V){if(n){var z=F.deletions;z===null?(F.deletions=[V],F.flags|=16):z.push(V)}}function a(F,V){if(!n)return null;for(;V!==null;)i(F,V),V=V.sibling;return null}function c(F,V){for(F=new Map;V!==null;)V.key!==null?F.set(V.key,V):F.set(V.index,V),V=V.sibling;return F}function d(F,V){return F=gi(F,V),F.index=0,F.sibling=null,F}function p(F,V,z){return F.index=z,n?(z=F.alternate,z!==null?(z=z.index,z<V?(F.flags|=2,V):z):(F.flags|=2,V)):(F.flags|=1048576,V)}function v(F){return n&&F.alternate===null&&(F.flags|=2),F}function A(F,V,z,ne){return V===null||V.tag!==6?(V=md(z,F.mode,ne),V.return=F,V):(V=d(V,z),V.return=F,V)}function D(F,V,z,ne){var me=z.type;return me===C?Y(F,V,z.props.children,ne,z.key):V!==null&&(V.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===je&&nm(me)===V.type)?(ne=d(V,z.props),ne.ref=Ca(F,V,z),ne.return=F,ne):(ne=Vu(z.type,z.key,z.props,null,F.mode,ne),ne.ref=Ca(F,V,z),ne.return=F,ne)}function B(F,V,z,ne){return V===null||V.tag!==4||V.stateNode.containerInfo!==z.containerInfo||V.stateNode.implementation!==z.implementation?(V=gd(z,F.mode,ne),V.return=F,V):(V=d(V,z.children||[]),V.return=F,V)}function Y(F,V,z,ne,me){return V===null||V.tag!==7?(V=ps(z,F.mode,ne,me),V.return=F,V):(V=d(V,z),V.return=F,V)}function Z(F,V,z){if(typeof V=="string"&&V!==""||typeof V=="number")return V=md(""+V,F.mode,z),V.return=F,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case ie:return z=Vu(V.type,V.key,V.props,null,F.mode,z),z.ref=Ca(F,null,V),z.return=F,z;case J:return V=gd(V,F.mode,z),V.return=F,V;case je:var ne=V._init;return Z(F,ne(V._payload),z)}if(lt(V)||ge(V))return V=ps(V,F.mode,z,null),V.return=F,V;uu(F,V)}return null}function X(F,V,z,ne){var me=V!==null?V.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return me!==null?null:A(F,V,""+z,ne);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case ie:return z.key===me?D(F,V,z,ne):null;case J:return z.key===me?B(F,V,z,ne):null;case je:return me=z._init,X(F,V,me(z._payload),ne)}if(lt(z)||ge(z))return me!==null?null:Y(F,V,z,ne,null);uu(F,z)}return null}function le(F,V,z,ne,me){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return F=F.get(z)||null,A(V,F,""+ne,me);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case ie:return F=F.get(ne.key===null?z:ne.key)||null,D(V,F,ne,me);case J:return F=F.get(ne.key===null?z:ne.key)||null,B(V,F,ne,me);case je:var ve=ne._init;return le(F,V,z,ve(ne._payload),me)}if(lt(ne)||ge(ne))return F=F.get(z)||null,Y(V,F,ne,me,null);uu(V,ne)}return null}function de(F,V,z,ne){for(var me=null,ve=null,we=V,Te=V=0,Pt=null;we!==null&&Te<z.length;Te++){we.index>Te?(Pt=we,we=null):Pt=we.sibling;var qe=X(F,we,z[Te],ne);if(qe===null){we===null&&(we=Pt);break}n&&we&&qe.alternate===null&&i(F,we),V=p(qe,V,Te),ve===null?me=qe:ve.sibling=qe,ve=qe,we=Pt}if(Te===z.length)return a(F,we),nt&&os(F,Te),me;if(we===null){for(;Te<z.length;Te++)we=Z(F,z[Te],ne),we!==null&&(V=p(we,V,Te),ve===null?me=we:ve.sibling=we,ve=we);return nt&&os(F,Te),me}for(we=c(F,we);Te<z.length;Te++)Pt=le(we,F,Te,z[Te],ne),Pt!==null&&(n&&Pt.alternate!==null&&we.delete(Pt.key===null?Te:Pt.key),V=p(Pt,V,Te),ve===null?me=Pt:ve.sibling=Pt,ve=Pt);return n&&we.forEach(function(yi){return i(F,yi)}),nt&&os(F,Te),me}function pe(F,V,z,ne){var me=ge(z);if(typeof me!="function")throw Error(t(150));if(z=me.call(z),z==null)throw Error(t(151));for(var ve=me=null,we=V,Te=V=0,Pt=null,qe=z.next();we!==null&&!qe.done;Te++,qe=z.next()){we.index>Te?(Pt=we,we=null):Pt=we.sibling;var yi=X(F,we,qe.value,ne);if(yi===null){we===null&&(we=Pt);break}n&&we&&yi.alternate===null&&i(F,we),V=p(yi,V,Te),ve===null?me=yi:ve.sibling=yi,ve=yi,we=Pt}if(qe.done)return a(F,we),nt&&os(F,Te),me;if(we===null){for(;!qe.done;Te++,qe=z.next())qe=Z(F,qe.value,ne),qe!==null&&(V=p(qe,V,Te),ve===null?me=qe:ve.sibling=qe,ve=qe);return nt&&os(F,Te),me}for(we=c(F,we);!qe.done;Te++,qe=z.next())qe=le(we,F,Te,qe.value,ne),qe!==null&&(n&&qe.alternate!==null&&we.delete(qe.key===null?Te:qe.key),V=p(qe,V,Te),ve===null?me=qe:ve.sibling=qe,ve=qe);return n&&we.forEach(function(p0){return i(F,p0)}),nt&&os(F,Te),me}function ct(F,V,z,ne){if(typeof z=="object"&&z!==null&&z.type===C&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case ie:e:{for(var me=z.key,ve=V;ve!==null;){if(ve.key===me){if(me=z.type,me===C){if(ve.tag===7){a(F,ve.sibling),V=d(ve,z.props.children),V.return=F,F=V;break e}}else if(ve.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===je&&nm(me)===ve.type){a(F,ve.sibling),V=d(ve,z.props),V.ref=Ca(F,ve,z),V.return=F,F=V;break e}a(F,ve);break}else i(F,ve);ve=ve.sibling}z.type===C?(V=ps(z.props.children,F.mode,ne,z.key),V.return=F,F=V):(ne=Vu(z.type,z.key,z.props,null,F.mode,ne),ne.ref=Ca(F,V,z),ne.return=F,F=ne)}return v(F);case J:e:{for(ve=z.key;V!==null;){if(V.key===ve)if(V.tag===4&&V.stateNode.containerInfo===z.containerInfo&&V.stateNode.implementation===z.implementation){a(F,V.sibling),V=d(V,z.children||[]),V.return=F,F=V;break e}else{a(F,V);break}else i(F,V);V=V.sibling}V=gd(z,F.mode,ne),V.return=F,F=V}return v(F);case je:return ve=z._init,ct(F,V,ve(z._payload),ne)}if(lt(z))return de(F,V,z,ne);if(ge(z))return pe(F,V,z,ne);uu(F,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,V!==null&&V.tag===6?(a(F,V.sibling),V=d(V,z),V.return=F,F=V):(a(F,V),V=md(z,F.mode,ne),V.return=F,F=V),v(F)):a(F,V)}return ct}var ao=rm(!0),im=rm(!1),cu=oi(null),hu=null,lo=null,Ah=null;function Rh(){Ah=lo=hu=null}function Ch(n){var i=cu.current;et(cu),n._currentValue=i}function Ph(n,i,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),n===a)break;n=n.return}}function uo(n,i){hu=n,Ah=lo=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&i)!==0&&(Jt=!0),n.firstContext=null)}function Tn(n){var i=n._currentValue;if(Ah!==n)if(n={context:n,memoizedValue:i,next:null},lo===null){if(hu===null)throw Error(t(308));lo=n,hu.dependencies={lanes:0,firstContext:n}}else lo=lo.next=n;return i}var as=null;function kh(n){as===null?as=[n]:as.push(n)}function sm(n,i,a,c){var d=i.interleaved;return d===null?(a.next=a,kh(i)):(a.next=d.next,d.next=a),i.interleaved=a,Cr(n,c)}function Cr(n,i){n.lanes|=i;var a=n.alternate;for(a!==null&&(a.lanes|=i),a=n,n=n.return;n!==null;)n.childLanes|=i,a=n.alternate,a!==null&&(a.childLanes|=i),a=n,n=n.return;return a.tag===3?a.stateNode:null}var ui=!1;function Nh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function om(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Pr(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function ci(n,i,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,($e&2)!==0){var d=c.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),c.pending=i,Cr(n,a)}return d=c.interleaved,d===null?(i.next=i,kh(c)):(i.next=d.next,d.next=i),c.interleaved=i,Cr(n,a)}function du(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,la(n,a)}}function am(n,i){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var v={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};p===null?d=p=v:p=p.next=v,a=a.next}while(a!==null);p===null?d=p=i:p=p.next=i}else d=p=i;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}function fu(n,i,a,c){var d=n.updateQueue;ui=!1;var p=d.firstBaseUpdate,v=d.lastBaseUpdate,A=d.shared.pending;if(A!==null){d.shared.pending=null;var D=A,B=D.next;D.next=null,v===null?p=B:v.next=B,v=D;var Y=n.alternate;Y!==null&&(Y=Y.updateQueue,A=Y.lastBaseUpdate,A!==v&&(A===null?Y.firstBaseUpdate=B:A.next=B,Y.lastBaseUpdate=D))}if(p!==null){var Z=d.baseState;v=0,Y=B=D=null,A=p;do{var X=A.lane,le=A.eventTime;if((c&X)===X){Y!==null&&(Y=Y.next={eventTime:le,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});e:{var de=n,pe=A;switch(X=i,le=a,pe.tag){case 1:if(de=pe.payload,typeof de=="function"){Z=de.call(le,Z,X);break e}Z=de;break e;case 3:de.flags=de.flags&-65537|128;case 0:if(de=pe.payload,X=typeof de=="function"?de.call(le,Z,X):de,X==null)break e;Z=ae({},Z,X);break e;case 2:ui=!0}}A.callback!==null&&A.lane!==0&&(n.flags|=64,X=d.effects,X===null?d.effects=[A]:X.push(A))}else le={eventTime:le,lane:X,tag:A.tag,payload:A.payload,callback:A.callback,next:null},Y===null?(B=Y=le,D=Z):Y=Y.next=le,v|=X;if(A=A.next,A===null){if(A=d.shared.pending,A===null)break;X=A,A=X.next,X.next=null,d.lastBaseUpdate=X,d.shared.pending=null}}while(!0);if(Y===null&&(D=Z),d.baseState=D,d.firstBaseUpdate=B,d.lastBaseUpdate=Y,i=d.shared.interleaved,i!==null){d=i;do v|=d.lane,d=d.next;while(d!==i)}else p===null&&(d.shared.lanes=0);cs|=v,n.lanes=v,n.memoizedState=Z}}function lm(n,i,a){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var c=n[i],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var Pa={},nr=oi(Pa),ka=oi(Pa),Na=oi(Pa);function ls(n){if(n===Pa)throw Error(t(174));return n}function xh(n,i){switch(Ye(Na,i),Ye(ka,n),Ye(nr,Pa),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:xs(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=xs(i,n)}et(nr),Ye(nr,i)}function co(){et(nr),et(ka),et(Na)}function um(n){ls(Na.current);var i=ls(nr.current),a=xs(i,n.type);i!==a&&(Ye(ka,n),Ye(nr,a))}function Dh(n){ka.current===n&&(et(nr),et(ka))}var rt=oi(0);function pu(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Vh=[];function Oh(){for(var n=0;n<Vh.length;n++)Vh[n]._workInProgressVersionPrimary=null;Vh.length=0}var mu=ee.ReactCurrentDispatcher,Mh=ee.ReactCurrentBatchConfig,us=0,it=null,Et=null,Rt=null,gu=!1,xa=!1,Da=0,LE=0;function zt(){throw Error(t(321))}function Lh(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!Nn(n[a],i[a]))return!1;return!0}function bh(n,i,a,c,d,p){if(us=p,it=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,mu.current=n===null||n.memoizedState===null?UE:zE,n=a(c,d),xa){p=0;do{if(xa=!1,Da=0,25<=p)throw Error(t(301));p+=1,Rt=Et=null,i.updateQueue=null,mu.current=BE,n=a(c,d)}while(xa)}if(mu.current=vu,i=Et!==null&&Et.next!==null,us=0,Rt=Et=it=null,gu=!1,i)throw Error(t(300));return n}function Fh(){var n=Da!==0;return Da=0,n}function rr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?it.memoizedState=Rt=n:Rt=Rt.next=n,Rt}function In(){if(Et===null){var n=it.alternate;n=n!==null?n.memoizedState:null}else n=Et.next;var i=Rt===null?it.memoizedState:Rt.next;if(i!==null)Rt=i,Et=n;else{if(n===null)throw Error(t(310));Et=n,n={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},Rt===null?it.memoizedState=Rt=n:Rt=Rt.next=n}return Rt}function Va(n,i){return typeof i=="function"?i(n):i}function jh(n){var i=In(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=Et,d=c.baseQueue,p=a.pending;if(p!==null){if(d!==null){var v=d.next;d.next=p.next,p.next=v}c.baseQueue=d=p,a.pending=null}if(d!==null){p=d.next,c=c.baseState;var A=v=null,D=null,B=p;do{var Y=B.lane;if((us&Y)===Y)D!==null&&(D=D.next={lane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),c=B.hasEagerState?B.eagerState:n(c,B.action);else{var Z={lane:Y,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null};D===null?(A=D=Z,v=c):D=D.next=Z,it.lanes|=Y,cs|=Y}B=B.next}while(B!==null&&B!==p);D===null?v=c:D.next=A,Nn(c,i.memoizedState)||(Jt=!0),i.memoizedState=c,i.baseState=v,i.baseQueue=D,a.lastRenderedState=c}if(n=a.interleaved,n!==null){d=n;do p=d.lane,it.lanes|=p,cs|=p,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function Uh(n){var i=In(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,d=a.pending,p=i.memoizedState;if(d!==null){a.pending=null;var v=d=d.next;do p=n(p,v.action),v=v.next;while(v!==d);Nn(p,i.memoizedState)||(Jt=!0),i.memoizedState=p,i.baseQueue===null&&(i.baseState=p),a.lastRenderedState=p}return[p,c]}function cm(){}function hm(n,i){var a=it,c=In(),d=i(),p=!Nn(c.memoizedState,d);if(p&&(c.memoizedState=d,Jt=!0),c=c.queue,zh(pm.bind(null,a,c,n),[n]),c.getSnapshot!==i||p||Rt!==null&&Rt.memoizedState.tag&1){if(a.flags|=2048,Oa(9,fm.bind(null,a,c,d,i),void 0,null),Ct===null)throw Error(t(349));(us&30)!==0||dm(a,i,d)}return d}function dm(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=it.updateQueue,i===null?(i={lastEffect:null,stores:null},it.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function fm(n,i,a,c){i.value=a,i.getSnapshot=c,mm(i)&&gm(n)}function pm(n,i,a){return a(function(){mm(i)&&gm(n)})}function mm(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!Nn(n,a)}catch{return!0}}function gm(n){var i=Cr(n,1);i!==null&&Mn(i,n,1,-1)}function ym(n){var i=rr();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Va,lastRenderedState:n},i.queue=n,n=n.dispatch=jE.bind(null,it,n),[i.memoizedState,n]}function Oa(n,i,a,c){return n={tag:n,create:i,destroy:a,deps:c,next:null},i=it.updateQueue,i===null?(i={lastEffect:null,stores:null},it.updateQueue=i,i.lastEffect=n.next=n):(a=i.lastEffect,a===null?i.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,i.lastEffect=n)),n}function _m(){return In().memoizedState}function yu(n,i,a,c){var d=rr();it.flags|=n,d.memoizedState=Oa(1|i,a,void 0,c===void 0?null:c)}function _u(n,i,a,c){var d=In();c=c===void 0?null:c;var p=void 0;if(Et!==null){var v=Et.memoizedState;if(p=v.destroy,c!==null&&Lh(c,v.deps)){d.memoizedState=Oa(i,a,p,c);return}}it.flags|=n,d.memoizedState=Oa(1|i,a,p,c)}function vm(n,i){return yu(8390656,8,n,i)}function zh(n,i){return _u(2048,8,n,i)}function wm(n,i){return _u(4,2,n,i)}function Em(n,i){return _u(4,4,n,i)}function Tm(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Im(n,i,a){return a=a!=null?a.concat([n]):null,_u(4,4,Tm.bind(null,i,n),a)}function Bh(){}function Sm(n,i){var a=In();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&Lh(i,c[1])?c[0]:(a.memoizedState=[n,i],n)}function Am(n,i){var a=In();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&Lh(i,c[1])?c[0]:(n=n(),a.memoizedState=[n,i],n)}function Rm(n,i,a){return(us&21)===0?(n.baseState&&(n.baseState=!1,Jt=!0),n.memoizedState=a):(Nn(a,i)||(a=oa(),it.lanes|=a,cs|=a,n.baseState=!0),i)}function bE(n,i){var a=Fe;Fe=a!==0&&4>a?a:4,n(!0);var c=Mh.transition;Mh.transition={};try{n(!1),i()}finally{Fe=a,Mh.transition=c}}function Cm(){return In().memoizedState}function FE(n,i,a){var c=pi(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},Pm(n))km(i,a);else if(a=sm(n,i,a,c),a!==null){var d=Kt();Mn(a,n,c,d),Nm(a,i,c)}}function jE(n,i,a){var c=pi(n),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(Pm(n))km(i,d);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=i.lastRenderedReducer,p!==null))try{var v=i.lastRenderedState,A=p(v,a);if(d.hasEagerState=!0,d.eagerState=A,Nn(A,v)){var D=i.interleaved;D===null?(d.next=d,kh(i)):(d.next=D.next,D.next=d),i.interleaved=d;return}}catch{}a=sm(n,i,d,c),a!==null&&(d=Kt(),Mn(a,n,c,d),Nm(a,i,c))}}function Pm(n){var i=n.alternate;return n===it||i!==null&&i===it}function km(n,i){xa=gu=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function Nm(n,i,a){if((a&4194240)!==0){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,la(n,a)}}var vu={readContext:Tn,useCallback:zt,useContext:zt,useEffect:zt,useImperativeHandle:zt,useInsertionEffect:zt,useLayoutEffect:zt,useMemo:zt,useReducer:zt,useRef:zt,useState:zt,useDebugValue:zt,useDeferredValue:zt,useTransition:zt,useMutableSource:zt,useSyncExternalStore:zt,useId:zt,unstable_isNewReconciler:!1},UE={readContext:Tn,useCallback:function(n,i){return rr().memoizedState=[n,i===void 0?null:i],n},useContext:Tn,useEffect:vm,useImperativeHandle:function(n,i,a){return a=a!=null?a.concat([n]):null,yu(4194308,4,Tm.bind(null,i,n),a)},useLayoutEffect:function(n,i){return yu(4194308,4,n,i)},useInsertionEffect:function(n,i){return yu(4,2,n,i)},useMemo:function(n,i){var a=rr();return i=i===void 0?null:i,n=n(),a.memoizedState=[n,i],n},useReducer:function(n,i,a){var c=rr();return i=a!==void 0?a(i):i,c.memoizedState=c.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},c.queue=n,n=n.dispatch=FE.bind(null,it,n),[c.memoizedState,n]},useRef:function(n){var i=rr();return n={current:n},i.memoizedState=n},useState:ym,useDebugValue:Bh,useDeferredValue:function(n){return rr().memoizedState=n},useTransition:function(){var n=ym(!1),i=n[0];return n=bE.bind(null,n[1]),rr().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,a){var c=it,d=rr();if(nt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=i(),Ct===null)throw Error(t(349));(us&30)!==0||dm(c,i,a)}d.memoizedState=a;var p={value:a,getSnapshot:i};return d.queue=p,vm(pm.bind(null,c,p,n),[n]),c.flags|=2048,Oa(9,fm.bind(null,c,p,a,i),void 0,null),a},useId:function(){var n=rr(),i=Ct.identifierPrefix;if(nt){var a=Rr,c=Ar;a=(c&~(1<<32-sn(c)-1)).toString(32)+a,i=":"+i+"R"+a,a=Da++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=LE++,i=":"+i+"r"+a.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},zE={readContext:Tn,useCallback:Sm,useContext:Tn,useEffect:zh,useImperativeHandle:Im,useInsertionEffect:wm,useLayoutEffect:Em,useMemo:Am,useReducer:jh,useRef:_m,useState:function(){return jh(Va)},useDebugValue:Bh,useDeferredValue:function(n){var i=In();return Rm(i,Et.memoizedState,n)},useTransition:function(){var n=jh(Va)[0],i=In().memoizedState;return[n,i]},useMutableSource:cm,useSyncExternalStore:hm,useId:Cm,unstable_isNewReconciler:!1},BE={readContext:Tn,useCallback:Sm,useContext:Tn,useEffect:zh,useImperativeHandle:Im,useInsertionEffect:wm,useLayoutEffect:Em,useMemo:Am,useReducer:Uh,useRef:_m,useState:function(){return Uh(Va)},useDebugValue:Bh,useDeferredValue:function(n){var i=In();return Et===null?i.memoizedState=n:Rm(i,Et.memoizedState,n)},useTransition:function(){var n=Uh(Va)[0],i=In().memoizedState;return[n,i]},useMutableSource:cm,useSyncExternalStore:hm,useId:Cm,unstable_isNewReconciler:!1};function Dn(n,i){if(n&&n.defaultProps){i=ae({},i),n=n.defaultProps;for(var a in n)i[a]===void 0&&(i[a]=n[a]);return i}return i}function $h(n,i,a,c){i=n.memoizedState,a=a(c,i),a=a==null?i:ae({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var wu={isMounted:function(n){return(n=n._reactInternals)?Pn(n)===n:!1},enqueueSetState:function(n,i,a){n=n._reactInternals;var c=Kt(),d=pi(n),p=Pr(c,d);p.payload=i,a!=null&&(p.callback=a),i=ci(n,p,d),i!==null&&(Mn(i,n,d,c),du(i,n,d))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var c=Kt(),d=pi(n),p=Pr(c,d);p.tag=1,p.payload=i,a!=null&&(p.callback=a),i=ci(n,p,d),i!==null&&(Mn(i,n,d,c),du(i,n,d))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=Kt(),c=pi(n),d=Pr(a,c);d.tag=2,i!=null&&(d.callback=i),i=ci(n,d,c),i!==null&&(Mn(i,n,c,a),du(i,n,c))}};function xm(n,i,a,c,d,p,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,p,v):i.prototype&&i.prototype.isPureReactComponent?!wa(a,c)||!wa(d,p):!0}function Dm(n,i,a){var c=!1,d=ai,p=i.contextType;return typeof p=="object"&&p!==null?p=Tn(p):(d=Yt(i)?is:Ut.current,c=i.contextTypes,p=(c=c!=null)?ro(n,d):ai),i=new i(a,p),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=wu,n.stateNode=i,i._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=p),i}function Vm(n,i,a,c){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,c),i.state!==n&&wu.enqueueReplaceState(i,i.state,null)}function qh(n,i,a,c){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs={},Nh(n);var p=i.contextType;typeof p=="object"&&p!==null?d.context=Tn(p):(p=Yt(i)?is:Ut.current,d.context=ro(n,p)),d.state=n.memoizedState,p=i.getDerivedStateFromProps,typeof p=="function"&&($h(n,i,p,a),d.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(i=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),i!==d.state&&wu.enqueueReplaceState(d,d.state,null),fu(n,a,d,c),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function ho(n,i){try{var a="",c=i;do a+=Ne(c),c=c.return;while(c);var d=a}catch(p){d=`
Error generating stack: `+p.message+`
`+p.stack}return{value:n,source:i,stack:d,digest:null}}function Wh(n,i,a){return{value:n,source:null,stack:a??null,digest:i??null}}function Hh(n,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var $E=typeof WeakMap=="function"?WeakMap:Map;function Om(n,i,a){a=Pr(-1,a),a.tag=3,a.payload={element:null};var c=i.value;return a.callback=function(){Cu||(Cu=!0,ad=c),Hh(n,i)},a}function Mm(n,i,a){a=Pr(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=i.value;a.payload=function(){return c(d)},a.callback=function(){Hh(n,i)}}var p=n.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(a.callback=function(){Hh(n,i),typeof c!="function"&&(di===null?di=new Set([this]):di.add(this));var v=i.stack;this.componentDidCatch(i.value,{componentStack:v!==null?v:""})}),a}function Lm(n,i,a){var c=n.pingCache;if(c===null){c=n.pingCache=new $E;var d=new Set;c.set(i,d)}else d=c.get(i),d===void 0&&(d=new Set,c.set(i,d));d.has(a)||(d.add(a),n=r0.bind(null,n,i,a),i.then(n,n))}function bm(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function Fm(n,i,a,c,d){return(n.mode&1)===0?(n===i?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=Pr(-1,1),i.tag=2,ci(a,i,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=d,n)}var qE=ee.ReactCurrentOwner,Jt=!1;function Gt(n,i,a,c){i.child=n===null?im(i,null,a,c):ao(i,n.child,a,c)}function jm(n,i,a,c,d){a=a.render;var p=i.ref;return uo(i,d),c=bh(n,i,a,c,p,d),a=Fh(),n!==null&&!Jt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~d,kr(n,i,d)):(nt&&a&&wh(i),i.flags|=1,Gt(n,i,c,d),i.child)}function Um(n,i,a,c,d){if(n===null){var p=a.type;return typeof p=="function"&&!pd(p)&&p.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=p,zm(n,i,p,c,d)):(n=Vu(a.type,null,c,i,i.mode,d),n.ref=i.ref,n.return=i,i.child=n)}if(p=n.child,(n.lanes&d)===0){var v=p.memoizedProps;if(a=a.compare,a=a!==null?a:wa,a(v,c)&&n.ref===i.ref)return kr(n,i,d)}return i.flags|=1,n=gi(p,c),n.ref=i.ref,n.return=i,i.child=n}function zm(n,i,a,c,d){if(n!==null){var p=n.memoizedProps;if(wa(p,c)&&n.ref===i.ref)if(Jt=!1,i.pendingProps=c=p,(n.lanes&d)!==0)(n.flags&131072)!==0&&(Jt=!0);else return i.lanes=n.lanes,kr(n,i,d)}return Gh(n,i,a,c,d)}function Bm(n,i,a){var c=i.pendingProps,d=c.children,p=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ye(po,dn),dn|=a;else{if((a&1073741824)===0)return n=p!==null?p.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,Ye(po,dn),dn|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=p!==null?p.baseLanes:a,Ye(po,dn),dn|=c}else p!==null?(c=p.baseLanes|a,i.memoizedState=null):c=a,Ye(po,dn),dn|=c;return Gt(n,i,d,a),i.child}function $m(n,i){var a=i.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function Gh(n,i,a,c,d){var p=Yt(a)?is:Ut.current;return p=ro(i,p),uo(i,d),a=bh(n,i,a,c,p,d),c=Fh(),n!==null&&!Jt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~d,kr(n,i,d)):(nt&&c&&wh(i),i.flags|=1,Gt(n,i,a,d),i.child)}function qm(n,i,a,c,d){if(Yt(a)){var p=!0;iu(i)}else p=!1;if(uo(i,d),i.stateNode===null)Tu(n,i),Dm(i,a,c),qh(i,a,c,d),c=!0;else if(n===null){var v=i.stateNode,A=i.memoizedProps;v.props=A;var D=v.context,B=a.contextType;typeof B=="object"&&B!==null?B=Tn(B):(B=Yt(a)?is:Ut.current,B=ro(i,B));var Y=a.getDerivedStateFromProps,Z=typeof Y=="function"||typeof v.getSnapshotBeforeUpdate=="function";Z||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(A!==c||D!==B)&&Vm(i,v,c,B),ui=!1;var X=i.memoizedState;v.state=X,fu(i,c,v,d),D=i.memoizedState,A!==c||X!==D||Xt.current||ui?(typeof Y=="function"&&($h(i,a,Y,c),D=i.memoizedState),(A=ui||xm(i,a,A,c,X,D,B))?(Z||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(i.flags|=4194308)):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=D),v.props=c,v.state=D,v.context=B,c=A):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{v=i.stateNode,om(n,i),A=i.memoizedProps,B=i.type===i.elementType?A:Dn(i.type,A),v.props=B,Z=i.pendingProps,X=v.context,D=a.contextType,typeof D=="object"&&D!==null?D=Tn(D):(D=Yt(a)?is:Ut.current,D=ro(i,D));var le=a.getDerivedStateFromProps;(Y=typeof le=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(A!==Z||X!==D)&&Vm(i,v,c,D),ui=!1,X=i.memoizedState,v.state=X,fu(i,c,v,d);var de=i.memoizedState;A!==Z||X!==de||Xt.current||ui?(typeof le=="function"&&($h(i,a,le,c),de=i.memoizedState),(B=ui||xm(i,a,B,c,X,de,D)||!1)?(Y||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,de,D),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,de,D)),typeof v.componentDidUpdate=="function"&&(i.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof v.componentDidUpdate!="function"||A===n.memoizedProps&&X===n.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&X===n.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=de),v.props=c,v.state=de,v.context=D,c=B):(typeof v.componentDidUpdate!="function"||A===n.memoizedProps&&X===n.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&X===n.memoizedState||(i.flags|=1024),c=!1)}return Kh(n,i,a,c,p,d)}function Kh(n,i,a,c,d,p){$m(n,i);var v=(i.flags&128)!==0;if(!c&&!v)return d&&Qp(i,a,!1),kr(n,i,p);c=i.stateNode,qE.current=i;var A=v&&typeof a.getDerivedStateFromError!="function"?null:c.render();return i.flags|=1,n!==null&&v?(i.child=ao(i,n.child,null,p),i.child=ao(i,null,A,p)):Gt(n,i,A,p),i.memoizedState=c.state,d&&Qp(i,a,!0),i.child}function Wm(n){var i=n.stateNode;i.pendingContext?Gp(n,i.pendingContext,i.pendingContext!==i.context):i.context&&Gp(n,i.context,!1),xh(n,i.containerInfo)}function Hm(n,i,a,c,d){return oo(),Sh(d),i.flags|=256,Gt(n,i,a,c),i.child}var Qh={dehydrated:null,treeContext:null,retryLane:0};function Xh(n){return{baseLanes:n,cachePool:null,transitions:null}}function Gm(n,i,a){var c=i.pendingProps,d=rt.current,p=!1,v=(i.flags&128)!==0,A;if((A=v)||(A=n!==null&&n.memoizedState===null?!1:(d&2)!==0),A?(p=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),Ye(rt,d&1),n===null)return Ih(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((i.mode&1)===0?i.lanes=1:n.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(v=c.children,n=c.fallback,p?(c=i.mode,p=i.child,v={mode:"hidden",children:v},(c&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=v):p=Ou(v,c,0,null),n=ps(n,c,a,null),p.return=i,n.return=i,p.sibling=n,i.child=p,i.child.memoizedState=Xh(a),i.memoizedState=Qh,n):Yh(i,v));if(d=n.memoizedState,d!==null&&(A=d.dehydrated,A!==null))return WE(n,i,v,c,A,d,a);if(p){p=c.fallback,v=i.mode,d=n.child,A=d.sibling;var D={mode:"hidden",children:c.children};return(v&1)===0&&i.child!==d?(c=i.child,c.childLanes=0,c.pendingProps=D,i.deletions=null):(c=gi(d,D),c.subtreeFlags=d.subtreeFlags&14680064),A!==null?p=gi(A,p):(p=ps(p,v,a,null),p.flags|=2),p.return=i,c.return=i,c.sibling=p,i.child=c,c=p,p=i.child,v=n.child.memoizedState,v=v===null?Xh(a):{baseLanes:v.baseLanes|a,cachePool:null,transitions:v.transitions},p.memoizedState=v,p.childLanes=n.childLanes&~a,i.memoizedState=Qh,c}return p=n.child,n=p.sibling,c=gi(p,{mode:"visible",children:c.children}),(i.mode&1)===0&&(c.lanes=a),c.return=i,c.sibling=null,n!==null&&(a=i.deletions,a===null?(i.deletions=[n],i.flags|=16):a.push(n)),i.child=c,i.memoizedState=null,c}function Yh(n,i){return i=Ou({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function Eu(n,i,a,c){return c!==null&&Sh(c),ao(i,n.child,null,a),n=Yh(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function WE(n,i,a,c,d,p,v){if(a)return i.flags&256?(i.flags&=-257,c=Wh(Error(t(422))),Eu(n,i,v,c)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(p=c.fallback,d=i.mode,c=Ou({mode:"visible",children:c.children},d,0,null),p=ps(p,d,v,null),p.flags|=2,c.return=i,p.return=i,c.sibling=p,i.child=c,(i.mode&1)!==0&&ao(i,n.child,null,v),i.child.memoizedState=Xh(v),i.memoizedState=Qh,p);if((i.mode&1)===0)return Eu(n,i,v,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var A=c.dgst;return c=A,p=Error(t(419)),c=Wh(p,c,void 0),Eu(n,i,v,c)}if(A=(v&n.childLanes)!==0,Jt||A){if(c=Ct,c!==null){switch(v&-v){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|v))!==0?0:d,d!==0&&d!==p.retryLane&&(p.retryLane=d,Cr(n,d),Mn(c,n,d,-1))}return fd(),c=Wh(Error(t(421))),Eu(n,i,v,c)}return d.data==="$?"?(i.flags|=128,i.child=n.child,i=i0.bind(null,n),d._reactRetry=i,null):(n=p.treeContext,hn=si(d.nextSibling),cn=i,nt=!0,xn=null,n!==null&&(wn[En++]=Ar,wn[En++]=Rr,wn[En++]=ss,Ar=n.id,Rr=n.overflow,ss=i),i=Yh(i,c.children),i.flags|=4096,i)}function Km(n,i,a){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i),Ph(n.return,i,a)}function Jh(n,i,a,c,d){var p=n.memoizedState;p===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(p.isBackwards=i,p.rendering=null,p.renderingStartTime=0,p.last=c,p.tail=a,p.tailMode=d)}function Qm(n,i,a){var c=i.pendingProps,d=c.revealOrder,p=c.tail;if(Gt(n,i,c.children,a),c=rt.current,(c&2)!==0)c=c&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Km(n,a,i);else if(n.tag===19)Km(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(Ye(rt,c),(i.mode&1)===0)i.memoizedState=null;else switch(d){case"forwards":for(a=i.child,d=null;a!==null;)n=a.alternate,n!==null&&pu(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=i.child,i.child=null):(d=a.sibling,a.sibling=null),Jh(i,!1,d,a,p);break;case"backwards":for(a=null,d=i.child,i.child=null;d!==null;){if(n=d.alternate,n!==null&&pu(n)===null){i.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}Jh(i,!0,a,null,p);break;case"together":Jh(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Tu(n,i){(i.mode&1)===0&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function kr(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),cs|=i.lanes,(a&i.childLanes)===0)return null;if(n!==null&&i.child!==n.child)throw Error(t(153));if(i.child!==null){for(n=i.child,a=gi(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=gi(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function HE(n,i,a){switch(i.tag){case 3:Wm(i),oo();break;case 5:um(i);break;case 1:Yt(i.type)&&iu(i);break;case 4:xh(i,i.stateNode.containerInfo);break;case 10:var c=i.type._context,d=i.memoizedProps.value;Ye(cu,c._currentValue),c._currentValue=d;break;case 13:if(c=i.memoizedState,c!==null)return c.dehydrated!==null?(Ye(rt,rt.current&1),i.flags|=128,null):(a&i.child.childLanes)!==0?Gm(n,i,a):(Ye(rt,rt.current&1),n=kr(n,i,a),n!==null?n.sibling:null);Ye(rt,rt.current&1);break;case 19:if(c=(a&i.childLanes)!==0,(n.flags&128)!==0){if(c)return Qm(n,i,a);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Ye(rt,rt.current),c)break;return null;case 22:case 23:return i.lanes=0,Bm(n,i,a)}return kr(n,i,a)}var Xm,Zh,Ym,Jm;Xm=function(n,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Zh=function(){},Ym=function(n,i,a,c){var d=n.memoizedProps;if(d!==c){n=i.stateNode,ls(nr.current);var p=null;switch(a){case"input":d=ks(n,d),c=ks(n,c),p=[];break;case"select":d=ae({},d,{value:void 0}),c=ae({},c,{value:void 0}),p=[];break;case"textarea":d=Qo(n,d),c=Qo(n,c),p=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=tu)}Cn(a,c);var v;a=null;for(B in d)if(!c.hasOwnProperty(B)&&d.hasOwnProperty(B)&&d[B]!=null)if(B==="style"){var A=d[B];for(v in A)A.hasOwnProperty(v)&&(a||(a={}),a[v]="")}else B!=="dangerouslySetInnerHTML"&&B!=="children"&&B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&B!=="autoFocus"&&(o.hasOwnProperty(B)?p||(p=[]):(p=p||[]).push(B,null));for(B in c){var D=c[B];if(A=d?.[B],c.hasOwnProperty(B)&&D!==A&&(D!=null||A!=null))if(B==="style")if(A){for(v in A)!A.hasOwnProperty(v)||D&&D.hasOwnProperty(v)||(a||(a={}),a[v]="");for(v in D)D.hasOwnProperty(v)&&A[v]!==D[v]&&(a||(a={}),a[v]=D[v])}else a||(p||(p=[]),p.push(B,a)),a=D;else B==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,A=A?A.__html:void 0,D!=null&&A!==D&&(p=p||[]).push(B,D)):B==="children"?typeof D!="string"&&typeof D!="number"||(p=p||[]).push(B,""+D):B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&(o.hasOwnProperty(B)?(D!=null&&B==="onScroll"&&Ze("scroll",n),p||A===D||(p=[])):(p=p||[]).push(B,D))}a&&(p=p||[]).push("style",a);var B=p;(i.updateQueue=B)&&(i.flags|=4)}},Jm=function(n,i,a,c){a!==c&&(i.flags|=4)};function Ma(n,i){if(!nt)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Bt(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(i)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=a,i}function GE(n,i,a){var c=i.pendingProps;switch(Eh(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bt(i),null;case 1:return Yt(i.type)&&ru(),Bt(i),null;case 3:return c=i.stateNode,co(),et(Xt),et(Ut),Oh(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(lu(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,xn!==null&&(cd(xn),xn=null))),Zh(n,i),Bt(i),null;case 5:Dh(i);var d=ls(Na.current);if(a=i.type,n!==null&&i.stateNode!=null)Ym(n,i,a,c,d),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!c){if(i.stateNode===null)throw Error(t(166));return Bt(i),null}if(n=ls(nr.current),lu(i)){c=i.stateNode,a=i.type;var p=i.memoizedProps;switch(c[tr]=i,c[Aa]=p,n=(i.mode&1)!==0,a){case"dialog":Ze("cancel",c),Ze("close",c);break;case"iframe":case"object":case"embed":Ze("load",c);break;case"video":case"audio":for(d=0;d<Ta.length;d++)Ze(Ta[d],c);break;case"source":Ze("error",c);break;case"img":case"image":case"link":Ze("error",c),Ze("load",c);break;case"details":Ze("toggle",c);break;case"input":Rl(c,p),Ze("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!p.multiple},Ze("invalid",c);break;case"textarea":Xo(c,p),Ze("invalid",c)}Cn(a,p),d=null;for(var v in p)if(p.hasOwnProperty(v)){var A=p[v];v==="children"?typeof A=="string"?c.textContent!==A&&(p.suppressHydrationWarning!==!0&&eu(c.textContent,A,n),d=["children",A]):typeof A=="number"&&c.textContent!==""+A&&(p.suppressHydrationWarning!==!0&&eu(c.textContent,A,n),d=["children",""+A]):o.hasOwnProperty(v)&&A!=null&&v==="onScroll"&&Ze("scroll",c)}switch(a){case"input":yn(c),Ko(c,p,!0);break;case"textarea":yn(c),$r(c);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(c.onclick=tu)}c=d,i.updateQueue=c,c!==null&&(i.flags|=4)}else{v=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Yo(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=v.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=v.createElement(a,{is:c.is}):(n=v.createElement(a),a==="select"&&(v=n,c.multiple?v.multiple=!0:c.size&&(v.size=c.size))):n=v.createElementNS(n,a),n[tr]=i,n[Aa]=c,Xm(n,i,!1,!1),i.stateNode=n;e:{switch(v=Vs(a,c),a){case"dialog":Ze("cancel",n),Ze("close",n),d=c;break;case"iframe":case"object":case"embed":Ze("load",n),d=c;break;case"video":case"audio":for(d=0;d<Ta.length;d++)Ze(Ta[d],n);d=c;break;case"source":Ze("error",n),d=c;break;case"img":case"image":case"link":Ze("error",n),Ze("load",n),d=c;break;case"details":Ze("toggle",n),d=c;break;case"input":Rl(n,c),d=ks(n,c),Ze("invalid",n);break;case"option":d=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},d=ae({},c,{value:void 0}),Ze("invalid",n);break;case"textarea":Xo(n,c),d=Qo(n,c),Ze("invalid",n);break;default:d=c}Cn(a,d),A=d;for(p in A)if(A.hasOwnProperty(p)){var D=A[p];p==="style"?Ds(n,D):p==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,D!=null&&Pl(n,D)):p==="children"?typeof D=="string"?(a!=="textarea"||D!=="")&&$i(n,D):typeof D=="number"&&$i(n,""+D):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(o.hasOwnProperty(p)?D!=null&&p==="onScroll"&&Ze("scroll",n):D!=null&&L(n,p,D,v))}switch(a){case"input":yn(n),Ko(n,c,!1);break;case"textarea":yn(n),$r(n);break;case"option":c.value!=null&&n.setAttribute("value",""+be(c.value));break;case"select":n.multiple=!!c.multiple,p=c.value,p!=null?Rn(n,!!c.multiple,p,!1):c.defaultValue!=null&&Rn(n,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=tu)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Bt(i),null;case 6:if(n&&i.stateNode!=null)Jm(n,i,n.memoizedProps,c);else{if(typeof c!="string"&&i.stateNode===null)throw Error(t(166));if(a=ls(Na.current),ls(nr.current),lu(i)){if(c=i.stateNode,a=i.memoizedProps,c[tr]=i,(p=c.nodeValue!==a)&&(n=cn,n!==null))switch(n.tag){case 3:eu(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&eu(c.nodeValue,a,(n.mode&1)!==0)}p&&(i.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[tr]=i,i.stateNode=c}return Bt(i),null;case 13:if(et(rt),c=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(nt&&hn!==null&&(i.mode&1)!==0&&(i.flags&128)===0)tm(),oo(),i.flags|=98560,p=!1;else if(p=lu(i),c!==null&&c.dehydrated!==null){if(n===null){if(!p)throw Error(t(318));if(p=i.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(t(317));p[tr]=i}else oo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Bt(i),p=!1}else xn!==null&&(cd(xn),xn=null),p=!0;if(!p)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=a,i):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(i.child.flags|=8192,(i.mode&1)!==0&&(n===null||(rt.current&1)!==0?Tt===0&&(Tt=3):fd())),i.updateQueue!==null&&(i.flags|=4),Bt(i),null);case 4:return co(),Zh(n,i),n===null&&Ia(i.stateNode.containerInfo),Bt(i),null;case 10:return Ch(i.type._context),Bt(i),null;case 17:return Yt(i.type)&&ru(),Bt(i),null;case 19:if(et(rt),p=i.memoizedState,p===null)return Bt(i),null;if(c=(i.flags&128)!==0,v=p.rendering,v===null)if(c)Ma(p,!1);else{if(Tt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(v=pu(n),v!==null){for(i.flags|=128,Ma(p,!1),c=v.updateQueue,c!==null&&(i.updateQueue=c,i.flags|=4),i.subtreeFlags=0,c=a,a=i.child;a!==null;)p=a,n=c,p.flags&=14680066,v=p.alternate,v===null?(p.childLanes=0,p.lanes=n,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=v.childLanes,p.lanes=v.lanes,p.child=v.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=v.memoizedProps,p.memoizedState=v.memoizedState,p.updateQueue=v.updateQueue,p.type=v.type,n=v.dependencies,p.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Ye(rt,rt.current&1|2),i.child}n=n.sibling}p.tail!==null&&Je()>mo&&(i.flags|=128,c=!0,Ma(p,!1),i.lanes=4194304)}else{if(!c)if(n=pu(v),n!==null){if(i.flags|=128,c=!0,a=n.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),Ma(p,!0),p.tail===null&&p.tailMode==="hidden"&&!v.alternate&&!nt)return Bt(i),null}else 2*Je()-p.renderingStartTime>mo&&a!==1073741824&&(i.flags|=128,c=!0,Ma(p,!1),i.lanes=4194304);p.isBackwards?(v.sibling=i.child,i.child=v):(a=p.last,a!==null?a.sibling=v:i.child=v,p.last=v)}return p.tail!==null?(i=p.tail,p.rendering=i,p.tail=i.sibling,p.renderingStartTime=Je(),i.sibling=null,a=rt.current,Ye(rt,c?a&1|2:a&1),i):(Bt(i),null);case 22:case 23:return dd(),c=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(i.flags|=8192),c&&(i.mode&1)!==0?(dn&1073741824)!==0&&(Bt(i),i.subtreeFlags&6&&(i.flags|=8192)):Bt(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function KE(n,i){switch(Eh(i),i.tag){case 1:return Yt(i.type)&&ru(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return co(),et(Xt),et(Ut),Oh(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 5:return Dh(i),null;case 13:if(et(rt),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(t(340));oo()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return et(rt),null;case 4:return co(),null;case 10:return Ch(i.type._context),null;case 22:case 23:return dd(),null;case 24:return null;default:return null}}var Iu=!1,$t=!1,QE=typeof WeakSet=="function"?WeakSet:Set,ce=null;function fo(n,i){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){at(n,i,c)}else a.current=null}function ed(n,i,a){try{a()}catch(c){at(n,i,c)}}var Zm=!1;function XE(n,i){if(dh=wr,n=xp(),ih(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break e}var v=0,A=-1,D=-1,B=0,Y=0,Z=n,X=null;t:for(;;){for(var le;Z!==a||d!==0&&Z.nodeType!==3||(A=v+d),Z!==p||c!==0&&Z.nodeType!==3||(D=v+c),Z.nodeType===3&&(v+=Z.nodeValue.length),(le=Z.firstChild)!==null;)X=Z,Z=le;for(;;){if(Z===n)break t;if(X===a&&++B===d&&(A=v),X===p&&++Y===c&&(D=v),(le=Z.nextSibling)!==null)break;Z=X,X=Z.parentNode}Z=le}a=A===-1||D===-1?null:{start:A,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(fh={focusedElem:n,selectionRange:a},wr=!1,ce=i;ce!==null;)if(i=ce,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,ce=n;else for(;ce!==null;){i=ce;try{var de=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(de!==null){var pe=de.memoizedProps,ct=de.memoizedState,F=i.stateNode,V=F.getSnapshotBeforeUpdate(i.elementType===i.type?pe:Dn(i.type,pe),ct);F.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var z=i.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ne){at(i,i.return,ne)}if(n=i.sibling,n!==null){n.return=i.return,ce=n;break}ce=i.return}return de=Zm,Zm=!1,de}function La(n,i,a){var c=i.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&n)===n){var p=d.destroy;d.destroy=void 0,p!==void 0&&ed(i,a,p)}d=d.next}while(d!==c)}}function Su(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==i)}}function td(n){var i=n.ref;if(i!==null){var a=n.stateNode;n.tag,n=a,typeof i=="function"?i(n):i.current=n}}function eg(n){var i=n.alternate;i!==null&&(n.alternate=null,eg(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[tr],delete i[Aa],delete i[yh],delete i[DE],delete i[VE])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function tg(n){return n.tag===5||n.tag===3||n.tag===4}function ng(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||tg(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function nd(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(n,i):a.insertBefore(n,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(n,a)):(i=a,i.appendChild(n)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=tu));else if(c!==4&&(n=n.child,n!==null))for(nd(n,i,a),n=n.sibling;n!==null;)nd(n,i,a),n=n.sibling}function rd(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(rd(n,i,a),n=n.sibling;n!==null;)rd(n,i,a),n=n.sibling}var Vt=null,Vn=!1;function hi(n,i,a){for(a=a.child;a!==null;)rg(n,i,a),a=a.sibling}function rg(n,i,a){if(rn&&typeof rn.onCommitFiberUnmount=="function")try{rn.onCommitFiberUnmount(Ki,a)}catch{}switch(a.tag){case 5:$t||fo(a,i);case 6:var c=Vt,d=Vn;Vt=null,hi(n,i,a),Vt=c,Vn=d,Vt!==null&&(Vn?(n=Vt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Vt.removeChild(a.stateNode));break;case 18:Vt!==null&&(Vn?(n=Vt,a=a.stateNode,n.nodeType===8?gh(n.parentNode,a):n.nodeType===1&&gh(n,a),ti(n)):gh(Vt,a.stateNode));break;case 4:c=Vt,d=Vn,Vt=a.stateNode.containerInfo,Vn=!0,hi(n,i,a),Vt=c,Vn=d;break;case 0:case 11:case 14:case 15:if(!$t&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var p=d,v=p.destroy;p=p.tag,v!==void 0&&((p&2)!==0||(p&4)!==0)&&ed(a,i,v),d=d.next}while(d!==c)}hi(n,i,a);break;case 1:if(!$t&&(fo(a,i),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(A){at(a,i,A)}hi(n,i,a);break;case 21:hi(n,i,a);break;case 22:a.mode&1?($t=(c=$t)||a.memoizedState!==null,hi(n,i,a),$t=c):hi(n,i,a);break;default:hi(n,i,a)}}function ig(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new QE),i.forEach(function(c){var d=s0.bind(null,n,c);a.has(c)||(a.add(c),c.then(d,d))})}}function On(n,i){var a=i.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var p=n,v=i,A=v;e:for(;A!==null;){switch(A.tag){case 5:Vt=A.stateNode,Vn=!1;break e;case 3:Vt=A.stateNode.containerInfo,Vn=!0;break e;case 4:Vt=A.stateNode.containerInfo,Vn=!0;break e}A=A.return}if(Vt===null)throw Error(t(160));rg(p,v,d),Vt=null,Vn=!1;var D=d.alternate;D!==null&&(D.return=null),d.return=null}catch(B){at(d,i,B)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)sg(i,n),i=i.sibling}function sg(n,i){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(On(i,n),ir(n),c&4){try{La(3,n,n.return),Su(3,n)}catch(pe){at(n,n.return,pe)}try{La(5,n,n.return)}catch(pe){at(n,n.return,pe)}}break;case 1:On(i,n),ir(n),c&512&&a!==null&&fo(a,a.return);break;case 5:if(On(i,n),ir(n),c&512&&a!==null&&fo(a,a.return),n.flags&32){var d=n.stateNode;try{$i(d,"")}catch(pe){at(n,n.return,pe)}}if(c&4&&(d=n.stateNode,d!=null)){var p=n.memoizedProps,v=a!==null?a.memoizedProps:p,A=n.type,D=n.updateQueue;if(n.updateQueue=null,D!==null)try{A==="input"&&p.type==="radio"&&p.name!=null&&Ns(d,p),Vs(A,v);var B=Vs(A,p);for(v=0;v<D.length;v+=2){var Y=D[v],Z=D[v+1];Y==="style"?Ds(d,Z):Y==="dangerouslySetInnerHTML"?Pl(d,Z):Y==="children"?$i(d,Z):L(d,Y,Z,B)}switch(A){case"input":Bi(d,p);break;case"textarea":Cl(d,p);break;case"select":var X=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!p.multiple;var le=p.value;le!=null?Rn(d,!!p.multiple,le,!1):X!==!!p.multiple&&(p.defaultValue!=null?Rn(d,!!p.multiple,p.defaultValue,!0):Rn(d,!!p.multiple,p.multiple?[]:"",!1))}d[Aa]=p}catch(pe){at(n,n.return,pe)}}break;case 6:if(On(i,n),ir(n),c&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,p=n.memoizedProps;try{d.nodeValue=p}catch(pe){at(n,n.return,pe)}}break;case 3:if(On(i,n),ir(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{ti(i.containerInfo)}catch(pe){at(n,n.return,pe)}break;case 4:On(i,n),ir(n);break;case 13:On(i,n),ir(n),d=n.child,d.flags&8192&&(p=d.memoizedState!==null,d.stateNode.isHidden=p,!p||d.alternate!==null&&d.alternate.memoizedState!==null||(od=Je())),c&4&&ig(n);break;case 22:if(Y=a!==null&&a.memoizedState!==null,n.mode&1?($t=(B=$t)||Y,On(i,n),$t=B):On(i,n),ir(n),c&8192){if(B=n.memoizedState!==null,(n.stateNode.isHidden=B)&&!Y&&(n.mode&1)!==0)for(ce=n,Y=n.child;Y!==null;){for(Z=ce=Y;ce!==null;){switch(X=ce,le=X.child,X.tag){case 0:case 11:case 14:case 15:La(4,X,X.return);break;case 1:fo(X,X.return);var de=X.stateNode;if(typeof de.componentWillUnmount=="function"){c=X,a=X.return;try{i=c,de.props=i.memoizedProps,de.state=i.memoizedState,de.componentWillUnmount()}catch(pe){at(c,a,pe)}}break;case 5:fo(X,X.return);break;case 22:if(X.memoizedState!==null){lg(Z);continue}}le!==null?(le.return=X,ce=le):lg(Z)}Y=Y.sibling}e:for(Y=null,Z=n;;){if(Z.tag===5){if(Y===null){Y=Z;try{d=Z.stateNode,B?(p=d.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(A=Z.stateNode,D=Z.memoizedProps.style,v=D!=null&&D.hasOwnProperty("display")?D.display:null,A.style.display=Hr("display",v))}catch(pe){at(n,n.return,pe)}}}else if(Z.tag===6){if(Y===null)try{Z.stateNode.nodeValue=B?"":Z.memoizedProps}catch(pe){at(n,n.return,pe)}}else if((Z.tag!==22&&Z.tag!==23||Z.memoizedState===null||Z===n)&&Z.child!==null){Z.child.return=Z,Z=Z.child;continue}if(Z===n)break e;for(;Z.sibling===null;){if(Z.return===null||Z.return===n)break e;Y===Z&&(Y=null),Z=Z.return}Y===Z&&(Y=null),Z.sibling.return=Z.return,Z=Z.sibling}}break;case 19:On(i,n),ir(n),c&4&&ig(n);break;case 21:break;default:On(i,n),ir(n)}}function ir(n){var i=n.flags;if(i&2){try{e:{for(var a=n.return;a!==null;){if(tg(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&($i(d,""),c.flags&=-33);var p=ng(n);rd(n,p,d);break;case 3:case 4:var v=c.stateNode.containerInfo,A=ng(n);nd(n,A,v);break;default:throw Error(t(161))}}catch(D){at(n,n.return,D)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function YE(n,i,a){ce=n,og(n)}function og(n,i,a){for(var c=(n.mode&1)!==0;ce!==null;){var d=ce,p=d.child;if(d.tag===22&&c){var v=d.memoizedState!==null||Iu;if(!v){var A=d.alternate,D=A!==null&&A.memoizedState!==null||$t;A=Iu;var B=$t;if(Iu=v,($t=D)&&!B)for(ce=d;ce!==null;)v=ce,D=v.child,v.tag===22&&v.memoizedState!==null?ug(d):D!==null?(D.return=v,ce=D):ug(d);for(;p!==null;)ce=p,og(p),p=p.sibling;ce=d,Iu=A,$t=B}ag(n)}else(d.subtreeFlags&8772)!==0&&p!==null?(p.return=d,ce=p):ag(n)}}function ag(n){for(;ce!==null;){var i=ce;if((i.flags&8772)!==0){var a=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:$t||Su(5,i);break;case 1:var c=i.stateNode;if(i.flags&4&&!$t)if(a===null)c.componentDidMount();else{var d=i.elementType===i.type?a.memoizedProps:Dn(i.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var p=i.updateQueue;p!==null&&lm(i,p,c);break;case 3:var v=i.updateQueue;if(v!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}lm(i,v,a)}break;case 5:var A=i.stateNode;if(a===null&&i.flags&4){a=A;var D=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":D.autoFocus&&a.focus();break;case"img":D.src&&(a.src=D.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var B=i.alternate;if(B!==null){var Y=B.memoizedState;if(Y!==null){var Z=Y.dehydrated;Z!==null&&ti(Z)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}$t||i.flags&512&&td(i)}catch(X){at(i,i.return,X)}}if(i===n){ce=null;break}if(a=i.sibling,a!==null){a.return=i.return,ce=a;break}ce=i.return}}function lg(n){for(;ce!==null;){var i=ce;if(i===n){ce=null;break}var a=i.sibling;if(a!==null){a.return=i.return,ce=a;break}ce=i.return}}function ug(n){for(;ce!==null;){var i=ce;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{Su(4,i)}catch(D){at(i,a,D)}break;case 1:var c=i.stateNode;if(typeof c.componentDidMount=="function"){var d=i.return;try{c.componentDidMount()}catch(D){at(i,d,D)}}var p=i.return;try{td(i)}catch(D){at(i,p,D)}break;case 5:var v=i.return;try{td(i)}catch(D){at(i,v,D)}}}catch(D){at(i,i.return,D)}if(i===n){ce=null;break}var A=i.sibling;if(A!==null){A.return=i.return,ce=A;break}ce=i.return}}var JE=Math.ceil,Au=ee.ReactCurrentDispatcher,id=ee.ReactCurrentOwner,Sn=ee.ReactCurrentBatchConfig,$e=0,Ct=null,yt=null,Ot=0,dn=0,po=oi(0),Tt=0,ba=null,cs=0,Ru=0,sd=0,Fa=null,Zt=null,od=0,mo=1/0,Nr=null,Cu=!1,ad=null,di=null,Pu=!1,fi=null,ku=0,ja=0,ld=null,Nu=-1,xu=0;function Kt(){return($e&6)!==0?Je():Nu!==-1?Nu:Nu=Je()}function pi(n){return(n.mode&1)===0?1:($e&2)!==0&&Ot!==0?Ot&-Ot:ME.transition!==null?(xu===0&&(xu=oa()),xu):(n=Fe,n!==0||(n=window.event,n=n===void 0?16:$s(n.type)),n)}function Mn(n,i,a,c){if(50<ja)throw ja=0,ld=null,Error(t(185));Ji(n,a,c),(($e&2)===0||n!==Ct)&&(n===Ct&&(($e&2)===0&&(Ru|=a),Tt===4&&mi(n,Ot)),en(n,c),a===1&&$e===0&&(i.mode&1)===0&&(mo=Je()+500,su&&li()))}function en(n,i){var a=n.callbackNode;Yi(n,i);var c=yr(n,n===Ct?Ot:0);if(c===0)a!==null&&Ls(a),n.callbackNode=null,n.callbackPriority=0;else if(i=c&-c,n.callbackPriority!==i){if(a!=null&&Ls(a),i===1)n.tag===0?OE(hg.bind(null,n)):Xp(hg.bind(null,n)),NE(function(){($e&6)===0&&li()}),a=null;else{switch(Wn(c)){case 1:a=bs;break;case 4:a=ra;break;case 16:a=Gi;break;case 536870912:a=Fs;break;default:a=Gi}a=vg(a,cg.bind(null,n))}n.callbackPriority=i,n.callbackNode=a}}function cg(n,i){if(Nu=-1,xu=0,($e&6)!==0)throw Error(t(327));var a=n.callbackNode;if(go()&&n.callbackNode!==a)return null;var c=yr(n,n===Ct?Ot:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||i)i=Du(n,c);else{i=c;var d=$e;$e|=2;var p=fg();(Ct!==n||Ot!==i)&&(Nr=null,mo=Je()+500,ds(n,i));do try{t0();break}catch(A){dg(n,A)}while(!0);Rh(),Au.current=p,$e=d,yt!==null?i=0:(Ct=null,Ot=0,i=Tt)}if(i!==0){if(i===2&&(d=sa(n),d!==0&&(c=d,i=ud(n,d))),i===1)throw a=ba,ds(n,0),mi(n,c),en(n,Je()),a;if(i===6)mi(n,c);else{if(d=n.current.alternate,(c&30)===0&&!ZE(d)&&(i=Du(n,c),i===2&&(p=sa(n),p!==0&&(c=p,i=ud(n,p))),i===1))throw a=ba,ds(n,0),mi(n,c),en(n,Je()),a;switch(n.finishedWork=d,n.finishedLanes=c,i){case 0:case 1:throw Error(t(345));case 2:fs(n,Zt,Nr);break;case 3:if(mi(n,c),(c&130023424)===c&&(i=od+500-Je(),10<i)){if(yr(n,0)!==0)break;if(d=n.suspendedLanes,(d&c)!==c){Kt(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=mh(fs.bind(null,n,Zt,Nr),i);break}fs(n,Zt,Nr);break;case 4:if(mi(n,c),(c&4194240)===c)break;for(i=n.eventTimes,d=-1;0<c;){var v=31-sn(c);p=1<<v,v=i[v],v>d&&(d=v),c&=~p}if(c=d,c=Je()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*JE(c/1960))-c,10<c){n.timeoutHandle=mh(fs.bind(null,n,Zt,Nr),c);break}fs(n,Zt,Nr);break;case 5:fs(n,Zt,Nr);break;default:throw Error(t(329))}}}return en(n,Je()),n.callbackNode===a?cg.bind(null,n):null}function ud(n,i){var a=Fa;return n.current.memoizedState.isDehydrated&&(ds(n,i).flags|=256),n=Du(n,i),n!==2&&(i=Zt,Zt=a,i!==null&&cd(i)),n}function cd(n){Zt===null?Zt=n:Zt.push.apply(Zt,n)}function ZE(n){for(var i=n;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],p=d.getSnapshot;d=d.value;try{if(!Nn(p(),d))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function mi(n,i){for(i&=~sd,i&=~Ru,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var a=31-sn(i),c=1<<a;n[a]=-1,i&=~c}}function hg(n){if(($e&6)!==0)throw Error(t(327));go();var i=yr(n,0);if((i&1)===0)return en(n,Je()),null;var a=Du(n,i);if(n.tag!==0&&a===2){var c=sa(n);c!==0&&(i=c,a=ud(n,c))}if(a===1)throw a=ba,ds(n,0),mi(n,i),en(n,Je()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,fs(n,Zt,Nr),en(n,Je()),null}function hd(n,i){var a=$e;$e|=1;try{return n(i)}finally{$e=a,$e===0&&(mo=Je()+500,su&&li())}}function hs(n){fi!==null&&fi.tag===0&&($e&6)===0&&go();var i=$e;$e|=1;var a=Sn.transition,c=Fe;try{if(Sn.transition=null,Fe=1,n)return n()}finally{Fe=c,Sn.transition=a,$e=i,($e&6)===0&&li()}}function dd(){dn=po.current,et(po)}function ds(n,i){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,kE(a)),yt!==null)for(a=yt.return;a!==null;){var c=a;switch(Eh(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&ru();break;case 3:co(),et(Xt),et(Ut),Oh();break;case 5:Dh(c);break;case 4:co();break;case 13:et(rt);break;case 19:et(rt);break;case 10:Ch(c.type._context);break;case 22:case 23:dd()}a=a.return}if(Ct=n,yt=n=gi(n.current,null),Ot=dn=i,Tt=0,ba=null,sd=Ru=cs=0,Zt=Fa=null,as!==null){for(i=0;i<as.length;i++)if(a=as[i],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,p=a.pending;if(p!==null){var v=p.next;p.next=d,c.next=v}a.pending=c}as=null}return n}function dg(n,i){do{var a=yt;try{if(Rh(),mu.current=vu,gu){for(var c=it.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}gu=!1}if(us=0,Rt=Et=it=null,xa=!1,Da=0,id.current=null,a===null||a.return===null){Tt=1,ba=i,yt=null;break}e:{var p=n,v=a.return,A=a,D=i;if(i=Ot,A.flags|=32768,D!==null&&typeof D=="object"&&typeof D.then=="function"){var B=D,Y=A,Z=Y.tag;if((Y.mode&1)===0&&(Z===0||Z===11||Z===15)){var X=Y.alternate;X?(Y.updateQueue=X.updateQueue,Y.memoizedState=X.memoizedState,Y.lanes=X.lanes):(Y.updateQueue=null,Y.memoizedState=null)}var le=bm(v);if(le!==null){le.flags&=-257,Fm(le,v,A,p,i),le.mode&1&&Lm(p,B,i),i=le,D=B;var de=i.updateQueue;if(de===null){var pe=new Set;pe.add(D),i.updateQueue=pe}else de.add(D);break e}else{if((i&1)===0){Lm(p,B,i),fd();break e}D=Error(t(426))}}else if(nt&&A.mode&1){var ct=bm(v);if(ct!==null){(ct.flags&65536)===0&&(ct.flags|=256),Fm(ct,v,A,p,i),Sh(ho(D,A));break e}}p=D=ho(D,A),Tt!==4&&(Tt=2),Fa===null?Fa=[p]:Fa.push(p),p=v;do{switch(p.tag){case 3:p.flags|=65536,i&=-i,p.lanes|=i;var F=Om(p,D,i);am(p,F);break e;case 1:A=D;var V=p.type,z=p.stateNode;if((p.flags&128)===0&&(typeof V.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(di===null||!di.has(z)))){p.flags|=65536,i&=-i,p.lanes|=i;var ne=Mm(p,A,i);am(p,ne);break e}}p=p.return}while(p!==null)}mg(a)}catch(me){i=me,yt===a&&a!==null&&(yt=a=a.return);continue}break}while(!0)}function fg(){var n=Au.current;return Au.current=vu,n===null?vu:n}function fd(){(Tt===0||Tt===3||Tt===2)&&(Tt=4),Ct===null||(cs&268435455)===0&&(Ru&268435455)===0||mi(Ct,Ot)}function Du(n,i){var a=$e;$e|=2;var c=fg();(Ct!==n||Ot!==i)&&(Nr=null,ds(n,i));do try{e0();break}catch(d){dg(n,d)}while(!0);if(Rh(),$e=a,Au.current=c,yt!==null)throw Error(t(261));return Ct=null,Ot=0,Tt}function e0(){for(;yt!==null;)pg(yt)}function t0(){for(;yt!==null&&!Hi();)pg(yt)}function pg(n){var i=_g(n.alternate,n,dn);n.memoizedProps=n.pendingProps,i===null?mg(n):yt=i,id.current=null}function mg(n){var i=n;do{var a=i.alternate;if(n=i.return,(i.flags&32768)===0){if(a=GE(a,i,dn),a!==null){yt=a;return}}else{if(a=KE(a,i),a!==null){a.flags&=32767,yt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Tt=6,yt=null;return}}if(i=i.sibling,i!==null){yt=i;return}yt=i=n}while(i!==null);Tt===0&&(Tt=5)}function fs(n,i,a){var c=Fe,d=Sn.transition;try{Sn.transition=null,Fe=1,n0(n,i,a,c)}finally{Sn.transition=d,Fe=c}return null}function n0(n,i,a,c){do go();while(fi!==null);if(($e&6)!==0)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var p=a.lanes|a.childLanes;if(Zc(n,p),n===Ct&&(yt=Ct=null,Ot=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Pu||(Pu=!0,vg(Gi,function(){return go(),null})),p=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||p){p=Sn.transition,Sn.transition=null;var v=Fe;Fe=1;var A=$e;$e|=4,id.current=null,XE(n,a),sg(a,n),TE(fh),wr=!!dh,fh=dh=null,n.current=a,YE(a),gr(),$e=A,Fe=v,Sn.transition=p}else n.current=a;if(Pu&&(Pu=!1,fi=n,ku=d),p=n.pendingLanes,p===0&&(di=null),jl(a.stateNode),en(n,Je()),i!==null)for(c=n.onRecoverableError,a=0;a<i.length;a++)d=i[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(Cu)throw Cu=!1,n=ad,ad=null,n;return(ku&1)!==0&&n.tag!==0&&go(),p=n.pendingLanes,(p&1)!==0?n===ld?ja++:(ja=0,ld=n):ja=0,li(),null}function go(){if(fi!==null){var n=Wn(ku),i=Sn.transition,a=Fe;try{if(Sn.transition=null,Fe=16>n?16:n,fi===null)var c=!1;else{if(n=fi,fi=null,ku=0,($e&6)!==0)throw Error(t(331));var d=$e;for($e|=4,ce=n.current;ce!==null;){var p=ce,v=p.child;if((ce.flags&16)!==0){var A=p.deletions;if(A!==null){for(var D=0;D<A.length;D++){var B=A[D];for(ce=B;ce!==null;){var Y=ce;switch(Y.tag){case 0:case 11:case 15:La(8,Y,p)}var Z=Y.child;if(Z!==null)Z.return=Y,ce=Z;else for(;ce!==null;){Y=ce;var X=Y.sibling,le=Y.return;if(eg(Y),Y===B){ce=null;break}if(X!==null){X.return=le,ce=X;break}ce=le}}}var de=p.alternate;if(de!==null){var pe=de.child;if(pe!==null){de.child=null;do{var ct=pe.sibling;pe.sibling=null,pe=ct}while(pe!==null)}}ce=p}}if((p.subtreeFlags&2064)!==0&&v!==null)v.return=p,ce=v;else e:for(;ce!==null;){if(p=ce,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:La(9,p,p.return)}var F=p.sibling;if(F!==null){F.return=p.return,ce=F;break e}ce=p.return}}var V=n.current;for(ce=V;ce!==null;){v=ce;var z=v.child;if((v.subtreeFlags&2064)!==0&&z!==null)z.return=v,ce=z;else e:for(v=V;ce!==null;){if(A=ce,(A.flags&2048)!==0)try{switch(A.tag){case 0:case 11:case 15:Su(9,A)}}catch(me){at(A,A.return,me)}if(A===v){ce=null;break e}var ne=A.sibling;if(ne!==null){ne.return=A.return,ce=ne;break e}ce=A.return}}if($e=d,li(),rn&&typeof rn.onPostCommitFiberRoot=="function")try{rn.onPostCommitFiberRoot(Ki,n)}catch{}c=!0}return c}finally{Fe=a,Sn.transition=i}}return!1}function gg(n,i,a){i=ho(a,i),i=Om(n,i,1),n=ci(n,i,1),i=Kt(),n!==null&&(Ji(n,1,i),en(n,i))}function at(n,i,a){if(n.tag===3)gg(n,n,a);else for(;i!==null;){if(i.tag===3){gg(i,n,a);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(di===null||!di.has(c))){n=ho(a,n),n=Mm(i,n,1),i=ci(i,n,1),n=Kt(),i!==null&&(Ji(i,1,n),en(i,n));break}}i=i.return}}function r0(n,i,a){var c=n.pingCache;c!==null&&c.delete(i),i=Kt(),n.pingedLanes|=n.suspendedLanes&a,Ct===n&&(Ot&a)===a&&(Tt===4||Tt===3&&(Ot&130023424)===Ot&&500>Je()-od?ds(n,0):sd|=a),en(n,i)}function yg(n,i){i===0&&((n.mode&1)===0?i=1:(i=Jr,Jr<<=1,(Jr&130023424)===0&&(Jr=4194304)));var a=Kt();n=Cr(n,i),n!==null&&(Ji(n,i,a),en(n,a))}function i0(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),yg(n,a)}function s0(n,i){var a=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(i),yg(n,a)}var _g;_g=function(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps||Xt.current)Jt=!0;else{if((n.lanes&a)===0&&(i.flags&128)===0)return Jt=!1,HE(n,i,a);Jt=(n.flags&131072)!==0}else Jt=!1,nt&&(i.flags&1048576)!==0&&Yp(i,au,i.index);switch(i.lanes=0,i.tag){case 2:var c=i.type;Tu(n,i),n=i.pendingProps;var d=ro(i,Ut.current);uo(i,a),d=bh(null,i,c,n,d,a);var p=Fh();return i.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Yt(c)?(p=!0,iu(i)):p=!1,i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Nh(i),d.updater=wu,i.stateNode=d,d._reactInternals=i,qh(i,c,n,a),i=Kh(null,i,c,!0,p,a)):(i.tag=0,nt&&p&&wh(i),Gt(null,i,d,a),i=i.child),i;case 16:c=i.elementType;e:{switch(Tu(n,i),n=i.pendingProps,d=c._init,c=d(c._payload),i.type=c,d=i.tag=a0(c),n=Dn(c,n),d){case 0:i=Gh(null,i,c,n,a);break e;case 1:i=qm(null,i,c,n,a);break e;case 11:i=jm(null,i,c,n,a);break e;case 14:i=Um(null,i,c,Dn(c.type,n),a);break e}throw Error(t(306,c,""))}return i;case 0:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:Dn(c,d),Gh(n,i,c,d,a);case 1:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:Dn(c,d),qm(n,i,c,d,a);case 3:e:{if(Wm(i),n===null)throw Error(t(387));c=i.pendingProps,p=i.memoizedState,d=p.element,om(n,i),fu(i,c,null,a);var v=i.memoizedState;if(c=v.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){d=ho(Error(t(423)),i),i=Hm(n,i,c,a,d);break e}else if(c!==d){d=ho(Error(t(424)),i),i=Hm(n,i,c,a,d);break e}else for(hn=si(i.stateNode.containerInfo.firstChild),cn=i,nt=!0,xn=null,a=im(i,null,c,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(oo(),c===d){i=kr(n,i,a);break e}Gt(n,i,c,a)}i=i.child}return i;case 5:return um(i),n===null&&Ih(i),c=i.type,d=i.pendingProps,p=n!==null?n.memoizedProps:null,v=d.children,ph(c,d)?v=null:p!==null&&ph(c,p)&&(i.flags|=32),$m(n,i),Gt(n,i,v,a),i.child;case 6:return n===null&&Ih(i),null;case 13:return Gm(n,i,a);case 4:return xh(i,i.stateNode.containerInfo),c=i.pendingProps,n===null?i.child=ao(i,null,c,a):Gt(n,i,c,a),i.child;case 11:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:Dn(c,d),jm(n,i,c,d,a);case 7:return Gt(n,i,i.pendingProps,a),i.child;case 8:return Gt(n,i,i.pendingProps.children,a),i.child;case 12:return Gt(n,i,i.pendingProps.children,a),i.child;case 10:e:{if(c=i.type._context,d=i.pendingProps,p=i.memoizedProps,v=d.value,Ye(cu,c._currentValue),c._currentValue=v,p!==null)if(Nn(p.value,v)){if(p.children===d.children&&!Xt.current){i=kr(n,i,a);break e}}else for(p=i.child,p!==null&&(p.return=i);p!==null;){var A=p.dependencies;if(A!==null){v=p.child;for(var D=A.firstContext;D!==null;){if(D.context===c){if(p.tag===1){D=Pr(-1,a&-a),D.tag=2;var B=p.updateQueue;if(B!==null){B=B.shared;var Y=B.pending;Y===null?D.next=D:(D.next=Y.next,Y.next=D),B.pending=D}}p.lanes|=a,D=p.alternate,D!==null&&(D.lanes|=a),Ph(p.return,a,i),A.lanes|=a;break}D=D.next}}else if(p.tag===10)v=p.type===i.type?null:p.child;else if(p.tag===18){if(v=p.return,v===null)throw Error(t(341));v.lanes|=a,A=v.alternate,A!==null&&(A.lanes|=a),Ph(v,a,i),v=p.sibling}else v=p.child;if(v!==null)v.return=p;else for(v=p;v!==null;){if(v===i){v=null;break}if(p=v.sibling,p!==null){p.return=v.return,v=p;break}v=v.return}p=v}Gt(n,i,d.children,a),i=i.child}return i;case 9:return d=i.type,c=i.pendingProps.children,uo(i,a),d=Tn(d),c=c(d),i.flags|=1,Gt(n,i,c,a),i.child;case 14:return c=i.type,d=Dn(c,i.pendingProps),d=Dn(c.type,d),Um(n,i,c,d,a);case 15:return zm(n,i,i.type,i.pendingProps,a);case 17:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:Dn(c,d),Tu(n,i),i.tag=1,Yt(c)?(n=!0,iu(i)):n=!1,uo(i,a),Dm(i,c,d),qh(i,c,d,a),Kh(null,i,c,!0,n,a);case 19:return Qm(n,i,a);case 22:return Bm(n,i,a)}throw Error(t(156,i.tag))};function vg(n,i){return na(n,i)}function o0(n,i,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(n,i,a,c){return new o0(n,i,a,c)}function pd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function a0(n){if(typeof n=="function")return pd(n)?1:0;if(n!=null){if(n=n.$$typeof,n===O)return 11;if(n===De)return 14}return 2}function gi(n,i){var a=n.alternate;return a===null?(a=An(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Vu(n,i,a,c,d,p){var v=2;if(c=n,typeof n=="function")pd(n)&&(v=1);else if(typeof n=="string")v=5;else e:switch(n){case C:return ps(a.children,d,p,i);case I:v=8,d|=8;break;case P:return n=An(12,a,i,d|2),n.elementType=P,n.lanes=p,n;case R:return n=An(13,a,i,d),n.elementType=R,n.lanes=p,n;case fe:return n=An(19,a,i,d),n.elementType=fe,n.lanes=p,n;case Re:return Ou(a,d,p,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case N:v=10;break e;case x:v=9;break e;case O:v=11;break e;case De:v=14;break e;case je:v=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return i=An(v,a,i,d),i.elementType=n,i.type=c,i.lanes=p,i}function ps(n,i,a,c){return n=An(7,n,c,i),n.lanes=a,n}function Ou(n,i,a,c){return n=An(22,n,c,i),n.elementType=Re,n.lanes=a,n.stateNode={isHidden:!1},n}function md(n,i,a){return n=An(6,n,null,i),n.lanes=a,n}function gd(n,i,a){return i=An(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function l0(n,i,a,c,d){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=aa(0),this.expirationTimes=aa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=aa(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function yd(n,i,a,c,d,p,v,A,D){return n=new l0(n,i,a,A,D),i===1?(i=1,p===!0&&(i|=8)):i=0,p=An(3,null,null,i),n.current=p,p.stateNode=n,p.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nh(p),n}function u0(n,i,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:J,key:c==null?null:""+c,children:n,containerInfo:i,implementation:a}}function wg(n){if(!n)return ai;n=n._reactInternals;e:{if(Pn(n)!==n||n.tag!==1)throw Error(t(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Yt(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Yt(a))return Kp(n,a,i)}return i}function Eg(n,i,a,c,d,p,v,A,D){return n=yd(a,c,!0,n,d,p,v,A,D),n.context=wg(null),a=n.current,c=Kt(),d=pi(a),p=Pr(c,d),p.callback=i??null,ci(a,p,d),n.current.lanes=d,Ji(n,d,c),en(n,c),n}function Mu(n,i,a,c){var d=i.current,p=Kt(),v=pi(d);return a=wg(a),i.context===null?i.context=a:i.pendingContext=a,i=Pr(p,v),i.payload={element:n},c=c===void 0?null:c,c!==null&&(i.callback=c),n=ci(d,i,v),n!==null&&(Mn(n,d,v,p),du(n,d,v)),v}function Lu(n){return n=n.current,n.child?(n.child.tag===5,n.child.stateNode):null}function Tg(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function _d(n,i){Tg(n,i),(n=n.alternate)&&Tg(n,i)}function c0(){return null}var Ig=typeof reportError=="function"?reportError:function(n){console.error(n)};function vd(n){this._internalRoot=n}bu.prototype.render=vd.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(t(409));Mu(n,i,null,null)},bu.prototype.unmount=vd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;hs(function(){Mu(null,n,null,null)}),i[Ir]=null}};function bu(n){this._internalRoot=n}bu.prototype.unstable_scheduleHydration=function(n){if(n){var i=ha();n={blockedOn:null,target:n,priority:i};for(var a=0;a<on.length&&i!==0&&i<on[a].priority;a++);on.splice(a,0,n),a===0&&zs(n)}};function wd(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Fu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Sg(){}function h0(n,i,a,c,d){if(d){if(typeof c=="function"){var p=c;c=function(){var B=Lu(v);p.call(B)}}var v=Eg(i,c,n,0,null,!1,!1,"",Sg);return n._reactRootContainer=v,n[Ir]=v.current,Ia(n.nodeType===8?n.parentNode:n),hs(),v}for(;d=n.lastChild;)n.removeChild(d);if(typeof c=="function"){var A=c;c=function(){var B=Lu(D);A.call(B)}}var D=yd(n,0,!1,null,null,!1,!1,"",Sg);return n._reactRootContainer=D,n[Ir]=D.current,Ia(n.nodeType===8?n.parentNode:n),hs(function(){Mu(i,D,a,c)}),D}function ju(n,i,a,c,d){var p=a._reactRootContainer;if(p){var v=p;if(typeof d=="function"){var A=d;d=function(){var D=Lu(v);A.call(D)}}Mu(i,v,n,d)}else v=h0(a,i,n,d,c);return Lu(v)}ua=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var a=He(i.pendingLanes);a!==0&&(la(i,a|1),en(i,Je()),($e&6)===0&&(mo=Je()+500,li()))}break;case 13:hs(function(){var c=Cr(n,1);if(c!==null){var d=Kt();Mn(c,n,1,d)}}),_d(n,1)}},js=function(n){if(n.tag===13){var i=Cr(n,134217728);if(i!==null){var a=Kt();Mn(i,n,134217728,a)}_d(n,134217728)}},ca=function(n){if(n.tag===13){var i=pi(n),a=Cr(n,i);if(a!==null){var c=Kt();Mn(a,n,i,c)}_d(n,i)}},ha=function(){return Fe},da=function(n,i){var a=Fe;try{return Fe=n,i()}finally{Fe=a}},fr=function(n,i,a){switch(i){case"input":if(Bi(n,a),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var c=a[i];if(c!==n&&c.form===n.form){var d=nu(c);if(!d)throw Error(t(90));Go(c),Bi(c,d)}}}break;case"textarea":Cl(n,a);break;case"select":i=a.value,i!=null&&Rn(n,!!a.multiple,i,!1)}},Nl=hd,xl=hs;var d0={usingClientEntryPoint:!1,Events:[Ra,to,nu,Kr,Qr,hd]},Ua={findFiberByHostInstance:rs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},f0={bundleType:Ua.bundleType,version:Ua.version,rendererPackageName:Ua.rendererPackageName,rendererConfig:Ua.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ee.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Fl(n),n===null?null:n.stateNode},findFiberByHostInstance:Ua.findFiberByHostInstance||c0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Uu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Uu.isDisabled&&Uu.supportsFiber)try{Ki=Uu.inject(f0),rn=Uu}catch{}}return tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=d0,tn.createPortal=function(n,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wd(i))throw Error(t(200));return u0(n,i,null,a)},tn.createRoot=function(n,i){if(!wd(n))throw Error(t(299));var a=!1,c="",d=Ig;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onRecoverableError!==void 0&&(d=i.onRecoverableError)),i=yd(n,1,!1,null,null,a,!1,c,d),n[Ir]=i.current,Ia(n.nodeType===8?n.parentNode:n),new vd(i)},tn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Fl(i),n=n===null?null:n.stateNode,n},tn.flushSync=function(n){return hs(n)},tn.hydrate=function(n,i,a){if(!Fu(i))throw Error(t(200));return ju(null,n,i,!0,a)},tn.hydrateRoot=function(n,i,a){if(!wd(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,p="",v=Ig;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),i=Eg(i,null,n,1,a??null,d,!1,p,v),n[Ir]=i.current,Ia(n),c)for(n=0;n<c.length;n++)a=c[n],d=a._getVersion,d=d(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,d]:i.mutableSourceEagerHydrationData.push(a,d);return new bu(i)},tn.render=function(n,i,a){if(!Fu(i))throw Error(t(200));return ju(null,n,i,!1,a)},tn.unmountComponentAtNode=function(n){if(!Fu(n))throw Error(t(40));return n._reactRootContainer?(hs(function(){ju(null,null,n,!1,function(){n._reactRootContainer=null,n[Ir]=null})}),!0):!1},tn.unstable_batchedUpdates=hd,tn.unstable_renderSubtreeIntoContainer=function(n,i,a,c){if(!Fu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return ju(n,i,a,!1,c)},tn.version="18.3.1-next-f1338f8080-20240426",tn}var Dg;function I_(){if(Dg)return Id.exports;Dg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Id.exports=T0(),Id.exports}var Vg;function I0(){if(Vg)return zu;Vg=1;var r=I_();return zu.createRoot=r.createRoot,zu.hydrateRoot=r.hydrateRoot,zu}var S0=I0();const A0=T_(S0);I_();function Za(){return Za=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},Za.apply(this,arguments)}var Ii;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(Ii||(Ii={}));const Og="popstate";function R0(r){r===void 0&&(r={});function e(o,l){let{pathname:h="/",search:f="",hash:g=""}=As(o.location.hash.substr(1));return!h.startsWith("/")&&!h.startsWith(".")&&(h="/"+h),Ud("",{pathname:h,search:f,hash:g},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(o,l){let h=o.document.querySelector("base"),f="";if(h&&h.getAttribute("href")){let g=o.location.href,y=g.indexOf("#");f=y===-1?g:g.slice(0,y)}return f+"#"+(typeof l=="string"?l:ic(l))}function s(o,l){Rc(o.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(l)+")")}return P0(e,t,s,r)}function pt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Rc(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function C0(){return Math.random().toString(36).substr(2,8)}function Mg(r,e){return{usr:r.state,key:r.key,idx:e}}function Ud(r,e,t,s){return t===void 0&&(t=null),Za({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?As(e):e,{state:t,key:e&&e.key||s||C0()})}function ic(r){let{pathname:e="/",search:t="",hash:s=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function As(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let s=r.indexOf("?");s>=0&&(e.search=r.substr(s),r=r.substr(0,s)),r&&(e.pathname=r)}return e}function P0(r,e,t,s){s===void 0&&(s={});let{window:o=document.defaultView,v5Compat:l=!1}=s,h=o.history,f=Ii.Pop,g=null,y=w();y==null&&(y=0,h.replaceState(Za({},h.state,{idx:y}),""));function w(){return(h.state||{idx:null}).idx}function E(){f=Ii.Pop;let j=w(),K=j==null?null:j-y;y=j,g&&g({action:f,location:q.location,delta:K})}function S(j,K){f=Ii.Push;let re=Ud(q.location,j,K);t&&t(re,j),y=w()+1;let L=Mg(re,y),ee=q.createHref(re);try{h.pushState(L,"",ee)}catch(ie){if(ie instanceof DOMException&&ie.name==="DataCloneError")throw ie;o.location.assign(ee)}l&&g&&g({action:f,location:q.location,delta:1})}function b(j,K){f=Ii.Replace;let re=Ud(q.location,j,K);t&&t(re,j),y=w();let L=Mg(re,y),ee=q.createHref(re);h.replaceState(L,"",ee),l&&g&&g({action:f,location:q.location,delta:0})}function H(j){let K=o.location.origin!=="null"?o.location.origin:o.location.href,re=typeof j=="string"?j:ic(j);return re=re.replace(/ $/,"%20"),pt(K,"No window.location.(origin|href) available to create URL for href: "+re),new URL(re,K)}let q={get action(){return f},get location(){return r(o,h)},listen(j){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(Og,E),g=j,()=>{o.removeEventListener(Og,E),g=null}},createHref(j){return e(o,j)},createURL:H,encodeLocation(j){let K=H(j);return{pathname:K.pathname,search:K.search,hash:K.hash}},push:S,replace:b,go(j){return h.go(j)}};return q}var Lg;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(Lg||(Lg={}));function k0(r,e,t){return t===void 0&&(t="/"),N0(r,e,t)}function N0(r,e,t,s){let o=typeof e=="string"?As(e):e,l=yf(o.pathname||"/",t);if(l==null)return null;let h=S_(r);x0(h);let f=null;for(let g=0;f==null&&g<h.length;++g){let y=$0(l);f=U0(h[g],y)}return f}function S_(r,e,t,s){e===void 0&&(e=[]),t===void 0&&(t=[]),s===void 0&&(s="");let o=(l,h,f)=>{let g={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};g.relativePath.startsWith("/")&&(pt(g.relativePath.startsWith(s),'Absolute route path "'+g.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),g.relativePath=g.relativePath.slice(s.length));let y=Ri([s,g.relativePath]),w=t.concat(g);l.children&&l.children.length>0&&(pt(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+y+'".')),S_(l.children,e,w,y)),!(l.path==null&&!l.index)&&e.push({path:y,score:F0(y,l.index),routesMeta:w})};return r.forEach((l,h)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))o(l,h);else for(let g of A_(l.path))o(l,h,g)}),e}function A_(r){let e=r.split("/");if(e.length===0)return[];let[t,...s]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(s.length===0)return o?[l,""]:[l];let h=A_(s.join("/")),f=[];return f.push(...h.map(g=>g===""?l:[l,g].join("/"))),o&&f.push(...h),f.map(g=>r.startsWith("/")&&g===""?"/":g)}function x0(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:j0(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}const D0=/^:[\w-]+$/,V0=3,O0=2,M0=1,L0=10,b0=-2,bg=r=>r==="*";function F0(r,e){let t=r.split("/"),s=t.length;return t.some(bg)&&(s+=b0),e&&(s+=O0),t.filter(o=>!bg(o)).reduce((o,l)=>o+(D0.test(l)?V0:l===""?M0:L0),s)}function j0(r,e){return r.length===e.length&&r.slice(0,-1).every((s,o)=>s===e[o])?r[r.length-1]-e[e.length-1]:0}function U0(r,e,t){let{routesMeta:s}=r,o={},l="/",h=[];for(let f=0;f<s.length;++f){let g=s[f],y=f===s.length-1,w=l==="/"?e:e.slice(l.length)||"/",E=z0({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},w),S=g.route;if(!E)return null;Object.assign(o,E.params),h.push({params:o,pathname:Ri([l,E.pathname]),pathnameBase:K0(Ri([l,E.pathnameBase])),route:S}),E.pathnameBase!=="/"&&(l=Ri([l,E.pathnameBase]))}return h}function z0(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,s]=B0(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let l=o[0],h=l.replace(/(.)\/+$/,"$1"),f=o.slice(1);return{params:s.reduce((y,w,E)=>{let{paramName:S,isOptional:b}=w;if(S==="*"){let q=f[E]||"";h=l.slice(0,l.length-q.length).replace(/(.)\/+$/,"$1")}const H=f[E];return b&&!H?y[S]=void 0:y[S]=(H||"").replace(/%2F/g,"/"),y},{}),pathname:l,pathnameBase:h,pattern:r}}function B0(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Rc(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,f,g)=>(s.push({paramName:f,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(s.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function $0(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Rc(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function yf(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=r.charAt(t);return s&&s!=="/"?null:r.slice(t)||"/"}const q0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,W0=r=>q0.test(r);function H0(r,e){e===void 0&&(e="/");let{pathname:t,search:s="",hash:o=""}=typeof r=="string"?As(r):r,l;if(t)if(W0(t))l=t;else{if(t.includes("//")){let h=t;t=t.replace(/\/\/+/g,"/"),Rc(!1,"Pathnames cannot have embedded double slashes - normalizing "+(h+" -> "+t))}t.startsWith("/")?l=Fg(t.substring(1),"/"):l=Fg(t,e)}else l=e;return{pathname:l,search:Q0(s),hash:X0(o)}}function Fg(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Rd(r,e,t,s){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function G0(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function _f(r,e){let t=G0(r);return e?t.map((s,o)=>o===t.length-1?s.pathname:s.pathnameBase):t.map(s=>s.pathnameBase)}function vf(r,e,t,s){s===void 0&&(s=!1);let o;typeof r=="string"?o=As(r):(o=Za({},r),pt(!o.pathname||!o.pathname.includes("?"),Rd("?","pathname","search",o)),pt(!o.pathname||!o.pathname.includes("#"),Rd("#","pathname","hash",o)),pt(!o.search||!o.search.includes("#"),Rd("#","search","hash",o)));let l=r===""||o.pathname==="",h=l?"/":o.pathname,f;if(h==null)f=t;else{let E=e.length-1;if(!s&&h.startsWith("..")){let S=h.split("/");for(;S[0]==="..";)S.shift(),E-=1;o.pathname=S.join("/")}f=E>=0?e[E]:"/"}let g=H0(o,f),y=h&&h!=="/"&&h.endsWith("/"),w=(l||h===".")&&t.endsWith("/");return!g.pathname.endsWith("/")&&(y||w)&&(g.pathname+="/"),g}const Ri=r=>r.join("/").replace(/\/\/+/g,"/"),K0=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),Q0=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,X0=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function Y0(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const R_=["post","put","patch","delete"];new Set(R_);const J0=["get",...R_];new Set(J0);function el(){return el=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},el.apply(this,arguments)}const wf=he.createContext(null),Z0=he.createContext(null),ji=he.createContext(null),Cc=he.createContext(null),Ur=he.createContext({outlet:null,matches:[],isDataRoute:!1}),C_=he.createContext(null);function eT(r,e){let{relative:t}=e===void 0?{}:e;Lo()||pt(!1);let{basename:s,navigator:o}=he.useContext(ji),{hash:l,pathname:h,search:f}=k_(r,{relative:t}),g=h;return s!=="/"&&(g=h==="/"?s:Ri([s,h])),o.createHref({pathname:g,search:f,hash:l})}function Lo(){return he.useContext(Cc)!=null}function cl(){return Lo()||pt(!1),he.useContext(Cc).location}function P_(r){he.useContext(ji).static||he.useLayoutEffect(r)}function Pc(){let{isDataRoute:r}=he.useContext(Ur);return r?pT():tT()}function tT(){Lo()||pt(!1);let r=he.useContext(wf),{basename:e,future:t,navigator:s}=he.useContext(ji),{matches:o}=he.useContext(Ur),{pathname:l}=cl(),h=JSON.stringify(_f(o,t.v7_relativeSplatPath)),f=he.useRef(!1);return P_(()=>{f.current=!0}),he.useCallback(function(y,w){if(w===void 0&&(w={}),!f.current)return;if(typeof y=="number"){s.go(y);return}let E=vf(y,JSON.parse(h),l,w.relative==="path");r==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:Ri([e,E.pathname])),(w.replace?s.replace:s.push)(E,w.state,w)},[e,s,h,l,r])}function nT(){let{matches:r}=he.useContext(Ur),e=r[r.length-1];return e?e.params:{}}function k_(r,e){let{relative:t}=e===void 0?{}:e,{future:s}=he.useContext(ji),{matches:o}=he.useContext(Ur),{pathname:l}=cl(),h=JSON.stringify(_f(o,s.v7_relativeSplatPath));return he.useMemo(()=>vf(r,JSON.parse(h),l,t==="path"),[r,h,l,t])}function rT(r,e){return iT(r,e)}function iT(r,e,t,s){Lo()||pt(!1);let{navigator:o}=he.useContext(ji),{matches:l}=he.useContext(Ur),h=l[l.length-1],f=h?h.params:{};h&&h.pathname;let g=h?h.pathnameBase:"/";h&&h.route;let y=cl(),w;if(e){var E;let j=typeof e=="string"?As(e):e;g==="/"||(E=j.pathname)!=null&&E.startsWith(g)||pt(!1),w=j}else w=y;let S=w.pathname||"/",b=S;if(g!=="/"){let j=g.replace(/^\//,"").split("/");b="/"+S.replace(/^\//,"").split("/").slice(j.length).join("/")}let H=k0(r,{pathname:b}),q=uT(H&&H.map(j=>Object.assign({},j,{params:Object.assign({},f,j.params),pathname:Ri([g,o.encodeLocation?o.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?g:Ri([g,o.encodeLocation?o.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),l,t,s);return e&&q?he.createElement(Cc.Provider,{value:{location:el({pathname:"/",search:"",hash:"",state:null,key:"default"},w),navigationType:Ii.Pop}},q):q}function sT(){let r=fT(),e=Y0(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return he.createElement(he.Fragment,null,he.createElement("h2",null,"Unexpected Application Error!"),he.createElement("h3",{style:{fontStyle:"italic"}},e),t?he.createElement("pre",{style:o},t):null,null)}const oT=he.createElement(sT,null);class aT extends he.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?he.createElement(Ur.Provider,{value:this.props.routeContext},he.createElement(C_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function lT(r){let{routeContext:e,match:t,children:s}=r,o=he.useContext(wf);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),he.createElement(Ur.Provider,{value:e},s)}function uT(r,e,t,s){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),s===void 0&&(s=null),r==null){var l;if(!t)return null;if(t.errors)r=t.matches;else if((l=s)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let h=r,f=(o=t)==null?void 0:o.errors;if(f!=null){let w=h.findIndex(E=>E.route.id&&f?.[E.route.id]!==void 0);w>=0||pt(!1),h=h.slice(0,Math.min(h.length,w+1))}let g=!1,y=-1;if(t&&s&&s.v7_partialHydration)for(let w=0;w<h.length;w++){let E=h[w];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(y=w),E.route.id){let{loaderData:S,errors:b}=t,H=E.route.loader&&S[E.route.id]===void 0&&(!b||b[E.route.id]===void 0);if(E.route.lazy||H){g=!0,y>=0?h=h.slice(0,y+1):h=[h[0]];break}}}return h.reduceRight((w,E,S)=>{let b,H=!1,q=null,j=null;t&&(b=f&&E.route.id?f[E.route.id]:void 0,q=E.route.errorElement||oT,g&&(y<0&&S===0?(mT("route-fallback"),H=!0,j=null):y===S&&(H=!0,j=E.route.hydrateFallbackElement||null)));let K=e.concat(h.slice(0,S+1)),re=()=>{let L;return b?L=q:H?L=j:E.route.Component?L=he.createElement(E.route.Component,null):E.route.element?L=E.route.element:L=w,he.createElement(lT,{match:E,routeContext:{outlet:w,matches:K,isDataRoute:t!=null},children:L})};return t&&(E.route.ErrorBoundary||E.route.errorElement||S===0)?he.createElement(aT,{location:t.location,revalidation:t.revalidation,component:q,error:b,children:re(),routeContext:{outlet:null,matches:K,isDataRoute:!0}}):re()},null)}var N_=(function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r})(N_||{}),x_=(function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r})(x_||{});function cT(r){let e=he.useContext(wf);return e||pt(!1),e}function hT(r){let e=he.useContext(Z0);return e||pt(!1),e}function dT(r){let e=he.useContext(Ur);return e||pt(!1),e}function D_(r){let e=dT(),t=e.matches[e.matches.length-1];return t.route.id||pt(!1),t.route.id}function fT(){var r;let e=he.useContext(C_),t=hT(),s=D_();return e!==void 0?e:(r=t.errors)==null?void 0:r[s]}function pT(){let{router:r}=cT(N_.UseNavigateStable),e=D_(x_.UseNavigateStable),t=he.useRef(!1);return P_(()=>{t.current=!0}),he.useCallback(function(o,l){l===void 0&&(l={}),t.current&&(typeof o=="number"?r.navigate(o):r.navigate(o,el({fromRouteId:e},l)))},[r,e])}const jg={};function mT(r,e,t){jg[r]||(jg[r]=!0)}function gT(r,e){r?.v7_startTransition,r?.v7_relativeSplatPath}function zd(r){let{to:e,replace:t,state:s,relative:o}=r;Lo()||pt(!1);let{future:l,static:h}=he.useContext(ji),{matches:f}=he.useContext(Ur),{pathname:g}=cl(),y=Pc(),w=vf(e,_f(f,l.v7_relativeSplatPath),g,o==="path"),E=JSON.stringify(w);return he.useEffect(()=>y(JSON.parse(E),{replace:t,state:s,relative:o}),[y,E,o,t,s]),null}function vi(r){pt(!1)}function yT(r){let{basename:e="/",children:t=null,location:s,navigationType:o=Ii.Pop,navigator:l,static:h=!1,future:f}=r;Lo()&&pt(!1);let g=e.replace(/^\/*/,"/"),y=he.useMemo(()=>({basename:g,navigator:l,static:h,future:el({v7_relativeSplatPath:!1},f)}),[g,f,l,h]);typeof s=="string"&&(s=As(s));let{pathname:w="/",search:E="",hash:S="",state:b=null,key:H="default"}=s,q=he.useMemo(()=>{let j=yf(w,g);return j==null?null:{location:{pathname:j,search:E,hash:S,state:b,key:H},navigationType:o}},[g,w,E,S,b,H,o]);return q==null?null:he.createElement(ji.Provider,{value:y},he.createElement(Cc.Provider,{children:t,value:q}))}function _T(r){let{children:e,location:t}=r;return rT(Bd(e),t)}new Promise(()=>{});function Bd(r,e){e===void 0&&(e=[]);let t=[];return he.Children.forEach(r,(s,o)=>{if(!he.isValidElement(s))return;let l=[...e,o];if(s.type===he.Fragment){t.push.apply(t,Bd(s.props.children,l));return}s.type!==vi&&pt(!1),!s.props.index||!s.props.children||pt(!1);let h={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(h.children=Bd(s.props.children,l)),t.push(h)}),t}function $d(){return $d=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},$d.apply(this,arguments)}function vT(r,e){if(r==null)return{};var t={},s=Object.keys(r),o,l;for(l=0;l<s.length;l++)o=s[l],!(e.indexOf(o)>=0)&&(t[o]=r[o]);return t}function wT(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function ET(r,e){return r.button===0&&(!e||e==="_self")&&!wT(r)}const TT=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],IT="6";try{window.__reactRouterVersion=IT}catch{}const ST="startTransition",Ug=v0[ST];function AT(r){let{basename:e,children:t,future:s,window:o}=r,l=he.useRef();l.current==null&&(l.current=R0({window:o,v5Compat:!0}));let h=l.current,[f,g]=he.useState({action:h.action,location:h.location}),{v7_startTransition:y}=s||{},w=he.useCallback(E=>{y&&Ug?Ug(()=>g(E)):g(E)},[g,y]);return he.useLayoutEffect(()=>h.listen(w),[h,w]),he.useEffect(()=>gT(s),[s]),he.createElement(yT,{basename:e,children:t,location:f.location,navigationType:f.action,navigator:h,future:s})}const RT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",CT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ba=he.forwardRef(function(e,t){let{onClick:s,relative:o,reloadDocument:l,replace:h,state:f,target:g,to:y,preventScrollReset:w,viewTransition:E}=e,S=vT(e,TT),{basename:b}=he.useContext(ji),H,q=!1;if(typeof y=="string"&&CT.test(y)&&(H=y,RT))try{let L=new URL(window.location.href),ee=y.startsWith("//")?new URL(L.protocol+y):new URL(y),ie=yf(ee.pathname,b);ee.origin===L.origin&&ie!=null?y=ie+ee.search+ee.hash:q=!0}catch{}let j=eT(y,{relative:o}),K=PT(y,{replace:h,state:f,target:g,preventScrollReset:w,relative:o,viewTransition:E});function re(L){s&&s(L),L.defaultPrevented||K(L)}return he.createElement("a",$d({},S,{href:H||j,onClick:q||l?s:re,ref:t,target:g}))});var zg;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(zg||(zg={}));var Bg;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(Bg||(Bg={}));function PT(r,e){let{target:t,replace:s,state:o,preventScrollReset:l,relative:h,viewTransition:f}=e===void 0?{}:e,g=Pc(),y=cl(),w=k_(r,{relative:h});return he.useCallback(E=>{if(ET(E,t)){E.preventDefault();let S=s!==void 0?s:ic(y)===ic(w);g(r,{replace:S,state:o,preventScrollReset:l,relative:h,viewTransition:f})}},[y,g,w,s,o,t,r,l,h,f])}const kT=()=>{};var $g={};const V_=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},NT=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const o=r[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],h=r[t++],f=r[t++],g=((o&7)<<18|(l&63)<<12|(h&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const l=r[t++],h=r[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},O_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const l=r[o],h=o+1<r.length,f=h?r[o+1]:0,g=o+2<r.length,y=g?r[o+2]:0,w=l>>2,E=(l&3)<<4|f>>4;let S=(f&15)<<2|y>>6,b=y&63;g||(b=64,h||(S=64)),s.push(t[w],t[E],t[S],t[b])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(V_(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):NT(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],f=o<r.length?t[r.charAt(o)]:0;++o;const y=o<r.length?t[r.charAt(o)]:64;++o;const E=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||f==null||y==null||E==null)throw new xT;const S=l<<2|f>>4;if(s.push(S),y!==64){const b=f<<4&240|y>>2;if(s.push(b),E!==64){const H=y<<6&192|E;s.push(H)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class xT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const DT=function(r){const e=V_(r);return O_.encodeByteArray(e,!0)},sc=function(r){return DT(r).replace(/\./g,"")},M_=function(r){try{return O_.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function VT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const OT=()=>VT().__FIREBASE_DEFAULTS__,MT=()=>{if(typeof process>"u"||typeof $g>"u")return;const r=$g.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},LT=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&M_(r[1]);return e&&JSON.parse(e)},kc=()=>{try{return kT()||OT()||MT()||LT()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},L_=r=>kc()?.emulatorHosts?.[r],bT=r=>{const e=L_(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},b_=()=>kc()?.config,F_=r=>kc()?.[`_${r}`];class FT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}function bo(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function j_(r){return(await fetch(r,{credentials:"include"})).ok}function jT(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...r};return[sc(JSON.stringify(t)),sc(JSON.stringify(h)),""].join(".")}const Ha={};function UT(){const r={prod:[],emulator:[]};for(const e of Object.keys(Ha))Ha[e]?r.emulator.push(e):r.prod.push(e);return r}function zT(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let qg=!1;function U_(r,e){if(typeof window>"u"||typeof document>"u"||!bo(window.location.host)||Ha[r]===e||Ha[r]||qg)return;Ha[r]=e;function t(S){return`__firebase__banner__${S}`}const s="__firebase__banner",l=UT().prod.length>0;function h(){const S=document.getElementById(s);S&&S.remove()}function f(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function g(S,b){S.setAttribute("width","24"),S.setAttribute("id",b),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function y(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{qg=!0,h()},S}function w(S,b){S.setAttribute("id",b),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function E(){const S=zT(s),b=t("text"),H=document.getElementById(b)||document.createElement("span"),q=t("learnmore"),j=document.getElementById(q)||document.createElement("a"),K=t("preprendIcon"),re=document.getElementById(K)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const L=S.element;f(L),w(j,q);const ee=y();g(re,K),L.append(re,H,j,ee),document.body.appendChild(L)}l?(H.innerText="Preview backend disconnected.",re.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(re.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,H.innerText="Preview backend running in this workspace."),H.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}function Ht(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function BT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ht())}function $T(){const r=kc()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function qT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function WT(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function HT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function GT(){const r=Ht();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function KT(){return!$T()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function QT(){try{return typeof indexedDB=="object"}catch{return!1}}function XT(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}const YT="FirebaseError";class zr extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=YT,Object.setPrototypeOf(this,zr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hl.prototype.create)}}class hl{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?JT(l,s):"Error",f=`${this.serviceName}: ${h} (${o}).`;return new zr(o,f,s)}}function JT(r,e){return r.replace(ZT,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const ZT=/\{\$([^}]+)}/g;function eI(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function vs(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=r[o],h=e[o];if(Wg(l)&&Wg(h)){if(!vs(l,h))return!1}else if(l!==h)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function Wg(r){return r!==null&&typeof r=="object"}function dl(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function tI(r,e){const t=new nI(r,e);return t.subscribe.bind(t)}class nI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");rI(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=Cd),o.error===void 0&&(o.error=Cd),o.complete===void 0&&(o.complete=Cd);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function rI(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Cd(){}function St(r){return r&&r._delegate?r._delegate:r}class ws{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ms="[DEFAULT]";class iI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new FT;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(oI(e))try{this.getOrInitializeService({instanceIdentifier:ms})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=ms){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ms){return this.instances.has(e)}getOptions(e=ms){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,h]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);s===f&&h.resolve(o)}return o}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:sI(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ms){return this.component?this.component.multipleInstances?e:ms:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function sI(r){return r===ms?void 0:r}function oI(r){return r.instantiationMode==="EAGER"}class aI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new iI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Oe;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Oe||(Oe={}));const lI={debug:Oe.DEBUG,verbose:Oe.VERBOSE,info:Oe.INFO,warn:Oe.WARN,error:Oe.ERROR,silent:Oe.SILENT},uI=Oe.INFO,cI={[Oe.DEBUG]:"log",[Oe.VERBOSE]:"log",[Oe.INFO]:"info",[Oe.WARN]:"warn",[Oe.ERROR]:"error"},hI=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=cI[e];if(o)console[o](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ef{constructor(e){this.name=e,this._logLevel=uI,this._logHandler=hI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?lI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Oe.DEBUG,...e),this._logHandler(this,Oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Oe.VERBOSE,...e),this._logHandler(this,Oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Oe.INFO,...e),this._logHandler(this,Oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Oe.WARN,...e),this._logHandler(this,Oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Oe.ERROR,...e),this._logHandler(this,Oe.ERROR,...e)}}const dI=(r,e)=>e.some(t=>r instanceof t);let Hg,Gg;function fI(){return Hg||(Hg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function pI(){return Gg||(Gg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const z_=new WeakMap,qd=new WeakMap,B_=new WeakMap,Pd=new WeakMap,Tf=new WeakMap;function mI(r){const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",h)},l=()=>{t(Ci(r.result)),o()},h=()=>{s(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&z_.set(t,r)}).catch(()=>{}),Tf.set(e,r),e}function gI(r){if(qd.has(r))return;const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",h),r.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",h),r.addEventListener("abort",h)});qd.set(r,e)}let Wd={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return qd.get(r);if(e==="objectStoreNames")return r.objectStoreNames||B_.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ci(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function yI(r){Wd=r(Wd)}function _I(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(kd(this),e,...t);return B_.set(s,e.sort?e.sort():[e]),Ci(s)}:pI().includes(r)?function(...e){return r.apply(kd(this),e),Ci(z_.get(this))}:function(...e){return Ci(r.apply(kd(this),e))}}function vI(r){return typeof r=="function"?_I(r):(r instanceof IDBTransaction&&gI(r),dI(r,fI())?new Proxy(r,Wd):r)}function Ci(r){if(r instanceof IDBRequest)return mI(r);if(Pd.has(r))return Pd.get(r);const e=vI(r);return e!==r&&(Pd.set(r,e),Tf.set(e,r)),e}const kd=r=>Tf.get(r);function wI(r,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const h=indexedDB.open(r,e),f=Ci(h);return s&&h.addEventListener("upgradeneeded",g=>{s(Ci(h.result),g.oldVersion,g.newVersion,Ci(h.transaction),g)}),t&&h.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),f.then(g=>{l&&g.addEventListener("close",()=>l()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),f}const EI=["get","getKey","getAll","getAllKeys","count"],TI=["put","add","delete","clear"],Nd=new Map;function Kg(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Nd.get(e))return Nd.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=TI.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||EI.includes(t)))return;const l=async function(h,...f){const g=this.transaction(h,o?"readwrite":"readonly");let y=g.store;return s&&(y=y.index(f.shift())),(await Promise.all([y[t](...f),o&&g.done]))[0]};return Nd.set(e,l),l}yI(r=>({...r,get:(e,t,s)=>Kg(e,t)||r.get(e,t,s),has:(e,t)=>!!Kg(e,t)||r.has(e,t)}));class II{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(SI(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function SI(r){return r.getComponent()?.type==="VERSION"}const Hd="@firebase/app",Qg="0.14.6";const Mr=new Ef("@firebase/app"),AI="@firebase/app-compat",RI="@firebase/analytics-compat",CI="@firebase/analytics",PI="@firebase/app-check-compat",kI="@firebase/app-check",NI="@firebase/auth",xI="@firebase/auth-compat",DI="@firebase/database",VI="@firebase/data-connect",OI="@firebase/database-compat",MI="@firebase/functions",LI="@firebase/functions-compat",bI="@firebase/installations",FI="@firebase/installations-compat",jI="@firebase/messaging",UI="@firebase/messaging-compat",zI="@firebase/performance",BI="@firebase/performance-compat",$I="@firebase/remote-config",qI="@firebase/remote-config-compat",WI="@firebase/storage",HI="@firebase/storage-compat",GI="@firebase/firestore",KI="@firebase/ai",QI="@firebase/firestore-compat",XI="firebase",YI="12.6.0";const Gd="[DEFAULT]",JI={[Hd]:"fire-core",[AI]:"fire-core-compat",[CI]:"fire-analytics",[RI]:"fire-analytics-compat",[kI]:"fire-app-check",[PI]:"fire-app-check-compat",[NI]:"fire-auth",[xI]:"fire-auth-compat",[DI]:"fire-rtdb",[VI]:"fire-data-connect",[OI]:"fire-rtdb-compat",[MI]:"fire-fn",[LI]:"fire-fn-compat",[bI]:"fire-iid",[FI]:"fire-iid-compat",[jI]:"fire-fcm",[UI]:"fire-fcm-compat",[zI]:"fire-perf",[BI]:"fire-perf-compat",[$I]:"fire-rc",[qI]:"fire-rc-compat",[WI]:"fire-gcs",[HI]:"fire-gcs-compat",[GI]:"fire-fst",[QI]:"fire-fst-compat",[KI]:"fire-vertex","fire-js":"fire-js",[XI]:"fire-js-all"};const oc=new Map,ZI=new Map,Kd=new Map;function Xg(r,e){try{r.container.addComponent(e)}catch(t){Mr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Co(r){const e=r.name;if(Kd.has(e))return Mr.debug(`There were multiple attempts to register component ${e}.`),!1;Kd.set(e,r);for(const t of oc.values())Xg(t,r);for(const t of ZI.values())Xg(t,r);return!0}function If(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function bn(r){return r==null?!1:r.settings!==void 0}const eS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Pi=new hl("app","Firebase",eS);class tS{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ws("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Pi.create("app-deleted",{appName:this._name})}}const Fo=YI;function $_(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s={name:Gd,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw Pi.create("bad-app-name",{appName:String(o)});if(t||(t=b_()),!t)throw Pi.create("no-options");const l=oc.get(o);if(l){if(vs(t,l.options)&&vs(s,l.config))return l;throw Pi.create("duplicate-app",{appName:o})}const h=new aI(o);for(const g of Kd.values())h.addComponent(g);const f=new tS(t,s,h);return oc.set(o,f),f}function q_(r=Gd){const e=oc.get(r);if(!e&&r===Gd&&b_())return $_();if(!e)throw Pi.create("no-app",{appName:r});return e}function ki(r,e,t){let s=JI[r]??r;t&&(s+=`-${t}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const h=[`Unable to register library "${s}" with version "${e}":`];o&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Mr.warn(h.join(" "));return}Co(new ws(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const nS="firebase-heartbeat-database",rS=1,tl="firebase-heartbeat-store";let xd=null;function W_(){return xd||(xd=wI(nS,rS,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(tl)}catch(t){console.warn(t)}}}}).catch(r=>{throw Pi.create("idb-open",{originalErrorMessage:r.message})})),xd}async function iS(r){try{const t=(await W_()).transaction(tl),s=await t.objectStore(tl).get(H_(r));return await t.done,s}catch(e){if(e instanceof zr)Mr.warn(e.message);else{const t=Pi.create("idb-get",{originalErrorMessage:e?.message});Mr.warn(t.message)}}}async function Yg(r,e){try{const s=(await W_()).transaction(tl,"readwrite");await s.objectStore(tl).put(e,H_(r)),await s.done}catch(t){if(t instanceof zr)Mr.warn(t.message);else{const s=Pi.create("idb-set",{originalErrorMessage:t?.message});Mr.warn(s.message)}}}function H_(r){return`${r.name}!${r.options.appId}`}const sS=1024,oS=30;class aS{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new uS(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Jg();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:t}),this._heartbeatsCache.heartbeats.length>oS){const o=cS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Mr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Jg(),{heartbeatsToSend:t,unsentEntries:s}=lS(this._heartbeatsCache.heartbeats),o=sc(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Mr.warn(e),""}}}function Jg(){return new Date().toISOString().substring(0,10)}function lS(r,e=sS){const t=[];let s=r.slice();for(const o of r){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),Zg(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Zg(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class uS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return QT()?XT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await iS(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Yg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Yg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Zg(r){return sc(JSON.stringify({version:2,heartbeats:r})).length}function cS(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}function hS(r){Co(new ws("platform-logger",e=>new II(e),"PRIVATE")),Co(new ws("heartbeat",e=>new aS(e),"PRIVATE")),ki(Hd,Qg,r),ki(Hd,Qg,"esm2020"),ki("fire-js","")}hS("");function G_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const dS=G_,K_=new hl("auth","Firebase",G_());const ac=new Ef("@firebase/auth");function fS(r,...e){ac.logLevel<=Oe.WARN&&ac.warn(`Auth (${Fo}): ${r}`,...e)}function Ku(r,...e){ac.logLevel<=Oe.ERROR&&ac.error(`Auth (${Fo}): ${r}`,...e)}function hr(r,...e){throw Af(r,...e)}function jn(r,...e){return Af(r,...e)}function Sf(r,e,t){const s={...dS(),[e]:t};return new hl("auth","Firebase",s).create(e,{appName:r.name})}function _s(r){return Sf(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function pS(r,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&hr(r,"argument-error"),Sf(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Af(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return K_.create(r,...e)}function Ie(r,e,...t){if(!r)throw Af(e,...t)}function Dr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Ku(e),new Error(e)}function Lr(r,e){r||Dr(e)}function Qd(){return typeof self<"u"&&self.location?.href||""}function mS(){return ey()==="http:"||ey()==="https:"}function ey(){return typeof self<"u"&&self.location?.protocol||null}function gS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(mS()||WT()||"connection"in navigator)?navigator.onLine:!0}function yS(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class fl{constructor(e,t){this.shortDelay=e,this.longDelay=t,Lr(t>e,"Short delay should be less than long delay!"),this.isMobile=BT()||HT()}get(){return gS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Rf(r,e){Lr(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class Q_{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Dr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Dr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Dr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const _S={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const vS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],wS=new fl(3e4,6e4);function Cf(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function jo(r,e,t,s,o={}){return X_(r,o,async()=>{let l={},h={};s&&(e==="GET"?h=s:l={body:JSON.stringify(s)});const f=dl({key:r.config.apiKey,...h}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const y={method:e,headers:g,...l};return qT()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&bo(r.emulatorConfig.host)&&(y.credentials="include"),Q_.fetch()(await Y_(r,r.config.apiHost,t,f),y)})}async function X_(r,e,t){r._canInitEmulator=!1;const s={..._S,...e};try{const o=new TS(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw Bu(r,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const f=l.ok?h.errorMessage:h.error.message,[g,y]=f.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Bu(r,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw Bu(r,"email-already-in-use",h);if(g==="USER_DISABLED")throw Bu(r,"user-disabled",h);const w=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Sf(r,w,y);hr(r,w)}}catch(o){if(o instanceof zr)throw o;hr(r,"network-request-failed",{message:String(o)})}}async function ES(r,e,t,s,o={}){const l=await jo(r,e,t,s,o);return"mfaPendingCredential"in l&&hr(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function Y_(r,e,t,s){const o=`${e}${t}?${s}`,l=r,h=l.config.emulator?Rf(r.config,o):`${r.config.apiScheme}://${o}`;return vS.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}class TS{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(jn(this.auth,"network-request-failed")),wS.get())})}}function Bu(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=jn(r,e,s);return o.customData._tokenResponse=t,o}async function IS(r,e){return jo(r,"POST","/v1/accounts:delete",e)}async function lc(r,e){return jo(r,"POST","/v1/accounts:lookup",e)}function Ga(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function SS(r,e=!1){const t=St(r),s=await t.getIdToken(e),o=Pf(s);Ie(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l?.sign_in_provider;return{claims:o,token:s,authTime:Ga(Dd(o.auth_time)),issuedAtTime:Ga(Dd(o.iat)),expirationTime:Ga(Dd(o.exp)),signInProvider:h||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Dd(r){return Number(r)*1e3}function Pf(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return Ku("JWT malformed, contained fewer than 3 sections"),null;try{const o=M_(t);return o?JSON.parse(o):(Ku("Failed to decode base64 JWT payload"),null)}catch(o){return Ku("Caught error parsing JWT payload as JSON",o?.toString()),null}}function ty(r){const e=Pf(r);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function nl(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof zr&&AS(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function AS({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class RS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Xd{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ga(this.lastLoginAt),this.creationTime=Ga(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function uc(r){const e=r.auth,t=await r.getIdToken(),s=await nl(r,lc(e,{idToken:t}));Ie(s?.users.length,e,"internal-error");const o=s.users[0];r._notifyReloadListener(o);const l=o.providerUserInfo?.length?J_(o.providerUserInfo):[],h=PS(r.providerData,l),f=r.isAnonymous,g=!(r.email&&o.passwordHash)&&!h?.length,y=f?g:!1,w={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Xd(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(r,w)}async function CS(r){const e=St(r);await uc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function PS(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function J_(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function kS(r,e){const t=await X_(r,{},async()=>{const s=dl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,h=await Y_(r,o,"/v1/token",`key=${l}`),f=await r._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:f,body:s};return r.emulatorConfig&&bo(r.emulatorConfig.host)&&(g.credentials="include"),Q_.fetch()(h,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function NS(r,e){return jo(r,"POST","/v2/accounts:revokeToken",Cf(r,e))}class To{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ty(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const t=ty(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:l}=await kS(e,t);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:l}=t,h=new To;return s&&(Ie(typeof s=="string","internal-error",{appName:e}),h.refreshToken=s),o&&(Ie(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(Ie(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new To,this.toJSON())}_performRefresh(){return Dr("not implemented")}}function _i(r,e){Ie(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Fn{constructor({uid:e,auth:t,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new RS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Xd(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await nl(this,this.stsTokenManager.getToken(this.auth,e));return Ie(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return SS(this,e)}reload(){return CS(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Fn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await uc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(bn(this.auth.app))return Promise.reject(_s(this.auth));const e=await this.getIdToken();return await nl(this,IS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,h=t.photoURL??void 0,f=t.tenantId??void 0,g=t._redirectEventId??void 0,y=t.createdAt??void 0,w=t.lastLoginAt??void 0,{uid:E,emailVerified:S,isAnonymous:b,providerData:H,stsTokenManager:q}=t;Ie(E&&q,e,"internal-error");const j=To.fromJSON(this.name,q);Ie(typeof E=="string",e,"internal-error"),_i(s,e.name),_i(o,e.name),Ie(typeof S=="boolean",e,"internal-error"),Ie(typeof b=="boolean",e,"internal-error"),_i(l,e.name),_i(h,e.name),_i(f,e.name),_i(g,e.name),_i(y,e.name),_i(w,e.name);const K=new Fn({uid:E,auth:e,email:o,emailVerified:S,displayName:s,isAnonymous:b,photoURL:h,phoneNumber:l,tenantId:f,stsTokenManager:j,createdAt:y,lastLoginAt:w});return H&&Array.isArray(H)&&(K.providerData=H.map(re=>({...re}))),g&&(K._redirectEventId=g),K}static async _fromIdTokenResponse(e,t,s=!1){const o=new To;o.updateFromServerResponse(t);const l=new Fn({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await uc(l),l}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];Ie(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?J_(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!l?.length,f=new To;f.updateFromIdToken(s);const g=new Fn({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:h}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Xd(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!l?.length};return Object.assign(g,y),g}}const ny=new Map;function Vr(r){Lr(r instanceof Function,"Expected a class definition");let e=ny.get(r);return e?(Lr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,ny.set(r,e),e)}class Z_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Z_.type="NONE";const ry=Z_;function Qu(r,e,t){return`firebase:${r}:${e}:${t}`}class Io{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=Qu(this.userKey,o.apiKey,l),this.fullPersistenceKey=Qu("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await lc(this.auth,{idToken:e}).catch(()=>{});return t?Fn._fromGetAccountInfoResponse(this.auth,t,e):null}return Fn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Io(Vr(ry),e,s);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=o[0]||Vr(ry);const h=Qu(s,e.config.apiKey,e.name);let f=null;for(const y of t)try{const w=await y._get(h);if(w){let E;if(typeof w=="string"){const S=await lc(e,{idToken:w}).catch(()=>{});if(!S)break;E=await Fn._fromGetAccountInfoResponse(e,S,w)}else E=Fn._fromJSON(e,w);y!==l&&(f=E),l=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new Io(l,e,s):(l=g[0],f&&await l._set(h,f.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(h)}catch{}})),new Io(l,e,s))}}function iy(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(rv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ev(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(sv(e))return"Blackberry";if(ov(e))return"Webos";if(tv(e))return"Safari";if((e.includes("chrome/")||nv(e))&&!e.includes("edge/"))return"Chrome";if(iv(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if(s?.length===2)return s[1]}return"Other"}function ev(r=Ht()){return/firefox\//i.test(r)}function tv(r=Ht()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function nv(r=Ht()){return/crios\//i.test(r)}function rv(r=Ht()){return/iemobile/i.test(r)}function iv(r=Ht()){return/android/i.test(r)}function sv(r=Ht()){return/blackberry/i.test(r)}function ov(r=Ht()){return/webos/i.test(r)}function kf(r=Ht()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function xS(r=Ht()){return kf(r)&&!!window.navigator?.standalone}function DS(){return GT()&&document.documentMode===10}function av(r=Ht()){return kf(r)||iv(r)||ov(r)||sv(r)||/windows phone/i.test(r)||rv(r)}function lv(r,e=[]){let t;switch(r){case"Browser":t=iy(Ht());break;case"Worker":t=`${iy(Ht())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Fo}/${s}`}class VS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((h,f)=>{try{const g=e(l);h(g)}catch(g){f(g)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function OS(r,e={}){return jo(r,"GET","/v2/passwordPolicy",Cf(r,e))}const MS=6;class LS{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??MS,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class bS{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new sy(this),this.idTokenSubscription=new sy(this),this.beforeStateQueue=new VS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=K_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Vr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Io.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await lc(this,{idToken:e}),s=await Fn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(bn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(h,h))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,h=s?._redirectEventId,f=await this.tryRedirectSignIn(e);(!l||l===h)&&f?.user&&(s=f.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await uc(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=yS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(bn(this.app))return Promise.reject(_s(this));const t=e?St(e):null;return t&&Ie(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return bn(this.app)?Promise.reject(_s(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return bn(this.app)?Promise.reject(_s(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Vr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await OS(this),t=new LS(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new hl("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await NS(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Vr(e)||this._popupRedirectResolver;Ie(t,this,"argument-error"),this.redirectPersistenceManager=await Io.create(this,[Vr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(f,this,"internal-error"),f.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,s,o);return()=>{h=!0,g()}}else{const g=e.addObserver(t);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=lv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(bn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&fS(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Nc(r){return St(r)}class sy{constructor(e){this.auth=e,this.observer=null,this.addObserver=tI(t=>this.observer=t)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Nf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function FS(r){Nf=r}function jS(r){return Nf.loadJS(r)}function US(){return Nf.gapiScript}function zS(r){return`__${r}${Math.floor(Math.random()*1e6)}`}function BS(r,e){const t=If(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(vs(l,e??{}))return o;hr(o,"already-initialized")}return t.initialize({options:e})}function $S(r,e){const t=e?.persistence||[],s=(Array.isArray(t)?t:[t]).map(Vr);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e?.popupRedirectResolver)}function qS(r,e,t){const s=Nc(r);Ie(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=uv(e),{host:h,port:f}=WS(e),g=f===null?"":`:${f}`,y={url:`${l}//${h}${g}/`},w=Object.freeze({host:h,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Ie(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ie(vs(y,s.config.emulator)&&vs(w,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=w,s.settings.appVerificationDisabledForTesting=!0,bo(h)?(j_(`${l}//${h}${g}`),U_("Auth",!0)):HS()}function uv(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function WS(r){const e=uv(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:oy(s.substr(l.length+1))}}else{const[l,h]=s.split(":");return{host:l,port:oy(h)}}}function oy(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function HS(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class cv{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Dr("not implemented")}_getIdTokenResponse(e){return Dr("not implemented")}_linkToIdToken(e,t){return Dr("not implemented")}_getReauthenticationResolver(e){return Dr("not implemented")}}async function So(r,e){return ES(r,"POST","/v1/accounts:signInWithIdp",Cf(r,e))}const GS="http://localhost";class Es extends cv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Es(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):hr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...l}=t;if(!s||!o)return null;const h=new Es(s,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return So(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,So(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,So(e,t)}buildRequest(){const e={requestUri:GS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=dl(t)}return e}}class xf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class pl extends xf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class wi extends pl{constructor(){super("facebook.com")}static credential(e){return Es._fromParams({providerId:wi.PROVIDER_ID,signInMethod:wi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wi.credentialFromTaggedObject(e)}static credentialFromError(e){return wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wi.credential(e.oauthAccessToken)}catch{return null}}}wi.FACEBOOK_SIGN_IN_METHOD="facebook.com";wi.PROVIDER_ID="facebook.com";class xr extends pl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Es._fromParams({providerId:xr.PROVIDER_ID,signInMethod:xr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return xr.credentialFromTaggedObject(e)}static credentialFromError(e){return xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return xr.credential(t,s)}catch{return null}}}xr.GOOGLE_SIGN_IN_METHOD="google.com";xr.PROVIDER_ID="google.com";class Ei extends pl{constructor(){super("github.com")}static credential(e){return Es._fromParams({providerId:Ei.PROVIDER_ID,signInMethod:Ei.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ei.credentialFromTaggedObject(e)}static credentialFromError(e){return Ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ei.credential(e.oauthAccessToken)}catch{return null}}}Ei.GITHUB_SIGN_IN_METHOD="github.com";Ei.PROVIDER_ID="github.com";class Ti extends pl{constructor(){super("twitter.com")}static credential(e,t){return Es._fromParams({providerId:Ti.PROVIDER_ID,signInMethod:Ti.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ti.credentialFromTaggedObject(e)}static credentialFromError(e){return Ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Ti.credential(t,s)}catch{return null}}}Ti.TWITTER_SIGN_IN_METHOD="twitter.com";Ti.PROVIDER_ID="twitter.com";class Po{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const l=await Fn._fromIdTokenResponse(e,s,o),h=ay(s);return new Po({user:l,providerId:h,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=ay(s);return new Po({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function ay(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}class cc extends zr{constructor(e,t,s,o){super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,cc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new cc(e,t,s,o)}}function hv(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?cc._fromErrorAndOperation(r,l,e,s):l})}async function KS(r,e,t=!1){const s=await nl(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Po._forOperation(r,"link",s)}async function QS(r,e,t=!1){const{auth:s}=r;if(bn(s.app))return Promise.reject(_s(s));const o="reauthenticate";try{const l=await nl(r,hv(s,o,e,r),t);Ie(l.idToken,s,"internal-error");const h=Pf(l.idToken);Ie(h,s,"internal-error");const{sub:f}=h;return Ie(r.uid===f,s,"user-mismatch"),Po._forOperation(r,o,l)}catch(l){throw l?.code==="auth/user-not-found"&&hr(s,"user-mismatch"),l}}async function XS(r,e,t=!1){if(bn(r.app))return Promise.reject(_s(r));const s="signIn",o=await hv(r,s,e),l=await Po._fromIdTokenResponse(r,s,o);return t||await r._updateCurrentUser(l.user),l}function YS(r,e,t,s){return St(r).onIdTokenChanged(e,t,s)}function JS(r,e,t){return St(r).beforeAuthStateChanged(e,t)}function ZS(r,e,t,s){return St(r).onAuthStateChanged(e,t,s)}function e1(r){return St(r).signOut()}const hc="__sak";class dv{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(hc,"1"),this.storage.removeItem(hc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const t1=1e3,n1=10;class fv extends dv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=av(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,f,g)=>{this.notifyListeners(h,g)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(s);!t&&this.localCache[s]===h||this.notifyListeners(s,h)},l=this.storage.getItem(s);DS()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,n1):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},t1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}fv.type="LOCAL";const r1=fv;class pv extends dv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}pv.type="SESSION";const mv=pv;function i1(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class xc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new xc(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!h?.size)return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const f=Array.from(h).map(async y=>y(t.origin,l)),g=await i1(f);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}xc.receivers=[];function Df(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}class s1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((f,g)=>{const y=Df("",20);o.port1.start();const w=setTimeout(()=>{g(new Error("unsupported_event"))},s);h={messageChannel:o,onMessage(E){const S=E;if(S.data.eventId===y)switch(S.data.status){case"ack":clearTimeout(w),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(S.data.response);break;default:clearTimeout(w),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}function or(){return window}function o1(r){or().location.href=r}function gv(){return typeof or().WorkerGlobalScope<"u"&&typeof or().importScripts=="function"}async function a1(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function l1(){return navigator?.serviceWorker?.controller||null}function u1(){return gv()?self:null}const yv="firebaseLocalStorageDb",c1=1,dc="firebaseLocalStorage",_v="fbase_key";class ml{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Dc(r,e){return r.transaction([dc],e?"readwrite":"readonly").objectStore(dc)}function h1(){const r=indexedDB.deleteDatabase(yv);return new ml(r).toPromise()}function Yd(){const r=indexedDB.open(yv,c1);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(dc,{keyPath:_v})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(dc)?e(s):(s.close(),await h1(),e(await Yd()))})})}async function ly(r,e,t){const s=Dc(r,!0).put({[_v]:e,value:t});return new ml(s).toPromise()}async function d1(r,e){const t=Dc(r,!1).get(e),s=await new ml(t).toPromise();return s===void 0?null:s.value}function uy(r,e){const t=Dc(r,!0).delete(e);return new ml(t).toPromise()}const f1=800,p1=3;class vv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Yd(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>p1)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return gv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xc._getInstance(u1()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await a1(),!this.activeServiceWorker)return;this.sender=new s1(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||l1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Yd();return await ly(e,hc,"1"),await uy(e,hc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>ly(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>d1(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>uy(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Dc(o,!1).getAll();return new ml(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),f1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}vv.type="LOCAL";const m1=vv;new fl(3e4,6e4);function wv(r,e){return e?Vr(e):(Ie(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class Vf extends cv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return So(e,this._buildIdpRequest())}_linkToIdToken(e,t){return So(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return So(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function g1(r){return XS(r.auth,new Vf(r),r.bypassAuthState)}function y1(r){const{auth:e,user:t}=r;return Ie(t,e,"internal-error"),QS(t,new Vf(r),r.bypassAuthState)}async function _1(r){const{auth:e,user:t}=r;return Ie(t,e,"internal-error"),KS(t,new Vf(r),r.bypassAuthState)}class Ev{constructor(e,t,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:l,error:h,type:f}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return g1;case"linkViaPopup":case"linkViaRedirect":return _1;case"reauthViaPopup":case"reauthViaRedirect":return y1;default:hr(this.auth,"internal-error")}}resolve(e){Lr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Lr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const v1=new fl(2e3,1e4);async function w1(r,e,t){if(bn(r.app))return Promise.reject(jn(r,"operation-not-supported-in-this-environment"));const s=Nc(r);pS(r,e,xf);const o=wv(s,t);return new gs(s,"signInViaPopup",e,o).executeNotNull()}class gs extends Ev{constructor(e,t,s,o,l){super(e,t,o,l),this.provider=s,this.authWindow=null,this.pollId=null,gs.currentPopupAction&&gs.currentPopupAction.cancel(),gs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){Lr(this.filter.length===1,"Popup operations only handle one event");const e=Df();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(jn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(jn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,gs.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(jn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,v1.get())};e()}}gs.currentPopupAction=null;const E1="pendingRedirect",Xu=new Map;class T1 extends Ev{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Xu.get(this.auth._key());if(!e){try{const s=await I1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Xu.set(this.auth._key(),e)}return this.bypassAuthState||Xu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function I1(r,e){const t=R1(e),s=A1(r);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function S1(r,e){Xu.set(r._key(),e)}function A1(r){return Vr(r._redirectPersistence)}function R1(r){return Qu(E1,r.config.apiKey,r.name)}async function C1(r,e,t=!1){if(bn(r.app))return Promise.reject(_s(r));const s=Nc(r),o=wv(s,e),h=await new T1(s,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await s._persistUserIfCurrent(h.user),await s._setRedirectUser(null,e)),h}const P1=600*1e3;class k1{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!N1(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Tv(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";t.onError(jn(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=P1&&this.cachedEventUids.clear(),this.cachedEventUids.has(cy(e))}saveEventToCache(e){this.cachedEventUids.add(cy(e)),this.lastProcessedEventTime=Date.now()}}function cy(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Tv({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function N1(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Tv(r);default:return!1}}async function x1(r,e={}){return jo(r,"GET","/v1/projects",e)}const D1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,V1=/^https?/;async function O1(r){if(r.config.emulator)return;const{authorizedDomains:e}=await x1(r);for(const t of e)try{if(M1(t))return}catch{}hr(r,"unauthorized-domain")}function M1(r){const e=Qd(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===s}if(!V1.test(t))return!1;if(D1.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const L1=new fl(3e4,6e4);function hy(){const r=or().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function b1(r){return new Promise((e,t)=>{function s(){hy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{hy(),t(jn(r,"network-request-failed"))},timeout:L1.get()})}if(or().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(or().gapi?.load)s();else{const o=zS("iframefcb");return or()[o]=()=>{gapi.load?s():t(jn(r,"network-request-failed"))},jS(`${US()}?onload=${o}`).catch(l=>t(l))}}).catch(e=>{throw Yu=null,e})}let Yu=null;function F1(r){return Yu=Yu||b1(r),Yu}const j1=new fl(5e3,15e3),U1="__/auth/iframe",z1="emulator/auth/iframe",B1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function q1(r){const e=r.config;Ie(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Rf(e,z1):`https://${r.config.authDomain}/${U1}`,s={apiKey:e.apiKey,appName:r.name,v:Fo},o=$1.get(r.config.apiHost);o&&(s.eid=o);const l=r._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${dl(s).slice(1)}`}async function W1(r){const e=await F1(r),t=or().gapi;return Ie(t,r,"internal-error"),e.open({where:document.body,url:q1(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:B1,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const h=jn(r,"network-request-failed"),f=or().setTimeout(()=>{l(h)},j1.get());function g(){or().clearTimeout(f),o(s)}s.ping(g).then(g,()=>{l(h)})}))}const H1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},G1=500,K1=600,Q1="_blank",X1="http://localhost";class dy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Y1(r,e,t,s=G1,o=K1){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const g={...H1,width:s.toString(),height:o.toString(),top:l,left:h},y=Ht().toLowerCase();t&&(f=nv(y)?Q1:t),ev(y)&&(e=e||X1,g.scrollbars="yes");const w=Object.entries(g).reduce((S,[b,H])=>`${S}${b}=${H},`,"");if(xS(y)&&f!=="_self")return J1(e||"",f),new dy(null);const E=window.open(e||"",f,w);Ie(E,r,"popup-blocked");try{E.focus()}catch{}return new dy(E)}function J1(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}const Z1="__/auth/handler",eA="emulator/auth/handler",tA=encodeURIComponent("fac");async function fy(r,e,t,s,o,l){Ie(r.config.authDomain,r,"auth-domain-config-required"),Ie(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:Fo,eventId:o};if(e instanceof xf){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",eI(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,E]of Object.entries({}))h[w]=E}if(e instanceof pl){const w=e.getScopes().filter(E=>E!=="");w.length>0&&(h.scopes=w.join(","))}r.tenantId&&(h.tid=r.tenantId);const f=h;for(const w of Object.keys(f))f[w]===void 0&&delete f[w];const g=await r._getAppCheckToken(),y=g?`#${tA}=${encodeURIComponent(g)}`:"";return`${nA(r)}?${dl(f).slice(1)}${y}`}function nA({config:r}){return r.emulator?Rf(r,eA):`https://${r.authDomain}/${Z1}`}const Vd="webStorageSupport";class rA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=mv,this._completeRedirectFn=C1,this._overrideRedirectResult=S1}async _openPopup(e,t,s,o){Lr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await fy(e,t,s,Qd(),o);return Y1(e,l,Df())}async _openRedirect(e,t,s,o){await this._originValidation(e);const l=await fy(e,t,s,Qd(),o);return o1(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Lr(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await W1(e),s=new k1(e);return t.register("authEvent",o=>(Ie(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Vd,{type:Vd},o=>{const l=o?.[0]?.[Vd];l!==void 0&&t(!!l),hr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=O1(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return av()||tv()||kf()}}const iA=rA;var py="@firebase/auth",my="1.12.0";class sA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function oA(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function aA(r){Co(new ws("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:f}=s.options;Ie(h&&!h.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:h,authDomain:f,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:lv(r)},y=new bS(s,o,l,g);return $S(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Co(new ws("auth-internal",e=>{const t=Nc(e.getProvider("auth").getImmediate());return(s=>new sA(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ki(py,my,oA(r)),ki(py,my,"esm2020")}const lA=300,uA=F_("authIdTokenMaxAge")||lA;let gy=null;const cA=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>uA)return;const o=t?.token;gy!==o&&(gy=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function hA(r=q_()){const e=If(r,"auth");if(e.isInitialized())return e.getImmediate();const t=BS(r,{popupRedirectResolver:iA,persistence:[m1,r1,mv]}),s=F_("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const h=cA(l.toString());JS(t,h,()=>h(t.currentUser)),YS(t,f=>h(f))}}const o=L_("auth");return o&&qS(t,`http://${o}`),t}function dA(){return document.getElementsByTagName("head")?.[0]??document}FS({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const l=jn("internal-error");l.customData=o,t(l)},s.type="text/javascript",s.charset="UTF-8",dA().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});aA("Browser");var yy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ni,Iv;(function(){var r;function e(C,I){function P(){}P.prototype=I.prototype,C.F=I.prototype,C.prototype=new P,C.prototype.constructor=C,C.D=function(N,x,O){for(var R=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)R[fe-2]=arguments[fe];return I.prototype[x].apply(N,R)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(C,I,P){P||(P=0);const N=Array(16);if(typeof I=="string")for(var x=0;x<16;++x)N[x]=I.charCodeAt(P++)|I.charCodeAt(P++)<<8|I.charCodeAt(P++)<<16|I.charCodeAt(P++)<<24;else for(x=0;x<16;++x)N[x]=I[P++]|I[P++]<<8|I[P++]<<16|I[P++]<<24;I=C.g[0],P=C.g[1],x=C.g[2];let O=C.g[3],R;R=I+(O^P&(x^O))+N[0]+3614090360&4294967295,I=P+(R<<7&4294967295|R>>>25),R=O+(x^I&(P^x))+N[1]+3905402710&4294967295,O=I+(R<<12&4294967295|R>>>20),R=x+(P^O&(I^P))+N[2]+606105819&4294967295,x=O+(R<<17&4294967295|R>>>15),R=P+(I^x&(O^I))+N[3]+3250441966&4294967295,P=x+(R<<22&4294967295|R>>>10),R=I+(O^P&(x^O))+N[4]+4118548399&4294967295,I=P+(R<<7&4294967295|R>>>25),R=O+(x^I&(P^x))+N[5]+1200080426&4294967295,O=I+(R<<12&4294967295|R>>>20),R=x+(P^O&(I^P))+N[6]+2821735955&4294967295,x=O+(R<<17&4294967295|R>>>15),R=P+(I^x&(O^I))+N[7]+4249261313&4294967295,P=x+(R<<22&4294967295|R>>>10),R=I+(O^P&(x^O))+N[8]+1770035416&4294967295,I=P+(R<<7&4294967295|R>>>25),R=O+(x^I&(P^x))+N[9]+2336552879&4294967295,O=I+(R<<12&4294967295|R>>>20),R=x+(P^O&(I^P))+N[10]+4294925233&4294967295,x=O+(R<<17&4294967295|R>>>15),R=P+(I^x&(O^I))+N[11]+2304563134&4294967295,P=x+(R<<22&4294967295|R>>>10),R=I+(O^P&(x^O))+N[12]+1804603682&4294967295,I=P+(R<<7&4294967295|R>>>25),R=O+(x^I&(P^x))+N[13]+4254626195&4294967295,O=I+(R<<12&4294967295|R>>>20),R=x+(P^O&(I^P))+N[14]+2792965006&4294967295,x=O+(R<<17&4294967295|R>>>15),R=P+(I^x&(O^I))+N[15]+1236535329&4294967295,P=x+(R<<22&4294967295|R>>>10),R=I+(x^O&(P^x))+N[1]+4129170786&4294967295,I=P+(R<<5&4294967295|R>>>27),R=O+(P^x&(I^P))+N[6]+3225465664&4294967295,O=I+(R<<9&4294967295|R>>>23),R=x+(I^P&(O^I))+N[11]+643717713&4294967295,x=O+(R<<14&4294967295|R>>>18),R=P+(O^I&(x^O))+N[0]+3921069994&4294967295,P=x+(R<<20&4294967295|R>>>12),R=I+(x^O&(P^x))+N[5]+3593408605&4294967295,I=P+(R<<5&4294967295|R>>>27),R=O+(P^x&(I^P))+N[10]+38016083&4294967295,O=I+(R<<9&4294967295|R>>>23),R=x+(I^P&(O^I))+N[15]+3634488961&4294967295,x=O+(R<<14&4294967295|R>>>18),R=P+(O^I&(x^O))+N[4]+3889429448&4294967295,P=x+(R<<20&4294967295|R>>>12),R=I+(x^O&(P^x))+N[9]+568446438&4294967295,I=P+(R<<5&4294967295|R>>>27),R=O+(P^x&(I^P))+N[14]+3275163606&4294967295,O=I+(R<<9&4294967295|R>>>23),R=x+(I^P&(O^I))+N[3]+4107603335&4294967295,x=O+(R<<14&4294967295|R>>>18),R=P+(O^I&(x^O))+N[8]+1163531501&4294967295,P=x+(R<<20&4294967295|R>>>12),R=I+(x^O&(P^x))+N[13]+2850285829&4294967295,I=P+(R<<5&4294967295|R>>>27),R=O+(P^x&(I^P))+N[2]+4243563512&4294967295,O=I+(R<<9&4294967295|R>>>23),R=x+(I^P&(O^I))+N[7]+1735328473&4294967295,x=O+(R<<14&4294967295|R>>>18),R=P+(O^I&(x^O))+N[12]+2368359562&4294967295,P=x+(R<<20&4294967295|R>>>12),R=I+(P^x^O)+N[5]+4294588738&4294967295,I=P+(R<<4&4294967295|R>>>28),R=O+(I^P^x)+N[8]+2272392833&4294967295,O=I+(R<<11&4294967295|R>>>21),R=x+(O^I^P)+N[11]+1839030562&4294967295,x=O+(R<<16&4294967295|R>>>16),R=P+(x^O^I)+N[14]+4259657740&4294967295,P=x+(R<<23&4294967295|R>>>9),R=I+(P^x^O)+N[1]+2763975236&4294967295,I=P+(R<<4&4294967295|R>>>28),R=O+(I^P^x)+N[4]+1272893353&4294967295,O=I+(R<<11&4294967295|R>>>21),R=x+(O^I^P)+N[7]+4139469664&4294967295,x=O+(R<<16&4294967295|R>>>16),R=P+(x^O^I)+N[10]+3200236656&4294967295,P=x+(R<<23&4294967295|R>>>9),R=I+(P^x^O)+N[13]+681279174&4294967295,I=P+(R<<4&4294967295|R>>>28),R=O+(I^P^x)+N[0]+3936430074&4294967295,O=I+(R<<11&4294967295|R>>>21),R=x+(O^I^P)+N[3]+3572445317&4294967295,x=O+(R<<16&4294967295|R>>>16),R=P+(x^O^I)+N[6]+76029189&4294967295,P=x+(R<<23&4294967295|R>>>9),R=I+(P^x^O)+N[9]+3654602809&4294967295,I=P+(R<<4&4294967295|R>>>28),R=O+(I^P^x)+N[12]+3873151461&4294967295,O=I+(R<<11&4294967295|R>>>21),R=x+(O^I^P)+N[15]+530742520&4294967295,x=O+(R<<16&4294967295|R>>>16),R=P+(x^O^I)+N[2]+3299628645&4294967295,P=x+(R<<23&4294967295|R>>>9),R=I+(x^(P|~O))+N[0]+4096336452&4294967295,I=P+(R<<6&4294967295|R>>>26),R=O+(P^(I|~x))+N[7]+1126891415&4294967295,O=I+(R<<10&4294967295|R>>>22),R=x+(I^(O|~P))+N[14]+2878612391&4294967295,x=O+(R<<15&4294967295|R>>>17),R=P+(O^(x|~I))+N[5]+4237533241&4294967295,P=x+(R<<21&4294967295|R>>>11),R=I+(x^(P|~O))+N[12]+1700485571&4294967295,I=P+(R<<6&4294967295|R>>>26),R=O+(P^(I|~x))+N[3]+2399980690&4294967295,O=I+(R<<10&4294967295|R>>>22),R=x+(I^(O|~P))+N[10]+4293915773&4294967295,x=O+(R<<15&4294967295|R>>>17),R=P+(O^(x|~I))+N[1]+2240044497&4294967295,P=x+(R<<21&4294967295|R>>>11),R=I+(x^(P|~O))+N[8]+1873313359&4294967295,I=P+(R<<6&4294967295|R>>>26),R=O+(P^(I|~x))+N[15]+4264355552&4294967295,O=I+(R<<10&4294967295|R>>>22),R=x+(I^(O|~P))+N[6]+2734768916&4294967295,x=O+(R<<15&4294967295|R>>>17),R=P+(O^(x|~I))+N[13]+1309151649&4294967295,P=x+(R<<21&4294967295|R>>>11),R=I+(x^(P|~O))+N[4]+4149444226&4294967295,I=P+(R<<6&4294967295|R>>>26),R=O+(P^(I|~x))+N[11]+3174756917&4294967295,O=I+(R<<10&4294967295|R>>>22),R=x+(I^(O|~P))+N[2]+718787259&4294967295,x=O+(R<<15&4294967295|R>>>17),R=P+(O^(x|~I))+N[9]+3951481745&4294967295,C.g[0]=C.g[0]+I&4294967295,C.g[1]=C.g[1]+(x+(R<<21&4294967295|R>>>11))&4294967295,C.g[2]=C.g[2]+x&4294967295,C.g[3]=C.g[3]+O&4294967295}s.prototype.v=function(C,I){I===void 0&&(I=C.length);const P=I-this.blockSize,N=this.C;let x=this.h,O=0;for(;O<I;){if(x==0)for(;O<=P;)o(this,C,O),O+=this.blockSize;if(typeof C=="string"){for(;O<I;)if(N[x++]=C.charCodeAt(O++),x==this.blockSize){o(this,N),x=0;break}}else for(;O<I;)if(N[x++]=C[O++],x==this.blockSize){o(this,N),x=0;break}}this.h=x,this.o+=I},s.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var I=1;I<C.length-8;++I)C[I]=0;I=this.o*8;for(var P=C.length-8;P<C.length;++P)C[P]=I&255,I/=256;for(this.v(C),C=Array(16),I=0,P=0;P<4;++P)for(let N=0;N<32;N+=8)C[I++]=this.g[P]>>>N&255;return C};function l(C,I){var P=f;return Object.prototype.hasOwnProperty.call(P,C)?P[C]:P[C]=I(C)}function h(C,I){this.h=I;const P=[];let N=!0;for(let x=C.length-1;x>=0;x--){const O=C[x]|0;N&&O==I||(P[x]=O,N=!1)}this.g=P}var f={};function g(C){return-128<=C&&C<128?l(C,function(I){return new h([I|0],I<0?-1:0)}):new h([C|0],C<0?-1:0)}function y(C){if(isNaN(C)||!isFinite(C))return E;if(C<0)return j(y(-C));const I=[];let P=1;for(let N=0;C>=P;N++)I[N]=C/P|0,P*=4294967296;return new h(I,0)}function w(C,I){if(C.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(C.charAt(0)=="-")return j(w(C.substring(1),I));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const P=y(Math.pow(I,8));let N=E;for(let O=0;O<C.length;O+=8){var x=Math.min(8,C.length-O);const R=parseInt(C.substring(O,O+x),I);x<8?(x=y(Math.pow(I,x)),N=N.j(x).add(y(R))):(N=N.j(P),N=N.add(y(R)))}return N}var E=g(0),S=g(1),b=g(16777216);r=h.prototype,r.m=function(){if(q(this))return-j(this).m();let C=0,I=1;for(let P=0;P<this.g.length;P++){const N=this.i(P);C+=(N>=0?N:4294967296+N)*I,I*=4294967296}return C},r.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(H(this))return"0";if(q(this))return"-"+j(this).toString(C);const I=y(Math.pow(C,6));var P=this;let N="";for(;;){const x=ee(P,I).g;P=K(P,x.j(I));let O=((P.g.length>0?P.g[0]:P.h)>>>0).toString(C);if(P=x,H(P))return O+N;for(;O.length<6;)O="0"+O;N=O+N}},r.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function H(C){if(C.h!=0)return!1;for(let I=0;I<C.g.length;I++)if(C.g[I]!=0)return!1;return!0}function q(C){return C.h==-1}r.l=function(C){return C=K(this,C),q(C)?-1:H(C)?0:1};function j(C){const I=C.g.length,P=[];for(let N=0;N<I;N++)P[N]=~C.g[N];return new h(P,~C.h).add(S)}r.abs=function(){return q(this)?j(this):this},r.add=function(C){const I=Math.max(this.g.length,C.g.length),P=[];let N=0;for(let x=0;x<=I;x++){let O=N+(this.i(x)&65535)+(C.i(x)&65535),R=(O>>>16)+(this.i(x)>>>16)+(C.i(x)>>>16);N=R>>>16,O&=65535,R&=65535,P[x]=R<<16|O}return new h(P,P[P.length-1]&-2147483648?-1:0)};function K(C,I){return C.add(j(I))}r.j=function(C){if(H(this)||H(C))return E;if(q(this))return q(C)?j(this).j(j(C)):j(j(this).j(C));if(q(C))return j(this.j(j(C)));if(this.l(b)<0&&C.l(b)<0)return y(this.m()*C.m());const I=this.g.length+C.g.length,P=[];for(var N=0;N<2*I;N++)P[N]=0;for(N=0;N<this.g.length;N++)for(let x=0;x<C.g.length;x++){const O=this.i(N)>>>16,R=this.i(N)&65535,fe=C.i(x)>>>16,De=C.i(x)&65535;P[2*N+2*x]+=R*De,re(P,2*N+2*x),P[2*N+2*x+1]+=O*De,re(P,2*N+2*x+1),P[2*N+2*x+1]+=R*fe,re(P,2*N+2*x+1),P[2*N+2*x+2]+=O*fe,re(P,2*N+2*x+2)}for(C=0;C<I;C++)P[C]=P[2*C+1]<<16|P[2*C];for(C=I;C<2*I;C++)P[C]=0;return new h(P,0)};function re(C,I){for(;(C[I]&65535)!=C[I];)C[I+1]+=C[I]>>>16,C[I]&=65535,I++}function L(C,I){this.g=C,this.h=I}function ee(C,I){if(H(I))throw Error("division by zero");if(H(C))return new L(E,E);if(q(C))return I=ee(j(C),I),new L(j(I.g),j(I.h));if(q(I))return I=ee(C,j(I)),new L(j(I.g),I.h);if(C.g.length>30){if(q(C)||q(I))throw Error("slowDivide_ only works with positive integers.");for(var P=S,N=I;N.l(C)<=0;)P=ie(P),N=ie(N);var x=J(P,1),O=J(N,1);for(N=J(N,2),P=J(P,2);!H(N);){var R=O.add(N);R.l(C)<=0&&(x=x.add(P),O=R),N=J(N,1),P=J(P,1)}return I=K(C,x.j(I)),new L(x,I)}for(x=E;C.l(I)>=0;){for(P=Math.max(1,Math.floor(C.m()/I.m())),N=Math.ceil(Math.log(P)/Math.LN2),N=N<=48?1:Math.pow(2,N-48),O=y(P),R=O.j(I);q(R)||R.l(C)>0;)P-=N,O=y(P),R=O.j(I);H(O)&&(O=S),x=x.add(O),C=K(C,R)}return new L(x,C)}r.B=function(C){return ee(this,C).h},r.and=function(C){const I=Math.max(this.g.length,C.g.length),P=[];for(let N=0;N<I;N++)P[N]=this.i(N)&C.i(N);return new h(P,this.h&C.h)},r.or=function(C){const I=Math.max(this.g.length,C.g.length),P=[];for(let N=0;N<I;N++)P[N]=this.i(N)|C.i(N);return new h(P,this.h|C.h)},r.xor=function(C){const I=Math.max(this.g.length,C.g.length),P=[];for(let N=0;N<I;N++)P[N]=this.i(N)^C.i(N);return new h(P,this.h^C.h)};function ie(C){const I=C.g.length+1,P=[];for(let N=0;N<I;N++)P[N]=C.i(N)<<1|C.i(N-1)>>>31;return new h(P,C.h)}function J(C,I){const P=I>>5;I%=32;const N=C.g.length-P,x=[];for(let O=0;O<N;O++)x[O]=I>0?C.i(O+P)>>>I|C.i(O+P+1)<<32-I:C.i(O+P);return new h(x,C.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Iv=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=w,Ni=h}).apply(typeof yy<"u"?yy:typeof self<"u"?self:typeof window<"u"?window:{});var $u=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Sv,$a,Av,Ju,Jd,Rv,Cv,Pv;(function(){var r,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof $u=="object"&&$u];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=t(this);function o(u,m){if(m)e:{var _=s;u=u.split(".");for(var T=0;T<u.length-1;T++){var U=u[T];if(!(U in _))break e;_=_[U]}u=u[u.length-1],T=_[u],m=m(T),m!=T&&m!=null&&e(_,u,{configurable:!0,writable:!0,value:m})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(m){var _=[],T;for(T in m)Object.prototype.hasOwnProperty.call(m,T)&&_.push([T,m[T]]);return _}});var l=l||{},h=this||self;function f(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function g(u,m,_){return u.call.apply(u.bind,arguments)}function y(u,m,_){return y=g,y.apply(null,arguments)}function w(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var T=_.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function E(u,m){function _(){}_.prototype=m.prototype,u.Z=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Ob=function(T,U,$){for(var se=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)se[Pe-2]=arguments[Pe];return m.prototype[U].apply(T,se)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function b(u){const m=u.length;if(m>0){const _=Array(m);for(let T=0;T<m;T++)_[T]=u[T];return _}return[]}function H(u,m){for(let T=1;T<arguments.length;T++){const U=arguments[T];var _=typeof U;if(_=_!="object"?_:U?Array.isArray(U)?"array":_:"null",_=="array"||_=="object"&&typeof U.length=="number"){_=u.length||0;const $=U.length||0;u.length=_+$;for(let se=0;se<$;se++)u[_+se]=U[se]}else u.push(U)}}class q{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function j(u){h.setTimeout(()=>{throw u},0)}function K(){var u=C;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class re{constructor(){this.h=this.g=null}add(m,_){const T=L.get();T.set(m,_),this.h?this.h.next=T:this.g=T,this.h=T}}var L=new q(()=>new ee,u=>u.reset());class ee{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,J=!1,C=new re,I=()=>{const u=Promise.resolve(void 0);ie=()=>{u.then(P)}};function P(){for(var u;u=K();){try{u.h.call(u.g)}catch(_){j(_)}var m=L;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}J=!1}function N(){this.u=this.u,this.C=this.C}N.prototype.u=!1,N.prototype.dispose=function(){this.u||(this.u=!0,this.N())},N.prototype[Symbol.dispose]=function(){this.dispose()},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function x(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}x.prototype.h=function(){this.defaultPrevented=!0};var O=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};h.addEventListener("test",_,m),h.removeEventListener("test",_,m)}catch{}return u})();function R(u){return/^[\s\xa0]*$/.test(u)}function fe(u,m){x.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}E(fe,x),fe.prototype.init=function(u,m){const _=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(_=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&fe.Z.h.call(this)},fe.prototype.h=function(){fe.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var De="closure_listenable_"+(Math.random()*1e6|0),je=0;function Re(u,m,_,T,U){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!T,this.ha=U,this.key=++je,this.da=this.fa=!1}function te(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ge(u,m,_){for(const T in u)m.call(_,u[T],T,u)}function ae(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function M(u){const m={};for(const _ in u)m[_]=u[_];return m}const Q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Se(u,m){let _,T;for(let U=1;U<arguments.length;U++){T=arguments[U];for(_ in T)u[_]=T[_];for(let $=0;$<Q.length;$++)_=Q[$],Object.prototype.hasOwnProperty.call(T,_)&&(u[_]=T[_])}}function Ce(u){this.src=u,this.g={},this.h=0}Ce.prototype.add=function(u,m,_,T,U){const $=u.toString();u=this.g[$],u||(u=this.g[$]=[],this.h++);const se=xe(u,m,T,U);return se>-1?(m=u[se],_||(m.fa=!1)):(m=new Re(m,this.src,$,!!T,U),m.fa=_,u.push(m)),m};function Ne(u,m){const _=m.type;if(_ in u.g){var T=u.g[_],U=Array.prototype.indexOf.call(T,m,void 0),$;($=U>=0)&&Array.prototype.splice.call(T,U,1),$&&(te(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function xe(u,m,_,T){for(let U=0;U<u.length;++U){const $=u[U];if(!$.da&&$.listener==m&&$.capture==!!_&&$.ha==T)return U}return-1}var Be="closure_lm_"+(Math.random()*1e6|0),be={};function Ge(u,m,_,T,U){if(Array.isArray(m)){for(let $=0;$<m.length;$++)Ge(u,m[$],_,T,U);return null}return _=Ko(_),u&&u[De]?u.J(m,_,f(T)?!!T.capture:!1,U):At(u,m,_,!1,T,U)}function At(u,m,_,T,U,$){if(!m)throw Error("Invalid event type");const se=f(U)?!!U.capture:!!U;let Pe=Ns(u);if(Pe||(u[Be]=Pe=new Ce(u)),_=Pe.add(m,_,T,se,$),_.proxy)return _;if(T=yn(),_.proxy=T,T.src=u,T.listener=_,u.addEventListener)O||(U=se),U===void 0&&(U=!1),u.addEventListener(m.toString(),T,U);else if(u.attachEvent)u.attachEvent(ks(m.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return _}function yn(){function u(_){return m.call(u.src,u.listener,_)}const m=Rl;return u}function Go(u,m,_,T,U){if(Array.isArray(m))for(var $=0;$<m.length;$++)Go(u,m[$],_,T,U);else T=f(T)?!!T.capture:!!T,_=Ko(_),u&&u[De]?(u=u.i,$=String(m).toString(),$ in u.g&&(m=u.g[$],_=xe(m,_,T,U),_>-1&&(te(m[_]),Array.prototype.splice.call(m,_,1),m.length==0&&(delete u.g[$],u.h--)))):u&&(u=Ns(u))&&(m=u.g[m.toString()],u=-1,m&&(u=xe(m,_,T,U)),(_=u>-1?m[u]:null)&&Br(_))}function Br(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[De])Ne(m.i,u);else{var _=u.type,T=u.proxy;m.removeEventListener?m.removeEventListener(_,T,u.capture):m.detachEvent?m.detachEvent(ks(_),T):m.addListener&&m.removeListener&&m.removeListener(T),(_=Ns(m))?(Ne(_,u),_.h==0&&(_.src=null,m[Be]=null)):te(u)}}}function ks(u){return u in be?be[u]:be[u]="on"+u}function Rl(u,m){if(u.da)u=!0;else{m=new fe(m,this);const _=u.listener,T=u.ha||u.src;u.fa&&Br(u),u=_.call(T,m)}return u}function Ns(u){return u=u[Be],u instanceof Ce?u:null}var Bi="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ko(u){return typeof u=="function"?u:(u[Bi]||(u[Bi]=function(m){return u.handleEvent(m)}),u[Bi])}function mt(){N.call(this),this.i=new Ce(this),this.M=this,this.G=null}E(mt,N),mt.prototype[De]=!0,mt.prototype.removeEventListener=function(u,m,_,T){Go(this,u,m,_,T)};function lt(u,m){var _,T=u.G;if(T)for(_=[];T;T=T.G)_.push(T);if(u=u.M,T=m.type||m,typeof m=="string")m=new x(m,u);else if(m instanceof x)m.target=m.target||u;else{var U=m;m=new x(T,u),Se(m,U)}U=!0;let $,se;if(_)for(se=_.length-1;se>=0;se--)$=m.g=_[se],U=Rn($,T,!0,m)&&U;if($=m.g=u,U=Rn($,T,!0,m)&&U,U=Rn($,T,!1,m)&&U,_)for(se=0;se<_.length;se++)$=m.g=_[se],U=Rn($,T,!1,m)&&U}mt.prototype.N=function(){if(mt.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const _=u.g[m];for(let T=0;T<_.length;T++)te(_[T]);delete u.g[m],u.h--}}this.G=null},mt.prototype.J=function(u,m,_,T){return this.i.add(String(u),m,!1,_,T)},mt.prototype.K=function(u,m,_,T){return this.i.add(String(u),m,!0,_,T)};function Rn(u,m,_,T){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let U=!0;for(let $=0;$<m.length;++$){const se=m[$];if(se&&!se.da&&se.capture==_){const Pe=se.listener,ut=se.ha||se.src;se.fa&&Ne(u.i,se),U=Pe.call(ut,T)!==!1&&U}}return U&&!T.defaultPrevented}function Qo(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=y(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:h.setTimeout(u,m||0)}function Xo(u){u.g=Qo(()=>{u.g=null,u.i&&(u.i=!1,Xo(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Cl extends N{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Xo(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $r(u){N.call(this),this.h=u,this.g={}}E($r,N);var Yo=[];function xs(u){ge(u.g,function(m,_){this.g.hasOwnProperty(_)&&Br(m)},u),u.g={}}$r.prototype.N=function(){$r.Z.N.call(this),xs(this)},$r.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var qr=h.JSON.stringify,Pl=h.JSON.parse,$i=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function Wr(){}function kl(){}var Hr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ds(){x.call(this,"d")}E(Ds,x);function Jo(){x.call(this,"c")}E(Jo,x);var Cn={},Vs=null;function Gr(){return Vs=Vs||new mt}Cn.Ia="serverreachability";function Os(u){x.call(this,Cn.Ia,u)}E(Os,x);function fr(u){const m=Gr();lt(m,new Os(m))}Cn.STAT_EVENT="statevent";function pr(u,m){x.call(this,Cn.STAT_EVENT,u),this.stat=m}E(pr,x);function ot(u){const m=Gr();lt(m,new pr(m,u))}Cn.Ja="timingevent";function Zo(u,m){x.call(this,Cn.Ja,u),this.size=m}E(Zo,x);function Kr(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},m)}function Qr(){this.g=!0}Qr.prototype.ua=function(){this.g=!1};function Nl(u,m,_,T,U,$){u.info(function(){if(u.g)if($){var se="",Pe=$.split("&");for(let Ke=0;Ke<Pe.length;Ke++){var ut=Pe[Ke].split("=");if(ut.length>1){const gt=ut[0];ut=ut[1];const un=gt.split("_");se=un.length>=2&&un[1]=="type"?se+(gt+"="+ut+"&"):se+(gt+"=redacted&")}}}else se=null;else se=$;return"XMLHTTP REQ ("+T+") [attempt "+U+"]: "+m+`
`+_+`
`+se})}function xl(u,m,_,T,U,$,se){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+U+"]: "+m+`
`+_+`
`+$+" "+se})}function zn(u,m,_,T){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+qi(u,_)+(T?" "+T:"")})}function Dl(u,m){u.info(function(){return"TIMEOUT: "+m})}Qr.prototype.info=function(){};function qi(u,m){if(!u.g)return m;if(!m)return null;try{const $=JSON.parse(m);if($){for(u=0;u<$.length;u++)if(Array.isArray($[u])){var _=$[u];if(!(_.length<2)){var T=_[1];if(Array.isArray(T)&&!(T.length<1)){var U=T[0];if(U!="noop"&&U!="stop"&&U!="close")for(let se=1;se<T.length;se++)T[se]=""}}}}return qr($)}catch{return m}}var Xr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Yr={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Vl;function mr(){}E(mr,Wr),mr.prototype.g=function(){return new XMLHttpRequest},Vl=new mr;function Bn(u){return encodeURIComponent(String(u))}function Ms(u){var m=1;u=u.split(":");const _=[];for(;m>0&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function _n(u,m,_,T){this.j=u,this.i=m,this.l=_,this.S=T||1,this.V=new $r(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ol}function Ol(){this.i=null,this.g="",this.h=!1}var Ml={},ea={};function Pn(u,m,_){u.M=1,u.A=yr(vn(m)),u.u=_,u.R=!0,ta(u,null)}function ta(u,m){u.F=Date.now(),Wi(u),u.B=vn(u.A);var _=u.B,T=u.S;Array.isArray(T)||(T=[String(T)]),ha(_.i,"t",T),u.C=0,_=u.j.L,u.h=new Ol,u.g=Wl(u.j,_?m:null,!u.u),u.P>0&&(u.O=new Cl(y(u.Y,u,u.g),u.P)),m=u.V,_=u.g,T=u.ba;var U="readystatechange";Array.isArray(U)||(U&&(Yo[0]=U.toString()),U=Yo);for(let $=0;$<U.length;$++){const se=Ge(_,U[$],T||m.handleEvent,!1,m.h||m);if(!se)break;m.g[se.key]=se}m=u.J?M(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),fr(),Nl(u.i,u.v,u.B,u.l,u.S,u.u)}_n.prototype.ba=function(u){u=u.target;const m=this.O;m&&Qn(u)==3?m.j():this.Y(u)},_n.prototype.Y=function(u){try{if(u==this.g)e:{const Pe=Qn(this.g),ut=this.g.ya(),Ke=this.g.ca();if(!(Pe<3)&&(Pe!=3||this.g&&(this.h.h||this.g.la()||$l(this.g)))){this.K||Pe!=4||ut==7||(ut==8||Ke<=0?fr(3):fr(2)),Ls(this);var m=this.g.ca();this.X=m;var _=Ll(this);if(this.o=m==200,xl(this.i,this.v,this.B,this.l,this.S,Pe,m),this.o){if(this.U&&!this.L){t:{if(this.g){var T,U=this.g;if((T=U.g?U.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(T)){var $=T;break t}}$=null}if(u=$)zn(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Je(this,u);else{this.o=!1,this.m=3,ot(12),gr(this),Hi(this);break e}}if(this.R){u=!0;let gt;for(;!this.K&&this.C<_.length;)if(gt=Fl(this,_),gt==ea){Pe==4&&(this.m=4,ot(14),u=!1),zn(this.i,this.l,null,"[Incomplete Response]");break}else if(gt==Ml){this.m=4,ot(15),zn(this.i,this.l,_,"[Invalid Chunk]"),u=!1;break}else zn(this.i,this.l,gt,null),Je(this,gt);if(bl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pe!=4||_.length!=0||this.h.h||(this.m=1,ot(16),u=!1),this.o=this.o&&u,!u)zn(this.i,this.l,_,"[Invalid Chunked Response]"),gr(this),Hi(this);else if(_.length>0&&!this.W){this.W=!0;var se=this.j;se.g==this&&se.aa&&!se.P&&(se.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),ts(se),se.P=!0,ot(11))}}else zn(this.i,this.l,_,null),Je(this,_);Pe==4&&gr(this),this.o&&!this.K&&(Pe==4?Hs(this.j,this):(this.o=!1,Wi(this)))}else fa(this.g),m==400&&_.indexOf("Unknown SID")>0?(this.m=3,ot(12)):(this.m=0,ot(13)),gr(this),Hi(this)}}}catch{}};function Ll(u){if(!bl(u))return u.g.la();const m=$l(u.g);if(m==="")return"";let _="";const T=m.length,U=Qn(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return gr(u),Hi(u),"";u.h.i=new h.TextDecoder}for(let $=0;$<T;$++)u.h.h=!0,_+=u.h.i.decode(m[$],{stream:!(U&&$==T-1)});return m.length=0,u.h.g+=_,u.C=0,u.h.g}function bl(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Fl(u,m){var _=u.C,T=m.indexOf(`
`,_);return T==-1?ea:(_=Number(m.substring(_,T)),isNaN(_)?Ml:(T+=1,T+_>m.length?ea:(m=m.slice(T,T+_),u.C=T+_,m)))}_n.prototype.cancel=function(){this.K=!0,gr(this)};function Wi(u){u.T=Date.now()+u.H,na(u,u.H)}function na(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Kr(y(u.aa,u),m)}function Ls(u){u.D&&(h.clearTimeout(u.D),u.D=null)}_n.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Dl(this.i,this.B),this.M!=2&&(fr(),ot(17)),gr(this),this.m=2,Hi(this)):na(this,this.T-u)};function Hi(u){u.j.I==0||u.K||Hs(u.j,u)}function gr(u){Ls(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,xs(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function Je(u,m){try{var _=u.j;if(_.I!=0&&(_.g==u||ia(_.h,u))){if(!u.L&&ia(_.h,u)&&_.I==3){try{var T=_.Ba.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var U=T;if(U[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<u.F)Ws(_),an(_);else break e;Jn(_),ot(18)}}else _.xa=U[1],0<_.xa-_.K&&U[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=Kr(y(_.Va,_),6e3));Gi(_.h)<=1&&_.ta&&(_.ta=void 0)}else ln(_,11)}else if((u.L||_.g==u)&&Ws(_),!R(m))for(U=_.Ba.g.parse(m),m=0;m<U.length;m++){let Ke=U[m];const gt=Ke[0];if(!(gt<=_.K))if(_.K=gt,Ke=Ke[1],_.I==2)if(Ke[0]=="c"){_.M=Ke[1],_.ba=Ke[2];const un=Ke[3];un!=null&&(_.ka=un,_.j.info("VER="+_.ka));const Tr=Ke[4];Tr!=null&&(_.za=Tr,_.j.info("SVER="+_.za));const Zn=Ke[5];Zn!=null&&typeof Zn=="number"&&Zn>0&&(T=1.5*Zn,_.O=T,_.j.info("backChannelRequestTimeoutMs_="+T)),T=_;const er=u.g;if(er){const Qs=er.g?er.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Qs){var $=T.h;$.g||Qs.indexOf("spdy")==-1&&Qs.indexOf("quic")==-1&&Qs.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(Fs($,$.h),$.h=null))}if(T.G){const ga=er.g?er.g.getResponseHeader("X-HTTP-Session-Id"):null;ga&&(T.wa=ga,He(T.J,T.G,ga))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-u.F,_.j.info("Handshake RTT: "+_.T+"ms")),T=_;var se=u;if(T.na=ma(T,T.L?T.ba:null,T.W),se.L){Ki(T.h,se);var Pe=se,ut=T.O;ut&&(Pe.H=ut),Pe.D&&(Ls(Pe),Wi(Pe)),T.g=se}else jt(T);_.i.length>0&&Er(_)}else Ke[0]!="stop"&&Ke[0]!="close"||ln(_,7);else _.I==3&&(Ke[0]=="stop"||Ke[0]=="close"?Ke[0]=="stop"?ln(_,7):$s(_):Ke[0]!="noop"&&_.l&&_.l.qa(Ke),_.A=0)}}fr(4)}catch{}}var Jc=class{constructor(u,m){this.g=u,this.map=m}};function bs(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ra(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Gi(u){return u.h?1:u.g?u.g.size:0}function ia(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Fs(u,m){u.g?u.g.add(m):u.h=m}function Ki(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}bs.prototype.cancel=function(){if(this.i=rn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function rn(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.G);return m}return b(u.i)}var jl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sn(u,m){if(u){u=u.split("&");for(let _=0;_<u.length;_++){const T=u[_].indexOf("=");let U,$=null;T>=0?(U=u[_].substring(0,T),$=u[_].substring(T+1)):U=u[_],m(U,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function $n(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof $n?(this.l=u.l,Qi(this,u.j),this.o=u.o,this.g=u.g,qn(this,u.u),this.h=u.h,Jr(this,da(u.i)),this.m=u.m):u&&(m=String(u).match(jl))?(this.l=!1,Qi(this,m[1]||"",!0),this.o=Xi(m[2]||""),this.g=Xi(m[3]||"",!0),qn(this,m[4]),this.h=Xi(m[5]||"",!0),Jr(this,m[6]||"",!0),this.m=Xi(m[7]||"")):(this.l=!1,this.i=new Fe(null,this.l))}$n.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(Yi(m,oa,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Yi(m,oa,!0),"@"),u.push(Bn(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&u.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(Yi(_,_.charAt(0)=="/"?Ji:aa,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",Yi(_,la)),u.join("")},$n.prototype.resolve=function(u){const m=vn(this);let _=!!u.j;_?Qi(m,u.j):_=!!u.o,_?m.o=u.o:_=!!u.g,_?m.g=u.g:_=u.u!=null;var T=u.h;if(_)qn(m,u.u);else if(_=!!u.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var U=m.h.lastIndexOf("/");U!=-1&&(T=m.h.slice(0,U+1)+T)}if(U=T,U==".."||U==".")T="";else if(U.indexOf("./")!=-1||U.indexOf("/.")!=-1){T=U.lastIndexOf("/",0)==0,U=U.split("/");const $=[];for(let se=0;se<U.length;){const Pe=U[se++];Pe=="."?T&&se==U.length&&$.push(""):Pe==".."?(($.length>1||$.length==1&&$[0]!="")&&$.pop(),T&&se==U.length&&$.push("")):($.push(Pe),T=!0)}T=$.join("/")}else T=U}return _?m.h=T:_=u.i.toString()!=="",_?Jr(m,da(u.i)):_=!!u.m,_&&(m.m=u.m),m};function vn(u){return new $n(u)}function Qi(u,m,_){u.j=_?Xi(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function qn(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function Jr(u,m,_){m instanceof Fe?(u.i=m,Us(u.i,u.l)):(_||(m=Yi(m,Zc)),u.i=new Fe(m,u.l))}function He(u,m,_){u.i.set(m,_)}function yr(u){return He(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Xi(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Yi(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,sa),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function sa(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var oa=/[#\/\?@]/g,aa=/[#\?:]/g,Ji=/[#\?]/g,Zc=/[#\?@]/g,la=/#/g;function Fe(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Wn(u){u.g||(u.g=new Map,u.h=0,u.i&&sn(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}r=Fe.prototype,r.add=function(u,m){Wn(this),this.i=null,u=Hn(this,u);let _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function ua(u,m){Wn(u),m=Hn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function js(u,m){return Wn(u),m=Hn(u,m),u.g.has(m)}r.forEach=function(u,m){Wn(this),this.g.forEach(function(_,T){_.forEach(function(U){u.call(m,U,T,this)},this)},this)};function ca(u,m){Wn(u);let _=[];if(typeof m=="string")js(u,m)&&(_=_.concat(u.g.get(Hn(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)_=_.concat(u[m]);return _}r.set=function(u,m){return Wn(this),this.i=null,u=Hn(this,u),js(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=ca(this,u),u.length>0?String(u[0]):m):m};function ha(u,m,_){ua(u,m),_.length>0&&(u.i=null,u.g.set(Hn(u,m),b(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let T=0;T<m.length;T++){var _=m[T];const U=Bn(_);_=ca(this,_);for(let $=0;$<_.length;$++){let se=U;_[$]!==""&&(se+="="+Bn(_[$])),u.push(se)}}return this.i=u.join("&")};function da(u){const m=new Fe;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function Hn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function Us(u,m){m&&!u.j&&(Wn(u),u.i=null,u.g.forEach(function(_,T){const U=T.toLowerCase();T!=U&&(ua(this,T),ha(this,U,_))},u)),u.j=m}function Gn(u,m){const _=new Qr;if(h.Image){const T=new Image;T.onload=w(xt,_,"TestLoadImage: loaded",!0,m,T),T.onerror=w(xt,_,"TestLoadImage: error",!1,m,T),T.onabort=w(xt,_,"TestLoadImage: abort",!1,m,T),T.ontimeout=w(xt,_,"TestLoadImage: timeout",!1,m,T),h.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else m(!1)}function Kn(u,m){const _=new Qr,T=new AbortController,U=setTimeout(()=>{T.abort(),xt(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:T.signal}).then($=>{clearTimeout(U),$.ok?xt(_,"TestPingServer: ok",!0,m):xt(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(U),xt(_,"TestPingServer: error",!1,m)})}function xt(u,m,_,T,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),T(_)}catch{}}function Zi(){this.g=new $i}function _r(u){this.i=u.Sb||null,this.h=u.ab||!1}E(_r,Wr),_r.prototype.g=function(){return new on(this.i,this.h)};function on(u,m){mt.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(on,mt),r=on.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,kn(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||h).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Zr(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,kn(this)),this.g&&(this.readyState=3,kn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ul(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ul(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Zr(this):kn(this),this.readyState==3&&Ul(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,Zr(this))},r.Na=function(u){this.g&&(this.response=u,Zr(this))},r.ga=function(){this.g&&Zr(this)};function Zr(u){u.readyState=4,u.l=null,u.j=null,u.B=null,kn(u)}r.setRequestHeader=function(u,m){this.A.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function kn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(on.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function zl(u){let m="";return ge(u,function(_,T){m+=T,m+=":",m+=_,m+=`\r
`}),m}function zs(u,m,_){e:{for(T in _){var T=!1;break e}T=!0}T||(_=zl(_),typeof u=="string"?_!=null&&Bn(_):He(u,m,_))}function Xe(u){mt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(Xe,mt);var Bl=/^https?$/i,eh=["POST","PUT"];r=Xe.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,m,_,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Vl.g(),this.g.onreadystatechange=S(y(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch($){ei(this,$);return}if(u=_||"",_=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var U in T)_.set(U,T[U]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const $ of T.keys())_.set($,T.get($));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(_.keys()).find($=>$.toLowerCase()=="content-type"),U=h.FormData&&u instanceof h.FormData,!(Array.prototype.indexOf.call(eh,m,void 0)>=0)||T||U||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,se]of _)this.g.setRequestHeader($,se);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch($){ei(this,$)}};function ei(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,ti(u),wr(u)}function ti(u){u.A||(u.A=!0,lt(u,"complete"),lt(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,lt(this,"complete"),lt(this,"abort"),wr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wr(this,!0)),Xe.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?vr(this):this.Xa())},r.Xa=function(){vr(this)};function vr(u){if(u.h&&typeof l<"u"){if(u.v&&Qn(u)==4)setTimeout(u.Ca.bind(u),0);else if(lt(u,"readystatechange"),Qn(u)==4){u.h=!1;try{const $=u.ca();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var T;if(T=$===0){let se=String(u.D).match(jl)[1]||null;!se&&h.self&&h.self.location&&(se=h.self.location.protocol.slice(0,-1)),T=!Bl.test(se?se.toLowerCase():"")}_=T}if(_)lt(u,"complete"),lt(u,"success");else{u.o=6;try{var U=Qn(u)>2?u.g.statusText:""}catch{U=""}u.l=U+" ["+u.ca()+"]",ti(u)}}finally{wr(u)}}}}function wr(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const _=u.g;u.g=null,m||lt(u,"ready");try{_.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Qn(u){return u.g?u.g.readyState:0}r.ca=function(){try{return Qn(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Pl(m)}};function $l(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function fa(u){const m={};u=(u.g&&Qn(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(R(u[T]))continue;var _=Ms(u[T]);const U=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const $=m[U]||[];m[U]=$,$.push(_)}ae(m,function(T){return T.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xn(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function Bs(u){this.za=0,this.i=[],this.j=new Qr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Xn("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Xn("baseRetryDelayMs",5e3,u),this.Za=Xn("retryDelaySeedMs",1e4,u),this.Ta=Xn("forwardChannelMaxRetries",2,u),this.va=Xn("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new bs(u&&u.concurrentRequestLimit),this.Ba=new Zi,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Bs.prototype,r.ka=8,r.I=1,r.connect=function(u,m,_,T){ot(0),this.W=u,this.H=m||{},_&&T!==void 0&&(this.H.OSID=_,this.H.OAID=T),this.F=this.X,this.J=ma(this,null,this.W),Er(this)};function $s(u){if(qs(u),u.I==3){var m=u.V++,_=vn(u.J);if(He(_,"SID",u.M),He(_,"RID",m),He(_,"TYPE","terminate"),Yn(u,_),m=new _n(u,u.j,m),m.M=2,m.A=yr(vn(_)),_=!1,h.navigator&&h.navigator.sendBeacon)try{_=h.navigator.sendBeacon(m.A.toString(),"")}catch{}!_&&h.Image&&(new Image().src=m.A,_=!0),_||(m.g=Wl(m.j,null),m.g.ea(m.A)),m.F=Date.now(),Wi(m)}ns(u)}function an(u){u.g&&(ts(u),u.g.cancel(),u.g=null)}function qs(u){an(u),u.v&&(h.clearTimeout(u.v),u.v=null),Ws(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&h.clearTimeout(u.m),u.m=null)}function Er(u){if(!ra(u.h)&&!u.m){u.m=!0;var m=u.Ea;ie||I(),J||(ie(),J=!0),C.add(m,u),u.D=0}}function ql(u,m){return Gi(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Kr(y(u.Ea,u,m),Gs(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const U=new _n(this,this.j,u);let $=this.o;if(this.U&&($?($=M($),Se($,this.U)):$=this.U),this.u!==null||this.R||(U.J=$,$=null),this.S)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var T=this.i[_];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(m+=T,m>4096){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=pa(this,U,m),_=vn(this.J),He(_,"RID",u),He(_,"CVER",22),this.G&&He(_,"X-HTTP-Session-Id",this.G),Yn(this,_),$&&(this.R?m="headers="+Bn(zl($))+"&"+m:this.u&&zs(_,this.u,$)),Fs(this.h,U),this.Ra&&He(_,"TYPE","init"),this.S?(He(_,"$req",m),He(_,"SID","null"),U.U=!0,Pn(U,_,null)):Pn(U,_,m),this.I=2}}else this.I==3&&(u?es(this,u):this.i.length==0||ra(this.h)||es(this))};function es(u,m){var _;m?_=m.l:_=u.V++;const T=vn(u.J);He(T,"SID",u.M),He(T,"RID",_),He(T,"AID",u.K),Yn(u,T),u.u&&u.o&&zs(T,u.u,u.o),_=new _n(u,u.j,_,u.D+1),u.u===null&&(_.J=u.o),m&&(u.i=m.G.concat(u.i)),m=pa(u,_,1e3),_.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Fs(u.h,_),Pn(_,T,m)}function Yn(u,m){u.H&&ge(u.H,function(_,T){He(m,T,_)}),u.l&&ge({},function(_,T){He(m,T,_)})}function pa(u,m,_){_=Math.min(u.i.length,_);const T=u.l?y(u.l.Ka,u.l,u):null;e:{var U=u.i;let Pe=-1;for(;;){const ut=["count="+_];Pe==-1?_>0?(Pe=U[0].g,ut.push("ofs="+Pe)):Pe=0:ut.push("ofs="+Pe);let Ke=!0;for(let gt=0;gt<_;gt++){var $=U[gt].g;const un=U[gt].map;if($-=Pe,$<0)Pe=Math.max(0,U[gt].g-100),Ke=!1;else try{$="req"+$+"_"||"";try{var se=un instanceof Map?un:Object.entries(un);for(const[Tr,Zn]of se){let er=Zn;f(Zn)&&(er=qr(Zn)),ut.push($+Tr+"="+encodeURIComponent(er))}}catch(Tr){throw ut.push($+"type="+encodeURIComponent("_badmap")),Tr}}catch{T&&T(un)}}if(Ke){se=ut.join("&");break e}}se=void 0}return u=u.i.splice(0,_),m.G=u,se}function jt(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;ie||I(),J||(ie(),J=!0),C.add(m,u),u.A=0}}function Jn(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Kr(y(u.Da,u),Gs(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,ni(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Kr(y(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ot(10),an(this),ni(this))};function ts(u){u.B!=null&&(h.clearTimeout(u.B),u.B=null)}function ni(u){u.g=new _n(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=vn(u.na);He(m,"RID","rpc"),He(m,"SID",u.M),He(m,"AID",u.K),He(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&He(m,"TO",u.ia),He(m,"TYPE","xmlhttp"),Yn(u,m),u.u&&u.o&&zs(m,u.u,u.o),u.O&&(u.g.H=u.O);var _=u.g;u=u.ba,_.M=1,_.A=yr(vn(m)),_.u=null,_.R=!0,ta(_,u)}r.Va=function(){this.C!=null&&(this.C=null,an(this),Jn(this),ot(19))};function Ws(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function Hs(u,m){var _=null;if(u.g==m){Ws(u),ts(u),u.g=null;var T=2}else if(ia(u.h,m))_=m.G,Ki(u.h,m),T=1;else return;if(u.I!=0){if(m.o)if(T==1){_=m.u?m.u.length:0,m=Date.now()-m.F;var U=u.D;T=Gr(),lt(T,new Zo(T,_)),Er(u)}else jt(u);else if(U=m.m,U==3||U==0&&m.X>0||!(T==1&&ql(u,m)||T==2&&Jn(u)))switch(_&&_.length>0&&(m=u.h,m.i=m.i.concat(_)),U){case 1:ln(u,5);break;case 4:ln(u,10);break;case 3:ln(u,6);break;default:ln(u,2)}}}function Gs(u,m){let _=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(_*=2),_*m}function ln(u,m){if(u.j.info("Error code "+m),m==2){var _=y(u.bb,u),T=u.Ua;const U=!T;T=new $n(T||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Qi(T,"https"),yr(T),U?Gn(T.toString(),_):Kn(T.toString(),_)}else ot(2);u.I=0,u.l&&u.l.pa(m),ns(u),qs(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),ot(2)):(this.j.info("Failed to ping google.com"),ot(1))};function ns(u){if(u.I=0,u.ja=[],u.l){const m=rn(u.h);(m.length!=0||u.i.length!=0)&&(H(u.ja,m),H(u.ja,u.i),u.h.i.length=0,b(u.i),u.i.length=0),u.l.oa()}}function ma(u,m,_){var T=_ instanceof $n?vn(_):new $n(_);if(T.g!="")m&&(T.g=m+"."+T.g),qn(T,T.u);else{var U=h.location;T=U.protocol,m=m?m+"."+U.hostname:U.hostname,U=+U.port;const $=new $n(null);T&&Qi($,T),m&&($.g=m),U&&qn($,U),_&&($.h=_),T=$}return _=u.G,m=u.wa,_&&m&&He(T,_,m),He(T,"VER",u.ka),Yn(u,T),T}function Wl(u,m,_){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new Xe(new _r({ab:_})):new Xe(u.ma),m.Fa(u.L),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Hl(){}r=Hl.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Ks(){}Ks.prototype.g=function(u,m){return new Dt(u,m)};function Dt(u,m){mt.call(this),this.g=new Bs(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!R(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!R(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new ri(this)}E(Dt,mt),Dt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Dt.prototype.close=function(){$s(this.g)},Dt.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.v&&(_={},_.__data__=qr(u),u=_);m.i.push(new Jc(m.Ya++,u)),m.I==3&&Er(m)},Dt.prototype.N=function(){this.g.l=null,delete this.j,$s(this.g),delete this.g,Dt.Z.N.call(this)};function Gl(u){Ds.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const _ in m){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}E(Gl,Ds);function Kl(){Jo.call(this),this.status=1}E(Kl,Jo);function ri(u){this.g=u}E(ri,Hl),ri.prototype.ra=function(){lt(this.g,"a")},ri.prototype.qa=function(u){lt(this.g,new Gl(u))},ri.prototype.pa=function(u){lt(this.g,new Kl)},ri.prototype.oa=function(){lt(this.g,"b")},Ks.prototype.createWebChannel=Ks.prototype.g,Dt.prototype.send=Dt.prototype.o,Dt.prototype.open=Dt.prototype.m,Dt.prototype.close=Dt.prototype.close,Pv=function(){return new Ks},Cv=function(){return Gr()},Rv=Cn,Jd={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Xr.NO_ERROR=0,Xr.TIMEOUT=8,Xr.HTTP_ERROR=6,Ju=Xr,Yr.COMPLETE="complete",Av=Yr,kl.EventType=Hr,Hr.OPEN="a",Hr.CLOSE="b",Hr.ERROR="c",Hr.MESSAGE="d",mt.prototype.listen=mt.prototype.J,$a=kl,Xe.prototype.listenOnce=Xe.prototype.K,Xe.prototype.getLastError=Xe.prototype.Ha,Xe.prototype.getLastErrorCode=Xe.prototype.ya,Xe.prototype.getStatus=Xe.prototype.ca,Xe.prototype.getResponseJson=Xe.prototype.La,Xe.prototype.getResponseText=Xe.prototype.la,Xe.prototype.send=Xe.prototype.ea,Xe.prototype.setWithCredentials=Xe.prototype.Fa,Sv=Xe}).apply(typeof $u<"u"?$u:typeof self<"u"?self:typeof window<"u"?window:{});const _y="@firebase/firestore",vy="4.9.3";class Wt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Wt.UNAUTHENTICATED=new Wt(null),Wt.GOOGLE_CREDENTIALS=new Wt("google-credentials-uid"),Wt.FIRST_PARTY=new Wt("first-party-uid"),Wt.MOCK_USER=new Wt("mock-user");let Uo="12.7.0";const Ts=new Ef("@firebase/firestore");function yo(){return Ts.logLevel}function ue(r,...e){if(Ts.logLevel<=Oe.DEBUG){const t=e.map(Of);Ts.debug(`Firestore (${Uo}): ${r}`,...t)}}function br(r,...e){if(Ts.logLevel<=Oe.ERROR){const t=e.map(Of);Ts.error(`Firestore (${Uo}): ${r}`,...t)}}function ko(r,...e){if(Ts.logLevel<=Oe.WARN){const t=e.map(Of);Ts.warn(`Firestore (${Uo}): ${r}`,...t)}}function Of(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}function _e(r,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,kv(r,s,t)}function kv(r,e,t){let s=`FIRESTORE (${Uo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw br(s),new Error(s)}function ze(r,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,r||kv(e,o,s)}function Ae(r,e){return r}const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oe extends zr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ar{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Nv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class fA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Wt.UNAUTHENTICATED)))}shutdown(){}}class pA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class mA{constructor(e){this.t=e,this.currentUser=Wt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ze(this.o===void 0,42304);let s=this.i;const o=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let l=new ar;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ar,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},f=g=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((g=>f(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?f(g):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ar)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(ze(typeof s.accessToken=="string",31837,{l:s}),new Nv(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ze(e===null||typeof e=="string",2055,{h:e}),new Wt(e)}}class gA{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Wt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class yA{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new gA(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Wt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class wy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _A{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,bn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ze(this.o===void 0,3512);const s=l=>{l.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,ue("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const o=l=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new wy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ze(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new wy(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function vA(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}class Mf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=vA(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%62))}return s}}function Me(r,e){return r<e?-1:r>e?1:0}function Zd(r,e){const t=Math.min(r.length,e.length);for(let s=0;s<t;s++){const o=r.charAt(s),l=e.charAt(s);if(o!==l)return Od(o)===Od(l)?Me(o,l):Od(o)?1:-1}return Me(r.length,e.length)}const wA=55296,EA=57343;function Od(r){const e=r.charCodeAt(0);return e>=wA&&e<=EA}function No(r,e,t){return r.length===e.length&&r.every(((s,o)=>t(s,e[o])))}const Ey="__name__";class sr{constructor(e,t,s){t===void 0?t=0:t>e.length&&_e(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&_e(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return sr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof sr?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=sr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Me(e.length,t.length)}static compareSegments(e,t){const s=sr.isNumericId(e),o=sr.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?sr.extractNumericId(e).compare(sr.extractNumericId(t)):Zd(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ni.fromString(e.substring(4,e.length-2))}}class Qe extends sr{construct(e,t,s){return new Qe(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new oe(W.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new Qe(t)}static emptyPath(){return new Qe([])}}const TA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Lt extends sr{construct(e,t,s){return new Lt(e,t,s)}static isValidIdentifier(e){return TA.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Lt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ey}static keyField(){return new Lt([Ey])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new oe(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let h=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new oe(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new oe(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else f==="`"?(h=!h,o++):f!=="."||h?(s+=f,o++):(l(),o++)}if(l(),h)throw new oe(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Lt(t)}static emptyPath(){return new Lt([])}}class ye{constructor(e){this.path=e}static fromPath(e){return new ye(Qe.fromString(e))}static fromName(e){return new ye(Qe.fromString(e).popFirst(5))}static empty(){return new ye(Qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Qe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new Qe(e.slice()))}}function xv(r,e,t){if(!t)throw new oe(W.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function IA(r,e,t,s){if(e===!0&&s===!0)throw new oe(W.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Ty(r){if(!ye.isDocumentKey(r))throw new oe(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Iy(r){if(ye.isDocumentKey(r))throw new oe(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Dv(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Vc(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":_e(12329,{type:typeof r})}function Fr(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new oe(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Vc(r);throw new oe(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function wt(r,e){const t={typeString:r};return e&&(t.value=e),t}function gl(r,e){if(!Dv(r))throw new oe(W.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){t=`JSON missing required field: '${s}'`;break}const h=r[s];if(o&&typeof h!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(l!==void 0&&h!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new oe(W.INVALID_ARGUMENT,t);return!0}const Sy=-62135596800,Ay=1e6;class tt{static now(){return tt.fromMillis(Date.now())}static fromDate(e){return tt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*Ay);return new tt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new oe(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new oe(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Sy)throw new oe(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oe(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ay}_compareTo(e){return this.seconds===e.seconds?Me(this.nanoseconds,e.nanoseconds):Me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:tt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(gl(e,tt._jsonSchema))return new tt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Sy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}tt._jsonSchemaVersion="firestore/timestamp/1.0",tt._jsonSchema={type:wt("string",tt._jsonSchemaVersion),seconds:wt("number"),nanoseconds:wt("number")};class Ee{static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new tt(0,0))}static max(){return new Ee(new tt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const rl=-1;function SA(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Ee.fromTimestamp(s===1e9?new tt(t+1,0):new tt(t,s));return new Vi(o,ye.empty(),e)}function AA(r){return new Vi(r.readTime,r.key,rl)}class Vi{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Vi(Ee.min(),ye.empty(),rl)}static max(){return new Vi(Ee.max(),ye.empty(),rl)}}function RA(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=ye.comparator(r.documentKey,e.documentKey),t!==0?t:Me(r.largestBatchId,e.largestBatchId))}const CA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class PA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function zo(r){if(r.code!==W.FAILED_PRECONDITION||r.message!==CA)throw r;ue("LocalStore","Unexpectedly lost primary lease")}class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&_e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new G(((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof G?t:G.resolve(t)}catch(t){return G.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):G.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):G.reject(t)}static resolve(e){return new G(((t,s)=>{t(e)}))}static reject(e){return new G(((t,s)=>{s(e)}))}static waitFor(e){return new G(((t,s)=>{let o=0,l=0,h=!1;e.forEach((f=>{++o,f.next((()=>{++l,h&&l===o&&t()}),(g=>s(g)))})),h=!0,l===o&&t()}))}static or(e){let t=G.resolve(!1);for(const s of e)t=t.next((o=>o?G.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,l)=>{s.push(t.call(this,o,l))})),this.waitFor(s)}static mapArray(e,t){return new G(((s,o)=>{const l=e.length,h=new Array(l);let f=0;for(let g=0;g<l;g++){const y=g;t(e[y]).next((w=>{h[y]=w,++f,f===l&&s(h)}),(w=>o(w)))}}))}static doWhile(e,t){return new G(((s,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):s()};l()}))}}function kA(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Bo(r){return r.name==="IndexedDbTransactionError"}class Oc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Oc.ce=-1;const Lf=-1;function yl(r){return r==null}function fc(r){return r===0&&1/r==-1/0}function NA(r){return typeof r=="number"&&Number.isInteger(r)&&!fc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const Vv="";function xA(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Ry(e)),e=DA(r.get(t),e);return Ry(e)}function DA(r,e){let t=e;const s=r.length;for(let o=0;o<s;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case Vv:t+="";break;default:t+=l}}return t}function Ry(r){return r+Vv+""}function Cy(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Ui(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function Ov(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class st{constructor(e,t){this.comparator=e,this.root=t||Mt.EMPTY}insert(e,t){return new st(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Mt.BLACK,null,null))}remove(e){return new st(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Mt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qu(this.root,e,this.comparator,!1)}getReverseIterator(){return new qu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qu(this.root,e,this.comparator,!0)}}class qu{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Mt{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??Mt.RED,this.left=o??Mt.EMPTY,this.right=l??Mt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new Mt(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Mt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Mt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Mt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Mt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw _e(27949);return e+(this.isRed()?0:1)}}Mt.EMPTY=null,Mt.RED=!0,Mt.BLACK=!1;Mt.EMPTY=new class{constructor(){this.size=0}get key(){throw _e(57766)}get value(){throw _e(16141)}get color(){throw _e(16727)}get left(){throw _e(29726)}get right(){throw _e(36894)}copy(e,t,s,o,l){return this}insert(e,t,s){return new Mt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class It{constructor(e){this.comparator=e,this.data=new st(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Py(this.data.getIterator())}getIteratorFrom(e){return new Py(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof It)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new It(this.comparator);return t.data=e,t}}class Py{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class pn{constructor(e){this.fields=e,e.sort(Lt.comparator)}static empty(){return new pn([])}unionWith(e){let t=new It(Lt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new pn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return No(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}class Mv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ft{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Mv("Invalid base64 string: "+l):l}})(e);return new Ft(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l})(e);return new Ft(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ft.EMPTY_BYTE_STRING=new Ft("");const VA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Oi(r){if(ze(!!r,39018),typeof r=="string"){let e=0;const t=VA.exec(r);if(ze(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:ht(r.seconds),nanos:ht(r.nanos)}}function ht(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Mi(r){return typeof r=="string"?Ft.fromBase64String(r):Ft.fromUint8Array(r)}const Lv="server_timestamp",bv="__type__",Fv="__previous_value__",jv="__local_write_time__";function bf(r){return(r?.mapValue?.fields||{})[bv]?.stringValue===Lv}function Mc(r){const e=r.mapValue.fields[Fv];return bf(e)?Mc(e):e}function il(r){const e=Oi(r.mapValue.fields[jv].timestampValue);return new tt(e.seconds,e.nanos)}class OA{constructor(e,t,s,o,l,h,f,g,y,w){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=w}}const pc="(default)";class sl{constructor(e,t){this.projectId=e,this.database=t||pc}static empty(){return new sl("","")}get isDefaultDatabase(){return this.database===pc}isEqual(e){return e instanceof sl&&e.projectId===this.projectId&&e.database===this.database}}const Uv="__type__",MA="__max__",Wu={mapValue:{}},zv="__vector__",mc="value";function Li(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?bf(r)?4:bA(r)?9007199254740991:LA(r)?10:11:_e(28295,{value:r})}function dr(r,e){if(r===e)return!0;const t=Li(r);if(t!==Li(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return il(r).isEqual(il(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=Oi(o.timestampValue),f=Oi(l.timestampValue);return h.seconds===f.seconds&&h.nanos===f.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,l){return Mi(o.bytesValue).isEqual(Mi(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,l){return ht(o.geoPointValue.latitude)===ht(l.geoPointValue.latitude)&&ht(o.geoPointValue.longitude)===ht(l.geoPointValue.longitude)})(r,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return ht(o.integerValue)===ht(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=ht(o.doubleValue),f=ht(l.doubleValue);return h===f?fc(h)===fc(f):isNaN(h)&&isNaN(f)}return!1})(r,e);case 9:return No(r.arrayValue.values||[],e.arrayValue.values||[],dr);case 10:case 11:return(function(o,l){const h=o.mapValue.fields||{},f=l.mapValue.fields||{};if(Cy(h)!==Cy(f))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(f[g]===void 0||!dr(h[g],f[g])))return!1;return!0})(r,e);default:return _e(52216,{left:r})}}function ol(r,e){return(r.values||[]).find((t=>dr(t,e)))!==void 0}function xo(r,e){if(r===e)return 0;const t=Li(r),s=Li(e);if(t!==s)return Me(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Me(r.booleanValue,e.booleanValue);case 2:return(function(l,h){const f=ht(l.integerValue||l.doubleValue),g=ht(h.integerValue||h.doubleValue);return f<g?-1:f>g?1:f===g?0:isNaN(f)?isNaN(g)?0:-1:1})(r,e);case 3:return ky(r.timestampValue,e.timestampValue);case 4:return ky(il(r),il(e));case 5:return Zd(r.stringValue,e.stringValue);case 6:return(function(l,h){const f=Mi(l),g=Mi(h);return f.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(l,h){const f=l.split("/"),g=h.split("/");for(let y=0;y<f.length&&y<g.length;y++){const w=Me(f[y],g[y]);if(w!==0)return w}return Me(f.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,h){const f=Me(ht(l.latitude),ht(h.latitude));return f!==0?f:Me(ht(l.longitude),ht(h.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Ny(r.arrayValue,e.arrayValue);case 10:return(function(l,h){const f=l.fields||{},g=h.fields||{},y=f[mc]?.arrayValue,w=g[mc]?.arrayValue,E=Me(y?.values?.length||0,w?.values?.length||0);return E!==0?E:Ny(y,w)})(r.mapValue,e.mapValue);case 11:return(function(l,h){if(l===Wu.mapValue&&h===Wu.mapValue)return 0;if(l===Wu.mapValue)return 1;if(h===Wu.mapValue)return-1;const f=l.fields||{},g=Object.keys(f),y=h.fields||{},w=Object.keys(y);g.sort(),w.sort();for(let E=0;E<g.length&&E<w.length;++E){const S=Zd(g[E],w[E]);if(S!==0)return S;const b=xo(f[g[E]],y[w[E]]);if(b!==0)return b}return Me(g.length,w.length)})(r.mapValue,e.mapValue);default:throw _e(23264,{he:t})}}function ky(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Me(r,e);const t=Oi(r),s=Oi(e),o=Me(t.seconds,s.seconds);return o!==0?o:Me(t.nanos,s.nanos)}function Ny(r,e){const t=r.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=xo(t[o],s[o]);if(l)return l}return Me(t.length,s.length)}function Do(r){return ef(r)}function ef(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const s=Oi(t);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Mi(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return ye.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=ef(l);return s+"]"})(r.arrayValue):"mapValue"in r?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of s)l?l=!1:o+=",",o+=`${h}:${ef(t.fields[h])}`;return o+"}"})(r.mapValue):_e(61005,{value:r})}function Zu(r){switch(Li(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Mc(r);return e?16+Zu(e):16;case 5:return 2*r.stringValue.length;case 6:return Mi(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,l)=>o+Zu(l)),0)})(r.arrayValue);case 10:case 11:return(function(s){let o=0;return Ui(s.fields,((l,h)=>{o+=l.length+Zu(h)})),o})(r.mapValue);default:throw _e(13486,{value:r})}}function xy(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function tf(r){return!!r&&"integerValue"in r}function Ff(r){return!!r&&"arrayValue"in r}function Dy(r){return!!r&&"nullValue"in r}function Vy(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function ec(r){return!!r&&"mapValue"in r}function LA(r){return(r?.mapValue?.fields||{})[Uv]?.stringValue===zv}function Ka(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Ui(r.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Ka(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ka(r.arrayValue.values[t]);return e}return{...r}}function bA(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===MA}class Qt{constructor(e){this.value=e}static empty(){return new Qt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!ec(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ka(t)}setAll(e){let t=Lt.emptyPath(),s={},o=[];e.forEach(((h,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,s,o),s={},o=[],t=f.popLast()}h?s[f.lastSegment()]=Ka(h):o.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());ec(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return dr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];ec(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){Ui(t,((o,l)=>e[o]=l));for(const o of s)delete e[o]}clone(){return new Qt(Ka(this.value))}}function Bv(r){const e=[];return Ui(r.fields,((t,s)=>{const o=new Lt([t]);if(ec(s)){const l=Bv(s.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)})),new pn(e)}class Nt{constructor(e,t,s,o,l,h,f){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=h,this.documentState=f}static newInvalidDocument(e){return new Nt(e,0,Ee.min(),Ee.min(),Ee.min(),Qt.empty(),0)}static newFoundDocument(e,t,s,o){return new Nt(e,1,t,Ee.min(),s,o,0)}static newNoDocument(e,t){return new Nt(e,2,t,Ee.min(),Ee.min(),Qt.empty(),0)}static newUnknownDocument(e,t){return new Nt(e,3,t,Ee.min(),Ee.min(),Qt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Nt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Nt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class gc{constructor(e,t){this.position=e,this.inclusive=t}}function Oy(r,e,t){let s=0;for(let o=0;o<r.position.length;o++){const l=e[o],h=r.position[o];if(l.field.isKeyField()?s=ye.comparator(ye.fromName(h.referenceValue),t.key):s=xo(h,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function My(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!dr(r.position[t],e.position[t]))return!1;return!0}class yc{constructor(e,t="asc"){this.field=e,this.dir=t}}function FA(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class $v{}class vt extends $v{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new UA(e,t,s):t==="array-contains"?new $A(e,s):t==="in"?new qA(e,s):t==="not-in"?new WA(e,s):t==="array-contains-any"?new HA(e,s):new vt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new zA(e,s):new BA(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(xo(t,this.value)):t!==null&&Li(this.value)===Li(t)&&this.matchesComparison(xo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Un extends $v{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Un(e,t)}matches(e){return qv(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function qv(r){return r.op==="and"}function Wv(r){return jA(r)&&qv(r)}function jA(r){for(const e of r.filters)if(e instanceof Un)return!1;return!0}function nf(r){if(r instanceof vt)return r.field.canonicalString()+r.op.toString()+Do(r.value);if(Wv(r))return r.filters.map((e=>nf(e))).join(",");{const e=r.filters.map((t=>nf(t))).join(",");return`${r.op}(${e})`}}function Hv(r,e){return r instanceof vt?(function(s,o){return o instanceof vt&&s.op===o.op&&s.field.isEqual(o.field)&&dr(s.value,o.value)})(r,e):r instanceof Un?(function(s,o){return o instanceof Un&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((l,h,f)=>l&&Hv(h,o.filters[f])),!0):!1})(r,e):void _e(19439)}function Gv(r){return r instanceof vt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Do(t.value)}`})(r):r instanceof Un?(function(t){return t.op.toString()+" {"+t.getFilters().map(Gv).join(" ,")+"}"})(r):"Filter"}class UA extends vt{constructor(e,t,s){super(e,t,s),this.key=ye.fromName(s.referenceValue)}matches(e){const t=ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class zA extends vt{constructor(e,t){super(e,"in",t),this.keys=Kv("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class BA extends vt{constructor(e,t){super(e,"not-in",t),this.keys=Kv("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Kv(r,e){return(e.arrayValue?.values||[]).map((t=>ye.fromName(t.referenceValue)))}class $A extends vt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ff(t)&&ol(t.arrayValue,this.value)}}class qA extends vt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ol(this.value.arrayValue,t)}}class WA extends vt{constructor(e,t){super(e,"not-in",t)}matches(e){if(ol(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ol(this.value.arrayValue,t)}}class HA extends vt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ff(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>ol(this.value.arrayValue,s)))}}class GA{constructor(e,t=null,s=[],o=[],l=null,h=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=h,this.endAt=f,this.Te=null}}function Ly(r,e=null,t=[],s=[],o=null,l=null,h=null){return new GA(r,e,t,s,o,l,h)}function jf(r){const e=Ae(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>nf(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),yl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Do(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Do(s))).join(",")),e.Te=t}return e.Te}function Uf(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!FA(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!Hv(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!My(r.startAt,e.startAt)&&My(r.endAt,e.endAt)}function rf(r){return ye.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}class _l{constructor(e,t=null,s=[],o=[],l=null,h="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=h,this.startAt=f,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function KA(r,e,t,s,o,l,h,f){return new _l(r,e,t,s,o,l,h,f)}function zf(r){return new _l(r)}function by(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function Qv(r){return r.collectionGroup!==null}function Qa(r){const e=Ae(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let f=new It(Lt.comparator);return h.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(f=f.add(y.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new yc(l,s))})),t.has(Lt.keyField().canonicalString())||e.Ie.push(new yc(Lt.keyField(),s))}return e.Ie}function lr(r){const e=Ae(r);return e.Ee||(e.Ee=QA(e,Qa(r))),e.Ee}function QA(r,e){if(r.limitType==="F")return Ly(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new yc(o.field,l)}));const t=r.endAt?new gc(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new gc(r.startAt.position,r.startAt.inclusive):null;return Ly(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function sf(r,e){const t=r.filters.concat([e]);return new _l(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function of(r,e,t){return new _l(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Lc(r,e){return Uf(lr(r),lr(e))&&r.limitType===e.limitType}function Xv(r){return`${jf(lr(r))}|lt:${r.limitType}`}function _o(r){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>Gv(o))).join(", ")}]`),yl(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>Do(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>Do(o))).join(",")),`Target(${s})`})(lr(r))}; limitType=${r.limitType})`}function bc(r,e){return e.isFoundDocument()&&(function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):ye.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(r,e)&&(function(s,o){for(const l of Qa(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0})(r,e)&&(function(s,o){return!(s.startAt&&!(function(h,f,g){const y=Oy(h,f,g);return h.inclusive?y<=0:y<0})(s.startAt,Qa(s),o)||s.endAt&&!(function(h,f,g){const y=Oy(h,f,g);return h.inclusive?y>=0:y>0})(s.endAt,Qa(s),o))})(r,e)}function XA(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Yv(r){return(e,t)=>{let s=!1;for(const o of Qa(r)){const l=YA(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function YA(r,e,t){const s=r.field.isKeyField()?ye.comparator(e.key,t.key):(function(l,h,f){const g=h.data.field(l),y=f.data.field(l);return g!==null&&y!==null?xo(g,y):_e(42886)})(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return _e(19790,{direction:r.dir})}}class Rs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ui(this.inner,((t,s)=>{for(const[o,l]of s)e(o,l)}))}isEmpty(){return Ov(this.inner)}size(){return this.innerSize}}const JA=new st(ye.comparator);function jr(){return JA}const Jv=new st(ye.comparator);function qa(...r){let e=Jv;for(const t of r)e=e.insert(t.key,t);return e}function Zv(r){let e=Jv;return r.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function ys(){return Xa()}function ew(){return Xa()}function Xa(){return new Rs((r=>r.toString()),((r,e)=>r.isEqual(e)))}const ZA=new st(ye.comparator),eR=new It(ye.comparator);function Le(...r){let e=eR;for(const t of r)e=e.add(t);return e}const tR=new It(Me);function nR(){return tR}function Bf(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fc(e)?"-0":e}}function tw(r){return{integerValue:""+r}}function rR(r,e){return NA(e)?tw(e):Bf(r,e)}class Fc{constructor(){this._=void 0}}function iR(r,e,t){return r instanceof al?(function(o,l){const h={fields:{[bv]:{stringValue:Lv},[jv]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&bf(l)&&(l=Mc(l)),l&&(h.fields[Fv]=l),{mapValue:h}})(t,e):r instanceof ll?rw(r,e):r instanceof ul?iw(r,e):(function(o,l){const h=nw(o,l),f=Fy(h)+Fy(o.Ae);return tf(h)&&tf(o.Ae)?tw(f):Bf(o.serializer,f)})(r,e)}function sR(r,e,t){return r instanceof ll?rw(r,e):r instanceof ul?iw(r,e):t}function nw(r,e){return r instanceof _c?(function(s){return tf(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class al extends Fc{}class ll extends Fc{constructor(e){super(),this.elements=e}}function rw(r,e){const t=sw(e);for(const s of r.elements)t.some((o=>dr(o,s)))||t.push(s);return{arrayValue:{values:t}}}class ul extends Fc{constructor(e){super(),this.elements=e}}function iw(r,e){let t=sw(e);for(const s of r.elements)t=t.filter((o=>!dr(o,s)));return{arrayValue:{values:t}}}class _c extends Fc{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Fy(r){return ht(r.integerValue||r.doubleValue)}function sw(r){return Ff(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class oR{constructor(e,t){this.field=e,this.transform=t}}function aR(r,e){return r.field.isEqual(e.field)&&(function(s,o){return s instanceof ll&&o instanceof ll||s instanceof ul&&o instanceof ul?No(s.elements,o.elements,dr):s instanceof _c&&o instanceof _c?dr(s.Ae,o.Ae):s instanceof al&&o instanceof al})(r.transform,e.transform)}class lR{constructor(e,t){this.version=e,this.transformResults=t}}class bt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new bt}static exists(e){return new bt(void 0,e)}static updateTime(e){return new bt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function tc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class jc{}function ow(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Uc(r.key,bt.none()):new vl(r.key,r.data,bt.none());{const t=r.data,s=Qt.empty();let o=new It(Lt.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?s.delete(l):s.set(l,h),o=o.add(l)}return new zi(r.key,s,new pn(o.toArray()),bt.none())}}function uR(r,e,t){r instanceof vl?(function(o,l,h){const f=o.value.clone(),g=Uy(o.fieldTransforms,l,h.transformResults);f.setAll(g),l.convertToFoundDocument(h.version,f).setHasCommittedMutations()})(r,e,t):r instanceof zi?(function(o,l,h){if(!tc(o.precondition,l))return void l.convertToUnknownDocument(h.version);const f=Uy(o.fieldTransforms,l,h.transformResults),g=l.data;g.setAll(aw(o)),g.setAll(f),l.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(r,e,t):(function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function Ya(r,e,t,s){return r instanceof vl?(function(l,h,f,g){if(!tc(l.precondition,h))return f;const y=l.value.clone(),w=zy(l.fieldTransforms,g,h);return y.setAll(w),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null})(r,e,t,s):r instanceof zi?(function(l,h,f,g){if(!tc(l.precondition,h))return f;const y=zy(l.fieldTransforms,g,h),w=h.data;return w.setAll(aw(l)),w.setAll(y),h.convertToFoundDocument(h.version,w).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(r,e,t,s):(function(l,h,f){return tc(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):f})(r,e,t)}function cR(r,e){let t=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),l=nw(s.transform,o||null);l!=null&&(t===null&&(t=Qt.empty()),t.set(s.field,l))}return t||null}function jy(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&No(s,o,((l,h)=>aR(l,h)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class vl extends jc{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class zi extends jc{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function aw(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}})),e}function Uy(r,e,t){const s=new Map;ze(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let o=0;o<t.length;o++){const l=r[o],h=l.transform,f=e.data.field(l.field);s.set(l.field,sR(h,f,t[o]))}return s}function zy(r,e,t){const s=new Map;for(const o of r){const l=o.transform,h=t.data.field(o.field);s.set(o.field,iR(l,h,e))}return s}class Uc extends jc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class lw extends jc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class hR{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&uR(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Ya(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Ya(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=ew();return this.mutations.forEach((o=>{const l=e.get(o.key),h=l.overlayedDocument;let f=this.applyToLocalView(h,l.mutatedFields);f=t.has(o.key)?null:f;const g=ow(h,f);g!==null&&s.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(Ee.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Le())}isEqual(e){return this.batchId===e.batchId&&No(this.mutations,e.mutations,((t,s)=>jy(t,s)))&&No(this.baseMutations,e.baseMutations,((t,s)=>jy(t,s)))}}class $f{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){ze(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return ZA})();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,s[h].version);return new $f(e,t,s,o)}}class dR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class fR{constructor(e,t){this.count=e,this.unchangedNames=t}}var _t,Ue;function uw(r){switch(r){case W.OK:return _e(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return _e(15467,{code:r})}}function cw(r){if(r===void 0)return br("GRPC error has no .code"),W.UNKNOWN;switch(r){case _t.OK:return W.OK;case _t.CANCELLED:return W.CANCELLED;case _t.UNKNOWN:return W.UNKNOWN;case _t.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case _t.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case _t.INTERNAL:return W.INTERNAL;case _t.UNAVAILABLE:return W.UNAVAILABLE;case _t.UNAUTHENTICATED:return W.UNAUTHENTICATED;case _t.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case _t.NOT_FOUND:return W.NOT_FOUND;case _t.ALREADY_EXISTS:return W.ALREADY_EXISTS;case _t.PERMISSION_DENIED:return W.PERMISSION_DENIED;case _t.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case _t.ABORTED:return W.ABORTED;case _t.OUT_OF_RANGE:return W.OUT_OF_RANGE;case _t.UNIMPLEMENTED:return W.UNIMPLEMENTED;case _t.DATA_LOSS:return W.DATA_LOSS;default:return _e(39323,{code:r})}}(Ue=_t||(_t={}))[Ue.OK=0]="OK",Ue[Ue.CANCELLED=1]="CANCELLED",Ue[Ue.UNKNOWN=2]="UNKNOWN",Ue[Ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ue[Ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ue[Ue.NOT_FOUND=5]="NOT_FOUND",Ue[Ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ue[Ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ue[Ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ue[Ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ue[Ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ue[Ue.ABORTED=10]="ABORTED",Ue[Ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ue[Ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ue[Ue.INTERNAL=13]="INTERNAL",Ue[Ue.UNAVAILABLE=14]="UNAVAILABLE",Ue[Ue.DATA_LOSS=15]="DATA_LOSS";function pR(){return new TextEncoder}const mR=new Ni([4294967295,4294967295],0);function By(r){const e=pR().encode(r),t=new Iv;return t.update(e),new Uint8Array(t.digest())}function $y(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ni([t,s],0),new Ni([o,l],0)]}class qf{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Wa(`Invalid padding: ${t}`);if(s<0)throw new Wa(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Wa(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Wa(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ni.fromNumber(this.ge)}ye(e,t,s){let o=e.add(t.multiply(Ni.fromNumber(s)));return o.compare(mR)===1&&(o=new Ni([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=By(e),[s,o]=$y(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(s,o,l);if(!this.we(h))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new qf(l,o,t);return s.forEach((f=>h.insert(f))),h}insert(e){if(this.ge===0)return;const t=By(e),[s,o]=$y(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(s,o,l);this.Se(h)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Wa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class zc{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,wl.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new zc(Ee.min(),o,new st(Me),jr(),Le())}}class wl{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new wl(s,t,Le(),Le(),Le())}}class nc{constructor(e,t,s,o){this.be=e,this.removedTargetIds=t,this.key=s,this.De=o}}class hw{constructor(e,t){this.targetId=e,this.Ce=t}}class dw{constructor(e,t,s=Ft.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class qy{constructor(){this.ve=0,this.Fe=Wy(),this.Me=Ft.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Le(),t=Le(),s=Le();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:_e(38017,{changeType:l})}})),new wl(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=Wy()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ze(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class gR{constructor(e){this.Ge=e,this.ze=new Map,this.je=jr(),this.Je=Hu(),this.He=Hu(),this.Ye=new st(Me)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:_e(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,s=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(rf(l))if(s===0){const h=new ye(l.path);this.et(t,h,Nt.newNoDocument(h,Ee.min()))}else ze(s===1,20013,{expectedCount:s});else{const h=this._t(t);if(h!==s){const f=this.ut(e),g=f?this.ct(f,e,h):1;if(g!==0){this.it(t);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let h,f;try{h=Mi(s).toUint8Array()}catch(g){if(g instanceof Mv)return ko("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{f=new qf(h,o,l)}catch(g){return ko(g instanceof Wa?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return f.ge===0?null:f}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let o=0;return s.forEach((l=>{const h=this.Ge.ht(),f=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,h)=>{const f=this.ot(h);if(f){if(l.current&&rf(f.target)){const g=new ye(f.target.path);this.It(g).has(h)||this.Et(h,g)||this.et(h,g,Nt.newNoDocument(g,e))}l.Be&&(t.set(h,l.ke()),l.qe())}}));let s=Le();this.He.forEach(((l,h)=>{let f=!0;h.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(s=s.add(l))})),this.je.forEach(((l,h)=>h.setReadTime(e)));const o=new zc(e,t,this.Ye,this.je,s);return this.je=jr(),this.Je=Hu(),this.He=Hu(),this.Ye=new st(Me),o}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new qy,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new It(Me),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new It(Me),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ue("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new qy),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Hu(){return new st(ye.comparator)}function Wy(){return new st(ye.comparator)}const yR={asc:"ASCENDING",desc:"DESCENDING"},_R={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vR={and:"AND",or:"OR"};class wR{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function af(r,e){return r.useProto3Json||yl(e)?e:{value:e}}function vc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fw(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function ER(r,e){return vc(r,e.toTimestamp())}function mn(r){return ze(!!r,49232),Ee.fromTimestamp((function(t){const s=Oi(t);return new tt(s.seconds,s.nanos)})(r))}function Wf(r,e){return lf(r,e).canonicalString()}function lf(r,e){const t=(function(o){return new Qe(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function pw(r){const e=Qe.fromString(r);return ze(ww(e),10190,{key:e.toString()}),e}function wc(r,e){return Wf(r.databaseId,e.path)}function Ja(r,e){const t=pw(e);if(t.get(1)!==r.databaseId.projectId)throw new oe(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new oe(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new ye(gw(t))}function mw(r,e){return Wf(r.databaseId,e)}function TR(r){const e=pw(r);return e.length===4?Qe.emptyPath():gw(e)}function uf(r){return new Qe(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function gw(r){return ze(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Hy(r,e,t){return{name:wc(r,e),fields:t.value.mapValue.fields}}function IR(r,e){return"found"in e?(function(s,o){ze(!!o.found,43571),o.found.name,o.found.updateTime;const l=Ja(s,o.found.name),h=mn(o.found.updateTime),f=o.found.createTime?mn(o.found.createTime):Ee.min(),g=new Qt({mapValue:{fields:o.found.fields}});return Nt.newFoundDocument(l,h,f,g)})(r,e):"missing"in e?(function(s,o){ze(!!o.missing,3894),ze(!!o.readTime,22933);const l=Ja(s,o.missing),h=mn(o.readTime);return Nt.newNoDocument(l,h)})(r,e):_e(7234,{result:e})}function SR(r,e){let t;if("targetChange"in e){e.targetChange;const s=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:_e(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(y,w){return y.useProto3Json?(ze(w===void 0||typeof w=="string",58123),Ft.fromBase64String(w||"")):(ze(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),Ft.fromUint8Array(w||new Uint8Array))})(r,e.targetChange.resumeToken),h=e.targetChange.cause,f=h&&(function(y){const w=y.code===void 0?W.UNKNOWN:cw(y.code);return new oe(w,y.message||"")})(h);t=new dw(s,o,l,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Ja(r,s.document.name),l=mn(s.document.updateTime),h=s.document.createTime?mn(s.document.createTime):Ee.min(),f=new Qt({mapValue:{fields:s.document.fields}}),g=Nt.newFoundDocument(o,l,h,f),y=s.targetIds||[],w=s.removedTargetIds||[];t=new nc(y,w,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Ja(r,s.document),l=s.readTime?mn(s.readTime):Ee.min(),h=Nt.newNoDocument(o,l),f=s.removedTargetIds||[];t=new nc([],f,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Ja(r,s.document),l=s.removedTargetIds||[];t=new nc([],l,o,null)}else{if(!("filter"in e))return _e(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,h=new fR(o,l),f=s.targetId;t=new hw(f,h)}}return t}function yw(r,e){let t;if(e instanceof vl)t={update:Hy(r,e.key,e.value)};else if(e instanceof Uc)t={delete:wc(r,e.key)};else if(e instanceof zi)t={update:Hy(r,e.key,e.data),updateMask:VR(e.fieldMask)};else{if(!(e instanceof lw))return _e(16599,{Vt:e.type});t={verify:wc(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,h){const f=h.transform;if(f instanceof al)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof ll)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof ul)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof _c)return{fieldPath:h.field.canonicalString(),increment:f.Ae};throw _e(20930,{transform:h.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:ER(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:_e(27497)})(r,e.precondition)),t}function AR(r,e){return r&&r.length>0?(ze(e!==void 0,14353),r.map((t=>(function(o,l){let h=o.updateTime?mn(o.updateTime):mn(l);return h.isEqual(Ee.min())&&(h=mn(l)),new lR(h,o.transformResults||[])})(t,e)))):[]}function RR(r,e){return{documents:[mw(r,e.path)]}}function CR(r,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=mw(r,o);const l=(function(y){if(y.length!==0)return vw(Un.create(y,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const h=(function(y){if(y.length!==0)return y.map((w=>(function(S){return{field:vo(S.field),direction:NR(S.dir)}})(w)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const f=af(r,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:o}}function PR(r){let e=TR(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){ze(s===1,65062);const w=t.from[0];w.allDescendants?o=w.collectionId:e=e.child(w.collectionId)}let l=[];t.where&&(l=(function(E){const S=_w(E);return S instanceof Un&&Wv(S)?S.getFilters():[S]})(t.where));let h=[];t.orderBy&&(h=(function(E){return E.map((S=>(function(H){return new yc(wo(H.field),(function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(H.direction))})(S)))})(t.orderBy));let f=null;t.limit&&(f=(function(E){let S;return S=typeof E=="object"?E.value:E,yl(S)?null:S})(t.limit));let g=null;t.startAt&&(g=(function(E){const S=!!E.before,b=E.values||[];return new gc(b,S)})(t.startAt));let y=null;return t.endAt&&(y=(function(E){const S=!E.before,b=E.values||[];return new gc(b,S)})(t.endAt)),KA(e,o,h,l,f,"F",g,y)}function kR(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function _w(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=wo(t.unaryFilter.field);return vt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=wo(t.unaryFilter.field);return vt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=wo(t.unaryFilter.field);return vt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=wo(t.unaryFilter.field);return vt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _e(61313);default:return _e(60726)}})(r):r.fieldFilter!==void 0?(function(t){return vt.create(wo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _e(58110);default:return _e(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return Un.create(t.compositeFilter.filters.map((s=>_w(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return _e(1026)}})(t.compositeFilter.op))})(r):_e(30097,{filter:r})}function NR(r){return yR[r]}function xR(r){return _R[r]}function DR(r){return vR[r]}function vo(r){return{fieldPath:r.canonicalString()}}function wo(r){return Lt.fromServerFormat(r.fieldPath)}function vw(r){return r instanceof vt?(function(t){if(t.op==="=="){if(Vy(t.value))return{unaryFilter:{field:vo(t.field),op:"IS_NAN"}};if(Dy(t.value))return{unaryFilter:{field:vo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Vy(t.value))return{unaryFilter:{field:vo(t.field),op:"IS_NOT_NAN"}};if(Dy(t.value))return{unaryFilter:{field:vo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vo(t.field),op:xR(t.op),value:t.value}}})(r):r instanceof Un?(function(t){const s=t.getFilters().map((o=>vw(o)));return s.length===1?s[0]:{compositeFilter:{op:DR(t.op),filters:s}}})(r):_e(54877,{filter:r})}function VR(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function ww(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}class Si{constructor(e,t,s,o,l=Ee.min(),h=Ee.min(),f=Ft.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new Si(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Si(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Si(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Si(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class OR{constructor(e){this.yt=e}}function MR(r){const e=PR({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?of(e,e.limit,"L"):e}class LR{constructor(){this.Cn=new bR}addToCollectionParentIndex(e,t){return this.Cn.add(t),G.resolve()}getCollectionParents(e,t){return G.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return G.resolve()}deleteFieldIndex(e,t){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,t){return G.resolve()}getDocumentsMatchingTarget(e,t){return G.resolve(null)}getIndexType(e,t){return G.resolve(0)}getFieldIndexes(e,t){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,t){return G.resolve(Vi.min())}getMinOffsetFromCollectionGroup(e,t){return G.resolve(Vi.min())}updateCollectionGroup(e,t,s){return G.resolve()}updateIndexEntries(e,t){return G.resolve()}}class bR{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new It(Qe.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new It(Qe.comparator)).toArray()}}const Gy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ew=41943040;class nn{static withCacheSize(e){return new nn(e,nn.DEFAULT_COLLECTION_PERCENTILE,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}nn.DEFAULT_COLLECTION_PERCENTILE=10,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nn.DEFAULT=new nn(Ew,nn.DEFAULT_COLLECTION_PERCENTILE,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nn.DISABLED=new nn(-1,0,0);class Vo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Vo(0)}static cr(){return new Vo(-1)}}const Ky="LruGarbageCollector",FR=1048576;function Qy([r,e],[t,s]){const o=Me(r,t);return o===0?Me(e,s):o}class jR{constructor(e){this.Ir=e,this.buffer=new It(Qy),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Qy(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class UR{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ue(Ky,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Bo(t)?ue(Ky,"Ignoring IndexedDB error during garbage collection: ",t):await zo(t)}await this.Vr(3e5)}))}}class zR{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return G.resolve(Oc.ce);const s=new jR(t);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(Gy)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Gy):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,o,l,h,f,g,y;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,h=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(s=E,f=Date.now(),this.removeTargets(e,s,t)))).next((E=>(l=E,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((E=>(y=Date.now(),yo()<=Oe.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-w}ms
	Determined least recently used ${o} in `+(f-h)+`ms
	Removed ${l} targets in `+(g-f)+`ms
	Removed ${E} documents in `+(y-g)+`ms
Total Duration: ${y-w}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:E}))))}}function BR(r,e){return new zR(r,e)}class $R{constructor(){this.changes=new Rs((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Nt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?G.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class qR{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class WR{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&Ya(s.mutation,o,pn.empty(),tt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,Le()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=Le()){const o=ys();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((l=>{let h=qa();return l.forEach(((f,g)=>{h=h.insert(f,g.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const s=ys();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,Le())))}populateOverlays(e,t,s){const o=[];return s.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((h,f)=>{t.set(h,f)}))}))}computeViews(e,t,s,o){let l=jr();const h=Xa(),f=(function(){return Xa()})();return t.forEach(((g,y)=>{const w=s.get(y.key);o.has(y.key)&&(w===void 0||w.mutation instanceof zi)?l=l.insert(y.key,y):w!==void 0?(h.set(y.key,w.mutation.getFieldMask()),Ya(w.mutation,y,w.mutation.getFieldMask(),tt.now())):h.set(y.key,pn.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((y,w)=>h.set(y,w))),t.forEach(((y,w)=>f.set(y,new qR(w,h.get(y)??null)))),f)))}recalculateAndSaveOverlays(e,t){const s=Xa();let o=new st(((h,f)=>h-f)),l=Le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const f of h)f.keys().forEach((g=>{const y=t.get(g);if(y===null)return;let w=s.get(g)||pn.empty();w=f.applyToLocalView(y,w),s.set(g,w);const E=(o.get(f.batchId)||Le()).add(g);o=o.insert(f.batchId,E)}))})).next((()=>{const h=[],f=o.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),y=g.key,w=g.value,E=ew();w.forEach((S=>{if(!l.has(S)){const b=ow(t.get(S),s.get(S));b!==null&&E.set(S,b),l=l.add(S)}})),h.push(this.documentOverlayCache.saveOverlays(e,y,E))}return G.waitFor(h)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return(function(h){return ye.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Qv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):G.resolve(ys());let f=rl,g=l;return h.next((y=>G.forEach(y,((w,E)=>(f<E.largestBatchId&&(f=E.largestBatchId),l.get(w)?G.resolve():this.remoteDocumentCache.getEntry(e,w).next((S=>{g=g.insert(w,S)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,g,y,Le()))).next((w=>({batchId:f,changes:Zv(w)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ye(t)).next((s=>{let o=qa();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let h=qa();return this.indexManager.getCollectionParents(e,l).next((f=>G.forEach(f,(g=>{const y=(function(E,S){return new _l(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,s,o).next((w=>{w.forEach(((E,S)=>{h=h.insert(E,S)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o)))).next((h=>{l.forEach(((g,y)=>{const w=y.getKey();h.get(w)===null&&(h=h.insert(w,Nt.newInvalidDocument(w)))}));let f=qa();return h.forEach(((g,y)=>{const w=l.get(g);w!==void 0&&Ya(w.mutation,y,pn.empty(),tt.now()),bc(t,y)&&(f=f.insert(g,y))})),f}))}}class HR{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return G.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:mn(o.createTime)}})(t)),G.resolve()}getNamedQuery(e,t){return G.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:MR(o.bundledQuery),readTime:mn(o.readTime)}})(t)),G.resolve()}}class GR{constructor(){this.overlays=new st(ye.comparator),this.qr=new Map}getOverlay(e,t){return G.resolve(this.overlays.get(t))}getOverlays(e,t){const s=ys();return G.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&s.set(o,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,l)=>{this.St(e,t,l)})),G.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),G.resolve()}getOverlaysForCollection(e,t,s){const o=ys(),l=t.length+1,h=new ye(t.child("")),f=this.overlays.getIteratorFrom(h);for(;f.hasNext();){const g=f.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&g.largestBatchId>s&&o.set(g.getKey(),g)}return G.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new st(((y,w)=>y-w));const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>s){let w=l.get(y.largestBatchId);w===null&&(w=ys(),l=l.insert(y.largestBatchId,w)),w.set(y.getKey(),y)}}const f=ys(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,w)=>f.set(y,w))),!(f.size()>=o)););return G.resolve(f)}St(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new dR(t,s));let l=this.qr.get(t);l===void 0&&(l=Le(),this.qr.set(t,l)),this.qr.set(t,l.add(s.key))}}class KR{constructor(){this.sessionToken=Ft.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,G.resolve()}}class Hf{constructor(){this.Qr=new It(kt.$r),this.Ur=new It(kt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new kt(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new kt(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new ye(new Qe([])),s=new kt(t,e),o=new kt(t,e+1),l=[];return this.Ur.forEachInRange([s,o],(h=>{this.Gr(h),l.push(h.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ye(new Qe([])),s=new kt(t,e),o=new kt(t,e+1);let l=Le();return this.Ur.forEachInRange([s,o],(h=>{l=l.add(h.key)})),l}containsKey(e){const t=new kt(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class kt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ye.comparator(e.key,t.key)||Me(e.Yr,t.Yr)}static Kr(e,t){return Me(e.Yr,t.Yr)||ye.comparator(e.key,t.key)}}class QR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new It(kt.$r)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new hR(l,t,s,o);this.mutationQueue.push(h);for(const f of o)this.Zr=this.Zr.add(new kt(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return G.resolve(h)}lookupMutationBatch(e,t){return G.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.ei(s),l=o<0?0:o;return G.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?Lf:this.tr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new kt(t,0),o=new kt(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,o],(h=>{const f=this.Xr(h.Yr);l.push(f)})),G.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new It(Me);return t.forEach((o=>{const l=new kt(o,0),h=new kt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,h],(f=>{s=s.add(f.Yr)}))})),G.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;ye.isDocumentKey(l)||(l=l.child(""));const h=new kt(new ye(l),0);let f=new It(Me);return this.Zr.forEachWhile((g=>{const y=g.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(f=f.add(g.Yr)),!0)}),h),G.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){ze(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return G.forEach(t.mutations,(o=>{const l=new kt(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new kt(t,0),o=this.Zr.firstAfterOrEqual(s);return G.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class XR{constructor(e){this.ri=e,this.docs=(function(){return new st(ye.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,h=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return G.resolve(s?s.document.mutableCopy():Nt.newInvalidDocument(t))}getEntries(e,t){let s=jr();return t.forEach((o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():Nt.newInvalidDocument(o))})),G.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=jr();const h=t.path,f=new ye(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:y,value:{document:w}}=g.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||RA(AA(w),s)<=0||(o.has(w.key)||bc(t,w))&&(l=l.insert(w.key,w.mutableCopy()))}return G.resolve(l)}getAllFromCollectionGroup(e,t,s,o){_e(9500)}ii(e,t){return G.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new YR(this)}getSize(e){return G.resolve(this.size)}}class YR extends $R{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),G.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class JR{constructor(e){this.persistence=e,this.si=new Rs((t=>jf(t)),Uf),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.oi=0,this._i=new Hf,this.targetCount=0,this.ai=Vo.ur()}forEachTarget(e,t){return this.si.forEach(((s,o)=>t(o))),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),G.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Vo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,G.resolve()}updateTargetData(e,t){return this.Pr(t),G.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.si.forEach(((h,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.si.delete(h),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)})),G.waitFor(l).next((()=>o))}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return G.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),G.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((h=>{l.push(o.markPotentiallyOrphaned(e,h))})),G.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),G.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return G.resolve(s)}containsKey(e,t){return G.resolve(this._i.containsKey(t))}}class Tw{constructor(e,t){this.ui={},this.overlays={},this.ci=new Oc(0),this.li=!1,this.li=!0,this.hi=new KR,this.referenceDelegate=e(this),this.Pi=new JR(this),this.indexManager=new LR,this.remoteDocumentCache=(function(o){return new XR(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new OR(t),this.Ii=new HR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new GR,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new QR(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){ue("MemoryPersistence","Starting transaction:",e);const o=new ZR(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ai(e,t){return G.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class ZR extends PA{constructor(e){super(),this.currentSequenceNumber=e}}class Gf{constructor(e){this.persistence=e,this.Ri=new Hf,this.Vi=null}static mi(e){return new Gf(e)}get fi(){if(this.Vi)return this.Vi;throw _e(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),G.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),G.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),G.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.fi,(s=>{const o=ye.fromPath(s);return this.gi(e,o).next((l=>{l||t.removeEntry(o,Ee.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return G.or([()=>G.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Ec{constructor(e,t){this.persistence=e,this.pi=new Rs((s=>xA(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=BR(this,t)}static mi(e,t){return new Ec(e,t)}Ei(){}di(e){return G.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return G.forEach(this.pi,((s,o)=>this.br(e,s,o).next((l=>l?G.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,(h=>this.br(e,h,t).next((f=>{f||(s++,l.removeEntry(h,Ee.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),G.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),G.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),G.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Zu(e.data.value)),t}br(e,t,s){return G.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return G.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Kf{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=o}static As(e,t){let s=Le(),o=Le();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Kf(e,t.fromCache,s,o)}}class eC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class tC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return KT()?8:kA(Ht())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.ys(e,t).next((h=>{l.result=h})).next((()=>{if(!l.result)return this.ws(e,t,o,s).next((h=>{l.result=h}))})).next((()=>{if(l.result)return;const h=new eC;return this.Ss(e,t,h).next((f=>{if(l.result=f,this.Vs)return this.bs(e,t,h,f.size)}))})).next((()=>l.result))}bs(e,t,s,o){return s.documentReadCount<this.fs?(yo()<=Oe.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",_o(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),G.resolve()):(yo()<=Oe.DEBUG&&ue("QueryEngine","Query:",_o(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(yo()<=Oe.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",_o(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,lr(t))):G.resolve())}ys(e,t){if(by(t))return G.resolve(null);let s=lr(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=of(t,null,"F"),s=lr(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const h=Le(...l);return this.ps.getDocuments(e,h).next((f=>this.indexManager.getMinOffset(e,s).next((g=>{const y=this.Ds(t,f);return this.Cs(t,y,h,g.readTime)?this.ys(e,of(t,null,"F")):this.vs(e,y,t,g)}))))})))))}ws(e,t,s,o){return by(t)||o.isEqual(Ee.min())?G.resolve(null):this.ps.getDocuments(e,s).next((l=>{const h=this.Ds(t,l);return this.Cs(t,h,s,o)?G.resolve(null):(yo()<=Oe.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),_o(t)),this.vs(e,h,t,SA(o,rl)).next((f=>f)))}))}Ds(e,t){let s=new It(Yv(e));return t.forEach(((o,l)=>{bc(e,l)&&(s=s.add(l))})),s}Cs(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,s){return yo()<=Oe.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",_o(t)),this.ps.getDocumentsMatchingQuery(e,t,Vi.min(),s)}vs(e,t,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((l=>(t.forEach((h=>{l=l.insert(h.key,h)})),l)))}}const Qf="LocalStore",nC=3e8;class rC{constructor(e,t,s,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new st(Me),this.xs=new Rs((l=>jf(l)),Uf),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new WR(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function iC(r,e,t,s){return new rC(r,e,t,s)}async function Iw(r,e){const t=Ae(r);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((l=>(o=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const h=[],f=[];let g=Le();for(const y of o){h.push(y.batchId);for(const w of y.mutations)g=g.add(w.key)}for(const y of l){f.push(y.batchId);for(const w of y.mutations)g=g.add(w.key)}return t.localDocuments.getDocuments(s,g).next((y=>({Ls:y,removedBatchIds:h,addedBatchIds:f})))}))}))}function sC(r,e){const t=Ae(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,g,y,w){const E=y.batch,S=E.keys();let b=G.resolve();return S.forEach((H=>{b=b.next((()=>w.getEntry(g,H))).next((q=>{const j=y.docVersions.get(H);ze(j!==null,48541),q.version.compareTo(j)<0&&(E.applyToRemoteDocument(q,y),q.isValidDocument()&&(q.setReadTime(y.commitVersion),w.addEntry(q)))}))})),b.next((()=>f.mutationQueue.removeMutationBatch(g,E)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(f){let g=Le();for(let y=0;y<f.mutationResults.length;++y)f.mutationResults[y].transformResults.length>0&&(g=g.add(f.batch.mutations[y].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function Sw(r){const e=Ae(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function oC(r,e){const t=Ae(r),s=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const h=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const f=[];e.targetChanges.forEach(((w,E)=>{const S=o.get(E);if(!S)return;f.push(t.Pi.removeMatchingKeys(l,w.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(l,w.addedDocuments,E))));let b=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?b=b.withResumeToken(Ft.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):w.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(w.resumeToken,s)),o=o.insert(E,b),(function(q,j,K){return q.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=nC?!0:K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0})(S,b,w)&&f.push(t.Pi.updateTargetData(l,b))}));let g=jr(),y=Le();if(e.documentUpdates.forEach((w=>{e.resolvedLimboDocuments.has(w)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,w))})),f.push(aC(l,h,e.documentUpdates).next((w=>{g=w.ks,y=w.qs}))),!s.isEqual(Ee.min())){const w=t.Pi.getLastRemoteSnapshotVersion(l).next((E=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));f.push(w)}return G.waitFor(f).next((()=>h.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,y))).next((()=>g))})).then((l=>(t.Ms=o,l)))}function aC(r,e,t){let s=Le(),o=Le();return t.forEach((l=>s=s.add(l))),e.getEntries(r,s).next((l=>{let h=jr();return t.forEach(((f,g)=>{const y=l.get(f);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(f)),g.isNoDocument()&&g.version.isEqual(Ee.min())?(e.removeEntry(f,g.readTime),h=h.insert(f,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),h=h.insert(f,g)):ue(Qf,"Ignoring outdated watch update for ",f,". Current version:",y.version," Watch version:",g.version)})),{ks:h,qs:o}}))}function lC(r,e){const t=Ae(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Lf),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function uC(r,e){const t=Ae(r);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.Pi.getTargetData(s,e).next((l=>l?(o=l,G.resolve(o)):t.Pi.allocateTargetId(s).next((h=>(o=new Si(e,h,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function cf(r,e,t){const s=Ae(r),o=s.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(h=>s.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!Bo(h))throw h;ue(Qf,`Failed to update sequence numbers for target ${e}: ${h}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function Xy(r,e,t){const s=Ae(r);let o=Ee.min(),l=Le();return s.persistence.runTransaction("Execute query","readwrite",(h=>(function(g,y,w){const E=Ae(g),S=E.xs.get(w);return S!==void 0?G.resolve(E.Ms.get(S)):E.Pi.getTargetData(y,w)})(s,h,lr(e)).next((f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(h,f.targetId).next((g=>{l=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(h,e,t?o:Ee.min(),t?l:Le()))).next((f=>(cC(s,XA(e),f),{documents:f,Qs:l})))))}function cC(r,e,t){let s=r.Os.get(e)||Ee.min();t.forEach(((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),r.Os.set(e,s)}class Yy{constructor(){this.activeTargetIds=nR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class hC{constructor(){this.Mo=new Yy,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Yy,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class dC{Oo(e){}shutdown(){}}const Jy="ConnectivityMonitor";class Zy{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ue(Jy,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ue(Jy,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Gu=null;function hf(){return Gu===null?Gu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Gu++,"0x"+Gu.toString(16)}const Md="RestConnection",fC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class pC{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===pc?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,t,s,o,l){const h=hf(),f=this.zo(e,t.toUriEncodedString());ue(Md,`Sending RPC '${e}' ${h}:`,f,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,l);const{host:y}=new URL(f),w=bo(y);return this.Jo(e,f,g,s,w).then((E=>(ue(Md,`Received RPC '${e}' ${h}: `,E),E)),(E=>{throw ko(Md,`RPC '${e}' ${h} failed with error: `,E,"url: ",f,"request:",s),E}))}Ho(e,t,s,o,l,h){return this.Go(e,t,s,o,l)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Uo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),s&&s.headers.forEach(((o,l)=>e[l]=o))}zo(e,t){const s=fC[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}class mC{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const qt="WebChannelConnection";class gC extends pC{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,o,l){const h=hf();return new Promise(((f,g)=>{const y=new Sv;y.setWithCredentials(!0),y.listenOnce(Av.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Ju.NO_ERROR:const E=y.getResponseJson();ue(qt,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(E)),f(E);break;case Ju.TIMEOUT:ue(qt,`RPC '${e}' ${h} timed out`),g(new oe(W.DEADLINE_EXCEEDED,"Request time out"));break;case Ju.HTTP_ERROR:const S=y.getStatus();if(ue(qt,`RPC '${e}' ${h} failed with status:`,S,"response text:",y.getResponseText()),S>0){let b=y.getResponseJson();Array.isArray(b)&&(b=b[0]);const H=b?.error;if(H&&H.status&&H.message){const q=(function(K){const re=K.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(re)>=0?re:W.UNKNOWN})(H.status);g(new oe(q,H.message))}else g(new oe(W.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new oe(W.UNAVAILABLE,"Connection failed."));break;default:_e(9055,{l_:e,streamId:h,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{ue(qt,`RPC '${e}' ${h} completed.`)}}));const w=JSON.stringify(o);ue(qt,`RPC '${e}' ${h} sending request:`,o),y.send(t,"POST",w,s,15)}))}T_(e,t,s){const o=hf(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=Pv(),f=Cv(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const w=l.join("");ue(qt,`Creating RPC '${e}' stream ${o}: ${w}`,g);const E=h.createWebChannel(w,g);this.I_(E);let S=!1,b=!1;const H=new mC({Yo:j=>{b?ue(qt,`Not sending because RPC '${e}' stream ${o} is closed:`,j):(S||(ue(qt,`Opening RPC '${e}' stream ${o} transport.`),E.open(),S=!0),ue(qt,`RPC '${e}' stream ${o} sending:`,j),E.send(j))},Zo:()=>E.close()}),q=(j,K,re)=>{j.listen(K,(L=>{try{re(L)}catch(ee){setTimeout((()=>{throw ee}),0)}}))};return q(E,$a.EventType.OPEN,(()=>{b||(ue(qt,`RPC '${e}' stream ${o} transport opened.`),H.o_())})),q(E,$a.EventType.CLOSE,(()=>{b||(b=!0,ue(qt,`RPC '${e}' stream ${o} transport closed`),H.a_(),this.E_(E))})),q(E,$a.EventType.ERROR,(j=>{b||(b=!0,ko(qt,`RPC '${e}' stream ${o} transport errored. Name:`,j.name,"Message:",j.message),H.a_(new oe(W.UNAVAILABLE,"The operation could not be completed")))})),q(E,$a.EventType.MESSAGE,(j=>{if(!b){const K=j.data[0];ze(!!K,16349);const re=K,L=re?.error||re[0]?.error;if(L){ue(qt,`RPC '${e}' stream ${o} received error:`,L);const ee=L.status;let ie=(function(I){const P=_t[I];if(P!==void 0)return cw(P)})(ee),J=L.message;ie===void 0&&(ie=W.INTERNAL,J="Unknown error status: "+ee+" with message "+L.message),b=!0,H.a_(new oe(ie,J)),E.close()}else ue(qt,`RPC '${e}' stream ${o} received:`,K),H.u_(K)}})),q(f,Rv.STAT_EVENT,(j=>{j.stat===Jd.PROXY?ue(qt,`RPC '${e}' stream ${o} detected buffering proxy`):j.stat===Jd.NOPROXY&&ue(qt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{H.__()}),0),H}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Ld(){return typeof document<"u"?document:null}function Bc(r){return new wR(r,!0)}class Xf{constructor(e,t,s=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-s);o>0&&ue("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const e_="PersistentStream";class Aw{constructor(e,t,s,o,l,h,f,g){this.Mi=e,this.S_=s,this.b_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Xf(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===W.RESOURCE_EXHAUSTED?(br(t.toString()),br("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===t&&this.G_(s,o)}),(s=>{e((()=>{const o=new oe(W.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ue(e_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ue(e_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class yC extends Aw{constructor(e,t,s,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,h),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=SR(this.serializer,e),s=(function(l){if(!("targetChange"in l))return Ee.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Ee.min():h.readTime?mn(h.readTime):Ee.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=uf(this.serializer),t.addTarget=(function(l,h){let f;const g=h.target;if(f=rf(g)?{documents:RR(l,g)}:{query:CR(l,g).ft},f.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){f.resumeToken=fw(l,h.resumeToken);const y=af(l,h.expectedCount);y!==null&&(f.expectedCount=y)}else if(h.snapshotVersion.compareTo(Ee.min())>0){f.readTime=vc(l,h.snapshotVersion.toTimestamp());const y=af(l,h.expectedCount);y!==null&&(f.expectedCount=y)}return f})(this.serializer,e);const s=kR(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=uf(this.serializer),t.removeTarget=e,this.q_(t)}}class _C extends Aw{constructor(e,t,s,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,h),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ze(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ze(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ze(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=AR(e.writeResults,e.commitTime),s=mn(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=uf(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>yw(this.serializer,s)))};this.q_(t)}}class vC{}class wC extends vC{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new oe(W.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Go(e,lf(t,s),o,l,h))).catch((l=>{throw l.name==="FirebaseError"?(l.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new oe(W.UNKNOWN,l.toString())}))}Ho(e,t,s,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,f])=>this.connection.Ho(e,lf(t,s),o,h,f,l))).catch((h=>{throw h.name==="FirebaseError"?(h.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new oe(W.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class EC{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(br(t),this.aa=!1):ue("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Is="RemoteStore";class TC{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((h=>{s.enqueueAndForget((async()=>{Cs(this)&&(ue(Is,"Restarting streams for network reachability change."),await(async function(g){const y=Ae(g);y.Ea.add(4),await El(y),y.Ra.set("Unknown"),y.Ea.delete(4),await $c(y)})(this))}))})),this.Ra=new EC(s,o)}}async function $c(r){if(Cs(r))for(const e of r.da)await e(!0)}async function El(r){for(const e of r.da)await e(!1)}function Rw(r,e){const t=Ae(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),ep(t)?Zf(t):$o(t).O_()&&Jf(t,e))}function Yf(r,e){const t=Ae(r),s=$o(t);t.Ia.delete(e),s.O_()&&Cw(t,e),t.Ia.size===0&&(s.O_()?s.L_():Cs(t)&&t.Ra.set("Unknown"))}function Jf(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}$o(r).Y_(e)}function Cw(r,e){r.Va.Ue(e),$o(r).Z_(e)}function Zf(r){r.Va=new gR({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),$o(r).start(),r.Ra.ua()}function ep(r){return Cs(r)&&!$o(r).x_()&&r.Ia.size>0}function Cs(r){return Ae(r).Ea.size===0}function Pw(r){r.Va=void 0}async function IC(r){r.Ra.set("Online")}async function SC(r){r.Ia.forEach(((e,t)=>{Jf(r,e)}))}async function AC(r,e){Pw(r),ep(r)?(r.Ra.ha(e),Zf(r)):r.Ra.set("Unknown")}async function RC(r,e,t){if(r.Ra.set("Online"),e instanceof dw&&e.state===2&&e.cause)try{await(async function(o,l){const h=l.cause;for(const f of l.targetIds)o.Ia.has(f)&&(await o.remoteSyncer.rejectListen(f,h),o.Ia.delete(f),o.Va.removeTarget(f))})(r,e)}catch(s){ue(Is,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Tc(r,s)}else if(e instanceof nc?r.Va.Ze(e):e instanceof hw?r.Va.st(e):r.Va.tt(e),!t.isEqual(Ee.min()))try{const s=await Sw(r.localStore);t.compareTo(s)>=0&&await(function(l,h){const f=l.Va.Tt(h);return f.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const w=l.Ia.get(y);w&&l.Ia.set(y,w.withResumeToken(g.resumeToken,h))}})),f.targetMismatches.forEach(((g,y)=>{const w=l.Ia.get(g);if(!w)return;l.Ia.set(g,w.withResumeToken(Ft.EMPTY_BYTE_STRING,w.snapshotVersion)),Cw(l,g);const E=new Si(w.target,g,y,w.sequenceNumber);Jf(l,E)})),l.remoteSyncer.applyRemoteEvent(f)})(r,t)}catch(s){ue(Is,"Failed to raise snapshot:",s),await Tc(r,s)}}async function Tc(r,e,t){if(!Bo(e))throw e;r.Ea.add(1),await El(r),r.Ra.set("Offline"),t||(t=()=>Sw(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ue(Is,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await $c(r)}))}function kw(r,e){return e().catch((t=>Tc(r,t,e)))}async function qc(r){const e=Ae(r),t=bi(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Lf;for(;CC(e);)try{const o=await lC(e.localStore,s);if(o===null){e.Ta.length===0&&t.L_();break}s=o.batchId,PC(e,o)}catch(o){await Tc(e,o)}Nw(e)&&xw(e)}function CC(r){return Cs(r)&&r.Ta.length<10}function PC(r,e){r.Ta.push(e);const t=bi(r);t.O_()&&t.X_&&t.ea(e.mutations)}function Nw(r){return Cs(r)&&!bi(r).x_()&&r.Ta.length>0}function xw(r){bi(r).start()}async function kC(r){bi(r).ra()}async function NC(r){const e=bi(r);for(const t of r.Ta)e.ea(t.mutations)}async function xC(r,e,t){const s=r.Ta.shift(),o=$f.from(s,e,t);await kw(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await qc(r)}async function DC(r,e){e&&bi(r).X_&&await(async function(s,o){if((function(h){return uw(h)&&h!==W.ABORTED})(o.code)){const l=s.Ta.shift();bi(s).B_(),await kw(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o))),await qc(s)}})(r,e),Nw(r)&&xw(r)}async function t_(r,e){const t=Ae(r);t.asyncQueue.verifyOperationInProgress(),ue(Is,"RemoteStore received new credentials");const s=Cs(t);t.Ea.add(3),await El(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await $c(t)}async function VC(r,e){const t=Ae(r);e?(t.Ea.delete(2),await $c(t)):e||(t.Ea.add(2),await El(t),t.Ra.set("Unknown"))}function $o(r){return r.ma||(r.ma=(function(t,s,o){const l=Ae(t);return l.sa(),new yC(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Xo:IC.bind(null,r),t_:SC.bind(null,r),r_:AC.bind(null,r),H_:RC.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),ep(r)?Zf(r):r.Ra.set("Unknown")):(await r.ma.stop(),Pw(r))}))),r.ma}function bi(r){return r.fa||(r.fa=(function(t,s,o){const l=Ae(t);return l.sa(),new _C(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:kC.bind(null,r),r_:DC.bind(null,r),ta:NC.bind(null,r),na:xC.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await qc(r)):(await r.fa.stop(),r.Ta.length>0&&(ue(Is,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class tp{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new ar,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const h=Date.now()+s,f=new tp(e,t,h,o,l);return f.start(s),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new oe(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function np(r,e){if(br("AsyncQueue",`${e}: ${r}`),Bo(r))return new oe(W.UNAVAILABLE,`${e}: ${r}`);throw r}class Ao{static emptySet(e){return new Ao(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||ye.comparator(t.key,s.key):(t,s)=>ye.comparator(t.key,s.key),this.keyedMap=qa(),this.sortedSet=new st(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ao)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Ao;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class n_{constructor(){this.ga=new st(ye.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):_e(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class Oo{constructor(e,t,s,o,l,h,f,g,y){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,t,s,o,l){const h=[];return t.forEach((f=>{h.push({type:0,doc:f})})),new Oo(e,t,Ao.emptySet(t),h,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}class OC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class MC{constructor(){this.queries=r_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const o=Ae(t),l=o.queries;o.queries=r_(),l.forEach(((h,f)=>{for(const g of f.Sa)g.onError(s)}))})(this,new oe(W.ABORTED,"Firestore shutting down"))}}function r_(){return new Rs((r=>Xv(r)),Lc)}async function Dw(r,e){const t=Ae(r);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.ba()&&e.Da()&&(s=2):(l=new OC,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const f=np(h,`Initialization of query '${_o(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&rp(t)}async function Vw(r,e){const t=Ae(r),s=e.query;let o=3;const l=t.queries.get(s);if(l){const h=l.Sa.indexOf(e);h>=0&&(l.Sa.splice(h,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function LC(r,e){const t=Ae(r);let s=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const f of h.Sa)f.Fa(o)&&(s=!0);h.wa=o}}s&&rp(t)}function bC(r,e,t){const s=Ae(r),o=s.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);s.queries.delete(e)}function rp(r){r.Ca.forEach((e=>{e.next()}))}var df,i_;(i_=df||(df={})).Ma="default",i_.Cache="cache";class Ow{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Oo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Oo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==df.Cache}}class Mw{constructor(e){this.key=e}}class Lw{constructor(e){this.key=e}}class FC{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Le(),this.mutatedKeys=Le(),this.eu=Yv(e),this.tu=new Ao(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new n_,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,f=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((w,E)=>{const S=o.get(w),b=bc(this.query,E)?E:null,H=!!S&&this.mutatedKeys.has(S.key),q=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let j=!1;S&&b?S.data.isEqual(b.data)?H!==q&&(s.track({type:3,doc:b}),j=!0):this.su(S,b)||(s.track({type:2,doc:b}),j=!0,(g&&this.eu(b,g)>0||y&&this.eu(b,y)<0)&&(f=!0)):!S&&b?(s.track({type:0,doc:b}),j=!0):S&&!b&&(s.track({type:1,doc:S}),j=!0,(g||y)&&(f=!0)),j&&(b?(h=h.add(b),l=q?l.add(w):l.delete(w)):(h=h.delete(w),l=l.delete(w)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const w=this.query.limitType==="F"?h.last():h.first();h=h.delete(w.key),l=l.delete(w.key),s.track({type:1,doc:w})}return{tu:h,iu:s,Cs:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((w,E)=>(function(b,H){const q=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e(20277,{Rt:j})}};return q(b)-q(H)})(w.type,E.type)||this.eu(w.doc,E.doc))),this.ou(s),o=o??!1;const f=t&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,y=g!==this.Za;return this.Za=g,h.length!==0||y?{snapshot:new Oo(this.query,e.tu,l,h,e.mutatedKeys,g===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new n_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Le(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new Lw(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new Mw(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=Le();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Oo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ip="SyncEngine";class jC{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class UC{constructor(e){this.key=e,this.hu=!1}}class zC{constructor(e,t,s,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new Rs((f=>Xv(f)),Lc),this.Iu=new Map,this.Eu=new Set,this.du=new st(ye.comparator),this.Au=new Map,this.Ru=new Hf,this.Vu={},this.mu=new Map,this.fu=Vo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function BC(r,e,t=!0){const s=Bw(r);let o;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await bw(s,e,t,!0),o}async function $C(r,e){const t=Bw(r);await bw(t,e,!0,!1)}async function bw(r,e,t,s){const o=await uC(r.localStore,lr(e)),l=o.targetId,h=r.sharedClientState.addLocalQueryTarget(l,t);let f;return s&&(f=await qC(r,e,l,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&Rw(r.remoteStore,o),f}async function qC(r,e,t,s,o){r.pu=(E,S,b)=>(async function(q,j,K,re){let L=j.view.ru(K);L.Cs&&(L=await Xy(q.localStore,j.query,!1).then((({documents:C})=>j.view.ru(C,L))));const ee=re&&re.targetChanges.get(j.targetId),ie=re&&re.targetMismatches.get(j.targetId)!=null,J=j.view.applyChanges(L,q.isPrimaryClient,ee,ie);return o_(q,j.targetId,J.au),J.snapshot})(r,E,S,b);const l=await Xy(r.localStore,e,!0),h=new FC(e,l.Qs),f=h.ru(l.documents),g=wl.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",o),y=h.applyChanges(f,r.isPrimaryClient,g);o_(r,t,y.au);const w=new jC(e,t,h);return r.Tu.set(e,w),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),y.snapshot}async function WC(r,e,t){const s=Ae(r),o=s.Tu.get(e),l=s.Iu.get(o.targetId);if(l.length>1)return s.Iu.set(o.targetId,l.filter((h=>!Lc(h,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await cf(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&Yf(s.remoteStore,o.targetId),ff(s,o.targetId)})).catch(zo)):(ff(s,o.targetId),await cf(s.localStore,o.targetId,!0))}async function HC(r,e){const t=Ae(r),s=t.Tu.get(e),o=t.Iu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Yf(t.remoteStore,s.targetId))}async function GC(r,e,t){const s=eP(r);try{const o=await(function(h,f){const g=Ae(h),y=tt.now(),w=f.reduce(((b,H)=>b.add(H.key)),Le());let E,S;return g.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let H=jr(),q=Le();return g.Ns.getEntries(b,w).next((j=>{H=j,H.forEach(((K,re)=>{re.isValidDocument()||(q=q.add(K))}))})).next((()=>g.localDocuments.getOverlayedDocuments(b,H))).next((j=>{E=j;const K=[];for(const re of f){const L=cR(re,E.get(re.key).overlayedDocument);L!=null&&K.push(new zi(re.key,L,Bv(L.value.mapValue),bt.exists(!0)))}return g.mutationQueue.addMutationBatch(b,y,K,f)})).next((j=>{S=j;const K=j.applyToLocalDocumentSet(E,q);return g.documentOverlayCache.saveOverlays(b,j.batchId,K)}))})).then((()=>({batchId:S.batchId,changes:Zv(E)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(h,f,g){let y=h.Vu[h.currentUser.toKey()];y||(y=new st(Me)),y=y.insert(f,g),h.Vu[h.currentUser.toKey()]=y})(s,o.batchId,t),await Tl(s,o.changes),await qc(s.remoteStore)}catch(o){const l=np(o,"Failed to persist write");t.reject(l)}}async function Fw(r,e){const t=Ae(r);try{const s=await oC(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const h=t.Au.get(l);h&&(ze(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?ze(h.hu,14607):o.removedDocuments.size>0&&(ze(h.hu,42227),h.hu=!1))})),await Tl(t,s,e)}catch(s){await zo(s)}}function s_(r,e,t){const s=Ae(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Tu.forEach(((l,h)=>{const f=h.view.va(e);f.snapshot&&o.push(f.snapshot)})),(function(h,f){const g=Ae(h);g.onlineState=f;let y=!1;g.queries.forEach(((w,E)=>{for(const S of E.Sa)S.va(f)&&(y=!0)})),y&&rp(g)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function KC(r,e,t){const s=Ae(r);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Au.get(e),l=o&&o.key;if(l){let h=new st(ye.comparator);h=h.insert(l,Nt.newNoDocument(l,Ee.min()));const f=Le().add(l),g=new zc(Ee.min(),new Map,new st(Me),h,f);await Fw(s,g),s.du=s.du.remove(l),s.Au.delete(e),sp(s)}else await cf(s.localStore,e,!1).then((()=>ff(s,e,t))).catch(zo)}async function QC(r,e){const t=Ae(r),s=e.batch.batchId;try{const o=await sC(t.localStore,e);Uw(t,s,null),jw(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Tl(t,o)}catch(o){await zo(o)}}async function XC(r,e,t){const s=Ae(r);try{const o=await(function(h,f){const g=Ae(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let w;return g.mutationQueue.lookupMutationBatch(y,f).next((E=>(ze(E!==null,37113),w=E.keys(),g.mutationQueue.removeMutationBatch(y,E)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,w,f))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,w))).next((()=>g.localDocuments.getDocuments(y,w)))}))})(s.localStore,e);Uw(s,e,t),jw(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Tl(s,o)}catch(o){await zo(o)}}function jw(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function Uw(r,e,t){const s=Ae(r);let o=s.Vu[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function ff(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),t&&r.Pu.yu(s,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((s=>{r.Ru.containsKey(s)||zw(r,s)}))}function zw(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(Yf(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),sp(r))}function o_(r,e,t){for(const s of t)s instanceof Mw?(r.Ru.addReference(s.key,e),YC(r,s)):s instanceof Lw?(ue(ip,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||zw(r,s.key)):_e(19791,{wu:s})}function YC(r,e){const t=e.key,s=t.path.canonicalString();r.du.get(t)||r.Eu.has(s)||(ue(ip,"New document in limbo: "+t),r.Eu.add(s),sp(r))}function sp(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new ye(Qe.fromString(e)),s=r.fu.next();r.Au.set(s,new UC(t)),r.du=r.du.insert(t,s),Rw(r.remoteStore,new Si(lr(zf(t.path)),s,"TargetPurposeLimboResolution",Oc.ce))}}async function Tl(r,e,t){const s=Ae(r),o=[],l=[],h=[];s.Tu.isEmpty()||(s.Tu.forEach(((f,g)=>{h.push(s.pu(g,e,t).then((y=>{if((y||t)&&s.isPrimaryClient){const w=y?!y.fromCache:t?.targetChanges.get(g.targetId)?.current;s.sharedClientState.updateQueryState(g.targetId,w?"current":"not-current")}if(y){o.push(y);const w=Kf.As(g.targetId,y);l.push(w)}})))})),await Promise.all(h),s.Pu.H_(o),await(async function(g,y){const w=Ae(g);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>G.forEach(y,(S=>G.forEach(S.Es,(b=>w.persistence.referenceDelegate.addReference(E,S.targetId,b))).next((()=>G.forEach(S.ds,(b=>w.persistence.referenceDelegate.removeReference(E,S.targetId,b)))))))))}catch(E){if(!Bo(E))throw E;ue(Qf,"Failed to update sequence numbers: "+E)}for(const E of y){const S=E.targetId;if(!E.fromCache){const b=w.Ms.get(S),H=b.snapshotVersion,q=b.withLastLimboFreeSnapshotVersion(H);w.Ms=w.Ms.insert(S,q)}}})(s.localStore,l))}async function JC(r,e){const t=Ae(r);if(!t.currentUser.isEqual(e)){ue(ip,"User change. New user:",e.toKey());const s=await Iw(t.localStore,e);t.currentUser=e,(function(l,h){l.mu.forEach((f=>{f.forEach((g=>{g.reject(new oe(W.CANCELLED,h))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Tl(t,s.Ls)}}function ZC(r,e){const t=Ae(r),s=t.Au.get(e);if(s&&s.hu)return Le().add(s.key);{let o=Le();const l=t.Iu.get(e);if(!l)return o;for(const h of l){const f=t.Tu.get(h);o=o.unionWith(f.view.nu)}return o}}function Bw(r){const e=Ae(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=Fw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ZC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=KC.bind(null,e),e.Pu.H_=LC.bind(null,e.eventManager),e.Pu.yu=bC.bind(null,e.eventManager),e}function eP(r){const e=Ae(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=QC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=XC.bind(null,e),e}class Ic{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Bc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return iC(this.persistence,new tC,e.initialUser,this.serializer)}Cu(e){return new Tw(Gf.mi,this.serializer)}Du(e){return new hC}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ic.provider={build:()=>new Ic};class tP extends Ic{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ze(this.persistence.referenceDelegate instanceof Ec,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new UR(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?nn.withCacheSize(this.cacheSizeBytes):nn.DEFAULT;return new Tw((s=>Ec.mi(s,t)),this.serializer)}}class pf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>s_(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=JC.bind(null,this.syncEngine),await VC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new MC})()}createDatastore(e){const t=Bc(e.databaseInfo.databaseId),s=(function(l){return new gC(l)})(e.databaseInfo);return(function(l,h,f,g){return new wC(l,h,f,g)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,l,h,f){return new TC(s,o,l,h,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>s_(this.syncEngine,t,0)),(function(){return Zy.v()?new Zy:new dC})())}createSyncEngine(e,t){return(function(o,l,h,f,g,y,w){const E=new zC(o,l,h,f,g,y);return w&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const s=Ae(t);ue(Is,"RemoteStore shutting down."),s.Ea.add(5),await El(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}pf.provider={build:()=>new pf};class $w{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):br("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class nP{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new oe(W.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(o,l){const h=Ae(o),f={documents:l.map((E=>wc(h.serializer,E)))},g=await h.Ho("BatchGetDocuments",h.serializer.databaseId,Qe.emptyPath(),f,l.length),y=new Map;g.forEach((E=>{const S=IR(h.serializer,E);y.set(S.key.toString(),S)}));const w=[];return l.forEach((E=>{const S=y.get(E.toString());ze(!!S,55234,{key:E}),w.push(S)})),w})(this.datastore,e);return t.forEach((s=>this.recordVersion(s))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new Uc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,s)=>{const o=ye.fromPath(s);this.mutations.push(new lw(o,this.precondition(o)))})),await(async function(s,o){const l=Ae(s),h={writes:o.map((f=>yw(l.serializer,f)))};await l.Go("Commit",l.serializer.databaseId,Qe.emptyPath(),h)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw _e(50498,{Gu:e.constructor.name});t=Ee.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new oe(W.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ee.min())?bt.exists(!1):bt.updateTime(t):bt.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ee.min()))throw new oe(W.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return bt.updateTime(t)}return bt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class rP{constructor(e,t,s,o,l){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=o,this.deferred=l,this.zu=s.maxAttempts,this.M_=new Xf(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new nP(this.datastore),t=this.Hu(e);t&&t.then((s=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(s)})).catch((o=>{this.Yu(o)}))))})).catch((s=>{this.Yu(s)}))}))}Hu(e){try{const t=this.updateFunction(e);return!yl(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!uw(t)}return!1}}const Fi="FirestoreClient";class iP{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=Wt.UNAUTHENTICATED,this.clientId=Mf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async h=>{ue(Fi,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(s,(h=>(ue(Fi,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ar;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=np(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function bd(r,e){r.asyncQueue.verifyOperationInProgress(),ue(Fi,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener((async o=>{s.isEqual(o)||(await Iw(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function a_(r,e){r.asyncQueue.verifyOperationInProgress();const t=await sP(r);ue(Fi,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((s=>t_(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,o)=>t_(e.remoteStore,o))),r._onlineComponents=e}async function sP(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ue(Fi,"Using user provided OfflineComponentProvider");try{await bd(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===W.FAILED_PRECONDITION||o.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;ko("Error using user provided cache. Falling back to memory cache: "+t),await bd(r,new Ic)}}else ue(Fi,"Using default OfflineComponentProvider"),await bd(r,new tP(void 0));return r._offlineComponents}async function op(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ue(Fi,"Using user provided OnlineComponentProvider"),await a_(r,r._uninitializedComponentsProvider._online)):(ue(Fi,"Using default OnlineComponentProvider"),await a_(r,new pf))),r._onlineComponents}function oP(r){return op(r).then((e=>e.syncEngine))}function aP(r){return op(r).then((e=>e.datastore))}async function qw(r){const e=await op(r),t=e.eventManager;return t.onListen=BC.bind(null,e.syncEngine),t.onUnlisten=WC.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=$C.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=HC.bind(null,e.syncEngine),t}function lP(r,e,t={}){const s=new ar;return r.asyncQueue.enqueueAndForget((async()=>(function(l,h,f,g,y){const w=new $w({next:S=>{w.Nu(),h.enqueueAndForget((()=>Vw(l,E)));const b=S.docs.has(f);!b&&S.fromCache?y.reject(new oe(W.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&S.fromCache&&g&&g.source==="server"?y.reject(new oe(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(S)},error:S=>y.reject(S)}),E=new Ow(zf(f.path),w,{includeMetadataChanges:!0,qa:!0});return Dw(l,E)})(await qw(r),r.asyncQueue,e,t,s))),s.promise}function uP(r,e,t={}){const s=new ar;return r.asyncQueue.enqueueAndForget((async()=>(function(l,h,f,g,y){const w=new $w({next:S=>{w.Nu(),h.enqueueAndForget((()=>Vw(l,E))),S.fromCache&&g.source==="server"?y.reject(new oe(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(S)},error:S=>y.reject(S)}),E=new Ow(f,w,{includeMetadataChanges:!0,qa:!0});return Dw(l,E)})(await qw(r),r.asyncQueue,e,t,s))),s.promise}function Ww(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const l_=new Map;const Hw="firestore.googleapis.com",u_=!0;class c_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new oe(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Hw,this.ssl=u_}else this.host=e.host,this.ssl=e.ssl??u_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Ew;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<FR)throw new oe(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}IA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ww(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new oe(W.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new oe(W.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new oe(W.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wc{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new c_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new oe(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new oe(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new c_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new fA;switch(s.type){case"firstParty":return new yA(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new oe(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=l_.get(t);s&&(ue("ComponentProvider","Removing Datastore"),l_.delete(t),s.terminate())})(this),Promise.resolve()}}function cP(r,e,t,s={}){r=Fr(r,Wc);const o=bo(e),l=r._getSettings(),h={...l,emulatorOptions:r._getEmulatorOptions()},f=`${e}:${t}`;o&&(j_(`https://${f}`),U_("Firestore",!0)),l.host!==Hw&&l.host!==f&&ko("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:f,ssl:o,emulatorOptions:s};if(!vs(g,h)&&(r._setSettings(g),s.mockUserToken)){let y,w;if(typeof s.mockUserToken=="string")y=s.mockUserToken,w=Wt.MOCK_USER;else{y=jT(s.mockUserToken,r._app?.options.projectId);const E=s.mockUserToken.sub||s.mockUserToken.user_id;if(!E)throw new oe(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new Wt(E)}r._authCredentials=new pA(new Nv(y,w))}}class qo{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new qo(this.firestore,e,this._query)}}class ft{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ft(this.firestore,e,this._key)}toJSON(){return{type:ft._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(gl(t,ft._jsonSchema))return new ft(e,s||null,new ye(Qe.fromString(t.referencePath)))}}ft._jsonSchemaVersion="firestore/documentReference/1.0",ft._jsonSchema={type:wt("string",ft._jsonSchemaVersion),referencePath:wt("string")};class xi extends qo{constructor(e,t,s){super(e,t,zf(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ft(this.firestore,null,new ye(e))}withConverter(e){return new xi(this.firestore,e,this._path)}}function gn(r,e,...t){if(r=St(r),xv("collection","path",e),r instanceof Wc){const s=Qe.fromString(e,...t);return Iy(s),new xi(r,null,s)}{if(!(r instanceof ft||r instanceof xi))throw new oe(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Qe.fromString(e,...t));return Iy(s),new xi(r.firestore,null,s)}}function dt(r,e,...t){if(r=St(r),arguments.length===1&&(e=Mf.newId()),xv("doc","path",e),r instanceof Wc){const s=Qe.fromString(e,...t);return Ty(s),new ft(r,null,new ye(s))}{if(!(r instanceof ft||r instanceof xi))throw new oe(W.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Qe.fromString(e,...t));return Ty(s),new ft(r.firestore,r instanceof xi?r.converter:null,new ye(s))}}const h_="AsyncQueue";class d_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Xf(this,"async_queue_retry"),this._c=()=>{const s=Ld();s&&ue(h_,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=Ld();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Ld();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ar;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Bo(e))throw e;ue(h_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,br("INTERNAL UNHANDLED ERROR: ",f_(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=tp.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&_e(47125,{Pc:f_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function f_(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class Wo extends Wc{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new d_,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new d_(e),this._firestoreClient=void 0,await e}}}function hP(r,e){const t=typeof r=="object"?r:q_(),s=typeof r=="string"?r:pc,o=If(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=bT("firestore");l&&cP(o,...l)}return o}function Il(r){if(r._terminated)throw new oe(W.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||dP(r),r._firestoreClient}function dP(r){const e=r._freezeSettings(),t=(function(o,l,h,f){return new OA(o,l,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,Ww(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new iP(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(o){const l=o?._online.build();return{_offline:o?._offline.build(l),_online:l}})(r._componentsProvider))}class fn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fn(Ft.fromBase64String(e))}catch(t){throw new oe(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new fn(Ft.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:fn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(gl(e,fn._jsonSchema))return fn.fromBase64String(e.bytes)}}fn._jsonSchemaVersion="firestore/bytes/1.0",fn._jsonSchema={type:wt("string",fn._jsonSchemaVersion),bytes:wt("string")};class Sl{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new oe(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Hc{constructor(e){this._methodName=e}}class ur{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new oe(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new oe(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Me(this._lat,e._lat)||Me(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ur._jsonSchemaVersion}}static fromJSON(e){if(gl(e,ur._jsonSchema))return new ur(e.latitude,e.longitude)}}ur._jsonSchemaVersion="firestore/geoPoint/1.0",ur._jsonSchema={type:wt("string",ur._jsonSchemaVersion),latitude:wt("number"),longitude:wt("number")};class cr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:cr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(gl(e,cr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new cr(e.vectorValues);throw new oe(W.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}cr._jsonSchemaVersion="firestore/vectorValue/1.0",cr._jsonSchema={type:wt("string",cr._jsonSchemaVersion),vectorValues:wt("object")};const fP=/^__.*__$/;class pP{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new zi(e,this.data,this.fieldMask,t,this.fieldTransforms):new vl(e,this.data,t,this.fieldTransforms)}}class Gw{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new zi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Kw(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e(40011,{Ac:r})}}class ap{constructor(e,t,s,o,l,h){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new ap({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Sc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Kw(this.Ac)&&fP.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class mP{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Bc(e)}Cc(e,t,s,o=!1){return new ap({Ac:e,methodName:t,Dc:s,path:Lt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Gc(r){const e=r._freezeSettings(),t=Bc(r._databaseId);return new mP(r._databaseId,!!e.ignoreUndefinedProperties,t)}function lp(r,e,t,s,o,l={}){const h=r.Cc(l.merge||l.mergeFields?2:0,e,t,o);cp("Data must be an object, but it was:",h,s);const f=Yw(s,h);let g,y;if(l.merge)g=new pn(h.fieldMask),y=h.fieldTransforms;else if(l.mergeFields){const w=[];for(const E of l.mergeFields){const S=mf(e,E,t);if(!h.contains(S))throw new oe(W.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);Zw(w,S)||w.push(S)}g=new pn(w),y=h.fieldTransforms.filter((E=>g.covers(E.field)))}else g=null,y=h.fieldTransforms;return new pP(new Qt(f),g,y)}class Kc extends Hc{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Kc}}class up extends Hc{_toFieldTransform(e){return new oR(e.path,new al)}isEqual(e){return e instanceof up}}function Qw(r,e,t,s){const o=r.Cc(1,e,t);cp("Data must be an object, but it was:",o,s);const l=[],h=Qt.empty();Ui(s,((g,y)=>{const w=hp(e,g,t);y=St(y);const E=o.yc(w);if(y instanceof Kc)l.push(w);else{const S=Al(y,E);S!=null&&(l.push(w),h.set(w,S))}}));const f=new pn(l);return new Gw(h,f,o.fieldTransforms)}function Xw(r,e,t,s,o,l){const h=r.Cc(1,e,t),f=[mf(e,s,t)],g=[o];if(l.length%2!=0)throw new oe(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)f.push(mf(e,l[S])),g.push(l[S+1]);const y=[],w=Qt.empty();for(let S=f.length-1;S>=0;--S)if(!Zw(y,f[S])){const b=f[S];let H=g[S];H=St(H);const q=h.yc(b);if(H instanceof Kc)y.push(b);else{const j=Al(H,q);j!=null&&(y.push(b),w.set(b,j))}}const E=new pn(y);return new Gw(w,E,h.fieldTransforms)}function gP(r,e,t,s=!1){return Al(t,r.Cc(s?4:3,e))}function Al(r,e){if(Jw(r=St(r)))return cp("Unsupported field value:",e,r),Yw(r,e);if(r instanceof Hc)return(function(s,o){if(!Kw(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const l=[];let h=0;for(const f of s){let g=Al(f,o.wc(h));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),h++}return{arrayValue:{values:l}}})(r,e)}return(function(s,o){if((s=St(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return rR(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=tt.fromDate(s);return{timestampValue:vc(o.serializer,l)}}if(s instanceof tt){const l=new tt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:vc(o.serializer,l)}}if(s instanceof ur)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof fn)return{bytesValue:fw(o.serializer,s._byteString)};if(s instanceof ft){const l=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(l))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Wf(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof cr)return(function(h,f){return{mapValue:{fields:{[Uv]:{stringValue:zv},[mc]:{arrayValue:{values:h.toArray().map((y=>{if(typeof y!="number")throw f.Sc("VectorValues must only contain numeric values.");return Bf(f.serializer,y)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${Vc(s)}`)})(r,e)}function Yw(r,e){const t={};return Ov(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ui(r,((s,o)=>{const l=Al(o,e.mc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function Jw(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof tt||r instanceof ur||r instanceof fn||r instanceof ft||r instanceof Hc||r instanceof cr)}function cp(r,e,t){if(!Jw(t)||!Dv(t)){const s=Vc(t);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function mf(r,e,t){if((e=St(e))instanceof Sl)return e._internalPath;if(typeof e=="string")return hp(r,e);throw Sc("Field path arguments must be of type string or ",r,!1,void 0,t)}const yP=new RegExp("[~\\*/\\[\\]]");function hp(r,e,t){if(e.search(yP)>=0)throw Sc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Sl(...e.split("."))._internalPath}catch{throw Sc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Sc(r,e,t,s,o){const l=s&&!s.isEmpty(),h=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(l||h)&&(g+=" (found",l&&(g+=` in field ${s}`),h&&(g+=` in document ${o}`),g+=")"),new oe(W.INVALID_ARGUMENT,f+r+g)}function Zw(r,e){return r.some((t=>t.isEqual(e)))}class Ac{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new ft(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new _P(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(dp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class _P extends Ac{data(){return super.data()}}function dp(r,e){return typeof e=="string"?hp(r,e):e instanceof Sl?e._internalPath:e._delegate._internalPath}function vP(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new oe(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fp{}class wP extends fp{}function Qc(r,e,...t){let s=[];e instanceof fp&&s.push(e),s=s.concat(t),(function(l){const h=l.filter((g=>g instanceof pp)).length,f=l.filter((g=>g instanceof Xc)).length;if(h>1||h>0&&f>0)throw new oe(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)r=o._apply(r);return r}class Xc extends wP{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Xc(e,t,s)}_apply(e){const t=this._parse(e);return eE(e._query,t),new qo(e.firestore,e.converter,sf(e._query,t))}_parse(e){const t=Gc(e.firestore);return(function(l,h,f,g,y,w,E){let S;if(y.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new oe(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){m_(E,w);const H=[];for(const q of E)H.push(p_(g,l,q));S={arrayValue:{values:H}}}else S=p_(g,l,E)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||m_(E,w),S=gP(f,h,E,w==="in"||w==="not-in");return vt.create(y,w,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Yc(r,e,t){const s=e,o=dp("where",r);return Xc._create(o,s,t)}class pp extends fp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new pp(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:Un.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let h=o;const f=l.getFlattenedFilters();for(const g of f)eE(h,g),h=sf(h,g)})(e._query,t),new qo(e.firestore,e.converter,sf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function p_(r,e,t){if(typeof(t=St(t))=="string"){if(t==="")throw new oe(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Qv(e)&&t.indexOf("/")!==-1)throw new oe(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Qe.fromString(t));if(!ye.isDocumentKey(s))throw new oe(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return xy(r,new ye(s))}if(t instanceof ft)return xy(r,t._key);throw new oe(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Vc(t)}.`)}function m_(r,e){if(!Array.isArray(r)||r.length===0)throw new oe(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function eE(r,e){const t=(function(o,l){for(const h of o)for(const f of h.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new oe(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new oe(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class tE{convertValue(e,t="none"){switch(Li(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Mi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw _e(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Ui(e,((o,l)=>{s[o]=this.convertValue(l,t)})),s}convertVectorValue(e){const t=e.fields?.[mc].arrayValue?.values?.map((s=>ht(s.doubleValue)));return new cr(t)}convertGeoPoint(e){return new ur(ht(e.latitude),ht(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Mc(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(il(e));default:return null}}convertTimestamp(e){const t=Oi(e);return new tt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Qe.fromString(e);ze(ww(s),9688,{name:e});const o=new sl(s.get(1),s.get(3)),l=new ye(s.popFirst(5));return o.isEqual(t)||br(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function mp(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}class EP extends tE{constructor(e){super(),this.firestore=e}convertBytes(e){return new fn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ft(this.firestore,null,t)}}class Eo{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Di extends Ac{constructor(e,t,s,o,l,h){super(e,t,s,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new rc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(dp("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(W.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Di._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Di._jsonSchemaVersion="firestore/documentSnapshot/1.0",Di._jsonSchema={type:wt("string",Di._jsonSchemaVersion),bundleSource:wt("string","DocumentSnapshot"),bundleName:wt("string"),bundle:wt("string")};class rc extends Di{data(e={}){return super.data(e)}}class Ro{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Eo(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new rc(this._firestore,this._userDataWriter,s.key,s,new Eo(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new oe(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((f=>{const g=new rc(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Eo(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const g=new rc(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Eo(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,w=-1;return f.type!==0&&(y=h.indexOf(f.doc.key),h=h.delete(f.doc.key)),f.type!==1&&(h=h.add(f.doc),w=h.indexOf(f.doc.key)),{type:TP(f.type),doc:g,oldIndex:y,newIndex:w}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(W.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ro._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Mf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function TP(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e(61501,{type:r})}}function Ss(r){r=Fr(r,ft);const e=Fr(r.firestore,Wo);return lP(Il(e),r._key).then((t=>IP(e,r,t)))}Ro._jsonSchemaVersion="firestore/querySnapshot/1.0",Ro._jsonSchema={type:wt("string",Ro._jsonSchemaVersion),bundleSource:wt("string","QuerySnapshot"),bundleName:wt("string"),bundle:wt("string")};class gp extends tE{constructor(e){super(),this.firestore=e}convertBytes(e){return new fn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ft(this.firestore,null,t)}}function Or(r){r=Fr(r,qo);const e=Fr(r.firestore,Wo),t=Il(e),s=new gp(e);return vP(r._query),uP(t,r._query).then((o=>new Ro(e,s,r,o)))}function Ho(r,e,t){r=Fr(r,ft);const s=Fr(r.firestore,Wo),o=mp(r.converter,e,t);return nE(s,[lp(Gc(s),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,bt.none())])}function nE(r,e){return(function(s,o){const l=new ar;return s.asyncQueue.enqueueAndForget((async()=>GC(await oP(s),o,l))),l.promise})(Il(r),e)}function IP(r,e,t){const s=t.docs.get(e._key),o=new gp(r);return new Di(r,o,e._key,s,new Eo(t.hasPendingWrites,t.fromCache),e.converter)}const SP={maxAttempts:5};class AP{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Gc(e)}set(e,t,s){this._verifyNotCommitted();const o=Ai(e,this._firestore),l=mp(o.converter,t,s),h=lp(this._dataReader,"WriteBatch.set",o._key,l,o.converter!==null,s);return this._mutations.push(h.toMutation(o._key,bt.none())),this}update(e,t,s,...o){this._verifyNotCommitted();const l=Ai(e,this._firestore);let h;return h=typeof(t=St(t))=="string"||t instanceof Sl?Xw(this._dataReader,"WriteBatch.update",l._key,t,s,o):Qw(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(h.toMutation(l._key,bt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ai(e,this._firestore);return this._mutations=this._mutations.concat(new Uc(t._key,bt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new oe(W.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ai(r,e){if((r=St(r)).firestore!==e)throw new oe(W.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}class RP{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Gc(e)}get(e){const t=Ai(e,this._firestore),s=new EP(this._firestore);return this._transaction.lookup([t._key]).then((o=>{if(!o||o.length!==1)return _e(24041);const l=o[0];if(l.isFoundDocument())return new Ac(this._firestore,s,l.key,l,t.converter);if(l.isNoDocument())return new Ac(this._firestore,s,t._key,null,t.converter);throw _e(18433,{doc:l})}))}set(e,t,s){const o=Ai(e,this._firestore),l=mp(o.converter,t,s),h=lp(this._dataReader,"Transaction.set",o._key,l,o.converter!==null,s);return this._transaction.set(o._key,h),this}update(e,t,s,...o){const l=Ai(e,this._firestore);let h;return h=typeof(t=St(t))=="string"||t instanceof Sl?Xw(this._dataReader,"Transaction.update",l._key,t,s,o):Qw(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,h),this}delete(e){const t=Ai(e,this._firestore);return this._transaction.delete(t._key),this}}class CP extends RP{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ai(e,this._firestore),s=new gp(this._firestore);return super.get(e).then((o=>new Di(this._firestore,s,t._key,o._document,new Eo(!1,!1),t.converter)))}}function PP(r,e,t){r=Fr(r,Wo);const s={...SP,...t};return(function(l){if(l.maxAttempts<1)throw new oe(W.INVALID_ARGUMENT,"Max attempts must be at least 1")})(s),(function(l,h,f){const g=new ar;return l.asyncQueue.enqueueAndForget((async()=>{const y=await aP(l);new rP(l.asyncQueue,y,f,h,g).ju()})),g.promise})(Il(r),(o=>e(new CP(r,o))),s)}function Ln(){return new up("serverTimestamp")}function rE(r){return Il(r=Fr(r,Wo)),new AP(r,(e=>nE(r,e)))}(function(e,t=!0){(function(o){Uo=o})(Fo),Co(new ws("firestore",((s,{instanceIdentifier:o,options:l})=>{const h=s.getProvider("app").getImmediate(),f=new Wo(new mA(s.getProvider("auth-internal")),new _A(h,s.getProvider("app-check-internal")),(function(y,w){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new oe(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sl(y.options.projectId,w)})(h,o),h);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),ki(_y,vy,e),ki(_y,vy,"esm2020")})();var kP="firebase",NP="12.7.0";ki(kP,NP,"app");const xP={apiKey:"AIzaSyA-TURVnsMyyBOWreei2jGLcuXmOzyr_DQ",authDomain:"gamificationcollege.firebaseapp.com",projectId:"gamificationcollege",storageBucket:"gamificationcollege.firebasestorage.app",messagingSenderId:"237003198772",appId:"1:237003198772:web:37fc8130a083377a115561"},iE=$_(xP),Fd=hA(iE),DP=new xr,We=hP(iE),sE=ke.createContext(null);function VP({children:r}){const[e,t]=ke.useState(null),[s,o]=ke.useState(null),[l,h]=ke.useState(!0);ke.useEffect(()=>{const y=ZS(Fd,async w=>{if(t(w),o(null),!w){h(!1);return}const E=dt(We,"users",w.uid);(await Ss(E)).exists()||await Ho(E,{displayName:w.displayName||"Utilisateur",role:"child",createdAt:Ln()});const b=await Ss(E);o(b.data()?.role||"child"),h(!1)});return()=>y()},[]);const f=async()=>{await w1(Fd,DP)},g=async()=>{await e1(Fd)};return k.jsx(sE.Provider,{value:{user:e,role:s,loading:l,signInGoogle:f,signOutUser:g},children:r})}function Ps(){const r=ke.useContext(sE);if(!r)throw new Error("useAuth doit tre utilis sous <AuthProvider>");return r}function OP(){const{user:r,role:e,signOutUser:t}=Ps();return k.jsx("div",{className:"card",style:{marginBottom:14},children:k.jsxs("div",{className:"row",style:{justifyContent:"space-between"},children:[k.jsxs("div",{children:[k.jsx("div",{style:{fontWeight:900,fontSize:"1.05rem"},children:"Malo  Rvisions"}),k.jsx("div",{className:"small",children:r?k.jsxs(k.Fragment,{children:["Connect : ",k.jsx("strong",{children:r.displayName})," ",k.jsx("span",{className:"badge",children:e})]}):"Non connect"})]}),k.jsxs("div",{className:"row",style:{gap:8},children:[k.jsx(Ba,{className:"btn secondary",to:"/",children:"Accueil"}),e==="parent"&&k.jsxs(k.Fragment,{children:[k.jsx(Ba,{className:"btn secondary",to:"/admin/import",children:"Import (parent)"}),k.jsx(Ba,{className:"btn secondary",to:"/admin/moderation",children:"Modration"}),k.jsx(Ba,{className:"btn secondary",to:"/admin/progression",children:"Progression"})]}),r&&k.jsx("button",{className:"btn secondary",onClick:t,children:"Dconnexion"})]})]})})}function g_({children:r}){const{user:e,loading:t}=Ps();return t?k.jsx("div",{className:"card",children:"Chargement"}):e?k.jsx(k.Fragment,{children:r}):k.jsx(zd,{to:"/connexion",replace:!0})}function jd({children:r}){const{user:e,role:t,loading:s}=Ps();return s?k.jsx("div",{className:"card",children:"Chargement"}):e?t!=="parent"?k.jsx(zd,{to:"/",replace:!0}):k.jsx(k.Fragment,{children:r}):k.jsx(zd,{to:"/connexion",replace:!0})}function Mo(r){return(r||"").toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[]/g,"'").replace(/\s+/g," ").trim()}async function MP(){return(await Or(gn(We,"subjects"))).docs.map(e=>({id:e.id,...e.data()}))}async function oE(r,e){const{uid:t,includeHidden:s=!1,includeOverrides:o=!1}=e||{},l=Qc(gn(We,"themes"),Yc("subjectId","==",r)),f=(await Or(l)).docs.map(w=>({id:w.id,...w.data()}));let g=new Map;if(t)try{const w=await Or(gn(We,"users",t,"visibilityThemes"));g=new Map(w.docs.map(E=>[E.id,!!E.data().visible]))}catch{g=new Map}const y=f.filter(w=>{const E=g.get(w.id);return!(!s&&w.hidden||!s&&E===!1)});return o?y.map(w=>({...w,visibleOverride:g.get(w.id)})):y}async function aE(r,e){const{uid:t,includeHidden:s=!1,includeOverrides:o=!1}=e||{},l=Qc(gn(We,"exercises"),Yc("themeId","==",r)),f=(await Or(l)).docs.map(w=>({id:w.id,...w.data()}));let g=new Map;if(t)try{const w=await Or(gn(We,"users",t,"visibilityExercises"));g=new Map(w.docs.map(E=>[E.id,!!E.data().visible]))}catch{g=new Map}const y=f.filter(w=>{const E=g.get(w.id);return!(!s&&w.hidden||!s&&E===!1)});return o?y.map(w=>({...w,visibleOverride:g.get(w.id)})):y}async function LP(r){const e=rE(We);for(const t of r.subjects){e.set(dt(We,"subjects",t.id),{title:t.title},{merge:!0});for(const s of t.themes){e.set(dt(We,"themes",s.id),{subjectId:t.id,title:s.title,grade:r.grade},{merge:!0});for(const o of s.exercises){const l=dt(We,"exercises",o.id),h={...o,themeId:s.id};h.tags=Array.isArray(h.tags)?h.tags.slice(0,3):[],h.type==="short_text"&&Array.isArray(h.expected)&&(h.expected=h.expected.map(f=>Mo(f))),h.type==="fill_blank"&&Array.isArray(h.expected)&&(h.expected=h.expected.map(f=>Mo(f))),e.set(l,h,{merge:!0})}}}await e.commit()}async function bP(r,e){await Ho(dt(We,"themes",r),{hidden:e},{merge:!0})}async function FP(r,e){await Ho(dt(We,"exercises",r),{hidden:e},{merge:!0})}async function jP(r,e,t){await Ho(dt(We,"users",r,"visibilityThemes",e),{visible:t},{merge:!0})}async function UP(r,e,t){await Ho(dt(We,"users",r,"visibilityExercises",e),{visible:t},{merge:!0})}async function zP(r){const e=dt(We,"users",r,"stats","main"),t=await Ss(e);return t.exists()?t.data():(await Ho(e,{xp:0,coins:0,streakDays:0,lastDoneDate:null,badges:[],updatedAt:Ln()}),(await Ss(e)).data())}function y_(r){return r.toISOString().slice(0,10)}function BP(r,e){return r===1?e?3:-1:r===2?e?5:-2:e?7:-3}function $P(r){return Math.max(0,Math.min(100,r))}function qP(r){return r>=80?"mastered":r>=60?"nearly":r>=30?"developing":"weak"}async function WP(r){const{uid:e,items:t,existingAttemptId:s}=r,o=new Date,l=y_(o),h=t.length,f=t.filter(b=>b.correct).length;if(h===0)return{xpGain:0,coinsGain:0,streakDays:0,badges:[],score:0,outOf:0};const g=new Map;t.forEach(b=>{const H=Array.isArray(b.tags)?b.tags.slice(0,3):[],q=BP(b.difficulty,b.correct);H.forEach(j=>{const K=g.get(j)||{delta:0,correct:0,wrong:0};g.set(j,{delta:K.delta+q,correct:K.correct+(b.correct?1:0),wrong:K.wrong+(b.correct?0:1)})})});const y=f*10,w=Math.max(1,Math.min(3,Math.round(f/Math.max(1,h)*3)));let E=null;const S=s?dt(We,"users",e,"attempts",s):dt(gn(We,"users",e,"attempts"));return t.map(()=>dt(gn(S,"items"))),await PP(We,async b=>{const H=dt(We,"users",e,"stats","main"),q=dt(We,"users",e,"progressSummary","main"),j=Array.from(g.keys()).map(x=>dt(We,"users",e,"tagProgress",x)),[K,re,L]=await Promise.all([b.get(H),b.get(q),Promise.all(j.map(x=>b.get(x)))]),ee=K.exists()?K.data():{xp:0,coins:0,streakDays:0,lastDoneDate:null,badges:[]};let ie=ee.streakDays||0;const J=ee.lastDoneDate;if(J!==l){const x=y_(new Date(o.getTime()-864e5));ie=J===x?ie+1:1}const C=new Set(Array.isArray(ee.badges)?ee.badges:[]);ie>=3&&C.add("3 jours daffile"),ie>=7&&C.add("7 jours daffile"),f===h&&h>=10&&C.add("Zro faute (10+)");const I=re.exists()?re.data():null,P={weak:0,developing:0,nearly:0,mastered:0};for(let x=0;x<j.length;x++){const O=j[x],R=L[x],fe=O.id,De=g.get(fe),je=R.exists()?R.data():null,Re=typeof je?.mastery=="number"?je.mastery:0,te=je?.bucket,ge=$P(Re+De.delta),ae=qP(ge);te&&I&&(P[te]-=1),P[ae]+=1,b.set(O,{mastery:ge,bucket:ae,correctAnswers:(je?.correctAnswers||0)+De.correct,wrongAnswers:(je?.wrongAnswers||0)+De.wrong,lastDelta:De.delta,updatedAt:Ln()},{merge:!0})}const N=I?.masteryBuckets||{weak:0,developing:0,nearly:0,mastered:0};b.set(H,{xp:(ee.xp||0)+y,coins:(ee.coins||0)+w,streakDays:ie,lastDoneDate:l,badges:Array.from(C),updatedAt:Ln()},{merge:!0}),b.set(q,{totalAnswers:(I?.totalAnswers||0)+h,correctAnswers:(I?.correctAnswers||0)+f,totalAttempts:(I?.totalAttempts||0)+1,masteryBuckets:{weak:(N.weak||0)+P.weak,developing:(N.developing||0)+P.developing,nearly:(N.nearly||0)+P.nearly,mastered:(N.mastered||0)+P.mastered},lastAttemptId:S.id,lastDate:l,updatedAt:Ln()},{merge:!0}),E={xpGain:y,coinsGain:w,streakDays:ie,badges:Array.from(C)}}),{...E||{xpGain:0,coinsGain:0,streakDays:0,badges:[]},score:f,outOf:h}}const __=[{id:"fr",title:"Franais"},{id:"math",title:"Maths"},{id:"en",title:"Anglais"},{id:"es",title:"Espagnol"},{id:"hist",title:"Histoire"}];function HP(){const{user:r}=Ps(),[e,t]=ke.useState([]),[s,o]=ke.useState("fr"),[l,h]=ke.useState([]),[f,g]=ke.useState(null);return ke.useEffect(()=>{(async()=>{try{const y=await MP();t(y.length?y:__)}catch{t(__)}})()},[]),ke.useEffect(()=>{(async()=>{const y=await oE(s,{uid:r?.uid});h(y)})()},[s,r]),ke.useEffect(()=>{r&&(async()=>{const y=await zP(r.uid);g(y)})()},[r]),k.jsxs("div",{className:"container grid",children:[k.jsx("div",{className:"card",children:k.jsxs("div",{className:"row",style:{justifyContent:"space-between"},children:[k.jsxs("div",{children:[k.jsx("h2",{style:{margin:0},children:"Salut Malo "}),k.jsx("div",{className:"small",children:"Choisis une matire, puis un thme. Objectif : 10 questions par jour."})]}),f&&k.jsxs("div",{className:"kpi",children:[k.jsxs("div",{className:"pill",children:["XP: ",k.jsx("strong",{children:f.xp??0})]}),k.jsxs("div",{className:"pill",children:["Pices: ",k.jsx("strong",{children:f.coins??0})]}),k.jsxs("div",{className:"pill",children:["Srie: ",k.jsx("strong",{children:f.streakDays??0})," jours"]})]})]})}),k.jsxs("div",{className:"grid2",children:[k.jsxs("div",{className:"card",children:[k.jsx("h3",{style:{marginTop:0},children:"Matire"}),k.jsx("select",{className:"input",value:s,onChange:y=>o(y.target.value),children:e.map(y=>k.jsx("option",{value:y.id,children:y.title},y.id))}),k.jsx("div",{className:"small",style:{marginTop:8},children:"Priorits : Franais (grammaire & conjugaison) + Maths (fractions)."})]}),k.jsxs("div",{className:"card",children:[k.jsx("h3",{style:{marginTop:0},children:"Thmes"}),l.length===0?k.jsx("div",{className:"small",children:"Aucun thme pour linstant. (Parent : importe un pack JSON)"}):k.jsx("div",{className:"grid",children:l.map(y=>k.jsx(Ba,{className:"btn secondary",to:`/theme/${y.id}`,children:y.title},y.id))})]})]}),f?.badges?.length?k.jsxs("div",{className:"card",children:[k.jsx("h3",{style:{marginTop:0},children:"Badges"}),k.jsx("div",{className:"row",children:f.badges.map(y=>k.jsx("span",{className:"badge",children:y},y))})]}):null]})}function GP(){const{user:r,signInGoogle:e}=Ps(),t=Pc();return ke.useEffect(()=>{r&&t("/")},[r]),k.jsx("div",{className:"container",children:k.jsxs("div",{className:"card",children:[k.jsx("h2",{style:{marginTop:0},children:"Connexion"}),k.jsx("p",{className:"small",children:"Connexion Google recommande (simple sur tablette Android)."}),k.jsx("button",{className:"btn",onClick:e,children:"Se connecter avec Google"}),k.jsx("hr",{}),k.jsxs("p",{className:"small",children:["Astuce : aprs ta premire connexion (toi), va dans Firestore et mets ",k.jsxs("code",{children:["users/","{uid}",".role"]}),'  "parent".']})]})})}function KP(r,e){return r.type==="mcq"?e===r.answerIndex:r.type==="short_text"||r.type==="fill_blank"?r.expected.includes(Mo(e||"")):!1}function QP(r,e){return r===1?e?3:-1:r===2?e?5:-2:e?7:-3}function XP(r){return Math.max(0,Math.min(100,r))}function YP(r){return r>=80?"mastered":r>=60?"nearly":r>=30?"developing":"weak"}function lE(r){return r.toISOString().slice(0,10)}function JP(r,e){const t=new Date(r+"T00:00:00");return t.setDate(t.getDate()+e),lE(t)}function ZP(r,e,t){const s=Math.max(0,Math.min(100,r));let o=1;return s>=81||e==="mastered"?o=10:s>=61||e==="nearly"?o=4:s>=31||e==="developing"?o=2:o=1,JP(t,o)}async function ek(r){const{uid:e,subjectId:t,themeId:s,answers:o,exercises:l,durationSec:h}=r,g=lE(new Date),y=dt(gn(We,"users",e,"attempts")),w=gn(We,"users",e,"attemptItems"),E=dt(We,"users",e,"progressSummary","main"),S=l.map((fe,De)=>{const je=KP(fe,o[fe.id]);return{exerciseId:fe.id,subjectId:t,themeId:s,difficulty:fe.difficulty,tags:fe.tags?.slice(0,3)||[],correct:je,index:De}}),b=S.filter(fe=>fe.correct).length,H=S.length,q=new Map;S.forEach(fe=>{const De=QP(fe.difficulty,fe.correct);fe.tags.forEach(je=>{const Re=q.get(je)||{delta:0,correct:0,wrong:0,results:[]};Re.delta+=De,Re.correct+=fe.correct?1:0,Re.wrong+=fe.correct?0:1,Re.results.push(fe.correct),q.set(je,Re)})});const j=Array.from(q.keys()),K=await Promise.all(j.map(fe=>Ss(dt(We,"users",e,"tagProgress",fe)))),re=rE(We),L={subjectId:t,themeId:s,score:b,outOf:H,durationSec:h,itemsCount:S.length,date:g,createdAt:Ln()};re.set(y,L),S.forEach(fe=>{const De=dt(w);re.set(De,{...fe,createdAt:Ln(),answer:o[fe.exerciseId]??null})});const ee={weak:0,developing:0,nearly:0,mastered:0},ie={};j.forEach((fe,De)=>{const je=K[De],Re=je.exists()?je.data():null,te=q.get(fe),ae=[...Array.isArray(Re?.last7Results)?Re.last7Results:[],...te.results].slice(-7),M={correct:ae.filter(yn=>yn).length,wrong:ae.filter(yn=>!yn).length};let Q=Re?.streakCorrect||0,Se=Re?.streakWrong||0;te.results.forEach(yn=>{yn?(Q+=1,Se=0):(Se+=1,Q=0)});const Ce=typeof Re?.mastery=="number"?Re.mastery:0,Ne=XP(Ce+te.delta),xe=YP(Ne),Be=Re?.bucket;Be&&(ee[Be]-=1),ee[xe]+=1;const be=ZP(Ne,xe,g),Ge=dt(We,"users",e,"tagProgress",fe),At={tagId:fe,mastery:Ne,bucket:xe,attempts:(Re?.attempts||0)+te.results.length,correctAnswers:(Re?.correctAnswers||0)+te.correct,wrongAnswers:(Re?.wrongAnswers||0)+te.wrong,last7Results:ae,last7:M,lastSeenAt:Ln(),lastCorrectAt:te.correct>0?Ln():Re?.lastCorrectAt||null,streakCorrect:Q,streakWrong:Se,lastDelta:te.delta,nextDueDate:be,updatedAt:Ln()};ie[fe]=At,re.set(Ge,At,{merge:!0})});const J=await Ss(E),C=J.exists()?J.data():null,I=C?.masteryBuckets||{weak:0,developing:0,nearly:0,mastered:0},P={weak:(I.weak||0)+ee.weak,developing:(I.developing||0)+ee.developing,nearly:(I.nearly||0)+ee.nearly,mastered:(I.mastered||0)+ee.mastered},N=Object.values(ie).sort((fe,De)=>fe.mastery-De.mastery).map(fe=>fe.tagId),x=Array.isArray(C?.topWeakTags)?C.topWeakTags:[],O=Array.from(new Set([...N,...x])).slice(0,3),R={totalAnswers:(C?.totalAnswers||0)+H,correctAnswers:(C?.correctAnswers||0)+b,totalAttempts:(C?.totalAttempts||0)+1,masteryBuckets:P,lastAttemptId:y.id,lastDate:g,updatedAt:Ln(),topWeakTags:O};return re.set(E,R,{merge:!0}),await re.commit(),{attemptId:y.id,score:b,outOf:H,summary:R,tagsUpdated:ie}}function v_(r,e){return r.type==="mcq"?e===r.answerIndex:r.type==="short_text"||r.type==="fill_blank"?r.expected.includes(Mo(e||"")):!1}function tk(){const{themeId:r}=nT(),e=Pc(),{user:t}=Ps(),[s,o]=ke.useState(null),[l,h]=ke.useState([]),[f,g]=ke.useState({}),[y]=ke.useState(()=>Date.now()),[w,E]=ke.useState(null),[S,b]=ke.useState([]),[H,q]=ke.useState([]),[j,K]=ke.useState(!1);ke.useEffect(()=>{(async()=>{if(!r)return;const L=await Ss(dt(We,"themes",r));o(L.exists()?{id:r,...L.data()}:null);const ie=[...await aE(r,{uid:t?.uid})].sort(()=>Math.random()-.5);h(ie.slice(0,10)),g({}),E(null)})()},[r]);const re=async()=>{if(!t||!r||!s)return;const L=Math.max(1,Math.round((Date.now()-y)/1e3)),ee=l.map(N=>({exerciseId:N.id,difficulty:N.difficulty,tags:N.tags||[],correct:v_(N,f[N.id])})),ie=await ek({uid:t.uid,subjectId:s.subjectId,themeId:r,answers:f,exercises:l,durationSec:L}),J=await WP({uid:t.uid,subjectId:s.subjectId,items:ee,existingAttemptId:ie.attemptId}),C=new Set(l.flatMap(N=>N.tags||[])),I=Object.values(ie.tagsUpdated||{}).filter(N=>N&&C.has(N.tagId||"")).sort((N,x)=>(N.mastery??0)-(x.mastery??0)).slice(0,3).map(N=>N.tagId);b(I),E({score:J.score,outOf:J.outOf,durationSec:L,...J});const P=l.map((N,x)=>{const O=f[N.id],R=v_(N,O);let fe="",De="";if(N.type==="mcq"){const je=N;fe=je.choices[je.answerIndex]||"",De=typeof O=="number"&&je.choices[O]||""}else(N.type==="short_text"||N.type==="fill_blank")&&(fe=N.expected[0]||"",De=O||"");return{id:N.id,prompt:N.prompt,correct:R,expected:fe||"",userAnswer:(De??"").toString()||"",idx:x+1}});q(P),K(!0)};return r?j&&H.length?k.jsxs("div",{className:"container grid",children:[k.jsxs("div",{className:"card",children:[k.jsxs("h2",{style:{margin:0},children:["Corrections  ",s?.title]}),w&&k.jsxs("div",{className:"small",children:["Score ",k.jsxs("strong",{children:[w.score,"/",w.outOf]}),"  ",w.durationSec,"s  +",w.xpGain," XP  +",w.coinsGain," pices"]})]}),k.jsxs("div",{className:"card",children:[k.jsx("div",{className:"grid",children:H.map(L=>k.jsxs("div",{className:"pill",style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:6,background:L.correct?"rgba(46, 204, 113, 0.12)":"rgba(255, 90, 111, 0.12)",border:L.correct?"1px solid rgba(46, 204, 113, 0.4)":"1px solid rgba(255, 90, 111, 0.4)"},children:[k.jsxs("div",{className:"small",children:["Question ",L.idx,"  ",L.correct?k.jsx("span",{className:"badge",style:{borderColor:"rgba(46,204,113,.6)",color:"#7fffb2"},children:" Bonne rponse"}):k.jsx("span",{className:"badge",style:{borderColor:"rgba(255,90,111,.6)",color:"#ff9fb0"},children:" Mauvaise rponse"})]}),k.jsx("div",{style:{fontWeight:700},children:L.prompt}),k.jsxs("div",{className:"small",children:["Ta rponse : ",k.jsx("strong",{children:L.userAnswer})]}),!L.correct&&k.jsxs("div",{className:"small",children:["Correction : ",k.jsx("strong",{children:L.expected})]})]},L.id))}),k.jsxs("div",{className:"row",style:{marginTop:16},children:[k.jsx("button",{className:"btn",onClick:()=>e("/"),children:"Retour  laccueil"}),k.jsx("button",{className:"btn secondary",onClick:()=>{K(!1),q([]),E(null),g({})},children:"Refaire une session"})]})]})]}):k.jsxs("div",{className:"container grid",children:[k.jsxs("div",{className:"card",children:[k.jsx("h2",{style:{margin:0},children:s?.title||"Session"}),k.jsx("div",{className:"small",children:"Fais de ton mieux. Objectif : rgularit "})]}),l.map((L,ee)=>k.jsxs("div",{className:"card",children:[k.jsxs("div",{className:"small",children:["Question ",ee+1," / ",l.length," ",k.jsxs("span",{className:"badge",children:["Difficult ",L.difficulty]})]}),k.jsx("div",{style:{fontWeight:800,marginTop:6},children:L.prompt}),L.type==="mcq"&&k.jsx("div",{className:"grid",style:{marginTop:10},children:L.choices.map((ie,J)=>k.jsx("button",{type:"button",className:"btn "+(f[L.id]===J?"":"secondary"),onClick:()=>g(C=>({...C,[L.id]:J})),style:{textAlign:"left",opacity:f[L.id]===J?1:.85},"aria-pressed":f[L.id]===J,children:ie},J))}),L.type==="short_text"&&k.jsx("div",{style:{marginTop:10},children:k.jsx("input",{className:"input",placeholder:"Ta rponse",value:f[L.id]??"",onChange:ie=>g(J=>({...J,[L.id]:ie.target.value}))})}),L.type==="fill_blank"&&k.jsxs("div",{style:{marginTop:10},children:[k.jsx("div",{className:"small",children:L.text}),k.jsx("input",{className:"input",placeholder:"Le mot manquant",value:f[L.id]??"",onChange:ie=>g(J=>({...J,[L.id]:ie.target.value}))})]})]},L.id)),k.jsxs("div",{className:"card",children:[k.jsxs("div",{className:"row",children:[k.jsx("button",{className:"btn",onClick:re,children:"Corriger et enregistrer"}),w&&k.jsxs("div",{className:"small",children:["Score ",k.jsxs("strong",{children:[w.score,"/",w.outOf]}),"  ",w.durationSec,"s  +",k.jsx("strong",{children:w.xpGain})," XP  +",k.jsx("strong",{children:w.coinsGain})," pices  Srie ",k.jsx("strong",{children:w.streakDays})]})]}),w?.badges?.length?k.jsx("div",{className:"row",style:{marginTop:10},children:w.badges.map(L=>k.jsx("span",{className:"badge",children:L},L))}):null,S.length?k.jsxs("div",{className:"small",style:{marginTop:10},children:["Tags  renforcer (thme) : ",S.map(L=>k.jsx("span",{className:"badge",children:L},L))]}):null]}),H.length?k.jsxs("div",{className:"card",children:[k.jsx("h3",{style:{marginTop:0},children:"Corrections"}),k.jsx("div",{className:"grid",children:H.map(L=>k.jsxs("div",{className:"pill",style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:6},children:[k.jsxs("div",{className:"small",children:["Question ",L.idx,"  ",L.correct?k.jsx("span",{className:"badge",children:" Bonne rponse"}):k.jsx("span",{className:"badge",children:" Mauvaise rponse"})]}),k.jsx("div",{style:{fontWeight:700},children:L.prompt}),k.jsxs("div",{className:"small",children:["Ta rponse : ",k.jsx("strong",{children:L.userAnswer})]}),!L.correct&&k.jsxs("div",{className:"small",children:["Correction : ",k.jsx("strong",{children:L.expected})]})]},L.id))})]}):null]}):k.jsx("div",{className:"container",children:k.jsx("div",{className:"card",children:"Thme introuvable."})})}function nk(){const[r,e]=ke.useState(""),t=async s=>{if(!s)return;e("Lecture du fichier");const o=await s.text();let l;try{l=JSON.parse(o)}catch{e(" JSON invalide");return}if(!l?.subjects?.length){e(" Format inattendu (subjects manquant)");return}e("Import en cours"),await LP(l),e(" Import termin")};return k.jsx("div",{className:"container",children:k.jsxs("div",{className:"card",children:[k.jsx("h2",{style:{marginTop:0},children:"Import dexercices (Parent)"}),k.jsx("p",{className:"small",children:"Importe un pack JSON (gnr par moi) : matires  thmes  exercices."}),k.jsx("input",{className:"input",type:"file",accept:".json,application/json",onChange:s=>t(s.target.files?.[0]||null)}),r&&k.jsx("p",{className:"small",style:{marginTop:10},children:r}),k.jsx("hr",{}),k.jsx("p",{className:"small",children:"Conseil : commence par importer les packs Franais (grammaire + conjugaison) et Maths (fractions)."})]})})}const rk=[{id:"all",label:"Toutes"},{id:"fr",label:"Franais"},{id:"math",label:"Maths"},{id:"en",label:"Anglais"},{id:"es",label:"Espagnol"},{id:"hist",label:"Histoire"}];function ik(r){if(!r)return null;const e=r.split("_")[0];return e==="fr"||e==="math"||e==="en"||e==="es"||e==="hist"?e:null}function w_(r){return r.last7?r.last7:Array.isArray(r.last7Results)?{correct:r.last7Results.filter(Boolean).length,wrong:r.last7Results.filter(e=>!e).length}:{correct:0,wrong:0}}function sk(){const{user:r,role:e}=Ps(),[t,s]=ke.useState([]),[o,l]=ke.useState(""),[h,f]=ke.useState([]),[g,y]=ke.useState(!1),[w,E]=ke.useState("fr"),[S,b]=ke.useState(null);ke.useEffect(()=>{r&&(e==="parent"?(async()=>{const re=(await Or(Qc(gn(We,"users"),Yc("role","==","child")))).docs.map(L=>({id:L.id,displayName:L.data().displayName||"Enfant"}));s(re),re[0]&&l(re[0].id)})():l(r.uid))},[r,e]);const H=ke.useCallback(async K=>{y(!0);const L=(await Or(gn(We,"users",K,"tagProgress"))).docs.map(J=>({id:J.id,tagId:J.id,...J.data()}));f(L);const ie=(await Or(gn(We,"users",K,"progressSummary"))).docs.find(J=>J.id==="main");b(ie?.data()||null),y(!1)},[]);ke.useEffect(()=>{o&&H(o)},[o,H]);const q=h.filter(K=>w==="all"?!0:ik(K.tagId)===w).sort((K,re)=>(K.mastery||0)-(re.mastery||0)).slice(0,20),j=()=>{const K=[["tagId","mastery","bucket","attempts","correct","wrong","last7_correct","last7_wrong","nextDueDate"]];h.forEach(J=>{const C=w_(J);K.push([J.tagId||J.id,String(J.mastery??0),J.bucket||"",String(J.attempts??0),String(J.correctAnswers??0),String(J.wrongAnswers??0),String(C.correct),String(C.wrong),J.nextDueDate||""])});const re=K.map(J=>J.map(C=>`"${(C??"").toString().replace(/"/g,'""')}"`).join(",")).join(`
`),L=new Blob([re],{type:"text/csv;charset=utf-8;"}),ee=URL.createObjectURL(L),ie=document.createElement("a");ie.href=ee,ie.download=`progress-${o||"user"}.csv`,ie.click(),URL.revokeObjectURL(ee)};return k.jsxs("div",{className:"container",children:[k.jsxs("div",{className:"card",children:[k.jsx("h2",{style:{marginTop:0},children:"Progression par tag"}),k.jsxs("div",{className:"row",style:{gap:8,alignItems:"center"},children:[e==="parent"&&k.jsxs(k.Fragment,{children:[k.jsx("label",{className:"small",children:"Enfant"}),k.jsx("select",{className:"input",value:o,onChange:K=>l(K.target.value),children:t.map(K=>k.jsx("option",{value:K.id,children:K.displayName},K.id))})]}),k.jsx("label",{className:"small",children:"Matire"}),k.jsx("select",{className:"input",value:w,onChange:K=>E(K.target.value),children:rk.map(K=>k.jsx("option",{value:K.id,children:K.label},K.id))}),k.jsx("button",{className:"btn secondary",onClick:j,disabled:!h.length,children:"Tlcharger CSV"})]}),S&&k.jsxs("div",{className:"kpi",style:{marginTop:10},children:[k.jsxs("div",{className:"pill",children:["Rponses: ",k.jsx("strong",{children:S.totalAnswers||0})]}),k.jsxs("div",{className:"pill",children:["Taux: ",k.jsxs("strong",{children:[S.totalAnswers?Math.round((S.correctAnswers||0)/S.totalAnswers*100):0,"%"]})]}),k.jsxs("div",{className:"pill",children:["Tentatives: ",k.jsx("strong",{children:S.totalAttempts||0})]})]})]}),g?k.jsx("div",{className:"card",children:"Chargement"}):k.jsxs("div",{className:"card",children:[k.jsx("h3",{style:{marginTop:0},children:"Top 20 faibles"}),q.length===0?k.jsx("div",{className:"small",children:"Aucun tag pour le moment."}):k.jsx("div",{className:"grid",children:q.map(K=>{const re=w_(K);return k.jsx("div",{className:"pill",style:{justifyContent:"space-between",display:"flex",alignItems:"center"},children:k.jsxs("div",{children:[k.jsx("div",{style:{fontWeight:700},children:K.tagId}),k.jsxs("div",{className:"small",children:[K.mastery??0,"/100  ",K.bucket,"  ",re.correct,"/",re.correct+re.wrong," sur 7  Prochaine: ",K.nextDueDate||""]}),k.jsx("div",{style:{height:8,background:"rgba(255,255,255,0.08)",borderRadius:999,marginTop:6,width:"100%"},children:k.jsx("div",{style:{height:8,borderRadius:999,width:`${Math.min(100,Math.max(0,K.mastery||0))}%`,background:"linear-gradient(90deg,#ff5a6f,#7aa2ff)"}})}),k.jsx("div",{className:"row",style:{marginTop:6,gap:4},children:(K.last7Results||[]).map((L,ee)=>k.jsx("span",{style:{width:10,height:10,borderRadius:"50%",background:L?"#2ecc71":"#ff5a6f",opacity:.9}},ee))})]})},K.id)})})]})]})}const E_=[{id:"all",label:"Toutes"},{id:"fr",label:"Franais"},{id:"math",label:"Maths"},{id:"en",label:"Anglais"},{id:"es",label:"Espagnol"},{id:"hist",label:"Histoire"}];function ok(){const[r,e]=ke.useState([]),[t,s]=ke.useState(""),[o,l]=ke.useState("all"),[h,f]=ke.useState([]),[g,y]=ke.useState(!1),[w,E]=ke.useState({}),[S,b]=ke.useState(null);ke.useEffect(()=>{(async()=>{const ee=(await Or(Qc(gn(We,"users"),Yc("role","==","child")))).docs.map(ie=>({id:ie.id,displayName:ie.data().displayName||"Enfant"}));e(ee),ee[0]&&s(ee[0].id)})()},[]),ke.useEffect(()=>{t&&(y(!0),(async()=>{const L=E_.filter(C=>C.id!=="all").map(C=>C.id),ee=o==="all"?L:[o],ie=[];for(const C of ee){const I=await oE(C,{uid:t,includeHidden:!0,includeOverrides:!0});ie.push(...I)}const J=ie.sort((C,I)=>(C.title||"").localeCompare(I.title||""));f(J),y(!1)})())},[t,o]);const H=async(L,ee)=>{t&&(await jP(t,L,ee),f(ie=>ie.map(J=>J.id===L?{...J,visibleOverride:ee}:J)))},q=async(L,ee)=>{await bP(L,ee),f(ie=>ie.map(J=>J.id===L?{...J,hidden:ee}:J))},j=async L=>{b(L);const ee=await aE(L,{uid:t,includeHidden:!0,includeOverrides:!0});E(ie=>({...ie,[L]:ee})),b(null)},K=async(L,ee)=>{await FP(L,ee),E(ie=>{const J={};return Object.keys(ie).forEach(C=>{J[C]=ie[C].map(I=>I.id===L?{...I,hidden:ee}:I)}),{...ie,...J}})},re=async(L,ee,ie)=>{t&&(await UP(t,L,ee),E(J=>({...J,[ie]:(J[ie]||[]).map(C=>C.id===L?{...C,visibleOverride:ee}:C)})))};return k.jsxs("div",{className:"container",children:[k.jsxs("div",{className:"card",children:[k.jsx("h2",{style:{marginTop:0},children:"Modration contenus"}),k.jsxs("div",{className:"row",style:{gap:10},children:[k.jsxs("div",{className:"row",style:{gap:6},children:[k.jsx("span",{className:"small",children:"Enfant"}),k.jsx("select",{className:"input",value:t,onChange:L=>s(L.target.value),children:r.map(L=>k.jsx("option",{value:L.id,children:L.displayName},L.id))})]}),k.jsxs("div",{className:"row",style:{gap:6},children:[k.jsx("span",{className:"small",children:"Matire"}),k.jsx("select",{className:"input",value:o,onChange:L=>l(L.target.value),children:E_.map(L=>k.jsx("option",{value:L.id,children:L.label},L.id))})]})]})]}),g?k.jsx("div",{className:"card",children:"Chargement"}):k.jsxs("div",{className:"grid",children:[h.map(L=>{const ee=L.visibleOverride,ie=ee!==void 0?ee:!L.hidden;return k.jsxs("div",{className:"card",children:[k.jsxs("div",{className:"row",style:{justifyContent:"space-between"},children:[k.jsxs("div",{children:[k.jsx("div",{style:{fontWeight:800},children:L.title}),k.jsx("div",{className:"small",children:L.subjectId}),L.hidden&&k.jsx("div",{className:"badge",children:"Masqu globalement"}),ee===!1&&k.jsx("div",{className:"badge",children:"Masqu pour lenfant"})]}),k.jsxs("div",{className:"row",children:[k.jsx("button",{className:"btn secondary",onClick:()=>H(L.id,!ie),children:ie?"Masquer pour lenfant":"Afficher pour lenfant"}),k.jsx("button",{className:"btn secondary",onClick:()=>q(L.id,!L.hidden),children:L.hidden?"Ractiver globalement":"Masquer globalement"}),k.jsx("button",{className:"btn secondary",onClick:()=>j(L.id),children:"Voir questions"})]})]}),(w[L.id]||[]).length>0&&k.jsxs("div",{style:{marginTop:10},children:[k.jsx("div",{className:"small",style:{marginBottom:6},children:"Questions"}),k.jsx("div",{className:"grid",children:w[L.id].map(J=>{const C=J.visibleOverride,I=C!==void 0?C:!J.hidden;return k.jsxs("div",{className:"pill",style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:6},children:[k.jsxs("div",{className:"small",children:[J.prompt?.slice(0,80)||J.id," ",J.hidden&&k.jsx("span",{className:"badge",children:"Masqu global"})," ",C===!1&&k.jsx("span",{className:"badge",children:"Masqu enfant"})]}),k.jsxs("div",{className:"row",children:[k.jsx("button",{className:"btn secondary",onClick:()=>re(J.id,!I,L.id),children:I?"Masquer enfant":"Afficher enfant"}),k.jsx("button",{className:"btn secondary",onClick:()=>K(J.id,!J.hidden),children:J.hidden?"Ractiver global":"Masquer global"})]})]},J.id)})})]}),S===L.id&&k.jsx("div",{className:"small",style:{marginTop:6},children:"Chargement des questions"})]},L.id)}),h.length===0&&k.jsx("div",{className:"card small",children:"Aucun thme."})]})]})}function ak(){return k.jsx("div",{className:"container",children:k.jsx("div",{className:"card",children:"Page introuvable."})})}function lk(){return k.jsxs(AT,{children:[k.jsx("div",{className:"container",children:k.jsx(OP,{})}),k.jsxs(_T,{children:[k.jsx(vi,{path:"/connexion",element:k.jsx(GP,{})}),k.jsx(vi,{path:"/",element:k.jsx(g_,{children:k.jsx(HP,{})})}),k.jsx(vi,{path:"/theme/:themeId",element:k.jsx(g_,{children:k.jsx(tk,{})})}),k.jsx(vi,{path:"/admin/import",element:k.jsx(jd,{children:k.jsx(nk,{})})}),k.jsx(vi,{path:"/admin/progression",element:k.jsx(jd,{children:k.jsx(sk,{})})}),k.jsx(vi,{path:"/admin/moderation",element:k.jsx(jd,{children:k.jsx(ok,{})})}),k.jsx(vi,{path:"*",element:k.jsx(ak,{})})]})]})}function uk(){"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("${import.meta.env.BASE_URL}sw.js").catch(()=>{})})}A0.createRoot(document.getElementById("root")).render(k.jsx(ke.StrictMode,{children:k.jsx(VP,{children:k.jsx(lk,{})})}));uk();
