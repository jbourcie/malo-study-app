function w0(r,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in r)){const l=Object.getOwnPropertyDescriptor(s,o);l&&Object.defineProperty(r,o,l.get?l:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function A_(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Td={exports:{}},qa={},Id={exports:{}},Oe={};var kg;function E0(){if(kg)return Oe;kg=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.iterator;function S(L){return L===null||typeof L!="object"?null:(L=E&&L[E]||L["@@iterator"],typeof L=="function"?L:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H=Object.assign,$={};function j(L,X,Ae){this.props=L,this.context=X,this.refs=$,this.updater=Ae||M}j.prototype.isReactComponent={},j.prototype.setState=function(L,X){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,X,"setState")},j.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function K(){}K.prototype=j.prototype;function se(L,X,Ae){this.props=L,this.context=X,this.refs=$,this.updater=Ae||M}var q=se.prototype=new K;q.constructor=se,H(q,j.prototype),q.isPureReactComponent=!0;var W=Array.isArray,te=Object.prototype.hasOwnProperty,ee={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function I(L,X,Ae){var Pe,xe={},De=null,$e=null;if(X!=null)for(Pe in X.ref!==void 0&&($e=X.ref),X.key!==void 0&&(De=""+X.key),X)te.call(X,Pe)&&!C.hasOwnProperty(Pe)&&(xe[Pe]=X[Pe]);var je=arguments.length-2;if(je===1)xe.children=Ae;else if(1<je){for(var Ge=Array(je),At=0;At<je;At++)Ge[At]=arguments[At+2];xe.children=Ge}if(L&&L.defaultProps)for(Pe in je=L.defaultProps,je)xe[Pe]===void 0&&(xe[Pe]=je[Pe]);return{$$typeof:r,type:L,key:De,ref:$e,props:xe,_owner:ee.current}}function P(L,X){return{$$typeof:r,type:L.type,key:X,ref:L.ref,props:L.props,_owner:L._owner}}function N(L){return typeof L=="object"&&L!==null&&L.$$typeof===r}function x(L){var X={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(Ae){return X[Ae]})}var O=/\/+/g;function k(L,X){return typeof L=="object"&&L!==null&&L.key!=null?x(""+L.key):X.toString(36)}function fe(L,X,Ae,Pe,xe){var De=typeof L;(De==="undefined"||De==="boolean")&&(L=null);var $e=!1;if(L===null)$e=!0;else switch(De){case"string":case"number":$e=!0;break;case"object":switch(L.$$typeof){case r:case e:$e=!0}}if($e)return $e=L,xe=xe($e),L=Pe===""?"."+k($e,0):Pe,W(xe)?(Ae="",L!=null&&(Ae=L.replace(O,"$&/")+"/"),fe(xe,X,Ae,"",function(At){return At})):xe!=null&&(N(xe)&&(xe=P(xe,Ae+(!xe.key||$e&&$e.key===xe.key?"":(""+xe.key).replace(O,"$&/")+"/")+L)),X.push(xe)),1;if($e=0,Pe=Pe===""?".":Pe+":",W(L))for(var je=0;je<L.length;je++){De=L[je];var Ge=Pe+k(De,je);$e+=fe(De,X,Ae,Ge,xe)}else if(Ge=S(L),typeof Ge=="function")for(L=Ge.call(L),je=0;!(De=L.next()).done;)De=De.value,Ge=Pe+k(De,je++),$e+=fe(De,X,Ae,Ge,xe);else if(De==="object")throw X=String(L),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.");return $e}function Ve(L,X,Ae){if(L==null)return L;var Pe=[],xe=0;return fe(L,Pe,"","",function(De){return X.call(Ae,De,xe++)}),Pe}function Ue(L){if(L._status===-1){var X=L._result;X=X(),X.then(function(Ae){(L._status===0||L._status===-1)&&(L._status=1,L._result=Ae)},function(Ae){(L._status===0||L._status===-1)&&(L._status=2,L._result=Ae)}),L._status===-1&&(L._status=0,L._result=X)}if(L._status===1)return L._result.default;throw L._result}var Re={current:null},ne={transition:null},ge={ReactCurrentDispatcher:Re,ReactCurrentBatchConfig:ne,ReactCurrentOwner:ee};function ae(){throw Error("act(...) is not supported in production builds of React.")}return Oe.Children={map:Ve,forEach:function(L,X,Ae){Ve(L,function(){X.apply(this,arguments)},Ae)},count:function(L){var X=0;return Ve(L,function(){X++}),X},toArray:function(L){return Ve(L,function(X){return X})||[]},only:function(L){if(!N(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Oe.Component=j,Oe.Fragment=t,Oe.Profiler=o,Oe.PureComponent=se,Oe.StrictMode=s,Oe.Suspense=g,Oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ge,Oe.act=ae,Oe.cloneElement=function(L,X,Ae){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var Pe=H({},L.props),xe=L.key,De=L.ref,$e=L._owner;if(X!=null){if(X.ref!==void 0&&(De=X.ref,$e=ee.current),X.key!==void 0&&(xe=""+X.key),L.type&&L.type.defaultProps)var je=L.type.defaultProps;for(Ge in X)te.call(X,Ge)&&!C.hasOwnProperty(Ge)&&(Pe[Ge]=X[Ge]===void 0&&je!==void 0?je[Ge]:X[Ge])}var Ge=arguments.length-2;if(Ge===1)Pe.children=Ae;else if(1<Ge){je=Array(Ge);for(var At=0;At<Ge;At++)je[At]=arguments[At+2];Pe.children=je}return{$$typeof:r,type:L.type,key:xe,ref:De,props:Pe,_owner:$e}},Oe.createContext=function(L){return L={$$typeof:h,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:l,_context:L},L.Consumer=L},Oe.createElement=I,Oe.createFactory=function(L){var X=I.bind(null,L);return X.type=L,X},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(L){return{$$typeof:f,render:L}},Oe.isValidElement=N,Oe.lazy=function(L){return{$$typeof:v,_payload:{_status:-1,_result:L},_init:Ue}},Oe.memo=function(L,X){return{$$typeof:y,type:L,compare:X===void 0?null:X}},Oe.startTransition=function(L){var X=ne.transition;ne.transition={};try{L()}finally{ne.transition=X}},Oe.unstable_act=ae,Oe.useCallback=function(L,X){return Re.current.useCallback(L,X)},Oe.useContext=function(L){return Re.current.useContext(L)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(L){return Re.current.useDeferredValue(L)},Oe.useEffect=function(L,X){return Re.current.useEffect(L,X)},Oe.useId=function(){return Re.current.useId()},Oe.useImperativeHandle=function(L,X,Ae){return Re.current.useImperativeHandle(L,X,Ae)},Oe.useInsertionEffect=function(L,X){return Re.current.useInsertionEffect(L,X)},Oe.useLayoutEffect=function(L,X){return Re.current.useLayoutEffect(L,X)},Oe.useMemo=function(L,X){return Re.current.useMemo(L,X)},Oe.useReducer=function(L,X,Ae){return Re.current.useReducer(L,X,Ae)},Oe.useRef=function(L){return Re.current.useRef(L)},Oe.useState=function(L){return Re.current.useState(L)},Oe.useSyncExternalStore=function(L,X,Ae){return Re.current.useSyncExternalStore(L,X,Ae)},Oe.useTransition=function(){return Re.current.useTransition()},Oe.version="18.3.1",Oe}var Ng;function _f(){return Ng||(Ng=1,Id.exports=E0()),Id.exports}var xg;function T0(){if(xg)return qa;xg=1;var r=_f(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(f,g,y){var v,E={},S=null,M=null;y!==void 0&&(S=""+y),g.key!==void 0&&(S=""+g.key),g.ref!==void 0&&(M=g.ref);for(v in g)s.call(g,v)&&!l.hasOwnProperty(v)&&(E[v]=g[v]);if(f&&f.defaultProps)for(v in g=f.defaultProps,g)E[v]===void 0&&(E[v]=g[v]);return{$$typeof:e,type:f,key:S,ref:M,props:E,_owner:o.current}}return qa.Fragment=t,qa.jsx=h,qa.jsxs=h,qa}var Dg;function I0(){return Dg||(Dg=1,Td.exports=T0()),Td.exports}var A=I0(),he=_f();const Ee=A_(he),S0=w0({__proto__:null,default:Ee},[he]);var $u={},Sd={exports:{}},nn={},Ad={exports:{}},Cd={};var Vg;function A0(){return Vg||(Vg=1,(function(r){function e(ne,ge){var ae=ne.length;ne.push(ge);e:for(;0<ae;){var L=ae-1>>>1,X=ne[L];if(0<o(X,ge))ne[L]=ge,ne[ae]=X,ae=L;else break e}}function t(ne){return ne.length===0?null:ne[0]}function s(ne){if(ne.length===0)return null;var ge=ne[0],ae=ne.pop();if(ae!==ge){ne[0]=ae;e:for(var L=0,X=ne.length,Ae=X>>>1;L<Ae;){var Pe=2*(L+1)-1,xe=ne[Pe],De=Pe+1,$e=ne[De];if(0>o(xe,ae))De<X&&0>o($e,xe)?(ne[L]=$e,ne[De]=ae,L=De):(ne[L]=xe,ne[Pe]=ae,L=Pe);else if(De<X&&0>o($e,ae))ne[L]=$e,ne[De]=ae,L=De;else break e}}return ge}function o(ne,ge){var ae=ne.sortIndex-ge.sortIndex;return ae!==0?ae:ne.id-ge.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var h=Date,f=h.now();r.unstable_now=function(){return h.now()-f}}var g=[],y=[],v=1,E=null,S=3,M=!1,H=!1,$=!1,j=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,se=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function q(ne){for(var ge=t(y);ge!==null;){if(ge.callback===null)s(y);else if(ge.startTime<=ne)s(y),ge.sortIndex=ge.expirationTime,e(g,ge);else break;ge=t(y)}}function W(ne){if($=!1,q(ne),!H)if(t(g)!==null)H=!0,Ue(te);else{var ge=t(y);ge!==null&&Re(W,ge.startTime-ne)}}function te(ne,ge){H=!1,$&&($=!1,K(I),I=-1),M=!0;var ae=S;try{for(q(ge),E=t(g);E!==null&&(!(E.expirationTime>ge)||ne&&!x());){var L=E.callback;if(typeof L=="function"){E.callback=null,S=E.priorityLevel;var X=L(E.expirationTime<=ge);ge=r.unstable_now(),typeof X=="function"?E.callback=X:E===t(g)&&s(g),q(ge)}else s(g);E=t(g)}if(E!==null)var Ae=!0;else{var Pe=t(y);Pe!==null&&Re(W,Pe.startTime-ge),Ae=!1}return Ae}finally{E=null,S=ae,M=!1}}var ee=!1,C=null,I=-1,P=5,N=-1;function x(){return!(r.unstable_now()-N<P)}function O(){if(C!==null){var ne=r.unstable_now();N=ne;var ge=!0;try{ge=C(!0,ne)}finally{ge?k():(ee=!1,C=null)}}else ee=!1}var k;if(typeof se=="function")k=function(){se(O)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,Ve=fe.port2;fe.port1.onmessage=O,k=function(){Ve.postMessage(null)}}else k=function(){j(O,0)};function Ue(ne){C=ne,ee||(ee=!0,k())}function Re(ne,ge){I=j(function(){ne(r.unstable_now())},ge)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(ne){ne.callback=null},r.unstable_continueExecution=function(){H||M||(H=!0,Ue(te))},r.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<ne?Math.floor(1e3/ne):5},r.unstable_getCurrentPriorityLevel=function(){return S},r.unstable_getFirstCallbackNode=function(){return t(g)},r.unstable_next=function(ne){switch(S){case 1:case 2:case 3:var ge=3;break;default:ge=S}var ae=S;S=ge;try{return ne()}finally{S=ae}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(ne,ge){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var ae=S;S=ne;try{return ge()}finally{S=ae}},r.unstable_scheduleCallback=function(ne,ge,ae){var L=r.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?L+ae:L):ae=L,ne){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=ae+X,ne={id:v++,callback:ge,priorityLevel:ne,startTime:ae,expirationTime:X,sortIndex:-1},ae>L?(ne.sortIndex=ae,e(y,ne),t(g)===null&&ne===t(y)&&($?(K(I),I=-1):$=!0,Re(W,ae-L))):(ne.sortIndex=X,e(g,ne),H||M||(H=!0,Ue(te))),ne},r.unstable_shouldYield=x,r.unstable_wrapCallback=function(ne){var ge=S;return function(){var ae=S;S=ge;try{return ne.apply(this,arguments)}finally{S=ae}}}})(Cd)),Cd}var Og;function C0(){return Og||(Og=1,Ad.exports=A0()),Ad.exports}var Mg;function R0(){if(Mg)return nn;Mg=1;var r=_f(),e=C0();function t(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(n,i){h(n,i),h(n+"Capture",i)}function h(n,i){for(o[n]=i,n=0;n<i.length;n++)s.add(i[n])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},E={};function S(n){return g.call(E,n)?!0:g.call(v,n)?!1:y.test(n)?E[n]=!0:(v[n]=!0,!1)}function M(n,i,a,c){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function H(n,i,a,c){if(i===null||typeof i>"u"||M(n,i,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function $(n,i,a,c,d,p,w){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=i,this.sanitizeURL=p,this.removeEmptyString=w}var j={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){j[n]=new $(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];j[i]=new $(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){j[n]=new $(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){j[n]=new $(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){j[n]=new $(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){j[n]=new $(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){j[n]=new $(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){j[n]=new $(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){j[n]=new $(n,5,!1,n.toLowerCase(),null,!1,!1)});var K=/[\-:]([a-z])/g;function se(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(K,se);j[i]=new $(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(K,se);j[i]=new $(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(K,se);j[i]=new $(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){j[n]=new $(n,1,!1,n.toLowerCase(),null,!1,!1)}),j.xlinkHref=new $("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){j[n]=new $(n,1,!1,n.toLowerCase(),null,!0,!0)});function q(n,i,a,c){var d=j.hasOwnProperty(i)?j[i]:null;(d!==null?d.type!==0:c||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(H(i,a,d,c)&&(a=null),c||d===null?S(i)&&(a===null?n.removeAttribute(i):n.setAttribute(i,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(i=d.attributeName,c=d.attributeNamespace,a===null?n.removeAttribute(i):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?n.setAttributeNS(c,i,a):n.setAttribute(i,a))))}var W=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,te=Symbol.for("react.element"),ee=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),x=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),fe=Symbol.for("react.suspense_list"),Ve=Symbol.for("react.memo"),Ue=Symbol.for("react.lazy"),Re=Symbol.for("react.offscreen"),ne=Symbol.iterator;function ge(n){return n===null||typeof n!="object"?null:(n=ne&&n[ne]||n["@@iterator"],typeof n=="function"?n:null)}var ae=Object.assign,L;function X(n){if(L===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);L=i&&i[1]||""}return`
`+L+n}var Ae=!1;function Pe(n,i){if(!n||Ae)return"";Ae=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(B){var c=B}Reflect.construct(n,[],i)}else{try{i.call()}catch(B){c=B}n.call(i.prototype)}else{try{throw Error()}catch(B){c=B}n()}}catch(B){if(B&&c&&typeof B.stack=="string"){for(var d=B.stack.split(`
`),p=c.stack.split(`
`),w=d.length-1,R=p.length-1;1<=w&&0<=R&&d[w]!==p[R];)R--;for(;1<=w&&0<=R;w--,R--)if(d[w]!==p[R]){if(w!==1||R!==1)do if(w--,R--,0>R||d[w]!==p[R]){var D=`
`+d[w].replace(" at new "," at ");return n.displayName&&D.includes("<anonymous>")&&(D=D.replace("<anonymous>",n.displayName)),D}while(1<=w&&0<=R);break}}}finally{Ae=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?X(n):""}function xe(n){switch(n.tag){case 5:return X(n.type);case 16:return X("Lazy");case 13:return X("Suspense");case 19:return X("SuspenseList");case 0:case 2:case 15:return n=Pe(n.type,!1),n;case 11:return n=Pe(n.type.render,!1),n;case 1:return n=Pe(n.type,!0),n;default:return""}}function De(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case C:return"Fragment";case ee:return"Portal";case P:return"Profiler";case I:return"StrictMode";case k:return"Suspense";case fe:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case x:return(n.displayName||"Context")+".Consumer";case N:return(n._context.displayName||"Context")+".Provider";case O:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Ve:return i=n.displayName||null,i!==null?i:De(n.type)||"Memo";case Ue:i=n._payload,n=n._init;try{return De(n(i))}catch{}}return null}function $e(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return De(i);case 8:return i===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function je(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ge(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function At(n){var i=Ge(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),c=""+n[i];if(!n.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,p=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return d.call(this)},set:function(w){c=""+w,p.call(this,w)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function vn(n){n._valueTracker||(n._valueTracker=At(n))}function Xo(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),c="";return n&&(c=Ge(n)?n.checked?"true":"false":n.value),n=c,n!==a?(i.setValue(n),!0):!1}function $r(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function xi(n,i){var a=i.checked;return ae({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function Pl(n,i){var a=i.defaultValue==null?"":i.defaultValue,c=i.checked!=null?i.checked:i.defaultChecked;a=je(i.value!=null?i.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Di(n,i){i=i.checked,i!=null&&q(n,"checked",i,!1)}function $s(n,i){Di(n,i);var a=je(i.value),c=i.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?mt(n,i.type,a):i.hasOwnProperty("defaultValue")&&mt(n,i.type,je(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function Yo(n,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var c=i.type;if(!(c!=="submit"&&c!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,a||i===n.value||(n.value=i),n.defaultValue=i}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function mt(n,i,a){(i!=="number"||$r(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var ut=Array.isArray;function Pn(n,i,a,c){if(n=n.options,i){i={};for(var d=0;d<a.length;d++)i["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=i.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&c&&(n[a].defaultSelected=!0)}else{for(a=""+je(a),i=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}i!==null||n[d].disabled||(i=n[d])}i!==null&&(i.selected=!0)}}function Jo(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return ae({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Zo(n,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(t(92));if(ut(a)){if(1<a.length)throw Error(t(93));a=a[0]}i=a}i==null&&(i=""),a=i}n._wrapperState={initialValue:je(a)}}function kl(n,i){var a=je(i.value),c=je(i.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),i.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function qr(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function ea(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vi(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?ea(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Wr,Nl=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,c,d){MSApp.execUnsafeLocalFunction(function(){return n(i,a,c,d)})}:n})(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(Wr=Wr||document.createElement("div"),Wr.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Wr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function qs(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var Hr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xl=["Webkit","ms","Moz","O"];Object.keys(Hr).forEach(function(n){xl.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),Hr[i]=Hr[n]})});function Gr(n,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||Hr.hasOwnProperty(n)&&Hr[n]?(""+i).trim():i+"px"}function Oi(n,i){n=n.style;for(var a in i)if(i.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=Gr(a,i[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,d):n[a]=d}}var ta=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function kn(n,i){if(i){if(ta[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function Mi(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kr=null;function Li(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var pr=null,mr=null,at=null;function na(n){if(n=ka(n)){if(typeof pr!="function")throw Error(t(280));var i=n.stateNode;i&&(i=su(i),pr(n.stateNode,n.type,i))}}function Qr(n){mr?at?at.push(n):at=[n]:mr=n}function Xr(){if(mr){var n=mr,i=at;if(at=mr=null,na(n),i)for(n=0;n<i.length;n++)na(i[n])}}function Dl(n,i){return n(i)}function Vl(){}var zn=!1;function Ol(n,i,a){if(zn)return n(i,a);zn=!0;try{return Dl(n,i,a)}finally{zn=!1,(mr!==null||at!==null)&&(Vl(),Xr())}}function Ws(n,i){var a=n.stateNode;if(a===null)return null;var c=su(a);if(c===null)return null;a=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,i,typeof a));return a}var Yr=!1;if(f)try{var Jr={};Object.defineProperty(Jr,"passive",{get:function(){Yr=!0}}),window.addEventListener("test",Jr,Jr),window.removeEventListener("test",Jr,Jr)}catch{Yr=!1}function Ml(n,i,a,c,d,p,w,R,D){var B=Array.prototype.slice.call(arguments,3);try{i.apply(a,B)}catch(J){this.onError(J)}}var gr=!1,$n=null,bi=!1,wn=null,Ll={onError:function(n){gr=!0,$n=n}};function bl(n,i,a,c,d,p,w,R,D){gr=!1,$n=null,Ml.apply(Ll,arguments)}function ra(n,i,a,c,d,p,w,R,D){if(bl.apply(this,arguments),gr){if(gr){var B=$n;gr=!1,$n=null}else throw Error(t(198));bi||(bi=!0,wn=B)}}function Nn(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function sa(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function jl(n){if(Nn(n)!==n)throw Error(t(188))}function Fl(n){var i=n.alternate;if(!i){if(i=Nn(n),i===null)throw Error(t(188));return i!==n?null:n}for(var a=n,c=i;;){var d=a.return;if(d===null)break;var p=d.alternate;if(p===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===a)return jl(d),n;if(p===c)return jl(d),i;p=p.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=p;else{for(var w=!1,R=d.child;R;){if(R===a){w=!0,a=d,c=p;break}if(R===c){w=!0,c=d,a=p;break}R=R.sibling}if(!w){for(R=p.child;R;){if(R===a){w=!0,a=p,c=d;break}if(R===c){w=!0,c=p,a=d;break}R=R.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:i}function Ul(n){return n=Fl(n),n!==null?Hs(n):null}function Hs(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=Hs(n);if(i!==null)return i;n=n.sibling}return null}var ia=e.unstable_scheduleCallback,ji=e.unstable_cancelCallback,Gs=e.unstable_shouldYield,yr=e.unstable_requestPaint,Je=e.unstable_now,Zc=e.unstable_getCurrentPriorityLevel,Fi=e.unstable_ImmediatePriority,oa=e.unstable_UserBlockingPriority,Ks=e.unstable_NormalPriority,aa=e.unstable_LowPriority,Ui=e.unstable_IdlePriority,Qs=null,sn=null;function Bl(n){if(sn&&typeof sn.onCommitFiberRoot=="function")try{sn.onCommitFiberRoot(Qs,n,void 0,(n.current.flags&128)===128)}catch{}}var on=Math.clz32?Math.clz32:Xs,qn=Math.log,En=Math.LN2;function Xs(n){return n>>>=0,n===0?32:31-(qn(n)/En|0)|0}var Wn=64,Zr=4194304;function He(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function _r(n,i){var a=n.pendingLanes;if(a===0)return 0;var c=0,d=n.suspendedLanes,p=n.pingedLanes,w=a&268435455;if(w!==0){var R=w&~d;R!==0?c=He(R):(p&=w,p!==0&&(c=He(p)))}else w=a&~d,w!==0?c=He(w):p!==0&&(c=He(p));if(c===0)return 0;if(i!==0&&i!==c&&(i&d)===0&&(d=c&-c,p=i&-i,d>=p||d===16&&(p&4194240)!==0))return i;if((c&4)!==0&&(c|=a&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=c;0<i;)a=31-on(i),d=1<<a,c|=n[a],i&=~d;return c}function Ys(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Js(n,i){for(var a=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,p=n.pendingLanes;0<p;){var w=31-on(p),R=1<<w,D=d[w];D===-1?((R&a)===0||(R&c)!==0)&&(d[w]=Ys(R,i)):D<=i&&(n.expiredLanes|=R),p&=~R}}function la(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function ua(){var n=Wn;return Wn<<=1,(Wn&4194240)===0&&(Wn=64),n}function ca(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function Zs(n,i,a){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-on(i),n[i]=a}function eh(n,i){var a=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-on(a),p=1<<d;i[d]=0,c[d]=-1,n[d]=-1,a&=~p}}function ha(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var c=31-on(a),d=1<<c;d&i|n[c]&i&&(n[c]|=i),a&=~d}}var Fe=0;function Hn(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var da,Bi,fa,pa,ma,Gn=!1,zi=[],Kn=null,Qn=null,xt=null,ei=new Map,vr=new Map,an=[],zl="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function es(n,i){switch(n){case"focusin":case"focusout":Kn=null;break;case"dragenter":case"dragleave":Qn=null;break;case"mouseover":case"mouseout":xt=null;break;case"pointerover":case"pointerout":ei.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":vr.delete(i.pointerId)}}function xn(n,i,a,c,d,p){return n===null||n.nativeEvent!==p?(n={blockedOn:i,domEventName:a,eventSystemFlags:c,nativeEvent:p,targetContainers:[d]},i!==null&&(i=ka(i),i!==null&&Bi(i)),n):(n.eventSystemFlags|=c,i=n.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),n)}function $l(n,i,a,c,d){switch(i){case"focusin":return Kn=xn(Kn,n,i,a,c,d),!0;case"dragenter":return Qn=xn(Qn,n,i,a,c,d),!0;case"mouseover":return xt=xn(xt,n,i,a,c,d),!0;case"pointerover":var p=d.pointerId;return ei.set(p,xn(ei.get(p)||null,n,i,a,c,d)),!0;case"gotpointercapture":return p=d.pointerId,vr.set(p,xn(vr.get(p)||null,n,i,a,c,d)),!0}return!1}function $i(n){var i=si(n.target);if(i!==null){var a=Nn(i);if(a!==null){if(i=a.tag,i===13){if(i=sa(a),i!==null){n.blockedOn=i,ma(n.priority,function(){fa(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Xe(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=qi(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Kr=c,a.target.dispatchEvent(c),Kr=null}else return i=ka(a),i!==null&&Bi(i),n.blockedOn=a,!1;i.shift()}return!0}function ql(n,i,a){Xe(n)&&a.delete(i)}function th(){Gn=!1,Kn!==null&&Xe(Kn)&&(Kn=null),Qn!==null&&Xe(Qn)&&(Qn=null),xt!==null&&Xe(xt)&&(xt=null),ei.forEach(ql),vr.forEach(ql)}function ts(n,i){n.blockedOn===i&&(n.blockedOn=null,Gn||(Gn=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,th)))}function ns(n){function i(d){return ts(d,n)}if(0<zi.length){ts(zi[0],n);for(var a=1;a<zi.length;a++){var c=zi[a];c.blockedOn===n&&(c.blockedOn=null)}}for(Kn!==null&&ts(Kn,n),Qn!==null&&ts(Qn,n),xt!==null&&ts(xt,n),ei.forEach(i),vr.forEach(i),a=0;a<an.length;a++)c=an[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<an.length&&(a=an[0],a.blockedOn===null);)$i(a),a.blockedOn===null&&an.shift()}var wr=W.ReactCurrentBatchConfig,Er=!0;function Xn(n,i,a,c){var d=Fe,p=wr.transition;wr.transition=null;try{Fe=1,ga(n,i,a,c)}finally{Fe=d,wr.transition=p}}function Wl(n,i,a,c){var d=Fe,p=wr.transition;wr.transition=null;try{Fe=4,ga(n,i,a,c)}finally{Fe=d,wr.transition=p}}function ga(n,i,a,c){if(Er){var d=qi(n,i,a,c);if(d===null)dh(n,i,c,Yn,a),es(n,c);else if($l(d,n,i,a,c))c.stopPropagation();else if(es(n,c),i&4&&-1<zl.indexOf(n)){for(;d!==null;){var p=ka(d);if(p!==null&&da(p),p=qi(n,i,a,c),p===null&&dh(n,i,c,Yn,a),p===d)break;d=p}d!==null&&c.stopPropagation()}else dh(n,i,c,null,a)}}var Yn=null;function qi(n,i,a,c){if(Yn=null,n=Li(c),n=si(n),n!==null)if(i=Nn(n),i===null)n=null;else if(a=i.tag,a===13){if(n=sa(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return Yn=n,null}function Wi(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zc()){case Fi:return 1;case oa:return 4;case Ks:case aa:return 16;case Ui:return 536870912;default:return 16}default:return 16}}var ln=null,Hi=null,Tr=null;function Hl(){if(Tr)return Tr;var n,i=Hi,a=i.length,c,d="value"in ln?ln.value:ln.textContent,p=d.length;for(n=0;n<a&&i[n]===d[n];n++);var w=a-n;for(c=1;c<=w&&i[a-c]===d[p-c];c++);return Tr=d.slice(n,1<c?1-c:void 0)}function ti(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Jn(){return!0}function ya(){return!1}function Ut(n){function i(a,c,d,p,w){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=p,this.target=w,this.currentTarget=null;for(var R in n)n.hasOwnProperty(R)&&(a=n[R],this[R]=a?a(p):p[R]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Jn:ya,this.isPropagationStopped=ya,this}return ae(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Jn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Jn)},persist:function(){},isPersistent:Jn}),i}var Zn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ni=Ut(Zn),rs=ae({},Zn,{view:0,detail:0}),Gi=Ut(rs),Ki,Qi,un,ri=ae({},rs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ke,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==un&&(un&&n.type==="mousemove"?(Ki=n.screenX-un.screenX,Qi=n.screenY-un.screenY):Qi=Ki=0,un=n),Ki)},movementY:function(n){return"movementY"in n?n.movementY:Qi}}),_a=Ut(ri),Gl=ae({},ri,{dataTransfer:0}),Kl=Ut(Gl),Xi=ae({},rs,{relatedTarget:0}),Dt=Ut(Xi),Ql=ae({},Zn,{animationName:0,elapsedTime:0,pseudoElement:0}),Xl=Ut(Ql),ss=ae({},Zn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),u=Ut(ss),m=ae({},Zn,{data:0}),_=Ut(m),T={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},F={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},z={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ie(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=z[n])?!!i[n]:!1}function ke(){return ie}var ct=ae({},rs,{key:function(n){if(n.key){var i=T[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=ti(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?F[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ke,charCode:function(n){return n.type==="keypress"?ti(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ti(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Ke=Ut(ct),gt=ae({},ri,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cn=Ut(gt),Ir=ae({},rs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ke}),er=Ut(Ir),tr=ae({},Zn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Yi=Ut(tr),va=ae({},ri,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),pE=Ut(va),mE=[9,13,27,32],nh=f&&"CompositionEvent"in window,wa=null;f&&"documentMode"in document&&(wa=document.documentMode);var gE=f&&"TextEvent"in window&&!wa,Ep=f&&(!nh||wa&&8<wa&&11>=wa),Tp=" ",Ip=!1;function Sp(n,i){switch(n){case"keyup":return mE.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ap(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ji=!1;function yE(n,i){switch(n){case"compositionend":return Ap(i);case"keypress":return i.which!==32?null:(Ip=!0,Tp);case"textInput":return n=i.data,n===Tp&&Ip?null:n;default:return null}}function _E(n,i){if(Ji)return n==="compositionend"||!nh&&Sp(n,i)?(n=Hl(),Tr=Hi=ln=null,Ji=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Ep&&i.locale!=="ko"?null:i.data;default:return null}}var vE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cp(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!vE[n.type]:i==="textarea"}function Rp(n,i,a,c){Qr(c),i=tu(i,"onChange"),0<i.length&&(a=new ni("onChange","change",null,a,c),n.push({event:a,listeners:i}))}var Ea=null,Ta=null;function wE(n){Wp(n,0)}function Yl(n){var i=ro(n);if(Xo(i))return n}function EE(n,i){if(n==="change")return i}var Pp=!1;if(f){var rh;if(f){var sh="oninput"in document;if(!sh){var kp=document.createElement("div");kp.setAttribute("oninput","return;"),sh=typeof kp.oninput=="function"}rh=sh}else rh=!1;Pp=rh&&(!document.documentMode||9<document.documentMode)}function Np(){Ea&&(Ea.detachEvent("onpropertychange",xp),Ta=Ea=null)}function xp(n){if(n.propertyName==="value"&&Yl(Ta)){var i=[];Rp(i,Ta,n,Li(n)),Ol(wE,i)}}function TE(n,i,a){n==="focusin"?(Np(),Ea=i,Ta=a,Ea.attachEvent("onpropertychange",xp)):n==="focusout"&&Np()}function IE(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Yl(Ta)}function SE(n,i){if(n==="click")return Yl(i)}function AE(n,i){if(n==="input"||n==="change")return Yl(i)}function CE(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Dn=typeof Object.is=="function"?Object.is:CE;function Ia(n,i){if(Dn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),c=Object.keys(i);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!g.call(i,d)||!Dn(n[d],i[d]))return!1}return!0}function Dp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Vp(n,i){var a=Dp(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=i&&c>=i)return{node:a,offset:i-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Dp(a)}}function Op(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Op(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Mp(){for(var n=window,i=$r();i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=$r(n.document)}return i}function ih(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function RE(n){var i=Mp(),a=n.focusedElem,c=n.selectionRange;if(i!==a&&a&&a.ownerDocument&&Op(a.ownerDocument.documentElement,a)){if(c!==null&&ih(a)){if(i=c.start,n=c.end,n===void 0&&(n=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(n,a.value.length);else if(n=(i=a.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,p=Math.min(c.start,d);c=c.end===void 0?p:Math.min(c.end,d),!n.extend&&p>c&&(d=c,c=p,p=d),d=Vp(a,p);var w=Vp(a,c);d&&w&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==w.node||n.focusOffset!==w.offset)&&(i=i.createRange(),i.setStart(d.node,d.offset),n.removeAllRanges(),p>c?(n.addRange(i),n.extend(w.node,w.offset)):(i.setEnd(w.node,w.offset),n.addRange(i)))}}for(i=[],n=a;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)n=i[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var PE=f&&"documentMode"in document&&11>=document.documentMode,Zi=null,oh=null,Sa=null,ah=!1;function Lp(n,i,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;ah||Zi==null||Zi!==$r(c)||(c=Zi,"selectionStart"in c&&ih(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Sa&&Ia(Sa,c)||(Sa=c,c=tu(oh,"onSelect"),0<c.length&&(i=new ni("onSelect","select",null,i,a),n.push({event:i,listeners:c}),i.target=Zi)))}function Jl(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var eo={animationend:Jl("Animation","AnimationEnd"),animationiteration:Jl("Animation","AnimationIteration"),animationstart:Jl("Animation","AnimationStart"),transitionend:Jl("Transition","TransitionEnd")},lh={},bp={};f&&(bp=document.createElement("div").style,"AnimationEvent"in window||(delete eo.animationend.animation,delete eo.animationiteration.animation,delete eo.animationstart.animation),"TransitionEvent"in window||delete eo.transitionend.transition);function Zl(n){if(lh[n])return lh[n];if(!eo[n])return n;var i=eo[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in bp)return lh[n]=i[a];return n}var jp=Zl("animationend"),Fp=Zl("animationiteration"),Up=Zl("animationstart"),Bp=Zl("transitionend"),zp=new Map,$p="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function is(n,i){zp.set(n,i),l(i,[n])}for(var uh=0;uh<$p.length;uh++){var ch=$p[uh],kE=ch.toLowerCase(),NE=ch[0].toUpperCase()+ch.slice(1);is(kE,"on"+NE)}is(jp,"onAnimationEnd"),is(Fp,"onAnimationIteration"),is(Up,"onAnimationStart"),is("dblclick","onDoubleClick"),is("focusin","onFocus"),is("focusout","onBlur"),is(Bp,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Aa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Aa));function qp(n,i,a){var c=n.type||"unknown-event";n.currentTarget=a,ra(c,i,void 0,n),n.currentTarget=null}function Wp(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],d=c.event;c=c.listeners;e:{var p=void 0;if(i)for(var w=c.length-1;0<=w;w--){var R=c[w],D=R.instance,B=R.currentTarget;if(R=R.listener,D!==p&&d.isPropagationStopped())break e;qp(d,R,B),p=D}else for(w=0;w<c.length;w++){if(R=c[w],D=R.instance,B=R.currentTarget,R=R.listener,D!==p&&d.isPropagationStopped())break e;qp(d,R,B),p=D}}}if(bi)throw n=wn,bi=!1,wn=null,n}function Ze(n,i){var a=i[_h];a===void 0&&(a=i[_h]=new Set);var c=n+"__bubble";a.has(c)||(Hp(i,n,2,!1),a.add(c))}function hh(n,i,a){var c=0;i&&(c|=4),Hp(a,n,c,i)}var eu="_reactListening"+Math.random().toString(36).slice(2);function Ca(n){if(!n[eu]){n[eu]=!0,s.forEach(function(a){a!=="selectionchange"&&(xE.has(a)||hh(a,!1,n),hh(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[eu]||(i[eu]=!0,hh("selectionchange",!1,i))}}function Hp(n,i,a,c){switch(Wi(i)){case 1:var d=Xn;break;case 4:d=Wl;break;default:d=ga}a=d.bind(null,i,a,n),d=void 0,!Yr||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(i,a,{capture:!0,passive:d}):n.addEventListener(i,a,!0):d!==void 0?n.addEventListener(i,a,{passive:d}):n.addEventListener(i,a,!1)}function dh(n,i,a,c,d){var p=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var R=c.stateNode.containerInfo;if(R===d||R.nodeType===8&&R.parentNode===d)break;if(w===4)for(w=c.return;w!==null;){var D=w.tag;if((D===3||D===4)&&(D=w.stateNode.containerInfo,D===d||D.nodeType===8&&D.parentNode===d))return;w=w.return}for(;R!==null;){if(w=si(R),w===null)return;if(D=w.tag,D===5||D===6){c=p=w;continue e}R=R.parentNode}}c=c.return}Ol(function(){var B=p,J=Li(a),Z=[];e:{var Y=zp.get(n);if(Y!==void 0){var le=ni,de=n;switch(n){case"keypress":if(ti(a)===0)break e;case"keydown":case"keyup":le=Ke;break;case"focusin":de="focus",le=Dt;break;case"focusout":de="blur",le=Dt;break;case"beforeblur":case"afterblur":le=Dt;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=_a;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=Kl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=er;break;case jp:case Fp:case Up:le=Xl;break;case Bp:le=Yi;break;case"scroll":le=Gi;break;case"wheel":le=pE;break;case"copy":case"cut":case"paste":le=u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=cn}var pe=(i&4)!==0,ht=!pe&&n==="scroll",b=pe?Y!==null?Y+"Capture":null:Y;pe=[];for(var V=B,U;V!==null;){U=V;var re=U.stateNode;if(U.tag===5&&re!==null&&(U=re,b!==null&&(re=Ws(V,b),re!=null&&pe.push(Ra(V,re,U)))),ht)break;V=V.return}0<pe.length&&(Y=new le(Y,de,null,a,J),Z.push({event:Y,listeners:pe}))}}if((i&7)===0){e:{if(Y=n==="mouseover"||n==="pointerover",le=n==="mouseout"||n==="pointerout",Y&&a!==Kr&&(de=a.relatedTarget||a.fromElement)&&(si(de)||de[Sr]))break e;if((le||Y)&&(Y=J.window===J?J:(Y=J.ownerDocument)?Y.defaultView||Y.parentWindow:window,le?(de=a.relatedTarget||a.toElement,le=B,de=de?si(de):null,de!==null&&(ht=Nn(de),de!==ht||de.tag!==5&&de.tag!==6)&&(de=null)):(le=null,de=B),le!==de)){if(pe=_a,re="onMouseLeave",b="onMouseEnter",V="mouse",(n==="pointerout"||n==="pointerover")&&(pe=cn,re="onPointerLeave",b="onPointerEnter",V="pointer"),ht=le==null?Y:ro(le),U=de==null?Y:ro(de),Y=new pe(re,V+"leave",le,a,J),Y.target=ht,Y.relatedTarget=U,re=null,si(J)===B&&(pe=new pe(b,V+"enter",de,a,J),pe.target=U,pe.relatedTarget=ht,re=pe),ht=re,le&&de)t:{for(pe=le,b=de,V=0,U=pe;U;U=to(U))V++;for(U=0,re=b;re;re=to(re))U++;for(;0<V-U;)pe=to(pe),V--;for(;0<U-V;)b=to(b),U--;for(;V--;){if(pe===b||b!==null&&pe===b.alternate)break t;pe=to(pe),b=to(b)}pe=null}else pe=null;le!==null&&Gp(Z,Y,le,pe,!1),de!==null&&ht!==null&&Gp(Z,ht,de,pe,!0)}}e:{if(Y=B?ro(B):window,le=Y.nodeName&&Y.nodeName.toLowerCase(),le==="select"||le==="input"&&Y.type==="file")var me=EE;else if(Cp(Y))if(Pp)me=AE;else{me=IE;var ve=TE}else(le=Y.nodeName)&&le.toLowerCase()==="input"&&(Y.type==="checkbox"||Y.type==="radio")&&(me=SE);if(me&&(me=me(n,B))){Rp(Z,me,a,J);break e}ve&&ve(n,Y,B),n==="focusout"&&(ve=Y._wrapperState)&&ve.controlled&&Y.type==="number"&&mt(Y,"number",Y.value)}switch(ve=B?ro(B):window,n){case"focusin":(Cp(ve)||ve.contentEditable==="true")&&(Zi=ve,oh=B,Sa=null);break;case"focusout":Sa=oh=Zi=null;break;case"mousedown":ah=!0;break;case"contextmenu":case"mouseup":case"dragend":ah=!1,Lp(Z,a,J);break;case"selectionchange":if(PE)break;case"keydown":case"keyup":Lp(Z,a,J)}var we;if(nh)e:{switch(n){case"compositionstart":var Ie="onCompositionStart";break e;case"compositionend":Ie="onCompositionEnd";break e;case"compositionupdate":Ie="onCompositionUpdate";break e}Ie=void 0}else Ji?Sp(n,a)&&(Ie="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Ie="onCompositionStart");Ie&&(Ep&&a.locale!=="ko"&&(Ji||Ie!=="onCompositionStart"?Ie==="onCompositionEnd"&&Ji&&(we=Hl()):(ln=J,Hi="value"in ln?ln.value:ln.textContent,Ji=!0)),ve=tu(B,Ie),0<ve.length&&(Ie=new _(Ie,n,null,a,J),Z.push({event:Ie,listeners:ve}),we?Ie.data=we:(we=Ap(a),we!==null&&(Ie.data=we)))),(we=gE?yE(n,a):_E(n,a))&&(B=tu(B,"onBeforeInput"),0<B.length&&(J=new _("onBeforeInput","beforeinput",null,a,J),Z.push({event:J,listeners:B}),J.data=we))}Wp(Z,i)})}function Ra(n,i,a){return{instance:n,listener:i,currentTarget:a}}function tu(n,i){for(var a=i+"Capture",c=[];n!==null;){var d=n,p=d.stateNode;d.tag===5&&p!==null&&(d=p,p=Ws(n,a),p!=null&&c.unshift(Ra(n,p,d)),p=Ws(n,i),p!=null&&c.push(Ra(n,p,d))),n=n.return}return c}function to(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Gp(n,i,a,c,d){for(var p=i._reactName,w=[];a!==null&&a!==c;){var R=a,D=R.alternate,B=R.stateNode;if(D!==null&&D===c)break;R.tag===5&&B!==null&&(R=B,d?(D=Ws(a,p),D!=null&&w.unshift(Ra(a,D,R))):d||(D=Ws(a,p),D!=null&&w.push(Ra(a,D,R)))),a=a.return}w.length!==0&&n.push({event:i,listeners:w})}var DE=/\r\n?/g,VE=/\u0000|\uFFFD/g;function Kp(n){return(typeof n=="string"?n:""+n).replace(DE,`
`).replace(VE,"")}function nu(n,i,a){if(i=Kp(i),Kp(n)!==i&&a)throw Error(t(425))}function ru(){}var fh=null,ph=null;function mh(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var gh=typeof setTimeout=="function"?setTimeout:void 0,OE=typeof clearTimeout=="function"?clearTimeout:void 0,Qp=typeof Promise=="function"?Promise:void 0,ME=typeof queueMicrotask=="function"?queueMicrotask:typeof Qp<"u"?function(n){return Qp.resolve(null).then(n).catch(LE)}:gh;function LE(n){setTimeout(function(){throw n})}function yh(n,i){var a=i,c=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){n.removeChild(d),ns(i);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);ns(i)}function os(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function Xp(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}var no=Math.random().toString(36).slice(2),nr="__reactFiber$"+no,Pa="__reactProps$"+no,Sr="__reactContainer$"+no,_h="__reactEvents$"+no,bE="__reactListeners$"+no,jE="__reactHandles$"+no;function si(n){var i=n[nr];if(i)return i;for(var a=n.parentNode;a;){if(i=a[Sr]||a[nr]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=Xp(n);n!==null;){if(a=n[nr])return a;n=Xp(n)}return i}n=a,a=n.parentNode}return null}function ka(n){return n=n[nr]||n[Sr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function ro(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function su(n){return n[Pa]||null}var vh=[],so=-1;function as(n){return{current:n}}function et(n){0>so||(n.current=vh[so],vh[so]=null,so--)}function Ye(n,i){so++,vh[so]=n.current,n.current=i}var ls={},Bt=as(ls),Yt=as(!1),ii=ls;function io(n,i){var a=n.type.contextTypes;if(!a)return ls;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===i)return c.__reactInternalMemoizedMaskedChildContext;var d={},p;for(p in a)d[p]=i[p];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=d),d}function Jt(n){return n=n.childContextTypes,n!=null}function iu(){et(Yt),et(Bt)}function Yp(n,i,a){if(Bt.current!==ls)throw Error(t(168));Ye(Bt,i),Ye(Yt,a)}function Jp(n,i,a){var c=n.stateNode;if(i=i.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in i))throw Error(t(108,$e(n)||"Unknown",d));return ae({},a,c)}function ou(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ls,ii=Bt.current,Ye(Bt,n),Ye(Yt,Yt.current),!0}function Zp(n,i,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=Jp(n,i,ii),c.__reactInternalMemoizedMergedChildContext=n,et(Yt),et(Bt),Ye(Bt,n)):et(Yt),Ye(Yt,a)}var Ar=null,au=!1,wh=!1;function em(n){Ar===null?Ar=[n]:Ar.push(n)}function FE(n){au=!0,em(n)}function us(){if(!wh&&Ar!==null){wh=!0;var n=0,i=Fe;try{var a=Ar;for(Fe=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}Ar=null,au=!1}catch(d){throw Ar!==null&&(Ar=Ar.slice(n+1)),ia(Fi,us),d}finally{Fe=i,wh=!1}}return null}var oo=[],ao=0,lu=null,uu=0,Tn=[],In=0,oi=null,Cr=1,Rr="";function ai(n,i){oo[ao++]=uu,oo[ao++]=lu,lu=n,uu=i}function tm(n,i,a){Tn[In++]=Cr,Tn[In++]=Rr,Tn[In++]=oi,oi=n;var c=Cr;n=Rr;var d=32-on(c)-1;c&=~(1<<d),a+=1;var p=32-on(i)+d;if(30<p){var w=d-d%5;p=(c&(1<<w)-1).toString(32),c>>=w,d-=w,Cr=1<<32-on(i)+d|a<<d|c,Rr=p+n}else Cr=1<<p|a<<d|c,Rr=n}function Eh(n){n.return!==null&&(ai(n,1),tm(n,1,0))}function Th(n){for(;n===lu;)lu=oo[--ao],oo[ao]=null,uu=oo[--ao],oo[ao]=null;for(;n===oi;)oi=Tn[--In],Tn[In]=null,Rr=Tn[--In],Tn[In]=null,Cr=Tn[--In],Tn[In]=null}var hn=null,dn=null,rt=!1,Vn=null;function nm(n,i){var a=Rn(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=n,i=n.deletions,i===null?(n.deletions=[a],n.flags|=16):i.push(a)}function rm(n,i){switch(n.tag){case 5:var a=n.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,hn=n,dn=os(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,hn=n,dn=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=oi!==null?{id:Cr,overflow:Rr}:null,n.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=Rn(18,null,null,0),a.stateNode=i,a.return=n,n.child=a,hn=n,dn=null,!0):!1;default:return!1}}function Ih(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Sh(n){if(rt){var i=dn;if(i){var a=i;if(!rm(n,i)){if(Ih(n))throw Error(t(418));i=os(a.nextSibling);var c=hn;i&&rm(n,i)?nm(c,a):(n.flags=n.flags&-4097|2,rt=!1,hn=n)}}else{if(Ih(n))throw Error(t(418));n.flags=n.flags&-4097|2,rt=!1,hn=n}}}function sm(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;hn=n}function cu(n){if(n!==hn)return!1;if(!rt)return sm(n),rt=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!mh(n.type,n.memoizedProps)),i&&(i=dn)){if(Ih(n))throw im(),Error(t(418));for(;i;)nm(n,i),i=os(i.nextSibling)}if(sm(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(i===0){dn=os(n.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}n=n.nextSibling}dn=null}}else dn=hn?os(n.stateNode.nextSibling):null;return!0}function im(){for(var n=dn;n;)n=os(n.nextSibling)}function lo(){dn=hn=null,rt=!1}function Ah(n){Vn===null?Vn=[n]:Vn.push(n)}var UE=W.ReactCurrentBatchConfig;function Na(n,i,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var d=c,p=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===p?i.ref:(i=function(w){var R=d.refs;w===null?delete R[p]:R[p]=w},i._stringRef=p,i)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function hu(n,i){throw n=Object.prototype.toString.call(i),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function om(n){var i=n._init;return i(n._payload)}function am(n){function i(b,V){if(n){var U=b.deletions;U===null?(b.deletions=[V],b.flags|=16):U.push(V)}}function a(b,V){if(!n)return null;for(;V!==null;)i(b,V),V=V.sibling;return null}function c(b,V){for(b=new Map;V!==null;)V.key!==null?b.set(V.key,V):b.set(V.index,V),V=V.sibling;return b}function d(b,V){return b=ys(b,V),b.index=0,b.sibling=null,b}function p(b,V,U){return b.index=U,n?(U=b.alternate,U!==null?(U=U.index,U<V?(b.flags|=2,V):U):(b.flags|=2,V)):(b.flags|=1048576,V)}function w(b){return n&&b.alternate===null&&(b.flags|=2),b}function R(b,V,U,re){return V===null||V.tag!==6?(V=gd(U,b.mode,re),V.return=b,V):(V=d(V,U),V.return=b,V)}function D(b,V,U,re){var me=U.type;return me===C?J(b,V,U.props.children,re,U.key):V!==null&&(V.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===Ue&&om(me)===V.type)?(re=d(V,U.props),re.ref=Na(b,V,U),re.return=b,re):(re=Mu(U.type,U.key,U.props,null,b.mode,re),re.ref=Na(b,V,U),re.return=b,re)}function B(b,V,U,re){return V===null||V.tag!==4||V.stateNode.containerInfo!==U.containerInfo||V.stateNode.implementation!==U.implementation?(V=yd(U,b.mode,re),V.return=b,V):(V=d(V,U.children||[]),V.return=b,V)}function J(b,V,U,re,me){return V===null||V.tag!==7?(V=mi(U,b.mode,re,me),V.return=b,V):(V=d(V,U),V.return=b,V)}function Z(b,V,U){if(typeof V=="string"&&V!==""||typeof V=="number")return V=gd(""+V,b.mode,U),V.return=b,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case te:return U=Mu(V.type,V.key,V.props,null,b.mode,U),U.ref=Na(b,null,V),U.return=b,U;case ee:return V=yd(V,b.mode,U),V.return=b,V;case Ue:var re=V._init;return Z(b,re(V._payload),U)}if(ut(V)||ge(V))return V=mi(V,b.mode,U,null),V.return=b,V;hu(b,V)}return null}function Y(b,V,U,re){var me=V!==null?V.key:null;if(typeof U=="string"&&U!==""||typeof U=="number")return me!==null?null:R(b,V,""+U,re);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case te:return U.key===me?D(b,V,U,re):null;case ee:return U.key===me?B(b,V,U,re):null;case Ue:return me=U._init,Y(b,V,me(U._payload),re)}if(ut(U)||ge(U))return me!==null?null:J(b,V,U,re,null);hu(b,U)}return null}function le(b,V,U,re,me){if(typeof re=="string"&&re!==""||typeof re=="number")return b=b.get(U)||null,R(V,b,""+re,me);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case te:return b=b.get(re.key===null?U:re.key)||null,D(V,b,re,me);case ee:return b=b.get(re.key===null?U:re.key)||null,B(V,b,re,me);case Ue:var ve=re._init;return le(b,V,U,ve(re._payload),me)}if(ut(re)||ge(re))return b=b.get(U)||null,J(V,b,re,me,null);hu(V,re)}return null}function de(b,V,U,re){for(var me=null,ve=null,we=V,Ie=V=0,Pt=null;we!==null&&Ie<U.length;Ie++){we.index>Ie?(Pt=we,we=null):Pt=we.sibling;var We=Y(b,we,U[Ie],re);if(We===null){we===null&&(we=Pt);break}n&&we&&We.alternate===null&&i(b,we),V=p(We,V,Ie),ve===null?me=We:ve.sibling=We,ve=We,we=Pt}if(Ie===U.length)return a(b,we),rt&&ai(b,Ie),me;if(we===null){for(;Ie<U.length;Ie++)we=Z(b,U[Ie],re),we!==null&&(V=p(we,V,Ie),ve===null?me=we:ve.sibling=we,ve=we);return rt&&ai(b,Ie),me}for(we=c(b,we);Ie<U.length;Ie++)Pt=le(we,b,Ie,U[Ie],re),Pt!==null&&(n&&Pt.alternate!==null&&we.delete(Pt.key===null?Ie:Pt.key),V=p(Pt,V,Ie),ve===null?me=Pt:ve.sibling=Pt,ve=Pt);return n&&we.forEach(function(_s){return i(b,_s)}),rt&&ai(b,Ie),me}function pe(b,V,U,re){var me=ge(U);if(typeof me!="function")throw Error(t(150));if(U=me.call(U),U==null)throw Error(t(151));for(var ve=me=null,we=V,Ie=V=0,Pt=null,We=U.next();we!==null&&!We.done;Ie++,We=U.next()){we.index>Ie?(Pt=we,we=null):Pt=we.sibling;var _s=Y(b,we,We.value,re);if(_s===null){we===null&&(we=Pt);break}n&&we&&_s.alternate===null&&i(b,we),V=p(_s,V,Ie),ve===null?me=_s:ve.sibling=_s,ve=_s,we=Pt}if(We.done)return a(b,we),rt&&ai(b,Ie),me;if(we===null){for(;!We.done;Ie++,We=U.next())We=Z(b,We.value,re),We!==null&&(V=p(We,V,Ie),ve===null?me=We:ve.sibling=We,ve=We);return rt&&ai(b,Ie),me}for(we=c(b,we);!We.done;Ie++,We=U.next())We=le(we,b,Ie,We.value,re),We!==null&&(n&&We.alternate!==null&&we.delete(We.key===null?Ie:We.key),V=p(We,V,Ie),ve===null?me=We:ve.sibling=We,ve=We);return n&&we.forEach(function(v0){return i(b,v0)}),rt&&ai(b,Ie),me}function ht(b,V,U,re){if(typeof U=="object"&&U!==null&&U.type===C&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case te:e:{for(var me=U.key,ve=V;ve!==null;){if(ve.key===me){if(me=U.type,me===C){if(ve.tag===7){a(b,ve.sibling),V=d(ve,U.props.children),V.return=b,b=V;break e}}else if(ve.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===Ue&&om(me)===ve.type){a(b,ve.sibling),V=d(ve,U.props),V.ref=Na(b,ve,U),V.return=b,b=V;break e}a(b,ve);break}else i(b,ve);ve=ve.sibling}U.type===C?(V=mi(U.props.children,b.mode,re,U.key),V.return=b,b=V):(re=Mu(U.type,U.key,U.props,null,b.mode,re),re.ref=Na(b,V,U),re.return=b,b=re)}return w(b);case ee:e:{for(ve=U.key;V!==null;){if(V.key===ve)if(V.tag===4&&V.stateNode.containerInfo===U.containerInfo&&V.stateNode.implementation===U.implementation){a(b,V.sibling),V=d(V,U.children||[]),V.return=b,b=V;break e}else{a(b,V);break}else i(b,V);V=V.sibling}V=yd(U,b.mode,re),V.return=b,b=V}return w(b);case Ue:return ve=U._init,ht(b,V,ve(U._payload),re)}if(ut(U))return de(b,V,U,re);if(ge(U))return pe(b,V,U,re);hu(b,U)}return typeof U=="string"&&U!==""||typeof U=="number"?(U=""+U,V!==null&&V.tag===6?(a(b,V.sibling),V=d(V,U),V.return=b,b=V):(a(b,V),V=gd(U,b.mode,re),V.return=b,b=V),w(b)):a(b,V)}return ht}var uo=am(!0),lm=am(!1),du=as(null),fu=null,co=null,Ch=null;function Rh(){Ch=co=fu=null}function Ph(n){var i=du.current;et(du),n._currentValue=i}function kh(n,i,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),n===a)break;n=n.return}}function ho(n,i){fu=n,Ch=co=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&i)!==0&&(Zt=!0),n.firstContext=null)}function Sn(n){var i=n._currentValue;if(Ch!==n)if(n={context:n,memoizedValue:i,next:null},co===null){if(fu===null)throw Error(t(308));co=n,fu.dependencies={lanes:0,firstContext:n}}else co=co.next=n;return i}var li=null;function Nh(n){li===null?li=[n]:li.push(n)}function um(n,i,a,c){var d=i.interleaved;return d===null?(a.next=a,Nh(i)):(a.next=d.next,d.next=a),i.interleaved=a,Pr(n,c)}function Pr(n,i){n.lanes|=i;var a=n.alternate;for(a!==null&&(a.lanes|=i),a=n,n=n.return;n!==null;)n.childLanes|=i,a=n.alternate,a!==null&&(a.childLanes|=i),a=n,n=n.return;return a.tag===3?a.stateNode:null}var cs=!1;function xh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cm(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function kr(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function hs(n,i,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(qe&2)!==0){var d=c.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),c.pending=i,Pr(n,a)}return d=c.interleaved,d===null?(i.next=i,Nh(c)):(i.next=d.next,d.next=i),c.interleaved=i,Pr(n,a)}function pu(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,ha(n,a)}}function hm(n,i){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};p===null?d=p=w:p=p.next=w,a=a.next}while(a!==null);p===null?d=p=i:p=p.next=i}else d=p=i;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}function mu(n,i,a,c){var d=n.updateQueue;cs=!1;var p=d.firstBaseUpdate,w=d.lastBaseUpdate,R=d.shared.pending;if(R!==null){d.shared.pending=null;var D=R,B=D.next;D.next=null,w===null?p=B:w.next=B,w=D;var J=n.alternate;J!==null&&(J=J.updateQueue,R=J.lastBaseUpdate,R!==w&&(R===null?J.firstBaseUpdate=B:R.next=B,J.lastBaseUpdate=D))}if(p!==null){var Z=d.baseState;w=0,J=B=D=null,R=p;do{var Y=R.lane,le=R.eventTime;if((c&Y)===Y){J!==null&&(J=J.next={eventTime:le,lane:0,tag:R.tag,payload:R.payload,callback:R.callback,next:null});e:{var de=n,pe=R;switch(Y=i,le=a,pe.tag){case 1:if(de=pe.payload,typeof de=="function"){Z=de.call(le,Z,Y);break e}Z=de;break e;case 3:de.flags=de.flags&-65537|128;case 0:if(de=pe.payload,Y=typeof de=="function"?de.call(le,Z,Y):de,Y==null)break e;Z=ae({},Z,Y);break e;case 2:cs=!0}}R.callback!==null&&R.lane!==0&&(n.flags|=64,Y=d.effects,Y===null?d.effects=[R]:Y.push(R))}else le={eventTime:le,lane:Y,tag:R.tag,payload:R.payload,callback:R.callback,next:null},J===null?(B=J=le,D=Z):J=J.next=le,w|=Y;if(R=R.next,R===null){if(R=d.shared.pending,R===null)break;Y=R,R=Y.next,Y.next=null,d.lastBaseUpdate=Y,d.shared.pending=null}}while(!0);if(J===null&&(D=Z),d.baseState=D,d.firstBaseUpdate=B,d.lastBaseUpdate=J,i=d.shared.interleaved,i!==null){d=i;do w|=d.lane,d=d.next;while(d!==i)}else p===null&&(d.shared.lanes=0);hi|=w,n.lanes=w,n.memoizedState=Z}}function dm(n,i,a){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var c=n[i],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var xa={},rr=as(xa),Da=as(xa),Va=as(xa);function ui(n){if(n===xa)throw Error(t(174));return n}function Dh(n,i){switch(Ye(Va,i),Ye(Da,n),Ye(rr,xa),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:Vi(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=Vi(i,n)}et(rr),Ye(rr,i)}function fo(){et(rr),et(Da),et(Va)}function fm(n){ui(Va.current);var i=ui(rr.current),a=Vi(i,n.type);i!==a&&(Ye(Da,n),Ye(rr,a))}function Vh(n){Da.current===n&&(et(rr),et(Da))}var st=as(0);function gu(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Oh=[];function Mh(){for(var n=0;n<Oh.length;n++)Oh[n]._workInProgressVersionPrimary=null;Oh.length=0}var yu=W.ReactCurrentDispatcher,Lh=W.ReactCurrentBatchConfig,ci=0,it=null,Et=null,Ct=null,_u=!1,Oa=!1,Ma=0,BE=0;function zt(){throw Error(t(321))}function bh(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!Dn(n[a],i[a]))return!1;return!0}function jh(n,i,a,c,d,p){if(ci=p,it=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,yu.current=n===null||n.memoizedState===null?WE:HE,n=a(c,d),Oa){p=0;do{if(Oa=!1,Ma=0,25<=p)throw Error(t(301));p+=1,Ct=Et=null,i.updateQueue=null,yu.current=GE,n=a(c,d)}while(Oa)}if(yu.current=Eu,i=Et!==null&&Et.next!==null,ci=0,Ct=Et=it=null,_u=!1,i)throw Error(t(300));return n}function Fh(){var n=Ma!==0;return Ma=0,n}function sr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?it.memoizedState=Ct=n:Ct=Ct.next=n,Ct}function An(){if(Et===null){var n=it.alternate;n=n!==null?n.memoizedState:null}else n=Et.next;var i=Ct===null?it.memoizedState:Ct.next;if(i!==null)Ct=i,Et=n;else{if(n===null)throw Error(t(310));Et=n,n={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},Ct===null?it.memoizedState=Ct=n:Ct=Ct.next=n}return Ct}function La(n,i){return typeof i=="function"?i(n):i}function Uh(n){var i=An(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=Et,d=c.baseQueue,p=a.pending;if(p!==null){if(d!==null){var w=d.next;d.next=p.next,p.next=w}c.baseQueue=d=p,a.pending=null}if(d!==null){p=d.next,c=c.baseState;var R=w=null,D=null,B=p;do{var J=B.lane;if((ci&J)===J)D!==null&&(D=D.next={lane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),c=B.hasEagerState?B.eagerState:n(c,B.action);else{var Z={lane:J,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null};D===null?(R=D=Z,w=c):D=D.next=Z,it.lanes|=J,hi|=J}B=B.next}while(B!==null&&B!==p);D===null?w=c:D.next=R,Dn(c,i.memoizedState)||(Zt=!0),i.memoizedState=c,i.baseState=w,i.baseQueue=D,a.lastRenderedState=c}if(n=a.interleaved,n!==null){d=n;do p=d.lane,it.lanes|=p,hi|=p,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function Bh(n){var i=An(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,d=a.pending,p=i.memoizedState;if(d!==null){a.pending=null;var w=d=d.next;do p=n(p,w.action),w=w.next;while(w!==d);Dn(p,i.memoizedState)||(Zt=!0),i.memoizedState=p,i.baseQueue===null&&(i.baseState=p),a.lastRenderedState=p}return[p,c]}function pm(){}function mm(n,i){var a=it,c=An(),d=i(),p=!Dn(c.memoizedState,d);if(p&&(c.memoizedState=d,Zt=!0),c=c.queue,zh(_m.bind(null,a,c,n),[n]),c.getSnapshot!==i||p||Ct!==null&&Ct.memoizedState.tag&1){if(a.flags|=2048,ba(9,ym.bind(null,a,c,d,i),void 0,null),Rt===null)throw Error(t(349));(ci&30)!==0||gm(a,i,d)}return d}function gm(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=it.updateQueue,i===null?(i={lastEffect:null,stores:null},it.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function ym(n,i,a,c){i.value=a,i.getSnapshot=c,vm(i)&&wm(n)}function _m(n,i,a){return a(function(){vm(i)&&wm(n)})}function vm(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!Dn(n,a)}catch{return!0}}function wm(n){var i=Pr(n,1);i!==null&&bn(i,n,1,-1)}function Em(n){var i=sr();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:La,lastRenderedState:n},i.queue=n,n=n.dispatch=qE.bind(null,it,n),[i.memoizedState,n]}function ba(n,i,a,c){return n={tag:n,create:i,destroy:a,deps:c,next:null},i=it.updateQueue,i===null?(i={lastEffect:null,stores:null},it.updateQueue=i,i.lastEffect=n.next=n):(a=i.lastEffect,a===null?i.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,i.lastEffect=n)),n}function Tm(){return An().memoizedState}function vu(n,i,a,c){var d=sr();it.flags|=n,d.memoizedState=ba(1|i,a,void 0,c===void 0?null:c)}function wu(n,i,a,c){var d=An();c=c===void 0?null:c;var p=void 0;if(Et!==null){var w=Et.memoizedState;if(p=w.destroy,c!==null&&bh(c,w.deps)){d.memoizedState=ba(i,a,p,c);return}}it.flags|=n,d.memoizedState=ba(1|i,a,p,c)}function Im(n,i){return vu(8390656,8,n,i)}function zh(n,i){return wu(2048,8,n,i)}function Sm(n,i){return wu(4,2,n,i)}function Am(n,i){return wu(4,4,n,i)}function Cm(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Rm(n,i,a){return a=a!=null?a.concat([n]):null,wu(4,4,Cm.bind(null,i,n),a)}function $h(){}function Pm(n,i){var a=An();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&bh(i,c[1])?c[0]:(a.memoizedState=[n,i],n)}function km(n,i){var a=An();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&bh(i,c[1])?c[0]:(n=n(),a.memoizedState=[n,i],n)}function Nm(n,i,a){return(ci&21)===0?(n.baseState&&(n.baseState=!1,Zt=!0),n.memoizedState=a):(Dn(a,i)||(a=ua(),it.lanes|=a,hi|=a,n.baseState=!0),i)}function zE(n,i){var a=Fe;Fe=a!==0&&4>a?a:4,n(!0);var c=Lh.transition;Lh.transition={};try{n(!1),i()}finally{Fe=a,Lh.transition=c}}function xm(){return An().memoizedState}function $E(n,i,a){var c=ms(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},Dm(n))Vm(i,a);else if(a=um(n,i,a,c),a!==null){var d=Qt();bn(a,n,c,d),Om(a,i,c)}}function qE(n,i,a){var c=ms(n),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(Dm(n))Vm(i,d);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=i.lastRenderedReducer,p!==null))try{var w=i.lastRenderedState,R=p(w,a);if(d.hasEagerState=!0,d.eagerState=R,Dn(R,w)){var D=i.interleaved;D===null?(d.next=d,Nh(i)):(d.next=D.next,D.next=d),i.interleaved=d;return}}catch{}a=um(n,i,d,c),a!==null&&(d=Qt(),bn(a,n,c,d),Om(a,i,c))}}function Dm(n){var i=n.alternate;return n===it||i!==null&&i===it}function Vm(n,i){Oa=_u=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function Om(n,i,a){if((a&4194240)!==0){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,ha(n,a)}}var Eu={readContext:Sn,useCallback:zt,useContext:zt,useEffect:zt,useImperativeHandle:zt,useInsertionEffect:zt,useLayoutEffect:zt,useMemo:zt,useReducer:zt,useRef:zt,useState:zt,useDebugValue:zt,useDeferredValue:zt,useTransition:zt,useMutableSource:zt,useSyncExternalStore:zt,useId:zt,unstable_isNewReconciler:!1},WE={readContext:Sn,useCallback:function(n,i){return sr().memoizedState=[n,i===void 0?null:i],n},useContext:Sn,useEffect:Im,useImperativeHandle:function(n,i,a){return a=a!=null?a.concat([n]):null,vu(4194308,4,Cm.bind(null,i,n),a)},useLayoutEffect:function(n,i){return vu(4194308,4,n,i)},useInsertionEffect:function(n,i){return vu(4,2,n,i)},useMemo:function(n,i){var a=sr();return i=i===void 0?null:i,n=n(),a.memoizedState=[n,i],n},useReducer:function(n,i,a){var c=sr();return i=a!==void 0?a(i):i,c.memoizedState=c.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},c.queue=n,n=n.dispatch=$E.bind(null,it,n),[c.memoizedState,n]},useRef:function(n){var i=sr();return n={current:n},i.memoizedState=n},useState:Em,useDebugValue:$h,useDeferredValue:function(n){return sr().memoizedState=n},useTransition:function(){var n=Em(!1),i=n[0];return n=zE.bind(null,n[1]),sr().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,a){var c=it,d=sr();if(rt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=i(),Rt===null)throw Error(t(349));(ci&30)!==0||gm(c,i,a)}d.memoizedState=a;var p={value:a,getSnapshot:i};return d.queue=p,Im(_m.bind(null,c,p,n),[n]),c.flags|=2048,ba(9,ym.bind(null,c,p,a,i),void 0,null),a},useId:function(){var n=sr(),i=Rt.identifierPrefix;if(rt){var a=Rr,c=Cr;a=(c&~(1<<32-on(c)-1)).toString(32)+a,i=":"+i+"R"+a,a=Ma++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=BE++,i=":"+i+"r"+a.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},HE={readContext:Sn,useCallback:Pm,useContext:Sn,useEffect:zh,useImperativeHandle:Rm,useInsertionEffect:Sm,useLayoutEffect:Am,useMemo:km,useReducer:Uh,useRef:Tm,useState:function(){return Uh(La)},useDebugValue:$h,useDeferredValue:function(n){var i=An();return Nm(i,Et.memoizedState,n)},useTransition:function(){var n=Uh(La)[0],i=An().memoizedState;return[n,i]},useMutableSource:pm,useSyncExternalStore:mm,useId:xm,unstable_isNewReconciler:!1},GE={readContext:Sn,useCallback:Pm,useContext:Sn,useEffect:zh,useImperativeHandle:Rm,useInsertionEffect:Sm,useLayoutEffect:Am,useMemo:km,useReducer:Bh,useRef:Tm,useState:function(){return Bh(La)},useDebugValue:$h,useDeferredValue:function(n){var i=An();return Et===null?i.memoizedState=n:Nm(i,Et.memoizedState,n)},useTransition:function(){var n=Bh(La)[0],i=An().memoizedState;return[n,i]},useMutableSource:pm,useSyncExternalStore:mm,useId:xm,unstable_isNewReconciler:!1};function On(n,i){if(n&&n.defaultProps){i=ae({},i),n=n.defaultProps;for(var a in n)i[a]===void 0&&(i[a]=n[a]);return i}return i}function qh(n,i,a,c){i=n.memoizedState,a=a(c,i),a=a==null?i:ae({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Tu={isMounted:function(n){return(n=n._reactInternals)?Nn(n)===n:!1},enqueueSetState:function(n,i,a){n=n._reactInternals;var c=Qt(),d=ms(n),p=kr(c,d);p.payload=i,a!=null&&(p.callback=a),i=hs(n,p,d),i!==null&&(bn(i,n,d,c),pu(i,n,d))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var c=Qt(),d=ms(n),p=kr(c,d);p.tag=1,p.payload=i,a!=null&&(p.callback=a),i=hs(n,p,d),i!==null&&(bn(i,n,d,c),pu(i,n,d))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=Qt(),c=ms(n),d=kr(a,c);d.tag=2,i!=null&&(d.callback=i),i=hs(n,d,c),i!==null&&(bn(i,n,c,a),pu(i,n,c))}};function Mm(n,i,a,c,d,p,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,p,w):i.prototype&&i.prototype.isPureReactComponent?!Ia(a,c)||!Ia(d,p):!0}function Lm(n,i,a){var c=!1,d=ls,p=i.contextType;return typeof p=="object"&&p!==null?p=Sn(p):(d=Jt(i)?ii:Bt.current,c=i.contextTypes,p=(c=c!=null)?io(n,d):ls),i=new i(a,p),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Tu,n.stateNode=i,i._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=p),i}function bm(n,i,a,c){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,c),i.state!==n&&Tu.enqueueReplaceState(i,i.state,null)}function Wh(n,i,a,c){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs={},xh(n);var p=i.contextType;typeof p=="object"&&p!==null?d.context=Sn(p):(p=Jt(i)?ii:Bt.current,d.context=io(n,p)),d.state=n.memoizedState,p=i.getDerivedStateFromProps,typeof p=="function"&&(qh(n,i,p,a),d.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(i=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),i!==d.state&&Tu.enqueueReplaceState(d,d.state,null),mu(n,a,d,c),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function po(n,i){try{var a="",c=i;do a+=xe(c),c=c.return;while(c);var d=a}catch(p){d=`
Error generating stack: `+p.message+`
`+p.stack}return{value:n,source:i,stack:d,digest:null}}function Hh(n,i,a){return{value:n,source:null,stack:a??null,digest:i??null}}function Gh(n,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var KE=typeof WeakMap=="function"?WeakMap:Map;function jm(n,i,a){a=kr(-1,a),a.tag=3,a.payload={element:null};var c=i.value;return a.callback=function(){ku||(ku=!0,ld=c),Gh(n,i)},a}function Fm(n,i,a){a=kr(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=i.value;a.payload=function(){return c(d)},a.callback=function(){Gh(n,i)}}var p=n.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(a.callback=function(){Gh(n,i),typeof c!="function"&&(fs===null?fs=new Set([this]):fs.add(this));var w=i.stack;this.componentDidCatch(i.value,{componentStack:w!==null?w:""})}),a}function Um(n,i,a){var c=n.pingCache;if(c===null){c=n.pingCache=new KE;var d=new Set;c.set(i,d)}else d=c.get(i),d===void 0&&(d=new Set,c.set(i,d));d.has(a)||(d.add(a),n=l0.bind(null,n,i,a),i.then(n,n))}function Bm(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function zm(n,i,a,c,d){return(n.mode&1)===0?(n===i?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=kr(-1,1),i.tag=2,hs(a,i,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=d,n)}var QE=W.ReactCurrentOwner,Zt=!1;function Kt(n,i,a,c){i.child=n===null?lm(i,null,a,c):uo(i,n.child,a,c)}function $m(n,i,a,c,d){a=a.render;var p=i.ref;return ho(i,d),c=jh(n,i,a,c,p,d),a=Fh(),n!==null&&!Zt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~d,Nr(n,i,d)):(rt&&a&&Eh(i),i.flags|=1,Kt(n,i,c,d),i.child)}function qm(n,i,a,c,d){if(n===null){var p=a.type;return typeof p=="function"&&!md(p)&&p.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=p,Wm(n,i,p,c,d)):(n=Mu(a.type,null,c,i,i.mode,d),n.ref=i.ref,n.return=i,i.child=n)}if(p=n.child,(n.lanes&d)===0){var w=p.memoizedProps;if(a=a.compare,a=a!==null?a:Ia,a(w,c)&&n.ref===i.ref)return Nr(n,i,d)}return i.flags|=1,n=ys(p,c),n.ref=i.ref,n.return=i,i.child=n}function Wm(n,i,a,c,d){if(n!==null){var p=n.memoizedProps;if(Ia(p,c)&&n.ref===i.ref)if(Zt=!1,i.pendingProps=c=p,(n.lanes&d)!==0)(n.flags&131072)!==0&&(Zt=!0);else return i.lanes=n.lanes,Nr(n,i,d)}return Kh(n,i,a,c,d)}function Hm(n,i,a){var c=i.pendingProps,d=c.children,p=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ye(go,fn),fn|=a;else{if((a&1073741824)===0)return n=p!==null?p.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,Ye(go,fn),fn|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=p!==null?p.baseLanes:a,Ye(go,fn),fn|=c}else p!==null?(c=p.baseLanes|a,i.memoizedState=null):c=a,Ye(go,fn),fn|=c;return Kt(n,i,d,a),i.child}function Gm(n,i){var a=i.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function Kh(n,i,a,c,d){var p=Jt(a)?ii:Bt.current;return p=io(i,p),ho(i,d),a=jh(n,i,a,c,p,d),c=Fh(),n!==null&&!Zt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~d,Nr(n,i,d)):(rt&&c&&Eh(i),i.flags|=1,Kt(n,i,a,d),i.child)}function Km(n,i,a,c,d){if(Jt(a)){var p=!0;ou(i)}else p=!1;if(ho(i,d),i.stateNode===null)Su(n,i),Lm(i,a,c),Wh(i,a,c,d),c=!0;else if(n===null){var w=i.stateNode,R=i.memoizedProps;w.props=R;var D=w.context,B=a.contextType;typeof B=="object"&&B!==null?B=Sn(B):(B=Jt(a)?ii:Bt.current,B=io(i,B));var J=a.getDerivedStateFromProps,Z=typeof J=="function"||typeof w.getSnapshotBeforeUpdate=="function";Z||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(R!==c||D!==B)&&bm(i,w,c,B),cs=!1;var Y=i.memoizedState;w.state=Y,mu(i,c,w,d),D=i.memoizedState,R!==c||Y!==D||Yt.current||cs?(typeof J=="function"&&(qh(i,a,J,c),D=i.memoizedState),(R=cs||Mm(i,a,R,c,Y,D,B))?(Z||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(i.flags|=4194308)):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=D),w.props=c,w.state=D,w.context=B,c=R):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{w=i.stateNode,cm(n,i),R=i.memoizedProps,B=i.type===i.elementType?R:On(i.type,R),w.props=B,Z=i.pendingProps,Y=w.context,D=a.contextType,typeof D=="object"&&D!==null?D=Sn(D):(D=Jt(a)?ii:Bt.current,D=io(i,D));var le=a.getDerivedStateFromProps;(J=typeof le=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(R!==Z||Y!==D)&&bm(i,w,c,D),cs=!1,Y=i.memoizedState,w.state=Y,mu(i,c,w,d);var de=i.memoizedState;R!==Z||Y!==de||Yt.current||cs?(typeof le=="function"&&(qh(i,a,le,c),de=i.memoizedState),(B=cs||Mm(i,a,B,c,Y,de,D)||!1)?(J||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(c,de,D),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(c,de,D)),typeof w.componentDidUpdate=="function"&&(i.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof w.componentDidUpdate!="function"||R===n.memoizedProps&&Y===n.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||R===n.memoizedProps&&Y===n.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=de),w.props=c,w.state=de,w.context=D,c=B):(typeof w.componentDidUpdate!="function"||R===n.memoizedProps&&Y===n.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||R===n.memoizedProps&&Y===n.memoizedState||(i.flags|=1024),c=!1)}return Qh(n,i,a,c,p,d)}function Qh(n,i,a,c,d,p){Gm(n,i);var w=(i.flags&128)!==0;if(!c&&!w)return d&&Zp(i,a,!1),Nr(n,i,p);c=i.stateNode,QE.current=i;var R=w&&typeof a.getDerivedStateFromError!="function"?null:c.render();return i.flags|=1,n!==null&&w?(i.child=uo(i,n.child,null,p),i.child=uo(i,null,R,p)):Kt(n,i,R,p),i.memoizedState=c.state,d&&Zp(i,a,!0),i.child}function Qm(n){var i=n.stateNode;i.pendingContext?Yp(n,i.pendingContext,i.pendingContext!==i.context):i.context&&Yp(n,i.context,!1),Dh(n,i.containerInfo)}function Xm(n,i,a,c,d){return lo(),Ah(d),i.flags|=256,Kt(n,i,a,c),i.child}var Xh={dehydrated:null,treeContext:null,retryLane:0};function Yh(n){return{baseLanes:n,cachePool:null,transitions:null}}function Ym(n,i,a){var c=i.pendingProps,d=st.current,p=!1,w=(i.flags&128)!==0,R;if((R=w)||(R=n!==null&&n.memoizedState===null?!1:(d&2)!==0),R?(p=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),Ye(st,d&1),n===null)return Sh(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((i.mode&1)===0?i.lanes=1:n.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(w=c.children,n=c.fallback,p?(c=i.mode,p=i.child,w={mode:"hidden",children:w},(c&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=w):p=Lu(w,c,0,null),n=mi(n,c,a,null),p.return=i,n.return=i,p.sibling=n,i.child=p,i.child.memoizedState=Yh(a),i.memoizedState=Xh,n):Jh(i,w));if(d=n.memoizedState,d!==null&&(R=d.dehydrated,R!==null))return XE(n,i,w,c,R,d,a);if(p){p=c.fallback,w=i.mode,d=n.child,R=d.sibling;var D={mode:"hidden",children:c.children};return(w&1)===0&&i.child!==d?(c=i.child,c.childLanes=0,c.pendingProps=D,i.deletions=null):(c=ys(d,D),c.subtreeFlags=d.subtreeFlags&14680064),R!==null?p=ys(R,p):(p=mi(p,w,a,null),p.flags|=2),p.return=i,c.return=i,c.sibling=p,i.child=c,c=p,p=i.child,w=n.child.memoizedState,w=w===null?Yh(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},p.memoizedState=w,p.childLanes=n.childLanes&~a,i.memoizedState=Xh,c}return p=n.child,n=p.sibling,c=ys(p,{mode:"visible",children:c.children}),(i.mode&1)===0&&(c.lanes=a),c.return=i,c.sibling=null,n!==null&&(a=i.deletions,a===null?(i.deletions=[n],i.flags|=16):a.push(n)),i.child=c,i.memoizedState=null,c}function Jh(n,i){return i=Lu({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function Iu(n,i,a,c){return c!==null&&Ah(c),uo(i,n.child,null,a),n=Jh(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function XE(n,i,a,c,d,p,w){if(a)return i.flags&256?(i.flags&=-257,c=Hh(Error(t(422))),Iu(n,i,w,c)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(p=c.fallback,d=i.mode,c=Lu({mode:"visible",children:c.children},d,0,null),p=mi(p,d,w,null),p.flags|=2,c.return=i,p.return=i,c.sibling=p,i.child=c,(i.mode&1)!==0&&uo(i,n.child,null,w),i.child.memoizedState=Yh(w),i.memoizedState=Xh,p);if((i.mode&1)===0)return Iu(n,i,w,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var R=c.dgst;return c=R,p=Error(t(419)),c=Hh(p,c,void 0),Iu(n,i,w,c)}if(R=(w&n.childLanes)!==0,Zt||R){if(c=Rt,c!==null){switch(w&-w){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|w))!==0?0:d,d!==0&&d!==p.retryLane&&(p.retryLane=d,Pr(n,d),bn(c,n,d,-1))}return pd(),c=Hh(Error(t(421))),Iu(n,i,w,c)}return d.data==="$?"?(i.flags|=128,i.child=n.child,i=u0.bind(null,n),d._reactRetry=i,null):(n=p.treeContext,dn=os(d.nextSibling),hn=i,rt=!0,Vn=null,n!==null&&(Tn[In++]=Cr,Tn[In++]=Rr,Tn[In++]=oi,Cr=n.id,Rr=n.overflow,oi=i),i=Jh(i,c.children),i.flags|=4096,i)}function Jm(n,i,a){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i),kh(n.return,i,a)}function Zh(n,i,a,c,d){var p=n.memoizedState;p===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(p.isBackwards=i,p.rendering=null,p.renderingStartTime=0,p.last=c,p.tail=a,p.tailMode=d)}function Zm(n,i,a){var c=i.pendingProps,d=c.revealOrder,p=c.tail;if(Kt(n,i,c.children,a),c=st.current,(c&2)!==0)c=c&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Jm(n,a,i);else if(n.tag===19)Jm(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(Ye(st,c),(i.mode&1)===0)i.memoizedState=null;else switch(d){case"forwards":for(a=i.child,d=null;a!==null;)n=a.alternate,n!==null&&gu(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=i.child,i.child=null):(d=a.sibling,a.sibling=null),Zh(i,!1,d,a,p);break;case"backwards":for(a=null,d=i.child,i.child=null;d!==null;){if(n=d.alternate,n!==null&&gu(n)===null){i.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}Zh(i,!0,a,null,p);break;case"together":Zh(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Su(n,i){(i.mode&1)===0&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function Nr(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),hi|=i.lanes,(a&i.childLanes)===0)return null;if(n!==null&&i.child!==n.child)throw Error(t(153));if(i.child!==null){for(n=i.child,a=ys(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=ys(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function YE(n,i,a){switch(i.tag){case 3:Qm(i),lo();break;case 5:fm(i);break;case 1:Jt(i.type)&&ou(i);break;case 4:Dh(i,i.stateNode.containerInfo);break;case 10:var c=i.type._context,d=i.memoizedProps.value;Ye(du,c._currentValue),c._currentValue=d;break;case 13:if(c=i.memoizedState,c!==null)return c.dehydrated!==null?(Ye(st,st.current&1),i.flags|=128,null):(a&i.child.childLanes)!==0?Ym(n,i,a):(Ye(st,st.current&1),n=Nr(n,i,a),n!==null?n.sibling:null);Ye(st,st.current&1);break;case 19:if(c=(a&i.childLanes)!==0,(n.flags&128)!==0){if(c)return Zm(n,i,a);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Ye(st,st.current),c)break;return null;case 22:case 23:return i.lanes=0,Hm(n,i,a)}return Nr(n,i,a)}var eg,ed,tg,ng;eg=function(n,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},ed=function(){},tg=function(n,i,a,c){var d=n.memoizedProps;if(d!==c){n=i.stateNode,ui(rr.current);var p=null;switch(a){case"input":d=xi(n,d),c=xi(n,c),p=[];break;case"select":d=ae({},d,{value:void 0}),c=ae({},c,{value:void 0}),p=[];break;case"textarea":d=Jo(n,d),c=Jo(n,c),p=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=ru)}kn(a,c);var w;a=null;for(B in d)if(!c.hasOwnProperty(B)&&d.hasOwnProperty(B)&&d[B]!=null)if(B==="style"){var R=d[B];for(w in R)R.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else B!=="dangerouslySetInnerHTML"&&B!=="children"&&B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&B!=="autoFocus"&&(o.hasOwnProperty(B)?p||(p=[]):(p=p||[]).push(B,null));for(B in c){var D=c[B];if(R=d?.[B],c.hasOwnProperty(B)&&D!==R&&(D!=null||R!=null))if(B==="style")if(R){for(w in R)!R.hasOwnProperty(w)||D&&D.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in D)D.hasOwnProperty(w)&&R[w]!==D[w]&&(a||(a={}),a[w]=D[w])}else a||(p||(p=[]),p.push(B,a)),a=D;else B==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,R=R?R.__html:void 0,D!=null&&R!==D&&(p=p||[]).push(B,D)):B==="children"?typeof D!="string"&&typeof D!="number"||(p=p||[]).push(B,""+D):B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&(o.hasOwnProperty(B)?(D!=null&&B==="onScroll"&&Ze("scroll",n),p||R===D||(p=[])):(p=p||[]).push(B,D))}a&&(p=p||[]).push("style",a);var B=p;(i.updateQueue=B)&&(i.flags|=4)}},ng=function(n,i,a,c){a!==c&&(i.flags|=4)};function ja(n,i){if(!rt)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function $t(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(i)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=a,i}function JE(n,i,a){var c=i.pendingProps;switch(Th(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(i),null;case 1:return Jt(i.type)&&iu(),$t(i),null;case 3:return c=i.stateNode,fo(),et(Yt),et(Bt),Mh(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(cu(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Vn!==null&&(hd(Vn),Vn=null))),ed(n,i),$t(i),null;case 5:Vh(i);var d=ui(Va.current);if(a=i.type,n!==null&&i.stateNode!=null)tg(n,i,a,c,d),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!c){if(i.stateNode===null)throw Error(t(166));return $t(i),null}if(n=ui(rr.current),cu(i)){c=i.stateNode,a=i.type;var p=i.memoizedProps;switch(c[nr]=i,c[Pa]=p,n=(i.mode&1)!==0,a){case"dialog":Ze("cancel",c),Ze("close",c);break;case"iframe":case"object":case"embed":Ze("load",c);break;case"video":case"audio":for(d=0;d<Aa.length;d++)Ze(Aa[d],c);break;case"source":Ze("error",c);break;case"img":case"image":case"link":Ze("error",c),Ze("load",c);break;case"details":Ze("toggle",c);break;case"input":Pl(c,p),Ze("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!p.multiple},Ze("invalid",c);break;case"textarea":Zo(c,p),Ze("invalid",c)}kn(a,p),d=null;for(var w in p)if(p.hasOwnProperty(w)){var R=p[w];w==="children"?typeof R=="string"?c.textContent!==R&&(p.suppressHydrationWarning!==!0&&nu(c.textContent,R,n),d=["children",R]):typeof R=="number"&&c.textContent!==""+R&&(p.suppressHydrationWarning!==!0&&nu(c.textContent,R,n),d=["children",""+R]):o.hasOwnProperty(w)&&R!=null&&w==="onScroll"&&Ze("scroll",c)}switch(a){case"input":vn(c),Yo(c,p,!0);break;case"textarea":vn(c),qr(c);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(c.onclick=ru)}c=d,i.updateQueue=c,c!==null&&(i.flags|=4)}else{w=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=ea(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=w.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=w.createElement(a,{is:c.is}):(n=w.createElement(a),a==="select"&&(w=n,c.multiple?w.multiple=!0:c.size&&(w.size=c.size))):n=w.createElementNS(n,a),n[nr]=i,n[Pa]=c,eg(n,i,!1,!1),i.stateNode=n;e:{switch(w=Mi(a,c),a){case"dialog":Ze("cancel",n),Ze("close",n),d=c;break;case"iframe":case"object":case"embed":Ze("load",n),d=c;break;case"video":case"audio":for(d=0;d<Aa.length;d++)Ze(Aa[d],n);d=c;break;case"source":Ze("error",n),d=c;break;case"img":case"image":case"link":Ze("error",n),Ze("load",n),d=c;break;case"details":Ze("toggle",n),d=c;break;case"input":Pl(n,c),d=xi(n,c),Ze("invalid",n);break;case"option":d=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},d=ae({},c,{value:void 0}),Ze("invalid",n);break;case"textarea":Zo(n,c),d=Jo(n,c),Ze("invalid",n);break;default:d=c}kn(a,d),R=d;for(p in R)if(R.hasOwnProperty(p)){var D=R[p];p==="style"?Oi(n,D):p==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,D!=null&&Nl(n,D)):p==="children"?typeof D=="string"?(a!=="textarea"||D!=="")&&qs(n,D):typeof D=="number"&&qs(n,""+D):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(o.hasOwnProperty(p)?D!=null&&p==="onScroll"&&Ze("scroll",n):D!=null&&q(n,p,D,w))}switch(a){case"input":vn(n),Yo(n,c,!1);break;case"textarea":vn(n),qr(n);break;case"option":c.value!=null&&n.setAttribute("value",""+je(c.value));break;case"select":n.multiple=!!c.multiple,p=c.value,p!=null?Pn(n,!!c.multiple,p,!1):c.defaultValue!=null&&Pn(n,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=ru)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return $t(i),null;case 6:if(n&&i.stateNode!=null)ng(n,i,n.memoizedProps,c);else{if(typeof c!="string"&&i.stateNode===null)throw Error(t(166));if(a=ui(Va.current),ui(rr.current),cu(i)){if(c=i.stateNode,a=i.memoizedProps,c[nr]=i,(p=c.nodeValue!==a)&&(n=hn,n!==null))switch(n.tag){case 3:nu(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&nu(c.nodeValue,a,(n.mode&1)!==0)}p&&(i.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[nr]=i,i.stateNode=c}return $t(i),null;case 13:if(et(st),c=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(rt&&dn!==null&&(i.mode&1)!==0&&(i.flags&128)===0)im(),lo(),i.flags|=98560,p=!1;else if(p=cu(i),c!==null&&c.dehydrated!==null){if(n===null){if(!p)throw Error(t(318));if(p=i.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(t(317));p[nr]=i}else lo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;$t(i),p=!1}else Vn!==null&&(hd(Vn),Vn=null),p=!0;if(!p)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=a,i):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(i.child.flags|=8192,(i.mode&1)!==0&&(n===null||(st.current&1)!==0?Tt===0&&(Tt=3):pd())),i.updateQueue!==null&&(i.flags|=4),$t(i),null);case 4:return fo(),ed(n,i),n===null&&Ca(i.stateNode.containerInfo),$t(i),null;case 10:return Ph(i.type._context),$t(i),null;case 17:return Jt(i.type)&&iu(),$t(i),null;case 19:if(et(st),p=i.memoizedState,p===null)return $t(i),null;if(c=(i.flags&128)!==0,w=p.rendering,w===null)if(c)ja(p,!1);else{if(Tt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(w=gu(n),w!==null){for(i.flags|=128,ja(p,!1),c=w.updateQueue,c!==null&&(i.updateQueue=c,i.flags|=4),i.subtreeFlags=0,c=a,a=i.child;a!==null;)p=a,n=c,p.flags&=14680066,w=p.alternate,w===null?(p.childLanes=0,p.lanes=n,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=w.childLanes,p.lanes=w.lanes,p.child=w.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=w.memoizedProps,p.memoizedState=w.memoizedState,p.updateQueue=w.updateQueue,p.type=w.type,n=w.dependencies,p.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Ye(st,st.current&1|2),i.child}n=n.sibling}p.tail!==null&&Je()>yo&&(i.flags|=128,c=!0,ja(p,!1),i.lanes=4194304)}else{if(!c)if(n=gu(w),n!==null){if(i.flags|=128,c=!0,a=n.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),ja(p,!0),p.tail===null&&p.tailMode==="hidden"&&!w.alternate&&!rt)return $t(i),null}else 2*Je()-p.renderingStartTime>yo&&a!==1073741824&&(i.flags|=128,c=!0,ja(p,!1),i.lanes=4194304);p.isBackwards?(w.sibling=i.child,i.child=w):(a=p.last,a!==null?a.sibling=w:i.child=w,p.last=w)}return p.tail!==null?(i=p.tail,p.rendering=i,p.tail=i.sibling,p.renderingStartTime=Je(),i.sibling=null,a=st.current,Ye(st,c?a&1|2:a&1),i):($t(i),null);case 22:case 23:return fd(),c=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(i.flags|=8192),c&&(i.mode&1)!==0?(fn&1073741824)!==0&&($t(i),i.subtreeFlags&6&&(i.flags|=8192)):$t(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function ZE(n,i){switch(Th(i),i.tag){case 1:return Jt(i.type)&&iu(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return fo(),et(Yt),et(Bt),Mh(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 5:return Vh(i),null;case 13:if(et(st),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(t(340));lo()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return et(st),null;case 4:return fo(),null;case 10:return Ph(i.type._context),null;case 22:case 23:return fd(),null;case 24:return null;default:return null}}var Au=!1,qt=!1,e0=typeof WeakSet=="function"?WeakSet:Set,ce=null;function mo(n,i){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){lt(n,i,c)}else a.current=null}function td(n,i,a){try{a()}catch(c){lt(n,i,c)}}var rg=!1;function t0(n,i){if(fh=Er,n=Mp(),ih(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break e}var w=0,R=-1,D=-1,B=0,J=0,Z=n,Y=null;t:for(;;){for(var le;Z!==a||d!==0&&Z.nodeType!==3||(R=w+d),Z!==p||c!==0&&Z.nodeType!==3||(D=w+c),Z.nodeType===3&&(w+=Z.nodeValue.length),(le=Z.firstChild)!==null;)Y=Z,Z=le;for(;;){if(Z===n)break t;if(Y===a&&++B===d&&(R=w),Y===p&&++J===c&&(D=w),(le=Z.nextSibling)!==null)break;Z=Y,Y=Z.parentNode}Z=le}a=R===-1||D===-1?null:{start:R,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(ph={focusedElem:n,selectionRange:a},Er=!1,ce=i;ce!==null;)if(i=ce,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,ce=n;else for(;ce!==null;){i=ce;try{var de=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(de!==null){var pe=de.memoizedProps,ht=de.memoizedState,b=i.stateNode,V=b.getSnapshotBeforeUpdate(i.elementType===i.type?pe:On(i.type,pe),ht);b.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var U=i.stateNode.containerInfo;U.nodeType===1?U.textContent="":U.nodeType===9&&U.documentElement&&U.removeChild(U.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(re){lt(i,i.return,re)}if(n=i.sibling,n!==null){n.return=i.return,ce=n;break}ce=i.return}return de=rg,rg=!1,de}function Fa(n,i,a){var c=i.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&n)===n){var p=d.destroy;d.destroy=void 0,p!==void 0&&td(i,a,p)}d=d.next}while(d!==c)}}function Cu(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==i)}}function nd(n){var i=n.ref;if(i!==null){var a=n.stateNode;n.tag,n=a,typeof i=="function"?i(n):i.current=n}}function sg(n){var i=n.alternate;i!==null&&(n.alternate=null,sg(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[nr],delete i[Pa],delete i[_h],delete i[bE],delete i[jE])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function ig(n){return n.tag===5||n.tag===3||n.tag===4}function og(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||ig(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function rd(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(n,i):a.insertBefore(n,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(n,a)):(i=a,i.appendChild(n)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=ru));else if(c!==4&&(n=n.child,n!==null))for(rd(n,i,a),n=n.sibling;n!==null;)rd(n,i,a),n=n.sibling}function sd(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(sd(n,i,a),n=n.sibling;n!==null;)sd(n,i,a),n=n.sibling}var Vt=null,Mn=!1;function ds(n,i,a){for(a=a.child;a!==null;)ag(n,i,a),a=a.sibling}function ag(n,i,a){if(sn&&typeof sn.onCommitFiberUnmount=="function")try{sn.onCommitFiberUnmount(Qs,a)}catch{}switch(a.tag){case 5:qt||mo(a,i);case 6:var c=Vt,d=Mn;Vt=null,ds(n,i,a),Vt=c,Mn=d,Vt!==null&&(Mn?(n=Vt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Vt.removeChild(a.stateNode));break;case 18:Vt!==null&&(Mn?(n=Vt,a=a.stateNode,n.nodeType===8?yh(n.parentNode,a):n.nodeType===1&&yh(n,a),ns(n)):yh(Vt,a.stateNode));break;case 4:c=Vt,d=Mn,Vt=a.stateNode.containerInfo,Mn=!0,ds(n,i,a),Vt=c,Mn=d;break;case 0:case 11:case 14:case 15:if(!qt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var p=d,w=p.destroy;p=p.tag,w!==void 0&&((p&2)!==0||(p&4)!==0)&&td(a,i,w),d=d.next}while(d!==c)}ds(n,i,a);break;case 1:if(!qt&&(mo(a,i),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(R){lt(a,i,R)}ds(n,i,a);break;case 21:ds(n,i,a);break;case 22:a.mode&1?(qt=(c=qt)||a.memoizedState!==null,ds(n,i,a),qt=c):ds(n,i,a);break;default:ds(n,i,a)}}function lg(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new e0),i.forEach(function(c){var d=c0.bind(null,n,c);a.has(c)||(a.add(c),c.then(d,d))})}}function Ln(n,i){var a=i.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var p=n,w=i,R=w;e:for(;R!==null;){switch(R.tag){case 5:Vt=R.stateNode,Mn=!1;break e;case 3:Vt=R.stateNode.containerInfo,Mn=!0;break e;case 4:Vt=R.stateNode.containerInfo,Mn=!0;break e}R=R.return}if(Vt===null)throw Error(t(160));ag(p,w,d),Vt=null,Mn=!1;var D=d.alternate;D!==null&&(D.return=null),d.return=null}catch(B){lt(d,i,B)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)ug(i,n),i=i.sibling}function ug(n,i){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Ln(i,n),ir(n),c&4){try{Fa(3,n,n.return),Cu(3,n)}catch(pe){lt(n,n.return,pe)}try{Fa(5,n,n.return)}catch(pe){lt(n,n.return,pe)}}break;case 1:Ln(i,n),ir(n),c&512&&a!==null&&mo(a,a.return);break;case 5:if(Ln(i,n),ir(n),c&512&&a!==null&&mo(a,a.return),n.flags&32){var d=n.stateNode;try{qs(d,"")}catch(pe){lt(n,n.return,pe)}}if(c&4&&(d=n.stateNode,d!=null)){var p=n.memoizedProps,w=a!==null?a.memoizedProps:p,R=n.type,D=n.updateQueue;if(n.updateQueue=null,D!==null)try{R==="input"&&p.type==="radio"&&p.name!=null&&Di(d,p),Mi(R,w);var B=Mi(R,p);for(w=0;w<D.length;w+=2){var J=D[w],Z=D[w+1];J==="style"?Oi(d,Z):J==="dangerouslySetInnerHTML"?Nl(d,Z):J==="children"?qs(d,Z):q(d,J,Z,B)}switch(R){case"input":$s(d,p);break;case"textarea":kl(d,p);break;case"select":var Y=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!p.multiple;var le=p.value;le!=null?Pn(d,!!p.multiple,le,!1):Y!==!!p.multiple&&(p.defaultValue!=null?Pn(d,!!p.multiple,p.defaultValue,!0):Pn(d,!!p.multiple,p.multiple?[]:"",!1))}d[Pa]=p}catch(pe){lt(n,n.return,pe)}}break;case 6:if(Ln(i,n),ir(n),c&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,p=n.memoizedProps;try{d.nodeValue=p}catch(pe){lt(n,n.return,pe)}}break;case 3:if(Ln(i,n),ir(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{ns(i.containerInfo)}catch(pe){lt(n,n.return,pe)}break;case 4:Ln(i,n),ir(n);break;case 13:Ln(i,n),ir(n),d=n.child,d.flags&8192&&(p=d.memoizedState!==null,d.stateNode.isHidden=p,!p||d.alternate!==null&&d.alternate.memoizedState!==null||(ad=Je())),c&4&&lg(n);break;case 22:if(J=a!==null&&a.memoizedState!==null,n.mode&1?(qt=(B=qt)||J,Ln(i,n),qt=B):Ln(i,n),ir(n),c&8192){if(B=n.memoizedState!==null,(n.stateNode.isHidden=B)&&!J&&(n.mode&1)!==0)for(ce=n,J=n.child;J!==null;){for(Z=ce=J;ce!==null;){switch(Y=ce,le=Y.child,Y.tag){case 0:case 11:case 14:case 15:Fa(4,Y,Y.return);break;case 1:mo(Y,Y.return);var de=Y.stateNode;if(typeof de.componentWillUnmount=="function"){c=Y,a=Y.return;try{i=c,de.props=i.memoizedProps,de.state=i.memoizedState,de.componentWillUnmount()}catch(pe){lt(c,a,pe)}}break;case 5:mo(Y,Y.return);break;case 22:if(Y.memoizedState!==null){dg(Z);continue}}le!==null?(le.return=Y,ce=le):dg(Z)}J=J.sibling}e:for(J=null,Z=n;;){if(Z.tag===5){if(J===null){J=Z;try{d=Z.stateNode,B?(p=d.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(R=Z.stateNode,D=Z.memoizedProps.style,w=D!=null&&D.hasOwnProperty("display")?D.display:null,R.style.display=Gr("display",w))}catch(pe){lt(n,n.return,pe)}}}else if(Z.tag===6){if(J===null)try{Z.stateNode.nodeValue=B?"":Z.memoizedProps}catch(pe){lt(n,n.return,pe)}}else if((Z.tag!==22&&Z.tag!==23||Z.memoizedState===null||Z===n)&&Z.child!==null){Z.child.return=Z,Z=Z.child;continue}if(Z===n)break e;for(;Z.sibling===null;){if(Z.return===null||Z.return===n)break e;J===Z&&(J=null),Z=Z.return}J===Z&&(J=null),Z.sibling.return=Z.return,Z=Z.sibling}}break;case 19:Ln(i,n),ir(n),c&4&&lg(n);break;case 21:break;default:Ln(i,n),ir(n)}}function ir(n){var i=n.flags;if(i&2){try{e:{for(var a=n.return;a!==null;){if(ig(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(qs(d,""),c.flags&=-33);var p=og(n);sd(n,p,d);break;case 3:case 4:var w=c.stateNode.containerInfo,R=og(n);rd(n,R,w);break;default:throw Error(t(161))}}catch(D){lt(n,n.return,D)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function n0(n,i,a){ce=n,cg(n)}function cg(n,i,a){for(var c=(n.mode&1)!==0;ce!==null;){var d=ce,p=d.child;if(d.tag===22&&c){var w=d.memoizedState!==null||Au;if(!w){var R=d.alternate,D=R!==null&&R.memoizedState!==null||qt;R=Au;var B=qt;if(Au=w,(qt=D)&&!B)for(ce=d;ce!==null;)w=ce,D=w.child,w.tag===22&&w.memoizedState!==null?fg(d):D!==null?(D.return=w,ce=D):fg(d);for(;p!==null;)ce=p,cg(p),p=p.sibling;ce=d,Au=R,qt=B}hg(n)}else(d.subtreeFlags&8772)!==0&&p!==null?(p.return=d,ce=p):hg(n)}}function hg(n){for(;ce!==null;){var i=ce;if((i.flags&8772)!==0){var a=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:qt||Cu(5,i);break;case 1:var c=i.stateNode;if(i.flags&4&&!qt)if(a===null)c.componentDidMount();else{var d=i.elementType===i.type?a.memoizedProps:On(i.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var p=i.updateQueue;p!==null&&dm(i,p,c);break;case 3:var w=i.updateQueue;if(w!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}dm(i,w,a)}break;case 5:var R=i.stateNode;if(a===null&&i.flags&4){a=R;var D=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":D.autoFocus&&a.focus();break;case"img":D.src&&(a.src=D.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var B=i.alternate;if(B!==null){var J=B.memoizedState;if(J!==null){var Z=J.dehydrated;Z!==null&&ns(Z)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}qt||i.flags&512&&nd(i)}catch(Y){lt(i,i.return,Y)}}if(i===n){ce=null;break}if(a=i.sibling,a!==null){a.return=i.return,ce=a;break}ce=i.return}}function dg(n){for(;ce!==null;){var i=ce;if(i===n){ce=null;break}var a=i.sibling;if(a!==null){a.return=i.return,ce=a;break}ce=i.return}}function fg(n){for(;ce!==null;){var i=ce;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{Cu(4,i)}catch(D){lt(i,a,D)}break;case 1:var c=i.stateNode;if(typeof c.componentDidMount=="function"){var d=i.return;try{c.componentDidMount()}catch(D){lt(i,d,D)}}var p=i.return;try{nd(i)}catch(D){lt(i,p,D)}break;case 5:var w=i.return;try{nd(i)}catch(D){lt(i,w,D)}}}catch(D){lt(i,i.return,D)}if(i===n){ce=null;break}var R=i.sibling;if(R!==null){R.return=i.return,ce=R;break}ce=i.return}}var r0=Math.ceil,Ru=W.ReactCurrentDispatcher,id=W.ReactCurrentOwner,Cn=W.ReactCurrentBatchConfig,qe=0,Rt=null,yt=null,Ot=0,fn=0,go=as(0),Tt=0,Ua=null,hi=0,Pu=0,od=0,Ba=null,en=null,ad=0,yo=1/0,xr=null,ku=!1,ld=null,fs=null,Nu=!1,ps=null,xu=0,za=0,ud=null,Du=-1,Vu=0;function Qt(){return(qe&6)!==0?Je():Du!==-1?Du:Du=Je()}function ms(n){return(n.mode&1)===0?1:(qe&2)!==0&&Ot!==0?Ot&-Ot:UE.transition!==null?(Vu===0&&(Vu=ua()),Vu):(n=Fe,n!==0||(n=window.event,n=n===void 0?16:Wi(n.type)),n)}function bn(n,i,a,c){if(50<za)throw za=0,ud=null,Error(t(185));Zs(n,a,c),((qe&2)===0||n!==Rt)&&(n===Rt&&((qe&2)===0&&(Pu|=a),Tt===4&&gs(n,Ot)),tn(n,c),a===1&&qe===0&&(i.mode&1)===0&&(yo=Je()+500,au&&us()))}function tn(n,i){var a=n.callbackNode;Js(n,i);var c=_r(n,n===Rt?Ot:0);if(c===0)a!==null&&ji(a),n.callbackNode=null,n.callbackPriority=0;else if(i=c&-c,n.callbackPriority!==i){if(a!=null&&ji(a),i===1)n.tag===0?FE(mg.bind(null,n)):em(mg.bind(null,n)),ME(function(){(qe&6)===0&&us()}),a=null;else{switch(Hn(c)){case 1:a=Fi;break;case 4:a=oa;break;case 16:a=Ks;break;case 536870912:a=Ui;break;default:a=Ks}a=Ig(a,pg.bind(null,n))}n.callbackPriority=i,n.callbackNode=a}}function pg(n,i){if(Du=-1,Vu=0,(qe&6)!==0)throw Error(t(327));var a=n.callbackNode;if(_o()&&n.callbackNode!==a)return null;var c=_r(n,n===Rt?Ot:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||i)i=Ou(n,c);else{i=c;var d=qe;qe|=2;var p=yg();(Rt!==n||Ot!==i)&&(xr=null,yo=Je()+500,fi(n,i));do try{o0();break}catch(R){gg(n,R)}while(!0);Rh(),Ru.current=p,qe=d,yt!==null?i=0:(Rt=null,Ot=0,i=Tt)}if(i!==0){if(i===2&&(d=la(n),d!==0&&(c=d,i=cd(n,d))),i===1)throw a=Ua,fi(n,0),gs(n,c),tn(n,Je()),a;if(i===6)gs(n,c);else{if(d=n.current.alternate,(c&30)===0&&!s0(d)&&(i=Ou(n,c),i===2&&(p=la(n),p!==0&&(c=p,i=cd(n,p))),i===1))throw a=Ua,fi(n,0),gs(n,c),tn(n,Je()),a;switch(n.finishedWork=d,n.finishedLanes=c,i){case 0:case 1:throw Error(t(345));case 2:pi(n,en,xr);break;case 3:if(gs(n,c),(c&130023424)===c&&(i=ad+500-Je(),10<i)){if(_r(n,0)!==0)break;if(d=n.suspendedLanes,(d&c)!==c){Qt(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=gh(pi.bind(null,n,en,xr),i);break}pi(n,en,xr);break;case 4:if(gs(n,c),(c&4194240)===c)break;for(i=n.eventTimes,d=-1;0<c;){var w=31-on(c);p=1<<w,w=i[w],w>d&&(d=w),c&=~p}if(c=d,c=Je()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*r0(c/1960))-c,10<c){n.timeoutHandle=gh(pi.bind(null,n,en,xr),c);break}pi(n,en,xr);break;case 5:pi(n,en,xr);break;default:throw Error(t(329))}}}return tn(n,Je()),n.callbackNode===a?pg.bind(null,n):null}function cd(n,i){var a=Ba;return n.current.memoizedState.isDehydrated&&(fi(n,i).flags|=256),n=Ou(n,i),n!==2&&(i=en,en=a,i!==null&&hd(i)),n}function hd(n){en===null?en=n:en.push.apply(en,n)}function s0(n){for(var i=n;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],p=d.getSnapshot;d=d.value;try{if(!Dn(p(),d))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function gs(n,i){for(i&=~od,i&=~Pu,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var a=31-on(i),c=1<<a;n[a]=-1,i&=~c}}function mg(n){if((qe&6)!==0)throw Error(t(327));_o();var i=_r(n,0);if((i&1)===0)return tn(n,Je()),null;var a=Ou(n,i);if(n.tag!==0&&a===2){var c=la(n);c!==0&&(i=c,a=cd(n,c))}if(a===1)throw a=Ua,fi(n,0),gs(n,i),tn(n,Je()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,pi(n,en,xr),tn(n,Je()),null}function dd(n,i){var a=qe;qe|=1;try{return n(i)}finally{qe=a,qe===0&&(yo=Je()+500,au&&us())}}function di(n){ps!==null&&ps.tag===0&&(qe&6)===0&&_o();var i=qe;qe|=1;var a=Cn.transition,c=Fe;try{if(Cn.transition=null,Fe=1,n)return n()}finally{Fe=c,Cn.transition=a,qe=i,(qe&6)===0&&us()}}function fd(){fn=go.current,et(go)}function fi(n,i){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,OE(a)),yt!==null)for(a=yt.return;a!==null;){var c=a;switch(Th(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&iu();break;case 3:fo(),et(Yt),et(Bt),Mh();break;case 5:Vh(c);break;case 4:fo();break;case 13:et(st);break;case 19:et(st);break;case 10:Ph(c.type._context);break;case 22:case 23:fd()}a=a.return}if(Rt=n,yt=n=ys(n.current,null),Ot=fn=i,Tt=0,Ua=null,od=Pu=hi=0,en=Ba=null,li!==null){for(i=0;i<li.length;i++)if(a=li[i],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,p=a.pending;if(p!==null){var w=p.next;p.next=d,c.next=w}a.pending=c}li=null}return n}function gg(n,i){do{var a=yt;try{if(Rh(),yu.current=Eu,_u){for(var c=it.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}_u=!1}if(ci=0,Ct=Et=it=null,Oa=!1,Ma=0,id.current=null,a===null||a.return===null){Tt=1,Ua=i,yt=null;break}e:{var p=n,w=a.return,R=a,D=i;if(i=Ot,R.flags|=32768,D!==null&&typeof D=="object"&&typeof D.then=="function"){var B=D,J=R,Z=J.tag;if((J.mode&1)===0&&(Z===0||Z===11||Z===15)){var Y=J.alternate;Y?(J.updateQueue=Y.updateQueue,J.memoizedState=Y.memoizedState,J.lanes=Y.lanes):(J.updateQueue=null,J.memoizedState=null)}var le=Bm(w);if(le!==null){le.flags&=-257,zm(le,w,R,p,i),le.mode&1&&Um(p,B,i),i=le,D=B;var de=i.updateQueue;if(de===null){var pe=new Set;pe.add(D),i.updateQueue=pe}else de.add(D);break e}else{if((i&1)===0){Um(p,B,i),pd();break e}D=Error(t(426))}}else if(rt&&R.mode&1){var ht=Bm(w);if(ht!==null){(ht.flags&65536)===0&&(ht.flags|=256),zm(ht,w,R,p,i),Ah(po(D,R));break e}}p=D=po(D,R),Tt!==4&&(Tt=2),Ba===null?Ba=[p]:Ba.push(p),p=w;do{switch(p.tag){case 3:p.flags|=65536,i&=-i,p.lanes|=i;var b=jm(p,D,i);hm(p,b);break e;case 1:R=D;var V=p.type,U=p.stateNode;if((p.flags&128)===0&&(typeof V.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(fs===null||!fs.has(U)))){p.flags|=65536,i&=-i,p.lanes|=i;var re=Fm(p,R,i);hm(p,re);break e}}p=p.return}while(p!==null)}vg(a)}catch(me){i=me,yt===a&&a!==null&&(yt=a=a.return);continue}break}while(!0)}function yg(){var n=Ru.current;return Ru.current=Eu,n===null?Eu:n}function pd(){(Tt===0||Tt===3||Tt===2)&&(Tt=4),Rt===null||(hi&268435455)===0&&(Pu&268435455)===0||gs(Rt,Ot)}function Ou(n,i){var a=qe;qe|=2;var c=yg();(Rt!==n||Ot!==i)&&(xr=null,fi(n,i));do try{i0();break}catch(d){gg(n,d)}while(!0);if(Rh(),qe=a,Ru.current=c,yt!==null)throw Error(t(261));return Rt=null,Ot=0,Tt}function i0(){for(;yt!==null;)_g(yt)}function o0(){for(;yt!==null&&!Gs();)_g(yt)}function _g(n){var i=Tg(n.alternate,n,fn);n.memoizedProps=n.pendingProps,i===null?vg(n):yt=i,id.current=null}function vg(n){var i=n;do{var a=i.alternate;if(n=i.return,(i.flags&32768)===0){if(a=JE(a,i,fn),a!==null){yt=a;return}}else{if(a=ZE(a,i),a!==null){a.flags&=32767,yt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Tt=6,yt=null;return}}if(i=i.sibling,i!==null){yt=i;return}yt=i=n}while(i!==null);Tt===0&&(Tt=5)}function pi(n,i,a){var c=Fe,d=Cn.transition;try{Cn.transition=null,Fe=1,a0(n,i,a,c)}finally{Cn.transition=d,Fe=c}return null}function a0(n,i,a,c){do _o();while(ps!==null);if((qe&6)!==0)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var p=a.lanes|a.childLanes;if(eh(n,p),n===Rt&&(yt=Rt=null,Ot=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Nu||(Nu=!0,Ig(Ks,function(){return _o(),null})),p=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||p){p=Cn.transition,Cn.transition=null;var w=Fe;Fe=1;var R=qe;qe|=4,id.current=null,t0(n,a),ug(a,n),RE(ph),Er=!!fh,ph=fh=null,n.current=a,n0(a),yr(),qe=R,Fe=w,Cn.transition=p}else n.current=a;if(Nu&&(Nu=!1,ps=n,xu=d),p=n.pendingLanes,p===0&&(fs=null),Bl(a.stateNode),tn(n,Je()),i!==null)for(c=n.onRecoverableError,a=0;a<i.length;a++)d=i[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(ku)throw ku=!1,n=ld,ld=null,n;return(xu&1)!==0&&n.tag!==0&&_o(),p=n.pendingLanes,(p&1)!==0?n===ud?za++:(za=0,ud=n):za=0,us(),null}function _o(){if(ps!==null){var n=Hn(xu),i=Cn.transition,a=Fe;try{if(Cn.transition=null,Fe=16>n?16:n,ps===null)var c=!1;else{if(n=ps,ps=null,xu=0,(qe&6)!==0)throw Error(t(331));var d=qe;for(qe|=4,ce=n.current;ce!==null;){var p=ce,w=p.child;if((ce.flags&16)!==0){var R=p.deletions;if(R!==null){for(var D=0;D<R.length;D++){var B=R[D];for(ce=B;ce!==null;){var J=ce;switch(J.tag){case 0:case 11:case 15:Fa(8,J,p)}var Z=J.child;if(Z!==null)Z.return=J,ce=Z;else for(;ce!==null;){J=ce;var Y=J.sibling,le=J.return;if(sg(J),J===B){ce=null;break}if(Y!==null){Y.return=le,ce=Y;break}ce=le}}}var de=p.alternate;if(de!==null){var pe=de.child;if(pe!==null){de.child=null;do{var ht=pe.sibling;pe.sibling=null,pe=ht}while(pe!==null)}}ce=p}}if((p.subtreeFlags&2064)!==0&&w!==null)w.return=p,ce=w;else e:for(;ce!==null;){if(p=ce,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:Fa(9,p,p.return)}var b=p.sibling;if(b!==null){b.return=p.return,ce=b;break e}ce=p.return}}var V=n.current;for(ce=V;ce!==null;){w=ce;var U=w.child;if((w.subtreeFlags&2064)!==0&&U!==null)U.return=w,ce=U;else e:for(w=V;ce!==null;){if(R=ce,(R.flags&2048)!==0)try{switch(R.tag){case 0:case 11:case 15:Cu(9,R)}}catch(me){lt(R,R.return,me)}if(R===w){ce=null;break e}var re=R.sibling;if(re!==null){re.return=R.return,ce=re;break e}ce=R.return}}if(qe=d,us(),sn&&typeof sn.onPostCommitFiberRoot=="function")try{sn.onPostCommitFiberRoot(Qs,n)}catch{}c=!0}return c}finally{Fe=a,Cn.transition=i}}return!1}function wg(n,i,a){i=po(a,i),i=jm(n,i,1),n=hs(n,i,1),i=Qt(),n!==null&&(Zs(n,1,i),tn(n,i))}function lt(n,i,a){if(n.tag===3)wg(n,n,a);else for(;i!==null;){if(i.tag===3){wg(i,n,a);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(fs===null||!fs.has(c))){n=po(a,n),n=Fm(i,n,1),i=hs(i,n,1),n=Qt(),i!==null&&(Zs(i,1,n),tn(i,n));break}}i=i.return}}function l0(n,i,a){var c=n.pingCache;c!==null&&c.delete(i),i=Qt(),n.pingedLanes|=n.suspendedLanes&a,Rt===n&&(Ot&a)===a&&(Tt===4||Tt===3&&(Ot&130023424)===Ot&&500>Je()-ad?fi(n,0):od|=a),tn(n,i)}function Eg(n,i){i===0&&((n.mode&1)===0?i=1:(i=Zr,Zr<<=1,(Zr&130023424)===0&&(Zr=4194304)));var a=Qt();n=Pr(n,i),n!==null&&(Zs(n,i,a),tn(n,a))}function u0(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),Eg(n,a)}function c0(n,i){var a=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(i),Eg(n,a)}var Tg;Tg=function(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps||Yt.current)Zt=!0;else{if((n.lanes&a)===0&&(i.flags&128)===0)return Zt=!1,YE(n,i,a);Zt=(n.flags&131072)!==0}else Zt=!1,rt&&(i.flags&1048576)!==0&&tm(i,uu,i.index);switch(i.lanes=0,i.tag){case 2:var c=i.type;Su(n,i),n=i.pendingProps;var d=io(i,Bt.current);ho(i,a),d=jh(null,i,c,n,d,a);var p=Fh();return i.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Jt(c)?(p=!0,ou(i)):p=!1,i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,xh(i),d.updater=Tu,i.stateNode=d,d._reactInternals=i,Wh(i,c,n,a),i=Qh(null,i,c,!0,p,a)):(i.tag=0,rt&&p&&Eh(i),Kt(null,i,d,a),i=i.child),i;case 16:c=i.elementType;e:{switch(Su(n,i),n=i.pendingProps,d=c._init,c=d(c._payload),i.type=c,d=i.tag=d0(c),n=On(c,n),d){case 0:i=Kh(null,i,c,n,a);break e;case 1:i=Km(null,i,c,n,a);break e;case 11:i=$m(null,i,c,n,a);break e;case 14:i=qm(null,i,c,On(c.type,n),a);break e}throw Error(t(306,c,""))}return i;case 0:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:On(c,d),Kh(n,i,c,d,a);case 1:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:On(c,d),Km(n,i,c,d,a);case 3:e:{if(Qm(i),n===null)throw Error(t(387));c=i.pendingProps,p=i.memoizedState,d=p.element,cm(n,i),mu(i,c,null,a);var w=i.memoizedState;if(c=w.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){d=po(Error(t(423)),i),i=Xm(n,i,c,a,d);break e}else if(c!==d){d=po(Error(t(424)),i),i=Xm(n,i,c,a,d);break e}else for(dn=os(i.stateNode.containerInfo.firstChild),hn=i,rt=!0,Vn=null,a=lm(i,null,c,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(lo(),c===d){i=Nr(n,i,a);break e}Kt(n,i,c,a)}i=i.child}return i;case 5:return fm(i),n===null&&Sh(i),c=i.type,d=i.pendingProps,p=n!==null?n.memoizedProps:null,w=d.children,mh(c,d)?w=null:p!==null&&mh(c,p)&&(i.flags|=32),Gm(n,i),Kt(n,i,w,a),i.child;case 6:return n===null&&Sh(i),null;case 13:return Ym(n,i,a);case 4:return Dh(i,i.stateNode.containerInfo),c=i.pendingProps,n===null?i.child=uo(i,null,c,a):Kt(n,i,c,a),i.child;case 11:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:On(c,d),$m(n,i,c,d,a);case 7:return Kt(n,i,i.pendingProps,a),i.child;case 8:return Kt(n,i,i.pendingProps.children,a),i.child;case 12:return Kt(n,i,i.pendingProps.children,a),i.child;case 10:e:{if(c=i.type._context,d=i.pendingProps,p=i.memoizedProps,w=d.value,Ye(du,c._currentValue),c._currentValue=w,p!==null)if(Dn(p.value,w)){if(p.children===d.children&&!Yt.current){i=Nr(n,i,a);break e}}else for(p=i.child,p!==null&&(p.return=i);p!==null;){var R=p.dependencies;if(R!==null){w=p.child;for(var D=R.firstContext;D!==null;){if(D.context===c){if(p.tag===1){D=kr(-1,a&-a),D.tag=2;var B=p.updateQueue;if(B!==null){B=B.shared;var J=B.pending;J===null?D.next=D:(D.next=J.next,J.next=D),B.pending=D}}p.lanes|=a,D=p.alternate,D!==null&&(D.lanes|=a),kh(p.return,a,i),R.lanes|=a;break}D=D.next}}else if(p.tag===10)w=p.type===i.type?null:p.child;else if(p.tag===18){if(w=p.return,w===null)throw Error(t(341));w.lanes|=a,R=w.alternate,R!==null&&(R.lanes|=a),kh(w,a,i),w=p.sibling}else w=p.child;if(w!==null)w.return=p;else for(w=p;w!==null;){if(w===i){w=null;break}if(p=w.sibling,p!==null){p.return=w.return,w=p;break}w=w.return}p=w}Kt(n,i,d.children,a),i=i.child}return i;case 9:return d=i.type,c=i.pendingProps.children,ho(i,a),d=Sn(d),c=c(d),i.flags|=1,Kt(n,i,c,a),i.child;case 14:return c=i.type,d=On(c,i.pendingProps),d=On(c.type,d),qm(n,i,c,d,a);case 15:return Wm(n,i,i.type,i.pendingProps,a);case 17:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:On(c,d),Su(n,i),i.tag=1,Jt(c)?(n=!0,ou(i)):n=!1,ho(i,a),Lm(i,c,d),Wh(i,c,d,a),Qh(null,i,c,!0,n,a);case 19:return Zm(n,i,a);case 22:return Hm(n,i,a)}throw Error(t(156,i.tag))};function Ig(n,i){return ia(n,i)}function h0(n,i,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rn(n,i,a,c){return new h0(n,i,a,c)}function md(n){return n=n.prototype,!(!n||!n.isReactComponent)}function d0(n){if(typeof n=="function")return md(n)?1:0;if(n!=null){if(n=n.$$typeof,n===O)return 11;if(n===Ve)return 14}return 2}function ys(n,i){var a=n.alternate;return a===null?(a=Rn(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Mu(n,i,a,c,d,p){var w=2;if(c=n,typeof n=="function")md(n)&&(w=1);else if(typeof n=="string")w=5;else e:switch(n){case C:return mi(a.children,d,p,i);case I:w=8,d|=8;break;case P:return n=Rn(12,a,i,d|2),n.elementType=P,n.lanes=p,n;case k:return n=Rn(13,a,i,d),n.elementType=k,n.lanes=p,n;case fe:return n=Rn(19,a,i,d),n.elementType=fe,n.lanes=p,n;case Re:return Lu(a,d,p,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case N:w=10;break e;case x:w=9;break e;case O:w=11;break e;case Ve:w=14;break e;case Ue:w=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return i=Rn(w,a,i,d),i.elementType=n,i.type=c,i.lanes=p,i}function mi(n,i,a,c){return n=Rn(7,n,c,i),n.lanes=a,n}function Lu(n,i,a,c){return n=Rn(22,n,c,i),n.elementType=Re,n.lanes=a,n.stateNode={isHidden:!1},n}function gd(n,i,a){return n=Rn(6,n,null,i),n.lanes=a,n}function yd(n,i,a){return i=Rn(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function f0(n,i,a,c,d){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ca(0),this.expirationTimes=ca(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ca(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function _d(n,i,a,c,d,p,w,R,D){return n=new f0(n,i,a,R,D),i===1?(i=1,p===!0&&(i|=8)):i=0,p=Rn(3,null,null,i),n.current=p,p.stateNode=n,p.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},xh(p),n}function p0(n,i,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ee,key:c==null?null:""+c,children:n,containerInfo:i,implementation:a}}function Sg(n){if(!n)return ls;n=n._reactInternals;e:{if(Nn(n)!==n||n.tag!==1)throw Error(t(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Jt(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Jt(a))return Jp(n,a,i)}return i}function Ag(n,i,a,c,d,p,w,R,D){return n=_d(a,c,!0,n,d,p,w,R,D),n.context=Sg(null),a=n.current,c=Qt(),d=ms(a),p=kr(c,d),p.callback=i??null,hs(a,p,d),n.current.lanes=d,Zs(n,d,c),tn(n,c),n}function bu(n,i,a,c){var d=i.current,p=Qt(),w=ms(d);return a=Sg(a),i.context===null?i.context=a:i.pendingContext=a,i=kr(p,w),i.payload={element:n},c=c===void 0?null:c,c!==null&&(i.callback=c),n=hs(d,i,w),n!==null&&(bn(n,d,w,p),pu(n,d,w)),w}function ju(n){return n=n.current,n.child?(n.child.tag===5,n.child.stateNode):null}function Cg(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function vd(n,i){Cg(n,i),(n=n.alternate)&&Cg(n,i)}function m0(){return null}var Rg=typeof reportError=="function"?reportError:function(n){console.error(n)};function wd(n){this._internalRoot=n}Fu.prototype.render=wd.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(t(409));bu(n,i,null,null)},Fu.prototype.unmount=wd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;di(function(){bu(null,n,null,null)}),i[Sr]=null}};function Fu(n){this._internalRoot=n}Fu.prototype.unstable_scheduleHydration=function(n){if(n){var i=pa();n={blockedOn:null,target:n,priority:i};for(var a=0;a<an.length&&i!==0&&i<an[a].priority;a++);an.splice(a,0,n),a===0&&$i(n)}};function Ed(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Uu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Pg(){}function g0(n,i,a,c,d){if(d){if(typeof c=="function"){var p=c;c=function(){var B=ju(w);p.call(B)}}var w=Ag(i,c,n,0,null,!1,!1,"",Pg);return n._reactRootContainer=w,n[Sr]=w.current,Ca(n.nodeType===8?n.parentNode:n),di(),w}for(;d=n.lastChild;)n.removeChild(d);if(typeof c=="function"){var R=c;c=function(){var B=ju(D);R.call(B)}}var D=_d(n,0,!1,null,null,!1,!1,"",Pg);return n._reactRootContainer=D,n[Sr]=D.current,Ca(n.nodeType===8?n.parentNode:n),di(function(){bu(i,D,a,c)}),D}function Bu(n,i,a,c,d){var p=a._reactRootContainer;if(p){var w=p;if(typeof d=="function"){var R=d;d=function(){var D=ju(w);R.call(D)}}bu(i,w,n,d)}else w=g0(a,i,n,d,c);return ju(w)}da=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var a=He(i.pendingLanes);a!==0&&(ha(i,a|1),tn(i,Je()),(qe&6)===0&&(yo=Je()+500,us()))}break;case 13:di(function(){var c=Pr(n,1);if(c!==null){var d=Qt();bn(c,n,1,d)}}),vd(n,1)}},Bi=function(n){if(n.tag===13){var i=Pr(n,134217728);if(i!==null){var a=Qt();bn(i,n,134217728,a)}vd(n,134217728)}},fa=function(n){if(n.tag===13){var i=ms(n),a=Pr(n,i);if(a!==null){var c=Qt();bn(a,n,i,c)}vd(n,i)}},pa=function(){return Fe},ma=function(n,i){var a=Fe;try{return Fe=n,i()}finally{Fe=a}},pr=function(n,i,a){switch(i){case"input":if($s(n,a),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var c=a[i];if(c!==n&&c.form===n.form){var d=su(c);if(!d)throw Error(t(90));Xo(c),$s(c,d)}}}break;case"textarea":kl(n,a);break;case"select":i=a.value,i!=null&&Pn(n,!!a.multiple,i,!1)}},Dl=dd,Vl=di;var y0={usingClientEntryPoint:!1,Events:[ka,ro,su,Qr,Xr,dd]},$a={findFiberByHostInstance:si,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_0={bundleType:$a.bundleType,version:$a.version,rendererPackageName:$a.rendererPackageName,rendererConfig:$a.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:W.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Ul(n),n===null?null:n.stateNode},findFiberByHostInstance:$a.findFiberByHostInstance||m0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zu.isDisabled&&zu.supportsFiber)try{Qs=zu.inject(_0),sn=zu}catch{}}return nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=y0,nn.createPortal=function(n,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ed(i))throw Error(t(200));return p0(n,i,null,a)},nn.createRoot=function(n,i){if(!Ed(n))throw Error(t(299));var a=!1,c="",d=Rg;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onRecoverableError!==void 0&&(d=i.onRecoverableError)),i=_d(n,1,!1,null,null,a,!1,c,d),n[Sr]=i.current,Ca(n.nodeType===8?n.parentNode:n),new wd(i)},nn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Ul(i),n=n===null?null:n.stateNode,n},nn.flushSync=function(n){return di(n)},nn.hydrate=function(n,i,a){if(!Uu(i))throw Error(t(200));return Bu(null,n,i,!0,a)},nn.hydrateRoot=function(n,i,a){if(!Ed(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,p="",w=Rg;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),i=Ag(i,null,n,1,a??null,d,!1,p,w),n[Sr]=i.current,Ca(n),c)for(n=0;n<c.length;n++)a=c[n],d=a._getVersion,d=d(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,d]:i.mutableSourceEagerHydrationData.push(a,d);return new Fu(i)},nn.render=function(n,i,a){if(!Uu(i))throw Error(t(200));return Bu(null,n,i,!1,a)},nn.unmountComponentAtNode=function(n){if(!Uu(n))throw Error(t(40));return n._reactRootContainer?(di(function(){Bu(null,null,n,!1,function(){n._reactRootContainer=null,n[Sr]=null})}),!0):!1},nn.unstable_batchedUpdates=dd,nn.unstable_renderSubtreeIntoContainer=function(n,i,a,c){if(!Uu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Bu(n,i,a,!1,c)},nn.version="18.3.1-next-f1338f8080-20240426",nn}var Lg;function C_(){if(Lg)return Sd.exports;Lg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Sd.exports=R0(),Sd.exports}var bg;function P0(){if(bg)return $u;bg=1;var r=C_();return $u.createRoot=r.createRoot,$u.hydrateRoot=r.hydrateRoot,$u}var k0=P0();const N0=A_(k0);C_();function tl(){return tl=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},tl.apply(this,arguments)}var Is;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(Is||(Is={}));const jg="popstate";function x0(r){r===void 0&&(r={});function e(o,l){let{pathname:h="/",search:f="",hash:g=""}=Pi(o.location.hash.substr(1));return!h.startsWith("/")&&!h.startsWith(".")&&(h="/"+h),zd("",{pathname:h,search:f,hash:g},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(o,l){let h=o.document.querySelector("base"),f="";if(h&&h.getAttribute("href")){let g=o.location.href,y=g.indexOf("#");f=y===-1?g:g.slice(0,y)}return f+"#"+(typeof l=="string"?l:ac(l))}function s(o,l){kc(o.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(l)+")")}return V0(e,t,s,r)}function pt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function kc(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function D0(){return Math.random().toString(36).substr(2,8)}function Fg(r,e){return{usr:r.state,key:r.key,idx:e}}function zd(r,e,t,s){return t===void 0&&(t=null),tl({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?Pi(e):e,{state:t,key:e&&e.key||s||D0()})}function ac(r){let{pathname:e="/",search:t="",hash:s=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function Pi(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let s=r.indexOf("?");s>=0&&(e.search=r.substr(s),r=r.substr(0,s)),r&&(e.pathname=r)}return e}function V0(r,e,t,s){s===void 0&&(s={});let{window:o=document.defaultView,v5Compat:l=!1}=s,h=o.history,f=Is.Pop,g=null,y=v();y==null&&(y=0,h.replaceState(tl({},h.state,{idx:y}),""));function v(){return(h.state||{idx:null}).idx}function E(){f=Is.Pop;let j=v(),K=j==null?null:j-y;y=j,g&&g({action:f,location:$.location,delta:K})}function S(j,K){f=Is.Push;let se=zd($.location,j,K);t&&t(se,j),y=v()+1;let q=Fg(se,y),W=$.createHref(se);try{h.pushState(q,"",W)}catch(te){if(te instanceof DOMException&&te.name==="DataCloneError")throw te;o.location.assign(W)}l&&g&&g({action:f,location:$.location,delta:1})}function M(j,K){f=Is.Replace;let se=zd($.location,j,K);t&&t(se,j),y=v();let q=Fg(se,y),W=$.createHref(se);h.replaceState(q,"",W),l&&g&&g({action:f,location:$.location,delta:0})}function H(j){let K=o.location.origin!=="null"?o.location.origin:o.location.href,se=typeof j=="string"?j:ac(j);return se=se.replace(/ $/,"%20"),pt(K,"No window.location.(origin|href) available to create URL for href: "+se),new URL(se,K)}let $={get action(){return f},get location(){return r(o,h)},listen(j){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(jg,E),g=j,()=>{o.removeEventListener(jg,E),g=null}},createHref(j){return e(o,j)},createURL:H,encodeLocation(j){let K=H(j);return{pathname:K.pathname,search:K.search,hash:K.hash}},push:S,replace:M,go(j){return h.go(j)}};return $}var Ug;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(Ug||(Ug={}));function O0(r,e,t){return t===void 0&&(t="/"),M0(r,e,t)}function M0(r,e,t,s){let o=typeof e=="string"?Pi(e):e,l=vf(o.pathname||"/",t);if(l==null)return null;let h=R_(r);L0(h);let f=null;for(let g=0;f==null&&g<h.length;++g){let y=K0(l);f=W0(h[g],y)}return f}function R_(r,e,t,s){e===void 0&&(e=[]),t===void 0&&(t=[]),s===void 0&&(s="");let o=(l,h,f)=>{let g={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};g.relativePath.startsWith("/")&&(pt(g.relativePath.startsWith(s),'Absolute route path "'+g.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),g.relativePath=g.relativePath.slice(s.length));let y=Cs([s,g.relativePath]),v=t.concat(g);l.children&&l.children.length>0&&(pt(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+y+'".')),R_(l.children,e,v,y)),!(l.path==null&&!l.index)&&e.push({path:y,score:$0(y,l.index),routesMeta:v})};return r.forEach((l,h)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))o(l,h);else for(let g of P_(l.path))o(l,h,g)}),e}function P_(r){let e=r.split("/");if(e.length===0)return[];let[t,...s]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(s.length===0)return o?[l,""]:[l];let h=P_(s.join("/")),f=[];return f.push(...h.map(g=>g===""?l:[l,g].join("/"))),o&&f.push(...h),f.map(g=>r.startsWith("/")&&g===""?"/":g)}function L0(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:q0(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}const b0=/^:[\w-]+$/,j0=3,F0=2,U0=1,B0=10,z0=-2,Bg=r=>r==="*";function $0(r,e){let t=r.split("/"),s=t.length;return t.some(Bg)&&(s+=z0),e&&(s+=F0),t.filter(o=>!Bg(o)).reduce((o,l)=>o+(b0.test(l)?j0:l===""?U0:B0),s)}function q0(r,e){return r.length===e.length&&r.slice(0,-1).every((s,o)=>s===e[o])?r[r.length-1]-e[e.length-1]:0}function W0(r,e,t){let{routesMeta:s}=r,o={},l="/",h=[];for(let f=0;f<s.length;++f){let g=s[f],y=f===s.length-1,v=l==="/"?e:e.slice(l.length)||"/",E=H0({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},v),S=g.route;if(!E)return null;Object.assign(o,E.params),h.push({params:o,pathname:Cs([l,E.pathname]),pathnameBase:Z0(Cs([l,E.pathnameBase])),route:S}),E.pathnameBase!=="/"&&(l=Cs([l,E.pathnameBase]))}return h}function H0(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,s]=G0(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let l=o[0],h=l.replace(/(.)\/+$/,"$1"),f=o.slice(1);return{params:s.reduce((y,v,E)=>{let{paramName:S,isOptional:M}=v;if(S==="*"){let $=f[E]||"";h=l.slice(0,l.length-$.length).replace(/(.)\/+$/,"$1")}const H=f[E];return M&&!H?y[S]=void 0:y[S]=(H||"").replace(/%2F/g,"/"),y},{}),pathname:l,pathnameBase:h,pattern:r}}function G0(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),kc(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,f,g)=>(s.push({paramName:f,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(s.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function K0(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return kc(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function vf(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=r.charAt(t);return s&&s!=="/"?null:r.slice(t)||"/"}const Q0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,X0=r=>Q0.test(r);function Y0(r,e){e===void 0&&(e="/");let{pathname:t,search:s="",hash:o=""}=typeof r=="string"?Pi(r):r,l;if(t)if(X0(t))l=t;else{if(t.includes("//")){let h=t;t=t.replace(/\/\/+/g,"/"),kc(!1,"Pathnames cannot have embedded double slashes - normalizing "+(h+" -> "+t))}t.startsWith("/")?l=zg(t.substring(1),"/"):l=zg(t,e)}else l=e;return{pathname:l,search:eT(s),hash:tT(o)}}function zg(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Rd(r,e,t,s){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function J0(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function wf(r,e){let t=J0(r);return e?t.map((s,o)=>o===t.length-1?s.pathname:s.pathnameBase):t.map(s=>s.pathnameBase)}function Ef(r,e,t,s){s===void 0&&(s=!1);let o;typeof r=="string"?o=Pi(r):(o=tl({},r),pt(!o.pathname||!o.pathname.includes("?"),Rd("?","pathname","search",o)),pt(!o.pathname||!o.pathname.includes("#"),Rd("#","pathname","hash",o)),pt(!o.search||!o.search.includes("#"),Rd("#","search","hash",o)));let l=r===""||o.pathname==="",h=l?"/":o.pathname,f;if(h==null)f=t;else{let E=e.length-1;if(!s&&h.startsWith("..")){let S=h.split("/");for(;S[0]==="..";)S.shift(),E-=1;o.pathname=S.join("/")}f=E>=0?e[E]:"/"}let g=Y0(o,f),y=h&&h!=="/"&&h.endsWith("/"),v=(l||h===".")&&t.endsWith("/");return!g.pathname.endsWith("/")&&(y||v)&&(g.pathname+="/"),g}const Cs=r=>r.join("/").replace(/\/\/+/g,"/"),Z0=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),eT=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,tT=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function nT(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const k_=["post","put","patch","delete"];new Set(k_);const rT=["get",...k_];new Set(rT);function nl(){return nl=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},nl.apply(this,arguments)}const Tf=he.createContext(null),sT=he.createContext(null),Fs=he.createContext(null),Nc=he.createContext(null),Br=he.createContext({outlet:null,matches:[],isDataRoute:!1}),N_=he.createContext(null);function iT(r,e){let{relative:t}=e===void 0?{}:e;Fo()||pt(!1);let{basename:s,navigator:o}=he.useContext(Fs),{hash:l,pathname:h,search:f}=D_(r,{relative:t}),g=h;return s!=="/"&&(g=h==="/"?s:Cs([s,h])),o.createHref({pathname:g,search:f,hash:l})}function Fo(){return he.useContext(Nc)!=null}function dl(){return Fo()||pt(!1),he.useContext(Nc).location}function x_(r){he.useContext(Fs).static||he.useLayoutEffect(r)}function xc(){let{isDataRoute:r}=he.useContext(Br);return r?vT():oT()}function oT(){Fo()||pt(!1);let r=he.useContext(Tf),{basename:e,future:t,navigator:s}=he.useContext(Fs),{matches:o}=he.useContext(Br),{pathname:l}=dl(),h=JSON.stringify(wf(o,t.v7_relativeSplatPath)),f=he.useRef(!1);return x_(()=>{f.current=!0}),he.useCallback(function(y,v){if(v===void 0&&(v={}),!f.current)return;if(typeof y=="number"){s.go(y);return}let E=Ef(y,JSON.parse(h),l,v.relative==="path");r==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:Cs([e,E.pathname])),(v.replace?s.replace:s.push)(E,v.state,v)},[e,s,h,l,r])}function aT(){let{matches:r}=he.useContext(Br),e=r[r.length-1];return e?e.params:{}}function D_(r,e){let{relative:t}=e===void 0?{}:e,{future:s}=he.useContext(Fs),{matches:o}=he.useContext(Br),{pathname:l}=dl(),h=JSON.stringify(wf(o,s.v7_relativeSplatPath));return he.useMemo(()=>Ef(r,JSON.parse(h),l,t==="path"),[r,h,l,t])}function lT(r,e){return uT(r,e)}function uT(r,e,t,s){Fo()||pt(!1);let{navigator:o}=he.useContext(Fs),{matches:l}=he.useContext(Br),h=l[l.length-1],f=h?h.params:{};h&&h.pathname;let g=h?h.pathnameBase:"/";h&&h.route;let y=dl(),v;if(e){var E;let j=typeof e=="string"?Pi(e):e;g==="/"||(E=j.pathname)!=null&&E.startsWith(g)||pt(!1),v=j}else v=y;let S=v.pathname||"/",M=S;if(g!=="/"){let j=g.replace(/^\//,"").split("/");M="/"+S.replace(/^\//,"").split("/").slice(j.length).join("/")}let H=O0(r,{pathname:M}),$=pT(H&&H.map(j=>Object.assign({},j,{params:Object.assign({},f,j.params),pathname:Cs([g,o.encodeLocation?o.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?g:Cs([g,o.encodeLocation?o.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),l,t,s);return e&&$?he.createElement(Nc.Provider,{value:{location:nl({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:Is.Pop}},$):$}function cT(){let r=_T(),e=nT(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return he.createElement(he.Fragment,null,he.createElement("h2",null,"Unexpected Application Error!"),he.createElement("h3",{style:{fontStyle:"italic"}},e),t?he.createElement("pre",{style:o},t):null,null)}const hT=he.createElement(cT,null);class dT extends he.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?he.createElement(Br.Provider,{value:this.props.routeContext},he.createElement(N_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function fT(r){let{routeContext:e,match:t,children:s}=r,o=he.useContext(Tf);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),he.createElement(Br.Provider,{value:e},s)}function pT(r,e,t,s){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),s===void 0&&(s=null),r==null){var l;if(!t)return null;if(t.errors)r=t.matches;else if((l=s)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let h=r,f=(o=t)==null?void 0:o.errors;if(f!=null){let v=h.findIndex(E=>E.route.id&&f?.[E.route.id]!==void 0);v>=0||pt(!1),h=h.slice(0,Math.min(h.length,v+1))}let g=!1,y=-1;if(t&&s&&s.v7_partialHydration)for(let v=0;v<h.length;v++){let E=h[v];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(y=v),E.route.id){let{loaderData:S,errors:M}=t,H=E.route.loader&&S[E.route.id]===void 0&&(!M||M[E.route.id]===void 0);if(E.route.lazy||H){g=!0,y>=0?h=h.slice(0,y+1):h=[h[0]];break}}}return h.reduceRight((v,E,S)=>{let M,H=!1,$=null,j=null;t&&(M=f&&E.route.id?f[E.route.id]:void 0,$=E.route.errorElement||hT,g&&(y<0&&S===0?(wT("route-fallback"),H=!0,j=null):y===S&&(H=!0,j=E.route.hydrateFallbackElement||null)));let K=e.concat(h.slice(0,S+1)),se=()=>{let q;return M?q=$:H?q=j:E.route.Component?q=he.createElement(E.route.Component,null):E.route.element?q=E.route.element:q=v,he.createElement(fT,{match:E,routeContext:{outlet:v,matches:K,isDataRoute:t!=null},children:q})};return t&&(E.route.ErrorBoundary||E.route.errorElement||S===0)?he.createElement(dT,{location:t.location,revalidation:t.revalidation,component:$,error:M,children:se(),routeContext:{outlet:null,matches:K,isDataRoute:!0}}):se()},null)}var V_=(function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r})(V_||{}),O_=(function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r})(O_||{});function mT(r){let e=he.useContext(Tf);return e||pt(!1),e}function gT(r){let e=he.useContext(sT);return e||pt(!1),e}function yT(r){let e=he.useContext(Br);return e||pt(!1),e}function M_(r){let e=yT(),t=e.matches[e.matches.length-1];return t.route.id||pt(!1),t.route.id}function _T(){var r;let e=he.useContext(N_),t=gT(),s=M_();return e!==void 0?e:(r=t.errors)==null?void 0:r[s]}function vT(){let{router:r}=mT(V_.UseNavigateStable),e=M_(O_.UseNavigateStable),t=he.useRef(!1);return x_(()=>{t.current=!0}),he.useCallback(function(o,l){l===void 0&&(l={}),t.current&&(typeof o=="number"?r.navigate(o):r.navigate(o,nl({fromRouteId:e},l)))},[r,e])}const $g={};function wT(r,e,t){$g[r]||($g[r]=!0)}function ET(r,e){r?.v7_startTransition,r?.v7_relativeSplatPath}function $d(r){let{to:e,replace:t,state:s,relative:o}=r;Fo()||pt(!1);let{future:l,static:h}=he.useContext(Fs),{matches:f}=he.useContext(Br),{pathname:g}=dl(),y=xc(),v=Ef(e,wf(f,l.v7_relativeSplatPath),g,o==="path"),E=JSON.stringify(v);return he.useEffect(()=>y(JSON.parse(E),{replace:t,state:s,relative:o}),[y,E,o,t,s]),null}function Dr(r){pt(!1)}function TT(r){let{basename:e="/",children:t=null,location:s,navigationType:o=Is.Pop,navigator:l,static:h=!1,future:f}=r;Fo()&&pt(!1);let g=e.replace(/^\/*/,"/"),y=he.useMemo(()=>({basename:g,navigator:l,static:h,future:nl({v7_relativeSplatPath:!1},f)}),[g,f,l,h]);typeof s=="string"&&(s=Pi(s));let{pathname:v="/",search:E="",hash:S="",state:M=null,key:H="default"}=s,$=he.useMemo(()=>{let j=vf(v,g);return j==null?null:{location:{pathname:j,search:E,hash:S,state:M,key:H},navigationType:o}},[g,v,E,S,M,H,o]);return $==null?null:he.createElement(Fs.Provider,{value:y},he.createElement(Nc.Provider,{children:t,value:$}))}function IT(r){let{children:e,location:t}=r;return lT(qd(e),t)}new Promise(()=>{});function qd(r,e){e===void 0&&(e=[]);let t=[];return he.Children.forEach(r,(s,o)=>{if(!he.isValidElement(s))return;let l=[...e,o];if(s.type===he.Fragment){t.push.apply(t,qd(s.props.children,l));return}s.type!==Dr&&pt(!1),!s.props.index||!s.props.children||pt(!1);let h={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(h.children=qd(s.props.children,l)),t.push(h)}),t}function Wd(){return Wd=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},Wd.apply(this,arguments)}function ST(r,e){if(r==null)return{};var t={},s=Object.keys(r),o,l;for(l=0;l<s.length;l++)o=s[l],!(e.indexOf(o)>=0)&&(t[o]=r[o]);return t}function AT(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function CT(r,e){return r.button===0&&(!e||e==="_self")&&!AT(r)}const RT=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],PT="6";try{window.__reactRouterVersion=PT}catch{}const kT="startTransition",qg=S0[kT];function NT(r){let{basename:e,children:t,future:s,window:o}=r,l=he.useRef();l.current==null&&(l.current=x0({window:o,v5Compat:!0}));let h=l.current,[f,g]=he.useState({action:h.action,location:h.location}),{v7_startTransition:y}=s||{},v=he.useCallback(E=>{y&&qg?qg(()=>g(E)):g(E)},[g,y]);return he.useLayoutEffect(()=>h.listen(v),[h,v]),he.useEffect(()=>ET(s),[s]),he.createElement(TT,{basename:e,children:t,location:f.location,navigationType:f.action,navigator:h,future:s})}const xT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",DT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vo=he.forwardRef(function(e,t){let{onClick:s,relative:o,reloadDocument:l,replace:h,state:f,target:g,to:y,preventScrollReset:v,viewTransition:E}=e,S=ST(e,RT),{basename:M}=he.useContext(Fs),H,$=!1;if(typeof y=="string"&&DT.test(y)&&(H=y,xT))try{let q=new URL(window.location.href),W=y.startsWith("//")?new URL(q.protocol+y):new URL(y),te=vf(W.pathname,M);W.origin===q.origin&&te!=null?y=te+W.search+W.hash:$=!0}catch{}let j=iT(y,{relative:o}),K=VT(y,{replace:h,state:f,target:g,preventScrollReset:v,relative:o,viewTransition:E});function se(q){s&&s(q),q.defaultPrevented||K(q)}return he.createElement("a",Wd({},S,{href:H||j,onClick:$||l?s:se,ref:t,target:g}))});var Wg;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(Wg||(Wg={}));var Hg;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(Hg||(Hg={}));function VT(r,e){let{target:t,replace:s,state:o,preventScrollReset:l,relative:h,viewTransition:f}=e===void 0?{}:e,g=xc(),y=dl(),v=D_(r,{relative:h});return he.useCallback(E=>{if(CT(E,t)){E.preventDefault();let S=s!==void 0?s:ac(y)===ac(v);g(r,{replace:S,state:o,preventScrollReset:l,relative:h,viewTransition:f})}},[y,g,v,s,o,t,r,l,h,f])}const OT=()=>{};var Gg={};const L_=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},MT=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const o=r[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],h=r[t++],f=r[t++],g=((o&7)<<18|(l&63)<<12|(h&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const l=r[t++],h=r[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},b_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const l=r[o],h=o+1<r.length,f=h?r[o+1]:0,g=o+2<r.length,y=g?r[o+2]:0,v=l>>2,E=(l&3)<<4|f>>4;let S=(f&15)<<2|y>>6,M=y&63;g||(M=64,h||(S=64)),s.push(t[v],t[E],t[S],t[M])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(L_(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):MT(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],f=o<r.length?t[r.charAt(o)]:0;++o;const y=o<r.length?t[r.charAt(o)]:64;++o;const E=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||f==null||y==null||E==null)throw new LT;const S=l<<2|f>>4;if(s.push(S),y!==64){const M=f<<4&240|y>>2;if(s.push(M),E!==64){const H=y<<6&192|E;s.push(H)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class LT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bT=function(r){const e=L_(r);return b_.encodeByteArray(e,!0)},lc=function(r){return bT(r).replace(/\./g,"")},j_=function(r){try{return b_.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function jT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const FT=()=>jT().__FIREBASE_DEFAULTS__,UT=()=>{if(typeof process>"u"||typeof Gg>"u")return;const r=Gg.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},BT=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&j_(r[1]);return e&&JSON.parse(e)},Dc=()=>{try{return OT()||FT()||UT()||BT()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},F_=r=>Dc()?.emulatorHosts?.[r],zT=r=>{const e=F_(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},U_=()=>Dc()?.config,B_=r=>Dc()?.[`_${r}`];class $T{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}function Uo(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function z_(r){return(await fetch(r,{credentials:"include"})).ok}function qT(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...r};return[lc(JSON.stringify(t)),lc(JSON.stringify(h)),""].join(".")}const Ka={};function WT(){const r={prod:[],emulator:[]};for(const e of Object.keys(Ka))Ka[e]?r.emulator.push(e):r.prod.push(e);return r}function HT(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Kg=!1;function $_(r,e){if(typeof window>"u"||typeof document>"u"||!Uo(window.location.host)||Ka[r]===e||Ka[r]||Kg)return;Ka[r]=e;function t(S){return`__firebase__banner__${S}`}const s="__firebase__banner",l=WT().prod.length>0;function h(){const S=document.getElementById(s);S&&S.remove()}function f(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function g(S,M){S.setAttribute("width","24"),S.setAttribute("id",M),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function y(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{Kg=!0,h()},S}function v(S,M){S.setAttribute("id",M),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function E(){const S=HT(s),M=t("text"),H=document.getElementById(M)||document.createElement("span"),$=t("learnmore"),j=document.getElementById($)||document.createElement("a"),K=t("preprendIcon"),se=document.getElementById(K)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const q=S.element;f(q),v(j,$);const W=y();g(se,K),q.append(se,H,j,W),document.body.appendChild(q)}l?(H.innerText="Preview backend disconnected.",se.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(se.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,H.innerText="Preview backend running in this workspace."),H.setAttribute("id",M)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}function Gt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function GT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Gt())}function KT(){const r=Dc()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function QT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function XT(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function YT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function JT(){const r=Gt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function ZT(){return!KT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function eI(){try{return typeof indexedDB=="object"}catch{return!1}}function tI(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}const nI="FirebaseError";class zr extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=nI,Object.setPrototypeOf(this,zr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fl.prototype.create)}}class fl{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?rI(l,s):"Error",f=`${this.serviceName}: ${h} (${o}).`;return new zr(o,f,s)}}function rI(r,e){return r.replace(sI,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const sI=/\{\$([^}]+)}/g;function iI(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function wi(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=r[o],h=e[o];if(Qg(l)&&Qg(h)){if(!wi(l,h))return!1}else if(l!==h)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function Qg(r){return r!==null&&typeof r=="object"}function pl(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function oI(r,e){const t=new aI(r,e);return t.subscribe.bind(t)}class aI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");lI(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=Pd),o.error===void 0&&(o.error=Pd),o.complete===void 0&&(o.complete=Pd);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function lI(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Pd(){}function St(r){return r&&r._delegate?r._delegate:r}class Ei{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const gi="[DEFAULT]";class uI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new $T;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(hI(e))try{this.getOrInitializeService({instanceIdentifier:gi})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=gi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=gi){return this.instances.has(e)}getOptions(e=gi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,h]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);s===f&&h.resolve(o)}return o}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:cI(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=gi){return this.component?this.component.multipleInstances?e:gi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function cI(r){return r===gi?void 0:r}function hI(r){return r.instantiationMode==="EAGER"}class dI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new uI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Me;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Me||(Me={}));const fI={debug:Me.DEBUG,verbose:Me.VERBOSE,info:Me.INFO,warn:Me.WARN,error:Me.ERROR,silent:Me.SILENT},pI=Me.INFO,mI={[Me.DEBUG]:"log",[Me.VERBOSE]:"log",[Me.INFO]:"info",[Me.WARN]:"warn",[Me.ERROR]:"error"},gI=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=mI[e];if(o)console[o](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class If{constructor(e){this.name=e,this._logLevel=pI,this._logHandler=gI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?fI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Me.DEBUG,...e),this._logHandler(this,Me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Me.VERBOSE,...e),this._logHandler(this,Me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Me.INFO,...e),this._logHandler(this,Me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Me.WARN,...e),this._logHandler(this,Me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Me.ERROR,...e),this._logHandler(this,Me.ERROR,...e)}}const yI=(r,e)=>e.some(t=>r instanceof t);let Xg,Yg;function _I(){return Xg||(Xg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vI(){return Yg||(Yg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const q_=new WeakMap,Hd=new WeakMap,W_=new WeakMap,kd=new WeakMap,Sf=new WeakMap;function wI(r){const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",h)},l=()=>{t(Rs(r.result)),o()},h=()=>{s(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&q_.set(t,r)}).catch(()=>{}),Sf.set(e,r),e}function EI(r){if(Hd.has(r))return;const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",h),r.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",h),r.addEventListener("abort",h)});Hd.set(r,e)}let Gd={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Hd.get(r);if(e==="objectStoreNames")return r.objectStoreNames||W_.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Rs(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function TI(r){Gd=r(Gd)}function II(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(Nd(this),e,...t);return W_.set(s,e.sort?e.sort():[e]),Rs(s)}:vI().includes(r)?function(...e){return r.apply(Nd(this),e),Rs(q_.get(this))}:function(...e){return Rs(r.apply(Nd(this),e))}}function SI(r){return typeof r=="function"?II(r):(r instanceof IDBTransaction&&EI(r),yI(r,_I())?new Proxy(r,Gd):r)}function Rs(r){if(r instanceof IDBRequest)return wI(r);if(kd.has(r))return kd.get(r);const e=SI(r);return e!==r&&(kd.set(r,e),Sf.set(e,r)),e}const Nd=r=>Sf.get(r);function AI(r,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const h=indexedDB.open(r,e),f=Rs(h);return s&&h.addEventListener("upgradeneeded",g=>{s(Rs(h.result),g.oldVersion,g.newVersion,Rs(h.transaction),g)}),t&&h.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),f.then(g=>{l&&g.addEventListener("close",()=>l()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),f}const CI=["get","getKey","getAll","getAllKeys","count"],RI=["put","add","delete","clear"],xd=new Map;function Jg(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(xd.get(e))return xd.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=RI.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||CI.includes(t)))return;const l=async function(h,...f){const g=this.transaction(h,o?"readwrite":"readonly");let y=g.store;return s&&(y=y.index(f.shift())),(await Promise.all([y[t](...f),o&&g.done]))[0]};return xd.set(e,l),l}TI(r=>({...r,get:(e,t,s)=>Jg(e,t)||r.get(e,t,s),has:(e,t)=>!!Jg(e,t)||r.has(e,t)}));class PI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(kI(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function kI(r){return r.getComponent()?.type==="VERSION"}const Kd="@firebase/app",Zg="0.14.6";const Lr=new If("@firebase/app"),NI="@firebase/app-compat",xI="@firebase/analytics-compat",DI="@firebase/analytics",VI="@firebase/app-check-compat",OI="@firebase/app-check",MI="@firebase/auth",LI="@firebase/auth-compat",bI="@firebase/database",jI="@firebase/data-connect",FI="@firebase/database-compat",UI="@firebase/functions",BI="@firebase/functions-compat",zI="@firebase/installations",$I="@firebase/installations-compat",qI="@firebase/messaging",WI="@firebase/messaging-compat",HI="@firebase/performance",GI="@firebase/performance-compat",KI="@firebase/remote-config",QI="@firebase/remote-config-compat",XI="@firebase/storage",YI="@firebase/storage-compat",JI="@firebase/firestore",ZI="@firebase/ai",eS="@firebase/firestore-compat",tS="firebase",nS="12.6.0";const Qd="[DEFAULT]",rS={[Kd]:"fire-core",[NI]:"fire-core-compat",[DI]:"fire-analytics",[xI]:"fire-analytics-compat",[OI]:"fire-app-check",[VI]:"fire-app-check-compat",[MI]:"fire-auth",[LI]:"fire-auth-compat",[bI]:"fire-rtdb",[jI]:"fire-data-connect",[FI]:"fire-rtdb-compat",[UI]:"fire-fn",[BI]:"fire-fn-compat",[zI]:"fire-iid",[$I]:"fire-iid-compat",[qI]:"fire-fcm",[WI]:"fire-fcm-compat",[HI]:"fire-perf",[GI]:"fire-perf-compat",[KI]:"fire-rc",[QI]:"fire-rc-compat",[XI]:"fire-gcs",[YI]:"fire-gcs-compat",[JI]:"fire-fst",[eS]:"fire-fst-compat",[ZI]:"fire-vertex","fire-js":"fire-js",[tS]:"fire-js-all"};const uc=new Map,sS=new Map,Xd=new Map;function ey(r,e){try{r.container.addComponent(e)}catch(t){Lr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function No(r){const e=r.name;if(Xd.has(e))return Lr.debug(`There were multiple attempts to register component ${e}.`),!1;Xd.set(e,r);for(const t of uc.values())ey(t,r);for(const t of sS.values())ey(t,r);return!0}function Af(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function jn(r){return r==null?!1:r.settings!==void 0}const iS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ps=new fl("app","Firebase",iS);class oS{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ei("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ps.create("app-deleted",{appName:this._name})}}const Bo=nS;function H_(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s={name:Qd,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw Ps.create("bad-app-name",{appName:String(o)});if(t||(t=U_()),!t)throw Ps.create("no-options");const l=uc.get(o);if(l){if(wi(t,l.options)&&wi(s,l.config))return l;throw Ps.create("duplicate-app",{appName:o})}const h=new dI(o);for(const g of Xd.values())h.addComponent(g);const f=new oS(t,s,h);return uc.set(o,f),f}function G_(r=Qd){const e=uc.get(r);if(!e&&r===Qd&&U_())return H_();if(!e)throw Ps.create("no-app",{appName:r});return e}function ks(r,e,t){let s=rS[r]??r;t&&(s+=`-${t}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const h=[`Unable to register library "${s}" with version "${e}":`];o&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Lr.warn(h.join(" "));return}No(new Ei(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const aS="firebase-heartbeat-database",lS=1,rl="firebase-heartbeat-store";let Dd=null;function K_(){return Dd||(Dd=AI(aS,lS,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(rl)}catch(t){console.warn(t)}}}}).catch(r=>{throw Ps.create("idb-open",{originalErrorMessage:r.message})})),Dd}async function uS(r){try{const t=(await K_()).transaction(rl),s=await t.objectStore(rl).get(Q_(r));return await t.done,s}catch(e){if(e instanceof zr)Lr.warn(e.message);else{const t=Ps.create("idb-get",{originalErrorMessage:e?.message});Lr.warn(t.message)}}}async function ty(r,e){try{const s=(await K_()).transaction(rl,"readwrite");await s.objectStore(rl).put(e,Q_(r)),await s.done}catch(t){if(t instanceof zr)Lr.warn(t.message);else{const s=Ps.create("idb-set",{originalErrorMessage:t?.message});Lr.warn(s.message)}}}function Q_(r){return`${r.name}!${r.options.appId}`}const cS=1024,hS=30;class dS{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new pS(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=ny();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:t}),this._heartbeatsCache.heartbeats.length>hS){const o=mS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Lr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=ny(),{heartbeatsToSend:t,unsentEntries:s}=fS(this._heartbeatsCache.heartbeats),o=lc(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Lr.warn(e),""}}}function ny(){return new Date().toISOString().substring(0,10)}function fS(r,e=cS){const t=[];let s=r.slice();for(const o of r){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),ry(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),ry(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class pS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return eI()?tI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await uS(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return ty(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return ty(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function ry(r){return lc(JSON.stringify({version:2,heartbeats:r})).length}function mS(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}function gS(r){No(new Ei("platform-logger",e=>new PI(e),"PRIVATE")),No(new Ei("heartbeat",e=>new dS(e),"PRIVATE")),ks(Kd,Zg,r),ks(Kd,Zg,"esm2020"),ks("fire-js","")}gS("");function X_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const yS=X_,Y_=new fl("auth","Firebase",X_());const cc=new If("@firebase/auth");function _S(r,...e){cc.logLevel<=Me.WARN&&cc.warn(`Auth (${Bo}): ${r}`,...e)}function Yu(r,...e){cc.logLevel<=Me.ERROR&&cc.error(`Auth (${Bo}): ${r}`,...e)}function dr(r,...e){throw Rf(r,...e)}function Un(r,...e){return Rf(r,...e)}function Cf(r,e,t){const s={...yS(),[e]:t};return new fl("auth","Firebase",s).create(e,{appName:r.name})}function vi(r){return Cf(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function vS(r,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&dr(r,"argument-error"),Cf(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Rf(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return Y_.create(r,...e)}function Se(r,e,...t){if(!r)throw Rf(e,...t)}function Or(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Yu(e),new Error(e)}function br(r,e){r||Or(e)}function Yd(){return typeof self<"u"&&self.location?.href||""}function wS(){return sy()==="http:"||sy()==="https:"}function sy(){return typeof self<"u"&&self.location?.protocol||null}function ES(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(wS()||XT()||"connection"in navigator)?navigator.onLine:!0}function TS(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class ml{constructor(e,t){this.shortDelay=e,this.longDelay=t,br(t>e,"Short delay should be less than long delay!"),this.isMobile=GT()||YT()}get(){return ES()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Pf(r,e){br(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class J_{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Or("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Or("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Or("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const IS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const SS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],AS=new ml(3e4,6e4);function kf(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function zo(r,e,t,s,o={}){return Z_(r,o,async()=>{let l={},h={};s&&(e==="GET"?h=s:l={body:JSON.stringify(s)});const f=pl({key:r.config.apiKey,...h}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const y={method:e,headers:g,...l};return QT()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&Uo(r.emulatorConfig.host)&&(y.credentials="include"),J_.fetch()(await ev(r,r.config.apiHost,t,f),y)})}async function Z_(r,e,t){r._canInitEmulator=!1;const s={...IS,...e};try{const o=new RS(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw qu(r,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const f=l.ok?h.errorMessage:h.error.message,[g,y]=f.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw qu(r,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw qu(r,"email-already-in-use",h);if(g==="USER_DISABLED")throw qu(r,"user-disabled",h);const v=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Cf(r,v,y);dr(r,v)}}catch(o){if(o instanceof zr)throw o;dr(r,"network-request-failed",{message:String(o)})}}async function CS(r,e,t,s,o={}){const l=await zo(r,e,t,s,o);return"mfaPendingCredential"in l&&dr(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function ev(r,e,t,s){const o=`${e}${t}?${s}`,l=r,h=l.config.emulator?Pf(r.config,o):`${r.config.apiScheme}://${o}`;return SS.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}class RS{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Un(this.auth,"network-request-failed")),AS.get())})}}function qu(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=Un(r,e,s);return o.customData._tokenResponse=t,o}async function PS(r,e){return zo(r,"POST","/v1/accounts:delete",e)}async function hc(r,e){return zo(r,"POST","/v1/accounts:lookup",e)}function Qa(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function kS(r,e=!1){const t=St(r),s=await t.getIdToken(e),o=Nf(s);Se(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l?.sign_in_provider;return{claims:o,token:s,authTime:Qa(Vd(o.auth_time)),issuedAtTime:Qa(Vd(o.iat)),expirationTime:Qa(Vd(o.exp)),signInProvider:h||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Vd(r){return Number(r)*1e3}function Nf(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return Yu("JWT malformed, contained fewer than 3 sections"),null;try{const o=j_(t);return o?JSON.parse(o):(Yu("Failed to decode base64 JWT payload"),null)}catch(o){return Yu("Caught error parsing JWT payload as JSON",o?.toString()),null}}function iy(r){const e=Nf(r);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function sl(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof zr&&NS(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function NS({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class xS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Jd{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qa(this.lastLoginAt),this.creationTime=Qa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function dc(r){const e=r.auth,t=await r.getIdToken(),s=await sl(r,hc(e,{idToken:t}));Se(s?.users.length,e,"internal-error");const o=s.users[0];r._notifyReloadListener(o);const l=o.providerUserInfo?.length?tv(o.providerUserInfo):[],h=VS(r.providerData,l),f=r.isAnonymous,g=!(r.email&&o.passwordHash)&&!h?.length,y=f?g:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Jd(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(r,v)}async function DS(r){const e=St(r);await dc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function VS(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function tv(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function OS(r,e){const t=await Z_(r,{},async()=>{const s=pl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,h=await ev(r,o,"/v1/token",`key=${l}`),f=await r._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:f,body:s};return r.emulatorConfig&&Uo(r.emulatorConfig.host)&&(g.credentials="include"),J_.fetch()(h,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function MS(r,e){return zo(r,"POST","/v2/accounts:revokeToken",kf(r,e))}class Ao{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):iy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const t=iy(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:l}=await OS(e,t);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:l}=t,h=new Ao;return s&&(Se(typeof s=="string","internal-error",{appName:e}),h.refreshToken=s),o&&(Se(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(Se(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ao,this.toJSON())}_performRefresh(){return Or("not implemented")}}function vs(r,e){Se(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Fn{constructor({uid:e,auth:t,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new xS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Jd(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await sl(this,this.stsTokenManager.getToken(this.auth,e));return Se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return kS(this,e)}reload(){return DS(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Fn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await dc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jn(this.auth.app))return Promise.reject(vi(this.auth));const e=await this.getIdToken();return await sl(this,PS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,h=t.photoURL??void 0,f=t.tenantId??void 0,g=t._redirectEventId??void 0,y=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:E,emailVerified:S,isAnonymous:M,providerData:H,stsTokenManager:$}=t;Se(E&&$,e,"internal-error");const j=Ao.fromJSON(this.name,$);Se(typeof E=="string",e,"internal-error"),vs(s,e.name),vs(o,e.name),Se(typeof S=="boolean",e,"internal-error"),Se(typeof M=="boolean",e,"internal-error"),vs(l,e.name),vs(h,e.name),vs(f,e.name),vs(g,e.name),vs(y,e.name),vs(v,e.name);const K=new Fn({uid:E,auth:e,email:o,emailVerified:S,displayName:s,isAnonymous:M,photoURL:h,phoneNumber:l,tenantId:f,stsTokenManager:j,createdAt:y,lastLoginAt:v});return H&&Array.isArray(H)&&(K.providerData=H.map(se=>({...se}))),g&&(K._redirectEventId=g),K}static async _fromIdTokenResponse(e,t,s=!1){const o=new Ao;o.updateFromServerResponse(t);const l=new Fn({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await dc(l),l}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];Se(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?tv(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!l?.length,f=new Ao;f.updateFromIdToken(s);const g=new Fn({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:h}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Jd(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!l?.length};return Object.assign(g,y),g}}const oy=new Map;function Mr(r){br(r instanceof Function,"Expected a class definition");let e=oy.get(r);return e?(br(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,oy.set(r,e),e)}class nv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}nv.type="NONE";const ay=nv;function Ju(r,e,t){return`firebase:${r}:${e}:${t}`}class Co{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=Ju(this.userKey,o.apiKey,l),this.fullPersistenceKey=Ju("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await hc(this.auth,{idToken:e}).catch(()=>{});return t?Fn._fromGetAccountInfoResponse(this.auth,t,e):null}return Fn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Co(Mr(ay),e,s);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=o[0]||Mr(ay);const h=Ju(s,e.config.apiKey,e.name);let f=null;for(const y of t)try{const v=await y._get(h);if(v){let E;if(typeof v=="string"){const S=await hc(e,{idToken:v}).catch(()=>{});if(!S)break;E=await Fn._fromGetAccountInfoResponse(e,S,v)}else E=Fn._fromJSON(e,v);y!==l&&(f=E),l=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new Co(l,e,s):(l=g[0],f&&await l._set(h,f.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(h)}catch{}})),new Co(l,e,s))}}function ly(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ov(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(rv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(lv(e))return"Blackberry";if(uv(e))return"Webos";if(sv(e))return"Safari";if((e.includes("chrome/")||iv(e))&&!e.includes("edge/"))return"Chrome";if(av(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if(s?.length===2)return s[1]}return"Other"}function rv(r=Gt()){return/firefox\//i.test(r)}function sv(r=Gt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function iv(r=Gt()){return/crios\//i.test(r)}function ov(r=Gt()){return/iemobile/i.test(r)}function av(r=Gt()){return/android/i.test(r)}function lv(r=Gt()){return/blackberry/i.test(r)}function uv(r=Gt()){return/webos/i.test(r)}function xf(r=Gt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function LS(r=Gt()){return xf(r)&&!!window.navigator?.standalone}function bS(){return JT()&&document.documentMode===10}function cv(r=Gt()){return xf(r)||av(r)||uv(r)||lv(r)||/windows phone/i.test(r)||ov(r)}function hv(r,e=[]){let t;switch(r){case"Browser":t=ly(Gt());break;case"Worker":t=`${ly(Gt())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Bo}/${s}`}class jS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((h,f)=>{try{const g=e(l);h(g)}catch(g){f(g)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function FS(r,e={}){return zo(r,"GET","/v2/passwordPolicy",kf(r,e))}const US=6;class BS{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??US,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class zS{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new uy(this),this.idTokenSubscription=new uy(this),this.beforeStateQueue=new jS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Y_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Mr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Co.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await hc(this,{idToken:e}),s=await Fn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(jn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(h,h))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,h=s?._redirectEventId,f=await this.tryRedirectSignIn(e);(!l||l===h)&&f?.user&&(s=f.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await dc(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=TS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(jn(this.app))return Promise.reject(vi(this));const t=e?St(e):null;return t&&Se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return jn(this.app)?Promise.reject(vi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return jn(this.app)?Promise.reject(vi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Mr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await FS(this),t=new BS(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new fl("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await MS(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Mr(e)||this._popupRedirectResolver;Se(t,this,"argument-error"),this.redirectPersistenceManager=await Co.create(this,[Mr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(f,this,"internal-error"),f.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,s,o);return()=>{h=!0,g()}}else{const g=e.addObserver(t);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=hv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(jn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&_S(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Vc(r){return St(r)}class uy{constructor(e){this.auth=e,this.observer=null,this.addObserver=oI(t=>this.observer=t)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Df={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $S(r){Df=r}function qS(r){return Df.loadJS(r)}function WS(){return Df.gapiScript}function HS(r){return`__${r}${Math.floor(Math.random()*1e6)}`}function GS(r,e){const t=Af(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(wi(l,e??{}))return o;dr(o,"already-initialized")}return t.initialize({options:e})}function KS(r,e){const t=e?.persistence||[],s=(Array.isArray(t)?t:[t]).map(Mr);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e?.popupRedirectResolver)}function QS(r,e,t){const s=Vc(r);Se(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=dv(e),{host:h,port:f}=XS(e),g=f===null?"":`:${f}`,y={url:`${l}//${h}${g}/`},v=Object.freeze({host:h,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Se(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Se(wi(y,s.config.emulator)&&wi(v,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=v,s.settings.appVerificationDisabledForTesting=!0,Uo(h)?(z_(`${l}//${h}${g}`),$_("Auth",!0)):YS()}function dv(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function XS(r){const e=dv(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:cy(s.substr(l.length+1))}}else{const[l,h]=s.split(":");return{host:l,port:cy(h)}}}function cy(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function YS(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class fv{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Or("not implemented")}_getIdTokenResponse(e){return Or("not implemented")}_linkToIdToken(e,t){return Or("not implemented")}_getReauthenticationResolver(e){return Or("not implemented")}}async function Ro(r,e){return CS(r,"POST","/v1/accounts:signInWithIdp",kf(r,e))}const JS="http://localhost";class Ti extends fv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ti(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):dr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...l}=t;if(!s||!o)return null;const h=new Ti(s,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return Ro(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Ro(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ro(e,t)}buildRequest(){const e={requestUri:JS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=pl(t)}return e}}class Vf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class gl extends Vf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ws extends gl{constructor(){super("facebook.com")}static credential(e){return Ti._fromParams({providerId:ws.PROVIDER_ID,signInMethod:ws.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ws.credentialFromTaggedObject(e)}static credentialFromError(e){return ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ws.credential(e.oauthAccessToken)}catch{return null}}}ws.FACEBOOK_SIGN_IN_METHOD="facebook.com";ws.PROVIDER_ID="facebook.com";class Vr extends gl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ti._fromParams({providerId:Vr.PROVIDER_ID,signInMethod:Vr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Vr.credentialFromTaggedObject(e)}static credentialFromError(e){return Vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Vr.credential(t,s)}catch{return null}}}Vr.GOOGLE_SIGN_IN_METHOD="google.com";Vr.PROVIDER_ID="google.com";class Es extends gl{constructor(){super("github.com")}static credential(e){return Ti._fromParams({providerId:Es.PROVIDER_ID,signInMethod:Es.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Es.credentialFromTaggedObject(e)}static credentialFromError(e){return Es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Es.credential(e.oauthAccessToken)}catch{return null}}}Es.GITHUB_SIGN_IN_METHOD="github.com";Es.PROVIDER_ID="github.com";class Ts extends gl{constructor(){super("twitter.com")}static credential(e,t){return Ti._fromParams({providerId:Ts.PROVIDER_ID,signInMethod:Ts.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ts.credentialFromTaggedObject(e)}static credentialFromError(e){return Ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Ts.credential(t,s)}catch{return null}}}Ts.TWITTER_SIGN_IN_METHOD="twitter.com";Ts.PROVIDER_ID="twitter.com";class xo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const l=await Fn._fromIdTokenResponse(e,s,o),h=hy(s);return new xo({user:l,providerId:h,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=hy(s);return new xo({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function hy(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}class fc extends zr{constructor(e,t,s,o){super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,fc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new fc(e,t,s,o)}}function pv(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?fc._fromErrorAndOperation(r,l,e,s):l})}async function ZS(r,e,t=!1){const s=await sl(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return xo._forOperation(r,"link",s)}async function e1(r,e,t=!1){const{auth:s}=r;if(jn(s.app))return Promise.reject(vi(s));const o="reauthenticate";try{const l=await sl(r,pv(s,o,e,r),t);Se(l.idToken,s,"internal-error");const h=Nf(l.idToken);Se(h,s,"internal-error");const{sub:f}=h;return Se(r.uid===f,s,"user-mismatch"),xo._forOperation(r,o,l)}catch(l){throw l?.code==="auth/user-not-found"&&dr(s,"user-mismatch"),l}}async function t1(r,e,t=!1){if(jn(r.app))return Promise.reject(vi(r));const s="signIn",o=await pv(r,s,e),l=await xo._fromIdTokenResponse(r,s,o);return t||await r._updateCurrentUser(l.user),l}function n1(r,e,t,s){return St(r).onIdTokenChanged(e,t,s)}function r1(r,e,t){return St(r).beforeAuthStateChanged(e,t)}function s1(r,e,t,s){return St(r).onAuthStateChanged(e,t,s)}function i1(r){return St(r).signOut()}const pc="__sak";class mv{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(pc,"1"),this.storage.removeItem(pc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const o1=1e3,a1=10;class gv extends mv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=cv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,f,g)=>{this.notifyListeners(h,g)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(s);!t&&this.localCache[s]===h||this.notifyListeners(s,h)},l=this.storage.getItem(s);bS()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,a1):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},o1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}gv.type="LOCAL";const l1=gv;class yv extends mv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}yv.type="SESSION";const _v=yv;function u1(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Oc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new Oc(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!h?.size)return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const f=Array.from(h).map(async y=>y(t.origin,l)),g=await u1(f);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Oc.receivers=[];function Of(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}class c1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((f,g)=>{const y=Of("",20);o.port1.start();const v=setTimeout(()=>{g(new Error("unsupported_event"))},s);h={messageChannel:o,onMessage(E){const S=E;if(S.data.eventId===y)switch(S.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(S.data.response);break;default:clearTimeout(v),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}function ar(){return window}function h1(r){ar().location.href=r}function vv(){return typeof ar().WorkerGlobalScope<"u"&&typeof ar().importScripts=="function"}async function d1(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function f1(){return navigator?.serviceWorker?.controller||null}function p1(){return vv()?self:null}const wv="firebaseLocalStorageDb",m1=1,mc="firebaseLocalStorage",Ev="fbase_key";class yl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Mc(r,e){return r.transaction([mc],e?"readwrite":"readonly").objectStore(mc)}function g1(){const r=indexedDB.deleteDatabase(wv);return new yl(r).toPromise()}function Zd(){const r=indexedDB.open(wv,m1);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(mc,{keyPath:Ev})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(mc)?e(s):(s.close(),await g1(),e(await Zd()))})})}async function dy(r,e,t){const s=Mc(r,!0).put({[Ev]:e,value:t});return new yl(s).toPromise()}async function y1(r,e){const t=Mc(r,!1).get(e),s=await new yl(t).toPromise();return s===void 0?null:s.value}function fy(r,e){const t=Mc(r,!0).delete(e);return new yl(t).toPromise()}const _1=800,v1=3;class Tv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Zd(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>v1)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return vv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Oc._getInstance(p1()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await d1(),!this.activeServiceWorker)return;this.sender=new c1(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||f1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Zd();return await dy(e,pc,"1"),await fy(e,pc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>dy(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>y1(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>fy(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Mc(o,!1).getAll();return new yl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Tv.type="LOCAL";const w1=Tv;new ml(3e4,6e4);function Iv(r,e){return e?Mr(e):(Se(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class Mf extends fv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ro(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ro(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ro(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function E1(r){return t1(r.auth,new Mf(r),r.bypassAuthState)}function T1(r){const{auth:e,user:t}=r;return Se(t,e,"internal-error"),e1(t,new Mf(r),r.bypassAuthState)}async function I1(r){const{auth:e,user:t}=r;return Se(t,e,"internal-error"),ZS(t,new Mf(r),r.bypassAuthState)}class Sv{constructor(e,t,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:l,error:h,type:f}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return E1;case"linkViaPopup":case"linkViaRedirect":return I1;case"reauthViaPopup":case"reauthViaRedirect":return T1;default:dr(this.auth,"internal-error")}}resolve(e){br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const S1=new ml(2e3,1e4);async function A1(r,e,t){if(jn(r.app))return Promise.reject(Un(r,"operation-not-supported-in-this-environment"));const s=Vc(r);vS(r,e,Vf);const o=Iv(s,t);return new yi(s,"signInViaPopup",e,o).executeNotNull()}class yi extends Sv{constructor(e,t,s,o,l){super(e,t,o,l),this.provider=s,this.authWindow=null,this.pollId=null,yi.currentPopupAction&&yi.currentPopupAction.cancel(),yi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){br(this.filter.length===1,"Popup operations only handle one event");const e=Of();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Un(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Un(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,yi.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Un(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,S1.get())};e()}}yi.currentPopupAction=null;const C1="pendingRedirect",Zu=new Map;class R1 extends Sv{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Zu.get(this.auth._key());if(!e){try{const s=await P1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Zu.set(this.auth._key(),e)}return this.bypassAuthState||Zu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function P1(r,e){const t=x1(e),s=N1(r);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function k1(r,e){Zu.set(r._key(),e)}function N1(r){return Mr(r._redirectPersistence)}function x1(r){return Ju(C1,r.config.apiKey,r.name)}async function D1(r,e,t=!1){if(jn(r.app))return Promise.reject(vi(r));const s=Vc(r),o=Iv(s,e),h=await new R1(s,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await s._persistUserIfCurrent(h.user),await s._setRedirectUser(null,e)),h}const V1=600*1e3;class O1{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!M1(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Av(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Un(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=V1&&this.cachedEventUids.clear(),this.cachedEventUids.has(py(e))}saveEventToCache(e){this.cachedEventUids.add(py(e)),this.lastProcessedEventTime=Date.now()}}function py(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Av({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function M1(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Av(r);default:return!1}}async function L1(r,e={}){return zo(r,"GET","/v1/projects",e)}const b1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,j1=/^https?/;async function F1(r){if(r.config.emulator)return;const{authorizedDomains:e}=await L1(r);for(const t of e)try{if(U1(t))return}catch{}dr(r,"unauthorized-domain")}function U1(r){const e=Yd(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===s}if(!j1.test(t))return!1;if(b1.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const B1=new ml(3e4,6e4);function my(){const r=ar().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function z1(r){return new Promise((e,t)=>{function s(){my(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{my(),t(Un(r,"network-request-failed"))},timeout:B1.get()})}if(ar().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ar().gapi?.load)s();else{const o=HS("iframefcb");return ar()[o]=()=>{gapi.load?s():t(Un(r,"network-request-failed"))},qS(`${WS()}?onload=${o}`).catch(l=>t(l))}}).catch(e=>{throw ec=null,e})}let ec=null;function $1(r){return ec=ec||z1(r),ec}const q1=new ml(5e3,15e3),W1="__/auth/iframe",H1="emulator/auth/iframe",G1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},K1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Q1(r){const e=r.config;Se(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Pf(e,H1):`https://${r.config.authDomain}/${W1}`,s={apiKey:e.apiKey,appName:r.name,v:Bo},o=K1.get(r.config.apiHost);o&&(s.eid=o);const l=r._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${pl(s).slice(1)}`}async function X1(r){const e=await $1(r),t=ar().gapi;return Se(t,r,"internal-error"),e.open({where:document.body,url:Q1(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:G1,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const h=Un(r,"network-request-failed"),f=ar().setTimeout(()=>{l(h)},q1.get());function g(){ar().clearTimeout(f),o(s)}s.ping(g).then(g,()=>{l(h)})}))}const Y1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},J1=500,Z1=600,eA="_blank",tA="http://localhost";class gy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function nA(r,e,t,s=J1,o=Z1){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const g={...Y1,width:s.toString(),height:o.toString(),top:l,left:h},y=Gt().toLowerCase();t&&(f=iv(y)?eA:t),rv(y)&&(e=e||tA,g.scrollbars="yes");const v=Object.entries(g).reduce((S,[M,H])=>`${S}${M}=${H},`,"");if(LS(y)&&f!=="_self")return rA(e||"",f),new gy(null);const E=window.open(e||"",f,v);Se(E,r,"popup-blocked");try{E.focus()}catch{}return new gy(E)}function rA(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}const sA="__/auth/handler",iA="emulator/auth/handler",oA=encodeURIComponent("fac");async function yy(r,e,t,s,o,l){Se(r.config.authDomain,r,"auth-domain-config-required"),Se(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:Bo,eventId:o};if(e instanceof Vf){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",iI(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))h[v]=E}if(e instanceof gl){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(h.scopes=v.join(","))}r.tenantId&&(h.tid=r.tenantId);const f=h;for(const v of Object.keys(f))f[v]===void 0&&delete f[v];const g=await r._getAppCheckToken(),y=g?`#${oA}=${encodeURIComponent(g)}`:"";return`${aA(r)}?${pl(f).slice(1)}${y}`}function aA({config:r}){return r.emulator?Pf(r,iA):`https://${r.authDomain}/${sA}`}const Od="webStorageSupport";class lA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_v,this._completeRedirectFn=D1,this._overrideRedirectResult=k1}async _openPopup(e,t,s,o){br(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await yy(e,t,s,Yd(),o);return nA(e,l,Of())}async _openRedirect(e,t,s,o){await this._originValidation(e);const l=await yy(e,t,s,Yd(),o);return h1(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(br(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await X1(e),s=new O1(e);return t.register("authEvent",o=>(Se(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Od,{type:Od},o=>{const l=o?.[0]?.[Od];l!==void 0&&t(!!l),dr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=F1(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return cv()||sv()||xf()}}const uA=lA;var _y="@firebase/auth",vy="1.12.0";class cA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function hA(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function dA(r){No(new Ei("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:f}=s.options;Se(h&&!h.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:h,authDomain:f,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hv(r)},y=new zS(s,o,l,g);return KS(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),No(new Ei("auth-internal",e=>{const t=Vc(e.getProvider("auth").getImmediate());return(s=>new cA(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ks(_y,vy,hA(r)),ks(_y,vy,"esm2020")}const fA=300,pA=B_("authIdTokenMaxAge")||fA;let wy=null;const mA=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>pA)return;const o=t?.token;wy!==o&&(wy=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function gA(r=G_()){const e=Af(r,"auth");if(e.isInitialized())return e.getImmediate();const t=GS(r,{popupRedirectResolver:uA,persistence:[w1,l1,_v]}),s=B_("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const h=mA(l.toString());r1(t,h,()=>h(t.currentUser)),n1(t,f=>h(f))}}const o=F_("auth");return o&&QS(t,`http://${o}`),t}function yA(){return document.getElementsByTagName("head")?.[0]??document}$S({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const l=Un("internal-error");l.customData=o,t(l)},s.type="text/javascript",s.charset="UTF-8",yA().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});dA("Browser");var Ey=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ns,Cv;(function(){var r;function e(C,I){function P(){}P.prototype=I.prototype,C.F=I.prototype,C.prototype=new P,C.prototype.constructor=C,C.D=function(N,x,O){for(var k=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)k[fe-2]=arguments[fe];return I.prototype[x].apply(N,k)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(C,I,P){P||(P=0);const N=Array(16);if(typeof I=="string")for(var x=0;x<16;++x)N[x]=I.charCodeAt(P++)|I.charCodeAt(P++)<<8|I.charCodeAt(P++)<<16|I.charCodeAt(P++)<<24;else for(x=0;x<16;++x)N[x]=I[P++]|I[P++]<<8|I[P++]<<16|I[P++]<<24;I=C.g[0],P=C.g[1],x=C.g[2];let O=C.g[3],k;k=I+(O^P&(x^O))+N[0]+3614090360&4294967295,I=P+(k<<7&4294967295|k>>>25),k=O+(x^I&(P^x))+N[1]+3905402710&4294967295,O=I+(k<<12&4294967295|k>>>20),k=x+(P^O&(I^P))+N[2]+606105819&4294967295,x=O+(k<<17&4294967295|k>>>15),k=P+(I^x&(O^I))+N[3]+3250441966&4294967295,P=x+(k<<22&4294967295|k>>>10),k=I+(O^P&(x^O))+N[4]+4118548399&4294967295,I=P+(k<<7&4294967295|k>>>25),k=O+(x^I&(P^x))+N[5]+1200080426&4294967295,O=I+(k<<12&4294967295|k>>>20),k=x+(P^O&(I^P))+N[6]+2821735955&4294967295,x=O+(k<<17&4294967295|k>>>15),k=P+(I^x&(O^I))+N[7]+4249261313&4294967295,P=x+(k<<22&4294967295|k>>>10),k=I+(O^P&(x^O))+N[8]+1770035416&4294967295,I=P+(k<<7&4294967295|k>>>25),k=O+(x^I&(P^x))+N[9]+2336552879&4294967295,O=I+(k<<12&4294967295|k>>>20),k=x+(P^O&(I^P))+N[10]+4294925233&4294967295,x=O+(k<<17&4294967295|k>>>15),k=P+(I^x&(O^I))+N[11]+2304563134&4294967295,P=x+(k<<22&4294967295|k>>>10),k=I+(O^P&(x^O))+N[12]+1804603682&4294967295,I=P+(k<<7&4294967295|k>>>25),k=O+(x^I&(P^x))+N[13]+4254626195&4294967295,O=I+(k<<12&4294967295|k>>>20),k=x+(P^O&(I^P))+N[14]+2792965006&4294967295,x=O+(k<<17&4294967295|k>>>15),k=P+(I^x&(O^I))+N[15]+1236535329&4294967295,P=x+(k<<22&4294967295|k>>>10),k=I+(x^O&(P^x))+N[1]+4129170786&4294967295,I=P+(k<<5&4294967295|k>>>27),k=O+(P^x&(I^P))+N[6]+3225465664&4294967295,O=I+(k<<9&4294967295|k>>>23),k=x+(I^P&(O^I))+N[11]+643717713&4294967295,x=O+(k<<14&4294967295|k>>>18),k=P+(O^I&(x^O))+N[0]+3921069994&4294967295,P=x+(k<<20&4294967295|k>>>12),k=I+(x^O&(P^x))+N[5]+3593408605&4294967295,I=P+(k<<5&4294967295|k>>>27),k=O+(P^x&(I^P))+N[10]+38016083&4294967295,O=I+(k<<9&4294967295|k>>>23),k=x+(I^P&(O^I))+N[15]+3634488961&4294967295,x=O+(k<<14&4294967295|k>>>18),k=P+(O^I&(x^O))+N[4]+3889429448&4294967295,P=x+(k<<20&4294967295|k>>>12),k=I+(x^O&(P^x))+N[9]+568446438&4294967295,I=P+(k<<5&4294967295|k>>>27),k=O+(P^x&(I^P))+N[14]+3275163606&4294967295,O=I+(k<<9&4294967295|k>>>23),k=x+(I^P&(O^I))+N[3]+4107603335&4294967295,x=O+(k<<14&4294967295|k>>>18),k=P+(O^I&(x^O))+N[8]+1163531501&4294967295,P=x+(k<<20&4294967295|k>>>12),k=I+(x^O&(P^x))+N[13]+2850285829&4294967295,I=P+(k<<5&4294967295|k>>>27),k=O+(P^x&(I^P))+N[2]+4243563512&4294967295,O=I+(k<<9&4294967295|k>>>23),k=x+(I^P&(O^I))+N[7]+1735328473&4294967295,x=O+(k<<14&4294967295|k>>>18),k=P+(O^I&(x^O))+N[12]+2368359562&4294967295,P=x+(k<<20&4294967295|k>>>12),k=I+(P^x^O)+N[5]+4294588738&4294967295,I=P+(k<<4&4294967295|k>>>28),k=O+(I^P^x)+N[8]+2272392833&4294967295,O=I+(k<<11&4294967295|k>>>21),k=x+(O^I^P)+N[11]+1839030562&4294967295,x=O+(k<<16&4294967295|k>>>16),k=P+(x^O^I)+N[14]+4259657740&4294967295,P=x+(k<<23&4294967295|k>>>9),k=I+(P^x^O)+N[1]+2763975236&4294967295,I=P+(k<<4&4294967295|k>>>28),k=O+(I^P^x)+N[4]+1272893353&4294967295,O=I+(k<<11&4294967295|k>>>21),k=x+(O^I^P)+N[7]+4139469664&4294967295,x=O+(k<<16&4294967295|k>>>16),k=P+(x^O^I)+N[10]+3200236656&4294967295,P=x+(k<<23&4294967295|k>>>9),k=I+(P^x^O)+N[13]+681279174&4294967295,I=P+(k<<4&4294967295|k>>>28),k=O+(I^P^x)+N[0]+3936430074&4294967295,O=I+(k<<11&4294967295|k>>>21),k=x+(O^I^P)+N[3]+3572445317&4294967295,x=O+(k<<16&4294967295|k>>>16),k=P+(x^O^I)+N[6]+76029189&4294967295,P=x+(k<<23&4294967295|k>>>9),k=I+(P^x^O)+N[9]+3654602809&4294967295,I=P+(k<<4&4294967295|k>>>28),k=O+(I^P^x)+N[12]+3873151461&4294967295,O=I+(k<<11&4294967295|k>>>21),k=x+(O^I^P)+N[15]+530742520&4294967295,x=O+(k<<16&4294967295|k>>>16),k=P+(x^O^I)+N[2]+3299628645&4294967295,P=x+(k<<23&4294967295|k>>>9),k=I+(x^(P|~O))+N[0]+4096336452&4294967295,I=P+(k<<6&4294967295|k>>>26),k=O+(P^(I|~x))+N[7]+1126891415&4294967295,O=I+(k<<10&4294967295|k>>>22),k=x+(I^(O|~P))+N[14]+2878612391&4294967295,x=O+(k<<15&4294967295|k>>>17),k=P+(O^(x|~I))+N[5]+4237533241&4294967295,P=x+(k<<21&4294967295|k>>>11),k=I+(x^(P|~O))+N[12]+1700485571&4294967295,I=P+(k<<6&4294967295|k>>>26),k=O+(P^(I|~x))+N[3]+2399980690&4294967295,O=I+(k<<10&4294967295|k>>>22),k=x+(I^(O|~P))+N[10]+4293915773&4294967295,x=O+(k<<15&4294967295|k>>>17),k=P+(O^(x|~I))+N[1]+2240044497&4294967295,P=x+(k<<21&4294967295|k>>>11),k=I+(x^(P|~O))+N[8]+1873313359&4294967295,I=P+(k<<6&4294967295|k>>>26),k=O+(P^(I|~x))+N[15]+4264355552&4294967295,O=I+(k<<10&4294967295|k>>>22),k=x+(I^(O|~P))+N[6]+2734768916&4294967295,x=O+(k<<15&4294967295|k>>>17),k=P+(O^(x|~I))+N[13]+1309151649&4294967295,P=x+(k<<21&4294967295|k>>>11),k=I+(x^(P|~O))+N[4]+4149444226&4294967295,I=P+(k<<6&4294967295|k>>>26),k=O+(P^(I|~x))+N[11]+3174756917&4294967295,O=I+(k<<10&4294967295|k>>>22),k=x+(I^(O|~P))+N[2]+718787259&4294967295,x=O+(k<<15&4294967295|k>>>17),k=P+(O^(x|~I))+N[9]+3951481745&4294967295,C.g[0]=C.g[0]+I&4294967295,C.g[1]=C.g[1]+(x+(k<<21&4294967295|k>>>11))&4294967295,C.g[2]=C.g[2]+x&4294967295,C.g[3]=C.g[3]+O&4294967295}s.prototype.v=function(C,I){I===void 0&&(I=C.length);const P=I-this.blockSize,N=this.C;let x=this.h,O=0;for(;O<I;){if(x==0)for(;O<=P;)o(this,C,O),O+=this.blockSize;if(typeof C=="string"){for(;O<I;)if(N[x++]=C.charCodeAt(O++),x==this.blockSize){o(this,N),x=0;break}}else for(;O<I;)if(N[x++]=C[O++],x==this.blockSize){o(this,N),x=0;break}}this.h=x,this.o+=I},s.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var I=1;I<C.length-8;++I)C[I]=0;I=this.o*8;for(var P=C.length-8;P<C.length;++P)C[P]=I&255,I/=256;for(this.v(C),C=Array(16),I=0,P=0;P<4;++P)for(let N=0;N<32;N+=8)C[I++]=this.g[P]>>>N&255;return C};function l(C,I){var P=f;return Object.prototype.hasOwnProperty.call(P,C)?P[C]:P[C]=I(C)}function h(C,I){this.h=I;const P=[];let N=!0;for(let x=C.length-1;x>=0;x--){const O=C[x]|0;N&&O==I||(P[x]=O,N=!1)}this.g=P}var f={};function g(C){return-128<=C&&C<128?l(C,function(I){return new h([I|0],I<0?-1:0)}):new h([C|0],C<0?-1:0)}function y(C){if(isNaN(C)||!isFinite(C))return E;if(C<0)return j(y(-C));const I=[];let P=1;for(let N=0;C>=P;N++)I[N]=C/P|0,P*=4294967296;return new h(I,0)}function v(C,I){if(C.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(C.charAt(0)=="-")return j(v(C.substring(1),I));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const P=y(Math.pow(I,8));let N=E;for(let O=0;O<C.length;O+=8){var x=Math.min(8,C.length-O);const k=parseInt(C.substring(O,O+x),I);x<8?(x=y(Math.pow(I,x)),N=N.j(x).add(y(k))):(N=N.j(P),N=N.add(y(k)))}return N}var E=g(0),S=g(1),M=g(16777216);r=h.prototype,r.m=function(){if($(this))return-j(this).m();let C=0,I=1;for(let P=0;P<this.g.length;P++){const N=this.i(P);C+=(N>=0?N:4294967296+N)*I,I*=4294967296}return C},r.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(H(this))return"0";if($(this))return"-"+j(this).toString(C);const I=y(Math.pow(C,6));var P=this;let N="";for(;;){const x=W(P,I).g;P=K(P,x.j(I));let O=((P.g.length>0?P.g[0]:P.h)>>>0).toString(C);if(P=x,H(P))return O+N;for(;O.length<6;)O="0"+O;N=O+N}},r.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function H(C){if(C.h!=0)return!1;for(let I=0;I<C.g.length;I++)if(C.g[I]!=0)return!1;return!0}function $(C){return C.h==-1}r.l=function(C){return C=K(this,C),$(C)?-1:H(C)?0:1};function j(C){const I=C.g.length,P=[];for(let N=0;N<I;N++)P[N]=~C.g[N];return new h(P,~C.h).add(S)}r.abs=function(){return $(this)?j(this):this},r.add=function(C){const I=Math.max(this.g.length,C.g.length),P=[];let N=0;for(let x=0;x<=I;x++){let O=N+(this.i(x)&65535)+(C.i(x)&65535),k=(O>>>16)+(this.i(x)>>>16)+(C.i(x)>>>16);N=k>>>16,O&=65535,k&=65535,P[x]=k<<16|O}return new h(P,P[P.length-1]&-2147483648?-1:0)};function K(C,I){return C.add(j(I))}r.j=function(C){if(H(this)||H(C))return E;if($(this))return $(C)?j(this).j(j(C)):j(j(this).j(C));if($(C))return j(this.j(j(C)));if(this.l(M)<0&&C.l(M)<0)return y(this.m()*C.m());const I=this.g.length+C.g.length,P=[];for(var N=0;N<2*I;N++)P[N]=0;for(N=0;N<this.g.length;N++)for(let x=0;x<C.g.length;x++){const O=this.i(N)>>>16,k=this.i(N)&65535,fe=C.i(x)>>>16,Ve=C.i(x)&65535;P[2*N+2*x]+=k*Ve,se(P,2*N+2*x),P[2*N+2*x+1]+=O*Ve,se(P,2*N+2*x+1),P[2*N+2*x+1]+=k*fe,se(P,2*N+2*x+1),P[2*N+2*x+2]+=O*fe,se(P,2*N+2*x+2)}for(C=0;C<I;C++)P[C]=P[2*C+1]<<16|P[2*C];for(C=I;C<2*I;C++)P[C]=0;return new h(P,0)};function se(C,I){for(;(C[I]&65535)!=C[I];)C[I+1]+=C[I]>>>16,C[I]&=65535,I++}function q(C,I){this.g=C,this.h=I}function W(C,I){if(H(I))throw Error("division by zero");if(H(C))return new q(E,E);if($(C))return I=W(j(C),I),new q(j(I.g),j(I.h));if($(I))return I=W(C,j(I)),new q(j(I.g),I.h);if(C.g.length>30){if($(C)||$(I))throw Error("slowDivide_ only works with positive integers.");for(var P=S,N=I;N.l(C)<=0;)P=te(P),N=te(N);var x=ee(P,1),O=ee(N,1);for(N=ee(N,2),P=ee(P,2);!H(N);){var k=O.add(N);k.l(C)<=0&&(x=x.add(P),O=k),N=ee(N,1),P=ee(P,1)}return I=K(C,x.j(I)),new q(x,I)}for(x=E;C.l(I)>=0;){for(P=Math.max(1,Math.floor(C.m()/I.m())),N=Math.ceil(Math.log(P)/Math.LN2),N=N<=48?1:Math.pow(2,N-48),O=y(P),k=O.j(I);$(k)||k.l(C)>0;)P-=N,O=y(P),k=O.j(I);H(O)&&(O=S),x=x.add(O),C=K(C,k)}return new q(x,C)}r.B=function(C){return W(this,C).h},r.and=function(C){const I=Math.max(this.g.length,C.g.length),P=[];for(let N=0;N<I;N++)P[N]=this.i(N)&C.i(N);return new h(P,this.h&C.h)},r.or=function(C){const I=Math.max(this.g.length,C.g.length),P=[];for(let N=0;N<I;N++)P[N]=this.i(N)|C.i(N);return new h(P,this.h|C.h)},r.xor=function(C){const I=Math.max(this.g.length,C.g.length),P=[];for(let N=0;N<I;N++)P[N]=this.i(N)^C.i(N);return new h(P,this.h^C.h)};function te(C){const I=C.g.length+1,P=[];for(let N=0;N<I;N++)P[N]=C.i(N)<<1|C.i(N-1)>>>31;return new h(P,C.h)}function ee(C,I){const P=I>>5;I%=32;const N=C.g.length-P,x=[];for(let O=0;O<N;O++)x[O]=I>0?C.i(O+P)>>>I|C.i(O+P+1)<<32-I:C.i(O+P);return new h(x,C.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Cv=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=v,Ns=h}).apply(typeof Ey<"u"?Ey:typeof self<"u"?self:typeof window<"u"?window:{});var Wu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Rv,Wa,Pv,tc,ef,kv,Nv,xv;(function(){var r,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wu=="object"&&Wu];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=t(this);function o(u,m){if(m)e:{var _=s;u=u.split(".");for(var T=0;T<u.length-1;T++){var F=u[T];if(!(F in _))break e;_=_[F]}u=u[u.length-1],T=_[u],m=m(T),m!=T&&m!=null&&e(_,u,{configurable:!0,writable:!0,value:m})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(m){var _=[],T;for(T in m)Object.prototype.hasOwnProperty.call(m,T)&&_.push([T,m[T]]);return _}});var l=l||{},h=this||self;function f(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function g(u,m,_){return u.call.apply(u.bind,arguments)}function y(u,m,_){return y=g,y.apply(null,arguments)}function v(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var T=_.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function E(u,m){function _(){}_.prototype=m.prototype,u.Z=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Ob=function(T,F,z){for(var ie=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)ie[ke-2]=arguments[ke];return m.prototype[F].apply(T,ie)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function M(u){const m=u.length;if(m>0){const _=Array(m);for(let T=0;T<m;T++)_[T]=u[T];return _}return[]}function H(u,m){for(let T=1;T<arguments.length;T++){const F=arguments[T];var _=typeof F;if(_=_!="object"?_:F?Array.isArray(F)?"array":_:"null",_=="array"||_=="object"&&typeof F.length=="number"){_=u.length||0;const z=F.length||0;u.length=_+z;for(let ie=0;ie<z;ie++)u[_+ie]=F[ie]}else u.push(F)}}class ${constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function j(u){h.setTimeout(()=>{throw u},0)}function K(){var u=C;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class se{constructor(){this.h=this.g=null}add(m,_){const T=q.get();T.set(m,_),this.h?this.h.next=T:this.g=T,this.h=T}}var q=new $(()=>new W,u=>u.reset());class W{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let te,ee=!1,C=new se,I=()=>{const u=Promise.resolve(void 0);te=()=>{u.then(P)}};function P(){for(var u;u=K();){try{u.h.call(u.g)}catch(_){j(_)}var m=q;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}ee=!1}function N(){this.u=this.u,this.C=this.C}N.prototype.u=!1,N.prototype.dispose=function(){this.u||(this.u=!0,this.N())},N.prototype[Symbol.dispose]=function(){this.dispose()},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function x(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}x.prototype.h=function(){this.defaultPrevented=!0};var O=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};h.addEventListener("test",_,m),h.removeEventListener("test",_,m)}catch{}return u})();function k(u){return/^[\s\xa0]*$/.test(u)}function fe(u,m){x.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}E(fe,x),fe.prototype.init=function(u,m){const _=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(_=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&fe.Z.h.call(this)},fe.prototype.h=function(){fe.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ve="closure_listenable_"+(Math.random()*1e6|0),Ue=0;function Re(u,m,_,T,F){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!T,this.ha=F,this.key=++Ue,this.da=this.fa=!1}function ne(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ge(u,m,_){for(const T in u)m.call(_,u[T],T,u)}function ae(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function L(u){const m={};for(const _ in u)m[_]=u[_];return m}const X="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ae(u,m){let _,T;for(let F=1;F<arguments.length;F++){T=arguments[F];for(_ in T)u[_]=T[_];for(let z=0;z<X.length;z++)_=X[z],Object.prototype.hasOwnProperty.call(T,_)&&(u[_]=T[_])}}function Pe(u){this.src=u,this.g={},this.h=0}Pe.prototype.add=function(u,m,_,T,F){const z=u.toString();u=this.g[z],u||(u=this.g[z]=[],this.h++);const ie=De(u,m,T,F);return ie>-1?(m=u[ie],_||(m.fa=!1)):(m=new Re(m,this.src,z,!!T,F),m.fa=_,u.push(m)),m};function xe(u,m){const _=m.type;if(_ in u.g){var T=u.g[_],F=Array.prototype.indexOf.call(T,m,void 0),z;(z=F>=0)&&Array.prototype.splice.call(T,F,1),z&&(ne(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function De(u,m,_,T){for(let F=0;F<u.length;++F){const z=u[F];if(!z.da&&z.listener==m&&z.capture==!!_&&z.ha==T)return F}return-1}var $e="closure_lm_"+(Math.random()*1e6|0),je={};function Ge(u,m,_,T,F){if(Array.isArray(m)){for(let z=0;z<m.length;z++)Ge(u,m[z],_,T,F);return null}return _=Yo(_),u&&u[Ve]?u.J(m,_,f(T)?!!T.capture:!1,F):At(u,m,_,!1,T,F)}function At(u,m,_,T,F,z){if(!m)throw Error("Invalid event type");const ie=f(F)?!!F.capture:!!F;let ke=Di(u);if(ke||(u[$e]=ke=new Pe(u)),_=ke.add(m,_,T,ie,z),_.proxy)return _;if(T=vn(),_.proxy=T,T.src=u,T.listener=_,u.addEventListener)O||(F=ie),F===void 0&&(F=!1),u.addEventListener(m.toString(),T,F);else if(u.attachEvent)u.attachEvent(xi(m.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return _}function vn(){function u(_){return m.call(u.src,u.listener,_)}const m=Pl;return u}function Xo(u,m,_,T,F){if(Array.isArray(m))for(var z=0;z<m.length;z++)Xo(u,m[z],_,T,F);else T=f(T)?!!T.capture:!!T,_=Yo(_),u&&u[Ve]?(u=u.i,z=String(m).toString(),z in u.g&&(m=u.g[z],_=De(m,_,T,F),_>-1&&(ne(m[_]),Array.prototype.splice.call(m,_,1),m.length==0&&(delete u.g[z],u.h--)))):u&&(u=Di(u))&&(m=u.g[m.toString()],u=-1,m&&(u=De(m,_,T,F)),(_=u>-1?m[u]:null)&&$r(_))}function $r(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Ve])xe(m.i,u);else{var _=u.type,T=u.proxy;m.removeEventListener?m.removeEventListener(_,T,u.capture):m.detachEvent?m.detachEvent(xi(_),T):m.addListener&&m.removeListener&&m.removeListener(T),(_=Di(m))?(xe(_,u),_.h==0&&(_.src=null,m[$e]=null)):ne(u)}}}function xi(u){return u in je?je[u]:je[u]="on"+u}function Pl(u,m){if(u.da)u=!0;else{m=new fe(m,this);const _=u.listener,T=u.ha||u.src;u.fa&&$r(u),u=_.call(T,m)}return u}function Di(u){return u=u[$e],u instanceof Pe?u:null}var $s="__closure_events_fn_"+(Math.random()*1e9>>>0);function Yo(u){return typeof u=="function"?u:(u[$s]||(u[$s]=function(m){return u.handleEvent(m)}),u[$s])}function mt(){N.call(this),this.i=new Pe(this),this.M=this,this.G=null}E(mt,N),mt.prototype[Ve]=!0,mt.prototype.removeEventListener=function(u,m,_,T){Xo(this,u,m,_,T)};function ut(u,m){var _,T=u.G;if(T)for(_=[];T;T=T.G)_.push(T);if(u=u.M,T=m.type||m,typeof m=="string")m=new x(m,u);else if(m instanceof x)m.target=m.target||u;else{var F=m;m=new x(T,u),Ae(m,F)}F=!0;let z,ie;if(_)for(ie=_.length-1;ie>=0;ie--)z=m.g=_[ie],F=Pn(z,T,!0,m)&&F;if(z=m.g=u,F=Pn(z,T,!0,m)&&F,F=Pn(z,T,!1,m)&&F,_)for(ie=0;ie<_.length;ie++)z=m.g=_[ie],F=Pn(z,T,!1,m)&&F}mt.prototype.N=function(){if(mt.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const _=u.g[m];for(let T=0;T<_.length;T++)ne(_[T]);delete u.g[m],u.h--}}this.G=null},mt.prototype.J=function(u,m,_,T){return this.i.add(String(u),m,!1,_,T)},mt.prototype.K=function(u,m,_,T){return this.i.add(String(u),m,!0,_,T)};function Pn(u,m,_,T){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let F=!0;for(let z=0;z<m.length;++z){const ie=m[z];if(ie&&!ie.da&&ie.capture==_){const ke=ie.listener,ct=ie.ha||ie.src;ie.fa&&xe(u.i,ie),F=ke.call(ct,T)!==!1&&F}}return F&&!T.defaultPrevented}function Jo(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=y(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:h.setTimeout(u,m||0)}function Zo(u){u.g=Jo(()=>{u.g=null,u.i&&(u.i=!1,Zo(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class kl extends N{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Zo(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qr(u){N.call(this),this.h=u,this.g={}}E(qr,N);var ea=[];function Vi(u){ge(u.g,function(m,_){this.g.hasOwnProperty(_)&&$r(m)},u),u.g={}}qr.prototype.N=function(){qr.Z.N.call(this),Vi(this)},qr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Wr=h.JSON.stringify,Nl=h.JSON.parse,qs=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function Hr(){}function xl(){}var Gr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Oi(){x.call(this,"d")}E(Oi,x);function ta(){x.call(this,"c")}E(ta,x);var kn={},Mi=null;function Kr(){return Mi=Mi||new mt}kn.Ia="serverreachability";function Li(u){x.call(this,kn.Ia,u)}E(Li,x);function pr(u){const m=Kr();ut(m,new Li(m))}kn.STAT_EVENT="statevent";function mr(u,m){x.call(this,kn.STAT_EVENT,u),this.stat=m}E(mr,x);function at(u){const m=Kr();ut(m,new mr(m,u))}kn.Ja="timingevent";function na(u,m){x.call(this,kn.Ja,u),this.size=m}E(na,x);function Qr(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},m)}function Xr(){this.g=!0}Xr.prototype.ua=function(){this.g=!1};function Dl(u,m,_,T,F,z){u.info(function(){if(u.g)if(z){var ie="",ke=z.split("&");for(let Ke=0;Ke<ke.length;Ke++){var ct=ke[Ke].split("=");if(ct.length>1){const gt=ct[0];ct=ct[1];const cn=gt.split("_");ie=cn.length>=2&&cn[1]=="type"?ie+(gt+"="+ct+"&"):ie+(gt+"=redacted&")}}}else ie=null;else ie=z;return"XMLHTTP REQ ("+T+") [attempt "+F+"]: "+m+`
`+_+`
`+ie})}function Vl(u,m,_,T,F,z,ie){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+F+"]: "+m+`
`+_+`
`+z+" "+ie})}function zn(u,m,_,T){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Ws(u,_)+(T?" "+T:"")})}function Ol(u,m){u.info(function(){return"TIMEOUT: "+m})}Xr.prototype.info=function(){};function Ws(u,m){if(!u.g)return m;if(!m)return null;try{const z=JSON.parse(m);if(z){for(u=0;u<z.length;u++)if(Array.isArray(z[u])){var _=z[u];if(!(_.length<2)){var T=_[1];if(Array.isArray(T)&&!(T.length<1)){var F=T[0];if(F!="noop"&&F!="stop"&&F!="close")for(let ie=1;ie<T.length;ie++)T[ie]=""}}}}return Wr(z)}catch{return m}}var Yr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Jr={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ml;function gr(){}E(gr,Hr),gr.prototype.g=function(){return new XMLHttpRequest},Ml=new gr;function $n(u){return encodeURIComponent(String(u))}function bi(u){var m=1;u=u.split(":");const _=[];for(;m>0&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function wn(u,m,_,T){this.j=u,this.i=m,this.l=_,this.S=T||1,this.V=new qr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ll}function Ll(){this.i=null,this.g="",this.h=!1}var bl={},ra={};function Nn(u,m,_){u.M=1,u.A=_r(En(m)),u.u=_,u.R=!0,sa(u,null)}function sa(u,m){u.F=Date.now(),Hs(u),u.B=En(u.A);var _=u.B,T=u.S;Array.isArray(T)||(T=[String(T)]),pa(_.i,"t",T),u.C=0,_=u.j.L,u.h=new Ll,u.g=Gl(u.j,_?m:null,!u.u),u.P>0&&(u.O=new kl(y(u.Y,u,u.g),u.P)),m=u.V,_=u.g,T=u.ba;var F="readystatechange";Array.isArray(F)||(F&&(ea[0]=F.toString()),F=ea);for(let z=0;z<F.length;z++){const ie=Ge(_,F[z],T||m.handleEvent,!1,m.h||m);if(!ie)break;m.g[ie.key]=ie}m=u.J?L(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),pr(),Dl(u.i,u.v,u.B,u.l,u.S,u.u)}wn.prototype.ba=function(u){u=u.target;const m=this.O;m&&Xn(u)==3?m.j():this.Y(u)},wn.prototype.Y=function(u){try{if(u==this.g)e:{const ke=Xn(this.g),ct=this.g.ya(),Ke=this.g.ca();if(!(ke<3)&&(ke!=3||this.g&&(this.h.h||this.g.la()||Wl(this.g)))){this.K||ke!=4||ct==7||(ct==8||Ke<=0?pr(3):pr(2)),ji(this);var m=this.g.ca();this.X=m;var _=jl(this);if(this.o=m==200,Vl(this.i,this.v,this.B,this.l,this.S,ke,m),this.o){if(this.U&&!this.L){t:{if(this.g){var T,F=this.g;if((T=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(T)){var z=T;break t}}z=null}if(u=z)zn(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Je(this,u);else{this.o=!1,this.m=3,at(12),yr(this),Gs(this);break e}}if(this.R){u=!0;let gt;for(;!this.K&&this.C<_.length;)if(gt=Ul(this,_),gt==ra){ke==4&&(this.m=4,at(14),u=!1),zn(this.i,this.l,null,"[Incomplete Response]");break}else if(gt==bl){this.m=4,at(15),zn(this.i,this.l,_,"[Invalid Chunk]"),u=!1;break}else zn(this.i,this.l,gt,null),Je(this,gt);if(Fl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ke!=4||_.length!=0||this.h.h||(this.m=1,at(16),u=!1),this.o=this.o&&u,!u)zn(this.i,this.l,_,"[Invalid Chunked Response]"),yr(this),Gs(this);else if(_.length>0&&!this.W){this.W=!0;var ie=this.j;ie.g==this&&ie.aa&&!ie.P&&(ie.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),ni(ie),ie.P=!0,at(11))}}else zn(this.i,this.l,_,null),Je(this,_);ke==4&&yr(this),this.o&&!this.K&&(ke==4?Ki(this.j,this):(this.o=!1,Hs(this)))}else ga(this.g),m==400&&_.indexOf("Unknown SID")>0?(this.m=3,at(12)):(this.m=0,at(13)),yr(this),Gs(this)}}}catch{}};function jl(u){if(!Fl(u))return u.g.la();const m=Wl(u.g);if(m==="")return"";let _="";const T=m.length,F=Xn(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return yr(u),Gs(u),"";u.h.i=new h.TextDecoder}for(let z=0;z<T;z++)u.h.h=!0,_+=u.h.i.decode(m[z],{stream:!(F&&z==T-1)});return m.length=0,u.h.g+=_,u.C=0,u.h.g}function Fl(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Ul(u,m){var _=u.C,T=m.indexOf(`
`,_);return T==-1?ra:(_=Number(m.substring(_,T)),isNaN(_)?bl:(T+=1,T+_>m.length?ra:(m=m.slice(T,T+_),u.C=T+_,m)))}wn.prototype.cancel=function(){this.K=!0,yr(this)};function Hs(u){u.T=Date.now()+u.H,ia(u,u.H)}function ia(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Qr(y(u.aa,u),m)}function ji(u){u.D&&(h.clearTimeout(u.D),u.D=null)}wn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Ol(this.i,this.B),this.M!=2&&(pr(),at(17)),yr(this),this.m=2,Gs(this)):ia(this,this.T-u)};function Gs(u){u.j.I==0||u.K||Ki(u.j,u)}function yr(u){ji(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,Vi(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function Je(u,m){try{var _=u.j;if(_.I!=0&&(_.g==u||aa(_.h,u))){if(!u.L&&aa(_.h,u)&&_.I==3){try{var T=_.Ba.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var F=T;if(F[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<u.F)Gi(_),ln(_);else break e;Zn(_),at(18)}}else _.xa=F[1],0<_.xa-_.K&&F[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=Qr(y(_.Va,_),6e3));Ks(_.h)<=1&&_.ta&&(_.ta=void 0)}else un(_,11)}else if((u.L||_.g==u)&&Gi(_),!k(m))for(F=_.Ba.g.parse(m),m=0;m<F.length;m++){let Ke=F[m];const gt=Ke[0];if(!(gt<=_.K))if(_.K=gt,Ke=Ke[1],_.I==2)if(Ke[0]=="c"){_.M=Ke[1],_.ba=Ke[2];const cn=Ke[3];cn!=null&&(_.ka=cn,_.j.info("VER="+_.ka));const Ir=Ke[4];Ir!=null&&(_.za=Ir,_.j.info("SVER="+_.za));const er=Ke[5];er!=null&&typeof er=="number"&&er>0&&(T=1.5*er,_.O=T,_.j.info("backChannelRequestTimeoutMs_="+T)),T=_;const tr=u.g;if(tr){const Yi=tr.g?tr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Yi){var z=T.h;z.g||Yi.indexOf("spdy")==-1&&Yi.indexOf("quic")==-1&&Yi.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(Ui(z,z.h),z.h=null))}if(T.G){const va=tr.g?tr.g.getResponseHeader("X-HTTP-Session-Id"):null;va&&(T.wa=va,He(T.J,T.G,va))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-u.F,_.j.info("Handshake RTT: "+_.T+"ms")),T=_;var ie=u;if(T.na=_a(T,T.L?T.ba:null,T.W),ie.L){Qs(T.h,ie);var ke=ie,ct=T.O;ct&&(ke.H=ct),ke.D&&(ji(ke),Hs(ke)),T.g=ie}else Ut(T);_.i.length>0&&Tr(_)}else Ke[0]!="stop"&&Ke[0]!="close"||un(_,7);else _.I==3&&(Ke[0]=="stop"||Ke[0]=="close"?Ke[0]=="stop"?un(_,7):Wi(_):Ke[0]!="noop"&&_.l&&_.l.qa(Ke),_.A=0)}}pr(4)}catch{}}var Zc=class{constructor(u,m){this.g=u,this.map=m}};function Fi(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function oa(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Ks(u){return u.h?1:u.g?u.g.size:0}function aa(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Ui(u,m){u.g?u.g.add(m):u.h=m}function Qs(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Fi.prototype.cancel=function(){if(this.i=sn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function sn(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.G);return m}return M(u.i)}var Bl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function on(u,m){if(u){u=u.split("&");for(let _=0;_<u.length;_++){const T=u[_].indexOf("=");let F,z=null;T>=0?(F=u[_].substring(0,T),z=u[_].substring(T+1)):F=u[_],m(F,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function qn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof qn?(this.l=u.l,Xs(this,u.j),this.o=u.o,this.g=u.g,Wn(this,u.u),this.h=u.h,Zr(this,ma(u.i)),this.m=u.m):u&&(m=String(u).match(Bl))?(this.l=!1,Xs(this,m[1]||"",!0),this.o=Ys(m[2]||""),this.g=Ys(m[3]||"",!0),Wn(this,m[4]),this.h=Ys(m[5]||"",!0),Zr(this,m[6]||"",!0),this.m=Ys(m[7]||"")):(this.l=!1,this.i=new Fe(null,this.l))}qn.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(Js(m,ua,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Js(m,ua,!0),"@"),u.push($n(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&u.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(Js(_,_.charAt(0)=="/"?Zs:ca,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",Js(_,ha)),u.join("")},qn.prototype.resolve=function(u){const m=En(this);let _=!!u.j;_?Xs(m,u.j):_=!!u.o,_?m.o=u.o:_=!!u.g,_?m.g=u.g:_=u.u!=null;var T=u.h;if(_)Wn(m,u.u);else if(_=!!u.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var F=m.h.lastIndexOf("/");F!=-1&&(T=m.h.slice(0,F+1)+T)}if(F=T,F==".."||F==".")T="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){T=F.lastIndexOf("/",0)==0,F=F.split("/");const z=[];for(let ie=0;ie<F.length;){const ke=F[ie++];ke=="."?T&&ie==F.length&&z.push(""):ke==".."?((z.length>1||z.length==1&&z[0]!="")&&z.pop(),T&&ie==F.length&&z.push("")):(z.push(ke),T=!0)}T=z.join("/")}else T=F}return _?m.h=T:_=u.i.toString()!=="",_?Zr(m,ma(u.i)):_=!!u.m,_&&(m.m=u.m),m};function En(u){return new qn(u)}function Xs(u,m,_){u.j=_?Ys(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Wn(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function Zr(u,m,_){m instanceof Fe?(u.i=m,zi(u.i,u.l)):(_||(m=Js(m,eh)),u.i=new Fe(m,u.l))}function He(u,m,_){u.i.set(m,_)}function _r(u){return He(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Ys(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Js(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,la),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function la(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var ua=/[#\/\?@]/g,ca=/[#\?:]/g,Zs=/[#\?]/g,eh=/[#\?@]/g,ha=/#/g;function Fe(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Hn(u){u.g||(u.g=new Map,u.h=0,u.i&&on(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}r=Fe.prototype,r.add=function(u,m){Hn(this),this.i=null,u=Gn(this,u);let _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function da(u,m){Hn(u),m=Gn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Bi(u,m){return Hn(u),m=Gn(u,m),u.g.has(m)}r.forEach=function(u,m){Hn(this),this.g.forEach(function(_,T){_.forEach(function(F){u.call(m,F,T,this)},this)},this)};function fa(u,m){Hn(u);let _=[];if(typeof m=="string")Bi(u,m)&&(_=_.concat(u.g.get(Gn(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)_=_.concat(u[m]);return _}r.set=function(u,m){return Hn(this),this.i=null,u=Gn(this,u),Bi(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=fa(this,u),u.length>0?String(u[0]):m):m};function pa(u,m,_){da(u,m),_.length>0&&(u.i=null,u.g.set(Gn(u,m),M(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let T=0;T<m.length;T++){var _=m[T];const F=$n(_);_=fa(this,_);for(let z=0;z<_.length;z++){let ie=F;_[z]!==""&&(ie+="="+$n(_[z])),u.push(ie)}}return this.i=u.join("&")};function ma(u){const m=new Fe;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function Gn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function zi(u,m){m&&!u.j&&(Hn(u),u.i=null,u.g.forEach(function(_,T){const F=T.toLowerCase();T!=F&&(da(this,T),pa(this,F,_))},u)),u.j=m}function Kn(u,m){const _=new Xr;if(h.Image){const T=new Image;T.onload=v(xt,_,"TestLoadImage: loaded",!0,m,T),T.onerror=v(xt,_,"TestLoadImage: error",!1,m,T),T.onabort=v(xt,_,"TestLoadImage: abort",!1,m,T),T.ontimeout=v(xt,_,"TestLoadImage: timeout",!1,m,T),h.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else m(!1)}function Qn(u,m){const _=new Xr,T=new AbortController,F=setTimeout(()=>{T.abort(),xt(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:T.signal}).then(z=>{clearTimeout(F),z.ok?xt(_,"TestPingServer: ok",!0,m):xt(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(F),xt(_,"TestPingServer: error",!1,m)})}function xt(u,m,_,T,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),T(_)}catch{}}function ei(){this.g=new qs}function vr(u){this.i=u.Sb||null,this.h=u.ab||!1}E(vr,Hr),vr.prototype.g=function(){return new an(this.i,this.h)};function an(u,m){mt.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(an,mt),r=an.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,xn(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||h).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,es(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,xn(this)),this.g&&(this.readyState=3,xn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;zl(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function zl(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?es(this):xn(this),this.readyState==3&&zl(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,es(this))},r.Na=function(u){this.g&&(this.response=u,es(this))},r.ga=function(){this.g&&es(this)};function es(u){u.readyState=4,u.l=null,u.j=null,u.B=null,xn(u)}r.setRequestHeader=function(u,m){this.A.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function xn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(an.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function $l(u){let m="";return ge(u,function(_,T){m+=T,m+=":",m+=_,m+=`\r
`}),m}function $i(u,m,_){e:{for(T in _){var T=!1;break e}T=!0}T||(_=$l(_),typeof u=="string"?_!=null&&$n(_):He(u,m,_))}function Xe(u){mt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(Xe,mt);var ql=/^https?$/i,th=["POST","PUT"];r=Xe.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,m,_,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ml.g(),this.g.onreadystatechange=S(y(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(z){ts(this,z);return}if(u=_||"",_=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var F in T)_.set(F,T[F]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const z of T.keys())_.set(z,T.get(z));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(_.keys()).find(z=>z.toLowerCase()=="content-type"),F=h.FormData&&u instanceof h.FormData,!(Array.prototype.indexOf.call(th,m,void 0)>=0)||T||F||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,ie]of _)this.g.setRequestHeader(z,ie);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(z){ts(this,z)}};function ts(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,ns(u),Er(u)}function ns(u){u.A||(u.A=!0,ut(u,"complete"),ut(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,ut(this,"complete"),ut(this,"abort"),Er(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Er(this,!0)),Xe.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?wr(this):this.Xa())},r.Xa=function(){wr(this)};function wr(u){if(u.h&&typeof l<"u"){if(u.v&&Xn(u)==4)setTimeout(u.Ca.bind(u),0);else if(ut(u,"readystatechange"),Xn(u)==4){u.h=!1;try{const z=u.ca();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var T;if(T=z===0){let ie=String(u.D).match(Bl)[1]||null;!ie&&h.self&&h.self.location&&(ie=h.self.location.protocol.slice(0,-1)),T=!ql.test(ie?ie.toLowerCase():"")}_=T}if(_)ut(u,"complete"),ut(u,"success");else{u.o=6;try{var F=Xn(u)>2?u.g.statusText:""}catch{F=""}u.l=F+" ["+u.ca()+"]",ns(u)}}finally{Er(u)}}}}function Er(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const _=u.g;u.g=null,m||ut(u,"ready");try{_.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Xn(u){return u.g?u.g.readyState:0}r.ca=function(){try{return Xn(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Nl(m)}};function Wl(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function ga(u){const m={};u=(u.g&&Xn(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(k(u[T]))continue;var _=bi(u[T]);const F=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const z=m[F]||[];m[F]=z,z.push(_)}ae(m,function(T){return T.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Yn(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function qi(u){this.za=0,this.i=[],this.j=new Xr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Yn("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Yn("baseRetryDelayMs",5e3,u),this.Za=Yn("retryDelaySeedMs",1e4,u),this.Ta=Yn("forwardChannelMaxRetries",2,u),this.va=Yn("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Fi(u&&u.concurrentRequestLimit),this.Ba=new ei,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=qi.prototype,r.ka=8,r.I=1,r.connect=function(u,m,_,T){at(0),this.W=u,this.H=m||{},_&&T!==void 0&&(this.H.OSID=_,this.H.OAID=T),this.F=this.X,this.J=_a(this,null,this.W),Tr(this)};function Wi(u){if(Hi(u),u.I==3){var m=u.V++,_=En(u.J);if(He(_,"SID",u.M),He(_,"RID",m),He(_,"TYPE","terminate"),Jn(u,_),m=new wn(u,u.j,m),m.M=2,m.A=_r(En(_)),_=!1,h.navigator&&h.navigator.sendBeacon)try{_=h.navigator.sendBeacon(m.A.toString(),"")}catch{}!_&&h.Image&&(new Image().src=m.A,_=!0),_||(m.g=Gl(m.j,null),m.g.ea(m.A)),m.F=Date.now(),Hs(m)}ri(u)}function ln(u){u.g&&(ni(u),u.g.cancel(),u.g=null)}function Hi(u){ln(u),u.v&&(h.clearTimeout(u.v),u.v=null),Gi(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&h.clearTimeout(u.m),u.m=null)}function Tr(u){if(!oa(u.h)&&!u.m){u.m=!0;var m=u.Ea;te||I(),ee||(te(),ee=!0),C.add(m,u),u.D=0}}function Hl(u,m){return Ks(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Qr(y(u.Ea,u,m),Qi(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const F=new wn(this,this.j,u);let z=this.o;if(this.U&&(z?(z=L(z),Ae(z,this.U)):z=this.U),this.u!==null||this.R||(F.J=z,z=null),this.S)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var T=this.i[_];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(m+=T,m>4096){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=ya(this,F,m),_=En(this.J),He(_,"RID",u),He(_,"CVER",22),this.G&&He(_,"X-HTTP-Session-Id",this.G),Jn(this,_),z&&(this.R?m="headers="+$n($l(z))+"&"+m:this.u&&$i(_,this.u,z)),Ui(this.h,F),this.Ra&&He(_,"TYPE","init"),this.S?(He(_,"$req",m),He(_,"SID","null"),F.U=!0,Nn(F,_,null)):Nn(F,_,m),this.I=2}}else this.I==3&&(u?ti(this,u):this.i.length==0||oa(this.h)||ti(this))};function ti(u,m){var _;m?_=m.l:_=u.V++;const T=En(u.J);He(T,"SID",u.M),He(T,"RID",_),He(T,"AID",u.K),Jn(u,T),u.u&&u.o&&$i(T,u.u,u.o),_=new wn(u,u.j,_,u.D+1),u.u===null&&(_.J=u.o),m&&(u.i=m.G.concat(u.i)),m=ya(u,_,1e3),_.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Ui(u.h,_),Nn(_,T,m)}function Jn(u,m){u.H&&ge(u.H,function(_,T){He(m,T,_)}),u.l&&ge({},function(_,T){He(m,T,_)})}function ya(u,m,_){_=Math.min(u.i.length,_);const T=u.l?y(u.l.Ka,u.l,u):null;e:{var F=u.i;let ke=-1;for(;;){const ct=["count="+_];ke==-1?_>0?(ke=F[0].g,ct.push("ofs="+ke)):ke=0:ct.push("ofs="+ke);let Ke=!0;for(let gt=0;gt<_;gt++){var z=F[gt].g;const cn=F[gt].map;if(z-=ke,z<0)ke=Math.max(0,F[gt].g-100),Ke=!1;else try{z="req"+z+"_"||"";try{var ie=cn instanceof Map?cn:Object.entries(cn);for(const[Ir,er]of ie){let tr=er;f(er)&&(tr=Wr(er)),ct.push(z+Ir+"="+encodeURIComponent(tr))}}catch(Ir){throw ct.push(z+"type="+encodeURIComponent("_badmap")),Ir}}catch{T&&T(cn)}}if(Ke){ie=ct.join("&");break e}}ie=void 0}return u=u.i.splice(0,_),m.G=u,ie}function Ut(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;te||I(),ee||(te(),ee=!0),C.add(m,u),u.A=0}}function Zn(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Qr(y(u.Da,u),Qi(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,rs(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Qr(y(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,at(10),ln(this),rs(this))};function ni(u){u.B!=null&&(h.clearTimeout(u.B),u.B=null)}function rs(u){u.g=new wn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=En(u.na);He(m,"RID","rpc"),He(m,"SID",u.M),He(m,"AID",u.K),He(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&He(m,"TO",u.ia),He(m,"TYPE","xmlhttp"),Jn(u,m),u.u&&u.o&&$i(m,u.u,u.o),u.O&&(u.g.H=u.O);var _=u.g;u=u.ba,_.M=1,_.A=_r(En(m)),_.u=null,_.R=!0,sa(_,u)}r.Va=function(){this.C!=null&&(this.C=null,ln(this),Zn(this),at(19))};function Gi(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function Ki(u,m){var _=null;if(u.g==m){Gi(u),ni(u),u.g=null;var T=2}else if(aa(u.h,m))_=m.G,Qs(u.h,m),T=1;else return;if(u.I!=0){if(m.o)if(T==1){_=m.u?m.u.length:0,m=Date.now()-m.F;var F=u.D;T=Kr(),ut(T,new na(T,_)),Tr(u)}else Ut(u);else if(F=m.m,F==3||F==0&&m.X>0||!(T==1&&Hl(u,m)||T==2&&Zn(u)))switch(_&&_.length>0&&(m=u.h,m.i=m.i.concat(_)),F){case 1:un(u,5);break;case 4:un(u,10);break;case 3:un(u,6);break;default:un(u,2)}}}function Qi(u,m){let _=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(_*=2),_*m}function un(u,m){if(u.j.info("Error code "+m),m==2){var _=y(u.bb,u),T=u.Ua;const F=!T;T=new qn(T||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Xs(T,"https"),_r(T),F?Kn(T.toString(),_):Qn(T.toString(),_)}else at(2);u.I=0,u.l&&u.l.pa(m),ri(u),Hi(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),at(2)):(this.j.info("Failed to ping google.com"),at(1))};function ri(u){if(u.I=0,u.ja=[],u.l){const m=sn(u.h);(m.length!=0||u.i.length!=0)&&(H(u.ja,m),H(u.ja,u.i),u.h.i.length=0,M(u.i),u.i.length=0),u.l.oa()}}function _a(u,m,_){var T=_ instanceof qn?En(_):new qn(_);if(T.g!="")m&&(T.g=m+"."+T.g),Wn(T,T.u);else{var F=h.location;T=F.protocol,m=m?m+"."+F.hostname:F.hostname,F=+F.port;const z=new qn(null);T&&Xs(z,T),m&&(z.g=m),F&&Wn(z,F),_&&(z.h=_),T=z}return _=u.G,m=u.wa,_&&m&&He(T,_,m),He(T,"VER",u.ka),Jn(u,T),T}function Gl(u,m,_){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new Xe(new vr({ab:_})):new Xe(u.ma),m.Fa(u.L),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Kl(){}r=Kl.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Xi(){}Xi.prototype.g=function(u,m){return new Dt(u,m)};function Dt(u,m){mt.call(this),this.g=new qi(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!k(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!k(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new ss(this)}E(Dt,mt),Dt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Dt.prototype.close=function(){Wi(this.g)},Dt.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.v&&(_={},_.__data__=Wr(u),u=_);m.i.push(new Zc(m.Ya++,u)),m.I==3&&Tr(m)},Dt.prototype.N=function(){this.g.l=null,delete this.j,Wi(this.g),delete this.g,Dt.Z.N.call(this)};function Ql(u){Oi.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const _ in m){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}E(Ql,Oi);function Xl(){ta.call(this),this.status=1}E(Xl,ta);function ss(u){this.g=u}E(ss,Kl),ss.prototype.ra=function(){ut(this.g,"a")},ss.prototype.qa=function(u){ut(this.g,new Ql(u))},ss.prototype.pa=function(u){ut(this.g,new Xl)},ss.prototype.oa=function(){ut(this.g,"b")},Xi.prototype.createWebChannel=Xi.prototype.g,Dt.prototype.send=Dt.prototype.o,Dt.prototype.open=Dt.prototype.m,Dt.prototype.close=Dt.prototype.close,xv=function(){return new Xi},Nv=function(){return Kr()},kv=kn,ef={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Yr.NO_ERROR=0,Yr.TIMEOUT=8,Yr.HTTP_ERROR=6,tc=Yr,Jr.COMPLETE="complete",Pv=Jr,xl.EventType=Gr,Gr.OPEN="a",Gr.CLOSE="b",Gr.ERROR="c",Gr.MESSAGE="d",mt.prototype.listen=mt.prototype.J,Wa=xl,Xe.prototype.listenOnce=Xe.prototype.K,Xe.prototype.getLastError=Xe.prototype.Ha,Xe.prototype.getLastErrorCode=Xe.prototype.ya,Xe.prototype.getStatus=Xe.prototype.ca,Xe.prototype.getResponseJson=Xe.prototype.La,Xe.prototype.getResponseText=Xe.prototype.la,Xe.prototype.send=Xe.prototype.ea,Xe.prototype.setWithCredentials=Xe.prototype.Fa,Rv=Xe}).apply(typeof Wu<"u"?Wu:typeof self<"u"?self:typeof window<"u"?window:{});const Ty="@firebase/firestore",Iy="4.9.3";class Ht{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ht.UNAUTHENTICATED=new Ht(null),Ht.GOOGLE_CREDENTIALS=new Ht("google-credentials-uid"),Ht.FIRST_PARTY=new Ht("first-party-uid"),Ht.MOCK_USER=new Ht("mock-user");let $o="12.7.0";const Ii=new If("@firebase/firestore");function wo(){return Ii.logLevel}function ue(r,...e){if(Ii.logLevel<=Me.DEBUG){const t=e.map(Lf);Ii.debug(`Firestore (${$o}): ${r}`,...t)}}function jr(r,...e){if(Ii.logLevel<=Me.ERROR){const t=e.map(Lf);Ii.error(`Firestore (${$o}): ${r}`,...t)}}function Do(r,...e){if(Ii.logLevel<=Me.WARN){const t=e.map(Lf);Ii.warn(`Firestore (${$o}): ${r}`,...t)}}function Lf(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}function _e(r,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,Dv(r,s,t)}function Dv(r,e,t){let s=`FIRESTORE (${$o}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw jr(s),new Error(s)}function ze(r,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,r||Dv(e,o,s)}function Ce(r,e){return r}const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oe extends zr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class lr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Vv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class _A{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ht.UNAUTHENTICATED)))}shutdown(){}}class vA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class wA{constructor(e){this.t=e,this.currentUser=Ht.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ze(this.o===void 0,42304);let s=this.i;const o=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let l=new lr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new lr,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},f=g=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((g=>f(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?f(g):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new lr)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(ze(typeof s.accessToken=="string",31837,{l:s}),new Vv(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ze(e===null||typeof e=="string",2055,{h:e}),new Ht(e)}}class EA{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Ht.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class TA{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new EA(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Ht.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Sy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class IA{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,jn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ze(this.o===void 0,3512);const s=l=>{l.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,ue("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const o=l=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Sy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ze(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Sy(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function SA(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}class bf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=SA(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%62))}return s}}function Le(r,e){return r<e?-1:r>e?1:0}function tf(r,e){const t=Math.min(r.length,e.length);for(let s=0;s<t;s++){const o=r.charAt(s),l=e.charAt(s);if(o!==l)return Md(o)===Md(l)?Le(o,l):Md(o)?1:-1}return Le(r.length,e.length)}const AA=55296,CA=57343;function Md(r){const e=r.charCodeAt(0);return e>=AA&&e<=CA}function Vo(r,e,t){return r.length===e.length&&r.every(((s,o)=>t(s,e[o])))}const Ay="__name__";class or{constructor(e,t,s){t===void 0?t=0:t>e.length&&_e(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&_e(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return or.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof or?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=or.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Le(e.length,t.length)}static compareSegments(e,t){const s=or.isNumericId(e),o=or.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?or.extractNumericId(e).compare(or.extractNumericId(t)):tf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ns.fromString(e.substring(4,e.length-2))}}class Qe extends or{construct(e,t,s){return new Qe(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new oe(G.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new Qe(t)}static emptyPath(){return new Qe([])}}const RA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Lt extends or{construct(e,t,s){return new Lt(e,t,s)}static isValidIdentifier(e){return RA.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Lt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ay}static keyField(){return new Lt([Ay])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new oe(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let h=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new oe(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new oe(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else f==="`"?(h=!h,o++):f!=="."||h?(s+=f,o++):(l(),o++)}if(l(),h)throw new oe(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Lt(t)}static emptyPath(){return new Lt([])}}class ye{constructor(e){this.path=e}static fromPath(e){return new ye(Qe.fromString(e))}static fromName(e){return new ye(Qe.fromString(e).popFirst(5))}static empty(){return new ye(Qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Qe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new Qe(e.slice()))}}function Ov(r,e,t){if(!t)throw new oe(G.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function PA(r,e,t,s){if(e===!0&&s===!0)throw new oe(G.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Cy(r){if(!ye.isDocumentKey(r))throw new oe(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Ry(r){if(ye.isDocumentKey(r))throw new oe(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Mv(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Lc(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":_e(12329,{type:typeof r})}function Fr(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new oe(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Lc(r);throw new oe(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function wt(r,e){const t={typeString:r};return e&&(t.value=e),t}function _l(r,e){if(!Mv(r))throw new oe(G.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){t=`JSON missing required field: '${s}'`;break}const h=r[s];if(o&&typeof h!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(l!==void 0&&h!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new oe(G.INVALID_ARGUMENT,t);return!0}const Py=-62135596800,ky=1e6;class tt{static now(){return tt.fromMillis(Date.now())}static fromDate(e){return tt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*ky);return new tt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new oe(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new oe(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Py)throw new oe(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oe(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ky}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:tt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(_l(e,tt._jsonSchema))return new tt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Py;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}tt._jsonSchemaVersion="firestore/timestamp/1.0",tt._jsonSchema={type:wt("string",tt._jsonSchemaVersion),seconds:wt("number"),nanoseconds:wt("number")};class Te{static fromTimestamp(e){return new Te(e)}static min(){return new Te(new tt(0,0))}static max(){return new Te(new tt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const il=-1;function kA(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Te.fromTimestamp(s===1e9?new tt(t+1,0):new tt(t,s));return new Vs(o,ye.empty(),e)}function NA(r){return new Vs(r.readTime,r.key,il)}class Vs{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Vs(Te.min(),ye.empty(),il)}static max(){return new Vs(Te.max(),ye.empty(),il)}}function xA(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=ye.comparator(r.documentKey,e.documentKey),t!==0?t:Le(r.largestBatchId,e.largestBatchId))}const DA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class VA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function qo(r){if(r.code!==G.FAILED_PRECONDITION||r.message!==DA)throw r;ue("LocalStore","Unexpectedly lost primary lease")}class Q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&_e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Q(((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Q?t:Q.resolve(t)}catch(t){return Q.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Q.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Q.reject(t)}static resolve(e){return new Q(((t,s)=>{t(e)}))}static reject(e){return new Q(((t,s)=>{s(e)}))}static waitFor(e){return new Q(((t,s)=>{let o=0,l=0,h=!1;e.forEach((f=>{++o,f.next((()=>{++l,h&&l===o&&t()}),(g=>s(g)))})),h=!0,l===o&&t()}))}static or(e){let t=Q.resolve(!1);for(const s of e)t=t.next((o=>o?Q.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,l)=>{s.push(t.call(this,o,l))})),this.waitFor(s)}static mapArray(e,t){return new Q(((s,o)=>{const l=e.length,h=new Array(l);let f=0;for(let g=0;g<l;g++){const y=g;t(e[y]).next((v=>{h[y]=v,++f,f===l&&s(h)}),(v=>o(v)))}}))}static doWhile(e,t){return new Q(((s,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):s()};l()}))}}function OA(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Wo(r){return r.name==="IndexedDbTransactionError"}class bc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}bc.ce=-1;const jf=-1;function vl(r){return r==null}function gc(r){return r===0&&1/r==-1/0}function MA(r){return typeof r=="number"&&Number.isInteger(r)&&!gc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const Lv="";function LA(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Ny(e)),e=bA(r.get(t),e);return Ny(e)}function bA(r,e){let t=e;const s=r.length;for(let o=0;o<s;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case Lv:t+="";break;default:t+=l}}return t}function Ny(r){return r+Lv+""}function xy(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Us(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function bv(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class ot{constructor(e,t){this.comparator=e,this.root=t||Mt.EMPTY}insert(e,t){return new ot(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Mt.BLACK,null,null))}remove(e){return new ot(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Mt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hu(this.root,e,this.comparator,!0)}}class Hu{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Mt{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??Mt.RED,this.left=o??Mt.EMPTY,this.right=l??Mt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new Mt(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Mt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Mt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Mt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Mt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw _e(27949);return e+(this.isRed()?0:1)}}Mt.EMPTY=null,Mt.RED=!0,Mt.BLACK=!1;Mt.EMPTY=new class{constructor(){this.size=0}get key(){throw _e(57766)}get value(){throw _e(16141)}get color(){throw _e(16727)}get left(){throw _e(29726)}get right(){throw _e(36894)}copy(e,t,s,o,l){return this}insert(e,t,s){return new Mt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class It{constructor(e){this.comparator=e,this.data=new ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Dy(this.data.getIterator())}getIteratorFrom(e){return new Dy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof It)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new It(this.comparator);return t.data=e,t}}class Dy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class gn{constructor(e){this.fields=e,e.sort(Lt.comparator)}static empty(){return new gn([])}unionWith(e){let t=new It(Lt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new gn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Vo(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}class jv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ft{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new jv("Invalid base64 string: "+l):l}})(e);return new Ft(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l})(e);return new Ft(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ft.EMPTY_BYTE_STRING=new Ft("");const jA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Os(r){if(ze(!!r,39018),typeof r=="string"){let e=0;const t=jA.exec(r);if(ze(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:dt(r.seconds),nanos:dt(r.nanos)}}function dt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ms(r){return typeof r=="string"?Ft.fromBase64String(r):Ft.fromUint8Array(r)}const Fv="server_timestamp",Uv="__type__",Bv="__previous_value__",zv="__local_write_time__";function Ff(r){return(r?.mapValue?.fields||{})[Uv]?.stringValue===Fv}function jc(r){const e=r.mapValue.fields[Bv];return Ff(e)?jc(e):e}function ol(r){const e=Os(r.mapValue.fields[zv].timestampValue);return new tt(e.seconds,e.nanos)}class FA{constructor(e,t,s,o,l,h,f,g,y,v){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=v}}const yc="(default)";class al{constructor(e,t){this.projectId=e,this.database=t||yc}static empty(){return new al("","")}get isDefaultDatabase(){return this.database===yc}isEqual(e){return e instanceof al&&e.projectId===this.projectId&&e.database===this.database}}const $v="__type__",UA="__max__",Gu={mapValue:{}},qv="__vector__",_c="value";function Ls(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Ff(r)?4:zA(r)?9007199254740991:BA(r)?10:11:_e(28295,{value:r})}function fr(r,e){if(r===e)return!0;const t=Ls(r);if(t!==Ls(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return ol(r).isEqual(ol(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=Os(o.timestampValue),f=Os(l.timestampValue);return h.seconds===f.seconds&&h.nanos===f.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,l){return Ms(o.bytesValue).isEqual(Ms(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,l){return dt(o.geoPointValue.latitude)===dt(l.geoPointValue.latitude)&&dt(o.geoPointValue.longitude)===dt(l.geoPointValue.longitude)})(r,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return dt(o.integerValue)===dt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=dt(o.doubleValue),f=dt(l.doubleValue);return h===f?gc(h)===gc(f):isNaN(h)&&isNaN(f)}return!1})(r,e);case 9:return Vo(r.arrayValue.values||[],e.arrayValue.values||[],fr);case 10:case 11:return(function(o,l){const h=o.mapValue.fields||{},f=l.mapValue.fields||{};if(xy(h)!==xy(f))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(f[g]===void 0||!fr(h[g],f[g])))return!1;return!0})(r,e);default:return _e(52216,{left:r})}}function ll(r,e){return(r.values||[]).find((t=>fr(t,e)))!==void 0}function Oo(r,e){if(r===e)return 0;const t=Ls(r),s=Ls(e);if(t!==s)return Le(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Le(r.booleanValue,e.booleanValue);case 2:return(function(l,h){const f=dt(l.integerValue||l.doubleValue),g=dt(h.integerValue||h.doubleValue);return f<g?-1:f>g?1:f===g?0:isNaN(f)?isNaN(g)?0:-1:1})(r,e);case 3:return Vy(r.timestampValue,e.timestampValue);case 4:return Vy(ol(r),ol(e));case 5:return tf(r.stringValue,e.stringValue);case 6:return(function(l,h){const f=Ms(l),g=Ms(h);return f.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(l,h){const f=l.split("/"),g=h.split("/");for(let y=0;y<f.length&&y<g.length;y++){const v=Le(f[y],g[y]);if(v!==0)return v}return Le(f.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,h){const f=Le(dt(l.latitude),dt(h.latitude));return f!==0?f:Le(dt(l.longitude),dt(h.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Oy(r.arrayValue,e.arrayValue);case 10:return(function(l,h){const f=l.fields||{},g=h.fields||{},y=f[_c]?.arrayValue,v=g[_c]?.arrayValue,E=Le(y?.values?.length||0,v?.values?.length||0);return E!==0?E:Oy(y,v)})(r.mapValue,e.mapValue);case 11:return(function(l,h){if(l===Gu.mapValue&&h===Gu.mapValue)return 0;if(l===Gu.mapValue)return 1;if(h===Gu.mapValue)return-1;const f=l.fields||{},g=Object.keys(f),y=h.fields||{},v=Object.keys(y);g.sort(),v.sort();for(let E=0;E<g.length&&E<v.length;++E){const S=tf(g[E],v[E]);if(S!==0)return S;const M=Oo(f[g[E]],y[v[E]]);if(M!==0)return M}return Le(g.length,v.length)})(r.mapValue,e.mapValue);default:throw _e(23264,{he:t})}}function Vy(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Le(r,e);const t=Os(r),s=Os(e),o=Le(t.seconds,s.seconds);return o!==0?o:Le(t.nanos,s.nanos)}function Oy(r,e){const t=r.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=Oo(t[o],s[o]);if(l)return l}return Le(t.length,s.length)}function Mo(r){return nf(r)}function nf(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const s=Os(t);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Ms(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return ye.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=nf(l);return s+"]"})(r.arrayValue):"mapValue"in r?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of s)l?l=!1:o+=",",o+=`${h}:${nf(t.fields[h])}`;return o+"}"})(r.mapValue):_e(61005,{value:r})}function nc(r){switch(Ls(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=jc(r);return e?16+nc(e):16;case 5:return 2*r.stringValue.length;case 6:return Ms(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,l)=>o+nc(l)),0)})(r.arrayValue);case 10:case 11:return(function(s){let o=0;return Us(s.fields,((l,h)=>{o+=l.length+nc(h)})),o})(r.mapValue);default:throw _e(13486,{value:r})}}function My(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function rf(r){return!!r&&"integerValue"in r}function Uf(r){return!!r&&"arrayValue"in r}function Ly(r){return!!r&&"nullValue"in r}function by(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function rc(r){return!!r&&"mapValue"in r}function BA(r){return(r?.mapValue?.fields||{})[$v]?.stringValue===qv}function Xa(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Us(r.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Xa(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Xa(r.arrayValue.values[t]);return e}return{...r}}function zA(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===UA}class Xt{constructor(e){this.value=e}static empty(){return new Xt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!rc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xa(t)}setAll(e){let t=Lt.emptyPath(),s={},o=[];e.forEach(((h,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,s,o),s={},o=[],t=f.popLast()}h?s[f.lastSegment()]=Xa(h):o.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());rc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return fr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];rc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){Us(t,((o,l)=>e[o]=l));for(const o of s)delete e[o]}clone(){return new Xt(Xa(this.value))}}function Wv(r){const e=[];return Us(r.fields,((t,s)=>{const o=new Lt([t]);if(rc(s)){const l=Wv(s.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)})),new gn(e)}class Nt{constructor(e,t,s,o,l,h,f){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=h,this.documentState=f}static newInvalidDocument(e){return new Nt(e,0,Te.min(),Te.min(),Te.min(),Xt.empty(),0)}static newFoundDocument(e,t,s,o){return new Nt(e,1,t,Te.min(),s,o,0)}static newNoDocument(e,t){return new Nt(e,2,t,Te.min(),Te.min(),Xt.empty(),0)}static newUnknownDocument(e,t){return new Nt(e,3,t,Te.min(),Te.min(),Xt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Nt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Nt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class vc{constructor(e,t){this.position=e,this.inclusive=t}}function jy(r,e,t){let s=0;for(let o=0;o<r.position.length;o++){const l=e[o],h=r.position[o];if(l.field.isKeyField()?s=ye.comparator(ye.fromName(h.referenceValue),t.key):s=Oo(h,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function Fy(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!fr(r.position[t],e.position[t]))return!1;return!0}class wc{constructor(e,t="asc"){this.field=e,this.dir=t}}function $A(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class Hv{}class vt extends Hv{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new WA(e,t,s):t==="array-contains"?new KA(e,s):t==="in"?new QA(e,s):t==="not-in"?new XA(e,s):t==="array-contains-any"?new YA(e,s):new vt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new HA(e,s):new GA(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Oo(t,this.value)):t!==null&&Ls(this.value)===Ls(t)&&this.matchesComparison(Oo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Bn extends Hv{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Bn(e,t)}matches(e){return Gv(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Gv(r){return r.op==="and"}function Kv(r){return qA(r)&&Gv(r)}function qA(r){for(const e of r.filters)if(e instanceof Bn)return!1;return!0}function sf(r){if(r instanceof vt)return r.field.canonicalString()+r.op.toString()+Mo(r.value);if(Kv(r))return r.filters.map((e=>sf(e))).join(",");{const e=r.filters.map((t=>sf(t))).join(",");return`${r.op}(${e})`}}function Qv(r,e){return r instanceof vt?(function(s,o){return o instanceof vt&&s.op===o.op&&s.field.isEqual(o.field)&&fr(s.value,o.value)})(r,e):r instanceof Bn?(function(s,o){return o instanceof Bn&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((l,h,f)=>l&&Qv(h,o.filters[f])),!0):!1})(r,e):void _e(19439)}function Xv(r){return r instanceof vt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Mo(t.value)}`})(r):r instanceof Bn?(function(t){return t.op.toString()+" {"+t.getFilters().map(Xv).join(" ,")+"}"})(r):"Filter"}class WA extends vt{constructor(e,t,s){super(e,t,s),this.key=ye.fromName(s.referenceValue)}matches(e){const t=ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class HA extends vt{constructor(e,t){super(e,"in",t),this.keys=Yv("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class GA extends vt{constructor(e,t){super(e,"not-in",t),this.keys=Yv("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Yv(r,e){return(e.arrayValue?.values||[]).map((t=>ye.fromName(t.referenceValue)))}class KA extends vt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Uf(t)&&ll(t.arrayValue,this.value)}}class QA extends vt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ll(this.value.arrayValue,t)}}class XA extends vt{constructor(e,t){super(e,"not-in",t)}matches(e){if(ll(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ll(this.value.arrayValue,t)}}class YA extends vt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Uf(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>ll(this.value.arrayValue,s)))}}class JA{constructor(e,t=null,s=[],o=[],l=null,h=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=h,this.endAt=f,this.Te=null}}function Uy(r,e=null,t=[],s=[],o=null,l=null,h=null){return new JA(r,e,t,s,o,l,h)}function Bf(r){const e=Ce(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>sf(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),vl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Mo(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Mo(s))).join(",")),e.Te=t}return e.Te}function zf(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!$A(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!Qv(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Fy(r.startAt,e.startAt)&&Fy(r.endAt,e.endAt)}function of(r){return ye.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}class wl{constructor(e,t=null,s=[],o=[],l=null,h="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=h,this.startAt=f,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function ZA(r,e,t,s,o,l,h,f){return new wl(r,e,t,s,o,l,h,f)}function $f(r){return new wl(r)}function By(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function Jv(r){return r.collectionGroup!==null}function Ya(r){const e=Ce(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let f=new It(Lt.comparator);return h.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(f=f.add(y.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new wc(l,s))})),t.has(Lt.keyField().canonicalString())||e.Ie.push(new wc(Lt.keyField(),s))}return e.Ie}function ur(r){const e=Ce(r);return e.Ee||(e.Ee=eC(e,Ya(r))),e.Ee}function eC(r,e){if(r.limitType==="F")return Uy(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new wc(o.field,l)}));const t=r.endAt?new vc(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new vc(r.startAt.position,r.startAt.inclusive):null;return Uy(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function af(r,e){const t=r.filters.concat([e]);return new wl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function lf(r,e,t){return new wl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Fc(r,e){return zf(ur(r),ur(e))&&r.limitType===e.limitType}function Zv(r){return`${Bf(ur(r))}|lt:${r.limitType}`}function Eo(r){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>Xv(o))).join(", ")}]`),vl(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>Mo(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>Mo(o))).join(",")),`Target(${s})`})(ur(r))}; limitType=${r.limitType})`}function Uc(r,e){return e.isFoundDocument()&&(function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):ye.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(r,e)&&(function(s,o){for(const l of Ya(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0})(r,e)&&(function(s,o){return!(s.startAt&&!(function(h,f,g){const y=jy(h,f,g);return h.inclusive?y<=0:y<0})(s.startAt,Ya(s),o)||s.endAt&&!(function(h,f,g){const y=jy(h,f,g);return h.inclusive?y>=0:y>0})(s.endAt,Ya(s),o))})(r,e)}function tC(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function ew(r){return(e,t)=>{let s=!1;for(const o of Ya(r)){const l=nC(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function nC(r,e,t){const s=r.field.isKeyField()?ye.comparator(e.key,t.key):(function(l,h,f){const g=h.data.field(l),y=f.data.field(l);return g!==null&&y!==null?Oo(g,y):_e(42886)})(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return _e(19790,{direction:r.dir})}}class ki{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Us(this.inner,((t,s)=>{for(const[o,l]of s)e(o,l)}))}isEmpty(){return bv(this.inner)}size(){return this.innerSize}}const rC=new ot(ye.comparator);function Ur(){return rC}const tw=new ot(ye.comparator);function Ha(...r){let e=tw;for(const t of r)e=e.insert(t.key,t);return e}function nw(r){let e=tw;return r.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function _i(){return Ja()}function rw(){return Ja()}function Ja(){return new ki((r=>r.toString()),((r,e)=>r.isEqual(e)))}const sC=new ot(ye.comparator),iC=new It(ye.comparator);function be(...r){let e=iC;for(const t of r)e=e.add(t);return e}const oC=new It(Le);function aC(){return oC}function qf(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gc(e)?"-0":e}}function sw(r){return{integerValue:""+r}}function lC(r,e){return MA(e)?sw(e):qf(r,e)}class Bc{constructor(){this._=void 0}}function uC(r,e,t){return r instanceof ul?(function(o,l){const h={fields:{[Uv]:{stringValue:Fv},[zv]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Ff(l)&&(l=jc(l)),l&&(h.fields[Bv]=l),{mapValue:h}})(t,e):r instanceof cl?ow(r,e):r instanceof hl?aw(r,e):(function(o,l){const h=iw(o,l),f=zy(h)+zy(o.Ae);return rf(h)&&rf(o.Ae)?sw(f):qf(o.serializer,f)})(r,e)}function cC(r,e,t){return r instanceof cl?ow(r,e):r instanceof hl?aw(r,e):t}function iw(r,e){return r instanceof Ec?(function(s){return rf(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class ul extends Bc{}class cl extends Bc{constructor(e){super(),this.elements=e}}function ow(r,e){const t=lw(e);for(const s of r.elements)t.some((o=>fr(o,s)))||t.push(s);return{arrayValue:{values:t}}}class hl extends Bc{constructor(e){super(),this.elements=e}}function aw(r,e){let t=lw(e);for(const s of r.elements)t=t.filter((o=>!fr(o,s)));return{arrayValue:{values:t}}}class Ec extends Bc{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function zy(r){return dt(r.integerValue||r.doubleValue)}function lw(r){return Uf(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class hC{constructor(e,t){this.field=e,this.transform=t}}function dC(r,e){return r.field.isEqual(e.field)&&(function(s,o){return s instanceof cl&&o instanceof cl||s instanceof hl&&o instanceof hl?Vo(s.elements,o.elements,fr):s instanceof Ec&&o instanceof Ec?fr(s.Ae,o.Ae):s instanceof ul&&o instanceof ul})(r.transform,e.transform)}class fC{constructor(e,t){this.version=e,this.transformResults=t}}class bt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new bt}static exists(e){return new bt(void 0,e)}static updateTime(e){return new bt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class zc{}function uw(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new $c(r.key,bt.none()):new El(r.key,r.data,bt.none());{const t=r.data,s=Xt.empty();let o=new It(Lt.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?s.delete(l):s.set(l,h),o=o.add(l)}return new Bs(r.key,s,new gn(o.toArray()),bt.none())}}function pC(r,e,t){r instanceof El?(function(o,l,h){const f=o.value.clone(),g=qy(o.fieldTransforms,l,h.transformResults);f.setAll(g),l.convertToFoundDocument(h.version,f).setHasCommittedMutations()})(r,e,t):r instanceof Bs?(function(o,l,h){if(!sc(o.precondition,l))return void l.convertToUnknownDocument(h.version);const f=qy(o.fieldTransforms,l,h.transformResults),g=l.data;g.setAll(cw(o)),g.setAll(f),l.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(r,e,t):(function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function Za(r,e,t,s){return r instanceof El?(function(l,h,f,g){if(!sc(l.precondition,h))return f;const y=l.value.clone(),v=Wy(l.fieldTransforms,g,h);return y.setAll(v),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null})(r,e,t,s):r instanceof Bs?(function(l,h,f,g){if(!sc(l.precondition,h))return f;const y=Wy(l.fieldTransforms,g,h),v=h.data;return v.setAll(cw(l)),v.setAll(y),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(r,e,t,s):(function(l,h,f){return sc(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):f})(r,e,t)}function mC(r,e){let t=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),l=iw(s.transform,o||null);l!=null&&(t===null&&(t=Xt.empty()),t.set(s.field,l))}return t||null}function $y(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Vo(s,o,((l,h)=>dC(l,h)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class El extends zc{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Bs extends zc{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function cw(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}})),e}function qy(r,e,t){const s=new Map;ze(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let o=0;o<t.length;o++){const l=r[o],h=l.transform,f=e.data.field(l.field);s.set(l.field,cC(h,f,t[o]))}return s}function Wy(r,e,t){const s=new Map;for(const o of r){const l=o.transform,h=t.data.field(o.field);s.set(o.field,uC(l,h,e))}return s}class $c extends zc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class hw extends zc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class gC{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&pC(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Za(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Za(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=rw();return this.mutations.forEach((o=>{const l=e.get(o.key),h=l.overlayedDocument;let f=this.applyToLocalView(h,l.mutatedFields);f=t.has(o.key)?null:f;const g=uw(h,f);g!==null&&s.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(Te.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),be())}isEqual(e){return this.batchId===e.batchId&&Vo(this.mutations,e.mutations,((t,s)=>$y(t,s)))&&Vo(this.baseMutations,e.baseMutations,((t,s)=>$y(t,s)))}}class Wf{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){ze(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return sC})();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,s[h].version);return new Wf(e,t,s,o)}}class yC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class _C{constructor(e,t){this.count=e,this.unchangedNames=t}}var _t,Be;function dw(r){switch(r){case G.OK:return _e(64938);case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0;default:return _e(15467,{code:r})}}function fw(r){if(r===void 0)return jr("GRPC error has no .code"),G.UNKNOWN;switch(r){case _t.OK:return G.OK;case _t.CANCELLED:return G.CANCELLED;case _t.UNKNOWN:return G.UNKNOWN;case _t.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case _t.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case _t.INTERNAL:return G.INTERNAL;case _t.UNAVAILABLE:return G.UNAVAILABLE;case _t.UNAUTHENTICATED:return G.UNAUTHENTICATED;case _t.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case _t.NOT_FOUND:return G.NOT_FOUND;case _t.ALREADY_EXISTS:return G.ALREADY_EXISTS;case _t.PERMISSION_DENIED:return G.PERMISSION_DENIED;case _t.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case _t.ABORTED:return G.ABORTED;case _t.OUT_OF_RANGE:return G.OUT_OF_RANGE;case _t.UNIMPLEMENTED:return G.UNIMPLEMENTED;case _t.DATA_LOSS:return G.DATA_LOSS;default:return _e(39323,{code:r})}}(Be=_t||(_t={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";function vC(){return new TextEncoder}const wC=new Ns([4294967295,4294967295],0);function Hy(r){const e=vC().encode(r),t=new Cv;return t.update(e),new Uint8Array(t.digest())}function Gy(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ns([t,s],0),new Ns([o,l],0)]}class Hf{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Ga(`Invalid padding: ${t}`);if(s<0)throw new Ga(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Ga(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Ga(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ns.fromNumber(this.ge)}ye(e,t,s){let o=e.add(t.multiply(Ns.fromNumber(s)));return o.compare(wC)===1&&(o=new Ns([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Hy(e),[s,o]=Gy(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(s,o,l);if(!this.we(h))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new Hf(l,o,t);return s.forEach((f=>h.insert(f))),h}insert(e){if(this.ge===0)return;const t=Hy(e),[s,o]=Gy(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(s,o,l);this.Se(h)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Ga extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class qc{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,Tl.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new qc(Te.min(),o,new ot(Le),Ur(),be())}}class Tl{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Tl(s,t,be(),be(),be())}}class ic{constructor(e,t,s,o){this.be=e,this.removedTargetIds=t,this.key=s,this.De=o}}class pw{constructor(e,t){this.targetId=e,this.Ce=t}}class mw{constructor(e,t,s=Ft.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class Ky{constructor(){this.ve=0,this.Fe=Qy(),this.Me=Ft.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=be(),t=be(),s=be();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:_e(38017,{changeType:l})}})),new Tl(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=Qy()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ze(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class EC{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ur(),this.Je=Ku(),this.He=Ku(),this.Ye=new ot(Le)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:_e(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,s=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(of(l))if(s===0){const h=new ye(l.path);this.et(t,h,Nt.newNoDocument(h,Te.min()))}else ze(s===1,20013,{expectedCount:s});else{const h=this._t(t);if(h!==s){const f=this.ut(e),g=f?this.ct(f,e,h):1;if(g!==0){this.it(t);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let h,f;try{h=Ms(s).toUint8Array()}catch(g){if(g instanceof jv)return Do("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{f=new Hf(h,o,l)}catch(g){return Do(g instanceof Ga?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return f.ge===0?null:f}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let o=0;return s.forEach((l=>{const h=this.Ge.ht(),f=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,h)=>{const f=this.ot(h);if(f){if(l.current&&of(f.target)){const g=new ye(f.target.path);this.It(g).has(h)||this.Et(h,g)||this.et(h,g,Nt.newNoDocument(g,e))}l.Be&&(t.set(h,l.ke()),l.qe())}}));let s=be();this.He.forEach(((l,h)=>{let f=!0;h.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(s=s.add(l))})),this.je.forEach(((l,h)=>h.setReadTime(e)));const o=new qc(e,t,this.Ye,this.je,s);return this.je=Ur(),this.Je=Ku(),this.He=Ku(),this.Ye=new ot(Le),o}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Ky,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new It(Le),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new It(Le),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ue("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Ky),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Ku(){return new ot(ye.comparator)}function Qy(){return new ot(ye.comparator)}const TC={asc:"ASCENDING",desc:"DESCENDING"},IC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},SC={and:"AND",or:"OR"};class AC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function uf(r,e){return r.useProto3Json||vl(e)?e:{value:e}}function Tc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function gw(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function CC(r,e){return Tc(r,e.toTimestamp())}function yn(r){return ze(!!r,49232),Te.fromTimestamp((function(t){const s=Os(t);return new tt(s.seconds,s.nanos)})(r))}function Gf(r,e){return cf(r,e).canonicalString()}function cf(r,e){const t=(function(o){return new Qe(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function yw(r){const e=Qe.fromString(r);return ze(Iw(e),10190,{key:e.toString()}),e}function Ic(r,e){return Gf(r.databaseId,e.path)}function el(r,e){const t=yw(e);if(t.get(1)!==r.databaseId.projectId)throw new oe(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new oe(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new ye(vw(t))}function _w(r,e){return Gf(r.databaseId,e)}function RC(r){const e=yw(r);return e.length===4?Qe.emptyPath():vw(e)}function hf(r){return new Qe(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function vw(r){return ze(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Xy(r,e,t){return{name:Ic(r,e),fields:t.value.mapValue.fields}}function PC(r,e){return"found"in e?(function(s,o){ze(!!o.found,43571),o.found.name,o.found.updateTime;const l=el(s,o.found.name),h=yn(o.found.updateTime),f=o.found.createTime?yn(o.found.createTime):Te.min(),g=new Xt({mapValue:{fields:o.found.fields}});return Nt.newFoundDocument(l,h,f,g)})(r,e):"missing"in e?(function(s,o){ze(!!o.missing,3894),ze(!!o.readTime,22933);const l=el(s,o.missing),h=yn(o.readTime);return Nt.newNoDocument(l,h)})(r,e):_e(7234,{result:e})}function kC(r,e){let t;if("targetChange"in e){e.targetChange;const s=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:_e(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(y,v){return y.useProto3Json?(ze(v===void 0||typeof v=="string",58123),Ft.fromBase64String(v||"")):(ze(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Ft.fromUint8Array(v||new Uint8Array))})(r,e.targetChange.resumeToken),h=e.targetChange.cause,f=h&&(function(y){const v=y.code===void 0?G.UNKNOWN:fw(y.code);return new oe(v,y.message||"")})(h);t=new mw(s,o,l,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=el(r,s.document.name),l=yn(s.document.updateTime),h=s.document.createTime?yn(s.document.createTime):Te.min(),f=new Xt({mapValue:{fields:s.document.fields}}),g=Nt.newFoundDocument(o,l,h,f),y=s.targetIds||[],v=s.removedTargetIds||[];t=new ic(y,v,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=el(r,s.document),l=s.readTime?yn(s.readTime):Te.min(),h=Nt.newNoDocument(o,l),f=s.removedTargetIds||[];t=new ic([],f,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=el(r,s.document),l=s.removedTargetIds||[];t=new ic([],l,o,null)}else{if(!("filter"in e))return _e(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,h=new _C(o,l),f=s.targetId;t=new pw(f,h)}}return t}function ww(r,e){let t;if(e instanceof El)t={update:Xy(r,e.key,e.value)};else if(e instanceof $c)t={delete:Ic(r,e.key)};else if(e instanceof Bs)t={update:Xy(r,e.key,e.data),updateMask:jC(e.fieldMask)};else{if(!(e instanceof hw))return _e(16599,{Vt:e.type});t={verify:Ic(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,h){const f=h.transform;if(f instanceof ul)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof cl)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof hl)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Ec)return{fieldPath:h.field.canonicalString(),increment:f.Ae};throw _e(20930,{transform:h.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:CC(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:_e(27497)})(r,e.precondition)),t}function NC(r,e){return r&&r.length>0?(ze(e!==void 0,14353),r.map((t=>(function(o,l){let h=o.updateTime?yn(o.updateTime):yn(l);return h.isEqual(Te.min())&&(h=yn(l)),new fC(h,o.transformResults||[])})(t,e)))):[]}function xC(r,e){return{documents:[_w(r,e.path)]}}function DC(r,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=_w(r,o);const l=(function(y){if(y.length!==0)return Tw(Bn.create(y,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const h=(function(y){if(y.length!==0)return y.map((v=>(function(S){return{field:To(S.field),direction:MC(S.dir)}})(v)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const f=uf(r,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:o}}function VC(r){let e=RC(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){ze(s===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(E){const S=Ew(E);return S instanceof Bn&&Kv(S)?S.getFilters():[S]})(t.where));let h=[];t.orderBy&&(h=(function(E){return E.map((S=>(function(H){return new wc(Io(H.field),(function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(H.direction))})(S)))})(t.orderBy));let f=null;t.limit&&(f=(function(E){let S;return S=typeof E=="object"?E.value:E,vl(S)?null:S})(t.limit));let g=null;t.startAt&&(g=(function(E){const S=!!E.before,M=E.values||[];return new vc(M,S)})(t.startAt));let y=null;return t.endAt&&(y=(function(E){const S=!E.before,M=E.values||[];return new vc(M,S)})(t.endAt)),ZA(e,o,h,l,f,"F",g,y)}function OC(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Ew(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Io(t.unaryFilter.field);return vt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Io(t.unaryFilter.field);return vt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Io(t.unaryFilter.field);return vt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Io(t.unaryFilter.field);return vt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _e(61313);default:return _e(60726)}})(r):r.fieldFilter!==void 0?(function(t){return vt.create(Io(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _e(58110);default:return _e(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return Bn.create(t.compositeFilter.filters.map((s=>Ew(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return _e(1026)}})(t.compositeFilter.op))})(r):_e(30097,{filter:r})}function MC(r){return TC[r]}function LC(r){return IC[r]}function bC(r){return SC[r]}function To(r){return{fieldPath:r.canonicalString()}}function Io(r){return Lt.fromServerFormat(r.fieldPath)}function Tw(r){return r instanceof vt?(function(t){if(t.op==="=="){if(by(t.value))return{unaryFilter:{field:To(t.field),op:"IS_NAN"}};if(Ly(t.value))return{unaryFilter:{field:To(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(by(t.value))return{unaryFilter:{field:To(t.field),op:"IS_NOT_NAN"}};if(Ly(t.value))return{unaryFilter:{field:To(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:To(t.field),op:LC(t.op),value:t.value}}})(r):r instanceof Bn?(function(t){const s=t.getFilters().map((o=>Tw(o)));return s.length===1?s[0]:{compositeFilter:{op:bC(t.op),filters:s}}})(r):_e(54877,{filter:r})}function jC(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Iw(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}class Ss{constructor(e,t,s,o,l=Te.min(),h=Te.min(),f=Ft.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new Ss(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ss(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class FC{constructor(e){this.yt=e}}function UC(r){const e=VC({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?lf(e,e.limit,"L"):e}class BC{constructor(){this.Cn=new zC}addToCollectionParentIndex(e,t){return this.Cn.add(t),Q.resolve()}getCollectionParents(e,t){return Q.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Q.resolve()}deleteFieldIndex(e,t){return Q.resolve()}deleteAllFieldIndexes(e){return Q.resolve()}createTargetIndexes(e,t){return Q.resolve()}getDocumentsMatchingTarget(e,t){return Q.resolve(null)}getIndexType(e,t){return Q.resolve(0)}getFieldIndexes(e,t){return Q.resolve([])}getNextCollectionGroupToUpdate(e){return Q.resolve(null)}getMinOffset(e,t){return Q.resolve(Vs.min())}getMinOffsetFromCollectionGroup(e,t){return Q.resolve(Vs.min())}updateCollectionGroup(e,t,s){return Q.resolve()}updateIndexEntries(e,t){return Q.resolve()}}class zC{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new It(Qe.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new It(Qe.comparator)).toArray()}}const Yy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Sw=41943040;class rn{static withCacheSize(e){return new rn(e,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}rn.DEFAULT_COLLECTION_PERCENTILE=10,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rn.DEFAULT=new rn(Sw,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rn.DISABLED=new rn(-1,0,0);class Lo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Lo(0)}static cr(){return new Lo(-1)}}const Jy="LruGarbageCollector",$C=1048576;function Zy([r,e],[t,s]){const o=Le(r,t);return o===0?Le(e,s):o}class qC{constructor(e){this.Ir=e,this.buffer=new It(Zy),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Zy(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class WC{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ue(Jy,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Wo(t)?ue(Jy,"Ignoring IndexedDB error during garbage collection: ",t):await qo(t)}await this.Vr(3e5)}))}}class HC{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return Q.resolve(bc.ce);const s=new qC(t);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),Q.resolve(Yy)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Yy):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,o,l,h,f,g,y;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,h=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(s=E,f=Date.now(),this.removeTargets(e,s,t)))).next((E=>(l=E,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((E=>(y=Date.now(),wo()<=Me.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-v}ms
	Determined least recently used ${o} in `+(f-h)+`ms
	Removed ${l} targets in `+(g-f)+`ms
	Removed ${E} documents in `+(y-g)+`ms
Total Duration: ${y-v}ms`),Q.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:E}))))}}function GC(r,e){return new HC(r,e)}class KC{constructor(){this.changes=new ki((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Nt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?Q.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class QC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class XC{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&Za(s.mutation,o,gn.empty(),tt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,be()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=be()){const o=_i();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((l=>{let h=Ha();return l.forEach(((f,g)=>{h=h.insert(f,g.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const s=_i();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,be())))}populateOverlays(e,t,s){const o=[];return s.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((h,f)=>{t.set(h,f)}))}))}computeViews(e,t,s,o){let l=Ur();const h=Ja(),f=(function(){return Ja()})();return t.forEach(((g,y)=>{const v=s.get(y.key);o.has(y.key)&&(v===void 0||v.mutation instanceof Bs)?l=l.insert(y.key,y):v!==void 0?(h.set(y.key,v.mutation.getFieldMask()),Za(v.mutation,y,v.mutation.getFieldMask(),tt.now())):h.set(y.key,gn.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((y,v)=>h.set(y,v))),t.forEach(((y,v)=>f.set(y,new QC(v,h.get(y)??null)))),f)))}recalculateAndSaveOverlays(e,t){const s=Ja();let o=new ot(((h,f)=>h-f)),l=be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const f of h)f.keys().forEach((g=>{const y=t.get(g);if(y===null)return;let v=s.get(g)||gn.empty();v=f.applyToLocalView(y,v),s.set(g,v);const E=(o.get(f.batchId)||be()).add(g);o=o.insert(f.batchId,E)}))})).next((()=>{const h=[],f=o.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),y=g.key,v=g.value,E=rw();v.forEach((S=>{if(!l.has(S)){const M=uw(t.get(S),s.get(S));M!==null&&E.set(S,M),l=l.add(S)}})),h.push(this.documentOverlayCache.saveOverlays(e,y,E))}return Q.waitFor(h)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return(function(h){return ye.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Jv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):Q.resolve(_i());let f=il,g=l;return h.next((y=>Q.forEach(y,((v,E)=>(f<E.largestBatchId&&(f=E.largestBatchId),l.get(v)?Q.resolve():this.remoteDocumentCache.getEntry(e,v).next((S=>{g=g.insert(v,S)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,g,y,be()))).next((v=>({batchId:f,changes:nw(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ye(t)).next((s=>{let o=Ha();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let h=Ha();return this.indexManager.getCollectionParents(e,l).next((f=>Q.forEach(f,(g=>{const y=(function(E,S){return new wl(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,s,o).next((v=>{v.forEach(((E,S)=>{h=h.insert(E,S)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o)))).next((h=>{l.forEach(((g,y)=>{const v=y.getKey();h.get(v)===null&&(h=h.insert(v,Nt.newInvalidDocument(v)))}));let f=Ha();return h.forEach(((g,y)=>{const v=l.get(g);v!==void 0&&Za(v.mutation,y,gn.empty(),tt.now()),Uc(t,y)&&(f=f.insert(g,y))})),f}))}}class YC{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Q.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:yn(o.createTime)}})(t)),Q.resolve()}getNamedQuery(e,t){return Q.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:UC(o.bundledQuery),readTime:yn(o.readTime)}})(t)),Q.resolve()}}class JC{constructor(){this.overlays=new ot(ye.comparator),this.qr=new Map}getOverlay(e,t){return Q.resolve(this.overlays.get(t))}getOverlays(e,t){const s=_i();return Q.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&s.set(o,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,l)=>{this.St(e,t,l)})),Q.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),Q.resolve()}getOverlaysForCollection(e,t,s){const o=_i(),l=t.length+1,h=new ye(t.child("")),f=this.overlays.getIteratorFrom(h);for(;f.hasNext();){const g=f.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&g.largestBatchId>s&&o.set(g.getKey(),g)}return Q.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new ot(((y,v)=>y-v));const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>s){let v=l.get(y.largestBatchId);v===null&&(v=_i(),l=l.insert(y.largestBatchId,v)),v.set(y.getKey(),y)}}const f=_i(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,v)=>f.set(y,v))),!(f.size()>=o)););return Q.resolve(f)}St(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new yC(t,s));let l=this.qr.get(t);l===void 0&&(l=be(),this.qr.set(t,l)),this.qr.set(t,l.add(s.key))}}class ZC{constructor(){this.sessionToken=Ft.EMPTY_BYTE_STRING}getSessionToken(e){return Q.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Q.resolve()}}class Kf{constructor(){this.Qr=new It(kt.$r),this.Ur=new It(kt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new kt(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new kt(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new ye(new Qe([])),s=new kt(t,e),o=new kt(t,e+1),l=[];return this.Ur.forEachInRange([s,o],(h=>{this.Gr(h),l.push(h.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ye(new Qe([])),s=new kt(t,e),o=new kt(t,e+1);let l=be();return this.Ur.forEachInRange([s,o],(h=>{l=l.add(h.key)})),l}containsKey(e){const t=new kt(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class kt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ye.comparator(e.key,t.key)||Le(e.Yr,t.Yr)}static Kr(e,t){return Le(e.Yr,t.Yr)||ye.comparator(e.key,t.key)}}class eR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new It(kt.$r)}checkEmpty(e){return Q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new gC(l,t,s,o);this.mutationQueue.push(h);for(const f of o)this.Zr=this.Zr.add(new kt(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return Q.resolve(h)}lookupMutationBatch(e,t){return Q.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.ei(s),l=o<0?0:o;return Q.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(this.mutationQueue.length===0?jf:this.tr-1)}getAllMutationBatches(e){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new kt(t,0),o=new kt(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,o],(h=>{const f=this.Xr(h.Yr);l.push(f)})),Q.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new It(Le);return t.forEach((o=>{const l=new kt(o,0),h=new kt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,h],(f=>{s=s.add(f.Yr)}))})),Q.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;ye.isDocumentKey(l)||(l=l.child(""));const h=new kt(new ye(l),0);let f=new It(Le);return this.Zr.forEachWhile((g=>{const y=g.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(f=f.add(g.Yr)),!0)}),h),Q.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){ze(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return Q.forEach(t.mutations,(o=>{const l=new kt(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new kt(t,0),o=this.Zr.firstAfterOrEqual(s);return Q.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,Q.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class tR{constructor(e){this.ri=e,this.docs=(function(){return new ot(ye.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,h=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return Q.resolve(s?s.document.mutableCopy():Nt.newInvalidDocument(t))}getEntries(e,t){let s=Ur();return t.forEach((o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():Nt.newInvalidDocument(o))})),Q.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=Ur();const h=t.path,f=new ye(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:y,value:{document:v}}=g.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||xA(NA(v),s)<=0||(o.has(v.key)||Uc(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return Q.resolve(l)}getAllFromCollectionGroup(e,t,s,o){_e(9500)}ii(e,t){return Q.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new nR(this)}getSize(e){return Q.resolve(this.size)}}class nR extends KC{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),Q.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class rR{constructor(e){this.persistence=e,this.si=new ki((t=>Bf(t)),zf),this.lastRemoteSnapshotVersion=Te.min(),this.highestTargetId=0,this.oi=0,this._i=new Kf,this.targetCount=0,this.ai=Lo.ur()}forEachTarget(e,t){return this.si.forEach(((s,o)=>t(o))),Q.resolve()}getLastRemoteSnapshotVersion(e){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Q.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),Q.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Lo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Q.resolve()}updateTargetData(e,t){return this.Pr(t),Q.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Q.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.si.forEach(((h,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.si.delete(h),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)})),Q.waitFor(l).next((()=>o))}getTargetCount(e){return Q.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return Q.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),Q.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((h=>{l.push(o.markPotentiallyOrphaned(e,h))})),Q.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Q.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return Q.resolve(s)}containsKey(e,t){return Q.resolve(this._i.containsKey(t))}}class Aw{constructor(e,t){this.ui={},this.overlays={},this.ci=new bc(0),this.li=!1,this.li=!0,this.hi=new ZC,this.referenceDelegate=e(this),this.Pi=new rR(this),this.indexManager=new BC,this.remoteDocumentCache=(function(o){return new tR(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new FC(t),this.Ii=new YC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new JC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new eR(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){ue("MemoryPersistence","Starting transaction:",e);const o=new sR(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ai(e,t){return Q.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class sR extends VA{constructor(e){super(),this.currentSequenceNumber=e}}class Qf{constructor(e){this.persistence=e,this.Ri=new Kf,this.Vi=null}static mi(e){return new Qf(e)}get fi(){if(this.Vi)return this.Vi;throw _e(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),Q.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),Q.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Q.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.fi,(s=>{const o=ye.fromPath(s);return this.gi(e,o).next((l=>{l||t.removeEntry(o,Te.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return Q.or([()=>Q.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Sc{constructor(e,t){this.persistence=e,this.pi=new ki((s=>LA(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=GC(this,t)}static mi(e,t){return new Sc(e,t)}Ei(){}di(e){return Q.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return Q.forEach(this.pi,((s,o)=>this.br(e,s,o).next((l=>l?Q.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,(h=>this.br(e,h,t).next((f=>{f||(s++,l.removeEntry(h,Te.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Q.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),Q.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),Q.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Q.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=nc(e.data.value)),t}br(e,t,s){return Q.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return Q.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Xf{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=o}static As(e,t){let s=be(),o=be();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Xf(e,t.fromCache,s,o)}}class iR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class oR{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return ZT()?8:OA(Gt())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.ys(e,t).next((h=>{l.result=h})).next((()=>{if(!l.result)return this.ws(e,t,o,s).next((h=>{l.result=h}))})).next((()=>{if(l.result)return;const h=new iR;return this.Ss(e,t,h).next((f=>{if(l.result=f,this.Vs)return this.bs(e,t,h,f.size)}))})).next((()=>l.result))}bs(e,t,s,o){return s.documentReadCount<this.fs?(wo()<=Me.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",Eo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Q.resolve()):(wo()<=Me.DEBUG&&ue("QueryEngine","Query:",Eo(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(wo()<=Me.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",Eo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ur(t))):Q.resolve())}ys(e,t){if(By(t))return Q.resolve(null);let s=ur(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=lf(t,null,"F"),s=ur(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const h=be(...l);return this.ps.getDocuments(e,h).next((f=>this.indexManager.getMinOffset(e,s).next((g=>{const y=this.Ds(t,f);return this.Cs(t,y,h,g.readTime)?this.ys(e,lf(t,null,"F")):this.vs(e,y,t,g)}))))})))))}ws(e,t,s,o){return By(t)||o.isEqual(Te.min())?Q.resolve(null):this.ps.getDocuments(e,s).next((l=>{const h=this.Ds(t,l);return this.Cs(t,h,s,o)?Q.resolve(null):(wo()<=Me.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Eo(t)),this.vs(e,h,t,kA(o,il)).next((f=>f)))}))}Ds(e,t){let s=new It(ew(e));return t.forEach(((o,l)=>{Uc(e,l)&&(s=s.add(l))})),s}Cs(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,s){return wo()<=Me.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",Eo(t)),this.ps.getDocumentsMatchingQuery(e,t,Vs.min(),s)}vs(e,t,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((l=>(t.forEach((h=>{l=l.insert(h.key,h)})),l)))}}const Yf="LocalStore",aR=3e8;class lR{constructor(e,t,s,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new ot(Le),this.xs=new ki((l=>Bf(l)),zf),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new XC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function uR(r,e,t,s){return new lR(r,e,t,s)}async function Cw(r,e){const t=Ce(r);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((l=>(o=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const h=[],f=[];let g=be();for(const y of o){h.push(y.batchId);for(const v of y.mutations)g=g.add(v.key)}for(const y of l){f.push(y.batchId);for(const v of y.mutations)g=g.add(v.key)}return t.localDocuments.getDocuments(s,g).next((y=>({Ls:y,removedBatchIds:h,addedBatchIds:f})))}))}))}function cR(r,e){const t=Ce(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,g,y,v){const E=y.batch,S=E.keys();let M=Q.resolve();return S.forEach((H=>{M=M.next((()=>v.getEntry(g,H))).next(($=>{const j=y.docVersions.get(H);ze(j!==null,48541),$.version.compareTo(j)<0&&(E.applyToRemoteDocument($,y),$.isValidDocument()&&($.setReadTime(y.commitVersion),v.addEntry($)))}))})),M.next((()=>f.mutationQueue.removeMutationBatch(g,E)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(f){let g=be();for(let y=0;y<f.mutationResults.length;++y)f.mutationResults[y].transformResults.length>0&&(g=g.add(f.batch.mutations[y].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function Rw(r){const e=Ce(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function hR(r,e){const t=Ce(r),s=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const h=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const f=[];e.targetChanges.forEach(((v,E)=>{const S=o.get(E);if(!S)return;f.push(t.Pi.removeMatchingKeys(l,v.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(l,v.addedDocuments,E))));let M=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?M=M.withResumeToken(Ft.EMPTY_BYTE_STRING,Te.min()).withLastLimboFreeSnapshotVersion(Te.min()):v.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(v.resumeToken,s)),o=o.insert(E,M),(function($,j,K){return $.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=aR?!0:K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0})(S,M,v)&&f.push(t.Pi.updateTargetData(l,M))}));let g=Ur(),y=be();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),f.push(dR(l,h,e.documentUpdates).next((v=>{g=v.ks,y=v.qs}))),!s.isEqual(Te.min())){const v=t.Pi.getLastRemoteSnapshotVersion(l).next((E=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));f.push(v)}return Q.waitFor(f).next((()=>h.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,y))).next((()=>g))})).then((l=>(t.Ms=o,l)))}function dR(r,e,t){let s=be(),o=be();return t.forEach((l=>s=s.add(l))),e.getEntries(r,s).next((l=>{let h=Ur();return t.forEach(((f,g)=>{const y=l.get(f);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(f)),g.isNoDocument()&&g.version.isEqual(Te.min())?(e.removeEntry(f,g.readTime),h=h.insert(f,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),h=h.insert(f,g)):ue(Yf,"Ignoring outdated watch update for ",f,". Current version:",y.version," Watch version:",g.version)})),{ks:h,qs:o}}))}function fR(r,e){const t=Ce(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=jf),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function pR(r,e){const t=Ce(r);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.Pi.getTargetData(s,e).next((l=>l?(o=l,Q.resolve(o)):t.Pi.allocateTargetId(s).next((h=>(o=new Ss(e,h,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function df(r,e,t){const s=Ce(r),o=s.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(h=>s.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!Wo(h))throw h;ue(Yf,`Failed to update sequence numbers for target ${e}: ${h}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function e_(r,e,t){const s=Ce(r);let o=Te.min(),l=be();return s.persistence.runTransaction("Execute query","readwrite",(h=>(function(g,y,v){const E=Ce(g),S=E.xs.get(v);return S!==void 0?Q.resolve(E.Ms.get(S)):E.Pi.getTargetData(y,v)})(s,h,ur(e)).next((f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(h,f.targetId).next((g=>{l=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(h,e,t?o:Te.min(),t?l:be()))).next((f=>(mR(s,tC(e),f),{documents:f,Qs:l})))))}function mR(r,e,t){let s=r.Os.get(e)||Te.min();t.forEach(((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),r.Os.set(e,s)}class t_{constructor(){this.activeTargetIds=aC()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class gR{constructor(){this.Mo=new t_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new t_,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class yR{Oo(e){}shutdown(){}}const n_="ConnectivityMonitor";class r_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ue(n_,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ue(n_,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Qu=null;function ff(){return Qu===null?Qu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Qu++,"0x"+Qu.toString(16)}const Ld="RestConnection",_R={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class vR{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===yc?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,t,s,o,l){const h=ff(),f=this.zo(e,t.toUriEncodedString());ue(Ld,`Sending RPC '${e}' ${h}:`,f,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,l);const{host:y}=new URL(f),v=Uo(y);return this.Jo(e,f,g,s,v).then((E=>(ue(Ld,`Received RPC '${e}' ${h}: `,E),E)),(E=>{throw Do(Ld,`RPC '${e}' ${h} failed with error: `,E,"url: ",f,"request:",s),E}))}Ho(e,t,s,o,l,h){return this.Go(e,t,s,o,l)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+$o})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),s&&s.headers.forEach(((o,l)=>e[l]=o))}zo(e,t){const s=_R[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}class wR{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Wt="WebChannelConnection";class ER extends vR{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,o,l){const h=ff();return new Promise(((f,g)=>{const y=new Rv;y.setWithCredentials(!0),y.listenOnce(Pv.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case tc.NO_ERROR:const E=y.getResponseJson();ue(Wt,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(E)),f(E);break;case tc.TIMEOUT:ue(Wt,`RPC '${e}' ${h} timed out`),g(new oe(G.DEADLINE_EXCEEDED,"Request time out"));break;case tc.HTTP_ERROR:const S=y.getStatus();if(ue(Wt,`RPC '${e}' ${h} failed with status:`,S,"response text:",y.getResponseText()),S>0){let M=y.getResponseJson();Array.isArray(M)&&(M=M[0]);const H=M?.error;if(H&&H.status&&H.message){const $=(function(K){const se=K.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(se)>=0?se:G.UNKNOWN})(H.status);g(new oe($,H.message))}else g(new oe(G.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new oe(G.UNAVAILABLE,"Connection failed."));break;default:_e(9055,{l_:e,streamId:h,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{ue(Wt,`RPC '${e}' ${h} completed.`)}}));const v=JSON.stringify(o);ue(Wt,`RPC '${e}' ${h} sending request:`,o),y.send(t,"POST",v,s,15)}))}T_(e,t,s){const o=ff(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=xv(),f=Nv(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const v=l.join("");ue(Wt,`Creating RPC '${e}' stream ${o}: ${v}`,g);const E=h.createWebChannel(v,g);this.I_(E);let S=!1,M=!1;const H=new wR({Yo:j=>{M?ue(Wt,`Not sending because RPC '${e}' stream ${o} is closed:`,j):(S||(ue(Wt,`Opening RPC '${e}' stream ${o} transport.`),E.open(),S=!0),ue(Wt,`RPC '${e}' stream ${o} sending:`,j),E.send(j))},Zo:()=>E.close()}),$=(j,K,se)=>{j.listen(K,(q=>{try{se(q)}catch(W){setTimeout((()=>{throw W}),0)}}))};return $(E,Wa.EventType.OPEN,(()=>{M||(ue(Wt,`RPC '${e}' stream ${o} transport opened.`),H.o_())})),$(E,Wa.EventType.CLOSE,(()=>{M||(M=!0,ue(Wt,`RPC '${e}' stream ${o} transport closed`),H.a_(),this.E_(E))})),$(E,Wa.EventType.ERROR,(j=>{M||(M=!0,Do(Wt,`RPC '${e}' stream ${o} transport errored. Name:`,j.name,"Message:",j.message),H.a_(new oe(G.UNAVAILABLE,"The operation could not be completed")))})),$(E,Wa.EventType.MESSAGE,(j=>{if(!M){const K=j.data[0];ze(!!K,16349);const se=K,q=se?.error||se[0]?.error;if(q){ue(Wt,`RPC '${e}' stream ${o} received error:`,q);const W=q.status;let te=(function(I){const P=_t[I];if(P!==void 0)return fw(P)})(W),ee=q.message;te===void 0&&(te=G.INTERNAL,ee="Unknown error status: "+W+" with message "+q.message),M=!0,H.a_(new oe(te,ee)),E.close()}else ue(Wt,`RPC '${e}' stream ${o} received:`,K),H.u_(K)}})),$(f,kv.STAT_EVENT,(j=>{j.stat===ef.PROXY?ue(Wt,`RPC '${e}' stream ${o} detected buffering proxy`):j.stat===ef.NOPROXY&&ue(Wt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{H.__()}),0),H}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function bd(){return typeof document<"u"?document:null}function Wc(r){return new AC(r,!0)}class Jf{constructor(e,t,s=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-s);o>0&&ue("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const s_="PersistentStream";class Pw{constructor(e,t,s,o,l,h,f,g){this.Mi=e,this.S_=s,this.b_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Jf(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===G.RESOURCE_EXHAUSTED?(jr(t.toString()),jr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===t&&this.G_(s,o)}),(s=>{e((()=>{const o=new oe(G.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ue(s_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ue(s_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class TR extends Pw{constructor(e,t,s,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,h),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=kC(this.serializer,e),s=(function(l){if(!("targetChange"in l))return Te.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Te.min():h.readTime?yn(h.readTime):Te.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=hf(this.serializer),t.addTarget=(function(l,h){let f;const g=h.target;if(f=of(g)?{documents:xC(l,g)}:{query:DC(l,g).ft},f.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){f.resumeToken=gw(l,h.resumeToken);const y=uf(l,h.expectedCount);y!==null&&(f.expectedCount=y)}else if(h.snapshotVersion.compareTo(Te.min())>0){f.readTime=Tc(l,h.snapshotVersion.toTimestamp());const y=uf(l,h.expectedCount);y!==null&&(f.expectedCount=y)}return f})(this.serializer,e);const s=OC(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=hf(this.serializer),t.removeTarget=e,this.q_(t)}}class IR extends Pw{constructor(e,t,s,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,h),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ze(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ze(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ze(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=NC(e.writeResults,e.commitTime),s=yn(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=hf(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>ww(this.serializer,s)))};this.q_(t)}}class SR{}class AR extends SR{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new oe(G.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Go(e,cf(t,s),o,l,h))).catch((l=>{throw l.name==="FirebaseError"?(l.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new oe(G.UNKNOWN,l.toString())}))}Ho(e,t,s,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,f])=>this.connection.Ho(e,cf(t,s),o,h,f,l))).catch((h=>{throw h.name==="FirebaseError"?(h.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new oe(G.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class CR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(jr(t),this.aa=!1):ue("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Si="RemoteStore";class RR{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((h=>{s.enqueueAndForget((async()=>{Ni(this)&&(ue(Si,"Restarting streams for network reachability change."),await(async function(g){const y=Ce(g);y.Ea.add(4),await Il(y),y.Ra.set("Unknown"),y.Ea.delete(4),await Hc(y)})(this))}))})),this.Ra=new CR(s,o)}}async function Hc(r){if(Ni(r))for(const e of r.da)await e(!0)}async function Il(r){for(const e of r.da)await e(!1)}function kw(r,e){const t=Ce(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),np(t)?tp(t):Ho(t).O_()&&ep(t,e))}function Zf(r,e){const t=Ce(r),s=Ho(t);t.Ia.delete(e),s.O_()&&Nw(t,e),t.Ia.size===0&&(s.O_()?s.L_():Ni(t)&&t.Ra.set("Unknown"))}function ep(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Te.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ho(r).Y_(e)}function Nw(r,e){r.Va.Ue(e),Ho(r).Z_(e)}function tp(r){r.Va=new EC({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Ho(r).start(),r.Ra.ua()}function np(r){return Ni(r)&&!Ho(r).x_()&&r.Ia.size>0}function Ni(r){return Ce(r).Ea.size===0}function xw(r){r.Va=void 0}async function PR(r){r.Ra.set("Online")}async function kR(r){r.Ia.forEach(((e,t)=>{ep(r,e)}))}async function NR(r,e){xw(r),np(r)?(r.Ra.ha(e),tp(r)):r.Ra.set("Unknown")}async function xR(r,e,t){if(r.Ra.set("Online"),e instanceof mw&&e.state===2&&e.cause)try{await(async function(o,l){const h=l.cause;for(const f of l.targetIds)o.Ia.has(f)&&(await o.remoteSyncer.rejectListen(f,h),o.Ia.delete(f),o.Va.removeTarget(f))})(r,e)}catch(s){ue(Si,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Ac(r,s)}else if(e instanceof ic?r.Va.Ze(e):e instanceof pw?r.Va.st(e):r.Va.tt(e),!t.isEqual(Te.min()))try{const s=await Rw(r.localStore);t.compareTo(s)>=0&&await(function(l,h){const f=l.Va.Tt(h);return f.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const v=l.Ia.get(y);v&&l.Ia.set(y,v.withResumeToken(g.resumeToken,h))}})),f.targetMismatches.forEach(((g,y)=>{const v=l.Ia.get(g);if(!v)return;l.Ia.set(g,v.withResumeToken(Ft.EMPTY_BYTE_STRING,v.snapshotVersion)),Nw(l,g);const E=new Ss(v.target,g,y,v.sequenceNumber);ep(l,E)})),l.remoteSyncer.applyRemoteEvent(f)})(r,t)}catch(s){ue(Si,"Failed to raise snapshot:",s),await Ac(r,s)}}async function Ac(r,e,t){if(!Wo(e))throw e;r.Ea.add(1),await Il(r),r.Ra.set("Offline"),t||(t=()=>Rw(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ue(Si,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Hc(r)}))}function Dw(r,e){return e().catch((t=>Ac(r,t,e)))}async function Gc(r){const e=Ce(r),t=bs(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:jf;for(;DR(e);)try{const o=await fR(e.localStore,s);if(o===null){e.Ta.length===0&&t.L_();break}s=o.batchId,VR(e,o)}catch(o){await Ac(e,o)}Vw(e)&&Ow(e)}function DR(r){return Ni(r)&&r.Ta.length<10}function VR(r,e){r.Ta.push(e);const t=bs(r);t.O_()&&t.X_&&t.ea(e.mutations)}function Vw(r){return Ni(r)&&!bs(r).x_()&&r.Ta.length>0}function Ow(r){bs(r).start()}async function OR(r){bs(r).ra()}async function MR(r){const e=bs(r);for(const t of r.Ta)e.ea(t.mutations)}async function LR(r,e,t){const s=r.Ta.shift(),o=Wf.from(s,e,t);await Dw(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Gc(r)}async function bR(r,e){e&&bs(r).X_&&await(async function(s,o){if((function(h){return dw(h)&&h!==G.ABORTED})(o.code)){const l=s.Ta.shift();bs(s).B_(),await Dw(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o))),await Gc(s)}})(r,e),Vw(r)&&Ow(r)}async function i_(r,e){const t=Ce(r);t.asyncQueue.verifyOperationInProgress(),ue(Si,"RemoteStore received new credentials");const s=Ni(t);t.Ea.add(3),await Il(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Hc(t)}async function jR(r,e){const t=Ce(r);e?(t.Ea.delete(2),await Hc(t)):e||(t.Ea.add(2),await Il(t),t.Ra.set("Unknown"))}function Ho(r){return r.ma||(r.ma=(function(t,s,o){const l=Ce(t);return l.sa(),new TR(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Xo:PR.bind(null,r),t_:kR.bind(null,r),r_:NR.bind(null,r),H_:xR.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),np(r)?tp(r):r.Ra.set("Unknown")):(await r.ma.stop(),xw(r))}))),r.ma}function bs(r){return r.fa||(r.fa=(function(t,s,o){const l=Ce(t);return l.sa(),new IR(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:OR.bind(null,r),r_:bR.bind(null,r),ta:MR.bind(null,r),na:LR.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await Gc(r)):(await r.fa.stop(),r.Ta.length>0&&(ue(Si,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class rp{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new lr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const h=Date.now()+s,f=new rp(e,t,h,o,l);return f.start(s),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new oe(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sp(r,e){if(jr("AsyncQueue",`${e}: ${r}`),Wo(r))return new oe(G.UNAVAILABLE,`${e}: ${r}`);throw r}class Po{static emptySet(e){return new Po(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||ye.comparator(t.key,s.key):(t,s)=>ye.comparator(t.key,s.key),this.keyedMap=Ha(),this.sortedSet=new ot(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Po)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Po;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class o_{constructor(){this.ga=new ot(ye.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):_e(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class bo{constructor(e,t,s,o,l,h,f,g,y){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,t,s,o,l){const h=[];return t.forEach((f=>{h.push({type:0,doc:f})})),new bo(e,t,Po.emptySet(t),h,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}class FR{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class UR{constructor(){this.queries=a_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const o=Ce(t),l=o.queries;o.queries=a_(),l.forEach(((h,f)=>{for(const g of f.Sa)g.onError(s)}))})(this,new oe(G.ABORTED,"Firestore shutting down"))}}function a_(){return new ki((r=>Zv(r)),Fc)}async function Mw(r,e){const t=Ce(r);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.ba()&&e.Da()&&(s=2):(l=new FR,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const f=sp(h,`Initialization of query '${Eo(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&ip(t)}async function Lw(r,e){const t=Ce(r),s=e.query;let o=3;const l=t.queries.get(s);if(l){const h=l.Sa.indexOf(e);h>=0&&(l.Sa.splice(h,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function BR(r,e){const t=Ce(r);let s=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const f of h.Sa)f.Fa(o)&&(s=!0);h.wa=o}}s&&ip(t)}function zR(r,e,t){const s=Ce(r),o=s.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);s.queries.delete(e)}function ip(r){r.Ca.forEach((e=>{e.next()}))}var pf,l_;(l_=pf||(pf={})).Ma="default",l_.Cache="cache";class bw{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new bo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=bo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==pf.Cache}}class jw{constructor(e){this.key=e}}class Fw{constructor(e){this.key=e}}class $R{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=be(),this.mutatedKeys=be(),this.eu=ew(e),this.tu=new Po(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new o_,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,f=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,E)=>{const S=o.get(v),M=Uc(this.query,E)?E:null,H=!!S&&this.mutatedKeys.has(S.key),$=!!M&&(M.hasLocalMutations||this.mutatedKeys.has(M.key)&&M.hasCommittedMutations);let j=!1;S&&M?S.data.isEqual(M.data)?H!==$&&(s.track({type:3,doc:M}),j=!0):this.su(S,M)||(s.track({type:2,doc:M}),j=!0,(g&&this.eu(M,g)>0||y&&this.eu(M,y)<0)&&(f=!0)):!S&&M?(s.track({type:0,doc:M}),j=!0):S&&!M&&(s.track({type:1,doc:S}),j=!0,(g||y)&&(f=!0)),j&&(M?(h=h.add(M),l=$?l.add(v):l.delete(v)):(h=h.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const v=this.query.limitType==="F"?h.last():h.first();h=h.delete(v.key),l=l.delete(v.key),s.track({type:1,doc:v})}return{tu:h,iu:s,Cs:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((v,E)=>(function(M,H){const $=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e(20277,{Rt:j})}};return $(M)-$(H)})(v.type,E.type)||this.eu(v.doc,E.doc))),this.ou(s),o=o??!1;const f=t&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,y=g!==this.Za;return this.Za=g,h.length!==0||y?{snapshot:new bo(this.query,e.tu,l,h,e.mutatedKeys,g===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new o_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=be(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new Fw(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new jw(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=be();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return bo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const op="SyncEngine";class qR{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class WR{constructor(e){this.key=e,this.hu=!1}}class HR{constructor(e,t,s,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new ki((f=>Zv(f)),Fc),this.Iu=new Map,this.Eu=new Set,this.du=new ot(ye.comparator),this.Au=new Map,this.Ru=new Kf,this.Vu={},this.mu=new Map,this.fu=Lo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function GR(r,e,t=!0){const s=Ww(r);let o;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await Uw(s,e,t,!0),o}async function KR(r,e){const t=Ww(r);await Uw(t,e,!0,!1)}async function Uw(r,e,t,s){const o=await pR(r.localStore,ur(e)),l=o.targetId,h=r.sharedClientState.addLocalQueryTarget(l,t);let f;return s&&(f=await QR(r,e,l,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&kw(r.remoteStore,o),f}async function QR(r,e,t,s,o){r.pu=(E,S,M)=>(async function($,j,K,se){let q=j.view.ru(K);q.Cs&&(q=await e_($.localStore,j.query,!1).then((({documents:C})=>j.view.ru(C,q))));const W=se&&se.targetChanges.get(j.targetId),te=se&&se.targetMismatches.get(j.targetId)!=null,ee=j.view.applyChanges(q,$.isPrimaryClient,W,te);return c_($,j.targetId,ee.au),ee.snapshot})(r,E,S,M);const l=await e_(r.localStore,e,!0),h=new $R(e,l.Qs),f=h.ru(l.documents),g=Tl.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",o),y=h.applyChanges(f,r.isPrimaryClient,g);c_(r,t,y.au);const v=new qR(e,t,h);return r.Tu.set(e,v),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),y.snapshot}async function XR(r,e,t){const s=Ce(r),o=s.Tu.get(e),l=s.Iu.get(o.targetId);if(l.length>1)return s.Iu.set(o.targetId,l.filter((h=>!Fc(h,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await df(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&Zf(s.remoteStore,o.targetId),mf(s,o.targetId)})).catch(qo)):(mf(s,o.targetId),await df(s.localStore,o.targetId,!0))}async function YR(r,e){const t=Ce(r),s=t.Tu.get(e),o=t.Iu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Zf(t.remoteStore,s.targetId))}async function JR(r,e,t){const s=iP(r);try{const o=await(function(h,f){const g=Ce(h),y=tt.now(),v=f.reduce(((M,H)=>M.add(H.key)),be());let E,S;return g.persistence.runTransaction("Locally write mutations","readwrite",(M=>{let H=Ur(),$=be();return g.Ns.getEntries(M,v).next((j=>{H=j,H.forEach(((K,se)=>{se.isValidDocument()||($=$.add(K))}))})).next((()=>g.localDocuments.getOverlayedDocuments(M,H))).next((j=>{E=j;const K=[];for(const se of f){const q=mC(se,E.get(se.key).overlayedDocument);q!=null&&K.push(new Bs(se.key,q,Wv(q.value.mapValue),bt.exists(!0)))}return g.mutationQueue.addMutationBatch(M,y,K,f)})).next((j=>{S=j;const K=j.applyToLocalDocumentSet(E,$);return g.documentOverlayCache.saveOverlays(M,j.batchId,K)}))})).then((()=>({batchId:S.batchId,changes:nw(E)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(h,f,g){let y=h.Vu[h.currentUser.toKey()];y||(y=new ot(Le)),y=y.insert(f,g),h.Vu[h.currentUser.toKey()]=y})(s,o.batchId,t),await Sl(s,o.changes),await Gc(s.remoteStore)}catch(o){const l=sp(o,"Failed to persist write");t.reject(l)}}async function Bw(r,e){const t=Ce(r);try{const s=await hR(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const h=t.Au.get(l);h&&(ze(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?ze(h.hu,14607):o.removedDocuments.size>0&&(ze(h.hu,42227),h.hu=!1))})),await Sl(t,s,e)}catch(s){await qo(s)}}function u_(r,e,t){const s=Ce(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Tu.forEach(((l,h)=>{const f=h.view.va(e);f.snapshot&&o.push(f.snapshot)})),(function(h,f){const g=Ce(h);g.onlineState=f;let y=!1;g.queries.forEach(((v,E)=>{for(const S of E.Sa)S.va(f)&&(y=!0)})),y&&ip(g)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function ZR(r,e,t){const s=Ce(r);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Au.get(e),l=o&&o.key;if(l){let h=new ot(ye.comparator);h=h.insert(l,Nt.newNoDocument(l,Te.min()));const f=be().add(l),g=new qc(Te.min(),new Map,new ot(Le),h,f);await Bw(s,g),s.du=s.du.remove(l),s.Au.delete(e),ap(s)}else await df(s.localStore,e,!1).then((()=>mf(s,e,t))).catch(qo)}async function eP(r,e){const t=Ce(r),s=e.batch.batchId;try{const o=await cR(t.localStore,e);$w(t,s,null),zw(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Sl(t,o)}catch(o){await qo(o)}}async function tP(r,e,t){const s=Ce(r);try{const o=await(function(h,f){const g=Ce(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let v;return g.mutationQueue.lookupMutationBatch(y,f).next((E=>(ze(E!==null,37113),v=E.keys(),g.mutationQueue.removeMutationBatch(y,E)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,v,f))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,v))).next((()=>g.localDocuments.getDocuments(y,v)))}))})(s.localStore,e);$w(s,e,t),zw(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Sl(s,o)}catch(o){await qo(o)}}function zw(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function $w(r,e,t){const s=Ce(r);let o=s.Vu[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function mf(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),t&&r.Pu.yu(s,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((s=>{r.Ru.containsKey(s)||qw(r,s)}))}function qw(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(Zf(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),ap(r))}function c_(r,e,t){for(const s of t)s instanceof jw?(r.Ru.addReference(s.key,e),nP(r,s)):s instanceof Fw?(ue(op,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||qw(r,s.key)):_e(19791,{wu:s})}function nP(r,e){const t=e.key,s=t.path.canonicalString();r.du.get(t)||r.Eu.has(s)||(ue(op,"New document in limbo: "+t),r.Eu.add(s),ap(r))}function ap(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new ye(Qe.fromString(e)),s=r.fu.next();r.Au.set(s,new WR(t)),r.du=r.du.insert(t,s),kw(r.remoteStore,new Ss(ur($f(t.path)),s,"TargetPurposeLimboResolution",bc.ce))}}async function Sl(r,e,t){const s=Ce(r),o=[],l=[],h=[];s.Tu.isEmpty()||(s.Tu.forEach(((f,g)=>{h.push(s.pu(g,e,t).then((y=>{if((y||t)&&s.isPrimaryClient){const v=y?!y.fromCache:t?.targetChanges.get(g.targetId)?.current;s.sharedClientState.updateQueryState(g.targetId,v?"current":"not-current")}if(y){o.push(y);const v=Xf.As(g.targetId,y);l.push(v)}})))})),await Promise.all(h),s.Pu.H_(o),await(async function(g,y){const v=Ce(g);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>Q.forEach(y,(S=>Q.forEach(S.Es,(M=>v.persistence.referenceDelegate.addReference(E,S.targetId,M))).next((()=>Q.forEach(S.ds,(M=>v.persistence.referenceDelegate.removeReference(E,S.targetId,M)))))))))}catch(E){if(!Wo(E))throw E;ue(Yf,"Failed to update sequence numbers: "+E)}for(const E of y){const S=E.targetId;if(!E.fromCache){const M=v.Ms.get(S),H=M.snapshotVersion,$=M.withLastLimboFreeSnapshotVersion(H);v.Ms=v.Ms.insert(S,$)}}})(s.localStore,l))}async function rP(r,e){const t=Ce(r);if(!t.currentUser.isEqual(e)){ue(op,"User change. New user:",e.toKey());const s=await Cw(t.localStore,e);t.currentUser=e,(function(l,h){l.mu.forEach((f=>{f.forEach((g=>{g.reject(new oe(G.CANCELLED,h))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Sl(t,s.Ls)}}function sP(r,e){const t=Ce(r),s=t.Au.get(e);if(s&&s.hu)return be().add(s.key);{let o=be();const l=t.Iu.get(e);if(!l)return o;for(const h of l){const f=t.Tu.get(h);o=o.unionWith(f.view.nu)}return o}}function Ww(r){const e=Ce(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=Bw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=sP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ZR.bind(null,e),e.Pu.H_=BR.bind(null,e.eventManager),e.Pu.yu=zR.bind(null,e.eventManager),e}function iP(r){const e=Ce(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=eP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tP.bind(null,e),e}class Cc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Wc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return uR(this.persistence,new oR,e.initialUser,this.serializer)}Cu(e){return new Aw(Qf.mi,this.serializer)}Du(e){return new gR}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Cc.provider={build:()=>new Cc};class oP extends Cc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ze(this.persistence.referenceDelegate instanceof Sc,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new WC(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?rn.withCacheSize(this.cacheSizeBytes):rn.DEFAULT;return new Aw((s=>Sc.mi(s,t)),this.serializer)}}class gf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>u_(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=rP.bind(null,this.syncEngine),await jR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new UR})()}createDatastore(e){const t=Wc(e.databaseInfo.databaseId),s=(function(l){return new ER(l)})(e.databaseInfo);return(function(l,h,f,g){return new AR(l,h,f,g)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,l,h,f){return new RR(s,o,l,h,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>u_(this.syncEngine,t,0)),(function(){return r_.v()?new r_:new yR})())}createSyncEngine(e,t){return(function(o,l,h,f,g,y,v){const E=new HR(o,l,h,f,g,y);return v&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const s=Ce(t);ue(Si,"RemoteStore shutting down."),s.Ea.add(5),await Il(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}gf.provider={build:()=>new gf};class Hw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):jr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class aP{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new oe(G.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(o,l){const h=Ce(o),f={documents:l.map((E=>Ic(h.serializer,E)))},g=await h.Ho("BatchGetDocuments",h.serializer.databaseId,Qe.emptyPath(),f,l.length),y=new Map;g.forEach((E=>{const S=PC(h.serializer,E);y.set(S.key.toString(),S)}));const v=[];return l.forEach((E=>{const S=y.get(E.toString());ze(!!S,55234,{key:E}),v.push(S)})),v})(this.datastore,e);return t.forEach((s=>this.recordVersion(s))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new $c(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,s)=>{const o=ye.fromPath(s);this.mutations.push(new hw(o,this.precondition(o)))})),await(async function(s,o){const l=Ce(s),h={writes:o.map((f=>ww(l.serializer,f)))};await l.Go("Commit",l.serializer.databaseId,Qe.emptyPath(),h)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw _e(50498,{Gu:e.constructor.name});t=Te.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new oe(G.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Te.min())?bt.exists(!1):bt.updateTime(t):bt.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Te.min()))throw new oe(G.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return bt.updateTime(t)}return bt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class lP{constructor(e,t,s,o,l){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=o,this.deferred=l,this.zu=s.maxAttempts,this.M_=new Jf(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new aP(this.datastore),t=this.Hu(e);t&&t.then((s=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(s)})).catch((o=>{this.Yu(o)}))))})).catch((s=>{this.Yu(s)}))}))}Hu(e){try{const t=this.updateFunction(e);return!vl(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!dw(t)}return!1}}const js="FirestoreClient";class uP{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=Ht.UNAUTHENTICATED,this.clientId=bf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async h=>{ue(js,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(s,(h=>(ue(js,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new lr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=sp(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function jd(r,e){r.asyncQueue.verifyOperationInProgress(),ue(js,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener((async o=>{s.isEqual(o)||(await Cw(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function h_(r,e){r.asyncQueue.verifyOperationInProgress();const t=await cP(r);ue(js,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((s=>i_(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,o)=>i_(e.remoteStore,o))),r._onlineComponents=e}async function cP(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ue(js,"Using user provided OfflineComponentProvider");try{await jd(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===G.FAILED_PRECONDITION||o.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Do("Error using user provided cache. Falling back to memory cache: "+t),await jd(r,new Cc)}}else ue(js,"Using default OfflineComponentProvider"),await jd(r,new oP(void 0));return r._offlineComponents}async function lp(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ue(js,"Using user provided OnlineComponentProvider"),await h_(r,r._uninitializedComponentsProvider._online)):(ue(js,"Using default OnlineComponentProvider"),await h_(r,new gf))),r._onlineComponents}function hP(r){return lp(r).then((e=>e.syncEngine))}function dP(r){return lp(r).then((e=>e.datastore))}async function Gw(r){const e=await lp(r),t=e.eventManager;return t.onListen=GR.bind(null,e.syncEngine),t.onUnlisten=XR.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=KR.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=YR.bind(null,e.syncEngine),t}function fP(r,e,t={}){const s=new lr;return r.asyncQueue.enqueueAndForget((async()=>(function(l,h,f,g,y){const v=new Hw({next:S=>{v.Nu(),h.enqueueAndForget((()=>Lw(l,E)));const M=S.docs.has(f);!M&&S.fromCache?y.reject(new oe(G.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&S.fromCache&&g&&g.source==="server"?y.reject(new oe(G.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(S)},error:S=>y.reject(S)}),E=new bw($f(f.path),v,{includeMetadataChanges:!0,qa:!0});return Mw(l,E)})(await Gw(r),r.asyncQueue,e,t,s))),s.promise}function pP(r,e,t={}){const s=new lr;return r.asyncQueue.enqueueAndForget((async()=>(function(l,h,f,g,y){const v=new Hw({next:S=>{v.Nu(),h.enqueueAndForget((()=>Lw(l,E))),S.fromCache&&g.source==="server"?y.reject(new oe(G.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(S)},error:S=>y.reject(S)}),E=new bw(f,v,{includeMetadataChanges:!0,qa:!0});return Mw(l,E)})(await Gw(r),r.asyncQueue,e,t,s))),s.promise}function Kw(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const d_=new Map;const Qw="firestore.googleapis.com",f_=!0;class p_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new oe(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Qw,this.ssl=f_}else this.host=e.host,this.ssl=e.ssl??f_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Sw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<$C)throw new oe(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}PA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Kw(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new oe(G.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new oe(G.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new oe(G.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Kc{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new p_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new oe(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new oe(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new p_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new _A;switch(s.type){case"firstParty":return new TA(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new oe(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=d_.get(t);s&&(ue("ComponentProvider","Removing Datastore"),d_.delete(t),s.terminate())})(this),Promise.resolve()}}function mP(r,e,t,s={}){r=Fr(r,Kc);const o=Uo(e),l=r._getSettings(),h={...l,emulatorOptions:r._getEmulatorOptions()},f=`${e}:${t}`;o&&(z_(`https://${f}`),$_("Firestore",!0)),l.host!==Qw&&l.host!==f&&Do("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:f,ssl:o,emulatorOptions:s};if(!wi(g,h)&&(r._setSettings(g),s.mockUserToken)){let y,v;if(typeof s.mockUserToken=="string")y=s.mockUserToken,v=Ht.MOCK_USER;else{y=qT(s.mockUserToken,r._app?.options.projectId);const E=s.mockUserToken.sub||s.mockUserToken.user_id;if(!E)throw new oe(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Ht(E)}r._authCredentials=new vA(new Vv(y,v))}}class Go{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Go(this.firestore,e,this._query)}}class ft{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ft(this.firestore,e,this._key)}toJSON(){return{type:ft._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(_l(t,ft._jsonSchema))return new ft(e,s||null,new ye(Qe.fromString(t.referencePath)))}}ft._jsonSchemaVersion="firestore/documentReference/1.0",ft._jsonSchema={type:wt("string",ft._jsonSchemaVersion),referencePath:wt("string")};class xs extends Go{constructor(e,t,s){super(e,t,$f(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ft(this.firestore,null,new ye(e))}withConverter(e){return new xs(this.firestore,e,this._path)}}function jt(r,e,...t){if(r=St(r),Ov("collection","path",e),r instanceof Kc){const s=Qe.fromString(e,...t);return Ry(s),new xs(r,null,s)}{if(!(r instanceof ft||r instanceof xs))throw new oe(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Qe.fromString(e,...t));return Ry(s),new xs(r.firestore,null,s)}}function nt(r,e,...t){if(r=St(r),arguments.length===1&&(e=bf.newId()),Ov("doc","path",e),r instanceof Kc){const s=Qe.fromString(e,...t);return Cy(s),new ft(r,null,new ye(s))}{if(!(r instanceof ft||r instanceof xs))throw new oe(G.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Qe.fromString(e,...t));return Cy(s),new ft(r.firestore,r instanceof xs?r.converter:null,new ye(s))}}const m_="AsyncQueue";class g_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Jf(this,"async_queue_retry"),this._c=()=>{const s=bd();s&&ue(m_,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=bd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=bd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new lr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Wo(e))throw e;ue(m_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,jr("INTERNAL UNHANDLED ERROR: ",y_(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=rp.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&_e(47125,{Pc:y_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function y_(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class Ko extends Kc{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new g_,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new g_(e),this._firestoreClient=void 0,await e}}}function gP(r,e){const t=typeof r=="object"?r:G_(),s=typeof r=="string"?r:yc,o=Af(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=zT("firestore");l&&mP(o,...l)}return o}function Al(r){if(r._terminated)throw new oe(G.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||yP(r),r._firestoreClient}function yP(r){const e=r._freezeSettings(),t=(function(o,l,h,f){return new FA(o,l,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,Kw(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new uP(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(o){const l=o?._online.build();return{_offline:o?._offline.build(l),_online:l}})(r._componentsProvider))}class mn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new mn(Ft.fromBase64String(e))}catch(t){throw new oe(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new mn(Ft.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:mn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(_l(e,mn._jsonSchema))return mn.fromBase64String(e.bytes)}}mn._jsonSchemaVersion="firestore/bytes/1.0",mn._jsonSchema={type:wt("string",mn._jsonSchemaVersion),bytes:wt("string")};class Cl{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new oe(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Qc{constructor(e){this._methodName=e}}class cr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new oe(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new oe(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:cr._jsonSchemaVersion}}static fromJSON(e){if(_l(e,cr._jsonSchema))return new cr(e.latitude,e.longitude)}}cr._jsonSchemaVersion="firestore/geoPoint/1.0",cr._jsonSchema={type:wt("string",cr._jsonSchemaVersion),latitude:wt("number"),longitude:wt("number")};class hr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:hr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(_l(e,hr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new hr(e.vectorValues);throw new oe(G.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}hr._jsonSchemaVersion="firestore/vectorValue/1.0",hr._jsonSchema={type:wt("string",hr._jsonSchemaVersion),vectorValues:wt("object")};const _P=/^__.*__$/;class vP{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Bs(e,this.data,this.fieldMask,t,this.fieldTransforms):new El(e,this.data,t,this.fieldTransforms)}}class Xw{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Bs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Yw(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e(40011,{Ac:r})}}class up{constructor(e,t,s,o,l,h){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new up({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Rc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Yw(this.Ac)&&_P.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class wP{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Wc(e)}Cc(e,t,s,o=!1){return new up({Ac:e,methodName:t,Dc:s,path:Lt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Xc(r){const e=r._freezeSettings(),t=Wc(r._databaseId);return new wP(r._databaseId,!!e.ignoreUndefinedProperties,t)}function cp(r,e,t,s,o,l={}){const h=r.Cc(l.merge||l.mergeFields?2:0,e,t,o);dp("Data must be an object, but it was:",h,s);const f=eE(s,h);let g,y;if(l.merge)g=new gn(h.fieldMask),y=h.fieldTransforms;else if(l.mergeFields){const v=[];for(const E of l.mergeFields){const S=yf(e,E,t);if(!h.contains(S))throw new oe(G.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);nE(v,S)||v.push(S)}g=new gn(v),y=h.fieldTransforms.filter((E=>g.covers(E.field)))}else g=null,y=h.fieldTransforms;return new vP(new Xt(f),g,y)}class Yc extends Qc{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Yc}}class hp extends Qc{_toFieldTransform(e){return new hC(e.path,new ul)}isEqual(e){return e instanceof hp}}function Jw(r,e,t,s){const o=r.Cc(1,e,t);dp("Data must be an object, but it was:",o,s);const l=[],h=Xt.empty();Us(s,((g,y)=>{const v=fp(e,g,t);y=St(y);const E=o.yc(v);if(y instanceof Yc)l.push(v);else{const S=Rl(y,E);S!=null&&(l.push(v),h.set(v,S))}}));const f=new gn(l);return new Xw(h,f,o.fieldTransforms)}function Zw(r,e,t,s,o,l){const h=r.Cc(1,e,t),f=[yf(e,s,t)],g=[o];if(l.length%2!=0)throw new oe(G.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)f.push(yf(e,l[S])),g.push(l[S+1]);const y=[],v=Xt.empty();for(let S=f.length-1;S>=0;--S)if(!nE(y,f[S])){const M=f[S];let H=g[S];H=St(H);const $=h.yc(M);if(H instanceof Yc)y.push(M);else{const j=Rl(H,$);j!=null&&(y.push(M),v.set(M,j))}}const E=new gn(y);return new Xw(v,E,h.fieldTransforms)}function EP(r,e,t,s=!1){return Rl(t,r.Cc(s?4:3,e))}function Rl(r,e){if(tE(r=St(r)))return dp("Unsupported field value:",e,r),eE(r,e);if(r instanceof Qc)return(function(s,o){if(!Yw(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const l=[];let h=0;for(const f of s){let g=Rl(f,o.wc(h));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),h++}return{arrayValue:{values:l}}})(r,e)}return(function(s,o){if((s=St(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return lC(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=tt.fromDate(s);return{timestampValue:Tc(o.serializer,l)}}if(s instanceof tt){const l=new tt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Tc(o.serializer,l)}}if(s instanceof cr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof mn)return{bytesValue:gw(o.serializer,s._byteString)};if(s instanceof ft){const l=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(l))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Gf(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof hr)return(function(h,f){return{mapValue:{fields:{[$v]:{stringValue:qv},[_c]:{arrayValue:{values:h.toArray().map((y=>{if(typeof y!="number")throw f.Sc("VectorValues must only contain numeric values.");return qf(f.serializer,y)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${Lc(s)}`)})(r,e)}function eE(r,e){const t={};return bv(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Us(r,((s,o)=>{const l=Rl(o,e.mc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function tE(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof tt||r instanceof cr||r instanceof mn||r instanceof ft||r instanceof Qc||r instanceof hr)}function dp(r,e,t){if(!tE(t)||!Mv(t)){const s=Lc(t);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function yf(r,e,t){if((e=St(e))instanceof Cl)return e._internalPath;if(typeof e=="string")return fp(r,e);throw Rc("Field path arguments must be of type string or ",r,!1,void 0,t)}const TP=new RegExp("[~\\*/\\[\\]]");function fp(r,e,t){if(e.search(TP)>=0)throw Rc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Cl(...e.split("."))._internalPath}catch{throw Rc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Rc(r,e,t,s,o){const l=s&&!s.isEmpty(),h=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(l||h)&&(g+=" (found",l&&(g+=` in field ${s}`),h&&(g+=` in document ${o}`),g+=")"),new oe(G.INVALID_ARGUMENT,f+r+g)}function nE(r,e){return r.some((t=>t.isEqual(e)))}class Pc{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new ft(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new IP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(pp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class IP extends Pc{data(){return super.data()}}function pp(r,e){return typeof e=="string"?fp(r,e):e instanceof Cl?e._internalPath:e._delegate._internalPath}function SP(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new oe(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class mp{}class AP extends mp{}function Ai(r,e,...t){let s=[];e instanceof mp&&s.push(e),s=s.concat(t),(function(l){const h=l.filter((g=>g instanceof gp)).length,f=l.filter((g=>g instanceof Jc)).length;if(h>1||h>0&&f>0)throw new oe(G.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)r=o._apply(r);return r}class Jc extends AP{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Jc(e,t,s)}_apply(e){const t=this._parse(e);return rE(e._query,t),new Go(e.firestore,e.converter,af(e._query,t))}_parse(e){const t=Xc(e.firestore);return(function(l,h,f,g,y,v,E){let S;if(y.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new oe(G.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){v_(E,v);const H=[];for(const $ of E)H.push(__(g,l,$));S={arrayValue:{values:H}}}else S=__(g,l,E)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||v_(E,v),S=EP(f,h,E,v==="in"||v==="not-in");return vt.create(y,v,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Ci(r,e,t){const s=e,o=pp("where",r);return Jc._create(o,s,t)}class gp extends mp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new gp(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:Bn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let h=o;const f=l.getFlattenedFilters();for(const g of f)rE(h,g),h=af(h,g)})(e._query,t),new Go(e.firestore,e.converter,af(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function __(r,e,t){if(typeof(t=St(t))=="string"){if(t==="")throw new oe(G.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Jv(e)&&t.indexOf("/")!==-1)throw new oe(G.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Qe.fromString(t));if(!ye.isDocumentKey(s))throw new oe(G.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return My(r,new ye(s))}if(t instanceof ft)return My(r,t._key);throw new oe(G.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Lc(t)}.`)}function v_(r,e){if(!Array.isArray(r)||r.length===0)throw new oe(G.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function rE(r,e){const t=(function(o,l){for(const h of o)for(const f of h.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new oe(G.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new oe(G.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class sE{convertValue(e,t="none"){switch(Ls(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ms(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw _e(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Us(e,((o,l)=>{s[o]=this.convertValue(l,t)})),s}convertVectorValue(e){const t=e.fields?.[_c].arrayValue?.values?.map((s=>dt(s.doubleValue)));return new hr(t)}convertGeoPoint(e){return new cr(dt(e.latitude),dt(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=jc(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(ol(e));default:return null}}convertTimestamp(e){const t=Os(e);return new tt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Qe.fromString(e);ze(Iw(s),9688,{name:e});const o=new al(s.get(1),s.get(3)),l=new ye(s.popFirst(5));return o.isEqual(t)||jr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function yp(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}class CP extends sE{constructor(e){super(),this.firestore=e}convertBytes(e){return new mn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ft(this.firestore,null,t)}}class So{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ds extends Pc{constructor(e,t,s,o,l,h){super(e,t,s,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new oc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(pp("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(G.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ds._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ds._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ds._jsonSchema={type:wt("string",Ds._jsonSchemaVersion),bundleSource:wt("string","DocumentSnapshot"),bundleName:wt("string"),bundle:wt("string")};class oc extends Ds{data(e={}){return super.data(e)}}class ko{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new So(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new oc(this._firestore,this._userDataWriter,s.key,s,new So(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new oe(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((f=>{const g=new oc(o._firestore,o._userDataWriter,f.doc.key,f.doc,new So(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const g=new oc(o._firestore,o._userDataWriter,f.doc.key,f.doc,new So(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,v=-1;return f.type!==0&&(y=h.indexOf(f.doc.key),h=h.delete(f.doc.key)),f.type!==1&&(h=h.add(f.doc),v=h.indexOf(f.doc.key)),{type:RP(f.type),doc:g,oldIndex:y,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(G.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ko._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=bf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function RP(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e(61501,{type:r})}}function Ri(r){r=Fr(r,ft);const e=Fr(r.firestore,Ko);return fP(Al(e),r._key).then((t=>PP(e,r,t)))}ko._jsonSchemaVersion="firestore/querySnapshot/1.0",ko._jsonSchema={type:wt("string",ko._jsonSchemaVersion),bundleSource:wt("string","QuerySnapshot"),bundleName:wt("string"),bundle:wt("string")};class _p extends sE{constructor(e){super(),this.firestore=e}convertBytes(e){return new mn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ft(this.firestore,null,t)}}function _n(r){r=Fr(r,Go);const e=Fr(r.firestore,Ko),t=Al(e),s=new _p(e);return SP(r._query),pP(t,r._query).then((o=>new ko(e,s,r,o)))}function Qo(r,e,t){r=Fr(r,ft);const s=Fr(r.firestore,Ko),o=yp(r.converter,e,t);return iE(s,[cp(Xc(s),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,bt.none())])}function iE(r,e){return(function(s,o){const l=new lr;return s.asyncQueue.enqueueAndForget((async()=>JR(await hP(s),o,l))),l.promise})(Al(r),e)}function PP(r,e,t){const s=t.docs.get(e._key),o=new _p(r);return new Ds(r,o,e._key,s,new So(t.hasPendingWrites,t.fromCache),e.converter)}const kP={maxAttempts:5};class NP{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Xc(e)}set(e,t,s){this._verifyNotCommitted();const o=As(e,this._firestore),l=yp(o.converter,t,s),h=cp(this._dataReader,"WriteBatch.set",o._key,l,o.converter!==null,s);return this._mutations.push(h.toMutation(o._key,bt.none())),this}update(e,t,s,...o){this._verifyNotCommitted();const l=As(e,this._firestore);let h;return h=typeof(t=St(t))=="string"||t instanceof Cl?Zw(this._dataReader,"WriteBatch.update",l._key,t,s,o):Jw(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(h.toMutation(l._key,bt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=As(e,this._firestore);return this._mutations=this._mutations.concat(new $c(t._key,bt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new oe(G.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function As(r,e){if((r=St(r)).firestore!==e)throw new oe(G.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}class xP{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Xc(e)}get(e){const t=As(e,this._firestore),s=new CP(this._firestore);return this._transaction.lookup([t._key]).then((o=>{if(!o||o.length!==1)return _e(24041);const l=o[0];if(l.isFoundDocument())return new Pc(this._firestore,s,l.key,l,t.converter);if(l.isNoDocument())return new Pc(this._firestore,s,t._key,null,t.converter);throw _e(18433,{doc:l})}))}set(e,t,s){const o=As(e,this._firestore),l=yp(o.converter,t,s),h=cp(this._dataReader,"Transaction.set",o._key,l,o.converter!==null,s);return this._transaction.set(o._key,h),this}update(e,t,s,...o){const l=As(e,this._firestore);let h;return h=typeof(t=St(t))=="string"||t instanceof Cl?Zw(this._dataReader,"Transaction.update",l._key,t,s,o):Jw(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,h),this}delete(e){const t=As(e,this._firestore);return this._transaction.delete(t._key),this}}class DP extends xP{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=As(e,this._firestore),s=new _p(this._firestore);return super.get(e).then((o=>new Ds(this._firestore,s,t._key,o._document,new So(!1,!1),t.converter)))}}function oE(r,e,t){r=Fr(r,Ko);const s={...kP,...t};return(function(l){if(l.maxAttempts<1)throw new oe(G.INVALID_ARGUMENT,"Max attempts must be at least 1")})(s),(function(l,h,f){const g=new lr;return l.asyncQueue.enqueueAndForget((async()=>{const y=await dP(l);new lP(l.asyncQueue,y,f,h,g).ju()})),g.promise})(Al(r),(o=>e(new DP(r,o))),s)}function pn(){return new hp("serverTimestamp")}function vp(r){return Al(r=Fr(r,Ko)),new NP(r,(e=>iE(r,e)))}(function(e,t=!0){(function(o){$o=o})(Bo),No(new Ei("firestore",((s,{instanceIdentifier:o,options:l})=>{const h=s.getProvider("app").getImmediate(),f=new Ko(new wA(s.getProvider("auth-internal")),new IA(h,s.getProvider("app-check-internal")),(function(y,v){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new oe(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new al(y.options.projectId,v)})(h,o),h);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),ks(Ty,Iy,e),ks(Ty,Iy,"esm2020")})();var VP="firebase",OP="12.7.0";ks(VP,OP,"app");const MP={apiKey:"AIzaSyA-TURVnsMyyBOWreei2jGLcuXmOzyr_DQ",authDomain:"gamificationcollege.firebaseapp.com",projectId:"gamificationcollege",storageBucket:"gamificationcollege.firebasestorage.app",messagingSenderId:"237003198772",appId:"1:237003198772:web:37fc8130a083377a115561"},aE=H_(MP),Fd=gA(aE),LP=new Vr,Ne=gP(aE),lE=Ee.createContext(null);function bP({children:r}){const[e,t]=Ee.useState(null),[s,o]=Ee.useState(null),[l,h]=Ee.useState(!0);Ee.useEffect(()=>{const y=s1(Fd,async v=>{if(t(v),o(null),!v){h(!1);return}const E=nt(Ne,"users",v.uid);(await Ri(E)).exists()||await Qo(E,{displayName:v.displayName||"Utilisateur",role:"child",createdAt:pn()});const M=await Ri(E);o(M.data()?.role||"child"),h(!1)});return()=>y()},[]);const f=async()=>{await A1(Fd,LP)},g=async()=>{await i1(Fd)};return A.jsx(lE.Provider,{value:{user:e,role:s,loading:l,signInGoogle:f,signOutUser:g},children:r})}function zs(){const r=Ee.useContext(lE);if(!r)throw new Error("useAuth doit tre utilis sous <AuthProvider>");return r}function jP(){const{user:r,role:e,signOutUser:t}=zs();return A.jsx("div",{className:"card",style:{marginBottom:14},children:A.jsxs("div",{className:"row",style:{justifyContent:"space-between"},children:[A.jsxs("div",{children:[A.jsx("div",{style:{fontWeight:900,fontSize:"1.05rem"},children:"Malo  Rvisions"}),A.jsx("div",{className:"small",children:r?A.jsxs(A.Fragment,{children:["Connect : ",A.jsx("strong",{children:r.displayName})," ",A.jsx("span",{className:"badge",children:e})]}):"Non connect"})]}),A.jsxs("div",{className:"row",style:{gap:8},children:[A.jsx(vo,{className:"btn secondary",to:"/",children:"Accueil"}),r&&A.jsx(vo,{className:"btn secondary",to:"/recompenses",children:"Rcompenses"}),e==="parent"&&A.jsxs(A.Fragment,{children:[A.jsx(vo,{className:"btn secondary",to:"/admin/import",children:"Import (parent)"}),A.jsx(vo,{className:"btn secondary",to:"/admin/moderation",children:"Modration"}),A.jsx(vo,{className:"btn secondary",to:"/admin/progression",children:"Progression"})]}),r&&A.jsx("button",{className:"btn secondary",onClick:t,children:"Dconnexion"})]})]})})}function Ud({children:r}){const{user:e,loading:t}=zs();return t?A.jsx("div",{className:"card",children:"Chargement"}):e?A.jsx(A.Fragment,{children:r}):A.jsx($d,{to:"/connexion",replace:!0})}function Bd({children:r}){const{user:e,role:t,loading:s}=zs();return s?A.jsx("div",{className:"card",children:"Chargement"}):e?t!=="parent"?A.jsx($d,{to:"/",replace:!0}):A.jsx(A.Fragment,{children:r}):A.jsx($d,{to:"/connexion",replace:!0})}function jo(r){return(r||"").toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[]/g,"'").replace(/\s+/g," ").trim()}async function FP(){return(await _n(jt(Ne,"subjects"))).docs.map(e=>({id:e.id,...e.data()}))}async function uE(r,e){const{uid:t,includeHidden:s=!1,includeOverrides:o=!1}=e||{},l=Ai(jt(Ne,"themes"),Ci("subjectId","==",r)),f=(await _n(l)).docs.map(v=>({id:v.id,...v.data()}));let g=new Map;if(t)try{const v=await _n(jt(Ne,"users",t,"visibilityThemes"));g=new Map(v.docs.map(E=>[E.id,!!E.data().visible]))}catch{g=new Map}const y=f.filter(v=>{const E=g.get(v.id);return!(!s&&v.hidden||!s&&E===!1)});return o?y.map(v=>({...v,visibleOverride:g.get(v.id)})):y}async function cE(r,e){const{uid:t,includeHidden:s=!1,includeOverrides:o=!1}=e||{},l=Ai(jt(Ne,"exercises"),Ci("themeId","==",r)),f=(await _n(l)).docs.map(v=>({id:v.id,...v.data()}));let g=new Map;if(t)try{const v=await _n(jt(Ne,"users",t,"visibilityExercises"));g=new Map(v.docs.map(E=>[E.id,!!E.data().visible]))}catch{g=new Map}const y=f.filter(v=>{const E=g.get(v.id);return!(!s&&v.hidden||!s&&E===!1)});return o?y.map(v=>({...v,visibleOverride:g.get(v.id)})):y}async function UP(r){const e=Ai(jt(Ne,"readings"),Ci("themeId","==",r));try{return(await _n(e)).docs.map(s=>({id:s.id,...s.data()}))}catch{return[]}}async function BP(r){const e=vp(Ne);for(const t of r.subjects){e.set(nt(Ne,"subjects",t.id),{title:t.title},{merge:!0});for(const s of t.themes){e.set(nt(Ne,"themes",s.id),{subjectId:t.id,title:s.title,grade:r.grade,readings:Array.isArray(s.readings)?s.readings:[]},{merge:!0});for(const o of s.exercises){const l=nt(Ne,"exercises",o.id),h={...o,themeId:s.id};h.tags=Array.isArray(h.tags)?h.tags.slice(0,3):[],h.type==="short_text"&&Array.isArray(h.expected)&&(h.expected=h.expected.map(f=>jo(f))),h.type==="fill_blank"&&Array.isArray(h.expected)&&(h.expected=h.expected.map(f=>jo(f))),e.set(l,h,{merge:!0})}if(Array.isArray(s.readings))for(const o of s.readings){if(!o.id||!o.title||!o.text||!Array.isArray(o.questions))continue;o.id,o.title,o.text,o.difficulty,Array.isArray(o.tags)&&o.tags.slice(0,3),o.questions.map(h=>({...h,type:"mcq",themeId:s.id,tags:Array.isArray(h.tags)?h.tags.slice(0,3):[]}));const l=nt(Ne,"themes",s.id);e.set(l,{readings:[...(Array.isArray(s.readings)?s.readings:[]).map(h=>({...h,themeId:s.id}))]},{merge:!0})}}}await e.commit()}async function zP(r,e){await Qo(nt(Ne,"themes",r),{hidden:e},{merge:!0})}async function $P(r,e){await Qo(nt(Ne,"exercises",r),{hidden:e},{merge:!0})}async function qP(r,e,t){await Qo(nt(Ne,"users",r,"visibilityThemes",e),{visible:t},{merge:!0})}async function WP(r,e,t){await Qo(nt(Ne,"users",r,"visibilityExercises",e),{visible:t},{merge:!0})}async function HP(r){const e=vp(Ne);e.delete(nt(Ne,"themes",r)),(await _n(Ai(jt(Ne,"exercises"),Ci("themeId","==",r)))).docs.forEach(o=>e.delete(o.ref)),(await _n(Ai(jt(Ne,"readings"),Ci("themeId","==",r)))).docs.forEach(o=>e.delete(o.ref)),await e.commit()}async function wp(r){const e=nt(Ne,"users",r,"stats","main"),t=await Ri(e);return t.exists()?t.data():(await Qo(e,{xp:0,coins:0,streakDays:0,lastDoneDate:null,badges:[],updatedAt:pn()}),(await Ri(e)).data())}function w_(r){return r.toISOString().slice(0,10)}function GP(r,e){return r===1?e?3:-1:r===2?e?5:-2:e?7:-3}function KP(r){return Math.max(0,Math.min(100,r))}function QP(r){return r>=80?"mastered":r>=60?"nearly":r>=30?"developing":"weak"}async function XP(r){const{uid:e,items:t,existingAttemptId:s}=r,o=new Date,l=w_(o),h=t.length,f=t.filter(M=>M.correct).length;if(h===0)return{xpGain:0,coinsGain:0,streakDays:0,badges:[],score:0,outOf:0};const g=new Map;t.forEach(M=>{const H=Array.isArray(M.tags)?M.tags.slice(0,3):[],$=GP(M.difficulty,M.correct);H.forEach(j=>{const K=g.get(j)||{delta:0,correct:0,wrong:0};g.set(j,{delta:K.delta+$,correct:K.correct+(M.correct?1:0),wrong:K.wrong+(M.correct?0:1)})})});const y=f*10,v=Math.max(1,Math.min(3,Math.round(f/Math.max(1,h)*3)));let E=null;const S=s?nt(Ne,"users",e,"attempts",s):nt(jt(Ne,"users",e,"attempts"));return t.map(()=>nt(jt(S,"items"))),await oE(Ne,async M=>{const H=nt(Ne,"users",e,"stats","main"),$=nt(Ne,"users",e,"progressSummary","main"),j=Array.from(g.keys()).map(x=>nt(Ne,"users",e,"tagProgress",x)),[K,se,q]=await Promise.all([M.get(H),M.get($),Promise.all(j.map(x=>M.get(x)))]),W=K.exists()?K.data():{xp:0,coins:0,streakDays:0,lastDoneDate:null,badges:[]};let te=W.streakDays||0;const ee=W.lastDoneDate;if(ee!==l){const x=w_(new Date(o.getTime()-864e5));te=ee===x?te+1:1}const C=new Set(Array.isArray(W.badges)?W.badges:[]);te>=3&&C.add("3 jours daffile"),te>=7&&C.add("7 jours daffile"),f===h&&h>=10&&C.add("Zro faute (10+)");const I=se.exists()?se.data():null,P={weak:0,developing:0,nearly:0,mastered:0};for(let x=0;x<j.length;x++){const O=j[x],k=q[x],fe=O.id,Ve=g.get(fe),Ue=k.exists()?k.data():null,Re=typeof Ue?.mastery=="number"?Ue.mastery:0,ne=Ue?.bucket,ge=KP(Re+Ve.delta),ae=QP(ge);ne&&I&&(P[ne]-=1),P[ae]+=1,M.set(O,{mastery:ge,bucket:ae,correctAnswers:(Ue?.correctAnswers||0)+Ve.correct,wrongAnswers:(Ue?.wrongAnswers||0)+Ve.wrong,lastDelta:Ve.delta,updatedAt:pn()},{merge:!0})}const N=I?.masteryBuckets||{weak:0,developing:0,nearly:0,mastered:0};M.set(H,{xp:(W.xp||0)+y,coins:(W.coins||0)+v,streakDays:te,lastDoneDate:l,badges:Array.from(C),updatedAt:pn()},{merge:!0}),M.set($,{totalAnswers:(I?.totalAnswers||0)+h,correctAnswers:(I?.correctAnswers||0)+f,totalAttempts:(I?.totalAttempts||0)+1,masteryBuckets:{weak:(N.weak||0)+P.weak,developing:(N.developing||0)+P.developing,nearly:(N.nearly||0)+P.nearly,mastered:(N.mastered||0)+P.mastered},lastAttemptId:S.id,lastDate:l,updatedAt:pn()},{merge:!0}),E={xpGain:y,coinsGain:v,streakDays:te,badges:Array.from(C)}}),{...E||{xpGain:0,coinsGain:0,streakDays:0,badges:[]},score:f,outOf:h}}const hE=[{id:"badge_dragon",title:"Badge Dragon",description:"Un badge pique  afficher",priceCoins:10},{id:"skin_bleu",title:"Skin Bleu",description:"Personnalisation bleue de ton avatar",priceCoins:15},{id:"skin_or",title:"Skin Or",description:"Style dor rare",priceCoins:25,requiresXp:150},{id:"pack_stickers",title:"Pack Stickers",description:"Stickers virtuels  collectionner",priceCoins:8},{id:"titre_champion",title:"Titre Champion",description:"Titre spcial dans ton profil",priceCoins:20,requiresXp:100}];function YP(){return hE}async function dE(r){return(await _n(jt(Ne,"users",r,"inventory"))).docs.map(t=>({id:t.id,...t.data()}))}async function JP(r,e){const t=hE.find(h=>h.id===e);if(!t)throw new Error("Item inconnu");const s=nt(Ne,"users",r,"stats","main"),o=nt(Ne,"users",r,"inventory",e);return await oE(Ne,async h=>{const[f,g]=await Promise.all([h.get(s),h.get(o)]),y=f.exists()?f.data():await wp(r);if(g.exists())throw new Error("Dj possd");const v=y.coins||0,E=y.xp||0;if(v<t.priceCoins)throw new Error("Pas assez de pices");if(t.requiresXp&&E<t.requiresXp)throw new Error("XP insuffisant");return h.set(o,{acquiredAt:pn(),title:t.title,description:t.description,priceCoins:t.priceCoins,requiresXp:t.requiresXp||null}),h.set(s,{coins:v-t.priceCoins,xp:E,updatedAt:pn()},{merge:!0}),{coins:v-t.priceCoins,xp:E}})}const E_=[{id:"fr",title:"Franais"},{id:"math",title:"Maths"},{id:"en",title:"Anglais"},{id:"es",title:"Espagnol"},{id:"hist",title:"Histoire"}];function ZP(){const{user:r}=zs(),[e,t]=Ee.useState([]),[s,o]=Ee.useState("fr"),[l,h]=Ee.useState([]),[f,g]=Ee.useState(null),[y,v]=Ee.useState([]);return Ee.useEffect(()=>{(async()=>{try{const E=await FP();t(E.length?E:E_)}catch{t(E_)}})()},[]),Ee.useEffect(()=>{(async()=>{const E=await uE(s,{uid:r?.uid});h(E)})()},[s,r]),Ee.useEffect(()=>{r&&(async()=>{const E=await wp(r.uid);g(E);const S=await dE(r.uid);v(S)})()},[r]),A.jsxs("div",{className:"container grid",children:[A.jsx("div",{className:"card",children:A.jsxs("div",{className:"row",style:{justifyContent:"space-between"},children:[A.jsxs("div",{children:[A.jsx("h2",{style:{margin:0},children:"Salut Malo "}),A.jsx("div",{className:"small",children:"Choisis une matire, puis un thme. Objectif : 10 questions par jour."})]}),f&&A.jsxs("div",{className:"kpi",children:[A.jsxs("div",{className:"pill",children:["XP: ",A.jsx("strong",{children:f.xp??0})]}),A.jsxs("div",{className:"pill",children:["Pices: ",A.jsx("strong",{children:f.coins??0})]}),A.jsxs("div",{className:"pill",children:["Srie: ",A.jsx("strong",{children:f.streakDays??0})," jours"]})]})]})}),A.jsxs("div",{className:"grid2",children:[A.jsxs("div",{className:"card",children:[A.jsx("h3",{style:{marginTop:0},children:"Matire"}),A.jsx("select",{className:"input",value:s,onChange:E=>o(E.target.value),children:e.map(E=>A.jsx("option",{value:E.id,children:E.title},E.id))}),A.jsx("div",{className:"small",style:{marginTop:8},children:"Priorits : Franais (grammaire & conjugaison) + Maths (fractions)."})]}),A.jsxs("div",{className:"card",children:[A.jsx("h3",{style:{marginTop:0},children:"Thmes"}),l.length===0?A.jsx("div",{className:"small",children:"Aucun thme pour linstant. (Parent : importe un pack JSON)"}):A.jsx("div",{className:"grid",children:l.map(E=>A.jsx(vo,{className:"btn secondary",to:`/theme/${E.id}`,children:E.title},E.id))})]})]}),f?.badges?.length?A.jsxs("div",{className:"card",children:[A.jsx("h3",{style:{marginTop:0},children:"Badges"}),A.jsx("div",{className:"row",children:f.badges.map(E=>A.jsx("span",{className:"badge",children:E},E))})]}):null,y.length?A.jsxs("div",{className:"card",children:[A.jsx("h3",{style:{marginTop:0},children:"Inventaire"}),A.jsx("div",{className:"row",children:y.map(E=>A.jsx("span",{className:"badge",children:E.title||E.id},E.id))})]}):null]})}function ek(){const{user:r,signInGoogle:e}=zs(),t=xc();return Ee.useEffect(()=>{r&&t("/")},[r]),A.jsx("div",{className:"container",children:A.jsxs("div",{className:"card",children:[A.jsx("h2",{style:{marginTop:0},children:"Connexion"}),A.jsx("p",{className:"small",children:"Connexion Google recommande (simple sur tablette Android)."}),A.jsx("button",{className:"btn",onClick:e,children:"Se connecter avec Google"}),A.jsx("hr",{}),A.jsxs("p",{className:"small",children:["Astuce : aprs ta premire connexion (toi), va dans Firestore et mets ",A.jsxs("code",{children:["users/","{uid}",".role"]}),'  "parent".']})]})})}function tk(r,e){return r.type==="mcq"?e===r.answerIndex:r.type==="short_text"||r.type==="fill_blank"?r.expected.includes(jo(e||"")):!1}function nk(r,e){return r===1?e?3:-1:r===2?e?5:-2:e?7:-3}function rk(r){return Math.max(0,Math.min(100,r))}function sk(r){return r>=80?"mastered":r>=60?"nearly":r>=30?"developing":"weak"}function fE(r){return r.toISOString().slice(0,10)}function ik(r,e){const t=new Date(r+"T00:00:00");return t.setDate(t.getDate()+e),fE(t)}function ok(r,e,t){const s=Math.max(0,Math.min(100,r));let o=1;return s>=81||e==="mastered"?o=10:s>=61||e==="nearly"?o=4:s>=31||e==="developing"?o=2:o=1,ik(t,o)}async function ak(r){const{uid:e,subjectId:t,themeId:s,answers:o,exercises:l,durationSec:h}=r,g=fE(new Date),y=nt(jt(Ne,"users",e,"attempts")),v=jt(Ne,"users",e,"attemptItems"),E=nt(Ne,"users",e,"progressSummary","main"),S=l.map((fe,Ve)=>{const Ue=tk(fe,o[fe.id]);return{exerciseId:fe.id,subjectId:t,themeId:s,difficulty:fe.difficulty,tags:fe.tags?.slice(0,3)||[],correct:Ue,index:Ve}}),M=S.filter(fe=>fe.correct).length,H=S.length,$=new Map;S.forEach(fe=>{const Ve=nk(fe.difficulty,fe.correct);fe.tags.forEach(Ue=>{const Re=$.get(Ue)||{delta:0,correct:0,wrong:0,results:[]};Re.delta+=Ve,Re.correct+=fe.correct?1:0,Re.wrong+=fe.correct?0:1,Re.results.push(fe.correct),$.set(Ue,Re)})});const j=Array.from($.keys()),K=await Promise.all(j.map(fe=>Ri(nt(Ne,"users",e,"tagProgress",fe)))),se=vp(Ne),q={subjectId:t,themeId:s,score:M,outOf:H,durationSec:h,itemsCount:S.length,date:g,createdAt:pn()};se.set(y,q),S.forEach(fe=>{const Ve=nt(v);se.set(Ve,{...fe,createdAt:pn(),answer:o[fe.exerciseId]??null})});const W={weak:0,developing:0,nearly:0,mastered:0},te={};j.forEach((fe,Ve)=>{const Ue=K[Ve],Re=Ue.exists()?Ue.data():null,ne=$.get(fe),ae=[...Array.isArray(Re?.last7Results)?Re.last7Results:[],...ne.results].slice(-7),L={correct:ae.filter(vn=>vn).length,wrong:ae.filter(vn=>!vn).length};let X=Re?.streakCorrect||0,Ae=Re?.streakWrong||0;ne.results.forEach(vn=>{vn?(X+=1,Ae=0):(Ae+=1,X=0)});const Pe=typeof Re?.mastery=="number"?Re.mastery:0,xe=rk(Pe+ne.delta),De=sk(xe),$e=Re?.bucket;$e&&(W[$e]-=1),W[De]+=1;const je=ok(xe,De,g),Ge=nt(Ne,"users",e,"tagProgress",fe),At={tagId:fe,mastery:xe,bucket:De,attempts:(Re?.attempts||0)+ne.results.length,correctAnswers:(Re?.correctAnswers||0)+ne.correct,wrongAnswers:(Re?.wrongAnswers||0)+ne.wrong,last7Results:ae,last7:L,lastSeenAt:pn(),lastCorrectAt:ne.correct>0?pn():Re?.lastCorrectAt||null,streakCorrect:X,streakWrong:Ae,lastDelta:ne.delta,nextDueDate:je,updatedAt:pn()};te[fe]=At,se.set(Ge,At,{merge:!0})});const ee=await Ri(E),C=ee.exists()?ee.data():null,I=C?.masteryBuckets||{weak:0,developing:0,nearly:0,mastered:0},P={weak:(I.weak||0)+W.weak,developing:(I.developing||0)+W.developing,nearly:(I.nearly||0)+W.nearly,mastered:(I.mastered||0)+W.mastered},N=Object.values(te).sort((fe,Ve)=>fe.mastery-Ve.mastery).map(fe=>fe.tagId),x=Array.isArray(C?.topWeakTags)?C.topWeakTags:[],O=Array.from(new Set([...N,...x])).slice(0,3),k={totalAnswers:(C?.totalAnswers||0)+H,correctAnswers:(C?.correctAnswers||0)+M,totalAttempts:(C?.totalAttempts||0)+1,masteryBuckets:P,lastAttemptId:y.id,lastDate:g,updatedAt:pn(),topWeakTags:O};return se.set(E,k,{merge:!0}),await se.commit(),{attemptId:y.id,score:M,outOf:H,summary:k,tagsUpdated:te}}function lk(r){const e=[];return Array.isArray(r.exercises)&&e.push(...r.exercises),Array.isArray(r.readings)&&r.readings.forEach(t=>{Array.isArray(t.questions)&&t.questions.forEach(s=>{e.push({...s,readingContext:{readingId:t.id,title:t.title,text:t.text}})})}),e}function T_(r,e){return r.type==="mcq"?e===r.answerIndex:r.type==="short_text"||r.type==="fill_blank"?r.expected.includes(jo(e||"")):!1}function Xu(r){const e=[],t=/_([^_]+)_/g;let s=0,o,l=0;for(;(o=t.exec(r))!==null;)o.index>s&&e.push(r.slice(s,o.index)),e.push(A.jsx("span",{style:{textDecoration:"underline"},children:o[1]},`u-${l++}`)),s=t.lastIndex;return s<r.length&&e.push(r.slice(s)),e}function uk(){const{themeId:r}=aT(),e=xc(),{user:t}=zs(),[s,o]=Ee.useState(null),[l,h]=Ee.useState([]),[f,g]=Ee.useState({}),[y]=Ee.useState(()=>Date.now()),[v,E]=Ee.useState(null),[S,M]=Ee.useState([]),[H,$]=Ee.useState([]),[j,K]=Ee.useState(!1);Ee.useEffect(()=>{(async()=>{if(!r)return;const q=await Ri(nt(Ne,"themes",r)),W=q.exists()?{id:r,...q.data()}:null;o(W);const te=await cE(r,{uid:t?.uid});let C=Array.isArray(W?.readings)?W.readings:[];try{const N=await UP(r);N.length&&(C=N)}catch{}const P=[...lk({exercises:te,readings:C})].sort(()=>Math.random()-.5);h(P.slice(0,10)),g({}),E(null),$([]),K(!1)})()},[r,t]);const se=async()=>{if(!t||!r||!s)return;const q=Math.max(1,Math.round((Date.now()-y)/1e3)),W=l.map(N=>({exerciseId:N.id,difficulty:N.difficulty,tags:N.tags||[],correct:T_(N,f[N.id])})),te=await ak({uid:t.uid,subjectId:s.subjectId,themeId:r,answers:f,exercises:l,durationSec:q}),ee=await XP({uid:t.uid,subjectId:s.subjectId,items:W,existingAttemptId:te.attemptId}),C=new Set(l.flatMap(N=>N.tags||[])),I=Object.values(te.tagsUpdated||{}).filter(N=>N&&C.has(N.tagId||"")).sort((N,x)=>(N.mastery??0)-(x.mastery??0)).slice(0,3).map(N=>N.tagId);M(I),E({score:ee.score,outOf:ee.outOf,durationSec:q,...ee});const P=l.map((N,x)=>{const O=f[N.id],k=T_(N,O);let fe="",Ve="";if(N.type==="mcq"){const Ue=N;fe=Ue.choices[Ue.answerIndex]||"",Ve=typeof O=="number"&&Ue.choices[O]||""}else(N.type==="short_text"||N.type==="fill_blank")&&(fe=N.expected[0]||"",Ve=O||"");return{id:N.id,prompt:N.prompt,correct:k,expected:fe||"",userAnswer:(Ve??"").toString()||"",idx:x+1}});$(P),K(!0)};return r?j&&H.length?A.jsxs("div",{className:"container grid",children:[A.jsxs("div",{className:"card",children:[A.jsxs("h2",{style:{margin:0},children:["Corrections  ",s?.title]}),v&&A.jsxs("div",{className:"small",children:["Score ",A.jsxs("strong",{children:[v.score,"/",v.outOf]}),"  ",v.durationSec,"s  +",v.xpGain," XP  +",v.coinsGain," pices"]})]}),A.jsxs("div",{className:"card",children:[A.jsx("div",{className:"grid",children:H.map(q=>A.jsxs("div",{className:"pill",style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:6,background:q.correct?"rgba(46, 204, 113, 0.12)":"rgba(255, 90, 111, 0.12)",border:q.correct?"1px solid rgba(46, 204, 113, 0.4)":"1px solid rgba(255, 90, 111, 0.4)"},children:[A.jsxs("div",{className:"small",children:["Question ",q.idx,"  ",q.correct?A.jsx("span",{className:"badge",style:{borderColor:"rgba(46,204,113,.6)",color:"#7fffb2"},children:" Bonne rponse"}):A.jsx("span",{className:"badge",style:{borderColor:"rgba(255,90,111,.6)",color:"#ff9fb0"},children:" Mauvaise rponse"})]}),A.jsx("div",{style:{fontWeight:700},children:q.prompt}),A.jsxs("div",{className:"small",children:["Ta rponse : ",A.jsx("strong",{children:q.userAnswer})]}),!q.correct&&A.jsxs("div",{className:"small",children:["Correction : ",A.jsx("strong",{children:q.expected})]})]},q.id))}),A.jsxs("div",{className:"row",style:{marginTop:16},children:[A.jsx("button",{className:"btn",onClick:()=>e("/"),children:"Retour  laccueil"}),A.jsx("button",{className:"btn secondary",onClick:()=>{K(!1),$([]),E(null),g({})},children:"Refaire une session"})]})]})]}):A.jsxs("div",{className:"container grid",children:[A.jsxs("div",{className:"card",children:[A.jsx("h2",{style:{margin:0},children:s?.title||"Session"}),A.jsx("div",{className:"small",children:"Fais de ton mieux. Objectif : rgularit "})]}),l.map((q,W)=>{const te=q.readingContext,ee=te&&(W===0||l[W-1].readingContext?.readingId!==te.readingId);return A.jsxs("div",{className:"card",children:[ee&&te&&A.jsxs("div",{style:{marginBottom:10},children:[A.jsxs("div",{className:"small",style:{marginBottom:4},children:["Lecture : ",te.title]}),A.jsx("div",{className:"small",style:{whiteSpace:"pre-wrap"},children:Xu(te.text)}),A.jsx("hr",{})]}),A.jsxs("div",{className:"small",children:["Question ",W+1," / ",l.length," ",A.jsxs("span",{className:"badge",children:["Difficult ",q.difficulty]})]}),A.jsx("div",{style:{fontWeight:800,marginTop:6},children:Xu(q.prompt)}),q.type==="mcq"&&A.jsx("div",{className:"grid",style:{marginTop:10},children:q.choices.map((C,I)=>A.jsx("button",{type:"button",className:"btn "+(f[q.id]===I?"":"secondary"),onClick:()=>g(P=>({...P,[q.id]:I})),style:{textAlign:"left",opacity:f[q.id]===I?1:.85},"aria-pressed":f[q.id]===I,children:Xu(C)},I))}),q.type==="short_text"&&A.jsx("div",{style:{marginTop:10},children:A.jsx("input",{className:"input",placeholder:"Ta rponse",value:f[q.id]??"",onChange:C=>g(I=>({...I,[q.id]:C.target.value}))})}),q.type==="fill_blank"&&A.jsxs("div",{style:{marginTop:10},children:[A.jsx("div",{className:"small",children:Xu(q.text)}),A.jsx("input",{className:"input",placeholder:"Le mot manquant",value:f[q.id]??"",onChange:C=>g(I=>({...I,[q.id]:C.target.value}))})]})]},q.id)}),A.jsxs("div",{className:"card",children:[A.jsxs("div",{className:"row",children:[A.jsx("button",{className:"btn",onClick:se,children:"Corriger et enregistrer"}),v&&A.jsxs("div",{className:"small",children:["Score ",A.jsxs("strong",{children:[v.score,"/",v.outOf]}),"  ",v.durationSec,"s  +",A.jsx("strong",{children:v.xpGain})," XP  +",A.jsx("strong",{children:v.coinsGain})," pices  Srie ",A.jsx("strong",{children:v.streakDays})]})]}),v?.badges?.length?A.jsx("div",{className:"row",style:{marginTop:10},children:v.badges.map(q=>A.jsx("span",{className:"badge",children:q},q))}):null,S.length?A.jsxs("div",{className:"small",style:{marginTop:10},children:["Tags  renforcer (thme) : ",S.map(q=>A.jsx("span",{className:"badge",children:q},q))]}):null]}),H.length?A.jsxs("div",{className:"card",children:[A.jsx("h3",{style:{marginTop:0},children:"Corrections"}),A.jsx("div",{className:"grid",children:H.map(q=>A.jsxs("div",{className:"pill",style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:6},children:[A.jsxs("div",{className:"small",children:["Question ",q.idx,"  ",q.correct?A.jsx("span",{className:"badge",children:" Bonne rponse"}):A.jsx("span",{className:"badge",children:" Mauvaise rponse"})]}),A.jsx("div",{style:{fontWeight:700},children:q.prompt}),A.jsxs("div",{className:"small",children:["Ta rponse : ",A.jsx("strong",{children:q.userAnswer})]}),!q.correct&&A.jsxs("div",{className:"small",children:["Correction : ",A.jsx("strong",{children:q.expected})]})]},q.id))})]}):null]}):A.jsx("div",{className:"container",children:A.jsx("div",{className:"card",children:"Thme introuvable."})})}function ck(){const[r,e]=Ee.useState(""),t=async s=>{if(!s)return;e("Lecture du fichier");const o=await s.text();let l;try{l=JSON.parse(o)}catch{e(" JSON invalide");return}if(!l?.subjects?.length){e(" Format inattendu (subjects manquant)");return}e("Import en cours"),await BP(l),e(" Import termin")};return A.jsx("div",{className:"container",children:A.jsxs("div",{className:"card",children:[A.jsx("h2",{style:{marginTop:0},children:"Import dexercices (Parent)"}),A.jsx("p",{className:"small",children:"Importe un pack JSON (gnr par moi) : matires  thmes  exercices."}),A.jsx("input",{className:"input",type:"file",accept:".json,application/json",onChange:s=>t(s.target.files?.[0]||null)}),r&&A.jsx("p",{className:"small",style:{marginTop:10},children:r}),A.jsx("hr",{}),A.jsx("p",{className:"small",children:"Conseil : commence par importer les packs Franais (grammaire + conjugaison) et Maths (fractions)."})]})})}const hk=[{id:"all",label:"Toutes"},{id:"fr",label:"Franais"},{id:"math",label:"Maths"},{id:"en",label:"Anglais"},{id:"es",label:"Espagnol"},{id:"hist",label:"Histoire"}];function dk(r){if(!r)return null;const e=r.split("_")[0];return e==="fr"||e==="math"||e==="en"||e==="es"||e==="hist"?e:null}function I_(r){return r.last7?r.last7:Array.isArray(r.last7Results)?{correct:r.last7Results.filter(Boolean).length,wrong:r.last7Results.filter(e=>!e).length}:{correct:0,wrong:0}}function fk(){const{user:r,role:e}=zs(),[t,s]=Ee.useState([]),[o,l]=Ee.useState(""),[h,f]=Ee.useState([]),[g,y]=Ee.useState(!1),[v,E]=Ee.useState("fr"),[S,M]=Ee.useState(null);Ee.useEffect(()=>{r&&(e==="parent"?(async()=>{const se=(await _n(Ai(jt(Ne,"users"),Ci("role","==","child")))).docs.map(q=>({id:q.id,displayName:q.data().displayName||"Enfant"}));s(se),se[0]&&l(se[0].id)})():l(r.uid))},[r,e]);const H=Ee.useCallback(async K=>{y(!0);const q=(await _n(jt(Ne,"users",K,"tagProgress"))).docs.map(ee=>({id:ee.id,tagId:ee.id,...ee.data()}));f(q);const te=(await _n(jt(Ne,"users",K,"progressSummary"))).docs.find(ee=>ee.id==="main");M(te?.data()||null),y(!1)},[]);Ee.useEffect(()=>{o&&H(o)},[o,H]);const $=h.filter(K=>v==="all"?!0:dk(K.tagId)===v).sort((K,se)=>(K.mastery||0)-(se.mastery||0)).slice(0,20),j=()=>{const K=[["tagId","mastery","bucket","attempts","correct","wrong","last7_correct","last7_wrong","nextDueDate"]];h.forEach(ee=>{const C=I_(ee);K.push([ee.tagId||ee.id,String(ee.mastery??0),ee.bucket||"",String(ee.attempts??0),String(ee.correctAnswers??0),String(ee.wrongAnswers??0),String(C.correct),String(C.wrong),ee.nextDueDate||""])});const se=K.map(ee=>ee.map(C=>`"${(C??"").toString().replace(/"/g,'""')}"`).join(",")).join(`
`),q=new Blob([se],{type:"text/csv;charset=utf-8;"}),W=URL.createObjectURL(q),te=document.createElement("a");te.href=W,te.download=`progress-${o||"user"}.csv`,te.click(),URL.revokeObjectURL(W)};return A.jsxs("div",{className:"container",children:[A.jsxs("div",{className:"card",children:[A.jsx("h2",{style:{marginTop:0},children:"Progression par tag"}),A.jsxs("div",{className:"row",style:{gap:8,alignItems:"center"},children:[e==="parent"&&A.jsxs(A.Fragment,{children:[A.jsx("label",{className:"small",children:"Enfant"}),A.jsx("select",{className:"input",value:o,onChange:K=>l(K.target.value),children:t.map(K=>A.jsx("option",{value:K.id,children:K.displayName},K.id))})]}),A.jsx("label",{className:"small",children:"Matire"}),A.jsx("select",{className:"input",value:v,onChange:K=>E(K.target.value),children:hk.map(K=>A.jsx("option",{value:K.id,children:K.label},K.id))}),A.jsx("button",{className:"btn secondary",onClick:j,disabled:!h.length,children:"Tlcharger CSV"})]}),S&&A.jsxs("div",{className:"kpi",style:{marginTop:10},children:[A.jsxs("div",{className:"pill",children:["Rponses: ",A.jsx("strong",{children:S.totalAnswers||0})]}),A.jsxs("div",{className:"pill",children:["Taux: ",A.jsxs("strong",{children:[S.totalAnswers?Math.round((S.correctAnswers||0)/S.totalAnswers*100):0,"%"]})]}),A.jsxs("div",{className:"pill",children:["Tentatives: ",A.jsx("strong",{children:S.totalAttempts||0})]})]})]}),g?A.jsx("div",{className:"card",children:"Chargement"}):A.jsxs("div",{className:"card",children:[A.jsx("h3",{style:{marginTop:0},children:"Top 20 faibles"}),$.length===0?A.jsx("div",{className:"small",children:"Aucun tag pour le moment."}):A.jsx("div",{className:"grid",children:$.map(K=>{const se=I_(K);return A.jsx("div",{className:"pill",style:{justifyContent:"space-between",display:"flex",alignItems:"center"},children:A.jsxs("div",{children:[A.jsx("div",{style:{fontWeight:700},children:K.tagId}),A.jsxs("div",{className:"small",children:[K.mastery??0,"/100  ",K.bucket,"  ",se.correct,"/",se.correct+se.wrong," sur 7  Prochaine: ",K.nextDueDate||""]}),A.jsx("div",{style:{height:8,background:"rgba(255,255,255,0.08)",borderRadius:999,marginTop:6,width:"100%"},children:A.jsx("div",{style:{height:8,borderRadius:999,width:`${Math.min(100,Math.max(0,K.mastery||0))}%`,background:"linear-gradient(90deg,#ff5a6f,#7aa2ff)"}})}),A.jsx("div",{className:"row",style:{marginTop:6,gap:4},children:(K.last7Results||[]).map((q,W)=>A.jsx("span",{style:{width:10,height:10,borderRadius:"50%",background:q?"#2ecc71":"#ff5a6f",opacity:.9}},W))})]})},K.id)})})]})]})}const S_=[{id:"all",label:"Toutes"},{id:"fr",label:"Franais"},{id:"math",label:"Maths"},{id:"en",label:"Anglais"},{id:"es",label:"Espagnol"},{id:"hist",label:"Histoire"}];function pk(){const[r,e]=Ee.useState([]),[t,s]=Ee.useState(""),[o,l]=Ee.useState("all"),[h,f]=Ee.useState([]),[g,y]=Ee.useState(!1),[v,E]=Ee.useState({}),[S,M]=Ee.useState(null);Ee.useEffect(()=>{(async()=>{const te=(await _n(Ai(jt(Ne,"users"),Ci("role","==","child")))).docs.map(ee=>({id:ee.id,displayName:ee.data().displayName||"Enfant"}));e(te),te[0]&&s(te[0].id)})()},[]),Ee.useEffect(()=>{t&&(y(!0),(async()=>{const W=S_.filter(I=>I.id!=="all").map(I=>I.id),te=o==="all"?W:[o],ee=[];for(const I of te){const P=await uE(I,{uid:t,includeHidden:!0,includeOverrides:!0});ee.push(...P)}const C=ee.sort((I,P)=>(I.title||"").localeCompare(P.title||""));f(C),y(!1)})())},[t,o]);const H=async(W,te)=>{t&&(await qP(t,W,te),f(ee=>ee.map(C=>C.id===W?{...C,visibleOverride:te}:C)))},$=async(W,te)=>{await zP(W,te),f(ee=>ee.map(C=>C.id===W?{...C,hidden:te}:C))},j=async W=>{window.confirm("Supprimer ce thme et toutes ses questions ?")&&(await HP(W),f(te=>te.filter(ee=>ee.id!==W)),E(te=>{const ee={...te};return delete ee[W],ee}))},K=async W=>{M(W);const te=await cE(W,{uid:t,includeHidden:!0,includeOverrides:!0});E(ee=>({...ee,[W]:te})),M(null)},se=async(W,te)=>{await $P(W,te),E(ee=>{const C={};return Object.keys(ee).forEach(I=>{C[I]=ee[I].map(P=>P.id===W?{...P,hidden:te}:P)}),{...ee,...C}})},q=async(W,te,ee)=>{t&&(await WP(t,W,te),E(C=>({...C,[ee]:(C[ee]||[]).map(I=>I.id===W?{...I,visibleOverride:te}:I)})))};return A.jsxs("div",{className:"container",children:[A.jsxs("div",{className:"card",children:[A.jsx("h2",{style:{marginTop:0},children:"Modration contenus"}),A.jsxs("div",{className:"row",style:{gap:10},children:[A.jsxs("div",{className:"row",style:{gap:6},children:[A.jsx("span",{className:"small",children:"Enfant"}),A.jsx("select",{className:"input",value:t,onChange:W=>s(W.target.value),children:r.map(W=>A.jsx("option",{value:W.id,children:W.displayName},W.id))})]}),A.jsxs("div",{className:"row",style:{gap:6},children:[A.jsx("span",{className:"small",children:"Matire"}),A.jsx("select",{className:"input",value:o,onChange:W=>l(W.target.value),children:S_.map(W=>A.jsx("option",{value:W.id,children:W.label},W.id))})]})]})]}),g?A.jsx("div",{className:"card",children:"Chargement"}):A.jsxs("div",{className:"grid",children:[h.map(W=>{const te=W.visibleOverride,ee=te!==void 0?te:!W.hidden;return A.jsxs("div",{className:"card",children:[A.jsxs("div",{className:"row",style:{justifyContent:"space-between"},children:[A.jsxs("div",{children:[A.jsx("div",{style:{fontWeight:800},children:W.title}),A.jsx("div",{className:"small",children:W.subjectId}),W.hidden&&A.jsx("div",{className:"badge",children:"Masqu globalement"}),te===!1&&A.jsx("div",{className:"badge",children:"Masqu pour lenfant"})]}),A.jsxs("div",{className:"row",children:[A.jsx("button",{className:"btn secondary",onClick:()=>H(W.id,!ee),children:ee?"Masquer pour lenfant":"Afficher pour lenfant"}),A.jsx("button",{className:"btn secondary",onClick:()=>$(W.id,!W.hidden),children:W.hidden?"Ractiver globalement":"Masquer globalement"}),A.jsx("button",{className:"btn secondary",onClick:()=>j(W.id),children:"Supprimer"}),A.jsx("button",{className:"btn secondary",onClick:()=>K(W.id),children:"Voir questions"})]})]}),(v[W.id]||[]).length>0&&A.jsxs("div",{style:{marginTop:10},children:[A.jsx("div",{className:"small",style:{marginBottom:6},children:"Questions"}),A.jsx("div",{className:"grid",children:v[W.id].map(C=>{const I=C.visibleOverride,P=I!==void 0?I:!C.hidden;return A.jsxs("div",{className:"pill",style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:6},children:[A.jsxs("div",{className:"small",children:[C.prompt?.slice(0,80)||C.id," ",C.hidden&&A.jsx("span",{className:"badge",children:"Masqu global"})," ",I===!1&&A.jsx("span",{className:"badge",children:"Masqu enfant"})]}),A.jsxs("div",{className:"row",children:[A.jsx("button",{className:"btn secondary",onClick:()=>q(C.id,!P,W.id),children:P?"Masquer enfant":"Afficher enfant"}),A.jsx("button",{className:"btn secondary",onClick:()=>se(C.id,!C.hidden),children:C.hidden?"Ractiver global":"Masquer global"})]})]},C.id)})})]}),S===W.id&&A.jsx("div",{className:"small",style:{marginTop:6},children:"Chargement des questions"})]},W.id)}),h.length===0&&A.jsx("div",{className:"card small",children:"Aucun thme."})]})]})}function mk(){const{user:r}=zs(),[e,t]=Ee.useState(null),[s,o]=Ee.useState({}),[l,h]=Ee.useState(""),[f,g]=Ee.useState(!1);Ee.useEffect(()=>{r&&(async()=>{const E=await wp(r.uid);t(E);const S=await dE(r.uid),M={};S.forEach(H=>{M[H.id]=H}),o(M)})()},[r]);const y=async E=>{if(r){h(""),g(!0);try{const S=await JP(r.uid,E.id);t(M=>({...M||{},coins:S.coins,xp:S.xp})),o(M=>({...M,[E.id]:{acquiredAt:new Date().toISOString()}}))}catch(S){h(S.message||"Erreur achat")}finally{g(!1)}}},v=YP();return A.jsxs("div",{className:"container",children:[A.jsxs("div",{className:"card",children:[A.jsx("h2",{style:{marginTop:0},children:"Rcompenses"}),A.jsx("div",{className:"small",children:"Utilise tes pices pour acheter et collectionner des items."}),e&&A.jsxs("div",{className:"kpi",style:{marginTop:8},children:[A.jsxs("div",{className:"pill",children:["Pices: ",A.jsx("strong",{children:e.coins||0})]}),A.jsxs("div",{className:"pill",children:["XP: ",A.jsx("strong",{children:e.xp||0})]})]}),l&&A.jsx("div",{className:"small",style:{color:"#ff5a6f",marginTop:8},children:l})]}),A.jsx("div",{className:"grid",children:v.map(E=>{const S=!!s[E.id],M=(e?.coins||0)>=E.priceCoins&&(!E.requiresXp||(e?.xp||0)>=E.requiresXp);return A.jsxs("div",{className:"card",style:{opacity:S?.7:1},children:[A.jsxs("div",{className:"row",style:{justifyContent:"space-between"},children:[A.jsxs("div",{children:[A.jsx("div",{style:{fontWeight:800},children:E.title}),A.jsx("div",{className:"small",children:E.description})]}),S&&A.jsx("span",{className:"badge",children:"Dj acquis"})]}),A.jsxs("div",{className:"row",style:{marginTop:10},children:[A.jsxs("div",{className:"pill",children:["Prix: ",E.priceCoins," pices"]}),E.requiresXp&&A.jsxs("div",{className:"pill",children:["Niv: ",E.requiresXp," XP"]})]}),!S&&A.jsx("button",{className:"btn",disabled:!M||f,onClick:()=>y(E),children:M?"Acheter":"Manque de pices/XP"})]},E.id)})})]})}function gk(){return A.jsx("div",{className:"container",children:A.jsx("div",{className:"card",children:"Page introuvable."})})}function yk(){return A.jsxs(NT,{children:[A.jsx("div",{className:"container",children:A.jsx(jP,{})}),A.jsxs(IT,{children:[A.jsx(Dr,{path:"/connexion",element:A.jsx(ek,{})}),A.jsx(Dr,{path:"/",element:A.jsx(Ud,{children:A.jsx(ZP,{})})}),A.jsx(Dr,{path:"/theme/:themeId",element:A.jsx(Ud,{children:A.jsx(uk,{})})}),A.jsx(Dr,{path:"/admin/import",element:A.jsx(Bd,{children:A.jsx(ck,{})})}),A.jsx(Dr,{path:"/admin/progression",element:A.jsx(Bd,{children:A.jsx(fk,{})})}),A.jsx(Dr,{path:"/admin/moderation",element:A.jsx(Bd,{children:A.jsx(pk,{})})}),A.jsx(Dr,{path:"/recompenses",element:A.jsx(Ud,{children:A.jsx(mk,{})})}),A.jsx(Dr,{path:"*",element:A.jsx(gk,{})})]})]})}function _k(){"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("${import.meta.env.BASE_URL}sw.js").catch(()=>{})})}N0.createRoot(document.getElementById("root")).render(A.jsx(Ee.StrictMode,{children:A.jsx(bP,{children:A.jsx(yk,{})})}));_k();
