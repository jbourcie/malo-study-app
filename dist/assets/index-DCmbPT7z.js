function pT(r,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in r)){const l=Object.getOwnPropertyDescriptor(s,o);l&&Object.defineProperty(r,o,l.get?l:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function E_(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var vd={exports:{}},za={},wd={exports:{}},Ve={};var Ag;function mT(){if(Ag)return Ve;Ag=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),E=Symbol.iterator;function A(M){return M===null||typeof M!="object"?null:(M=E&&M[E]||M["@@iterator"],typeof M=="function"?M:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H=Object.assign,q={};function U(M,K,Se){this.props=M,this.context=K,this.refs=q,this.updater=Se||b}U.prototype.isReactComponent={},U.prototype.setState=function(M,K){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,K,"setState")},U.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function re(){}re.prototype=U.prototype;function oe(M,K,Se){this.props=M,this.context=K,this.refs=q,this.updater=Se||b}var j=oe.prototype=new re;j.constructor=oe,H(j,U.prototype),j.isPureReactComponent=!0;var ee=Array.isArray,ie=Object.prototype.hasOwnProperty,ne={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function I(M,K,Se){var Ce,ke={},Ne=null,Be=null;if(K!=null)for(Ce in K.ref!==void 0&&(Be=K.ref),K.key!==void 0&&(Ne=""+K.key),K)ie.call(K,Ce)&&!P.hasOwnProperty(Ce)&&(ke[Ce]=K[Ce]);var be=arguments.length-2;if(be===1)ke.children=Se;else if(1<be){for(var Ge=Array(be),At=0;At<be;At++)Ge[At]=arguments[At+2];ke.children=Ge}if(M&&M.defaultProps)for(Ce in be=M.defaultProps,be)ke[Ce]===void 0&&(ke[Ce]=be[Ce]);return{$$typeof:r,type:M,key:Ne,ref:Be,props:ke,_owner:ne.current}}function C(M,K){return{$$typeof:r,type:M.type,key:K,ref:M.ref,props:M.props,_owner:M._owner}}function k(M){return typeof M=="object"&&M!==null&&M.$$typeof===r}function N(M){var K={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(Se){return K[Se]})}var O=/\/+/g;function R(M,K){return typeof M=="object"&&M!==null&&M.key!=null?N(""+M.key):K.toString(36)}function fe(M,K,Se,Ce,ke){var Ne=typeof M;(Ne==="undefined"||Ne==="boolean")&&(M=null);var Be=!1;if(M===null)Be=!0;else switch(Ne){case"string":case"number":Be=!0;break;case"object":switch(M.$$typeof){case r:case e:Be=!0}}if(Be)return Be=M,ke=ke(Be),M=Ce===""?"."+R(Be,0):Ce,ee(ke)?(Se="",M!=null&&(Se=M.replace(O,"$&/")+"/"),fe(ke,K,Se,"",function(At){return At})):ke!=null&&(k(ke)&&(ke=C(ke,Se+(!ke.key||Be&&Be.key===ke.key?"":(""+ke.key).replace(O,"$&/")+"/")+M)),K.push(ke)),1;if(Be=0,Ce=Ce===""?".":Ce+":",ee(M))for(var be=0;be<M.length;be++){Ne=M[be];var Ge=Ce+R(Ne,be);Be+=fe(Ne,K,Se,Ge,ke)}else if(Ge=A(M),typeof Ge=="function")for(M=Ge.call(M),be=0;!(Ne=M.next()).done;)Ne=Ne.value,Ge=Ce+R(Ne,be++),Be+=fe(Ne,K,Se,Ge,ke);else if(Ne==="object")throw K=String(M),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.");return Be}function De(M,K,Se){if(M==null)return M;var Ce=[],ke=0;return fe(M,Ce,"","",function(Ne){return K.call(Se,Ne,ke++)}),Ce}function Ue(M){if(M._status===-1){var K=M._result;K=K(),K.then(function(Se){(M._status===0||M._status===-1)&&(M._status=1,M._result=Se)},function(Se){(M._status===0||M._status===-1)&&(M._status=2,M._result=Se)}),M._status===-1&&(M._status=0,M._result=K)}if(M._status===1)return M._result.default;throw M._result}var Re={current:null},J={transition:null},ge={ReactCurrentDispatcher:Re,ReactCurrentBatchConfig:J,ReactCurrentOwner:ne};function ae(){throw Error("act(...) is not supported in production builds of React.")}return Ve.Children={map:De,forEach:function(M,K,Se){De(M,function(){K.apply(this,arguments)},Se)},count:function(M){var K=0;return De(M,function(){K++}),K},toArray:function(M){return De(M,function(K){return K})||[]},only:function(M){if(!k(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},Ve.Component=U,Ve.Fragment=t,Ve.Profiler=o,Ve.PureComponent=oe,Ve.StrictMode=s,Ve.Suspense=g,Ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ge,Ve.act=ae,Ve.cloneElement=function(M,K,Se){if(M==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+M+".");var Ce=H({},M.props),ke=M.key,Ne=M.ref,Be=M._owner;if(K!=null){if(K.ref!==void 0&&(Ne=K.ref,Be=ne.current),K.key!==void 0&&(ke=""+K.key),M.type&&M.type.defaultProps)var be=M.type.defaultProps;for(Ge in K)ie.call(K,Ge)&&!P.hasOwnProperty(Ge)&&(Ce[Ge]=K[Ge]===void 0&&be!==void 0?be[Ge]:K[Ge])}var Ge=arguments.length-2;if(Ge===1)Ce.children=Se;else if(1<Ge){be=Array(Ge);for(var At=0;At<Ge;At++)be[At]=arguments[At+2];Ce.children=be}return{$$typeof:r,type:M.type,key:ke,ref:Ne,props:Ce,_owner:Be}},Ve.createContext=function(M){return M={$$typeof:h,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},M.Provider={$$typeof:l,_context:M},M.Consumer=M},Ve.createElement=I,Ve.createFactory=function(M){var K=I.bind(null,M);return K.type=M,K},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(M){return{$$typeof:f,render:M}},Ve.isValidElement=k,Ve.lazy=function(M){return{$$typeof:w,_payload:{_status:-1,_result:M},_init:Ue}},Ve.memo=function(M,K){return{$$typeof:y,type:M,compare:K===void 0?null:K}},Ve.startTransition=function(M){var K=J.transition;J.transition={};try{M()}finally{J.transition=K}},Ve.unstable_act=ae,Ve.useCallback=function(M,K){return Re.current.useCallback(M,K)},Ve.useContext=function(M){return Re.current.useContext(M)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(M){return Re.current.useDeferredValue(M)},Ve.useEffect=function(M,K){return Re.current.useEffect(M,K)},Ve.useId=function(){return Re.current.useId()},Ve.useImperativeHandle=function(M,K,Se){return Re.current.useImperativeHandle(M,K,Se)},Ve.useInsertionEffect=function(M,K){return Re.current.useInsertionEffect(M,K)},Ve.useLayoutEffect=function(M,K){return Re.current.useLayoutEffect(M,K)},Ve.useMemo=function(M,K){return Re.current.useMemo(M,K)},Ve.useReducer=function(M,K,Se){return Re.current.useReducer(M,K,Se)},Ve.useRef=function(M){return Re.current.useRef(M)},Ve.useState=function(M){return Re.current.useState(M)},Ve.useSyncExternalStore=function(M,K,Se){return Re.current.useSyncExternalStore(M,K,Se)},Ve.useTransition=function(){return Re.current.useTransition()},Ve.version="18.3.1",Ve}var Rg;function pf(){return Rg||(Rg=1,wd.exports=mT()),wd.exports}var Cg;function gT(){if(Cg)return za;Cg=1;var r=pf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(f,g,y){var w,E={},A=null,b=null;y!==void 0&&(A=""+y),g.key!==void 0&&(A=""+g.key),g.ref!==void 0&&(b=g.ref);for(w in g)s.call(g,w)&&!l.hasOwnProperty(w)&&(E[w]=g[w]);if(f&&f.defaultProps)for(w in g=f.defaultProps,g)E[w]===void 0&&(E[w]=g[w]);return{$$typeof:e,type:f,key:A,ref:b,props:E,_owner:o.current}}return za.Fragment=t,za.jsx=h,za.jsxs=h,za}var Pg;function yT(){return Pg||(Pg=1,vd.exports=gT()),vd.exports}var x=yT(),he=pf();const xe=E_(he),_T=pT({__proto__:null,default:xe},[he]);var zu={},Ed={exports:{}},tn={},Td={exports:{}},Id={};var kg;function vT(){return kg||(kg=1,(function(r){function e(J,ge){var ae=J.length;J.push(ge);e:for(;0<ae;){var M=ae-1>>>1,K=J[M];if(0<o(K,ge))J[M]=ge,J[ae]=K,ae=M;else break e}}function t(J){return J.length===0?null:J[0]}function s(J){if(J.length===0)return null;var ge=J[0],ae=J.pop();if(ae!==ge){J[0]=ae;e:for(var M=0,K=J.length,Se=K>>>1;M<Se;){var Ce=2*(M+1)-1,ke=J[Ce],Ne=Ce+1,Be=J[Ne];if(0>o(ke,ae))Ne<K&&0>o(Be,ke)?(J[M]=Be,J[Ne]=ae,M=Ne):(J[M]=ke,J[Ce]=ae,M=Ce);else if(Ne<K&&0>o(Be,ae))J[M]=Be,J[Ne]=ae,M=Ne;else break e}}return ge}function o(J,ge){var ae=J.sortIndex-ge.sortIndex;return ae!==0?ae:J.id-ge.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var h=Date,f=h.now();r.unstable_now=function(){return h.now()-f}}var g=[],y=[],w=1,E=null,A=3,b=!1,H=!1,q=!1,U=typeof setTimeout=="function"?setTimeout:null,re=typeof clearTimeout=="function"?clearTimeout:null,oe=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(J){for(var ge=t(y);ge!==null;){if(ge.callback===null)s(y);else if(ge.startTime<=J)s(y),ge.sortIndex=ge.expirationTime,e(g,ge);else break;ge=t(y)}}function ee(J){if(q=!1,j(J),!H)if(t(g)!==null)H=!0,Ue(ie);else{var ge=t(y);ge!==null&&Re(ee,ge.startTime-J)}}function ie(J,ge){H=!1,q&&(q=!1,re(I),I=-1),b=!0;var ae=A;try{for(j(ge),E=t(g);E!==null&&(!(E.expirationTime>ge)||J&&!N());){var M=E.callback;if(typeof M=="function"){E.callback=null,A=E.priorityLevel;var K=M(E.expirationTime<=ge);ge=r.unstable_now(),typeof K=="function"?E.callback=K:E===t(g)&&s(g),j(ge)}else s(g);E=t(g)}if(E!==null)var Se=!0;else{var Ce=t(y);Ce!==null&&Re(ee,Ce.startTime-ge),Se=!1}return Se}finally{E=null,A=ae,b=!1}}var ne=!1,P=null,I=-1,C=5,k=-1;function N(){return!(r.unstable_now()-k<C)}function O(){if(P!==null){var J=r.unstable_now();k=J;var ge=!0;try{ge=P(!0,J)}finally{ge?R():(ne=!1,P=null)}}else ne=!1}var R;if(typeof oe=="function")R=function(){oe(O)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,De=fe.port2;fe.port1.onmessage=O,R=function(){De.postMessage(null)}}else R=function(){U(O,0)};function Ue(J){P=J,ne||(ne=!0,R())}function Re(J,ge){I=U(function(){J(r.unstable_now())},ge)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(J){J.callback=null},r.unstable_continueExecution=function(){H||b||(H=!0,Ue(ie))},r.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<J?Math.floor(1e3/J):5},r.unstable_getCurrentPriorityLevel=function(){return A},r.unstable_getFirstCallbackNode=function(){return t(g)},r.unstable_next=function(J){switch(A){case 1:case 2:case 3:var ge=3;break;default:ge=A}var ae=A;A=ge;try{return J()}finally{A=ae}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(J,ge){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var ae=A;A=J;try{return ge()}finally{A=ae}},r.unstable_scheduleCallback=function(J,ge,ae){var M=r.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?M+ae:M):ae=M,J){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=ae+K,J={id:w++,callback:ge,priorityLevel:J,startTime:ae,expirationTime:K,sortIndex:-1},ae>M?(J.sortIndex=ae,e(y,J),t(g)===null&&J===t(y)&&(q?(re(I),I=-1):q=!0,Re(ee,ae-M))):(J.sortIndex=K,e(g,J),H||b||(H=!0,Ue(ie))),J},r.unstable_shouldYield=N,r.unstable_wrapCallback=function(J){var ge=A;return function(){var ae=A;A=ge;try{return J.apply(this,arguments)}finally{A=ae}}}})(Id)),Id}var Ng;function wT(){return Ng||(Ng=1,Td.exports=vT()),Td.exports}var xg;function ET(){if(xg)return tn;xg=1;var r=pf(),e=wT();function t(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(n,i){h(n,i),h(n+"Capture",i)}function h(n,i){for(o[n]=i,n=0;n<i.length;n++)s.add(i[n])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},E={};function A(n){return g.call(E,n)?!0:g.call(w,n)?!1:y.test(n)?E[n]=!0:(w[n]=!0,!1)}function b(n,i,a,c){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function H(n,i,a,c){if(i===null||typeof i>"u"||b(n,i,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function q(n,i,a,c,d,p,v){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=i,this.sanitizeURL=p,this.removeEmptyString=v}var U={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){U[n]=new q(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];U[i]=new q(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){U[n]=new q(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){U[n]=new q(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){U[n]=new q(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){U[n]=new q(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){U[n]=new q(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){U[n]=new q(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){U[n]=new q(n,5,!1,n.toLowerCase(),null,!1,!1)});var re=/[\-:]([a-z])/g;function oe(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(re,oe);U[i]=new q(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(re,oe);U[i]=new q(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(re,oe);U[i]=new q(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){U[n]=new q(n,1,!1,n.toLowerCase(),null,!1,!1)}),U.xlinkHref=new q("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){U[n]=new q(n,1,!1,n.toLowerCase(),null,!0,!0)});function j(n,i,a,c){var d=U.hasOwnProperty(i)?U[i]:null;(d!==null?d.type!==0:c||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(H(i,a,d,c)&&(a=null),c||d===null?A(i)&&(a===null?n.removeAttribute(i):n.setAttribute(i,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(i=d.attributeName,c=d.attributeNamespace,a===null?n.removeAttribute(i):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?n.setAttributeNS(c,i,a):n.setAttribute(i,a))))}var ee=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ie=Symbol.for("react.element"),ne=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),N=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),fe=Symbol.for("react.suspense_list"),De=Symbol.for("react.memo"),Ue=Symbol.for("react.lazy"),Re=Symbol.for("react.offscreen"),J=Symbol.iterator;function ge(n){return n===null||typeof n!="object"?null:(n=J&&n[J]||n["@@iterator"],typeof n=="function"?n:null)}var ae=Object.assign,M;function K(n){if(M===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);M=i&&i[1]||""}return`
`+M+n}var Se=!1;function Ce(n,i){if(!n||Se)return"";Se=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(B){var c=B}Reflect.construct(n,[],i)}else{try{i.call()}catch(B){c=B}n.call(i.prototype)}else{try{throw Error()}catch(B){c=B}n()}}catch(B){if(B&&c&&typeof B.stack=="string"){for(var d=B.stack.split(`
`),p=c.stack.split(`
`),v=d.length-1,S=p.length-1;1<=v&&0<=S&&d[v]!==p[S];)S--;for(;1<=v&&0<=S;v--,S--)if(d[v]!==p[S]){if(v!==1||S!==1)do if(v--,S--,0>S||d[v]!==p[S]){var D=`
`+d[v].replace(" at new "," at ");return n.displayName&&D.includes("<anonymous>")&&(D=D.replace("<anonymous>",n.displayName)),D}while(1<=v&&0<=S);break}}}finally{Se=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?K(n):""}function ke(n){switch(n.tag){case 5:return K(n.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return n=Ce(n.type,!1),n;case 11:return n=Ce(n.type.render,!1),n;case 1:return n=Ce(n.type,!0),n;default:return""}}function Ne(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case P:return"Fragment";case ne:return"Portal";case C:return"Profiler";case I:return"StrictMode";case R:return"Suspense";case fe:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case N:return(n.displayName||"Context")+".Consumer";case k:return(n._context.displayName||"Context")+".Provider";case O:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case De:return i=n.displayName||null,i!==null?i:Ne(n.type)||"Memo";case Ue:i=n._payload,n=n._init;try{return Ne(n(i))}catch{}}return null}function Be(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ne(i);case 8:return i===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function be(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ge(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function At(n){var i=Ge(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),c=""+n[i];if(!n.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,p=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return d.call(this)},set:function(v){c=""+v,p.call(this,v)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(v){c=""+v},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function gn(n){n._valueTracker||(n._valueTracker=At(n))}function Go(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),c="";return n&&(c=Ge(n)?n.checked?"true":"false":n.value),n=c,n!==a?(i.setValue(n),!0):!1}function zr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function ks(n,i){var a=i.checked;return ae({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function Rl(n,i){var a=i.defaultValue==null?"":i.defaultValue,c=i.checked!=null?i.checked:i.defaultChecked;a=be(i.value!=null?i.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Ns(n,i){i=i.checked,i!=null&&j(n,"checked",i,!1)}function zi(n,i){Ns(n,i);var a=be(i.value),c=i.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?mt(n,i.type,a):i.hasOwnProperty("defaultValue")&&mt(n,i.type,be(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function Ko(n,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var c=i.type;if(!(c!=="submit"&&c!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,a||i===n.value||(n.value=i),n.defaultValue=i}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function mt(n,i,a){(i!=="number"||zr(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var lt=Array.isArray;function An(n,i,a,c){if(n=n.options,i){i={};for(var d=0;d<a.length;d++)i["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=i.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&c&&(n[a].defaultSelected=!0)}else{for(a=""+be(a),i=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}i!==null||n[d].disabled||(i=n[d])}i!==null&&(i.selected=!0)}}function Qo(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return ae({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Xo(n,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(t(92));if(lt(a)){if(1<a.length)throw Error(t(93));a=a[0]}i=a}i==null&&(i=""),a=i}n._wrapperState={initialValue:be(a)}}function Cl(n,i){var a=be(i.value),c=be(i.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),i.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function Br(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function Yo(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xs(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?Yo(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var $r,Pl=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,c,d){MSApp.execUnsafeLocalFunction(function(){return n(i,a,c,d)})}:n})(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for($r=$r||document.createElement("div"),$r.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=$r.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function Bi(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var qr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kl=["Webkit","ms","Moz","O"];Object.keys(qr).forEach(function(n){kl.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),qr[i]=qr[n]})});function Wr(n,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||qr.hasOwnProperty(n)&&qr[n]?(""+i).trim():i+"px"}function Ds(n,i){n=n.style;for(var a in i)if(i.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=Wr(a,i[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,d):n[a]=d}}var Jo=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Rn(n,i){if(i){if(Jo[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function Vs(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hr=null;function Os(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var fr=null,pr=null,ot=null;function Zo(n){if(n=Ra(n)){if(typeof fr!="function")throw Error(t(280));var i=n.stateNode;i&&(i=nu(i),fr(n.stateNode,n.type,i))}}function Gr(n){pr?ot?ot.push(n):ot=[n]:pr=n}function Kr(){if(pr){var n=pr,i=ot;if(ot=pr=null,Zo(n),i)for(n=0;n<i.length;n++)Zo(i[n])}}function Nl(n,i){return n(i)}function xl(){}var zn=!1;function Dl(n,i,a){if(zn)return n(i,a);zn=!0;try{return Nl(n,i,a)}finally{zn=!1,(pr!==null||ot!==null)&&(xl(),Kr())}}function $i(n,i){var a=n.stateNode;if(a===null)return null;var c=nu(a);if(c===null)return null;a=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,i,typeof a));return a}var Qr=!1;if(f)try{var Xr={};Object.defineProperty(Xr,"passive",{get:function(){Qr=!0}}),window.addEventListener("test",Xr,Xr),window.removeEventListener("test",Xr,Xr)}catch{Qr=!1}function Vl(n,i,a,c,d,p,v,S,D){var B=Array.prototype.slice.call(arguments,3);try{i.apply(a,B)}catch(X){this.onError(X)}}var mr=!1,Bn=null,Ms=!1,yn=null,Ol={onError:function(n){mr=!0,Bn=n}};function Ml(n,i,a,c,d,p,v,S,D){mr=!1,Bn=null,Vl.apply(Ol,arguments)}function ea(n,i,a,c,d,p,v,S,D){if(Ml.apply(this,arguments),mr){if(mr){var B=Bn;mr=!1,Bn=null}else throw Error(t(198));Ms||(Ms=!0,yn=B)}}function Cn(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function ta(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function Ll(n){if(Cn(n)!==n)throw Error(t(188))}function bl(n){var i=n.alternate;if(!i){if(i=Cn(n),i===null)throw Error(t(188));return i!==n?null:n}for(var a=n,c=i;;){var d=a.return;if(d===null)break;var p=d.alternate;if(p===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===a)return Ll(d),n;if(p===c)return Ll(d),i;p=p.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=p;else{for(var v=!1,S=d.child;S;){if(S===a){v=!0,a=d,c=p;break}if(S===c){v=!0,c=d,a=p;break}S=S.sibling}if(!v){for(S=p.child;S;){if(S===a){v=!0,a=p,c=d;break}if(S===c){v=!0,c=p,a=d;break}S=S.sibling}if(!v)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:i}function Fl(n){return n=bl(n),n!==null?qi(n):null}function qi(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=qi(n);if(i!==null)return i;n=n.sibling}return null}var na=e.unstable_scheduleCallback,Ls=e.unstable_cancelCallback,Wi=e.unstable_shouldYield,gr=e.unstable_requestPaint,Je=e.unstable_now,Xc=e.unstable_getCurrentPriorityLevel,bs=e.unstable_ImmediatePriority,ra=e.unstable_UserBlockingPriority,Hi=e.unstable_NormalPriority,ia=e.unstable_LowPriority,Fs=e.unstable_IdlePriority,Gi=null,rn=null;function Ul(n){if(rn&&typeof rn.onCommitFiberRoot=="function")try{rn.onCommitFiberRoot(Gi,n,void 0,(n.current.flags&128)===128)}catch{}}var sn=Math.clz32?Math.clz32:Ki,$n=Math.log,_n=Math.LN2;function Ki(n){return n>>>=0,n===0?32:31-($n(n)/_n|0)|0}var qn=64,Yr=4194304;function We(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function yr(n,i){var a=n.pendingLanes;if(a===0)return 0;var c=0,d=n.suspendedLanes,p=n.pingedLanes,v=a&268435455;if(v!==0){var S=v&~d;S!==0?c=We(S):(p&=v,p!==0&&(c=We(p)))}else v=a&~d,v!==0?c=We(v):p!==0&&(c=We(p));if(c===0)return 0;if(i!==0&&i!==c&&(i&d)===0&&(d=c&-c,p=i&-i,d>=p||d===16&&(p&4194240)!==0))return i;if((c&4)!==0&&(c|=a&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=c;0<i;)a=31-sn(i),d=1<<a,c|=n[a],i&=~d;return c}function Qi(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xi(n,i){for(var a=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,p=n.pendingLanes;0<p;){var v=31-sn(p),S=1<<v,D=d[v];D===-1?((S&a)===0||(S&c)!==0)&&(d[v]=Qi(S,i)):D<=i&&(n.expiredLanes|=S),p&=~S}}function sa(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function oa(){var n=qn;return qn<<=1,(qn&4194240)===0&&(qn=64),n}function aa(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function Yi(n,i,a){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-sn(i),n[i]=a}function Yc(n,i){var a=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-sn(a),p=1<<d;i[d]=0,c[d]=-1,n[d]=-1,a&=~p}}function la(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var c=31-sn(a),d=1<<c;d&i|n[c]&i&&(n[c]|=i),a&=~d}}var Fe=0;function Wn(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var ua,Us,ca,ha,da,Hn=!1,js=[],Gn=null,Kn=null,xt=null,Ji=new Map,_r=new Map,on=[],jl="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Jr(n,i){switch(n){case"focusin":case"focusout":Gn=null;break;case"dragenter":case"dragleave":Kn=null;break;case"mouseover":case"mouseout":xt=null;break;case"pointerover":case"pointerout":Ji.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":_r.delete(i.pointerId)}}function Pn(n,i,a,c,d,p){return n===null||n.nativeEvent!==p?(n={blockedOn:i,domEventName:a,eventSystemFlags:c,nativeEvent:p,targetContainers:[d]},i!==null&&(i=Ra(i),i!==null&&Us(i)),n):(n.eventSystemFlags|=c,i=n.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),n)}function zl(n,i,a,c,d){switch(i){case"focusin":return Gn=Pn(Gn,n,i,a,c,d),!0;case"dragenter":return Kn=Pn(Kn,n,i,a,c,d),!0;case"mouseover":return xt=Pn(xt,n,i,a,c,d),!0;case"pointerover":var p=d.pointerId;return Ji.set(p,Pn(Ji.get(p)||null,n,i,a,c,d)),!0;case"gotpointercapture":return p=d.pointerId,_r.set(p,Pn(_r.get(p)||null,n,i,a,c,d)),!0}return!1}function zs(n){var i=ns(n.target);if(i!==null){var a=Cn(i);if(a!==null){if(i=a.tag,i===13){if(i=ta(a),i!==null){n.blockedOn=i,da(n.priority,function(){ca(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Xe(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=Bs(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Hr=c,a.target.dispatchEvent(c),Hr=null}else return i=Ra(a),i!==null&&Us(i),n.blockedOn=a,!1;i.shift()}return!0}function Bl(n,i,a){Xe(n)&&a.delete(i)}function Jc(){Hn=!1,Gn!==null&&Xe(Gn)&&(Gn=null),Kn!==null&&Xe(Kn)&&(Kn=null),xt!==null&&Xe(xt)&&(xt=null),Ji.forEach(Bl),_r.forEach(Bl)}function Zr(n,i){n.blockedOn===i&&(n.blockedOn=null,Hn||(Hn=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Jc)))}function ei(n){function i(d){return Zr(d,n)}if(0<js.length){Zr(js[0],n);for(var a=1;a<js.length;a++){var c=js[a];c.blockedOn===n&&(c.blockedOn=null)}}for(Gn!==null&&Zr(Gn,n),Kn!==null&&Zr(Kn,n),xt!==null&&Zr(xt,n),Ji.forEach(i),_r.forEach(i),a=0;a<on.length;a++)c=on[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<on.length&&(a=on[0],a.blockedOn===null);)zs(a),a.blockedOn===null&&on.shift()}var vr=ee.ReactCurrentBatchConfig,wr=!0;function Qn(n,i,a,c){var d=Fe,p=vr.transition;vr.transition=null;try{Fe=1,fa(n,i,a,c)}finally{Fe=d,vr.transition=p}}function $l(n,i,a,c){var d=Fe,p=vr.transition;vr.transition=null;try{Fe=4,fa(n,i,a,c)}finally{Fe=d,vr.transition=p}}function fa(n,i,a,c){if(wr){var d=Bs(n,i,a,c);if(d===null)uh(n,i,c,Xn,a),Jr(n,c);else if(zl(d,n,i,a,c))c.stopPropagation();else if(Jr(n,c),i&4&&-1<jl.indexOf(n)){for(;d!==null;){var p=Ra(d);if(p!==null&&ua(p),p=Bs(n,i,a,c),p===null&&uh(n,i,c,Xn,a),p===d)break;d=p}d!==null&&c.stopPropagation()}else uh(n,i,c,null,a)}}var Xn=null;function Bs(n,i,a,c){if(Xn=null,n=Os(c),n=ns(n),n!==null)if(i=Cn(n),i===null)n=null;else if(a=i.tag,a===13){if(n=ta(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return Xn=n,null}function $s(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xc()){case bs:return 1;case ra:return 4;case Hi:case ia:return 16;case Fs:return 536870912;default:return 16}default:return 16}}var an=null,qs=null,Er=null;function ql(){if(Er)return Er;var n,i=qs,a=i.length,c,d="value"in an?an.value:an.textContent,p=d.length;for(n=0;n<a&&i[n]===d[n];n++);var v=a-n;for(c=1;c<=v&&i[a-c]===d[p-c];c++);return Er=d.slice(n,1<c?1-c:void 0)}function Zi(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Yn(){return!0}function pa(){return!1}function Ut(n){function i(a,c,d,p,v){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=p,this.target=v,this.currentTarget=null;for(var S in n)n.hasOwnProperty(S)&&(a=n[S],this[S]=a?a(p):p[S]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Yn:pa,this.isPropagationStopped=pa,this}return ae(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Yn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Yn)},persist:function(){},isPersistent:Yn}),i}var Jn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},es=Ut(Jn),ti=ae({},Jn,{view:0,detail:0}),Ws=Ut(ti),Hs,Gs,ln,ts=ae({},ti,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pe,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ln&&(ln&&n.type==="mousemove"?(Hs=n.screenX-ln.screenX,Gs=n.screenY-ln.screenY):Gs=Hs=0,ln=n),Hs)},movementY:function(n){return"movementY"in n?n.movementY:Gs}}),ma=Ut(ts),Wl=ae({},ts,{dataTransfer:0}),Hl=Ut(Wl),Ks=ae({},ti,{relatedTarget:0}),Dt=Ut(Ks),Gl=ae({},Jn,{animationName:0,elapsedTime:0,pseudoElement:0}),Kl=Ut(Gl),ni=ae({},Jn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),u=Ut(ni),m=ae({},Jn,{data:0}),_=Ut(m),T={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},F={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function te(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=$[n])?!!i[n]:!1}function Pe(){return te}var ut=ae({},ti,{key:function(n){if(n.key){var i=T[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Zi(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?F[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pe,charCode:function(n){return n.type==="keypress"?Zi(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Zi(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Ke=Ut(ut),gt=ae({},ts,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),un=Ut(gt),Tr=ae({},ti,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pe}),Zn=Ut(Tr),er=ae({},Jn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qs=Ut(er),ga=ae({},ts,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),lE=Ut(ga),uE=[9,13,27,32],Zc=f&&"CompositionEvent"in window,ya=null;f&&"documentMode"in document&&(ya=document.documentMode);var cE=f&&"TextEvent"in window&&!ya,yp=f&&(!Zc||ya&&8<ya&&11>=ya),_p=" ",vp=!1;function wp(n,i){switch(n){case"keyup":return uE.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ep(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Xs=!1;function hE(n,i){switch(n){case"compositionend":return Ep(i);case"keypress":return i.which!==32?null:(vp=!0,_p);case"textInput":return n=i.data,n===_p&&vp?null:n;default:return null}}function dE(n,i){if(Xs)return n==="compositionend"||!Zc&&wp(n,i)?(n=ql(),Er=qs=an=null,Xs=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return yp&&i.locale!=="ko"?null:i.data;default:return null}}var fE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tp(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!fE[n.type]:i==="textarea"}function Ip(n,i,a,c){Gr(c),i=Zl(i,"onChange"),0<i.length&&(a=new es("onChange","change",null,a,c),n.push({event:a,listeners:i}))}var _a=null,va=null;function pE(n){zp(n,0)}function Ql(n){var i=to(n);if(Go(i))return n}function mE(n,i){if(n==="change")return i}var Sp=!1;if(f){var eh;if(f){var th="oninput"in document;if(!th){var Ap=document.createElement("div");Ap.setAttribute("oninput","return;"),th=typeof Ap.oninput=="function"}eh=th}else eh=!1;Sp=eh&&(!document.documentMode||9<document.documentMode)}function Rp(){_a&&(_a.detachEvent("onpropertychange",Cp),va=_a=null)}function Cp(n){if(n.propertyName==="value"&&Ql(va)){var i=[];Ip(i,va,n,Os(n)),Dl(pE,i)}}function gE(n,i,a){n==="focusin"?(Rp(),_a=i,va=a,_a.attachEvent("onpropertychange",Cp)):n==="focusout"&&Rp()}function yE(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Ql(va)}function _E(n,i){if(n==="click")return Ql(i)}function vE(n,i){if(n==="input"||n==="change")return Ql(i)}function wE(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var kn=typeof Object.is=="function"?Object.is:wE;function wa(n,i){if(kn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),c=Object.keys(i);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!g.call(i,d)||!kn(n[d],i[d]))return!1}return!0}function Pp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function kp(n,i){var a=Pp(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=i&&c>=i)return{node:a,offset:i-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Pp(a)}}function Np(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Np(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function xp(){for(var n=window,i=zr();i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=zr(n.document)}return i}function nh(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function EE(n){var i=xp(),a=n.focusedElem,c=n.selectionRange;if(i!==a&&a&&a.ownerDocument&&Np(a.ownerDocument.documentElement,a)){if(c!==null&&nh(a)){if(i=c.start,n=c.end,n===void 0&&(n=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(n,a.value.length);else if(n=(i=a.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,p=Math.min(c.start,d);c=c.end===void 0?p:Math.min(c.end,d),!n.extend&&p>c&&(d=c,c=p,p=d),d=kp(a,p);var v=kp(a,c);d&&v&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==v.node||n.focusOffset!==v.offset)&&(i=i.createRange(),i.setStart(d.node,d.offset),n.removeAllRanges(),p>c?(n.addRange(i),n.extend(v.node,v.offset)):(i.setEnd(v.node,v.offset),n.addRange(i)))}}for(i=[],n=a;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)n=i[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var TE=f&&"documentMode"in document&&11>=document.documentMode,Ys=null,rh=null,Ea=null,ih=!1;function Dp(n,i,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;ih||Ys==null||Ys!==zr(c)||(c=Ys,"selectionStart"in c&&nh(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ea&&wa(Ea,c)||(Ea=c,c=Zl(rh,"onSelect"),0<c.length&&(i=new es("onSelect","select",null,i,a),n.push({event:i,listeners:c}),i.target=Ys)))}function Xl(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var Js={animationend:Xl("Animation","AnimationEnd"),animationiteration:Xl("Animation","AnimationIteration"),animationstart:Xl("Animation","AnimationStart"),transitionend:Xl("Transition","TransitionEnd")},sh={},Vp={};f&&(Vp=document.createElement("div").style,"AnimationEvent"in window||(delete Js.animationend.animation,delete Js.animationiteration.animation,delete Js.animationstart.animation),"TransitionEvent"in window||delete Js.transitionend.transition);function Yl(n){if(sh[n])return sh[n];if(!Js[n])return n;var i=Js[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in Vp)return sh[n]=i[a];return n}var Op=Yl("animationend"),Mp=Yl("animationiteration"),Lp=Yl("animationstart"),bp=Yl("transitionend"),Fp=new Map,Up="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ri(n,i){Fp.set(n,i),l(i,[n])}for(var oh=0;oh<Up.length;oh++){var ah=Up[oh],IE=ah.toLowerCase(),SE=ah[0].toUpperCase()+ah.slice(1);ri(IE,"on"+SE)}ri(Op,"onAnimationEnd"),ri(Mp,"onAnimationIteration"),ri(Lp,"onAnimationStart"),ri("dblclick","onDoubleClick"),ri("focusin","onFocus"),ri("focusout","onBlur"),ri(bp,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ta="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ta));function jp(n,i,a){var c=n.type||"unknown-event";n.currentTarget=a,ea(c,i,void 0,n),n.currentTarget=null}function zp(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],d=c.event;c=c.listeners;e:{var p=void 0;if(i)for(var v=c.length-1;0<=v;v--){var S=c[v],D=S.instance,B=S.currentTarget;if(S=S.listener,D!==p&&d.isPropagationStopped())break e;jp(d,S,B),p=D}else for(v=0;v<c.length;v++){if(S=c[v],D=S.instance,B=S.currentTarget,S=S.listener,D!==p&&d.isPropagationStopped())break e;jp(d,S,B),p=D}}}if(Ms)throw n=yn,Ms=!1,yn=null,n}function Ze(n,i){var a=i[mh];a===void 0&&(a=i[mh]=new Set);var c=n+"__bubble";a.has(c)||(Bp(i,n,2,!1),a.add(c))}function lh(n,i,a){var c=0;i&&(c|=4),Bp(a,n,c,i)}var Jl="_reactListening"+Math.random().toString(36).slice(2);function Ia(n){if(!n[Jl]){n[Jl]=!0,s.forEach(function(a){a!=="selectionchange"&&(AE.has(a)||lh(a,!1,n),lh(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Jl]||(i[Jl]=!0,lh("selectionchange",!1,i))}}function Bp(n,i,a,c){switch($s(i)){case 1:var d=Qn;break;case 4:d=$l;break;default:d=fa}a=d.bind(null,i,a,n),d=void 0,!Qr||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(i,a,{capture:!0,passive:d}):n.addEventListener(i,a,!0):d!==void 0?n.addEventListener(i,a,{passive:d}):n.addEventListener(i,a,!1)}function uh(n,i,a,c,d){var p=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var S=c.stateNode.containerInfo;if(S===d||S.nodeType===8&&S.parentNode===d)break;if(v===4)for(v=c.return;v!==null;){var D=v.tag;if((D===3||D===4)&&(D=v.stateNode.containerInfo,D===d||D.nodeType===8&&D.parentNode===d))return;v=v.return}for(;S!==null;){if(v=ns(S),v===null)return;if(D=v.tag,D===5||D===6){c=p=v;continue e}S=S.parentNode}}c=c.return}Dl(function(){var B=p,X=Os(a),Y=[];e:{var Q=Fp.get(n);if(Q!==void 0){var le=es,de=n;switch(n){case"keypress":if(Zi(a)===0)break e;case"keydown":case"keyup":le=Ke;break;case"focusin":de="focus",le=Dt;break;case"focusout":de="blur",le=Dt;break;case"beforeblur":case"afterblur":le=Dt;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=ma;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=Hl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=Zn;break;case Op:case Mp:case Lp:le=Kl;break;case bp:le=Qs;break;case"scroll":le=Ws;break;case"wheel":le=lE;break;case"copy":case"cut":case"paste":le=u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=un}var pe=(i&4)!==0,ct=!pe&&n==="scroll",L=pe?Q!==null?Q+"Capture":null:Q;pe=[];for(var V=B,z;V!==null;){z=V;var Z=z.stateNode;if(z.tag===5&&Z!==null&&(z=Z,L!==null&&(Z=$i(V,L),Z!=null&&pe.push(Sa(V,Z,z)))),ct)break;V=V.return}0<pe.length&&(Q=new le(Q,de,null,a,X),Y.push({event:Q,listeners:pe}))}}if((i&7)===0){e:{if(Q=n==="mouseover"||n==="pointerover",le=n==="mouseout"||n==="pointerout",Q&&a!==Hr&&(de=a.relatedTarget||a.fromElement)&&(ns(de)||de[Ir]))break e;if((le||Q)&&(Q=X.window===X?X:(Q=X.ownerDocument)?Q.defaultView||Q.parentWindow:window,le?(de=a.relatedTarget||a.toElement,le=B,de=de?ns(de):null,de!==null&&(ct=Cn(de),de!==ct||de.tag!==5&&de.tag!==6)&&(de=null)):(le=null,de=B),le!==de)){if(pe=ma,Z="onMouseLeave",L="onMouseEnter",V="mouse",(n==="pointerout"||n==="pointerover")&&(pe=un,Z="onPointerLeave",L="onPointerEnter",V="pointer"),ct=le==null?Q:to(le),z=de==null?Q:to(de),Q=new pe(Z,V+"leave",le,a,X),Q.target=ct,Q.relatedTarget=z,Z=null,ns(X)===B&&(pe=new pe(L,V+"enter",de,a,X),pe.target=z,pe.relatedTarget=ct,Z=pe),ct=Z,le&&de)t:{for(pe=le,L=de,V=0,z=pe;z;z=Zs(z))V++;for(z=0,Z=L;Z;Z=Zs(Z))z++;for(;0<V-z;)pe=Zs(pe),V--;for(;0<z-V;)L=Zs(L),z--;for(;V--;){if(pe===L||L!==null&&pe===L.alternate)break t;pe=Zs(pe),L=Zs(L)}pe=null}else pe=null;le!==null&&$p(Y,Q,le,pe,!1),de!==null&&ct!==null&&$p(Y,ct,de,pe,!0)}}e:{if(Q=B?to(B):window,le=Q.nodeName&&Q.nodeName.toLowerCase(),le==="select"||le==="input"&&Q.type==="file")var me=mE;else if(Tp(Q))if(Sp)me=vE;else{me=yE;var ve=gE}else(le=Q.nodeName)&&le.toLowerCase()==="input"&&(Q.type==="checkbox"||Q.type==="radio")&&(me=_E);if(me&&(me=me(n,B))){Ip(Y,me,a,X);break e}ve&&ve(n,Q,B),n==="focusout"&&(ve=Q._wrapperState)&&ve.controlled&&Q.type==="number"&&mt(Q,"number",Q.value)}switch(ve=B?to(B):window,n){case"focusin":(Tp(ve)||ve.contentEditable==="true")&&(Ys=ve,rh=B,Ea=null);break;case"focusout":Ea=rh=Ys=null;break;case"mousedown":ih=!0;break;case"contextmenu":case"mouseup":case"dragend":ih=!1,Dp(Y,a,X);break;case"selectionchange":if(TE)break;case"keydown":case"keyup":Dp(Y,a,X)}var we;if(Zc)e:{switch(n){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else Xs?wp(n,a)&&(Te="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Te="onCompositionStart");Te&&(yp&&a.locale!=="ko"&&(Xs||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&Xs&&(we=ql()):(an=X,qs="value"in an?an.value:an.textContent,Xs=!0)),ve=Zl(B,Te),0<ve.length&&(Te=new _(Te,n,null,a,X),Y.push({event:Te,listeners:ve}),we?Te.data=we:(we=Ep(a),we!==null&&(Te.data=we)))),(we=cE?hE(n,a):dE(n,a))&&(B=Zl(B,"onBeforeInput"),0<B.length&&(X=new _("onBeforeInput","beforeinput",null,a,X),Y.push({event:X,listeners:B}),X.data=we))}zp(Y,i)})}function Sa(n,i,a){return{instance:n,listener:i,currentTarget:a}}function Zl(n,i){for(var a=i+"Capture",c=[];n!==null;){var d=n,p=d.stateNode;d.tag===5&&p!==null&&(d=p,p=$i(n,a),p!=null&&c.unshift(Sa(n,p,d)),p=$i(n,i),p!=null&&c.push(Sa(n,p,d))),n=n.return}return c}function Zs(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function $p(n,i,a,c,d){for(var p=i._reactName,v=[];a!==null&&a!==c;){var S=a,D=S.alternate,B=S.stateNode;if(D!==null&&D===c)break;S.tag===5&&B!==null&&(S=B,d?(D=$i(a,p),D!=null&&v.unshift(Sa(a,D,S))):d||(D=$i(a,p),D!=null&&v.push(Sa(a,D,S)))),a=a.return}v.length!==0&&n.push({event:i,listeners:v})}var RE=/\r\n?/g,CE=/\u0000|\uFFFD/g;function qp(n){return(typeof n=="string"?n:""+n).replace(RE,`
`).replace(CE,"")}function eu(n,i,a){if(i=qp(i),qp(n)!==i&&a)throw Error(t(425))}function tu(){}var ch=null,hh=null;function dh(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var fh=typeof setTimeout=="function"?setTimeout:void 0,PE=typeof clearTimeout=="function"?clearTimeout:void 0,Wp=typeof Promise=="function"?Promise:void 0,kE=typeof queueMicrotask=="function"?queueMicrotask:typeof Wp<"u"?function(n){return Wp.resolve(null).then(n).catch(NE)}:fh;function NE(n){setTimeout(function(){throw n})}function ph(n,i){var a=i,c=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){n.removeChild(d),ei(i);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);ei(i)}function ii(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function Hp(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}var eo=Math.random().toString(36).slice(2),tr="__reactFiber$"+eo,Aa="__reactProps$"+eo,Ir="__reactContainer$"+eo,mh="__reactEvents$"+eo,xE="__reactListeners$"+eo,DE="__reactHandles$"+eo;function ns(n){var i=n[tr];if(i)return i;for(var a=n.parentNode;a;){if(i=a[Ir]||a[tr]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=Hp(n);n!==null;){if(a=n[tr])return a;n=Hp(n)}return i}n=a,a=n.parentNode}return null}function Ra(n){return n=n[tr]||n[Ir],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function to(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function nu(n){return n[Aa]||null}var gh=[],no=-1;function si(n){return{current:n}}function et(n){0>no||(n.current=gh[no],gh[no]=null,no--)}function Ye(n,i){no++,gh[no]=n.current,n.current=i}var oi={},jt=si(oi),Xt=si(!1),rs=oi;function ro(n,i){var a=n.type.contextTypes;if(!a)return oi;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===i)return c.__reactInternalMemoizedMaskedChildContext;var d={},p;for(p in a)d[p]=i[p];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=d),d}function Yt(n){return n=n.childContextTypes,n!=null}function ru(){et(Xt),et(jt)}function Gp(n,i,a){if(jt.current!==oi)throw Error(t(168));Ye(jt,i),Ye(Xt,a)}function Kp(n,i,a){var c=n.stateNode;if(i=i.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in i))throw Error(t(108,Be(n)||"Unknown",d));return ae({},a,c)}function iu(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||oi,rs=jt.current,Ye(jt,n),Ye(Xt,Xt.current),!0}function Qp(n,i,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=Kp(n,i,rs),c.__reactInternalMemoizedMergedChildContext=n,et(Xt),et(jt),Ye(jt,n)):et(Xt),Ye(Xt,a)}var Sr=null,su=!1,yh=!1;function Xp(n){Sr===null?Sr=[n]:Sr.push(n)}function VE(n){su=!0,Xp(n)}function ai(){if(!yh&&Sr!==null){yh=!0;var n=0,i=Fe;try{var a=Sr;for(Fe=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}Sr=null,su=!1}catch(d){throw Sr!==null&&(Sr=Sr.slice(n+1)),na(bs,ai),d}finally{Fe=i,yh=!1}}return null}var io=[],so=0,ou=null,au=0,vn=[],wn=0,is=null,Ar=1,Rr="";function ss(n,i){io[so++]=au,io[so++]=ou,ou=n,au=i}function Yp(n,i,a){vn[wn++]=Ar,vn[wn++]=Rr,vn[wn++]=is,is=n;var c=Ar;n=Rr;var d=32-sn(c)-1;c&=~(1<<d),a+=1;var p=32-sn(i)+d;if(30<p){var v=d-d%5;p=(c&(1<<v)-1).toString(32),c>>=v,d-=v,Ar=1<<32-sn(i)+d|a<<d|c,Rr=p+n}else Ar=1<<p|a<<d|c,Rr=n}function _h(n){n.return!==null&&(ss(n,1),Yp(n,1,0))}function vh(n){for(;n===ou;)ou=io[--so],io[so]=null,au=io[--so],io[so]=null;for(;n===is;)is=vn[--wn],vn[wn]=null,Rr=vn[--wn],vn[wn]=null,Ar=vn[--wn],vn[wn]=null}var cn=null,hn=null,nt=!1,Nn=null;function Jp(n,i){var a=Sn(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=n,i=n.deletions,i===null?(n.deletions=[a],n.flags|=16):i.push(a)}function Zp(n,i){switch(n.tag){case 5:var a=n.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,cn=n,hn=ii(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,cn=n,hn=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=is!==null?{id:Ar,overflow:Rr}:null,n.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=Sn(18,null,null,0),a.stateNode=i,a.return=n,n.child=a,cn=n,hn=null,!0):!1;default:return!1}}function wh(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Eh(n){if(nt){var i=hn;if(i){var a=i;if(!Zp(n,i)){if(wh(n))throw Error(t(418));i=ii(a.nextSibling);var c=cn;i&&Zp(n,i)?Jp(c,a):(n.flags=n.flags&-4097|2,nt=!1,cn=n)}}else{if(wh(n))throw Error(t(418));n.flags=n.flags&-4097|2,nt=!1,cn=n}}}function em(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;cn=n}function lu(n){if(n!==cn)return!1;if(!nt)return em(n),nt=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!dh(n.type,n.memoizedProps)),i&&(i=hn)){if(wh(n))throw tm(),Error(t(418));for(;i;)Jp(n,i),i=ii(i.nextSibling)}if(em(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(i===0){hn=ii(n.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}n=n.nextSibling}hn=null}}else hn=cn?ii(n.stateNode.nextSibling):null;return!0}function tm(){for(var n=hn;n;)n=ii(n.nextSibling)}function oo(){hn=cn=null,nt=!1}function Th(n){Nn===null?Nn=[n]:Nn.push(n)}var OE=ee.ReactCurrentBatchConfig;function Ca(n,i,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var d=c,p=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===p?i.ref:(i=function(v){var S=d.refs;v===null?delete S[p]:S[p]=v},i._stringRef=p,i)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function uu(n,i){throw n=Object.prototype.toString.call(i),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function nm(n){var i=n._init;return i(n._payload)}function rm(n){function i(L,V){if(n){var z=L.deletions;z===null?(L.deletions=[V],L.flags|=16):z.push(V)}}function a(L,V){if(!n)return null;for(;V!==null;)i(L,V),V=V.sibling;return null}function c(L,V){for(L=new Map;V!==null;)V.key!==null?L.set(V.key,V):L.set(V.index,V),V=V.sibling;return L}function d(L,V){return L=mi(L,V),L.index=0,L.sibling=null,L}function p(L,V,z){return L.index=z,n?(z=L.alternate,z!==null?(z=z.index,z<V?(L.flags|=2,V):z):(L.flags|=2,V)):(L.flags|=1048576,V)}function v(L){return n&&L.alternate===null&&(L.flags|=2),L}function S(L,V,z,Z){return V===null||V.tag!==6?(V=fd(z,L.mode,Z),V.return=L,V):(V=d(V,z),V.return=L,V)}function D(L,V,z,Z){var me=z.type;return me===P?X(L,V,z.props.children,Z,z.key):V!==null&&(V.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===Ue&&nm(me)===V.type)?(Z=d(V,z.props),Z.ref=Ca(L,V,z),Z.return=L,Z):(Z=Vu(z.type,z.key,z.props,null,L.mode,Z),Z.ref=Ca(L,V,z),Z.return=L,Z)}function B(L,V,z,Z){return V===null||V.tag!==4||V.stateNode.containerInfo!==z.containerInfo||V.stateNode.implementation!==z.implementation?(V=pd(z,L.mode,Z),V.return=L,V):(V=d(V,z.children||[]),V.return=L,V)}function X(L,V,z,Z,me){return V===null||V.tag!==7?(V=fs(z,L.mode,Z,me),V.return=L,V):(V=d(V,z),V.return=L,V)}function Y(L,V,z){if(typeof V=="string"&&V!==""||typeof V=="number")return V=fd(""+V,L.mode,z),V.return=L,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case ie:return z=Vu(V.type,V.key,V.props,null,L.mode,z),z.ref=Ca(L,null,V),z.return=L,z;case ne:return V=pd(V,L.mode,z),V.return=L,V;case Ue:var Z=V._init;return Y(L,Z(V._payload),z)}if(lt(V)||ge(V))return V=fs(V,L.mode,z,null),V.return=L,V;uu(L,V)}return null}function Q(L,V,z,Z){var me=V!==null?V.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return me!==null?null:S(L,V,""+z,Z);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case ie:return z.key===me?D(L,V,z,Z):null;case ne:return z.key===me?B(L,V,z,Z):null;case Ue:return me=z._init,Q(L,V,me(z._payload),Z)}if(lt(z)||ge(z))return me!==null?null:X(L,V,z,Z,null);uu(L,z)}return null}function le(L,V,z,Z,me){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return L=L.get(z)||null,S(V,L,""+Z,me);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case ie:return L=L.get(Z.key===null?z:Z.key)||null,D(V,L,Z,me);case ne:return L=L.get(Z.key===null?z:Z.key)||null,B(V,L,Z,me);case Ue:var ve=Z._init;return le(L,V,z,ve(Z._payload),me)}if(lt(Z)||ge(Z))return L=L.get(z)||null,X(V,L,Z,me,null);uu(V,Z)}return null}function de(L,V,z,Z){for(var me=null,ve=null,we=V,Te=V=0,Pt=null;we!==null&&Te<z.length;Te++){we.index>Te?(Pt=we,we=null):Pt=we.sibling;var qe=Q(L,we,z[Te],Z);if(qe===null){we===null&&(we=Pt);break}n&&we&&qe.alternate===null&&i(L,we),V=p(qe,V,Te),ve===null?me=qe:ve.sibling=qe,ve=qe,we=Pt}if(Te===z.length)return a(L,we),nt&&ss(L,Te),me;if(we===null){for(;Te<z.length;Te++)we=Y(L,z[Te],Z),we!==null&&(V=p(we,V,Te),ve===null?me=we:ve.sibling=we,ve=we);return nt&&ss(L,Te),me}for(we=c(L,we);Te<z.length;Te++)Pt=le(we,L,Te,z[Te],Z),Pt!==null&&(n&&Pt.alternate!==null&&we.delete(Pt.key===null?Te:Pt.key),V=p(Pt,V,Te),ve===null?me=Pt:ve.sibling=Pt,ve=Pt);return n&&we.forEach(function(gi){return i(L,gi)}),nt&&ss(L,Te),me}function pe(L,V,z,Z){var me=ge(z);if(typeof me!="function")throw Error(t(150));if(z=me.call(z),z==null)throw Error(t(151));for(var ve=me=null,we=V,Te=V=0,Pt=null,qe=z.next();we!==null&&!qe.done;Te++,qe=z.next()){we.index>Te?(Pt=we,we=null):Pt=we.sibling;var gi=Q(L,we,qe.value,Z);if(gi===null){we===null&&(we=Pt);break}n&&we&&gi.alternate===null&&i(L,we),V=p(gi,V,Te),ve===null?me=gi:ve.sibling=gi,ve=gi,we=Pt}if(qe.done)return a(L,we),nt&&ss(L,Te),me;if(we===null){for(;!qe.done;Te++,qe=z.next())qe=Y(L,qe.value,Z),qe!==null&&(V=p(qe,V,Te),ve===null?me=qe:ve.sibling=qe,ve=qe);return nt&&ss(L,Te),me}for(we=c(L,we);!qe.done;Te++,qe=z.next())qe=le(we,L,Te,qe.value,Z),qe!==null&&(n&&qe.alternate!==null&&we.delete(qe.key===null?Te:qe.key),V=p(qe,V,Te),ve===null?me=qe:ve.sibling=qe,ve=qe);return n&&we.forEach(function(fT){return i(L,fT)}),nt&&ss(L,Te),me}function ct(L,V,z,Z){if(typeof z=="object"&&z!==null&&z.type===P&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case ie:e:{for(var me=z.key,ve=V;ve!==null;){if(ve.key===me){if(me=z.type,me===P){if(ve.tag===7){a(L,ve.sibling),V=d(ve,z.props.children),V.return=L,L=V;break e}}else if(ve.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===Ue&&nm(me)===ve.type){a(L,ve.sibling),V=d(ve,z.props),V.ref=Ca(L,ve,z),V.return=L,L=V;break e}a(L,ve);break}else i(L,ve);ve=ve.sibling}z.type===P?(V=fs(z.props.children,L.mode,Z,z.key),V.return=L,L=V):(Z=Vu(z.type,z.key,z.props,null,L.mode,Z),Z.ref=Ca(L,V,z),Z.return=L,L=Z)}return v(L);case ne:e:{for(ve=z.key;V!==null;){if(V.key===ve)if(V.tag===4&&V.stateNode.containerInfo===z.containerInfo&&V.stateNode.implementation===z.implementation){a(L,V.sibling),V=d(V,z.children||[]),V.return=L,L=V;break e}else{a(L,V);break}else i(L,V);V=V.sibling}V=pd(z,L.mode,Z),V.return=L,L=V}return v(L);case Ue:return ve=z._init,ct(L,V,ve(z._payload),Z)}if(lt(z))return de(L,V,z,Z);if(ge(z))return pe(L,V,z,Z);uu(L,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,V!==null&&V.tag===6?(a(L,V.sibling),V=d(V,z),V.return=L,L=V):(a(L,V),V=fd(z,L.mode,Z),V.return=L,L=V),v(L)):a(L,V)}return ct}var ao=rm(!0),im=rm(!1),cu=si(null),hu=null,lo=null,Ih=null;function Sh(){Ih=lo=hu=null}function Ah(n){var i=cu.current;et(cu),n._currentValue=i}function Rh(n,i,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),n===a)break;n=n.return}}function uo(n,i){hu=n,Ih=lo=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&i)!==0&&(Jt=!0),n.firstContext=null)}function En(n){var i=n._currentValue;if(Ih!==n)if(n={context:n,memoizedValue:i,next:null},lo===null){if(hu===null)throw Error(t(308));lo=n,hu.dependencies={lanes:0,firstContext:n}}else lo=lo.next=n;return i}var os=null;function Ch(n){os===null?os=[n]:os.push(n)}function sm(n,i,a,c){var d=i.interleaved;return d===null?(a.next=a,Ch(i)):(a.next=d.next,d.next=a),i.interleaved=a,Cr(n,c)}function Cr(n,i){n.lanes|=i;var a=n.alternate;for(a!==null&&(a.lanes|=i),a=n,n=n.return;n!==null;)n.childLanes|=i,a=n.alternate,a!==null&&(a.childLanes|=i),a=n,n=n.return;return a.tag===3?a.stateNode:null}var li=!1;function Ph(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function om(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Pr(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function ui(n,i,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,($e&2)!==0){var d=c.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),c.pending=i,Cr(n,a)}return d=c.interleaved,d===null?(i.next=i,Ch(c)):(i.next=d.next,d.next=i),c.interleaved=i,Cr(n,a)}function du(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,la(n,a)}}function am(n,i){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var v={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};p===null?d=p=v:p=p.next=v,a=a.next}while(a!==null);p===null?d=p=i:p=p.next=i}else d=p=i;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}function fu(n,i,a,c){var d=n.updateQueue;li=!1;var p=d.firstBaseUpdate,v=d.lastBaseUpdate,S=d.shared.pending;if(S!==null){d.shared.pending=null;var D=S,B=D.next;D.next=null,v===null?p=B:v.next=B,v=D;var X=n.alternate;X!==null&&(X=X.updateQueue,S=X.lastBaseUpdate,S!==v&&(S===null?X.firstBaseUpdate=B:S.next=B,X.lastBaseUpdate=D))}if(p!==null){var Y=d.baseState;v=0,X=B=D=null,S=p;do{var Q=S.lane,le=S.eventTime;if((c&Q)===Q){X!==null&&(X=X.next={eventTime:le,lane:0,tag:S.tag,payload:S.payload,callback:S.callback,next:null});e:{var de=n,pe=S;switch(Q=i,le=a,pe.tag){case 1:if(de=pe.payload,typeof de=="function"){Y=de.call(le,Y,Q);break e}Y=de;break e;case 3:de.flags=de.flags&-65537|128;case 0:if(de=pe.payload,Q=typeof de=="function"?de.call(le,Y,Q):de,Q==null)break e;Y=ae({},Y,Q);break e;case 2:li=!0}}S.callback!==null&&S.lane!==0&&(n.flags|=64,Q=d.effects,Q===null?d.effects=[S]:Q.push(S))}else le={eventTime:le,lane:Q,tag:S.tag,payload:S.payload,callback:S.callback,next:null},X===null?(B=X=le,D=Y):X=X.next=le,v|=Q;if(S=S.next,S===null){if(S=d.shared.pending,S===null)break;Q=S,S=Q.next,Q.next=null,d.lastBaseUpdate=Q,d.shared.pending=null}}while(!0);if(X===null&&(D=Y),d.baseState=D,d.firstBaseUpdate=B,d.lastBaseUpdate=X,i=d.shared.interleaved,i!==null){d=i;do v|=d.lane,d=d.next;while(d!==i)}else p===null&&(d.shared.lanes=0);us|=v,n.lanes=v,n.memoizedState=Y}}function lm(n,i,a){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var c=n[i],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var Pa={},nr=si(Pa),ka=si(Pa),Na=si(Pa);function as(n){if(n===Pa)throw Error(t(174));return n}function kh(n,i){switch(Ye(Na,i),Ye(ka,n),Ye(nr,Pa),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:xs(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=xs(i,n)}et(nr),Ye(nr,i)}function co(){et(nr),et(ka),et(Na)}function um(n){as(Na.current);var i=as(nr.current),a=xs(i,n.type);i!==a&&(Ye(ka,n),Ye(nr,a))}function Nh(n){ka.current===n&&(et(nr),et(ka))}var rt=si(0);function pu(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var xh=[];function Dh(){for(var n=0;n<xh.length;n++)xh[n]._workInProgressVersionPrimary=null;xh.length=0}var mu=ee.ReactCurrentDispatcher,Vh=ee.ReactCurrentBatchConfig,ls=0,it=null,Et=null,Rt=null,gu=!1,xa=!1,Da=0,ME=0;function zt(){throw Error(t(321))}function Oh(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!kn(n[a],i[a]))return!1;return!0}function Mh(n,i,a,c,d,p){if(ls=p,it=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,mu.current=n===null||n.memoizedState===null?UE:jE,n=a(c,d),xa){p=0;do{if(xa=!1,Da=0,25<=p)throw Error(t(301));p+=1,Rt=Et=null,i.updateQueue=null,mu.current=zE,n=a(c,d)}while(xa)}if(mu.current=vu,i=Et!==null&&Et.next!==null,ls=0,Rt=Et=it=null,gu=!1,i)throw Error(t(300));return n}function Lh(){var n=Da!==0;return Da=0,n}function rr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?it.memoizedState=Rt=n:Rt=Rt.next=n,Rt}function Tn(){if(Et===null){var n=it.alternate;n=n!==null?n.memoizedState:null}else n=Et.next;var i=Rt===null?it.memoizedState:Rt.next;if(i!==null)Rt=i,Et=n;else{if(n===null)throw Error(t(310));Et=n,n={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},Rt===null?it.memoizedState=Rt=n:Rt=Rt.next=n}return Rt}function Va(n,i){return typeof i=="function"?i(n):i}function bh(n){var i=Tn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=Et,d=c.baseQueue,p=a.pending;if(p!==null){if(d!==null){var v=d.next;d.next=p.next,p.next=v}c.baseQueue=d=p,a.pending=null}if(d!==null){p=d.next,c=c.baseState;var S=v=null,D=null,B=p;do{var X=B.lane;if((ls&X)===X)D!==null&&(D=D.next={lane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),c=B.hasEagerState?B.eagerState:n(c,B.action);else{var Y={lane:X,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null};D===null?(S=D=Y,v=c):D=D.next=Y,it.lanes|=X,us|=X}B=B.next}while(B!==null&&B!==p);D===null?v=c:D.next=S,kn(c,i.memoizedState)||(Jt=!0),i.memoizedState=c,i.baseState=v,i.baseQueue=D,a.lastRenderedState=c}if(n=a.interleaved,n!==null){d=n;do p=d.lane,it.lanes|=p,us|=p,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function Fh(n){var i=Tn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,d=a.pending,p=i.memoizedState;if(d!==null){a.pending=null;var v=d=d.next;do p=n(p,v.action),v=v.next;while(v!==d);kn(p,i.memoizedState)||(Jt=!0),i.memoizedState=p,i.baseQueue===null&&(i.baseState=p),a.lastRenderedState=p}return[p,c]}function cm(){}function hm(n,i){var a=it,c=Tn(),d=i(),p=!kn(c.memoizedState,d);if(p&&(c.memoizedState=d,Jt=!0),c=c.queue,Uh(pm.bind(null,a,c,n),[n]),c.getSnapshot!==i||p||Rt!==null&&Rt.memoizedState.tag&1){if(a.flags|=2048,Oa(9,fm.bind(null,a,c,d,i),void 0,null),Ct===null)throw Error(t(349));(ls&30)!==0||dm(a,i,d)}return d}function dm(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=it.updateQueue,i===null?(i={lastEffect:null,stores:null},it.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function fm(n,i,a,c){i.value=a,i.getSnapshot=c,mm(i)&&gm(n)}function pm(n,i,a){return a(function(){mm(i)&&gm(n)})}function mm(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!kn(n,a)}catch{return!0}}function gm(n){var i=Cr(n,1);i!==null&&On(i,n,1,-1)}function ym(n){var i=rr();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Va,lastRenderedState:n},i.queue=n,n=n.dispatch=FE.bind(null,it,n),[i.memoizedState,n]}function Oa(n,i,a,c){return n={tag:n,create:i,destroy:a,deps:c,next:null},i=it.updateQueue,i===null?(i={lastEffect:null,stores:null},it.updateQueue=i,i.lastEffect=n.next=n):(a=i.lastEffect,a===null?i.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,i.lastEffect=n)),n}function _m(){return Tn().memoizedState}function yu(n,i,a,c){var d=rr();it.flags|=n,d.memoizedState=Oa(1|i,a,void 0,c===void 0?null:c)}function _u(n,i,a,c){var d=Tn();c=c===void 0?null:c;var p=void 0;if(Et!==null){var v=Et.memoizedState;if(p=v.destroy,c!==null&&Oh(c,v.deps)){d.memoizedState=Oa(i,a,p,c);return}}it.flags|=n,d.memoizedState=Oa(1|i,a,p,c)}function vm(n,i){return yu(8390656,8,n,i)}function Uh(n,i){return _u(2048,8,n,i)}function wm(n,i){return _u(4,2,n,i)}function Em(n,i){return _u(4,4,n,i)}function Tm(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Im(n,i,a){return a=a!=null?a.concat([n]):null,_u(4,4,Tm.bind(null,i,n),a)}function jh(){}function Sm(n,i){var a=Tn();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&Oh(i,c[1])?c[0]:(a.memoizedState=[n,i],n)}function Am(n,i){var a=Tn();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&Oh(i,c[1])?c[0]:(n=n(),a.memoizedState=[n,i],n)}function Rm(n,i,a){return(ls&21)===0?(n.baseState&&(n.baseState=!1,Jt=!0),n.memoizedState=a):(kn(a,i)||(a=oa(),it.lanes|=a,us|=a,n.baseState=!0),i)}function LE(n,i){var a=Fe;Fe=a!==0&&4>a?a:4,n(!0);var c=Vh.transition;Vh.transition={};try{n(!1),i()}finally{Fe=a,Vh.transition=c}}function Cm(){return Tn().memoizedState}function bE(n,i,a){var c=fi(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},Pm(n))km(i,a);else if(a=sm(n,i,a,c),a!==null){var d=Kt();On(a,n,c,d),Nm(a,i,c)}}function FE(n,i,a){var c=fi(n),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(Pm(n))km(i,d);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=i.lastRenderedReducer,p!==null))try{var v=i.lastRenderedState,S=p(v,a);if(d.hasEagerState=!0,d.eagerState=S,kn(S,v)){var D=i.interleaved;D===null?(d.next=d,Ch(i)):(d.next=D.next,D.next=d),i.interleaved=d;return}}catch{}a=sm(n,i,d,c),a!==null&&(d=Kt(),On(a,n,c,d),Nm(a,i,c))}}function Pm(n){var i=n.alternate;return n===it||i!==null&&i===it}function km(n,i){xa=gu=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function Nm(n,i,a){if((a&4194240)!==0){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,la(n,a)}}var vu={readContext:En,useCallback:zt,useContext:zt,useEffect:zt,useImperativeHandle:zt,useInsertionEffect:zt,useLayoutEffect:zt,useMemo:zt,useReducer:zt,useRef:zt,useState:zt,useDebugValue:zt,useDeferredValue:zt,useTransition:zt,useMutableSource:zt,useSyncExternalStore:zt,useId:zt,unstable_isNewReconciler:!1},UE={readContext:En,useCallback:function(n,i){return rr().memoizedState=[n,i===void 0?null:i],n},useContext:En,useEffect:vm,useImperativeHandle:function(n,i,a){return a=a!=null?a.concat([n]):null,yu(4194308,4,Tm.bind(null,i,n),a)},useLayoutEffect:function(n,i){return yu(4194308,4,n,i)},useInsertionEffect:function(n,i){return yu(4,2,n,i)},useMemo:function(n,i){var a=rr();return i=i===void 0?null:i,n=n(),a.memoizedState=[n,i],n},useReducer:function(n,i,a){var c=rr();return i=a!==void 0?a(i):i,c.memoizedState=c.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},c.queue=n,n=n.dispatch=bE.bind(null,it,n),[c.memoizedState,n]},useRef:function(n){var i=rr();return n={current:n},i.memoizedState=n},useState:ym,useDebugValue:jh,useDeferredValue:function(n){return rr().memoizedState=n},useTransition:function(){var n=ym(!1),i=n[0];return n=LE.bind(null,n[1]),rr().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,a){var c=it,d=rr();if(nt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=i(),Ct===null)throw Error(t(349));(ls&30)!==0||dm(c,i,a)}d.memoizedState=a;var p={value:a,getSnapshot:i};return d.queue=p,vm(pm.bind(null,c,p,n),[n]),c.flags|=2048,Oa(9,fm.bind(null,c,p,a,i),void 0,null),a},useId:function(){var n=rr(),i=Ct.identifierPrefix;if(nt){var a=Rr,c=Ar;a=(c&~(1<<32-sn(c)-1)).toString(32)+a,i=":"+i+"R"+a,a=Da++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=ME++,i=":"+i+"r"+a.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},jE={readContext:En,useCallback:Sm,useContext:En,useEffect:Uh,useImperativeHandle:Im,useInsertionEffect:wm,useLayoutEffect:Em,useMemo:Am,useReducer:bh,useRef:_m,useState:function(){return bh(Va)},useDebugValue:jh,useDeferredValue:function(n){var i=Tn();return Rm(i,Et.memoizedState,n)},useTransition:function(){var n=bh(Va)[0],i=Tn().memoizedState;return[n,i]},useMutableSource:cm,useSyncExternalStore:hm,useId:Cm,unstable_isNewReconciler:!1},zE={readContext:En,useCallback:Sm,useContext:En,useEffect:Uh,useImperativeHandle:Im,useInsertionEffect:wm,useLayoutEffect:Em,useMemo:Am,useReducer:Fh,useRef:_m,useState:function(){return Fh(Va)},useDebugValue:jh,useDeferredValue:function(n){var i=Tn();return Et===null?i.memoizedState=n:Rm(i,Et.memoizedState,n)},useTransition:function(){var n=Fh(Va)[0],i=Tn().memoizedState;return[n,i]},useMutableSource:cm,useSyncExternalStore:hm,useId:Cm,unstable_isNewReconciler:!1};function xn(n,i){if(n&&n.defaultProps){i=ae({},i),n=n.defaultProps;for(var a in n)i[a]===void 0&&(i[a]=n[a]);return i}return i}function zh(n,i,a,c){i=n.memoizedState,a=a(c,i),a=a==null?i:ae({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var wu={isMounted:function(n){return(n=n._reactInternals)?Cn(n)===n:!1},enqueueSetState:function(n,i,a){n=n._reactInternals;var c=Kt(),d=fi(n),p=Pr(c,d);p.payload=i,a!=null&&(p.callback=a),i=ui(n,p,d),i!==null&&(On(i,n,d,c),du(i,n,d))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var c=Kt(),d=fi(n),p=Pr(c,d);p.tag=1,p.payload=i,a!=null&&(p.callback=a),i=ui(n,p,d),i!==null&&(On(i,n,d,c),du(i,n,d))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=Kt(),c=fi(n),d=Pr(a,c);d.tag=2,i!=null&&(d.callback=i),i=ui(n,d,c),i!==null&&(On(i,n,c,a),du(i,n,c))}};function xm(n,i,a,c,d,p,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,p,v):i.prototype&&i.prototype.isPureReactComponent?!wa(a,c)||!wa(d,p):!0}function Dm(n,i,a){var c=!1,d=oi,p=i.contextType;return typeof p=="object"&&p!==null?p=En(p):(d=Yt(i)?rs:jt.current,c=i.contextTypes,p=(c=c!=null)?ro(n,d):oi),i=new i(a,p),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=wu,n.stateNode=i,i._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=p),i}function Vm(n,i,a,c){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,c),i.state!==n&&wu.enqueueReplaceState(i,i.state,null)}function Bh(n,i,a,c){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs={},Ph(n);var p=i.contextType;typeof p=="object"&&p!==null?d.context=En(p):(p=Yt(i)?rs:jt.current,d.context=ro(n,p)),d.state=n.memoizedState,p=i.getDerivedStateFromProps,typeof p=="function"&&(zh(n,i,p,a),d.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(i=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),i!==d.state&&wu.enqueueReplaceState(d,d.state,null),fu(n,a,d,c),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function ho(n,i){try{var a="",c=i;do a+=ke(c),c=c.return;while(c);var d=a}catch(p){d=`
Error generating stack: `+p.message+`
`+p.stack}return{value:n,source:i,stack:d,digest:null}}function $h(n,i,a){return{value:n,source:null,stack:a??null,digest:i??null}}function qh(n,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var BE=typeof WeakMap=="function"?WeakMap:Map;function Om(n,i,a){a=Pr(-1,a),a.tag=3,a.payload={element:null};var c=i.value;return a.callback=function(){Cu||(Cu=!0,sd=c),qh(n,i)},a}function Mm(n,i,a){a=Pr(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=i.value;a.payload=function(){return c(d)},a.callback=function(){qh(n,i)}}var p=n.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(a.callback=function(){qh(n,i),typeof c!="function"&&(hi===null?hi=new Set([this]):hi.add(this));var v=i.stack;this.componentDidCatch(i.value,{componentStack:v!==null?v:""})}),a}function Lm(n,i,a){var c=n.pingCache;if(c===null){c=n.pingCache=new BE;var d=new Set;c.set(i,d)}else d=c.get(i),d===void 0&&(d=new Set,c.set(i,d));d.has(a)||(d.add(a),n=nT.bind(null,n,i,a),i.then(n,n))}function bm(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function Fm(n,i,a,c,d){return(n.mode&1)===0?(n===i?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=Pr(-1,1),i.tag=2,ui(a,i,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=d,n)}var $E=ee.ReactCurrentOwner,Jt=!1;function Gt(n,i,a,c){i.child=n===null?im(i,null,a,c):ao(i,n.child,a,c)}function Um(n,i,a,c,d){a=a.render;var p=i.ref;return uo(i,d),c=Mh(n,i,a,c,p,d),a=Lh(),n!==null&&!Jt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~d,kr(n,i,d)):(nt&&a&&_h(i),i.flags|=1,Gt(n,i,c,d),i.child)}function jm(n,i,a,c,d){if(n===null){var p=a.type;return typeof p=="function"&&!dd(p)&&p.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=p,zm(n,i,p,c,d)):(n=Vu(a.type,null,c,i,i.mode,d),n.ref=i.ref,n.return=i,i.child=n)}if(p=n.child,(n.lanes&d)===0){var v=p.memoizedProps;if(a=a.compare,a=a!==null?a:wa,a(v,c)&&n.ref===i.ref)return kr(n,i,d)}return i.flags|=1,n=mi(p,c),n.ref=i.ref,n.return=i,i.child=n}function zm(n,i,a,c,d){if(n!==null){var p=n.memoizedProps;if(wa(p,c)&&n.ref===i.ref)if(Jt=!1,i.pendingProps=c=p,(n.lanes&d)!==0)(n.flags&131072)!==0&&(Jt=!0);else return i.lanes=n.lanes,kr(n,i,d)}return Wh(n,i,a,c,d)}function Bm(n,i,a){var c=i.pendingProps,d=c.children,p=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ye(po,dn),dn|=a;else{if((a&1073741824)===0)return n=p!==null?p.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,Ye(po,dn),dn|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=p!==null?p.baseLanes:a,Ye(po,dn),dn|=c}else p!==null?(c=p.baseLanes|a,i.memoizedState=null):c=a,Ye(po,dn),dn|=c;return Gt(n,i,d,a),i.child}function $m(n,i){var a=i.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function Wh(n,i,a,c,d){var p=Yt(a)?rs:jt.current;return p=ro(i,p),uo(i,d),a=Mh(n,i,a,c,p,d),c=Lh(),n!==null&&!Jt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~d,kr(n,i,d)):(nt&&c&&_h(i),i.flags|=1,Gt(n,i,a,d),i.child)}function qm(n,i,a,c,d){if(Yt(a)){var p=!0;iu(i)}else p=!1;if(uo(i,d),i.stateNode===null)Tu(n,i),Dm(i,a,c),Bh(i,a,c,d),c=!0;else if(n===null){var v=i.stateNode,S=i.memoizedProps;v.props=S;var D=v.context,B=a.contextType;typeof B=="object"&&B!==null?B=En(B):(B=Yt(a)?rs:jt.current,B=ro(i,B));var X=a.getDerivedStateFromProps,Y=typeof X=="function"||typeof v.getSnapshotBeforeUpdate=="function";Y||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==c||D!==B)&&Vm(i,v,c,B),li=!1;var Q=i.memoizedState;v.state=Q,fu(i,c,v,d),D=i.memoizedState,S!==c||Q!==D||Xt.current||li?(typeof X=="function"&&(zh(i,a,X,c),D=i.memoizedState),(S=li||xm(i,a,S,c,Q,D,B))?(Y||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(i.flags|=4194308)):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=D),v.props=c,v.state=D,v.context=B,c=S):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{v=i.stateNode,om(n,i),S=i.memoizedProps,B=i.type===i.elementType?S:xn(i.type,S),v.props=B,Y=i.pendingProps,Q=v.context,D=a.contextType,typeof D=="object"&&D!==null?D=En(D):(D=Yt(a)?rs:jt.current,D=ro(i,D));var le=a.getDerivedStateFromProps;(X=typeof le=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==Y||Q!==D)&&Vm(i,v,c,D),li=!1,Q=i.memoizedState,v.state=Q,fu(i,c,v,d);var de=i.memoizedState;S!==Y||Q!==de||Xt.current||li?(typeof le=="function"&&(zh(i,a,le,c),de=i.memoizedState),(B=li||xm(i,a,B,c,Q,de,D)||!1)?(X||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,de,D),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,de,D)),typeof v.componentDidUpdate=="function"&&(i.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof v.componentDidUpdate!="function"||S===n.memoizedProps&&Q===n.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&Q===n.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=de),v.props=c,v.state=de,v.context=D,c=B):(typeof v.componentDidUpdate!="function"||S===n.memoizedProps&&Q===n.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&Q===n.memoizedState||(i.flags|=1024),c=!1)}return Hh(n,i,a,c,p,d)}function Hh(n,i,a,c,d,p){$m(n,i);var v=(i.flags&128)!==0;if(!c&&!v)return d&&Qp(i,a,!1),kr(n,i,p);c=i.stateNode,$E.current=i;var S=v&&typeof a.getDerivedStateFromError!="function"?null:c.render();return i.flags|=1,n!==null&&v?(i.child=ao(i,n.child,null,p),i.child=ao(i,null,S,p)):Gt(n,i,S,p),i.memoizedState=c.state,d&&Qp(i,a,!0),i.child}function Wm(n){var i=n.stateNode;i.pendingContext?Gp(n,i.pendingContext,i.pendingContext!==i.context):i.context&&Gp(n,i.context,!1),kh(n,i.containerInfo)}function Hm(n,i,a,c,d){return oo(),Th(d),i.flags|=256,Gt(n,i,a,c),i.child}var Gh={dehydrated:null,treeContext:null,retryLane:0};function Kh(n){return{baseLanes:n,cachePool:null,transitions:null}}function Gm(n,i,a){var c=i.pendingProps,d=rt.current,p=!1,v=(i.flags&128)!==0,S;if((S=v)||(S=n!==null&&n.memoizedState===null?!1:(d&2)!==0),S?(p=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),Ye(rt,d&1),n===null)return Eh(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((i.mode&1)===0?i.lanes=1:n.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(v=c.children,n=c.fallback,p?(c=i.mode,p=i.child,v={mode:"hidden",children:v},(c&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=v):p=Ou(v,c,0,null),n=fs(n,c,a,null),p.return=i,n.return=i,p.sibling=n,i.child=p,i.child.memoizedState=Kh(a),i.memoizedState=Gh,n):Qh(i,v));if(d=n.memoizedState,d!==null&&(S=d.dehydrated,S!==null))return qE(n,i,v,c,S,d,a);if(p){p=c.fallback,v=i.mode,d=n.child,S=d.sibling;var D={mode:"hidden",children:c.children};return(v&1)===0&&i.child!==d?(c=i.child,c.childLanes=0,c.pendingProps=D,i.deletions=null):(c=mi(d,D),c.subtreeFlags=d.subtreeFlags&14680064),S!==null?p=mi(S,p):(p=fs(p,v,a,null),p.flags|=2),p.return=i,c.return=i,c.sibling=p,i.child=c,c=p,p=i.child,v=n.child.memoizedState,v=v===null?Kh(a):{baseLanes:v.baseLanes|a,cachePool:null,transitions:v.transitions},p.memoizedState=v,p.childLanes=n.childLanes&~a,i.memoizedState=Gh,c}return p=n.child,n=p.sibling,c=mi(p,{mode:"visible",children:c.children}),(i.mode&1)===0&&(c.lanes=a),c.return=i,c.sibling=null,n!==null&&(a=i.deletions,a===null?(i.deletions=[n],i.flags|=16):a.push(n)),i.child=c,i.memoizedState=null,c}function Qh(n,i){return i=Ou({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function Eu(n,i,a,c){return c!==null&&Th(c),ao(i,n.child,null,a),n=Qh(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function qE(n,i,a,c,d,p,v){if(a)return i.flags&256?(i.flags&=-257,c=$h(Error(t(422))),Eu(n,i,v,c)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(p=c.fallback,d=i.mode,c=Ou({mode:"visible",children:c.children},d,0,null),p=fs(p,d,v,null),p.flags|=2,c.return=i,p.return=i,c.sibling=p,i.child=c,(i.mode&1)!==0&&ao(i,n.child,null,v),i.child.memoizedState=Kh(v),i.memoizedState=Gh,p);if((i.mode&1)===0)return Eu(n,i,v,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var S=c.dgst;return c=S,p=Error(t(419)),c=$h(p,c,void 0),Eu(n,i,v,c)}if(S=(v&n.childLanes)!==0,Jt||S){if(c=Ct,c!==null){switch(v&-v){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|v))!==0?0:d,d!==0&&d!==p.retryLane&&(p.retryLane=d,Cr(n,d),On(c,n,d,-1))}return hd(),c=$h(Error(t(421))),Eu(n,i,v,c)}return d.data==="$?"?(i.flags|=128,i.child=n.child,i=rT.bind(null,n),d._reactRetry=i,null):(n=p.treeContext,hn=ii(d.nextSibling),cn=i,nt=!0,Nn=null,n!==null&&(vn[wn++]=Ar,vn[wn++]=Rr,vn[wn++]=is,Ar=n.id,Rr=n.overflow,is=i),i=Qh(i,c.children),i.flags|=4096,i)}function Km(n,i,a){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i),Rh(n.return,i,a)}function Xh(n,i,a,c,d){var p=n.memoizedState;p===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(p.isBackwards=i,p.rendering=null,p.renderingStartTime=0,p.last=c,p.tail=a,p.tailMode=d)}function Qm(n,i,a){var c=i.pendingProps,d=c.revealOrder,p=c.tail;if(Gt(n,i,c.children,a),c=rt.current,(c&2)!==0)c=c&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Km(n,a,i);else if(n.tag===19)Km(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(Ye(rt,c),(i.mode&1)===0)i.memoizedState=null;else switch(d){case"forwards":for(a=i.child,d=null;a!==null;)n=a.alternate,n!==null&&pu(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=i.child,i.child=null):(d=a.sibling,a.sibling=null),Xh(i,!1,d,a,p);break;case"backwards":for(a=null,d=i.child,i.child=null;d!==null;){if(n=d.alternate,n!==null&&pu(n)===null){i.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}Xh(i,!0,a,null,p);break;case"together":Xh(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Tu(n,i){(i.mode&1)===0&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function kr(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),us|=i.lanes,(a&i.childLanes)===0)return null;if(n!==null&&i.child!==n.child)throw Error(t(153));if(i.child!==null){for(n=i.child,a=mi(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=mi(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function WE(n,i,a){switch(i.tag){case 3:Wm(i),oo();break;case 5:um(i);break;case 1:Yt(i.type)&&iu(i);break;case 4:kh(i,i.stateNode.containerInfo);break;case 10:var c=i.type._context,d=i.memoizedProps.value;Ye(cu,c._currentValue),c._currentValue=d;break;case 13:if(c=i.memoizedState,c!==null)return c.dehydrated!==null?(Ye(rt,rt.current&1),i.flags|=128,null):(a&i.child.childLanes)!==0?Gm(n,i,a):(Ye(rt,rt.current&1),n=kr(n,i,a),n!==null?n.sibling:null);Ye(rt,rt.current&1);break;case 19:if(c=(a&i.childLanes)!==0,(n.flags&128)!==0){if(c)return Qm(n,i,a);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Ye(rt,rt.current),c)break;return null;case 22:case 23:return i.lanes=0,Bm(n,i,a)}return kr(n,i,a)}var Xm,Yh,Ym,Jm;Xm=function(n,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Yh=function(){},Ym=function(n,i,a,c){var d=n.memoizedProps;if(d!==c){n=i.stateNode,as(nr.current);var p=null;switch(a){case"input":d=ks(n,d),c=ks(n,c),p=[];break;case"select":d=ae({},d,{value:void 0}),c=ae({},c,{value:void 0}),p=[];break;case"textarea":d=Qo(n,d),c=Qo(n,c),p=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=tu)}Rn(a,c);var v;a=null;for(B in d)if(!c.hasOwnProperty(B)&&d.hasOwnProperty(B)&&d[B]!=null)if(B==="style"){var S=d[B];for(v in S)S.hasOwnProperty(v)&&(a||(a={}),a[v]="")}else B!=="dangerouslySetInnerHTML"&&B!=="children"&&B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&B!=="autoFocus"&&(o.hasOwnProperty(B)?p||(p=[]):(p=p||[]).push(B,null));for(B in c){var D=c[B];if(S=d?.[B],c.hasOwnProperty(B)&&D!==S&&(D!=null||S!=null))if(B==="style")if(S){for(v in S)!S.hasOwnProperty(v)||D&&D.hasOwnProperty(v)||(a||(a={}),a[v]="");for(v in D)D.hasOwnProperty(v)&&S[v]!==D[v]&&(a||(a={}),a[v]=D[v])}else a||(p||(p=[]),p.push(B,a)),a=D;else B==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,S=S?S.__html:void 0,D!=null&&S!==D&&(p=p||[]).push(B,D)):B==="children"?typeof D!="string"&&typeof D!="number"||(p=p||[]).push(B,""+D):B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&(o.hasOwnProperty(B)?(D!=null&&B==="onScroll"&&Ze("scroll",n),p||S===D||(p=[])):(p=p||[]).push(B,D))}a&&(p=p||[]).push("style",a);var B=p;(i.updateQueue=B)&&(i.flags|=4)}},Jm=function(n,i,a,c){a!==c&&(i.flags|=4)};function Ma(n,i){if(!nt)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Bt(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(i)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=a,i}function HE(n,i,a){var c=i.pendingProps;switch(vh(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bt(i),null;case 1:return Yt(i.type)&&ru(),Bt(i),null;case 3:return c=i.stateNode,co(),et(Xt),et(jt),Dh(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(lu(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Nn!==null&&(ld(Nn),Nn=null))),Yh(n,i),Bt(i),null;case 5:Nh(i);var d=as(Na.current);if(a=i.type,n!==null&&i.stateNode!=null)Ym(n,i,a,c,d),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!c){if(i.stateNode===null)throw Error(t(166));return Bt(i),null}if(n=as(nr.current),lu(i)){c=i.stateNode,a=i.type;var p=i.memoizedProps;switch(c[tr]=i,c[Aa]=p,n=(i.mode&1)!==0,a){case"dialog":Ze("cancel",c),Ze("close",c);break;case"iframe":case"object":case"embed":Ze("load",c);break;case"video":case"audio":for(d=0;d<Ta.length;d++)Ze(Ta[d],c);break;case"source":Ze("error",c);break;case"img":case"image":case"link":Ze("error",c),Ze("load",c);break;case"details":Ze("toggle",c);break;case"input":Rl(c,p),Ze("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!p.multiple},Ze("invalid",c);break;case"textarea":Xo(c,p),Ze("invalid",c)}Rn(a,p),d=null;for(var v in p)if(p.hasOwnProperty(v)){var S=p[v];v==="children"?typeof S=="string"?c.textContent!==S&&(p.suppressHydrationWarning!==!0&&eu(c.textContent,S,n),d=["children",S]):typeof S=="number"&&c.textContent!==""+S&&(p.suppressHydrationWarning!==!0&&eu(c.textContent,S,n),d=["children",""+S]):o.hasOwnProperty(v)&&S!=null&&v==="onScroll"&&Ze("scroll",c)}switch(a){case"input":gn(c),Ko(c,p,!0);break;case"textarea":gn(c),Br(c);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(c.onclick=tu)}c=d,i.updateQueue=c,c!==null&&(i.flags|=4)}else{v=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Yo(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=v.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=v.createElement(a,{is:c.is}):(n=v.createElement(a),a==="select"&&(v=n,c.multiple?v.multiple=!0:c.size&&(v.size=c.size))):n=v.createElementNS(n,a),n[tr]=i,n[Aa]=c,Xm(n,i,!1,!1),i.stateNode=n;e:{switch(v=Vs(a,c),a){case"dialog":Ze("cancel",n),Ze("close",n),d=c;break;case"iframe":case"object":case"embed":Ze("load",n),d=c;break;case"video":case"audio":for(d=0;d<Ta.length;d++)Ze(Ta[d],n);d=c;break;case"source":Ze("error",n),d=c;break;case"img":case"image":case"link":Ze("error",n),Ze("load",n),d=c;break;case"details":Ze("toggle",n),d=c;break;case"input":Rl(n,c),d=ks(n,c),Ze("invalid",n);break;case"option":d=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},d=ae({},c,{value:void 0}),Ze("invalid",n);break;case"textarea":Xo(n,c),d=Qo(n,c),Ze("invalid",n);break;default:d=c}Rn(a,d),S=d;for(p in S)if(S.hasOwnProperty(p)){var D=S[p];p==="style"?Ds(n,D):p==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,D!=null&&Pl(n,D)):p==="children"?typeof D=="string"?(a!=="textarea"||D!=="")&&Bi(n,D):typeof D=="number"&&Bi(n,""+D):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(o.hasOwnProperty(p)?D!=null&&p==="onScroll"&&Ze("scroll",n):D!=null&&j(n,p,D,v))}switch(a){case"input":gn(n),Ko(n,c,!1);break;case"textarea":gn(n),Br(n);break;case"option":c.value!=null&&n.setAttribute("value",""+be(c.value));break;case"select":n.multiple=!!c.multiple,p=c.value,p!=null?An(n,!!c.multiple,p,!1):c.defaultValue!=null&&An(n,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=tu)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Bt(i),null;case 6:if(n&&i.stateNode!=null)Jm(n,i,n.memoizedProps,c);else{if(typeof c!="string"&&i.stateNode===null)throw Error(t(166));if(a=as(Na.current),as(nr.current),lu(i)){if(c=i.stateNode,a=i.memoizedProps,c[tr]=i,(p=c.nodeValue!==a)&&(n=cn,n!==null))switch(n.tag){case 3:eu(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&eu(c.nodeValue,a,(n.mode&1)!==0)}p&&(i.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[tr]=i,i.stateNode=c}return Bt(i),null;case 13:if(et(rt),c=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(nt&&hn!==null&&(i.mode&1)!==0&&(i.flags&128)===0)tm(),oo(),i.flags|=98560,p=!1;else if(p=lu(i),c!==null&&c.dehydrated!==null){if(n===null){if(!p)throw Error(t(318));if(p=i.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(t(317));p[tr]=i}else oo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Bt(i),p=!1}else Nn!==null&&(ld(Nn),Nn=null),p=!0;if(!p)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=a,i):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(i.child.flags|=8192,(i.mode&1)!==0&&(n===null||(rt.current&1)!==0?Tt===0&&(Tt=3):hd())),i.updateQueue!==null&&(i.flags|=4),Bt(i),null);case 4:return co(),Yh(n,i),n===null&&Ia(i.stateNode.containerInfo),Bt(i),null;case 10:return Ah(i.type._context),Bt(i),null;case 17:return Yt(i.type)&&ru(),Bt(i),null;case 19:if(et(rt),p=i.memoizedState,p===null)return Bt(i),null;if(c=(i.flags&128)!==0,v=p.rendering,v===null)if(c)Ma(p,!1);else{if(Tt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(v=pu(n),v!==null){for(i.flags|=128,Ma(p,!1),c=v.updateQueue,c!==null&&(i.updateQueue=c,i.flags|=4),i.subtreeFlags=0,c=a,a=i.child;a!==null;)p=a,n=c,p.flags&=14680066,v=p.alternate,v===null?(p.childLanes=0,p.lanes=n,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=v.childLanes,p.lanes=v.lanes,p.child=v.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=v.memoizedProps,p.memoizedState=v.memoizedState,p.updateQueue=v.updateQueue,p.type=v.type,n=v.dependencies,p.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Ye(rt,rt.current&1|2),i.child}n=n.sibling}p.tail!==null&&Je()>mo&&(i.flags|=128,c=!0,Ma(p,!1),i.lanes=4194304)}else{if(!c)if(n=pu(v),n!==null){if(i.flags|=128,c=!0,a=n.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),Ma(p,!0),p.tail===null&&p.tailMode==="hidden"&&!v.alternate&&!nt)return Bt(i),null}else 2*Je()-p.renderingStartTime>mo&&a!==1073741824&&(i.flags|=128,c=!0,Ma(p,!1),i.lanes=4194304);p.isBackwards?(v.sibling=i.child,i.child=v):(a=p.last,a!==null?a.sibling=v:i.child=v,p.last=v)}return p.tail!==null?(i=p.tail,p.rendering=i,p.tail=i.sibling,p.renderingStartTime=Je(),i.sibling=null,a=rt.current,Ye(rt,c?a&1|2:a&1),i):(Bt(i),null);case 22:case 23:return cd(),c=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(i.flags|=8192),c&&(i.mode&1)!==0?(dn&1073741824)!==0&&(Bt(i),i.subtreeFlags&6&&(i.flags|=8192)):Bt(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function GE(n,i){switch(vh(i),i.tag){case 1:return Yt(i.type)&&ru(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return co(),et(Xt),et(jt),Dh(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 5:return Nh(i),null;case 13:if(et(rt),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(t(340));oo()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return et(rt),null;case 4:return co(),null;case 10:return Ah(i.type._context),null;case 22:case 23:return cd(),null;case 24:return null;default:return null}}var Iu=!1,$t=!1,KE=typeof WeakSet=="function"?WeakSet:Set,ce=null;function fo(n,i){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){at(n,i,c)}else a.current=null}function Jh(n,i,a){try{a()}catch(c){at(n,i,c)}}var Zm=!1;function QE(n,i){if(ch=wr,n=xp(),nh(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break e}var v=0,S=-1,D=-1,B=0,X=0,Y=n,Q=null;t:for(;;){for(var le;Y!==a||d!==0&&Y.nodeType!==3||(S=v+d),Y!==p||c!==0&&Y.nodeType!==3||(D=v+c),Y.nodeType===3&&(v+=Y.nodeValue.length),(le=Y.firstChild)!==null;)Q=Y,Y=le;for(;;){if(Y===n)break t;if(Q===a&&++B===d&&(S=v),Q===p&&++X===c&&(D=v),(le=Y.nextSibling)!==null)break;Y=Q,Q=Y.parentNode}Y=le}a=S===-1||D===-1?null:{start:S,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(hh={focusedElem:n,selectionRange:a},wr=!1,ce=i;ce!==null;)if(i=ce,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,ce=n;else for(;ce!==null;){i=ce;try{var de=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(de!==null){var pe=de.memoizedProps,ct=de.memoizedState,L=i.stateNode,V=L.getSnapshotBeforeUpdate(i.elementType===i.type?pe:xn(i.type,pe),ct);L.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var z=i.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Z){at(i,i.return,Z)}if(n=i.sibling,n!==null){n.return=i.return,ce=n;break}ce=i.return}return de=Zm,Zm=!1,de}function La(n,i,a){var c=i.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&n)===n){var p=d.destroy;d.destroy=void 0,p!==void 0&&Jh(i,a,p)}d=d.next}while(d!==c)}}function Su(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==i)}}function Zh(n){var i=n.ref;if(i!==null){var a=n.stateNode;n.tag,n=a,typeof i=="function"?i(n):i.current=n}}function eg(n){var i=n.alternate;i!==null&&(n.alternate=null,eg(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[tr],delete i[Aa],delete i[mh],delete i[xE],delete i[DE])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function tg(n){return n.tag===5||n.tag===3||n.tag===4}function ng(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||tg(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function ed(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(n,i):a.insertBefore(n,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(n,a)):(i=a,i.appendChild(n)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=tu));else if(c!==4&&(n=n.child,n!==null))for(ed(n,i,a),n=n.sibling;n!==null;)ed(n,i,a),n=n.sibling}function td(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(td(n,i,a),n=n.sibling;n!==null;)td(n,i,a),n=n.sibling}var Vt=null,Dn=!1;function ci(n,i,a){for(a=a.child;a!==null;)rg(n,i,a),a=a.sibling}function rg(n,i,a){if(rn&&typeof rn.onCommitFiberUnmount=="function")try{rn.onCommitFiberUnmount(Gi,a)}catch{}switch(a.tag){case 5:$t||fo(a,i);case 6:var c=Vt,d=Dn;Vt=null,ci(n,i,a),Vt=c,Dn=d,Vt!==null&&(Dn?(n=Vt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Vt.removeChild(a.stateNode));break;case 18:Vt!==null&&(Dn?(n=Vt,a=a.stateNode,n.nodeType===8?ph(n.parentNode,a):n.nodeType===1&&ph(n,a),ei(n)):ph(Vt,a.stateNode));break;case 4:c=Vt,d=Dn,Vt=a.stateNode.containerInfo,Dn=!0,ci(n,i,a),Vt=c,Dn=d;break;case 0:case 11:case 14:case 15:if(!$t&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var p=d,v=p.destroy;p=p.tag,v!==void 0&&((p&2)!==0||(p&4)!==0)&&Jh(a,i,v),d=d.next}while(d!==c)}ci(n,i,a);break;case 1:if(!$t&&(fo(a,i),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(S){at(a,i,S)}ci(n,i,a);break;case 21:ci(n,i,a);break;case 22:a.mode&1?($t=(c=$t)||a.memoizedState!==null,ci(n,i,a),$t=c):ci(n,i,a);break;default:ci(n,i,a)}}function ig(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new KE),i.forEach(function(c){var d=iT.bind(null,n,c);a.has(c)||(a.add(c),c.then(d,d))})}}function Vn(n,i){var a=i.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var p=n,v=i,S=v;e:for(;S!==null;){switch(S.tag){case 5:Vt=S.stateNode,Dn=!1;break e;case 3:Vt=S.stateNode.containerInfo,Dn=!0;break e;case 4:Vt=S.stateNode.containerInfo,Dn=!0;break e}S=S.return}if(Vt===null)throw Error(t(160));rg(p,v,d),Vt=null,Dn=!1;var D=d.alternate;D!==null&&(D.return=null),d.return=null}catch(B){at(d,i,B)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)sg(i,n),i=i.sibling}function sg(n,i){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Vn(i,n),ir(n),c&4){try{La(3,n,n.return),Su(3,n)}catch(pe){at(n,n.return,pe)}try{La(5,n,n.return)}catch(pe){at(n,n.return,pe)}}break;case 1:Vn(i,n),ir(n),c&512&&a!==null&&fo(a,a.return);break;case 5:if(Vn(i,n),ir(n),c&512&&a!==null&&fo(a,a.return),n.flags&32){var d=n.stateNode;try{Bi(d,"")}catch(pe){at(n,n.return,pe)}}if(c&4&&(d=n.stateNode,d!=null)){var p=n.memoizedProps,v=a!==null?a.memoizedProps:p,S=n.type,D=n.updateQueue;if(n.updateQueue=null,D!==null)try{S==="input"&&p.type==="radio"&&p.name!=null&&Ns(d,p),Vs(S,v);var B=Vs(S,p);for(v=0;v<D.length;v+=2){var X=D[v],Y=D[v+1];X==="style"?Ds(d,Y):X==="dangerouslySetInnerHTML"?Pl(d,Y):X==="children"?Bi(d,Y):j(d,X,Y,B)}switch(S){case"input":zi(d,p);break;case"textarea":Cl(d,p);break;case"select":var Q=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!p.multiple;var le=p.value;le!=null?An(d,!!p.multiple,le,!1):Q!==!!p.multiple&&(p.defaultValue!=null?An(d,!!p.multiple,p.defaultValue,!0):An(d,!!p.multiple,p.multiple?[]:"",!1))}d[Aa]=p}catch(pe){at(n,n.return,pe)}}break;case 6:if(Vn(i,n),ir(n),c&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,p=n.memoizedProps;try{d.nodeValue=p}catch(pe){at(n,n.return,pe)}}break;case 3:if(Vn(i,n),ir(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{ei(i.containerInfo)}catch(pe){at(n,n.return,pe)}break;case 4:Vn(i,n),ir(n);break;case 13:Vn(i,n),ir(n),d=n.child,d.flags&8192&&(p=d.memoizedState!==null,d.stateNode.isHidden=p,!p||d.alternate!==null&&d.alternate.memoizedState!==null||(id=Je())),c&4&&ig(n);break;case 22:if(X=a!==null&&a.memoizedState!==null,n.mode&1?($t=(B=$t)||X,Vn(i,n),$t=B):Vn(i,n),ir(n),c&8192){if(B=n.memoizedState!==null,(n.stateNode.isHidden=B)&&!X&&(n.mode&1)!==0)for(ce=n,X=n.child;X!==null;){for(Y=ce=X;ce!==null;){switch(Q=ce,le=Q.child,Q.tag){case 0:case 11:case 14:case 15:La(4,Q,Q.return);break;case 1:fo(Q,Q.return);var de=Q.stateNode;if(typeof de.componentWillUnmount=="function"){c=Q,a=Q.return;try{i=c,de.props=i.memoizedProps,de.state=i.memoizedState,de.componentWillUnmount()}catch(pe){at(c,a,pe)}}break;case 5:fo(Q,Q.return);break;case 22:if(Q.memoizedState!==null){lg(Y);continue}}le!==null?(le.return=Q,ce=le):lg(Y)}X=X.sibling}e:for(X=null,Y=n;;){if(Y.tag===5){if(X===null){X=Y;try{d=Y.stateNode,B?(p=d.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(S=Y.stateNode,D=Y.memoizedProps.style,v=D!=null&&D.hasOwnProperty("display")?D.display:null,S.style.display=Wr("display",v))}catch(pe){at(n,n.return,pe)}}}else if(Y.tag===6){if(X===null)try{Y.stateNode.nodeValue=B?"":Y.memoizedProps}catch(pe){at(n,n.return,pe)}}else if((Y.tag!==22&&Y.tag!==23||Y.memoizedState===null||Y===n)&&Y.child!==null){Y.child.return=Y,Y=Y.child;continue}if(Y===n)break e;for(;Y.sibling===null;){if(Y.return===null||Y.return===n)break e;X===Y&&(X=null),Y=Y.return}X===Y&&(X=null),Y.sibling.return=Y.return,Y=Y.sibling}}break;case 19:Vn(i,n),ir(n),c&4&&ig(n);break;case 21:break;default:Vn(i,n),ir(n)}}function ir(n){var i=n.flags;if(i&2){try{e:{for(var a=n.return;a!==null;){if(tg(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(Bi(d,""),c.flags&=-33);var p=ng(n);td(n,p,d);break;case 3:case 4:var v=c.stateNode.containerInfo,S=ng(n);ed(n,S,v);break;default:throw Error(t(161))}}catch(D){at(n,n.return,D)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function XE(n,i,a){ce=n,og(n)}function og(n,i,a){for(var c=(n.mode&1)!==0;ce!==null;){var d=ce,p=d.child;if(d.tag===22&&c){var v=d.memoizedState!==null||Iu;if(!v){var S=d.alternate,D=S!==null&&S.memoizedState!==null||$t;S=Iu;var B=$t;if(Iu=v,($t=D)&&!B)for(ce=d;ce!==null;)v=ce,D=v.child,v.tag===22&&v.memoizedState!==null?ug(d):D!==null?(D.return=v,ce=D):ug(d);for(;p!==null;)ce=p,og(p),p=p.sibling;ce=d,Iu=S,$t=B}ag(n)}else(d.subtreeFlags&8772)!==0&&p!==null?(p.return=d,ce=p):ag(n)}}function ag(n){for(;ce!==null;){var i=ce;if((i.flags&8772)!==0){var a=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:$t||Su(5,i);break;case 1:var c=i.stateNode;if(i.flags&4&&!$t)if(a===null)c.componentDidMount();else{var d=i.elementType===i.type?a.memoizedProps:xn(i.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var p=i.updateQueue;p!==null&&lm(i,p,c);break;case 3:var v=i.updateQueue;if(v!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}lm(i,v,a)}break;case 5:var S=i.stateNode;if(a===null&&i.flags&4){a=S;var D=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":D.autoFocus&&a.focus();break;case"img":D.src&&(a.src=D.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var B=i.alternate;if(B!==null){var X=B.memoizedState;if(X!==null){var Y=X.dehydrated;Y!==null&&ei(Y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}$t||i.flags&512&&Zh(i)}catch(Q){at(i,i.return,Q)}}if(i===n){ce=null;break}if(a=i.sibling,a!==null){a.return=i.return,ce=a;break}ce=i.return}}function lg(n){for(;ce!==null;){var i=ce;if(i===n){ce=null;break}var a=i.sibling;if(a!==null){a.return=i.return,ce=a;break}ce=i.return}}function ug(n){for(;ce!==null;){var i=ce;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{Su(4,i)}catch(D){at(i,a,D)}break;case 1:var c=i.stateNode;if(typeof c.componentDidMount=="function"){var d=i.return;try{c.componentDidMount()}catch(D){at(i,d,D)}}var p=i.return;try{Zh(i)}catch(D){at(i,p,D)}break;case 5:var v=i.return;try{Zh(i)}catch(D){at(i,v,D)}}}catch(D){at(i,i.return,D)}if(i===n){ce=null;break}var S=i.sibling;if(S!==null){S.return=i.return,ce=S;break}ce=i.return}}var YE=Math.ceil,Au=ee.ReactCurrentDispatcher,nd=ee.ReactCurrentOwner,In=ee.ReactCurrentBatchConfig,$e=0,Ct=null,yt=null,Ot=0,dn=0,po=si(0),Tt=0,ba=null,us=0,Ru=0,rd=0,Fa=null,Zt=null,id=0,mo=1/0,Nr=null,Cu=!1,sd=null,hi=null,Pu=!1,di=null,ku=0,Ua=0,od=null,Nu=-1,xu=0;function Kt(){return($e&6)!==0?Je():Nu!==-1?Nu:Nu=Je()}function fi(n){return(n.mode&1)===0?1:($e&2)!==0&&Ot!==0?Ot&-Ot:OE.transition!==null?(xu===0&&(xu=oa()),xu):(n=Fe,n!==0||(n=window.event,n=n===void 0?16:$s(n.type)),n)}function On(n,i,a,c){if(50<Ua)throw Ua=0,od=null,Error(t(185));Yi(n,a,c),(($e&2)===0||n!==Ct)&&(n===Ct&&(($e&2)===0&&(Ru|=a),Tt===4&&pi(n,Ot)),en(n,c),a===1&&$e===0&&(i.mode&1)===0&&(mo=Je()+500,su&&ai()))}function en(n,i){var a=n.callbackNode;Xi(n,i);var c=yr(n,n===Ct?Ot:0);if(c===0)a!==null&&Ls(a),n.callbackNode=null,n.callbackPriority=0;else if(i=c&-c,n.callbackPriority!==i){if(a!=null&&Ls(a),i===1)n.tag===0?VE(hg.bind(null,n)):Xp(hg.bind(null,n)),kE(function(){($e&6)===0&&ai()}),a=null;else{switch(Wn(c)){case 1:a=bs;break;case 4:a=ra;break;case 16:a=Hi;break;case 536870912:a=Fs;break;default:a=Hi}a=vg(a,cg.bind(null,n))}n.callbackPriority=i,n.callbackNode=a}}function cg(n,i){if(Nu=-1,xu=0,($e&6)!==0)throw Error(t(327));var a=n.callbackNode;if(go()&&n.callbackNode!==a)return null;var c=yr(n,n===Ct?Ot:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||i)i=Du(n,c);else{i=c;var d=$e;$e|=2;var p=fg();(Ct!==n||Ot!==i)&&(Nr=null,mo=Je()+500,hs(n,i));do try{eT();break}catch(S){dg(n,S)}while(!0);Sh(),Au.current=p,$e=d,yt!==null?i=0:(Ct=null,Ot=0,i=Tt)}if(i!==0){if(i===2&&(d=sa(n),d!==0&&(c=d,i=ad(n,d))),i===1)throw a=ba,hs(n,0),pi(n,c),en(n,Je()),a;if(i===6)pi(n,c);else{if(d=n.current.alternate,(c&30)===0&&!JE(d)&&(i=Du(n,c),i===2&&(p=sa(n),p!==0&&(c=p,i=ad(n,p))),i===1))throw a=ba,hs(n,0),pi(n,c),en(n,Je()),a;switch(n.finishedWork=d,n.finishedLanes=c,i){case 0:case 1:throw Error(t(345));case 2:ds(n,Zt,Nr);break;case 3:if(pi(n,c),(c&130023424)===c&&(i=id+500-Je(),10<i)){if(yr(n,0)!==0)break;if(d=n.suspendedLanes,(d&c)!==c){Kt(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=fh(ds.bind(null,n,Zt,Nr),i);break}ds(n,Zt,Nr);break;case 4:if(pi(n,c),(c&4194240)===c)break;for(i=n.eventTimes,d=-1;0<c;){var v=31-sn(c);p=1<<v,v=i[v],v>d&&(d=v),c&=~p}if(c=d,c=Je()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*YE(c/1960))-c,10<c){n.timeoutHandle=fh(ds.bind(null,n,Zt,Nr),c);break}ds(n,Zt,Nr);break;case 5:ds(n,Zt,Nr);break;default:throw Error(t(329))}}}return en(n,Je()),n.callbackNode===a?cg.bind(null,n):null}function ad(n,i){var a=Fa;return n.current.memoizedState.isDehydrated&&(hs(n,i).flags|=256),n=Du(n,i),n!==2&&(i=Zt,Zt=a,i!==null&&ld(i)),n}function ld(n){Zt===null?Zt=n:Zt.push.apply(Zt,n)}function JE(n){for(var i=n;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],p=d.getSnapshot;d=d.value;try{if(!kn(p(),d))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function pi(n,i){for(i&=~rd,i&=~Ru,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var a=31-sn(i),c=1<<a;n[a]=-1,i&=~c}}function hg(n){if(($e&6)!==0)throw Error(t(327));go();var i=yr(n,0);if((i&1)===0)return en(n,Je()),null;var a=Du(n,i);if(n.tag!==0&&a===2){var c=sa(n);c!==0&&(i=c,a=ad(n,c))}if(a===1)throw a=ba,hs(n,0),pi(n,i),en(n,Je()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,ds(n,Zt,Nr),en(n,Je()),null}function ud(n,i){var a=$e;$e|=1;try{return n(i)}finally{$e=a,$e===0&&(mo=Je()+500,su&&ai())}}function cs(n){di!==null&&di.tag===0&&($e&6)===0&&go();var i=$e;$e|=1;var a=In.transition,c=Fe;try{if(In.transition=null,Fe=1,n)return n()}finally{Fe=c,In.transition=a,$e=i,($e&6)===0&&ai()}}function cd(){dn=po.current,et(po)}function hs(n,i){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,PE(a)),yt!==null)for(a=yt.return;a!==null;){var c=a;switch(vh(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&ru();break;case 3:co(),et(Xt),et(jt),Dh();break;case 5:Nh(c);break;case 4:co();break;case 13:et(rt);break;case 19:et(rt);break;case 10:Ah(c.type._context);break;case 22:case 23:cd()}a=a.return}if(Ct=n,yt=n=mi(n.current,null),Ot=dn=i,Tt=0,ba=null,rd=Ru=us=0,Zt=Fa=null,os!==null){for(i=0;i<os.length;i++)if(a=os[i],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,p=a.pending;if(p!==null){var v=p.next;p.next=d,c.next=v}a.pending=c}os=null}return n}function dg(n,i){do{var a=yt;try{if(Sh(),mu.current=vu,gu){for(var c=it.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}gu=!1}if(ls=0,Rt=Et=it=null,xa=!1,Da=0,nd.current=null,a===null||a.return===null){Tt=1,ba=i,yt=null;break}e:{var p=n,v=a.return,S=a,D=i;if(i=Ot,S.flags|=32768,D!==null&&typeof D=="object"&&typeof D.then=="function"){var B=D,X=S,Y=X.tag;if((X.mode&1)===0&&(Y===0||Y===11||Y===15)){var Q=X.alternate;Q?(X.updateQueue=Q.updateQueue,X.memoizedState=Q.memoizedState,X.lanes=Q.lanes):(X.updateQueue=null,X.memoizedState=null)}var le=bm(v);if(le!==null){le.flags&=-257,Fm(le,v,S,p,i),le.mode&1&&Lm(p,B,i),i=le,D=B;var de=i.updateQueue;if(de===null){var pe=new Set;pe.add(D),i.updateQueue=pe}else de.add(D);break e}else{if((i&1)===0){Lm(p,B,i),hd();break e}D=Error(t(426))}}else if(nt&&S.mode&1){var ct=bm(v);if(ct!==null){(ct.flags&65536)===0&&(ct.flags|=256),Fm(ct,v,S,p,i),Th(ho(D,S));break e}}p=D=ho(D,S),Tt!==4&&(Tt=2),Fa===null?Fa=[p]:Fa.push(p),p=v;do{switch(p.tag){case 3:p.flags|=65536,i&=-i,p.lanes|=i;var L=Om(p,D,i);am(p,L);break e;case 1:S=D;var V=p.type,z=p.stateNode;if((p.flags&128)===0&&(typeof V.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(hi===null||!hi.has(z)))){p.flags|=65536,i&=-i,p.lanes|=i;var Z=Mm(p,S,i);am(p,Z);break e}}p=p.return}while(p!==null)}mg(a)}catch(me){i=me,yt===a&&a!==null&&(yt=a=a.return);continue}break}while(!0)}function fg(){var n=Au.current;return Au.current=vu,n===null?vu:n}function hd(){(Tt===0||Tt===3||Tt===2)&&(Tt=4),Ct===null||(us&268435455)===0&&(Ru&268435455)===0||pi(Ct,Ot)}function Du(n,i){var a=$e;$e|=2;var c=fg();(Ct!==n||Ot!==i)&&(Nr=null,hs(n,i));do try{ZE();break}catch(d){dg(n,d)}while(!0);if(Sh(),$e=a,Au.current=c,yt!==null)throw Error(t(261));return Ct=null,Ot=0,Tt}function ZE(){for(;yt!==null;)pg(yt)}function eT(){for(;yt!==null&&!Wi();)pg(yt)}function pg(n){var i=_g(n.alternate,n,dn);n.memoizedProps=n.pendingProps,i===null?mg(n):yt=i,nd.current=null}function mg(n){var i=n;do{var a=i.alternate;if(n=i.return,(i.flags&32768)===0){if(a=HE(a,i,dn),a!==null){yt=a;return}}else{if(a=GE(a,i),a!==null){a.flags&=32767,yt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Tt=6,yt=null;return}}if(i=i.sibling,i!==null){yt=i;return}yt=i=n}while(i!==null);Tt===0&&(Tt=5)}function ds(n,i,a){var c=Fe,d=In.transition;try{In.transition=null,Fe=1,tT(n,i,a,c)}finally{In.transition=d,Fe=c}return null}function tT(n,i,a,c){do go();while(di!==null);if(($e&6)!==0)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var p=a.lanes|a.childLanes;if(Yc(n,p),n===Ct&&(yt=Ct=null,Ot=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Pu||(Pu=!0,vg(Hi,function(){return go(),null})),p=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||p){p=In.transition,In.transition=null;var v=Fe;Fe=1;var S=$e;$e|=4,nd.current=null,QE(n,a),sg(a,n),EE(hh),wr=!!ch,hh=ch=null,n.current=a,XE(a),gr(),$e=S,Fe=v,In.transition=p}else n.current=a;if(Pu&&(Pu=!1,di=n,ku=d),p=n.pendingLanes,p===0&&(hi=null),Ul(a.stateNode),en(n,Je()),i!==null)for(c=n.onRecoverableError,a=0;a<i.length;a++)d=i[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(Cu)throw Cu=!1,n=sd,sd=null,n;return(ku&1)!==0&&n.tag!==0&&go(),p=n.pendingLanes,(p&1)!==0?n===od?Ua++:(Ua=0,od=n):Ua=0,ai(),null}function go(){if(di!==null){var n=Wn(ku),i=In.transition,a=Fe;try{if(In.transition=null,Fe=16>n?16:n,di===null)var c=!1;else{if(n=di,di=null,ku=0,($e&6)!==0)throw Error(t(331));var d=$e;for($e|=4,ce=n.current;ce!==null;){var p=ce,v=p.child;if((ce.flags&16)!==0){var S=p.deletions;if(S!==null){for(var D=0;D<S.length;D++){var B=S[D];for(ce=B;ce!==null;){var X=ce;switch(X.tag){case 0:case 11:case 15:La(8,X,p)}var Y=X.child;if(Y!==null)Y.return=X,ce=Y;else for(;ce!==null;){X=ce;var Q=X.sibling,le=X.return;if(eg(X),X===B){ce=null;break}if(Q!==null){Q.return=le,ce=Q;break}ce=le}}}var de=p.alternate;if(de!==null){var pe=de.child;if(pe!==null){de.child=null;do{var ct=pe.sibling;pe.sibling=null,pe=ct}while(pe!==null)}}ce=p}}if((p.subtreeFlags&2064)!==0&&v!==null)v.return=p,ce=v;else e:for(;ce!==null;){if(p=ce,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:La(9,p,p.return)}var L=p.sibling;if(L!==null){L.return=p.return,ce=L;break e}ce=p.return}}var V=n.current;for(ce=V;ce!==null;){v=ce;var z=v.child;if((v.subtreeFlags&2064)!==0&&z!==null)z.return=v,ce=z;else e:for(v=V;ce!==null;){if(S=ce,(S.flags&2048)!==0)try{switch(S.tag){case 0:case 11:case 15:Su(9,S)}}catch(me){at(S,S.return,me)}if(S===v){ce=null;break e}var Z=S.sibling;if(Z!==null){Z.return=S.return,ce=Z;break e}ce=S.return}}if($e=d,ai(),rn&&typeof rn.onPostCommitFiberRoot=="function")try{rn.onPostCommitFiberRoot(Gi,n)}catch{}c=!0}return c}finally{Fe=a,In.transition=i}}return!1}function gg(n,i,a){i=ho(a,i),i=Om(n,i,1),n=ui(n,i,1),i=Kt(),n!==null&&(Yi(n,1,i),en(n,i))}function at(n,i,a){if(n.tag===3)gg(n,n,a);else for(;i!==null;){if(i.tag===3){gg(i,n,a);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(hi===null||!hi.has(c))){n=ho(a,n),n=Mm(i,n,1),i=ui(i,n,1),n=Kt(),i!==null&&(Yi(i,1,n),en(i,n));break}}i=i.return}}function nT(n,i,a){var c=n.pingCache;c!==null&&c.delete(i),i=Kt(),n.pingedLanes|=n.suspendedLanes&a,Ct===n&&(Ot&a)===a&&(Tt===4||Tt===3&&(Ot&130023424)===Ot&&500>Je()-id?hs(n,0):rd|=a),en(n,i)}function yg(n,i){i===0&&((n.mode&1)===0?i=1:(i=Yr,Yr<<=1,(Yr&130023424)===0&&(Yr=4194304)));var a=Kt();n=Cr(n,i),n!==null&&(Yi(n,i,a),en(n,a))}function rT(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),yg(n,a)}function iT(n,i){var a=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(i),yg(n,a)}var _g;_g=function(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps||Xt.current)Jt=!0;else{if((n.lanes&a)===0&&(i.flags&128)===0)return Jt=!1,WE(n,i,a);Jt=(n.flags&131072)!==0}else Jt=!1,nt&&(i.flags&1048576)!==0&&Yp(i,au,i.index);switch(i.lanes=0,i.tag){case 2:var c=i.type;Tu(n,i),n=i.pendingProps;var d=ro(i,jt.current);uo(i,a),d=Mh(null,i,c,n,d,a);var p=Lh();return i.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Yt(c)?(p=!0,iu(i)):p=!1,i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Ph(i),d.updater=wu,i.stateNode=d,d._reactInternals=i,Bh(i,c,n,a),i=Hh(null,i,c,!0,p,a)):(i.tag=0,nt&&p&&_h(i),Gt(null,i,d,a),i=i.child),i;case 16:c=i.elementType;e:{switch(Tu(n,i),n=i.pendingProps,d=c._init,c=d(c._payload),i.type=c,d=i.tag=oT(c),n=xn(c,n),d){case 0:i=Wh(null,i,c,n,a);break e;case 1:i=qm(null,i,c,n,a);break e;case 11:i=Um(null,i,c,n,a);break e;case 14:i=jm(null,i,c,xn(c.type,n),a);break e}throw Error(t(306,c,""))}return i;case 0:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:xn(c,d),Wh(n,i,c,d,a);case 1:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:xn(c,d),qm(n,i,c,d,a);case 3:e:{if(Wm(i),n===null)throw Error(t(387));c=i.pendingProps,p=i.memoizedState,d=p.element,om(n,i),fu(i,c,null,a);var v=i.memoizedState;if(c=v.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){d=ho(Error(t(423)),i),i=Hm(n,i,c,a,d);break e}else if(c!==d){d=ho(Error(t(424)),i),i=Hm(n,i,c,a,d);break e}else for(hn=ii(i.stateNode.containerInfo.firstChild),cn=i,nt=!0,Nn=null,a=im(i,null,c,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(oo(),c===d){i=kr(n,i,a);break e}Gt(n,i,c,a)}i=i.child}return i;case 5:return um(i),n===null&&Eh(i),c=i.type,d=i.pendingProps,p=n!==null?n.memoizedProps:null,v=d.children,dh(c,d)?v=null:p!==null&&dh(c,p)&&(i.flags|=32),$m(n,i),Gt(n,i,v,a),i.child;case 6:return n===null&&Eh(i),null;case 13:return Gm(n,i,a);case 4:return kh(i,i.stateNode.containerInfo),c=i.pendingProps,n===null?i.child=ao(i,null,c,a):Gt(n,i,c,a),i.child;case 11:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:xn(c,d),Um(n,i,c,d,a);case 7:return Gt(n,i,i.pendingProps,a),i.child;case 8:return Gt(n,i,i.pendingProps.children,a),i.child;case 12:return Gt(n,i,i.pendingProps.children,a),i.child;case 10:e:{if(c=i.type._context,d=i.pendingProps,p=i.memoizedProps,v=d.value,Ye(cu,c._currentValue),c._currentValue=v,p!==null)if(kn(p.value,v)){if(p.children===d.children&&!Xt.current){i=kr(n,i,a);break e}}else for(p=i.child,p!==null&&(p.return=i);p!==null;){var S=p.dependencies;if(S!==null){v=p.child;for(var D=S.firstContext;D!==null;){if(D.context===c){if(p.tag===1){D=Pr(-1,a&-a),D.tag=2;var B=p.updateQueue;if(B!==null){B=B.shared;var X=B.pending;X===null?D.next=D:(D.next=X.next,X.next=D),B.pending=D}}p.lanes|=a,D=p.alternate,D!==null&&(D.lanes|=a),Rh(p.return,a,i),S.lanes|=a;break}D=D.next}}else if(p.tag===10)v=p.type===i.type?null:p.child;else if(p.tag===18){if(v=p.return,v===null)throw Error(t(341));v.lanes|=a,S=v.alternate,S!==null&&(S.lanes|=a),Rh(v,a,i),v=p.sibling}else v=p.child;if(v!==null)v.return=p;else for(v=p;v!==null;){if(v===i){v=null;break}if(p=v.sibling,p!==null){p.return=v.return,v=p;break}v=v.return}p=v}Gt(n,i,d.children,a),i=i.child}return i;case 9:return d=i.type,c=i.pendingProps.children,uo(i,a),d=En(d),c=c(d),i.flags|=1,Gt(n,i,c,a),i.child;case 14:return c=i.type,d=xn(c,i.pendingProps),d=xn(c.type,d),jm(n,i,c,d,a);case 15:return zm(n,i,i.type,i.pendingProps,a);case 17:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:xn(c,d),Tu(n,i),i.tag=1,Yt(c)?(n=!0,iu(i)):n=!1,uo(i,a),Dm(i,c,d),Bh(i,c,d,a),Hh(null,i,c,!0,n,a);case 19:return Qm(n,i,a);case 22:return Bm(n,i,a)}throw Error(t(156,i.tag))};function vg(n,i){return na(n,i)}function sT(n,i,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sn(n,i,a,c){return new sT(n,i,a,c)}function dd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function oT(n){if(typeof n=="function")return dd(n)?1:0;if(n!=null){if(n=n.$$typeof,n===O)return 11;if(n===De)return 14}return 2}function mi(n,i){var a=n.alternate;return a===null?(a=Sn(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Vu(n,i,a,c,d,p){var v=2;if(c=n,typeof n=="function")dd(n)&&(v=1);else if(typeof n=="string")v=5;else e:switch(n){case P:return fs(a.children,d,p,i);case I:v=8,d|=8;break;case C:return n=Sn(12,a,i,d|2),n.elementType=C,n.lanes=p,n;case R:return n=Sn(13,a,i,d),n.elementType=R,n.lanes=p,n;case fe:return n=Sn(19,a,i,d),n.elementType=fe,n.lanes=p,n;case Re:return Ou(a,d,p,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case k:v=10;break e;case N:v=9;break e;case O:v=11;break e;case De:v=14;break e;case Ue:v=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return i=Sn(v,a,i,d),i.elementType=n,i.type=c,i.lanes=p,i}function fs(n,i,a,c){return n=Sn(7,n,c,i),n.lanes=a,n}function Ou(n,i,a,c){return n=Sn(22,n,c,i),n.elementType=Re,n.lanes=a,n.stateNode={isHidden:!1},n}function fd(n,i,a){return n=Sn(6,n,null,i),n.lanes=a,n}function pd(n,i,a){return i=Sn(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function aT(n,i,a,c,d){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=aa(0),this.expirationTimes=aa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=aa(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function md(n,i,a,c,d,p,v,S,D){return n=new aT(n,i,a,S,D),i===1?(i=1,p===!0&&(i|=8)):i=0,p=Sn(3,null,null,i),n.current=p,p.stateNode=n,p.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ph(p),n}function lT(n,i,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ne,key:c==null?null:""+c,children:n,containerInfo:i,implementation:a}}function wg(n){if(!n)return oi;n=n._reactInternals;e:{if(Cn(n)!==n||n.tag!==1)throw Error(t(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Yt(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Yt(a))return Kp(n,a,i)}return i}function Eg(n,i,a,c,d,p,v,S,D){return n=md(a,c,!0,n,d,p,v,S,D),n.context=wg(null),a=n.current,c=Kt(),d=fi(a),p=Pr(c,d),p.callback=i??null,ui(a,p,d),n.current.lanes=d,Yi(n,d,c),en(n,c),n}function Mu(n,i,a,c){var d=i.current,p=Kt(),v=fi(d);return a=wg(a),i.context===null?i.context=a:i.pendingContext=a,i=Pr(p,v),i.payload={element:n},c=c===void 0?null:c,c!==null&&(i.callback=c),n=ui(d,i,v),n!==null&&(On(n,d,v,p),du(n,d,v)),v}function Lu(n){return n=n.current,n.child?(n.child.tag===5,n.child.stateNode):null}function Tg(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function gd(n,i){Tg(n,i),(n=n.alternate)&&Tg(n,i)}function uT(){return null}var Ig=typeof reportError=="function"?reportError:function(n){console.error(n)};function yd(n){this._internalRoot=n}bu.prototype.render=yd.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(t(409));Mu(n,i,null,null)},bu.prototype.unmount=yd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;cs(function(){Mu(null,n,null,null)}),i[Ir]=null}};function bu(n){this._internalRoot=n}bu.prototype.unstable_scheduleHydration=function(n){if(n){var i=ha();n={blockedOn:null,target:n,priority:i};for(var a=0;a<on.length&&i!==0&&i<on[a].priority;a++);on.splice(a,0,n),a===0&&zs(n)}};function _d(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Fu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Sg(){}function cT(n,i,a,c,d){if(d){if(typeof c=="function"){var p=c;c=function(){var B=Lu(v);p.call(B)}}var v=Eg(i,c,n,0,null,!1,!1,"",Sg);return n._reactRootContainer=v,n[Ir]=v.current,Ia(n.nodeType===8?n.parentNode:n),cs(),v}for(;d=n.lastChild;)n.removeChild(d);if(typeof c=="function"){var S=c;c=function(){var B=Lu(D);S.call(B)}}var D=md(n,0,!1,null,null,!1,!1,"",Sg);return n._reactRootContainer=D,n[Ir]=D.current,Ia(n.nodeType===8?n.parentNode:n),cs(function(){Mu(i,D,a,c)}),D}function Uu(n,i,a,c,d){var p=a._reactRootContainer;if(p){var v=p;if(typeof d=="function"){var S=d;d=function(){var D=Lu(v);S.call(D)}}Mu(i,v,n,d)}else v=cT(a,i,n,d,c);return Lu(v)}ua=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var a=We(i.pendingLanes);a!==0&&(la(i,a|1),en(i,Je()),($e&6)===0&&(mo=Je()+500,ai()))}break;case 13:cs(function(){var c=Cr(n,1);if(c!==null){var d=Kt();On(c,n,1,d)}}),gd(n,1)}},Us=function(n){if(n.tag===13){var i=Cr(n,134217728);if(i!==null){var a=Kt();On(i,n,134217728,a)}gd(n,134217728)}},ca=function(n){if(n.tag===13){var i=fi(n),a=Cr(n,i);if(a!==null){var c=Kt();On(a,n,i,c)}gd(n,i)}},ha=function(){return Fe},da=function(n,i){var a=Fe;try{return Fe=n,i()}finally{Fe=a}},fr=function(n,i,a){switch(i){case"input":if(zi(n,a),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var c=a[i];if(c!==n&&c.form===n.form){var d=nu(c);if(!d)throw Error(t(90));Go(c),zi(c,d)}}}break;case"textarea":Cl(n,a);break;case"select":i=a.value,i!=null&&An(n,!!a.multiple,i,!1)}},Nl=ud,xl=cs;var hT={usingClientEntryPoint:!1,Events:[Ra,to,nu,Gr,Kr,ud]},ja={findFiberByHostInstance:ns,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},dT={bundleType:ja.bundleType,version:ja.version,rendererPackageName:ja.rendererPackageName,rendererConfig:ja.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ee.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Fl(n),n===null?null:n.stateNode},findFiberByHostInstance:ja.findFiberByHostInstance||uT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ju=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ju.isDisabled&&ju.supportsFiber)try{Gi=ju.inject(dT),rn=ju}catch{}}return tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hT,tn.createPortal=function(n,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_d(i))throw Error(t(200));return lT(n,i,null,a)},tn.createRoot=function(n,i){if(!_d(n))throw Error(t(299));var a=!1,c="",d=Ig;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onRecoverableError!==void 0&&(d=i.onRecoverableError)),i=md(n,1,!1,null,null,a,!1,c,d),n[Ir]=i.current,Ia(n.nodeType===8?n.parentNode:n),new yd(i)},tn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Fl(i),n=n===null?null:n.stateNode,n},tn.flushSync=function(n){return cs(n)},tn.hydrate=function(n,i,a){if(!Fu(i))throw Error(t(200));return Uu(null,n,i,!0,a)},tn.hydrateRoot=function(n,i,a){if(!_d(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,p="",v=Ig;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),i=Eg(i,null,n,1,a??null,d,!1,p,v),n[Ir]=i.current,Ia(n),c)for(n=0;n<c.length;n++)a=c[n],d=a._getVersion,d=d(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,d]:i.mutableSourceEagerHydrationData.push(a,d);return new bu(i)},tn.render=function(n,i,a){if(!Fu(i))throw Error(t(200));return Uu(null,n,i,!1,a)},tn.unmountComponentAtNode=function(n){if(!Fu(n))throw Error(t(40));return n._reactRootContainer?(cs(function(){Uu(null,null,n,!1,function(){n._reactRootContainer=null,n[Ir]=null})}),!0):!1},tn.unstable_batchedUpdates=ud,tn.unstable_renderSubtreeIntoContainer=function(n,i,a,c){if(!Fu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Uu(n,i,a,!1,c)},tn.version="18.3.1-next-f1338f8080-20240426",tn}var Dg;function T_(){if(Dg)return Ed.exports;Dg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Ed.exports=ET(),Ed.exports}var Vg;function TT(){if(Vg)return zu;Vg=1;var r=T_();return zu.createRoot=r.createRoot,zu.hydrateRoot=r.hydrateRoot,zu}var IT=TT();const ST=E_(IT);T_();function Za(){return Za=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},Za.apply(this,arguments)}var Ti;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(Ti||(Ti={}));const Og="popstate";function AT(r){r===void 0&&(r={});function e(o,l){let{pathname:h="/",search:f="",hash:g=""}=As(o.location.hash.substr(1));return!h.startsWith("/")&&!h.startsWith(".")&&(h="/"+h),Fd("",{pathname:h,search:f,hash:g},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(o,l){let h=o.document.querySelector("base"),f="";if(h&&h.getAttribute("href")){let g=o.location.href,y=g.indexOf("#");f=y===-1?g:g.slice(0,y)}return f+"#"+(typeof l=="string"?l:ic(l))}function s(o,l){Rc(o.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(l)+")")}return CT(e,t,s,r)}function pt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Rc(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function RT(){return Math.random().toString(36).substr(2,8)}function Mg(r,e){return{usr:r.state,key:r.key,idx:e}}function Fd(r,e,t,s){return t===void 0&&(t=null),Za({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?As(e):e,{state:t,key:e&&e.key||s||RT()})}function ic(r){let{pathname:e="/",search:t="",hash:s=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function As(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let s=r.indexOf("?");s>=0&&(e.search=r.substr(s),r=r.substr(0,s)),r&&(e.pathname=r)}return e}function CT(r,e,t,s){s===void 0&&(s={});let{window:o=document.defaultView,v5Compat:l=!1}=s,h=o.history,f=Ti.Pop,g=null,y=w();y==null&&(y=0,h.replaceState(Za({},h.state,{idx:y}),""));function w(){return(h.state||{idx:null}).idx}function E(){f=Ti.Pop;let U=w(),re=U==null?null:U-y;y=U,g&&g({action:f,location:q.location,delta:re})}function A(U,re){f=Ti.Push;let oe=Fd(q.location,U,re);t&&t(oe,U),y=w()+1;let j=Mg(oe,y),ee=q.createHref(oe);try{h.pushState(j,"",ee)}catch(ie){if(ie instanceof DOMException&&ie.name==="DataCloneError")throw ie;o.location.assign(ee)}l&&g&&g({action:f,location:q.location,delta:1})}function b(U,re){f=Ti.Replace;let oe=Fd(q.location,U,re);t&&t(oe,U),y=w();let j=Mg(oe,y),ee=q.createHref(oe);h.replaceState(j,"",ee),l&&g&&g({action:f,location:q.location,delta:0})}function H(U){let re=o.location.origin!=="null"?o.location.origin:o.location.href,oe=typeof U=="string"?U:ic(U);return oe=oe.replace(/ $/,"%20"),pt(re,"No window.location.(origin|href) available to create URL for href: "+oe),new URL(oe,re)}let q={get action(){return f},get location(){return r(o,h)},listen(U){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(Og,E),g=U,()=>{o.removeEventListener(Og,E),g=null}},createHref(U){return e(o,U)},createURL:H,encodeLocation(U){let re=H(U);return{pathname:re.pathname,search:re.search,hash:re.hash}},push:A,replace:b,go(U){return h.go(U)}};return q}var Lg;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(Lg||(Lg={}));function PT(r,e,t){return t===void 0&&(t="/"),kT(r,e,t)}function kT(r,e,t,s){let o=typeof e=="string"?As(e):e,l=mf(o.pathname||"/",t);if(l==null)return null;let h=I_(r);NT(h);let f=null;for(let g=0;f==null&&g<h.length;++g){let y=BT(l);f=UT(h[g],y)}return f}function I_(r,e,t,s){e===void 0&&(e=[]),t===void 0&&(t=[]),s===void 0&&(s="");let o=(l,h,f)=>{let g={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};g.relativePath.startsWith("/")&&(pt(g.relativePath.startsWith(s),'Absolute route path "'+g.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),g.relativePath=g.relativePath.slice(s.length));let y=Ai([s,g.relativePath]),w=t.concat(g);l.children&&l.children.length>0&&(pt(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+y+'".')),I_(l.children,e,w,y)),!(l.path==null&&!l.index)&&e.push({path:y,score:bT(y,l.index),routesMeta:w})};return r.forEach((l,h)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))o(l,h);else for(let g of S_(l.path))o(l,h,g)}),e}function S_(r){let e=r.split("/");if(e.length===0)return[];let[t,...s]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(s.length===0)return o?[l,""]:[l];let h=S_(s.join("/")),f=[];return f.push(...h.map(g=>g===""?l:[l,g].join("/"))),o&&f.push(...h),f.map(g=>r.startsWith("/")&&g===""?"/":g)}function NT(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:FT(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}const xT=/^:[\w-]+$/,DT=3,VT=2,OT=1,MT=10,LT=-2,bg=r=>r==="*";function bT(r,e){let t=r.split("/"),s=t.length;return t.some(bg)&&(s+=LT),e&&(s+=VT),t.filter(o=>!bg(o)).reduce((o,l)=>o+(xT.test(l)?DT:l===""?OT:MT),s)}function FT(r,e){return r.length===e.length&&r.slice(0,-1).every((s,o)=>s===e[o])?r[r.length-1]-e[e.length-1]:0}function UT(r,e,t){let{routesMeta:s}=r,o={},l="/",h=[];for(let f=0;f<s.length;++f){let g=s[f],y=f===s.length-1,w=l==="/"?e:e.slice(l.length)||"/",E=jT({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},w),A=g.route;if(!E)return null;Object.assign(o,E.params),h.push({params:o,pathname:Ai([l,E.pathname]),pathnameBase:GT(Ai([l,E.pathnameBase])),route:A}),E.pathnameBase!=="/"&&(l=Ai([l,E.pathnameBase]))}return h}function jT(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,s]=zT(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let l=o[0],h=l.replace(/(.)\/+$/,"$1"),f=o.slice(1);return{params:s.reduce((y,w,E)=>{let{paramName:A,isOptional:b}=w;if(A==="*"){let q=f[E]||"";h=l.slice(0,l.length-q.length).replace(/(.)\/+$/,"$1")}const H=f[E];return b&&!H?y[A]=void 0:y[A]=(H||"").replace(/%2F/g,"/"),y},{}),pathname:l,pathnameBase:h,pattern:r}}function zT(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Rc(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,f,g)=>(s.push({paramName:f,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(s.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function BT(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Rc(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function mf(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=r.charAt(t);return s&&s!=="/"?null:r.slice(t)||"/"}const $T=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qT=r=>$T.test(r);function WT(r,e){e===void 0&&(e="/");let{pathname:t,search:s="",hash:o=""}=typeof r=="string"?As(r):r,l;if(t)if(qT(t))l=t;else{if(t.includes("//")){let h=t;t=t.replace(/\/\/+/g,"/"),Rc(!1,"Pathnames cannot have embedded double slashes - normalizing "+(h+" -> "+t))}t.startsWith("/")?l=Fg(t.substring(1),"/"):l=Fg(t,e)}else l=e;return{pathname:l,search:KT(s),hash:QT(o)}}function Fg(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Sd(r,e,t,s){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function HT(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function gf(r,e){let t=HT(r);return e?t.map((s,o)=>o===t.length-1?s.pathname:s.pathnameBase):t.map(s=>s.pathnameBase)}function yf(r,e,t,s){s===void 0&&(s=!1);let o;typeof r=="string"?o=As(r):(o=Za({},r),pt(!o.pathname||!o.pathname.includes("?"),Sd("?","pathname","search",o)),pt(!o.pathname||!o.pathname.includes("#"),Sd("#","pathname","hash",o)),pt(!o.search||!o.search.includes("#"),Sd("#","search","hash",o)));let l=r===""||o.pathname==="",h=l?"/":o.pathname,f;if(h==null)f=t;else{let E=e.length-1;if(!s&&h.startsWith("..")){let A=h.split("/");for(;A[0]==="..";)A.shift(),E-=1;o.pathname=A.join("/")}f=E>=0?e[E]:"/"}let g=WT(o,f),y=h&&h!=="/"&&h.endsWith("/"),w=(l||h===".")&&t.endsWith("/");return!g.pathname.endsWith("/")&&(y||w)&&(g.pathname+="/"),g}const Ai=r=>r.join("/").replace(/\/\/+/g,"/"),GT=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),KT=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,QT=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function XT(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const A_=["post","put","patch","delete"];new Set(A_);const YT=["get",...A_];new Set(YT);function el(){return el=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},el.apply(this,arguments)}const _f=he.createContext(null),JT=he.createContext(null),Fi=he.createContext(null),Cc=he.createContext(null),Ur=he.createContext({outlet:null,matches:[],isDataRoute:!1}),R_=he.createContext(null);function ZT(r,e){let{relative:t}=e===void 0?{}:e;Lo()||pt(!1);let{basename:s,navigator:o}=he.useContext(Fi),{hash:l,pathname:h,search:f}=P_(r,{relative:t}),g=h;return s!=="/"&&(g=h==="/"?s:Ai([s,h])),o.createHref({pathname:g,search:f,hash:l})}function Lo(){return he.useContext(Cc)!=null}function cl(){return Lo()||pt(!1),he.useContext(Cc).location}function C_(r){he.useContext(Fi).static||he.useLayoutEffect(r)}function Pc(){let{isDataRoute:r}=he.useContext(Ur);return r?f0():e0()}function e0(){Lo()||pt(!1);let r=he.useContext(_f),{basename:e,future:t,navigator:s}=he.useContext(Fi),{matches:o}=he.useContext(Ur),{pathname:l}=cl(),h=JSON.stringify(gf(o,t.v7_relativeSplatPath)),f=he.useRef(!1);return C_(()=>{f.current=!0}),he.useCallback(function(y,w){if(w===void 0&&(w={}),!f.current)return;if(typeof y=="number"){s.go(y);return}let E=yf(y,JSON.parse(h),l,w.relative==="path");r==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:Ai([e,E.pathname])),(w.replace?s.replace:s.push)(E,w.state,w)},[e,s,h,l,r])}function t0(){let{matches:r}=he.useContext(Ur),e=r[r.length-1];return e?e.params:{}}function P_(r,e){let{relative:t}=e===void 0?{}:e,{future:s}=he.useContext(Fi),{matches:o}=he.useContext(Ur),{pathname:l}=cl(),h=JSON.stringify(gf(o,s.v7_relativeSplatPath));return he.useMemo(()=>yf(r,JSON.parse(h),l,t==="path"),[r,h,l,t])}function n0(r,e){return r0(r,e)}function r0(r,e,t,s){Lo()||pt(!1);let{navigator:o}=he.useContext(Fi),{matches:l}=he.useContext(Ur),h=l[l.length-1],f=h?h.params:{};h&&h.pathname;let g=h?h.pathnameBase:"/";h&&h.route;let y=cl(),w;if(e){var E;let U=typeof e=="string"?As(e):e;g==="/"||(E=U.pathname)!=null&&E.startsWith(g)||pt(!1),w=U}else w=y;let A=w.pathname||"/",b=A;if(g!=="/"){let U=g.replace(/^\//,"").split("/");b="/"+A.replace(/^\//,"").split("/").slice(U.length).join("/")}let H=PT(r,{pathname:b}),q=l0(H&&H.map(U=>Object.assign({},U,{params:Object.assign({},f,U.params),pathname:Ai([g,o.encodeLocation?o.encodeLocation(U.pathname).pathname:U.pathname]),pathnameBase:U.pathnameBase==="/"?g:Ai([g,o.encodeLocation?o.encodeLocation(U.pathnameBase).pathname:U.pathnameBase])})),l,t,s);return e&&q?he.createElement(Cc.Provider,{value:{location:el({pathname:"/",search:"",hash:"",state:null,key:"default"},w),navigationType:Ti.Pop}},q):q}function i0(){let r=d0(),e=XT(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return he.createElement(he.Fragment,null,he.createElement("h2",null,"Unexpected Application Error!"),he.createElement("h3",{style:{fontStyle:"italic"}},e),t?he.createElement("pre",{style:o},t):null,null)}const s0=he.createElement(i0,null);class o0 extends he.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?he.createElement(Ur.Provider,{value:this.props.routeContext},he.createElement(R_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function a0(r){let{routeContext:e,match:t,children:s}=r,o=he.useContext(_f);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),he.createElement(Ur.Provider,{value:e},s)}function l0(r,e,t,s){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),s===void 0&&(s=null),r==null){var l;if(!t)return null;if(t.errors)r=t.matches;else if((l=s)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let h=r,f=(o=t)==null?void 0:o.errors;if(f!=null){let w=h.findIndex(E=>E.route.id&&f?.[E.route.id]!==void 0);w>=0||pt(!1),h=h.slice(0,Math.min(h.length,w+1))}let g=!1,y=-1;if(t&&s&&s.v7_partialHydration)for(let w=0;w<h.length;w++){let E=h[w];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(y=w),E.route.id){let{loaderData:A,errors:b}=t,H=E.route.loader&&A[E.route.id]===void 0&&(!b||b[E.route.id]===void 0);if(E.route.lazy||H){g=!0,y>=0?h=h.slice(0,y+1):h=[h[0]];break}}}return h.reduceRight((w,E,A)=>{let b,H=!1,q=null,U=null;t&&(b=f&&E.route.id?f[E.route.id]:void 0,q=E.route.errorElement||s0,g&&(y<0&&A===0?(p0("route-fallback"),H=!0,U=null):y===A&&(H=!0,U=E.route.hydrateFallbackElement||null)));let re=e.concat(h.slice(0,A+1)),oe=()=>{let j;return b?j=q:H?j=U:E.route.Component?j=he.createElement(E.route.Component,null):E.route.element?j=E.route.element:j=w,he.createElement(a0,{match:E,routeContext:{outlet:w,matches:re,isDataRoute:t!=null},children:j})};return t&&(E.route.ErrorBoundary||E.route.errorElement||A===0)?he.createElement(o0,{location:t.location,revalidation:t.revalidation,component:q,error:b,children:oe(),routeContext:{outlet:null,matches:re,isDataRoute:!0}}):oe()},null)}var k_=(function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r})(k_||{}),N_=(function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r})(N_||{});function u0(r){let e=he.useContext(_f);return e||pt(!1),e}function c0(r){let e=he.useContext(JT);return e||pt(!1),e}function h0(r){let e=he.useContext(Ur);return e||pt(!1),e}function x_(r){let e=h0(),t=e.matches[e.matches.length-1];return t.route.id||pt(!1),t.route.id}function d0(){var r;let e=he.useContext(R_),t=c0(),s=x_();return e!==void 0?e:(r=t.errors)==null?void 0:r[s]}function f0(){let{router:r}=u0(k_.UseNavigateStable),e=x_(N_.UseNavigateStable),t=he.useRef(!1);return C_(()=>{t.current=!0}),he.useCallback(function(o,l){l===void 0&&(l={}),t.current&&(typeof o=="number"?r.navigate(o):r.navigate(o,el({fromRouteId:e},l)))},[r,e])}const Ug={};function p0(r,e,t){Ug[r]||(Ug[r]=!0)}function m0(r,e){r?.v7_startTransition,r?.v7_relativeSplatPath}function Ud(r){let{to:e,replace:t,state:s,relative:o}=r;Lo()||pt(!1);let{future:l,static:h}=he.useContext(Fi),{matches:f}=he.useContext(Ur),{pathname:g}=cl(),y=Pc(),w=yf(e,gf(f,l.v7_relativeSplatPath),g,o==="path"),E=JSON.stringify(w);return he.useEffect(()=>y(JSON.parse(E),{replace:t,state:s,relative:o}),[y,E,o,t,s]),null}function _i(r){pt(!1)}function g0(r){let{basename:e="/",children:t=null,location:s,navigationType:o=Ti.Pop,navigator:l,static:h=!1,future:f}=r;Lo()&&pt(!1);let g=e.replace(/^\/*/,"/"),y=he.useMemo(()=>({basename:g,navigator:l,static:h,future:el({v7_relativeSplatPath:!1},f)}),[g,f,l,h]);typeof s=="string"&&(s=As(s));let{pathname:w="/",search:E="",hash:A="",state:b=null,key:H="default"}=s,q=he.useMemo(()=>{let U=mf(w,g);return U==null?null:{location:{pathname:U,search:E,hash:A,state:b,key:H},navigationType:o}},[g,w,E,A,b,H,o]);return q==null?null:he.createElement(Fi.Provider,{value:y},he.createElement(Cc.Provider,{children:t,value:q}))}function y0(r){let{children:e,location:t}=r;return n0(jd(e),t)}new Promise(()=>{});function jd(r,e){e===void 0&&(e=[]);let t=[];return he.Children.forEach(r,(s,o)=>{if(!he.isValidElement(s))return;let l=[...e,o];if(s.type===he.Fragment){t.push.apply(t,jd(s.props.children,l));return}s.type!==_i&&pt(!1),!s.props.index||!s.props.children||pt(!1);let h={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(h.children=jd(s.props.children,l)),t.push(h)}),t}function zd(){return zd=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},zd.apply(this,arguments)}function _0(r,e){if(r==null)return{};var t={},s=Object.keys(r),o,l;for(l=0;l<s.length;l++)o=s[l],!(e.indexOf(o)>=0)&&(t[o]=r[o]);return t}function v0(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function w0(r,e){return r.button===0&&(!e||e==="_self")&&!v0(r)}const E0=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],T0="6";try{window.__reactRouterVersion=T0}catch{}const I0="startTransition",jg=_T[I0];function S0(r){let{basename:e,children:t,future:s,window:o}=r,l=he.useRef();l.current==null&&(l.current=AT({window:o,v5Compat:!0}));let h=l.current,[f,g]=he.useState({action:h.action,location:h.location}),{v7_startTransition:y}=s||{},w=he.useCallback(E=>{y&&jg?jg(()=>g(E)):g(E)},[g,y]);return he.useLayoutEffect(()=>h.listen(w),[h,w]),he.useEffect(()=>m0(s),[s]),he.createElement(g0,{basename:e,children:t,location:f.location,navigationType:f.action,navigator:h,future:s})}const A0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",R0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ba=he.forwardRef(function(e,t){let{onClick:s,relative:o,reloadDocument:l,replace:h,state:f,target:g,to:y,preventScrollReset:w,viewTransition:E}=e,A=_0(e,E0),{basename:b}=he.useContext(Fi),H,q=!1;if(typeof y=="string"&&R0.test(y)&&(H=y,A0))try{let j=new URL(window.location.href),ee=y.startsWith("//")?new URL(j.protocol+y):new URL(y),ie=mf(ee.pathname,b);ee.origin===j.origin&&ie!=null?y=ie+ee.search+ee.hash:q=!0}catch{}let U=ZT(y,{relative:o}),re=C0(y,{replace:h,state:f,target:g,preventScrollReset:w,relative:o,viewTransition:E});function oe(j){s&&s(j),j.defaultPrevented||re(j)}return he.createElement("a",zd({},A,{href:H||U,onClick:q||l?s:oe,ref:t,target:g}))});var zg;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(zg||(zg={}));var Bg;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(Bg||(Bg={}));function C0(r,e){let{target:t,replace:s,state:o,preventScrollReset:l,relative:h,viewTransition:f}=e===void 0?{}:e,g=Pc(),y=cl(),w=P_(r,{relative:h});return he.useCallback(E=>{if(w0(E,t)){E.preventDefault();let A=s!==void 0?s:ic(y)===ic(w);g(r,{replace:A,state:o,preventScrollReset:l,relative:h,viewTransition:f})}},[y,g,w,s,o,t,r,l,h,f])}const P0=()=>{};var $g={};const D_=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},k0=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const o=r[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],h=r[t++],f=r[t++],g=((o&7)<<18|(l&63)<<12|(h&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const l=r[t++],h=r[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},V_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const l=r[o],h=o+1<r.length,f=h?r[o+1]:0,g=o+2<r.length,y=g?r[o+2]:0,w=l>>2,E=(l&3)<<4|f>>4;let A=(f&15)<<2|y>>6,b=y&63;g||(b=64,h||(A=64)),s.push(t[w],t[E],t[A],t[b])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(D_(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):k0(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],f=o<r.length?t[r.charAt(o)]:0;++o;const y=o<r.length?t[r.charAt(o)]:64;++o;const E=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||f==null||y==null||E==null)throw new N0;const A=l<<2|f>>4;if(s.push(A),y!==64){const b=f<<4&240|y>>2;if(s.push(b),E!==64){const H=y<<6&192|E;s.push(H)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class N0 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const x0=function(r){const e=D_(r);return V_.encodeByteArray(e,!0)},sc=function(r){return x0(r).replace(/\./g,"")},O_=function(r){try{return V_.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function D0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const V0=()=>D0().__FIREBASE_DEFAULTS__,O0=()=>{if(typeof process>"u"||typeof $g>"u")return;const r=$g.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},M0=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&O_(r[1]);return e&&JSON.parse(e)},kc=()=>{try{return P0()||V0()||O0()||M0()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},M_=r=>kc()?.emulatorHosts?.[r],L0=r=>{const e=M_(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},L_=()=>kc()?.config,b_=r=>kc()?.[`_${r}`];class b0{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}function bo(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function F_(r){return(await fetch(r,{credentials:"include"})).ok}function F0(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...r};return[sc(JSON.stringify(t)),sc(JSON.stringify(h)),""].join(".")}const Ha={};function U0(){const r={prod:[],emulator:[]};for(const e of Object.keys(Ha))Ha[e]?r.emulator.push(e):r.prod.push(e);return r}function j0(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let qg=!1;function U_(r,e){if(typeof window>"u"||typeof document>"u"||!bo(window.location.host)||Ha[r]===e||Ha[r]||qg)return;Ha[r]=e;function t(A){return`__firebase__banner__${A}`}const s="__firebase__banner",l=U0().prod.length>0;function h(){const A=document.getElementById(s);A&&A.remove()}function f(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function g(A,b){A.setAttribute("width","24"),A.setAttribute("id",b),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function y(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{qg=!0,h()},A}function w(A,b){A.setAttribute("id",b),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function E(){const A=j0(s),b=t("text"),H=document.getElementById(b)||document.createElement("span"),q=t("learnmore"),U=document.getElementById(q)||document.createElement("a"),re=t("preprendIcon"),oe=document.getElementById(re)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const j=A.element;f(j),w(U,q);const ee=y();g(oe,re),j.append(oe,H,U,ee),document.body.appendChild(j)}l?(H.innerText="Preview backend disconnected.",oe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(oe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,H.innerText="Preview backend running in this workspace."),H.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}function Ht(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function z0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ht())}function B0(){const r=kc()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $0(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function q0(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function W0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function H0(){const r=Ht();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function G0(){return!B0()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function K0(){try{return typeof indexedDB=="object"}catch{return!1}}function Q0(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}const X0="FirebaseError";class jr extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=X0,Object.setPrototypeOf(this,jr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hl.prototype.create)}}class hl{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?Y0(l,s):"Error",f=`${this.serviceName}: ${h} (${o}).`;return new jr(o,f,s)}}function Y0(r,e){return r.replace(J0,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const J0=/\{\$([^}]+)}/g;function Z0(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function _s(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=r[o],h=e[o];if(Wg(l)&&Wg(h)){if(!_s(l,h))return!1}else if(l!==h)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function Wg(r){return r!==null&&typeof r=="object"}function dl(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function eI(r,e){const t=new tI(r,e);return t.subscribe.bind(t)}class tI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");nI(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=Ad),o.error===void 0&&(o.error=Ad),o.complete===void 0&&(o.complete=Ad);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function nI(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Ad(){}function St(r){return r&&r._delegate?r._delegate:r}class vs{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ps="[DEFAULT]";class rI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new b0;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(sI(e))try{this.getOrInitializeService({instanceIdentifier:ps})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=ps){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ps){return this.instances.has(e)}getOptions(e=ps){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,h]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);s===f&&h.resolve(o)}return o}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:iI(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ps){return this.component?this.component.multipleInstances?e:ps:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function iI(r){return r===ps?void 0:r}function sI(r){return r.instantiationMode==="EAGER"}class oI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new rI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Oe;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Oe||(Oe={}));const aI={debug:Oe.DEBUG,verbose:Oe.VERBOSE,info:Oe.INFO,warn:Oe.WARN,error:Oe.ERROR,silent:Oe.SILENT},lI=Oe.INFO,uI={[Oe.DEBUG]:"log",[Oe.VERBOSE]:"log",[Oe.INFO]:"info",[Oe.WARN]:"warn",[Oe.ERROR]:"error"},cI=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=uI[e];if(o)console[o](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class vf{constructor(e){this.name=e,this._logLevel=lI,this._logHandler=cI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?aI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Oe.DEBUG,...e),this._logHandler(this,Oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Oe.VERBOSE,...e),this._logHandler(this,Oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Oe.INFO,...e),this._logHandler(this,Oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Oe.WARN,...e),this._logHandler(this,Oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Oe.ERROR,...e),this._logHandler(this,Oe.ERROR,...e)}}const hI=(r,e)=>e.some(t=>r instanceof t);let Hg,Gg;function dI(){return Hg||(Hg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function fI(){return Gg||(Gg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const j_=new WeakMap,Bd=new WeakMap,z_=new WeakMap,Rd=new WeakMap,wf=new WeakMap;function pI(r){const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",h)},l=()=>{t(Ri(r.result)),o()},h=()=>{s(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&j_.set(t,r)}).catch(()=>{}),wf.set(e,r),e}function mI(r){if(Bd.has(r))return;const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",h),r.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",h),r.addEventListener("abort",h)});Bd.set(r,e)}let $d={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Bd.get(r);if(e==="objectStoreNames")return r.objectStoreNames||z_.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ri(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function gI(r){$d=r($d)}function yI(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(Cd(this),e,...t);return z_.set(s,e.sort?e.sort():[e]),Ri(s)}:fI().includes(r)?function(...e){return r.apply(Cd(this),e),Ri(j_.get(this))}:function(...e){return Ri(r.apply(Cd(this),e))}}function _I(r){return typeof r=="function"?yI(r):(r instanceof IDBTransaction&&mI(r),hI(r,dI())?new Proxy(r,$d):r)}function Ri(r){if(r instanceof IDBRequest)return pI(r);if(Rd.has(r))return Rd.get(r);const e=_I(r);return e!==r&&(Rd.set(r,e),wf.set(e,r)),e}const Cd=r=>wf.get(r);function vI(r,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const h=indexedDB.open(r,e),f=Ri(h);return s&&h.addEventListener("upgradeneeded",g=>{s(Ri(h.result),g.oldVersion,g.newVersion,Ri(h.transaction),g)}),t&&h.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),f.then(g=>{l&&g.addEventListener("close",()=>l()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),f}const wI=["get","getKey","getAll","getAllKeys","count"],EI=["put","add","delete","clear"],Pd=new Map;function Kg(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Pd.get(e))return Pd.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=EI.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||wI.includes(t)))return;const l=async function(h,...f){const g=this.transaction(h,o?"readwrite":"readonly");let y=g.store;return s&&(y=y.index(f.shift())),(await Promise.all([y[t](...f),o&&g.done]))[0]};return Pd.set(e,l),l}gI(r=>({...r,get:(e,t,s)=>Kg(e,t)||r.get(e,t,s),has:(e,t)=>!!Kg(e,t)||r.has(e,t)}));class TI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(II(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function II(r){return r.getComponent()?.type==="VERSION"}const qd="@firebase/app",Qg="0.14.6";const Or=new vf("@firebase/app"),SI="@firebase/app-compat",AI="@firebase/analytics-compat",RI="@firebase/analytics",CI="@firebase/app-check-compat",PI="@firebase/app-check",kI="@firebase/auth",NI="@firebase/auth-compat",xI="@firebase/database",DI="@firebase/data-connect",VI="@firebase/database-compat",OI="@firebase/functions",MI="@firebase/functions-compat",LI="@firebase/installations",bI="@firebase/installations-compat",FI="@firebase/messaging",UI="@firebase/messaging-compat",jI="@firebase/performance",zI="@firebase/performance-compat",BI="@firebase/remote-config",$I="@firebase/remote-config-compat",qI="@firebase/storage",WI="@firebase/storage-compat",HI="@firebase/firestore",GI="@firebase/ai",KI="@firebase/firestore-compat",QI="firebase",XI="12.6.0";const Wd="[DEFAULT]",YI={[qd]:"fire-core",[SI]:"fire-core-compat",[RI]:"fire-analytics",[AI]:"fire-analytics-compat",[PI]:"fire-app-check",[CI]:"fire-app-check-compat",[kI]:"fire-auth",[NI]:"fire-auth-compat",[xI]:"fire-rtdb",[DI]:"fire-data-connect",[VI]:"fire-rtdb-compat",[OI]:"fire-fn",[MI]:"fire-fn-compat",[LI]:"fire-iid",[bI]:"fire-iid-compat",[FI]:"fire-fcm",[UI]:"fire-fcm-compat",[jI]:"fire-perf",[zI]:"fire-perf-compat",[BI]:"fire-rc",[$I]:"fire-rc-compat",[qI]:"fire-gcs",[WI]:"fire-gcs-compat",[HI]:"fire-fst",[KI]:"fire-fst-compat",[GI]:"fire-vertex","fire-js":"fire-js",[QI]:"fire-js-all"};const oc=new Map,JI=new Map,Hd=new Map;function Xg(r,e){try{r.container.addComponent(e)}catch(t){Or.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Co(r){const e=r.name;if(Hd.has(e))return Or.debug(`There were multiple attempts to register component ${e}.`),!1;Hd.set(e,r);for(const t of oc.values())Xg(t,r);for(const t of JI.values())Xg(t,r);return!0}function Ef(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Ln(r){return r==null?!1:r.settings!==void 0}const ZI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ci=new hl("app","Firebase",ZI);class eS{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new vs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ci.create("app-deleted",{appName:this._name})}}const Fo=XI;function B_(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s={name:Wd,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw Ci.create("bad-app-name",{appName:String(o)});if(t||(t=L_()),!t)throw Ci.create("no-options");const l=oc.get(o);if(l){if(_s(t,l.options)&&_s(s,l.config))return l;throw Ci.create("duplicate-app",{appName:o})}const h=new oI(o);for(const g of Hd.values())h.addComponent(g);const f=new eS(t,s,h);return oc.set(o,f),f}function $_(r=Wd){const e=oc.get(r);if(!e&&r===Wd&&L_())return B_();if(!e)throw Ci.create("no-app",{appName:r});return e}function Pi(r,e,t){let s=YI[r]??r;t&&(s+=`-${t}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const h=[`Unable to register library "${s}" with version "${e}":`];o&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Or.warn(h.join(" "));return}Co(new vs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const tS="firebase-heartbeat-database",nS=1,tl="firebase-heartbeat-store";let kd=null;function q_(){return kd||(kd=vI(tS,nS,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(tl)}catch(t){console.warn(t)}}}}).catch(r=>{throw Ci.create("idb-open",{originalErrorMessage:r.message})})),kd}async function rS(r){try{const t=(await q_()).transaction(tl),s=await t.objectStore(tl).get(W_(r));return await t.done,s}catch(e){if(e instanceof jr)Or.warn(e.message);else{const t=Ci.create("idb-get",{originalErrorMessage:e?.message});Or.warn(t.message)}}}async function Yg(r,e){try{const s=(await q_()).transaction(tl,"readwrite");await s.objectStore(tl).put(e,W_(r)),await s.done}catch(t){if(t instanceof jr)Or.warn(t.message);else{const s=Ci.create("idb-set",{originalErrorMessage:t?.message});Or.warn(s.message)}}}function W_(r){return`${r.name}!${r.options.appId}`}const iS=1024,sS=30;class oS{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new lS(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Jg();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:t}),this._heartbeatsCache.heartbeats.length>sS){const o=uS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Or.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Jg(),{heartbeatsToSend:t,unsentEntries:s}=aS(this._heartbeatsCache.heartbeats),o=sc(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Or.warn(e),""}}}function Jg(){return new Date().toISOString().substring(0,10)}function aS(r,e=iS){const t=[];let s=r.slice();for(const o of r){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),Zg(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Zg(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class lS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return K0()?Q0().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await rS(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Yg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Yg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Zg(r){return sc(JSON.stringify({version:2,heartbeats:r})).length}function uS(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}function cS(r){Co(new vs("platform-logger",e=>new TI(e),"PRIVATE")),Co(new vs("heartbeat",e=>new oS(e),"PRIVATE")),Pi(qd,Qg,r),Pi(qd,Qg,"esm2020"),Pi("fire-js","")}cS("");function H_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const hS=H_,G_=new hl("auth","Firebase",H_());const ac=new vf("@firebase/auth");function dS(r,...e){ac.logLevel<=Oe.WARN&&ac.warn(`Auth (${Fo}): ${r}`,...e)}function Ku(r,...e){ac.logLevel<=Oe.ERROR&&ac.error(`Auth (${Fo}): ${r}`,...e)}function hr(r,...e){throw If(r,...e)}function Fn(r,...e){return If(r,...e)}function Tf(r,e,t){const s={...hS(),[e]:t};return new hl("auth","Firebase",s).create(e,{appName:r.name})}function ys(r){return Tf(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function fS(r,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&hr(r,"argument-error"),Tf(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function If(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return G_.create(r,...e)}function Ie(r,e,...t){if(!r)throw If(e,...t)}function Dr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Ku(e),new Error(e)}function Mr(r,e){r||Dr(e)}function Gd(){return typeof self<"u"&&self.location?.href||""}function pS(){return ey()==="http:"||ey()==="https:"}function ey(){return typeof self<"u"&&self.location?.protocol||null}function mS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(pS()||q0()||"connection"in navigator)?navigator.onLine:!0}function gS(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class fl{constructor(e,t){this.shortDelay=e,this.longDelay=t,Mr(t>e,"Short delay should be less than long delay!"),this.isMobile=z0()||W0()}get(){return mS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Sf(r,e){Mr(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class K_{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Dr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Dr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Dr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const yS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const _S=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],vS=new fl(3e4,6e4);function Af(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Uo(r,e,t,s,o={}){return Q_(r,o,async()=>{let l={},h={};s&&(e==="GET"?h=s:l={body:JSON.stringify(s)});const f=dl({key:r.config.apiKey,...h}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const y={method:e,headers:g,...l};return $0()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&bo(r.emulatorConfig.host)&&(y.credentials="include"),K_.fetch()(await X_(r,r.config.apiHost,t,f),y)})}async function Q_(r,e,t){r._canInitEmulator=!1;const s={...yS,...e};try{const o=new ES(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw Bu(r,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const f=l.ok?h.errorMessage:h.error.message,[g,y]=f.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Bu(r,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw Bu(r,"email-already-in-use",h);if(g==="USER_DISABLED")throw Bu(r,"user-disabled",h);const w=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Tf(r,w,y);hr(r,w)}}catch(o){if(o instanceof jr)throw o;hr(r,"network-request-failed",{message:String(o)})}}async function wS(r,e,t,s,o={}){const l=await Uo(r,e,t,s,o);return"mfaPendingCredential"in l&&hr(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function X_(r,e,t,s){const o=`${e}${t}?${s}`,l=r,h=l.config.emulator?Sf(r.config,o):`${r.config.apiScheme}://${o}`;return _S.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}class ES{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Fn(this.auth,"network-request-failed")),vS.get())})}}function Bu(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=Fn(r,e,s);return o.customData._tokenResponse=t,o}async function TS(r,e){return Uo(r,"POST","/v1/accounts:delete",e)}async function lc(r,e){return Uo(r,"POST","/v1/accounts:lookup",e)}function Ga(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function IS(r,e=!1){const t=St(r),s=await t.getIdToken(e),o=Rf(s);Ie(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l?.sign_in_provider;return{claims:o,token:s,authTime:Ga(Nd(o.auth_time)),issuedAtTime:Ga(Nd(o.iat)),expirationTime:Ga(Nd(o.exp)),signInProvider:h||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Nd(r){return Number(r)*1e3}function Rf(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return Ku("JWT malformed, contained fewer than 3 sections"),null;try{const o=O_(t);return o?JSON.parse(o):(Ku("Failed to decode base64 JWT payload"),null)}catch(o){return Ku("Caught error parsing JWT payload as JSON",o?.toString()),null}}function ty(r){const e=Rf(r);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function nl(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof jr&&SS(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function SS({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class AS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Kd{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ga(this.lastLoginAt),this.creationTime=Ga(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function uc(r){const e=r.auth,t=await r.getIdToken(),s=await nl(r,lc(e,{idToken:t}));Ie(s?.users.length,e,"internal-error");const o=s.users[0];r._notifyReloadListener(o);const l=o.providerUserInfo?.length?Y_(o.providerUserInfo):[],h=CS(r.providerData,l),f=r.isAnonymous,g=!(r.email&&o.passwordHash)&&!h?.length,y=f?g:!1,w={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Kd(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(r,w)}async function RS(r){const e=St(r);await uc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function CS(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function Y_(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function PS(r,e){const t=await Q_(r,{},async()=>{const s=dl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,h=await X_(r,o,"/v1/token",`key=${l}`),f=await r._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:f,body:s};return r.emulatorConfig&&bo(r.emulatorConfig.host)&&(g.credentials="include"),K_.fetch()(h,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function kS(r,e){return Uo(r,"POST","/v2/accounts:revokeToken",Af(r,e))}class To{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ty(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const t=ty(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:l}=await PS(e,t);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:l}=t,h=new To;return s&&(Ie(typeof s=="string","internal-error",{appName:e}),h.refreshToken=s),o&&(Ie(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(Ie(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new To,this.toJSON())}_performRefresh(){return Dr("not implemented")}}function yi(r,e){Ie(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class bn{constructor({uid:e,auth:t,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new AS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Kd(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await nl(this,this.stsTokenManager.getToken(this.auth,e));return Ie(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return IS(this,e)}reload(){return RS(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new bn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await uc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ln(this.auth.app))return Promise.reject(ys(this.auth));const e=await this.getIdToken();return await nl(this,TS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,h=t.photoURL??void 0,f=t.tenantId??void 0,g=t._redirectEventId??void 0,y=t.createdAt??void 0,w=t.lastLoginAt??void 0,{uid:E,emailVerified:A,isAnonymous:b,providerData:H,stsTokenManager:q}=t;Ie(E&&q,e,"internal-error");const U=To.fromJSON(this.name,q);Ie(typeof E=="string",e,"internal-error"),yi(s,e.name),yi(o,e.name),Ie(typeof A=="boolean",e,"internal-error"),Ie(typeof b=="boolean",e,"internal-error"),yi(l,e.name),yi(h,e.name),yi(f,e.name),yi(g,e.name),yi(y,e.name),yi(w,e.name);const re=new bn({uid:E,auth:e,email:o,emailVerified:A,displayName:s,isAnonymous:b,photoURL:h,phoneNumber:l,tenantId:f,stsTokenManager:U,createdAt:y,lastLoginAt:w});return H&&Array.isArray(H)&&(re.providerData=H.map(oe=>({...oe}))),g&&(re._redirectEventId=g),re}static async _fromIdTokenResponse(e,t,s=!1){const o=new To;o.updateFromServerResponse(t);const l=new bn({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await uc(l),l}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];Ie(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?Y_(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!l?.length,f=new To;f.updateFromIdToken(s);const g=new bn({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:h}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Kd(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!l?.length};return Object.assign(g,y),g}}const ny=new Map;function Vr(r){Mr(r instanceof Function,"Expected a class definition");let e=ny.get(r);return e?(Mr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,ny.set(r,e),e)}class J_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}J_.type="NONE";const ry=J_;function Qu(r,e,t){return`firebase:${r}:${e}:${t}`}class Io{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=Qu(this.userKey,o.apiKey,l),this.fullPersistenceKey=Qu("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await lc(this.auth,{idToken:e}).catch(()=>{});return t?bn._fromGetAccountInfoResponse(this.auth,t,e):null}return bn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Io(Vr(ry),e,s);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=o[0]||Vr(ry);const h=Qu(s,e.config.apiKey,e.name);let f=null;for(const y of t)try{const w=await y._get(h);if(w){let E;if(typeof w=="string"){const A=await lc(e,{idToken:w}).catch(()=>{});if(!A)break;E=await bn._fromGetAccountInfoResponse(e,A,w)}else E=bn._fromJSON(e,w);y!==l&&(f=E),l=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new Io(l,e,s):(l=g[0],f&&await l._set(h,f.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(h)}catch{}})),new Io(l,e,s))}}function iy(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(nv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Z_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(iv(e))return"Blackberry";if(sv(e))return"Webos";if(ev(e))return"Safari";if((e.includes("chrome/")||tv(e))&&!e.includes("edge/"))return"Chrome";if(rv(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if(s?.length===2)return s[1]}return"Other"}function Z_(r=Ht()){return/firefox\//i.test(r)}function ev(r=Ht()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function tv(r=Ht()){return/crios\//i.test(r)}function nv(r=Ht()){return/iemobile/i.test(r)}function rv(r=Ht()){return/android/i.test(r)}function iv(r=Ht()){return/blackberry/i.test(r)}function sv(r=Ht()){return/webos/i.test(r)}function Cf(r=Ht()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function NS(r=Ht()){return Cf(r)&&!!window.navigator?.standalone}function xS(){return H0()&&document.documentMode===10}function ov(r=Ht()){return Cf(r)||rv(r)||sv(r)||iv(r)||/windows phone/i.test(r)||nv(r)}function av(r,e=[]){let t;switch(r){case"Browser":t=iy(Ht());break;case"Worker":t=`${iy(Ht())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Fo}/${s}`}class DS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((h,f)=>{try{const g=e(l);h(g)}catch(g){f(g)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function VS(r,e={}){return Uo(r,"GET","/v2/passwordPolicy",Af(r,e))}const OS=6;class MS{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??OS,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class LS{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new sy(this),this.idTokenSubscription=new sy(this),this.beforeStateQueue=new DS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=G_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Vr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Io.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await lc(this,{idToken:e}),s=await bn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Ln(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(h,h))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,h=s?._redirectEventId,f=await this.tryRedirectSignIn(e);(!l||l===h)&&f?.user&&(s=f.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await uc(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=gS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ln(this.app))return Promise.reject(ys(this));const t=e?St(e):null;return t&&Ie(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ln(this.app)?Promise.reject(ys(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ln(this.app)?Promise.reject(ys(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Vr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await VS(this),t=new MS(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new hl("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await kS(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Vr(e)||this._popupRedirectResolver;Ie(t,this,"argument-error"),this.redirectPersistenceManager=await Io.create(this,[Vr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(f,this,"internal-error"),f.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,s,o);return()=>{h=!0,g()}}else{const g=e.addObserver(t);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=av(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(Ln(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&dS(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Nc(r){return St(r)}class sy{constructor(e){this.auth=e,this.observer=null,this.addObserver=eI(t=>this.observer=t)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Pf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function bS(r){Pf=r}function FS(r){return Pf.loadJS(r)}function US(){return Pf.gapiScript}function jS(r){return`__${r}${Math.floor(Math.random()*1e6)}`}function zS(r,e){const t=Ef(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(_s(l,e??{}))return o;hr(o,"already-initialized")}return t.initialize({options:e})}function BS(r,e){const t=e?.persistence||[],s=(Array.isArray(t)?t:[t]).map(Vr);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e?.popupRedirectResolver)}function $S(r,e,t){const s=Nc(r);Ie(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=lv(e),{host:h,port:f}=qS(e),g=f===null?"":`:${f}`,y={url:`${l}//${h}${g}/`},w=Object.freeze({host:h,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Ie(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ie(_s(y,s.config.emulator)&&_s(w,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=w,s.settings.appVerificationDisabledForTesting=!0,bo(h)?(F_(`${l}//${h}${g}`),U_("Auth",!0)):WS()}function lv(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function qS(r){const e=lv(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:oy(s.substr(l.length+1))}}else{const[l,h]=s.split(":");return{host:l,port:oy(h)}}}function oy(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function WS(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class uv{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Dr("not implemented")}_getIdTokenResponse(e){return Dr("not implemented")}_linkToIdToken(e,t){return Dr("not implemented")}_getReauthenticationResolver(e){return Dr("not implemented")}}async function So(r,e){return wS(r,"POST","/v1/accounts:signInWithIdp",Af(r,e))}const HS="http://localhost";class ws extends uv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ws(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):hr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...l}=t;if(!s||!o)return null;const h=new ws(s,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return So(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,So(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,So(e,t)}buildRequest(){const e={requestUri:HS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=dl(t)}return e}}class kf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class pl extends kf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class vi extends pl{constructor(){super("facebook.com")}static credential(e){return ws._fromParams({providerId:vi.PROVIDER_ID,signInMethod:vi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vi.credentialFromTaggedObject(e)}static credentialFromError(e){return vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vi.credential(e.oauthAccessToken)}catch{return null}}}vi.FACEBOOK_SIGN_IN_METHOD="facebook.com";vi.PROVIDER_ID="facebook.com";class xr extends pl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ws._fromParams({providerId:xr.PROVIDER_ID,signInMethod:xr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return xr.credentialFromTaggedObject(e)}static credentialFromError(e){return xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return xr.credential(t,s)}catch{return null}}}xr.GOOGLE_SIGN_IN_METHOD="google.com";xr.PROVIDER_ID="google.com";class wi extends pl{constructor(){super("github.com")}static credential(e){return ws._fromParams({providerId:wi.PROVIDER_ID,signInMethod:wi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wi.credentialFromTaggedObject(e)}static credentialFromError(e){return wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wi.credential(e.oauthAccessToken)}catch{return null}}}wi.GITHUB_SIGN_IN_METHOD="github.com";wi.PROVIDER_ID="github.com";class Ei extends pl{constructor(){super("twitter.com")}static credential(e,t){return ws._fromParams({providerId:Ei.PROVIDER_ID,signInMethod:Ei.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ei.credentialFromTaggedObject(e)}static credentialFromError(e){return Ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Ei.credential(t,s)}catch{return null}}}Ei.TWITTER_SIGN_IN_METHOD="twitter.com";Ei.PROVIDER_ID="twitter.com";class Po{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const l=await bn._fromIdTokenResponse(e,s,o),h=ay(s);return new Po({user:l,providerId:h,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=ay(s);return new Po({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function ay(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}class cc extends jr{constructor(e,t,s,o){super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,cc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new cc(e,t,s,o)}}function cv(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?cc._fromErrorAndOperation(r,l,e,s):l})}async function GS(r,e,t=!1){const s=await nl(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Po._forOperation(r,"link",s)}async function KS(r,e,t=!1){const{auth:s}=r;if(Ln(s.app))return Promise.reject(ys(s));const o="reauthenticate";try{const l=await nl(r,cv(s,o,e,r),t);Ie(l.idToken,s,"internal-error");const h=Rf(l.idToken);Ie(h,s,"internal-error");const{sub:f}=h;return Ie(r.uid===f,s,"user-mismatch"),Po._forOperation(r,o,l)}catch(l){throw l?.code==="auth/user-not-found"&&hr(s,"user-mismatch"),l}}async function QS(r,e,t=!1){if(Ln(r.app))return Promise.reject(ys(r));const s="signIn",o=await cv(r,s,e),l=await Po._fromIdTokenResponse(r,s,o);return t||await r._updateCurrentUser(l.user),l}function XS(r,e,t,s){return St(r).onIdTokenChanged(e,t,s)}function YS(r,e,t){return St(r).beforeAuthStateChanged(e,t)}function JS(r,e,t,s){return St(r).onAuthStateChanged(e,t,s)}function ZS(r){return St(r).signOut()}const hc="__sak";class hv{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(hc,"1"),this.storage.removeItem(hc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const e1=1e3,t1=10;class dv extends hv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ov(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,f,g)=>{this.notifyListeners(h,g)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(s);!t&&this.localCache[s]===h||this.notifyListeners(s,h)},l=this.storage.getItem(s);xS()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,t1):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},e1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}dv.type="LOCAL";const n1=dv;class fv extends hv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}fv.type="SESSION";const pv=fv;function r1(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class xc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new xc(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!h?.size)return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const f=Array.from(h).map(async y=>y(t.origin,l)),g=await r1(f);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}xc.receivers=[];function Nf(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}class i1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((f,g)=>{const y=Nf("",20);o.port1.start();const w=setTimeout(()=>{g(new Error("unsupported_event"))},s);h={messageChannel:o,onMessage(E){const A=E;if(A.data.eventId===y)switch(A.data.status){case"ack":clearTimeout(w),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(A.data.response);break;default:clearTimeout(w),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}function or(){return window}function s1(r){or().location.href=r}function mv(){return typeof or().WorkerGlobalScope<"u"&&typeof or().importScripts=="function"}async function o1(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function a1(){return navigator?.serviceWorker?.controller||null}function l1(){return mv()?self:null}const gv="firebaseLocalStorageDb",u1=1,dc="firebaseLocalStorage",yv="fbase_key";class ml{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Dc(r,e){return r.transaction([dc],e?"readwrite":"readonly").objectStore(dc)}function c1(){const r=indexedDB.deleteDatabase(gv);return new ml(r).toPromise()}function Qd(){const r=indexedDB.open(gv,u1);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(dc,{keyPath:yv})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(dc)?e(s):(s.close(),await c1(),e(await Qd()))})})}async function ly(r,e,t){const s=Dc(r,!0).put({[yv]:e,value:t});return new ml(s).toPromise()}async function h1(r,e){const t=Dc(r,!1).get(e),s=await new ml(t).toPromise();return s===void 0?null:s.value}function uy(r,e){const t=Dc(r,!0).delete(e);return new ml(t).toPromise()}const d1=800,f1=3;class _v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Qd(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>f1)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return mv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xc._getInstance(l1()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await o1(),!this.activeServiceWorker)return;this.sender=new i1(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||a1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Qd();return await ly(e,hc,"1"),await uy(e,hc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>ly(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>h1(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>uy(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Dc(o,!1).getAll();return new ml(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),d1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}_v.type="LOCAL";const p1=_v;new fl(3e4,6e4);function vv(r,e){return e?Vr(e):(Ie(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class xf extends uv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return So(e,this._buildIdpRequest())}_linkToIdToken(e,t){return So(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return So(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function m1(r){return QS(r.auth,new xf(r),r.bypassAuthState)}function g1(r){const{auth:e,user:t}=r;return Ie(t,e,"internal-error"),KS(t,new xf(r),r.bypassAuthState)}async function y1(r){const{auth:e,user:t}=r;return Ie(t,e,"internal-error"),GS(t,new xf(r),r.bypassAuthState)}class wv{constructor(e,t,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:l,error:h,type:f}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return m1;case"linkViaPopup":case"linkViaRedirect":return y1;case"reauthViaPopup":case"reauthViaRedirect":return g1;default:hr(this.auth,"internal-error")}}resolve(e){Mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const _1=new fl(2e3,1e4);async function v1(r,e,t){if(Ln(r.app))return Promise.reject(Fn(r,"operation-not-supported-in-this-environment"));const s=Nc(r);fS(r,e,kf);const o=vv(s,t);return new ms(s,"signInViaPopup",e,o).executeNotNull()}class ms extends wv{constructor(e,t,s,o,l){super(e,t,o,l),this.provider=s,this.authWindow=null,this.pollId=null,ms.currentPopupAction&&ms.currentPopupAction.cancel(),ms.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){Mr(this.filter.length===1,"Popup operations only handle one event");const e=Nf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Fn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Fn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ms.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,_1.get())};e()}}ms.currentPopupAction=null;const w1="pendingRedirect",Xu=new Map;class E1 extends wv{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Xu.get(this.auth._key());if(!e){try{const s=await T1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Xu.set(this.auth._key(),e)}return this.bypassAuthState||Xu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function T1(r,e){const t=A1(e),s=S1(r);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function I1(r,e){Xu.set(r._key(),e)}function S1(r){return Vr(r._redirectPersistence)}function A1(r){return Qu(w1,r.config.apiKey,r.name)}async function R1(r,e,t=!1){if(Ln(r.app))return Promise.reject(ys(r));const s=Nc(r),o=vv(s,e),h=await new E1(s,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await s._persistUserIfCurrent(h.user),await s._setRedirectUser(null,e)),h}const C1=600*1e3;class P1{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!k1(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Ev(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Fn(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=C1&&this.cachedEventUids.clear(),this.cachedEventUids.has(cy(e))}saveEventToCache(e){this.cachedEventUids.add(cy(e)),this.lastProcessedEventTime=Date.now()}}function cy(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Ev({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function k1(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ev(r);default:return!1}}async function N1(r,e={}){return Uo(r,"GET","/v1/projects",e)}const x1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,D1=/^https?/;async function V1(r){if(r.config.emulator)return;const{authorizedDomains:e}=await N1(r);for(const t of e)try{if(O1(t))return}catch{}hr(r,"unauthorized-domain")}function O1(r){const e=Gd(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===s}if(!D1.test(t))return!1;if(x1.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const M1=new fl(3e4,6e4);function hy(){const r=or().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function L1(r){return new Promise((e,t)=>{function s(){hy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{hy(),t(Fn(r,"network-request-failed"))},timeout:M1.get()})}if(or().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(or().gapi?.load)s();else{const o=jS("iframefcb");return or()[o]=()=>{gapi.load?s():t(Fn(r,"network-request-failed"))},FS(`${US()}?onload=${o}`).catch(l=>t(l))}}).catch(e=>{throw Yu=null,e})}let Yu=null;function b1(r){return Yu=Yu||L1(r),Yu}const F1=new fl(5e3,15e3),U1="__/auth/iframe",j1="emulator/auth/iframe",z1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},B1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $1(r){const e=r.config;Ie(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Sf(e,j1):`https://${r.config.authDomain}/${U1}`,s={apiKey:e.apiKey,appName:r.name,v:Fo},o=B1.get(r.config.apiHost);o&&(s.eid=o);const l=r._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${dl(s).slice(1)}`}async function q1(r){const e=await b1(r),t=or().gapi;return Ie(t,r,"internal-error"),e.open({where:document.body,url:$1(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:z1,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const h=Fn(r,"network-request-failed"),f=or().setTimeout(()=>{l(h)},F1.get());function g(){or().clearTimeout(f),o(s)}s.ping(g).then(g,()=>{l(h)})}))}const W1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},H1=500,G1=600,K1="_blank",Q1="http://localhost";class dy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function X1(r,e,t,s=H1,o=G1){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const g={...W1,width:s.toString(),height:o.toString(),top:l,left:h},y=Ht().toLowerCase();t&&(f=tv(y)?K1:t),Z_(y)&&(e=e||Q1,g.scrollbars="yes");const w=Object.entries(g).reduce((A,[b,H])=>`${A}${b}=${H},`,"");if(NS(y)&&f!=="_self")return Y1(e||"",f),new dy(null);const E=window.open(e||"",f,w);Ie(E,r,"popup-blocked");try{E.focus()}catch{}return new dy(E)}function Y1(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}const J1="__/auth/handler",Z1="emulator/auth/handler",eA=encodeURIComponent("fac");async function fy(r,e,t,s,o,l){Ie(r.config.authDomain,r,"auth-domain-config-required"),Ie(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:Fo,eventId:o};if(e instanceof kf){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",Z0(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,E]of Object.entries({}))h[w]=E}if(e instanceof pl){const w=e.getScopes().filter(E=>E!=="");w.length>0&&(h.scopes=w.join(","))}r.tenantId&&(h.tid=r.tenantId);const f=h;for(const w of Object.keys(f))f[w]===void 0&&delete f[w];const g=await r._getAppCheckToken(),y=g?`#${eA}=${encodeURIComponent(g)}`:"";return`${tA(r)}?${dl(f).slice(1)}${y}`}function tA({config:r}){return r.emulator?Sf(r,Z1):`https://${r.authDomain}/${J1}`}const xd="webStorageSupport";class nA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pv,this._completeRedirectFn=R1,this._overrideRedirectResult=I1}async _openPopup(e,t,s,o){Mr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await fy(e,t,s,Gd(),o);return X1(e,l,Nf())}async _openRedirect(e,t,s,o){await this._originValidation(e);const l=await fy(e,t,s,Gd(),o);return s1(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Mr(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await q1(e),s=new P1(e);return t.register("authEvent",o=>(Ie(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(xd,{type:xd},o=>{const l=o?.[0]?.[xd];l!==void 0&&t(!!l),hr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=V1(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ov()||ev()||Cf()}}const rA=nA;var py="@firebase/auth",my="1.12.0";class iA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function sA(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function oA(r){Co(new vs("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:f}=s.options;Ie(h&&!h.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:h,authDomain:f,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:av(r)},y=new LS(s,o,l,g);return BS(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Co(new vs("auth-internal",e=>{const t=Nc(e.getProvider("auth").getImmediate());return(s=>new iA(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Pi(py,my,sA(r)),Pi(py,my,"esm2020")}const aA=300,lA=b_("authIdTokenMaxAge")||aA;let gy=null;const uA=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>lA)return;const o=t?.token;gy!==o&&(gy=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function cA(r=$_()){const e=Ef(r,"auth");if(e.isInitialized())return e.getImmediate();const t=zS(r,{popupRedirectResolver:rA,persistence:[p1,n1,pv]}),s=b_("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const h=uA(l.toString());YS(t,h,()=>h(t.currentUser)),XS(t,f=>h(f))}}const o=M_("auth");return o&&$S(t,`http://${o}`),t}function hA(){return document.getElementsByTagName("head")?.[0]??document}bS({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const l=Fn("internal-error");l.customData=o,t(l)},s.type="text/javascript",s.charset="UTF-8",hA().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});oA("Browser");var yy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ki,Tv;(function(){var r;function e(P,I){function C(){}C.prototype=I.prototype,P.F=I.prototype,P.prototype=new C,P.prototype.constructor=P,P.D=function(k,N,O){for(var R=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)R[fe-2]=arguments[fe];return I.prototype[N].apply(k,R)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(P,I,C){C||(C=0);const k=Array(16);if(typeof I=="string")for(var N=0;N<16;++N)k[N]=I.charCodeAt(C++)|I.charCodeAt(C++)<<8|I.charCodeAt(C++)<<16|I.charCodeAt(C++)<<24;else for(N=0;N<16;++N)k[N]=I[C++]|I[C++]<<8|I[C++]<<16|I[C++]<<24;I=P.g[0],C=P.g[1],N=P.g[2];let O=P.g[3],R;R=I+(O^C&(N^O))+k[0]+3614090360&4294967295,I=C+(R<<7&4294967295|R>>>25),R=O+(N^I&(C^N))+k[1]+3905402710&4294967295,O=I+(R<<12&4294967295|R>>>20),R=N+(C^O&(I^C))+k[2]+606105819&4294967295,N=O+(R<<17&4294967295|R>>>15),R=C+(I^N&(O^I))+k[3]+3250441966&4294967295,C=N+(R<<22&4294967295|R>>>10),R=I+(O^C&(N^O))+k[4]+4118548399&4294967295,I=C+(R<<7&4294967295|R>>>25),R=O+(N^I&(C^N))+k[5]+1200080426&4294967295,O=I+(R<<12&4294967295|R>>>20),R=N+(C^O&(I^C))+k[6]+2821735955&4294967295,N=O+(R<<17&4294967295|R>>>15),R=C+(I^N&(O^I))+k[7]+4249261313&4294967295,C=N+(R<<22&4294967295|R>>>10),R=I+(O^C&(N^O))+k[8]+1770035416&4294967295,I=C+(R<<7&4294967295|R>>>25),R=O+(N^I&(C^N))+k[9]+2336552879&4294967295,O=I+(R<<12&4294967295|R>>>20),R=N+(C^O&(I^C))+k[10]+4294925233&4294967295,N=O+(R<<17&4294967295|R>>>15),R=C+(I^N&(O^I))+k[11]+2304563134&4294967295,C=N+(R<<22&4294967295|R>>>10),R=I+(O^C&(N^O))+k[12]+1804603682&4294967295,I=C+(R<<7&4294967295|R>>>25),R=O+(N^I&(C^N))+k[13]+4254626195&4294967295,O=I+(R<<12&4294967295|R>>>20),R=N+(C^O&(I^C))+k[14]+2792965006&4294967295,N=O+(R<<17&4294967295|R>>>15),R=C+(I^N&(O^I))+k[15]+1236535329&4294967295,C=N+(R<<22&4294967295|R>>>10),R=I+(N^O&(C^N))+k[1]+4129170786&4294967295,I=C+(R<<5&4294967295|R>>>27),R=O+(C^N&(I^C))+k[6]+3225465664&4294967295,O=I+(R<<9&4294967295|R>>>23),R=N+(I^C&(O^I))+k[11]+643717713&4294967295,N=O+(R<<14&4294967295|R>>>18),R=C+(O^I&(N^O))+k[0]+3921069994&4294967295,C=N+(R<<20&4294967295|R>>>12),R=I+(N^O&(C^N))+k[5]+3593408605&4294967295,I=C+(R<<5&4294967295|R>>>27),R=O+(C^N&(I^C))+k[10]+38016083&4294967295,O=I+(R<<9&4294967295|R>>>23),R=N+(I^C&(O^I))+k[15]+3634488961&4294967295,N=O+(R<<14&4294967295|R>>>18),R=C+(O^I&(N^O))+k[4]+3889429448&4294967295,C=N+(R<<20&4294967295|R>>>12),R=I+(N^O&(C^N))+k[9]+568446438&4294967295,I=C+(R<<5&4294967295|R>>>27),R=O+(C^N&(I^C))+k[14]+3275163606&4294967295,O=I+(R<<9&4294967295|R>>>23),R=N+(I^C&(O^I))+k[3]+4107603335&4294967295,N=O+(R<<14&4294967295|R>>>18),R=C+(O^I&(N^O))+k[8]+1163531501&4294967295,C=N+(R<<20&4294967295|R>>>12),R=I+(N^O&(C^N))+k[13]+2850285829&4294967295,I=C+(R<<5&4294967295|R>>>27),R=O+(C^N&(I^C))+k[2]+4243563512&4294967295,O=I+(R<<9&4294967295|R>>>23),R=N+(I^C&(O^I))+k[7]+1735328473&4294967295,N=O+(R<<14&4294967295|R>>>18),R=C+(O^I&(N^O))+k[12]+2368359562&4294967295,C=N+(R<<20&4294967295|R>>>12),R=I+(C^N^O)+k[5]+4294588738&4294967295,I=C+(R<<4&4294967295|R>>>28),R=O+(I^C^N)+k[8]+2272392833&4294967295,O=I+(R<<11&4294967295|R>>>21),R=N+(O^I^C)+k[11]+1839030562&4294967295,N=O+(R<<16&4294967295|R>>>16),R=C+(N^O^I)+k[14]+4259657740&4294967295,C=N+(R<<23&4294967295|R>>>9),R=I+(C^N^O)+k[1]+2763975236&4294967295,I=C+(R<<4&4294967295|R>>>28),R=O+(I^C^N)+k[4]+1272893353&4294967295,O=I+(R<<11&4294967295|R>>>21),R=N+(O^I^C)+k[7]+4139469664&4294967295,N=O+(R<<16&4294967295|R>>>16),R=C+(N^O^I)+k[10]+3200236656&4294967295,C=N+(R<<23&4294967295|R>>>9),R=I+(C^N^O)+k[13]+681279174&4294967295,I=C+(R<<4&4294967295|R>>>28),R=O+(I^C^N)+k[0]+3936430074&4294967295,O=I+(R<<11&4294967295|R>>>21),R=N+(O^I^C)+k[3]+3572445317&4294967295,N=O+(R<<16&4294967295|R>>>16),R=C+(N^O^I)+k[6]+76029189&4294967295,C=N+(R<<23&4294967295|R>>>9),R=I+(C^N^O)+k[9]+3654602809&4294967295,I=C+(R<<4&4294967295|R>>>28),R=O+(I^C^N)+k[12]+3873151461&4294967295,O=I+(R<<11&4294967295|R>>>21),R=N+(O^I^C)+k[15]+530742520&4294967295,N=O+(R<<16&4294967295|R>>>16),R=C+(N^O^I)+k[2]+3299628645&4294967295,C=N+(R<<23&4294967295|R>>>9),R=I+(N^(C|~O))+k[0]+4096336452&4294967295,I=C+(R<<6&4294967295|R>>>26),R=O+(C^(I|~N))+k[7]+1126891415&4294967295,O=I+(R<<10&4294967295|R>>>22),R=N+(I^(O|~C))+k[14]+2878612391&4294967295,N=O+(R<<15&4294967295|R>>>17),R=C+(O^(N|~I))+k[5]+4237533241&4294967295,C=N+(R<<21&4294967295|R>>>11),R=I+(N^(C|~O))+k[12]+1700485571&4294967295,I=C+(R<<6&4294967295|R>>>26),R=O+(C^(I|~N))+k[3]+2399980690&4294967295,O=I+(R<<10&4294967295|R>>>22),R=N+(I^(O|~C))+k[10]+4293915773&4294967295,N=O+(R<<15&4294967295|R>>>17),R=C+(O^(N|~I))+k[1]+2240044497&4294967295,C=N+(R<<21&4294967295|R>>>11),R=I+(N^(C|~O))+k[8]+1873313359&4294967295,I=C+(R<<6&4294967295|R>>>26),R=O+(C^(I|~N))+k[15]+4264355552&4294967295,O=I+(R<<10&4294967295|R>>>22),R=N+(I^(O|~C))+k[6]+2734768916&4294967295,N=O+(R<<15&4294967295|R>>>17),R=C+(O^(N|~I))+k[13]+1309151649&4294967295,C=N+(R<<21&4294967295|R>>>11),R=I+(N^(C|~O))+k[4]+4149444226&4294967295,I=C+(R<<6&4294967295|R>>>26),R=O+(C^(I|~N))+k[11]+3174756917&4294967295,O=I+(R<<10&4294967295|R>>>22),R=N+(I^(O|~C))+k[2]+718787259&4294967295,N=O+(R<<15&4294967295|R>>>17),R=C+(O^(N|~I))+k[9]+3951481745&4294967295,P.g[0]=P.g[0]+I&4294967295,P.g[1]=P.g[1]+(N+(R<<21&4294967295|R>>>11))&4294967295,P.g[2]=P.g[2]+N&4294967295,P.g[3]=P.g[3]+O&4294967295}s.prototype.v=function(P,I){I===void 0&&(I=P.length);const C=I-this.blockSize,k=this.C;let N=this.h,O=0;for(;O<I;){if(N==0)for(;O<=C;)o(this,P,O),O+=this.blockSize;if(typeof P=="string"){for(;O<I;)if(k[N++]=P.charCodeAt(O++),N==this.blockSize){o(this,k),N=0;break}}else for(;O<I;)if(k[N++]=P[O++],N==this.blockSize){o(this,k),N=0;break}}this.h=N,this.o+=I},s.prototype.A=function(){var P=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);P[0]=128;for(var I=1;I<P.length-8;++I)P[I]=0;I=this.o*8;for(var C=P.length-8;C<P.length;++C)P[C]=I&255,I/=256;for(this.v(P),P=Array(16),I=0,C=0;C<4;++C)for(let k=0;k<32;k+=8)P[I++]=this.g[C]>>>k&255;return P};function l(P,I){var C=f;return Object.prototype.hasOwnProperty.call(C,P)?C[P]:C[P]=I(P)}function h(P,I){this.h=I;const C=[];let k=!0;for(let N=P.length-1;N>=0;N--){const O=P[N]|0;k&&O==I||(C[N]=O,k=!1)}this.g=C}var f={};function g(P){return-128<=P&&P<128?l(P,function(I){return new h([I|0],I<0?-1:0)}):new h([P|0],P<0?-1:0)}function y(P){if(isNaN(P)||!isFinite(P))return E;if(P<0)return U(y(-P));const I=[];let C=1;for(let k=0;P>=C;k++)I[k]=P/C|0,C*=4294967296;return new h(I,0)}function w(P,I){if(P.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(P.charAt(0)=="-")return U(w(P.substring(1),I));if(P.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=y(Math.pow(I,8));let k=E;for(let O=0;O<P.length;O+=8){var N=Math.min(8,P.length-O);const R=parseInt(P.substring(O,O+N),I);N<8?(N=y(Math.pow(I,N)),k=k.j(N).add(y(R))):(k=k.j(C),k=k.add(y(R)))}return k}var E=g(0),A=g(1),b=g(16777216);r=h.prototype,r.m=function(){if(q(this))return-U(this).m();let P=0,I=1;for(let C=0;C<this.g.length;C++){const k=this.i(C);P+=(k>=0?k:4294967296+k)*I,I*=4294967296}return P},r.toString=function(P){if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(H(this))return"0";if(q(this))return"-"+U(this).toString(P);const I=y(Math.pow(P,6));var C=this;let k="";for(;;){const N=ee(C,I).g;C=re(C,N.j(I));let O=((C.g.length>0?C.g[0]:C.h)>>>0).toString(P);if(C=N,H(C))return O+k;for(;O.length<6;)O="0"+O;k=O+k}},r.i=function(P){return P<0?0:P<this.g.length?this.g[P]:this.h};function H(P){if(P.h!=0)return!1;for(let I=0;I<P.g.length;I++)if(P.g[I]!=0)return!1;return!0}function q(P){return P.h==-1}r.l=function(P){return P=re(this,P),q(P)?-1:H(P)?0:1};function U(P){const I=P.g.length,C=[];for(let k=0;k<I;k++)C[k]=~P.g[k];return new h(C,~P.h).add(A)}r.abs=function(){return q(this)?U(this):this},r.add=function(P){const I=Math.max(this.g.length,P.g.length),C=[];let k=0;for(let N=0;N<=I;N++){let O=k+(this.i(N)&65535)+(P.i(N)&65535),R=(O>>>16)+(this.i(N)>>>16)+(P.i(N)>>>16);k=R>>>16,O&=65535,R&=65535,C[N]=R<<16|O}return new h(C,C[C.length-1]&-2147483648?-1:0)};function re(P,I){return P.add(U(I))}r.j=function(P){if(H(this)||H(P))return E;if(q(this))return q(P)?U(this).j(U(P)):U(U(this).j(P));if(q(P))return U(this.j(U(P)));if(this.l(b)<0&&P.l(b)<0)return y(this.m()*P.m());const I=this.g.length+P.g.length,C=[];for(var k=0;k<2*I;k++)C[k]=0;for(k=0;k<this.g.length;k++)for(let N=0;N<P.g.length;N++){const O=this.i(k)>>>16,R=this.i(k)&65535,fe=P.i(N)>>>16,De=P.i(N)&65535;C[2*k+2*N]+=R*De,oe(C,2*k+2*N),C[2*k+2*N+1]+=O*De,oe(C,2*k+2*N+1),C[2*k+2*N+1]+=R*fe,oe(C,2*k+2*N+1),C[2*k+2*N+2]+=O*fe,oe(C,2*k+2*N+2)}for(P=0;P<I;P++)C[P]=C[2*P+1]<<16|C[2*P];for(P=I;P<2*I;P++)C[P]=0;return new h(C,0)};function oe(P,I){for(;(P[I]&65535)!=P[I];)P[I+1]+=P[I]>>>16,P[I]&=65535,I++}function j(P,I){this.g=P,this.h=I}function ee(P,I){if(H(I))throw Error("division by zero");if(H(P))return new j(E,E);if(q(P))return I=ee(U(P),I),new j(U(I.g),U(I.h));if(q(I))return I=ee(P,U(I)),new j(U(I.g),I.h);if(P.g.length>30){if(q(P)||q(I))throw Error("slowDivide_ only works with positive integers.");for(var C=A,k=I;k.l(P)<=0;)C=ie(C),k=ie(k);var N=ne(C,1),O=ne(k,1);for(k=ne(k,2),C=ne(C,2);!H(k);){var R=O.add(k);R.l(P)<=0&&(N=N.add(C),O=R),k=ne(k,1),C=ne(C,1)}return I=re(P,N.j(I)),new j(N,I)}for(N=E;P.l(I)>=0;){for(C=Math.max(1,Math.floor(P.m()/I.m())),k=Math.ceil(Math.log(C)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),O=y(C),R=O.j(I);q(R)||R.l(P)>0;)C-=k,O=y(C),R=O.j(I);H(O)&&(O=A),N=N.add(O),P=re(P,R)}return new j(N,P)}r.B=function(P){return ee(this,P).h},r.and=function(P){const I=Math.max(this.g.length,P.g.length),C=[];for(let k=0;k<I;k++)C[k]=this.i(k)&P.i(k);return new h(C,this.h&P.h)},r.or=function(P){const I=Math.max(this.g.length,P.g.length),C=[];for(let k=0;k<I;k++)C[k]=this.i(k)|P.i(k);return new h(C,this.h|P.h)},r.xor=function(P){const I=Math.max(this.g.length,P.g.length),C=[];for(let k=0;k<I;k++)C[k]=this.i(k)^P.i(k);return new h(C,this.h^P.h)};function ie(P){const I=P.g.length+1,C=[];for(let k=0;k<I;k++)C[k]=P.i(k)<<1|P.i(k-1)>>>31;return new h(C,P.h)}function ne(P,I){const C=I>>5;I%=32;const k=P.g.length-C,N=[];for(let O=0;O<k;O++)N[O]=I>0?P.i(O+C)>>>I|P.i(O+C+1)<<32-I:P.i(O+C);return new h(N,P.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Tv=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=w,ki=h}).apply(typeof yy<"u"?yy:typeof self<"u"?self:typeof window<"u"?window:{});var $u=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Iv,$a,Sv,Ju,Xd,Av,Rv,Cv;(function(){var r,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof $u=="object"&&$u];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=t(this);function o(u,m){if(m)e:{var _=s;u=u.split(".");for(var T=0;T<u.length-1;T++){var F=u[T];if(!(F in _))break e;_=_[F]}u=u[u.length-1],T=_[u],m=m(T),m!=T&&m!=null&&e(_,u,{configurable:!0,writable:!0,value:m})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(m){var _=[],T;for(T in m)Object.prototype.hasOwnProperty.call(m,T)&&_.push([T,m[T]]);return _}});var l=l||{},h=this||self;function f(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function g(u,m,_){return u.call.apply(u.bind,arguments)}function y(u,m,_){return y=g,y.apply(null,arguments)}function w(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var T=_.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function E(u,m){function _(){}_.prototype=m.prototype,u.Z=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Ob=function(T,F,$){for(var te=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)te[Pe-2]=arguments[Pe];return m.prototype[F].apply(T,te)}}var A=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function b(u){const m=u.length;if(m>0){const _=Array(m);for(let T=0;T<m;T++)_[T]=u[T];return _}return[]}function H(u,m){for(let T=1;T<arguments.length;T++){const F=arguments[T];var _=typeof F;if(_=_!="object"?_:F?Array.isArray(F)?"array":_:"null",_=="array"||_=="object"&&typeof F.length=="number"){_=u.length||0;const $=F.length||0;u.length=_+$;for(let te=0;te<$;te++)u[_+te]=F[te]}else u.push(F)}}class q{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function U(u){h.setTimeout(()=>{throw u},0)}function re(){var u=P;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class oe{constructor(){this.h=this.g=null}add(m,_){const T=j.get();T.set(m,_),this.h?this.h.next=T:this.g=T,this.h=T}}var j=new q(()=>new ee,u=>u.reset());class ee{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,ne=!1,P=new oe,I=()=>{const u=Promise.resolve(void 0);ie=()=>{u.then(C)}};function C(){for(var u;u=re();){try{u.h.call(u.g)}catch(_){U(_)}var m=j;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}ne=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var O=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};h.addEventListener("test",_,m),h.removeEventListener("test",_,m)}catch{}return u})();function R(u){return/^[\s\xa0]*$/.test(u)}function fe(u,m){N.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}E(fe,N),fe.prototype.init=function(u,m){const _=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(_=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&fe.Z.h.call(this)},fe.prototype.h=function(){fe.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var De="closure_listenable_"+(Math.random()*1e6|0),Ue=0;function Re(u,m,_,T,F){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!T,this.ha=F,this.key=++Ue,this.da=this.fa=!1}function J(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ge(u,m,_){for(const T in u)m.call(_,u[T],T,u)}function ae(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function M(u){const m={};for(const _ in u)m[_]=u[_];return m}const K="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Se(u,m){let _,T;for(let F=1;F<arguments.length;F++){T=arguments[F];for(_ in T)u[_]=T[_];for(let $=0;$<K.length;$++)_=K[$],Object.prototype.hasOwnProperty.call(T,_)&&(u[_]=T[_])}}function Ce(u){this.src=u,this.g={},this.h=0}Ce.prototype.add=function(u,m,_,T,F){const $=u.toString();u=this.g[$],u||(u=this.g[$]=[],this.h++);const te=Ne(u,m,T,F);return te>-1?(m=u[te],_||(m.fa=!1)):(m=new Re(m,this.src,$,!!T,F),m.fa=_,u.push(m)),m};function ke(u,m){const _=m.type;if(_ in u.g){var T=u.g[_],F=Array.prototype.indexOf.call(T,m,void 0),$;($=F>=0)&&Array.prototype.splice.call(T,F,1),$&&(J(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Ne(u,m,_,T){for(let F=0;F<u.length;++F){const $=u[F];if(!$.da&&$.listener==m&&$.capture==!!_&&$.ha==T)return F}return-1}var Be="closure_lm_"+(Math.random()*1e6|0),be={};function Ge(u,m,_,T,F){if(Array.isArray(m)){for(let $=0;$<m.length;$++)Ge(u,m[$],_,T,F);return null}return _=Ko(_),u&&u[De]?u.J(m,_,f(T)?!!T.capture:!1,F):At(u,m,_,!1,T,F)}function At(u,m,_,T,F,$){if(!m)throw Error("Invalid event type");const te=f(F)?!!F.capture:!!F;let Pe=Ns(u);if(Pe||(u[Be]=Pe=new Ce(u)),_=Pe.add(m,_,T,te,$),_.proxy)return _;if(T=gn(),_.proxy=T,T.src=u,T.listener=_,u.addEventListener)O||(F=te),F===void 0&&(F=!1),u.addEventListener(m.toString(),T,F);else if(u.attachEvent)u.attachEvent(ks(m.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return _}function gn(){function u(_){return m.call(u.src,u.listener,_)}const m=Rl;return u}function Go(u,m,_,T,F){if(Array.isArray(m))for(var $=0;$<m.length;$++)Go(u,m[$],_,T,F);else T=f(T)?!!T.capture:!!T,_=Ko(_),u&&u[De]?(u=u.i,$=String(m).toString(),$ in u.g&&(m=u.g[$],_=Ne(m,_,T,F),_>-1&&(J(m[_]),Array.prototype.splice.call(m,_,1),m.length==0&&(delete u.g[$],u.h--)))):u&&(u=Ns(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Ne(m,_,T,F)),(_=u>-1?m[u]:null)&&zr(_))}function zr(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[De])ke(m.i,u);else{var _=u.type,T=u.proxy;m.removeEventListener?m.removeEventListener(_,T,u.capture):m.detachEvent?m.detachEvent(ks(_),T):m.addListener&&m.removeListener&&m.removeListener(T),(_=Ns(m))?(ke(_,u),_.h==0&&(_.src=null,m[Be]=null)):J(u)}}}function ks(u){return u in be?be[u]:be[u]="on"+u}function Rl(u,m){if(u.da)u=!0;else{m=new fe(m,this);const _=u.listener,T=u.ha||u.src;u.fa&&zr(u),u=_.call(T,m)}return u}function Ns(u){return u=u[Be],u instanceof Ce?u:null}var zi="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ko(u){return typeof u=="function"?u:(u[zi]||(u[zi]=function(m){return u.handleEvent(m)}),u[zi])}function mt(){k.call(this),this.i=new Ce(this),this.M=this,this.G=null}E(mt,k),mt.prototype[De]=!0,mt.prototype.removeEventListener=function(u,m,_,T){Go(this,u,m,_,T)};function lt(u,m){var _,T=u.G;if(T)for(_=[];T;T=T.G)_.push(T);if(u=u.M,T=m.type||m,typeof m=="string")m=new N(m,u);else if(m instanceof N)m.target=m.target||u;else{var F=m;m=new N(T,u),Se(m,F)}F=!0;let $,te;if(_)for(te=_.length-1;te>=0;te--)$=m.g=_[te],F=An($,T,!0,m)&&F;if($=m.g=u,F=An($,T,!0,m)&&F,F=An($,T,!1,m)&&F,_)for(te=0;te<_.length;te++)$=m.g=_[te],F=An($,T,!1,m)&&F}mt.prototype.N=function(){if(mt.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const _=u.g[m];for(let T=0;T<_.length;T++)J(_[T]);delete u.g[m],u.h--}}this.G=null},mt.prototype.J=function(u,m,_,T){return this.i.add(String(u),m,!1,_,T)},mt.prototype.K=function(u,m,_,T){return this.i.add(String(u),m,!0,_,T)};function An(u,m,_,T){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let F=!0;for(let $=0;$<m.length;++$){const te=m[$];if(te&&!te.da&&te.capture==_){const Pe=te.listener,ut=te.ha||te.src;te.fa&&ke(u.i,te),F=Pe.call(ut,T)!==!1&&F}}return F&&!T.defaultPrevented}function Qo(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=y(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:h.setTimeout(u,m||0)}function Xo(u){u.g=Qo(()=>{u.g=null,u.i&&(u.i=!1,Xo(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Cl extends k{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Xo(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Br(u){k.call(this),this.h=u,this.g={}}E(Br,k);var Yo=[];function xs(u){ge(u.g,function(m,_){this.g.hasOwnProperty(_)&&zr(m)},u),u.g={}}Br.prototype.N=function(){Br.Z.N.call(this),xs(this)},Br.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $r=h.JSON.stringify,Pl=h.JSON.parse,Bi=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function qr(){}function kl(){}var Wr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ds(){N.call(this,"d")}E(Ds,N);function Jo(){N.call(this,"c")}E(Jo,N);var Rn={},Vs=null;function Hr(){return Vs=Vs||new mt}Rn.Ia="serverreachability";function Os(u){N.call(this,Rn.Ia,u)}E(Os,N);function fr(u){const m=Hr();lt(m,new Os(m))}Rn.STAT_EVENT="statevent";function pr(u,m){N.call(this,Rn.STAT_EVENT,u),this.stat=m}E(pr,N);function ot(u){const m=Hr();lt(m,new pr(m,u))}Rn.Ja="timingevent";function Zo(u,m){N.call(this,Rn.Ja,u),this.size=m}E(Zo,N);function Gr(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},m)}function Kr(){this.g=!0}Kr.prototype.ua=function(){this.g=!1};function Nl(u,m,_,T,F,$){u.info(function(){if(u.g)if($){var te="",Pe=$.split("&");for(let Ke=0;Ke<Pe.length;Ke++){var ut=Pe[Ke].split("=");if(ut.length>1){const gt=ut[0];ut=ut[1];const un=gt.split("_");te=un.length>=2&&un[1]=="type"?te+(gt+"="+ut+"&"):te+(gt+"=redacted&")}}}else te=null;else te=$;return"XMLHTTP REQ ("+T+") [attempt "+F+"]: "+m+`
`+_+`
`+te})}function xl(u,m,_,T,F,$,te){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+F+"]: "+m+`
`+_+`
`+$+" "+te})}function zn(u,m,_,T){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+$i(u,_)+(T?" "+T:"")})}function Dl(u,m){u.info(function(){return"TIMEOUT: "+m})}Kr.prototype.info=function(){};function $i(u,m){if(!u.g)return m;if(!m)return null;try{const $=JSON.parse(m);if($){for(u=0;u<$.length;u++)if(Array.isArray($[u])){var _=$[u];if(!(_.length<2)){var T=_[1];if(Array.isArray(T)&&!(T.length<1)){var F=T[0];if(F!="noop"&&F!="stop"&&F!="close")for(let te=1;te<T.length;te++)T[te]=""}}}}return $r($)}catch{return m}}var Qr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Xr={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Vl;function mr(){}E(mr,qr),mr.prototype.g=function(){return new XMLHttpRequest},Vl=new mr;function Bn(u){return encodeURIComponent(String(u))}function Ms(u){var m=1;u=u.split(":");const _=[];for(;m>0&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function yn(u,m,_,T){this.j=u,this.i=m,this.l=_,this.S=T||1,this.V=new Br(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ol}function Ol(){this.i=null,this.g="",this.h=!1}var Ml={},ea={};function Cn(u,m,_){u.M=1,u.A=yr(_n(m)),u.u=_,u.R=!0,ta(u,null)}function ta(u,m){u.F=Date.now(),qi(u),u.B=_n(u.A);var _=u.B,T=u.S;Array.isArray(T)||(T=[String(T)]),ha(_.i,"t",T),u.C=0,_=u.j.L,u.h=new Ol,u.g=Wl(u.j,_?m:null,!u.u),u.P>0&&(u.O=new Cl(y(u.Y,u,u.g),u.P)),m=u.V,_=u.g,T=u.ba;var F="readystatechange";Array.isArray(F)||(F&&(Yo[0]=F.toString()),F=Yo);for(let $=0;$<F.length;$++){const te=Ge(_,F[$],T||m.handleEvent,!1,m.h||m);if(!te)break;m.g[te.key]=te}m=u.J?M(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),fr(),Nl(u.i,u.v,u.B,u.l,u.S,u.u)}yn.prototype.ba=function(u){u=u.target;const m=this.O;m&&Qn(u)==3?m.j():this.Y(u)},yn.prototype.Y=function(u){try{if(u==this.g)e:{const Pe=Qn(this.g),ut=this.g.ya(),Ke=this.g.ca();if(!(Pe<3)&&(Pe!=3||this.g&&(this.h.h||this.g.la()||$l(this.g)))){this.K||Pe!=4||ut==7||(ut==8||Ke<=0?fr(3):fr(2)),Ls(this);var m=this.g.ca();this.X=m;var _=Ll(this);if(this.o=m==200,xl(this.i,this.v,this.B,this.l,this.S,Pe,m),this.o){if(this.U&&!this.L){t:{if(this.g){var T,F=this.g;if((T=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(T)){var $=T;break t}}$=null}if(u=$)zn(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Je(this,u);else{this.o=!1,this.m=3,ot(12),gr(this),Wi(this);break e}}if(this.R){u=!0;let gt;for(;!this.K&&this.C<_.length;)if(gt=Fl(this,_),gt==ea){Pe==4&&(this.m=4,ot(14),u=!1),zn(this.i,this.l,null,"[Incomplete Response]");break}else if(gt==Ml){this.m=4,ot(15),zn(this.i,this.l,_,"[Invalid Chunk]"),u=!1;break}else zn(this.i,this.l,gt,null),Je(this,gt);if(bl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pe!=4||_.length!=0||this.h.h||(this.m=1,ot(16),u=!1),this.o=this.o&&u,!u)zn(this.i,this.l,_,"[Invalid Chunked Response]"),gr(this),Wi(this);else if(_.length>0&&!this.W){this.W=!0;var te=this.j;te.g==this&&te.aa&&!te.P&&(te.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),es(te),te.P=!0,ot(11))}}else zn(this.i,this.l,_,null),Je(this,_);Pe==4&&gr(this),this.o&&!this.K&&(Pe==4?Hs(this.j,this):(this.o=!1,qi(this)))}else fa(this.g),m==400&&_.indexOf("Unknown SID")>0?(this.m=3,ot(12)):(this.m=0,ot(13)),gr(this),Wi(this)}}}catch{}};function Ll(u){if(!bl(u))return u.g.la();const m=$l(u.g);if(m==="")return"";let _="";const T=m.length,F=Qn(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return gr(u),Wi(u),"";u.h.i=new h.TextDecoder}for(let $=0;$<T;$++)u.h.h=!0,_+=u.h.i.decode(m[$],{stream:!(F&&$==T-1)});return m.length=0,u.h.g+=_,u.C=0,u.h.g}function bl(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Fl(u,m){var _=u.C,T=m.indexOf(`
`,_);return T==-1?ea:(_=Number(m.substring(_,T)),isNaN(_)?Ml:(T+=1,T+_>m.length?ea:(m=m.slice(T,T+_),u.C=T+_,m)))}yn.prototype.cancel=function(){this.K=!0,gr(this)};function qi(u){u.T=Date.now()+u.H,na(u,u.H)}function na(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Gr(y(u.aa,u),m)}function Ls(u){u.D&&(h.clearTimeout(u.D),u.D=null)}yn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Dl(this.i,this.B),this.M!=2&&(fr(),ot(17)),gr(this),this.m=2,Wi(this)):na(this,this.T-u)};function Wi(u){u.j.I==0||u.K||Hs(u.j,u)}function gr(u){Ls(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,xs(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function Je(u,m){try{var _=u.j;if(_.I!=0&&(_.g==u||ia(_.h,u))){if(!u.L&&ia(_.h,u)&&_.I==3){try{var T=_.Ba.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var F=T;if(F[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<u.F)Ws(_),an(_);else break e;Jn(_),ot(18)}}else _.xa=F[1],0<_.xa-_.K&&F[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=Gr(y(_.Va,_),6e3));Hi(_.h)<=1&&_.ta&&(_.ta=void 0)}else ln(_,11)}else if((u.L||_.g==u)&&Ws(_),!R(m))for(F=_.Ba.g.parse(m),m=0;m<F.length;m++){let Ke=F[m];const gt=Ke[0];if(!(gt<=_.K))if(_.K=gt,Ke=Ke[1],_.I==2)if(Ke[0]=="c"){_.M=Ke[1],_.ba=Ke[2];const un=Ke[3];un!=null&&(_.ka=un,_.j.info("VER="+_.ka));const Tr=Ke[4];Tr!=null&&(_.za=Tr,_.j.info("SVER="+_.za));const Zn=Ke[5];Zn!=null&&typeof Zn=="number"&&Zn>0&&(T=1.5*Zn,_.O=T,_.j.info("backChannelRequestTimeoutMs_="+T)),T=_;const er=u.g;if(er){const Qs=er.g?er.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Qs){var $=T.h;$.g||Qs.indexOf("spdy")==-1&&Qs.indexOf("quic")==-1&&Qs.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(Fs($,$.h),$.h=null))}if(T.G){const ga=er.g?er.g.getResponseHeader("X-HTTP-Session-Id"):null;ga&&(T.wa=ga,We(T.J,T.G,ga))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-u.F,_.j.info("Handshake RTT: "+_.T+"ms")),T=_;var te=u;if(T.na=ma(T,T.L?T.ba:null,T.W),te.L){Gi(T.h,te);var Pe=te,ut=T.O;ut&&(Pe.H=ut),Pe.D&&(Ls(Pe),qi(Pe)),T.g=te}else Ut(T);_.i.length>0&&Er(_)}else Ke[0]!="stop"&&Ke[0]!="close"||ln(_,7);else _.I==3&&(Ke[0]=="stop"||Ke[0]=="close"?Ke[0]=="stop"?ln(_,7):$s(_):Ke[0]!="noop"&&_.l&&_.l.qa(Ke),_.A=0)}}fr(4)}catch{}}var Xc=class{constructor(u,m){this.g=u,this.map=m}};function bs(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ra(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Hi(u){return u.h?1:u.g?u.g.size:0}function ia(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Fs(u,m){u.g?u.g.add(m):u.h=m}function Gi(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}bs.prototype.cancel=function(){if(this.i=rn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function rn(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.G);return m}return b(u.i)}var Ul=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sn(u,m){if(u){u=u.split("&");for(let _=0;_<u.length;_++){const T=u[_].indexOf("=");let F,$=null;T>=0?(F=u[_].substring(0,T),$=u[_].substring(T+1)):F=u[_],m(F,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function $n(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof $n?(this.l=u.l,Ki(this,u.j),this.o=u.o,this.g=u.g,qn(this,u.u),this.h=u.h,Yr(this,da(u.i)),this.m=u.m):u&&(m=String(u).match(Ul))?(this.l=!1,Ki(this,m[1]||"",!0),this.o=Qi(m[2]||""),this.g=Qi(m[3]||"",!0),qn(this,m[4]),this.h=Qi(m[5]||"",!0),Yr(this,m[6]||"",!0),this.m=Qi(m[7]||"")):(this.l=!1,this.i=new Fe(null,this.l))}$n.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(Xi(m,oa,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Xi(m,oa,!0),"@"),u.push(Bn(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&u.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(Xi(_,_.charAt(0)=="/"?Yi:aa,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",Xi(_,la)),u.join("")},$n.prototype.resolve=function(u){const m=_n(this);let _=!!u.j;_?Ki(m,u.j):_=!!u.o,_?m.o=u.o:_=!!u.g,_?m.g=u.g:_=u.u!=null;var T=u.h;if(_)qn(m,u.u);else if(_=!!u.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var F=m.h.lastIndexOf("/");F!=-1&&(T=m.h.slice(0,F+1)+T)}if(F=T,F==".."||F==".")T="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){T=F.lastIndexOf("/",0)==0,F=F.split("/");const $=[];for(let te=0;te<F.length;){const Pe=F[te++];Pe=="."?T&&te==F.length&&$.push(""):Pe==".."?(($.length>1||$.length==1&&$[0]!="")&&$.pop(),T&&te==F.length&&$.push("")):($.push(Pe),T=!0)}T=$.join("/")}else T=F}return _?m.h=T:_=u.i.toString()!=="",_?Yr(m,da(u.i)):_=!!u.m,_&&(m.m=u.m),m};function _n(u){return new $n(u)}function Ki(u,m,_){u.j=_?Qi(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function qn(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function Yr(u,m,_){m instanceof Fe?(u.i=m,js(u.i,u.l)):(_||(m=Xi(m,Yc)),u.i=new Fe(m,u.l))}function We(u,m,_){u.i.set(m,_)}function yr(u){return We(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Qi(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Xi(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,sa),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function sa(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var oa=/[#\/\?@]/g,aa=/[#\?:]/g,Yi=/[#\?]/g,Yc=/[#\?@]/g,la=/#/g;function Fe(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Wn(u){u.g||(u.g=new Map,u.h=0,u.i&&sn(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}r=Fe.prototype,r.add=function(u,m){Wn(this),this.i=null,u=Hn(this,u);let _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function ua(u,m){Wn(u),m=Hn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Us(u,m){return Wn(u),m=Hn(u,m),u.g.has(m)}r.forEach=function(u,m){Wn(this),this.g.forEach(function(_,T){_.forEach(function(F){u.call(m,F,T,this)},this)},this)};function ca(u,m){Wn(u);let _=[];if(typeof m=="string")Us(u,m)&&(_=_.concat(u.g.get(Hn(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)_=_.concat(u[m]);return _}r.set=function(u,m){return Wn(this),this.i=null,u=Hn(this,u),Us(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=ca(this,u),u.length>0?String(u[0]):m):m};function ha(u,m,_){ua(u,m),_.length>0&&(u.i=null,u.g.set(Hn(u,m),b(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let T=0;T<m.length;T++){var _=m[T];const F=Bn(_);_=ca(this,_);for(let $=0;$<_.length;$++){let te=F;_[$]!==""&&(te+="="+Bn(_[$])),u.push(te)}}return this.i=u.join("&")};function da(u){const m=new Fe;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function Hn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function js(u,m){m&&!u.j&&(Wn(u),u.i=null,u.g.forEach(function(_,T){const F=T.toLowerCase();T!=F&&(ua(this,T),ha(this,F,_))},u)),u.j=m}function Gn(u,m){const _=new Kr;if(h.Image){const T=new Image;T.onload=w(xt,_,"TestLoadImage: loaded",!0,m,T),T.onerror=w(xt,_,"TestLoadImage: error",!1,m,T),T.onabort=w(xt,_,"TestLoadImage: abort",!1,m,T),T.ontimeout=w(xt,_,"TestLoadImage: timeout",!1,m,T),h.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else m(!1)}function Kn(u,m){const _=new Kr,T=new AbortController,F=setTimeout(()=>{T.abort(),xt(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:T.signal}).then($=>{clearTimeout(F),$.ok?xt(_,"TestPingServer: ok",!0,m):xt(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(F),xt(_,"TestPingServer: error",!1,m)})}function xt(u,m,_,T,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),T(_)}catch{}}function Ji(){this.g=new Bi}function _r(u){this.i=u.Sb||null,this.h=u.ab||!1}E(_r,qr),_r.prototype.g=function(){return new on(this.i,this.h)};function on(u,m){mt.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(on,mt),r=on.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,Pn(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||h).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Jr(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Pn(this)),this.g&&(this.readyState=3,Pn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;jl(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function jl(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Jr(this):Pn(this),this.readyState==3&&jl(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,Jr(this))},r.Na=function(u){this.g&&(this.response=u,Jr(this))},r.ga=function(){this.g&&Jr(this)};function Jr(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Pn(u)}r.setRequestHeader=function(u,m){this.A.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function Pn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(on.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function zl(u){let m="";return ge(u,function(_,T){m+=T,m+=":",m+=_,m+=`\r
`}),m}function zs(u,m,_){e:{for(T in _){var T=!1;break e}T=!0}T||(_=zl(_),typeof u=="string"?_!=null&&Bn(_):We(u,m,_))}function Xe(u){mt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(Xe,mt);var Bl=/^https?$/i,Jc=["POST","PUT"];r=Xe.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,m,_,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Vl.g(),this.g.onreadystatechange=A(y(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch($){Zr(this,$);return}if(u=_||"",_=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var F in T)_.set(F,T[F]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const $ of T.keys())_.set($,T.get($));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(_.keys()).find($=>$.toLowerCase()=="content-type"),F=h.FormData&&u instanceof h.FormData,!(Array.prototype.indexOf.call(Jc,m,void 0)>=0)||T||F||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,te]of _)this.g.setRequestHeader($,te);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch($){Zr(this,$)}};function Zr(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,ei(u),wr(u)}function ei(u){u.A||(u.A=!0,lt(u,"complete"),lt(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,lt(this,"complete"),lt(this,"abort"),wr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wr(this,!0)),Xe.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?vr(this):this.Xa())},r.Xa=function(){vr(this)};function vr(u){if(u.h&&typeof l<"u"){if(u.v&&Qn(u)==4)setTimeout(u.Ca.bind(u),0);else if(lt(u,"readystatechange"),Qn(u)==4){u.h=!1;try{const $=u.ca();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var T;if(T=$===0){let te=String(u.D).match(Ul)[1]||null;!te&&h.self&&h.self.location&&(te=h.self.location.protocol.slice(0,-1)),T=!Bl.test(te?te.toLowerCase():"")}_=T}if(_)lt(u,"complete"),lt(u,"success");else{u.o=6;try{var F=Qn(u)>2?u.g.statusText:""}catch{F=""}u.l=F+" ["+u.ca()+"]",ei(u)}}finally{wr(u)}}}}function wr(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const _=u.g;u.g=null,m||lt(u,"ready");try{_.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Qn(u){return u.g?u.g.readyState:0}r.ca=function(){try{return Qn(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Pl(m)}};function $l(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function fa(u){const m={};u=(u.g&&Qn(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(R(u[T]))continue;var _=Ms(u[T]);const F=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const $=m[F]||[];m[F]=$,$.push(_)}ae(m,function(T){return T.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xn(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function Bs(u){this.za=0,this.i=[],this.j=new Kr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Xn("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Xn("baseRetryDelayMs",5e3,u),this.Za=Xn("retryDelaySeedMs",1e4,u),this.Ta=Xn("forwardChannelMaxRetries",2,u),this.va=Xn("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new bs(u&&u.concurrentRequestLimit),this.Ba=new Ji,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Bs.prototype,r.ka=8,r.I=1,r.connect=function(u,m,_,T){ot(0),this.W=u,this.H=m||{},_&&T!==void 0&&(this.H.OSID=_,this.H.OAID=T),this.F=this.X,this.J=ma(this,null,this.W),Er(this)};function $s(u){if(qs(u),u.I==3){var m=u.V++,_=_n(u.J);if(We(_,"SID",u.M),We(_,"RID",m),We(_,"TYPE","terminate"),Yn(u,_),m=new yn(u,u.j,m),m.M=2,m.A=yr(_n(_)),_=!1,h.navigator&&h.navigator.sendBeacon)try{_=h.navigator.sendBeacon(m.A.toString(),"")}catch{}!_&&h.Image&&(new Image().src=m.A,_=!0),_||(m.g=Wl(m.j,null),m.g.ea(m.A)),m.F=Date.now(),qi(m)}ts(u)}function an(u){u.g&&(es(u),u.g.cancel(),u.g=null)}function qs(u){an(u),u.v&&(h.clearTimeout(u.v),u.v=null),Ws(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&h.clearTimeout(u.m),u.m=null)}function Er(u){if(!ra(u.h)&&!u.m){u.m=!0;var m=u.Ea;ie||I(),ne||(ie(),ne=!0),P.add(m,u),u.D=0}}function ql(u,m){return Hi(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Gr(y(u.Ea,u,m),Gs(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const F=new yn(this,this.j,u);let $=this.o;if(this.U&&($?($=M($),Se($,this.U)):$=this.U),this.u!==null||this.R||(F.J=$,$=null),this.S)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var T=this.i[_];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(m+=T,m>4096){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=pa(this,F,m),_=_n(this.J),We(_,"RID",u),We(_,"CVER",22),this.G&&We(_,"X-HTTP-Session-Id",this.G),Yn(this,_),$&&(this.R?m="headers="+Bn(zl($))+"&"+m:this.u&&zs(_,this.u,$)),Fs(this.h,F),this.Ra&&We(_,"TYPE","init"),this.S?(We(_,"$req",m),We(_,"SID","null"),F.U=!0,Cn(F,_,null)):Cn(F,_,m),this.I=2}}else this.I==3&&(u?Zi(this,u):this.i.length==0||ra(this.h)||Zi(this))};function Zi(u,m){var _;m?_=m.l:_=u.V++;const T=_n(u.J);We(T,"SID",u.M),We(T,"RID",_),We(T,"AID",u.K),Yn(u,T),u.u&&u.o&&zs(T,u.u,u.o),_=new yn(u,u.j,_,u.D+1),u.u===null&&(_.J=u.o),m&&(u.i=m.G.concat(u.i)),m=pa(u,_,1e3),_.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Fs(u.h,_),Cn(_,T,m)}function Yn(u,m){u.H&&ge(u.H,function(_,T){We(m,T,_)}),u.l&&ge({},function(_,T){We(m,T,_)})}function pa(u,m,_){_=Math.min(u.i.length,_);const T=u.l?y(u.l.Ka,u.l,u):null;e:{var F=u.i;let Pe=-1;for(;;){const ut=["count="+_];Pe==-1?_>0?(Pe=F[0].g,ut.push("ofs="+Pe)):Pe=0:ut.push("ofs="+Pe);let Ke=!0;for(let gt=0;gt<_;gt++){var $=F[gt].g;const un=F[gt].map;if($-=Pe,$<0)Pe=Math.max(0,F[gt].g-100),Ke=!1;else try{$="req"+$+"_"||"";try{var te=un instanceof Map?un:Object.entries(un);for(const[Tr,Zn]of te){let er=Zn;f(Zn)&&(er=$r(Zn)),ut.push($+Tr+"="+encodeURIComponent(er))}}catch(Tr){throw ut.push($+"type="+encodeURIComponent("_badmap")),Tr}}catch{T&&T(un)}}if(Ke){te=ut.join("&");break e}}te=void 0}return u=u.i.splice(0,_),m.G=u,te}function Ut(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;ie||I(),ne||(ie(),ne=!0),P.add(m,u),u.A=0}}function Jn(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Gr(y(u.Da,u),Gs(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,ti(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Gr(y(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ot(10),an(this),ti(this))};function es(u){u.B!=null&&(h.clearTimeout(u.B),u.B=null)}function ti(u){u.g=new yn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=_n(u.na);We(m,"RID","rpc"),We(m,"SID",u.M),We(m,"AID",u.K),We(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&We(m,"TO",u.ia),We(m,"TYPE","xmlhttp"),Yn(u,m),u.u&&u.o&&zs(m,u.u,u.o),u.O&&(u.g.H=u.O);var _=u.g;u=u.ba,_.M=1,_.A=yr(_n(m)),_.u=null,_.R=!0,ta(_,u)}r.Va=function(){this.C!=null&&(this.C=null,an(this),Jn(this),ot(19))};function Ws(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function Hs(u,m){var _=null;if(u.g==m){Ws(u),es(u),u.g=null;var T=2}else if(ia(u.h,m))_=m.G,Gi(u.h,m),T=1;else return;if(u.I!=0){if(m.o)if(T==1){_=m.u?m.u.length:0,m=Date.now()-m.F;var F=u.D;T=Hr(),lt(T,new Zo(T,_)),Er(u)}else Ut(u);else if(F=m.m,F==3||F==0&&m.X>0||!(T==1&&ql(u,m)||T==2&&Jn(u)))switch(_&&_.length>0&&(m=u.h,m.i=m.i.concat(_)),F){case 1:ln(u,5);break;case 4:ln(u,10);break;case 3:ln(u,6);break;default:ln(u,2)}}}function Gs(u,m){let _=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(_*=2),_*m}function ln(u,m){if(u.j.info("Error code "+m),m==2){var _=y(u.bb,u),T=u.Ua;const F=!T;T=new $n(T||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Ki(T,"https"),yr(T),F?Gn(T.toString(),_):Kn(T.toString(),_)}else ot(2);u.I=0,u.l&&u.l.pa(m),ts(u),qs(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),ot(2)):(this.j.info("Failed to ping google.com"),ot(1))};function ts(u){if(u.I=0,u.ja=[],u.l){const m=rn(u.h);(m.length!=0||u.i.length!=0)&&(H(u.ja,m),H(u.ja,u.i),u.h.i.length=0,b(u.i),u.i.length=0),u.l.oa()}}function ma(u,m,_){var T=_ instanceof $n?_n(_):new $n(_);if(T.g!="")m&&(T.g=m+"."+T.g),qn(T,T.u);else{var F=h.location;T=F.protocol,m=m?m+"."+F.hostname:F.hostname,F=+F.port;const $=new $n(null);T&&Ki($,T),m&&($.g=m),F&&qn($,F),_&&($.h=_),T=$}return _=u.G,m=u.wa,_&&m&&We(T,_,m),We(T,"VER",u.ka),Yn(u,T),T}function Wl(u,m,_){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new Xe(new _r({ab:_})):new Xe(u.ma),m.Fa(u.L),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Hl(){}r=Hl.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Ks(){}Ks.prototype.g=function(u,m){return new Dt(u,m)};function Dt(u,m){mt.call(this),this.g=new Bs(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!R(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!R(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new ni(this)}E(Dt,mt),Dt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Dt.prototype.close=function(){$s(this.g)},Dt.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.v&&(_={},_.__data__=$r(u),u=_);m.i.push(new Xc(m.Ya++,u)),m.I==3&&Er(m)},Dt.prototype.N=function(){this.g.l=null,delete this.j,$s(this.g),delete this.g,Dt.Z.N.call(this)};function Gl(u){Ds.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const _ in m){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}E(Gl,Ds);function Kl(){Jo.call(this),this.status=1}E(Kl,Jo);function ni(u){this.g=u}E(ni,Hl),ni.prototype.ra=function(){lt(this.g,"a")},ni.prototype.qa=function(u){lt(this.g,new Gl(u))},ni.prototype.pa=function(u){lt(this.g,new Kl)},ni.prototype.oa=function(){lt(this.g,"b")},Ks.prototype.createWebChannel=Ks.prototype.g,Dt.prototype.send=Dt.prototype.o,Dt.prototype.open=Dt.prototype.m,Dt.prototype.close=Dt.prototype.close,Cv=function(){return new Ks},Rv=function(){return Hr()},Av=Rn,Xd={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Qr.NO_ERROR=0,Qr.TIMEOUT=8,Qr.HTTP_ERROR=6,Ju=Qr,Xr.COMPLETE="complete",Sv=Xr,kl.EventType=Wr,Wr.OPEN="a",Wr.CLOSE="b",Wr.ERROR="c",Wr.MESSAGE="d",mt.prototype.listen=mt.prototype.J,$a=kl,Xe.prototype.listenOnce=Xe.prototype.K,Xe.prototype.getLastError=Xe.prototype.Ha,Xe.prototype.getLastErrorCode=Xe.prototype.ya,Xe.prototype.getStatus=Xe.prototype.ca,Xe.prototype.getResponseJson=Xe.prototype.La,Xe.prototype.getResponseText=Xe.prototype.la,Xe.prototype.send=Xe.prototype.ea,Xe.prototype.setWithCredentials=Xe.prototype.Fa,Iv=Xe}).apply(typeof $u<"u"?$u:typeof self<"u"?self:typeof window<"u"?window:{});const _y="@firebase/firestore",vy="4.9.3";class Wt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Wt.UNAUTHENTICATED=new Wt(null),Wt.GOOGLE_CREDENTIALS=new Wt("google-credentials-uid"),Wt.FIRST_PARTY=new Wt("first-party-uid"),Wt.MOCK_USER=new Wt("mock-user");let jo="12.7.0";const Es=new vf("@firebase/firestore");function yo(){return Es.logLevel}function ue(r,...e){if(Es.logLevel<=Oe.DEBUG){const t=e.map(Df);Es.debug(`Firestore (${jo}): ${r}`,...t)}}function Lr(r,...e){if(Es.logLevel<=Oe.ERROR){const t=e.map(Df);Es.error(`Firestore (${jo}): ${r}`,...t)}}function ko(r,...e){if(Es.logLevel<=Oe.WARN){const t=e.map(Df);Es.warn(`Firestore (${jo}): ${r}`,...t)}}function Df(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}function _e(r,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,Pv(r,s,t)}function Pv(r,e,t){let s=`FIRESTORE (${jo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Lr(s),new Error(s)}function ze(r,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,r||Pv(e,o,s)}function Ae(r,e){return r}const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends jr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ar{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class kv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class dA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Wt.UNAUTHENTICATED)))}shutdown(){}}class fA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class pA{constructor(e){this.t=e,this.currentUser=Wt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ze(this.o===void 0,42304);let s=this.i;const o=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let l=new ar;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ar,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},f=g=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((g=>f(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?f(g):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ar)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(ze(typeof s.accessToken=="string",31837,{l:s}),new kv(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ze(e===null||typeof e=="string",2055,{h:e}),new Wt(e)}}class mA{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Wt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class gA{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new mA(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Wt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class wy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yA{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ln(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ze(this.o===void 0,3512);const s=l=>{l.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,ue("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const o=l=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new wy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ze(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new wy(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function _A(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}class Vf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=_A(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%62))}return s}}function Me(r,e){return r<e?-1:r>e?1:0}function Yd(r,e){const t=Math.min(r.length,e.length);for(let s=0;s<t;s++){const o=r.charAt(s),l=e.charAt(s);if(o!==l)return Dd(o)===Dd(l)?Me(o,l):Dd(o)?1:-1}return Me(r.length,e.length)}const vA=55296,wA=57343;function Dd(r){const e=r.charCodeAt(0);return e>=vA&&e<=wA}function No(r,e,t){return r.length===e.length&&r.every(((s,o)=>t(s,e[o])))}const Ey="__name__";class sr{constructor(e,t,s){t===void 0?t=0:t>e.length&&_e(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&_e(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return sr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof sr?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=sr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Me(e.length,t.length)}static compareSegments(e,t){const s=sr.isNumericId(e),o=sr.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?sr.extractNumericId(e).compare(sr.extractNumericId(t)):Yd(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ki.fromString(e.substring(4,e.length-2))}}class Qe extends sr{construct(e,t,s){return new Qe(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new se(W.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new Qe(t)}static emptyPath(){return new Qe([])}}const EA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Lt extends sr{construct(e,t,s){return new Lt(e,t,s)}static isValidIdentifier(e){return EA.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Lt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ey}static keyField(){return new Lt([Ey])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new se(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let h=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new se(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new se(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else f==="`"?(h=!h,o++):f!=="."||h?(s+=f,o++):(l(),o++)}if(l(),h)throw new se(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Lt(t)}static emptyPath(){return new Lt([])}}class ye{constructor(e){this.path=e}static fromPath(e){return new ye(Qe.fromString(e))}static fromName(e){return new ye(Qe.fromString(e).popFirst(5))}static empty(){return new ye(Qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Qe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new Qe(e.slice()))}}function Nv(r,e,t){if(!t)throw new se(W.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function TA(r,e,t,s){if(e===!0&&s===!0)throw new se(W.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Ty(r){if(!ye.isDocumentKey(r))throw new se(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Iy(r){if(ye.isDocumentKey(r))throw new se(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function xv(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Vc(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":_e(12329,{type:typeof r})}function br(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new se(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Vc(r);throw new se(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function wt(r,e){const t={typeString:r};return e&&(t.value=e),t}function gl(r,e){if(!xv(r))throw new se(W.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){t=`JSON missing required field: '${s}'`;break}const h=r[s];if(o&&typeof h!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(l!==void 0&&h!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new se(W.INVALID_ARGUMENT,t);return!0}const Sy=-62135596800,Ay=1e6;class tt{static now(){return tt.fromMillis(Date.now())}static fromDate(e){return tt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*Ay);return new tt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new se(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new se(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Sy)throw new se(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ay}_compareTo(e){return this.seconds===e.seconds?Me(this.nanoseconds,e.nanoseconds):Me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:tt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(gl(e,tt._jsonSchema))return new tt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Sy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}tt._jsonSchemaVersion="firestore/timestamp/1.0",tt._jsonSchema={type:wt("string",tt._jsonSchemaVersion),seconds:wt("number"),nanoseconds:wt("number")};class Ee{static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new tt(0,0))}static max(){return new Ee(new tt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const rl=-1;function IA(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Ee.fromTimestamp(s===1e9?new tt(t+1,0):new tt(t,s));return new Di(o,ye.empty(),e)}function SA(r){return new Di(r.readTime,r.key,rl)}class Di{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Di(Ee.min(),ye.empty(),rl)}static max(){return new Di(Ee.max(),ye.empty(),rl)}}function AA(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=ye.comparator(r.documentKey,e.documentKey),t!==0?t:Me(r.largestBatchId,e.largestBatchId))}const RA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class CA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function zo(r){if(r.code!==W.FAILED_PRECONDITION||r.message!==RA)throw r;ue("LocalStore","Unexpectedly lost primary lease")}class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&_e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new G(((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof G?t:G.resolve(t)}catch(t){return G.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):G.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):G.reject(t)}static resolve(e){return new G(((t,s)=>{t(e)}))}static reject(e){return new G(((t,s)=>{s(e)}))}static waitFor(e){return new G(((t,s)=>{let o=0,l=0,h=!1;e.forEach((f=>{++o,f.next((()=>{++l,h&&l===o&&t()}),(g=>s(g)))})),h=!0,l===o&&t()}))}static or(e){let t=G.resolve(!1);for(const s of e)t=t.next((o=>o?G.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,l)=>{s.push(t.call(this,o,l))})),this.waitFor(s)}static mapArray(e,t){return new G(((s,o)=>{const l=e.length,h=new Array(l);let f=0;for(let g=0;g<l;g++){const y=g;t(e[y]).next((w=>{h[y]=w,++f,f===l&&s(h)}),(w=>o(w)))}}))}static doWhile(e,t){return new G(((s,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):s()};l()}))}}function PA(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Bo(r){return r.name==="IndexedDbTransactionError"}class Oc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Oc.ce=-1;const Of=-1;function yl(r){return r==null}function fc(r){return r===0&&1/r==-1/0}function kA(r){return typeof r=="number"&&Number.isInteger(r)&&!fc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const Dv="";function NA(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Ry(e)),e=xA(r.get(t),e);return Ry(e)}function xA(r,e){let t=e;const s=r.length;for(let o=0;o<s;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case Dv:t+="";break;default:t+=l}}return t}function Ry(r){return r+Dv+""}function Cy(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Ui(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function Vv(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class st{constructor(e,t){this.comparator=e,this.root=t||Mt.EMPTY}insert(e,t){return new st(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Mt.BLACK,null,null))}remove(e){return new st(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Mt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qu(this.root,e,this.comparator,!1)}getReverseIterator(){return new qu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qu(this.root,e,this.comparator,!0)}}class qu{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Mt{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??Mt.RED,this.left=o??Mt.EMPTY,this.right=l??Mt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new Mt(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Mt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Mt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Mt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Mt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw _e(27949);return e+(this.isRed()?0:1)}}Mt.EMPTY=null,Mt.RED=!0,Mt.BLACK=!1;Mt.EMPTY=new class{constructor(){this.size=0}get key(){throw _e(57766)}get value(){throw _e(16141)}get color(){throw _e(16727)}get left(){throw _e(29726)}get right(){throw _e(36894)}copy(e,t,s,o,l){return this}insert(e,t,s){return new Mt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class It{constructor(e){this.comparator=e,this.data=new st(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Py(this.data.getIterator())}getIteratorFrom(e){return new Py(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof It)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new It(this.comparator);return t.data=e,t}}class Py{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class pn{constructor(e){this.fields=e,e.sort(Lt.comparator)}static empty(){return new pn([])}unionWith(e){let t=new It(Lt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new pn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return No(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}class Ov extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ft{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Ov("Invalid base64 string: "+l):l}})(e);return new Ft(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l})(e);return new Ft(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ft.EMPTY_BYTE_STRING=new Ft("");const DA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vi(r){if(ze(!!r,39018),typeof r=="string"){let e=0;const t=DA.exec(r);if(ze(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:ht(r.seconds),nanos:ht(r.nanos)}}function ht(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Oi(r){return typeof r=="string"?Ft.fromBase64String(r):Ft.fromUint8Array(r)}const Mv="server_timestamp",Lv="__type__",bv="__previous_value__",Fv="__local_write_time__";function Mf(r){return(r?.mapValue?.fields||{})[Lv]?.stringValue===Mv}function Mc(r){const e=r.mapValue.fields[bv];return Mf(e)?Mc(e):e}function il(r){const e=Vi(r.mapValue.fields[Fv].timestampValue);return new tt(e.seconds,e.nanos)}class VA{constructor(e,t,s,o,l,h,f,g,y,w){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=w}}const pc="(default)";class sl{constructor(e,t){this.projectId=e,this.database=t||pc}static empty(){return new sl("","")}get isDefaultDatabase(){return this.database===pc}isEqual(e){return e instanceof sl&&e.projectId===this.projectId&&e.database===this.database}}const Uv="__type__",OA="__max__",Wu={mapValue:{}},jv="__vector__",mc="value";function Mi(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Mf(r)?4:LA(r)?9007199254740991:MA(r)?10:11:_e(28295,{value:r})}function dr(r,e){if(r===e)return!0;const t=Mi(r);if(t!==Mi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return il(r).isEqual(il(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=Vi(o.timestampValue),f=Vi(l.timestampValue);return h.seconds===f.seconds&&h.nanos===f.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,l){return Oi(o.bytesValue).isEqual(Oi(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,l){return ht(o.geoPointValue.latitude)===ht(l.geoPointValue.latitude)&&ht(o.geoPointValue.longitude)===ht(l.geoPointValue.longitude)})(r,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return ht(o.integerValue)===ht(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=ht(o.doubleValue),f=ht(l.doubleValue);return h===f?fc(h)===fc(f):isNaN(h)&&isNaN(f)}return!1})(r,e);case 9:return No(r.arrayValue.values||[],e.arrayValue.values||[],dr);case 10:case 11:return(function(o,l){const h=o.mapValue.fields||{},f=l.mapValue.fields||{};if(Cy(h)!==Cy(f))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(f[g]===void 0||!dr(h[g],f[g])))return!1;return!0})(r,e);default:return _e(52216,{left:r})}}function ol(r,e){return(r.values||[]).find((t=>dr(t,e)))!==void 0}function xo(r,e){if(r===e)return 0;const t=Mi(r),s=Mi(e);if(t!==s)return Me(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Me(r.booleanValue,e.booleanValue);case 2:return(function(l,h){const f=ht(l.integerValue||l.doubleValue),g=ht(h.integerValue||h.doubleValue);return f<g?-1:f>g?1:f===g?0:isNaN(f)?isNaN(g)?0:-1:1})(r,e);case 3:return ky(r.timestampValue,e.timestampValue);case 4:return ky(il(r),il(e));case 5:return Yd(r.stringValue,e.stringValue);case 6:return(function(l,h){const f=Oi(l),g=Oi(h);return f.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(l,h){const f=l.split("/"),g=h.split("/");for(let y=0;y<f.length&&y<g.length;y++){const w=Me(f[y],g[y]);if(w!==0)return w}return Me(f.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,h){const f=Me(ht(l.latitude),ht(h.latitude));return f!==0?f:Me(ht(l.longitude),ht(h.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Ny(r.arrayValue,e.arrayValue);case 10:return(function(l,h){const f=l.fields||{},g=h.fields||{},y=f[mc]?.arrayValue,w=g[mc]?.arrayValue,E=Me(y?.values?.length||0,w?.values?.length||0);return E!==0?E:Ny(y,w)})(r.mapValue,e.mapValue);case 11:return(function(l,h){if(l===Wu.mapValue&&h===Wu.mapValue)return 0;if(l===Wu.mapValue)return 1;if(h===Wu.mapValue)return-1;const f=l.fields||{},g=Object.keys(f),y=h.fields||{},w=Object.keys(y);g.sort(),w.sort();for(let E=0;E<g.length&&E<w.length;++E){const A=Yd(g[E],w[E]);if(A!==0)return A;const b=xo(f[g[E]],y[w[E]]);if(b!==0)return b}return Me(g.length,w.length)})(r.mapValue,e.mapValue);default:throw _e(23264,{he:t})}}function ky(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Me(r,e);const t=Vi(r),s=Vi(e),o=Me(t.seconds,s.seconds);return o!==0?o:Me(t.nanos,s.nanos)}function Ny(r,e){const t=r.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=xo(t[o],s[o]);if(l)return l}return Me(t.length,s.length)}function Do(r){return Jd(r)}function Jd(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const s=Vi(t);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Oi(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return ye.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=Jd(l);return s+"]"})(r.arrayValue):"mapValue"in r?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of s)l?l=!1:o+=",",o+=`${h}:${Jd(t.fields[h])}`;return o+"}"})(r.mapValue):_e(61005,{value:r})}function Zu(r){switch(Mi(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Mc(r);return e?16+Zu(e):16;case 5:return 2*r.stringValue.length;case 6:return Oi(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,l)=>o+Zu(l)),0)})(r.arrayValue);case 10:case 11:return(function(s){let o=0;return Ui(s.fields,((l,h)=>{o+=l.length+Zu(h)})),o})(r.mapValue);default:throw _e(13486,{value:r})}}function xy(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Zd(r){return!!r&&"integerValue"in r}function Lf(r){return!!r&&"arrayValue"in r}function Dy(r){return!!r&&"nullValue"in r}function Vy(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function ec(r){return!!r&&"mapValue"in r}function MA(r){return(r?.mapValue?.fields||{})[Uv]?.stringValue===jv}function Ka(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Ui(r.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Ka(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ka(r.arrayValue.values[t]);return e}return{...r}}function LA(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===OA}class Qt{constructor(e){this.value=e}static empty(){return new Qt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!ec(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ka(t)}setAll(e){let t=Lt.emptyPath(),s={},o=[];e.forEach(((h,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,s,o),s={},o=[],t=f.popLast()}h?s[f.lastSegment()]=Ka(h):o.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());ec(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return dr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];ec(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){Ui(t,((o,l)=>e[o]=l));for(const o of s)delete e[o]}clone(){return new Qt(Ka(this.value))}}function zv(r){const e=[];return Ui(r.fields,((t,s)=>{const o=new Lt([t]);if(ec(s)){const l=zv(s.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)})),new pn(e)}class Nt{constructor(e,t,s,o,l,h,f){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=h,this.documentState=f}static newInvalidDocument(e){return new Nt(e,0,Ee.min(),Ee.min(),Ee.min(),Qt.empty(),0)}static newFoundDocument(e,t,s,o){return new Nt(e,1,t,Ee.min(),s,o,0)}static newNoDocument(e,t){return new Nt(e,2,t,Ee.min(),Ee.min(),Qt.empty(),0)}static newUnknownDocument(e,t){return new Nt(e,3,t,Ee.min(),Ee.min(),Qt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Nt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Nt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class gc{constructor(e,t){this.position=e,this.inclusive=t}}function Oy(r,e,t){let s=0;for(let o=0;o<r.position.length;o++){const l=e[o],h=r.position[o];if(l.field.isKeyField()?s=ye.comparator(ye.fromName(h.referenceValue),t.key):s=xo(h,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function My(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!dr(r.position[t],e.position[t]))return!1;return!0}class yc{constructor(e,t="asc"){this.field=e,this.dir=t}}function bA(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class Bv{}class vt extends Bv{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new UA(e,t,s):t==="array-contains"?new BA(e,s):t==="in"?new $A(e,s):t==="not-in"?new qA(e,s):t==="array-contains-any"?new WA(e,s):new vt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new jA(e,s):new zA(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(xo(t,this.value)):t!==null&&Mi(this.value)===Mi(t)&&this.matchesComparison(xo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Un extends Bv{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Un(e,t)}matches(e){return $v(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function $v(r){return r.op==="and"}function qv(r){return FA(r)&&$v(r)}function FA(r){for(const e of r.filters)if(e instanceof Un)return!1;return!0}function ef(r){if(r instanceof vt)return r.field.canonicalString()+r.op.toString()+Do(r.value);if(qv(r))return r.filters.map((e=>ef(e))).join(",");{const e=r.filters.map((t=>ef(t))).join(",");return`${r.op}(${e})`}}function Wv(r,e){return r instanceof vt?(function(s,o){return o instanceof vt&&s.op===o.op&&s.field.isEqual(o.field)&&dr(s.value,o.value)})(r,e):r instanceof Un?(function(s,o){return o instanceof Un&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((l,h,f)=>l&&Wv(h,o.filters[f])),!0):!1})(r,e):void _e(19439)}function Hv(r){return r instanceof vt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Do(t.value)}`})(r):r instanceof Un?(function(t){return t.op.toString()+" {"+t.getFilters().map(Hv).join(" ,")+"}"})(r):"Filter"}class UA extends vt{constructor(e,t,s){super(e,t,s),this.key=ye.fromName(s.referenceValue)}matches(e){const t=ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class jA extends vt{constructor(e,t){super(e,"in",t),this.keys=Gv("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class zA extends vt{constructor(e,t){super(e,"not-in",t),this.keys=Gv("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Gv(r,e){return(e.arrayValue?.values||[]).map((t=>ye.fromName(t.referenceValue)))}class BA extends vt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Lf(t)&&ol(t.arrayValue,this.value)}}class $A extends vt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ol(this.value.arrayValue,t)}}class qA extends vt{constructor(e,t){super(e,"not-in",t)}matches(e){if(ol(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ol(this.value.arrayValue,t)}}class WA extends vt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Lf(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>ol(this.value.arrayValue,s)))}}class HA{constructor(e,t=null,s=[],o=[],l=null,h=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=h,this.endAt=f,this.Te=null}}function Ly(r,e=null,t=[],s=[],o=null,l=null,h=null){return new HA(r,e,t,s,o,l,h)}function bf(r){const e=Ae(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>ef(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),yl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Do(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Do(s))).join(",")),e.Te=t}return e.Te}function Ff(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!bA(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!Wv(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!My(r.startAt,e.startAt)&&My(r.endAt,e.endAt)}function tf(r){return ye.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}class _l{constructor(e,t=null,s=[],o=[],l=null,h="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=h,this.startAt=f,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function GA(r,e,t,s,o,l,h,f){return new _l(r,e,t,s,o,l,h,f)}function Uf(r){return new _l(r)}function by(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function Kv(r){return r.collectionGroup!==null}function Qa(r){const e=Ae(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let f=new It(Lt.comparator);return h.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(f=f.add(y.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new yc(l,s))})),t.has(Lt.keyField().canonicalString())||e.Ie.push(new yc(Lt.keyField(),s))}return e.Ie}function lr(r){const e=Ae(r);return e.Ee||(e.Ee=KA(e,Qa(r))),e.Ee}function KA(r,e){if(r.limitType==="F")return Ly(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new yc(o.field,l)}));const t=r.endAt?new gc(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new gc(r.startAt.position,r.startAt.inclusive):null;return Ly(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function nf(r,e){const t=r.filters.concat([e]);return new _l(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function rf(r,e,t){return new _l(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Lc(r,e){return Ff(lr(r),lr(e))&&r.limitType===e.limitType}function Qv(r){return`${bf(lr(r))}|lt:${r.limitType}`}function _o(r){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>Hv(o))).join(", ")}]`),yl(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>Do(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>Do(o))).join(",")),`Target(${s})`})(lr(r))}; limitType=${r.limitType})`}function bc(r,e){return e.isFoundDocument()&&(function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):ye.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(r,e)&&(function(s,o){for(const l of Qa(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0})(r,e)&&(function(s,o){return!(s.startAt&&!(function(h,f,g){const y=Oy(h,f,g);return h.inclusive?y<=0:y<0})(s.startAt,Qa(s),o)||s.endAt&&!(function(h,f,g){const y=Oy(h,f,g);return h.inclusive?y>=0:y>0})(s.endAt,Qa(s),o))})(r,e)}function QA(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Xv(r){return(e,t)=>{let s=!1;for(const o of Qa(r)){const l=XA(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function XA(r,e,t){const s=r.field.isKeyField()?ye.comparator(e.key,t.key):(function(l,h,f){const g=h.data.field(l),y=f.data.field(l);return g!==null&&y!==null?xo(g,y):_e(42886)})(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return _e(19790,{direction:r.dir})}}class Rs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ui(this.inner,((t,s)=>{for(const[o,l]of s)e(o,l)}))}isEmpty(){return Vv(this.inner)}size(){return this.innerSize}}const YA=new st(ye.comparator);function Fr(){return YA}const Yv=new st(ye.comparator);function qa(...r){let e=Yv;for(const t of r)e=e.insert(t.key,t);return e}function Jv(r){let e=Yv;return r.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function gs(){return Xa()}function Zv(){return Xa()}function Xa(){return new Rs((r=>r.toString()),((r,e)=>r.isEqual(e)))}const JA=new st(ye.comparator),ZA=new It(ye.comparator);function Le(...r){let e=ZA;for(const t of r)e=e.add(t);return e}const eR=new It(Me);function tR(){return eR}function jf(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fc(e)?"-0":e}}function ew(r){return{integerValue:""+r}}function nR(r,e){return kA(e)?ew(e):jf(r,e)}class Fc{constructor(){this._=void 0}}function rR(r,e,t){return r instanceof al?(function(o,l){const h={fields:{[Lv]:{stringValue:Mv},[Fv]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Mf(l)&&(l=Mc(l)),l&&(h.fields[bv]=l),{mapValue:h}})(t,e):r instanceof ll?nw(r,e):r instanceof ul?rw(r,e):(function(o,l){const h=tw(o,l),f=Fy(h)+Fy(o.Ae);return Zd(h)&&Zd(o.Ae)?ew(f):jf(o.serializer,f)})(r,e)}function iR(r,e,t){return r instanceof ll?nw(r,e):r instanceof ul?rw(r,e):t}function tw(r,e){return r instanceof _c?(function(s){return Zd(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class al extends Fc{}class ll extends Fc{constructor(e){super(),this.elements=e}}function nw(r,e){const t=iw(e);for(const s of r.elements)t.some((o=>dr(o,s)))||t.push(s);return{arrayValue:{values:t}}}class ul extends Fc{constructor(e){super(),this.elements=e}}function rw(r,e){let t=iw(e);for(const s of r.elements)t=t.filter((o=>!dr(o,s)));return{arrayValue:{values:t}}}class _c extends Fc{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Fy(r){return ht(r.integerValue||r.doubleValue)}function iw(r){return Lf(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class sR{constructor(e,t){this.field=e,this.transform=t}}function oR(r,e){return r.field.isEqual(e.field)&&(function(s,o){return s instanceof ll&&o instanceof ll||s instanceof ul&&o instanceof ul?No(s.elements,o.elements,dr):s instanceof _c&&o instanceof _c?dr(s.Ae,o.Ae):s instanceof al&&o instanceof al})(r.transform,e.transform)}class aR{constructor(e,t){this.version=e,this.transformResults=t}}class bt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new bt}static exists(e){return new bt(void 0,e)}static updateTime(e){return new bt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function tc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Uc{}function sw(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new jc(r.key,bt.none()):new vl(r.key,r.data,bt.none());{const t=r.data,s=Qt.empty();let o=new It(Lt.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?s.delete(l):s.set(l,h),o=o.add(l)}return new ji(r.key,s,new pn(o.toArray()),bt.none())}}function lR(r,e,t){r instanceof vl?(function(o,l,h){const f=o.value.clone(),g=jy(o.fieldTransforms,l,h.transformResults);f.setAll(g),l.convertToFoundDocument(h.version,f).setHasCommittedMutations()})(r,e,t):r instanceof ji?(function(o,l,h){if(!tc(o.precondition,l))return void l.convertToUnknownDocument(h.version);const f=jy(o.fieldTransforms,l,h.transformResults),g=l.data;g.setAll(ow(o)),g.setAll(f),l.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(r,e,t):(function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function Ya(r,e,t,s){return r instanceof vl?(function(l,h,f,g){if(!tc(l.precondition,h))return f;const y=l.value.clone(),w=zy(l.fieldTransforms,g,h);return y.setAll(w),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null})(r,e,t,s):r instanceof ji?(function(l,h,f,g){if(!tc(l.precondition,h))return f;const y=zy(l.fieldTransforms,g,h),w=h.data;return w.setAll(ow(l)),w.setAll(y),h.convertToFoundDocument(h.version,w).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(r,e,t,s):(function(l,h,f){return tc(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):f})(r,e,t)}function uR(r,e){let t=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),l=tw(s.transform,o||null);l!=null&&(t===null&&(t=Qt.empty()),t.set(s.field,l))}return t||null}function Uy(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&No(s,o,((l,h)=>oR(l,h)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class vl extends Uc{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ji extends Uc{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function ow(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}})),e}function jy(r,e,t){const s=new Map;ze(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let o=0;o<t.length;o++){const l=r[o],h=l.transform,f=e.data.field(l.field);s.set(l.field,iR(h,f,t[o]))}return s}function zy(r,e,t){const s=new Map;for(const o of r){const l=o.transform,h=t.data.field(o.field);s.set(o.field,rR(l,h,e))}return s}class jc extends Uc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class aw extends Uc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class cR{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&lR(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Ya(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Ya(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=Zv();return this.mutations.forEach((o=>{const l=e.get(o.key),h=l.overlayedDocument;let f=this.applyToLocalView(h,l.mutatedFields);f=t.has(o.key)?null:f;const g=sw(h,f);g!==null&&s.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(Ee.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Le())}isEqual(e){return this.batchId===e.batchId&&No(this.mutations,e.mutations,((t,s)=>Uy(t,s)))&&No(this.baseMutations,e.baseMutations,((t,s)=>Uy(t,s)))}}class zf{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){ze(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return JA})();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,s[h].version);return new zf(e,t,s,o)}}class hR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class dR{constructor(e,t){this.count=e,this.unchangedNames=t}}var _t,je;function lw(r){switch(r){case W.OK:return _e(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return _e(15467,{code:r})}}function uw(r){if(r===void 0)return Lr("GRPC error has no .code"),W.UNKNOWN;switch(r){case _t.OK:return W.OK;case _t.CANCELLED:return W.CANCELLED;case _t.UNKNOWN:return W.UNKNOWN;case _t.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case _t.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case _t.INTERNAL:return W.INTERNAL;case _t.UNAVAILABLE:return W.UNAVAILABLE;case _t.UNAUTHENTICATED:return W.UNAUTHENTICATED;case _t.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case _t.NOT_FOUND:return W.NOT_FOUND;case _t.ALREADY_EXISTS:return W.ALREADY_EXISTS;case _t.PERMISSION_DENIED:return W.PERMISSION_DENIED;case _t.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case _t.ABORTED:return W.ABORTED;case _t.OUT_OF_RANGE:return W.OUT_OF_RANGE;case _t.UNIMPLEMENTED:return W.UNIMPLEMENTED;case _t.DATA_LOSS:return W.DATA_LOSS;default:return _e(39323,{code:r})}}(je=_t||(_t={}))[je.OK=0]="OK",je[je.CANCELLED=1]="CANCELLED",je[je.UNKNOWN=2]="UNKNOWN",je[je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",je[je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",je[je.NOT_FOUND=5]="NOT_FOUND",je[je.ALREADY_EXISTS=6]="ALREADY_EXISTS",je[je.PERMISSION_DENIED=7]="PERMISSION_DENIED",je[je.UNAUTHENTICATED=16]="UNAUTHENTICATED",je[je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",je[je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",je[je.ABORTED=10]="ABORTED",je[je.OUT_OF_RANGE=11]="OUT_OF_RANGE",je[je.UNIMPLEMENTED=12]="UNIMPLEMENTED",je[je.INTERNAL=13]="INTERNAL",je[je.UNAVAILABLE=14]="UNAVAILABLE",je[je.DATA_LOSS=15]="DATA_LOSS";function fR(){return new TextEncoder}const pR=new ki([4294967295,4294967295],0);function By(r){const e=fR().encode(r),t=new Tv;return t.update(e),new Uint8Array(t.digest())}function $y(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ki([t,s],0),new ki([o,l],0)]}class Bf{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Wa(`Invalid padding: ${t}`);if(s<0)throw new Wa(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Wa(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Wa(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ki.fromNumber(this.ge)}ye(e,t,s){let o=e.add(t.multiply(ki.fromNumber(s)));return o.compare(pR)===1&&(o=new ki([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=By(e),[s,o]=$y(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(s,o,l);if(!this.we(h))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new Bf(l,o,t);return s.forEach((f=>h.insert(f))),h}insert(e){if(this.ge===0)return;const t=By(e),[s,o]=$y(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(s,o,l);this.Se(h)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Wa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class zc{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,wl.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new zc(Ee.min(),o,new st(Me),Fr(),Le())}}class wl{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new wl(s,t,Le(),Le(),Le())}}class nc{constructor(e,t,s,o){this.be=e,this.removedTargetIds=t,this.key=s,this.De=o}}class cw{constructor(e,t){this.targetId=e,this.Ce=t}}class hw{constructor(e,t,s=Ft.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class qy{constructor(){this.ve=0,this.Fe=Wy(),this.Me=Ft.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Le(),t=Le(),s=Le();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:_e(38017,{changeType:l})}})),new wl(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=Wy()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ze(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class mR{constructor(e){this.Ge=e,this.ze=new Map,this.je=Fr(),this.Je=Hu(),this.He=Hu(),this.Ye=new st(Me)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:_e(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,s=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(tf(l))if(s===0){const h=new ye(l.path);this.et(t,h,Nt.newNoDocument(h,Ee.min()))}else ze(s===1,20013,{expectedCount:s});else{const h=this._t(t);if(h!==s){const f=this.ut(e),g=f?this.ct(f,e,h):1;if(g!==0){this.it(t);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let h,f;try{h=Oi(s).toUint8Array()}catch(g){if(g instanceof Ov)return ko("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{f=new Bf(h,o,l)}catch(g){return ko(g instanceof Wa?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return f.ge===0?null:f}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let o=0;return s.forEach((l=>{const h=this.Ge.ht(),f=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,h)=>{const f=this.ot(h);if(f){if(l.current&&tf(f.target)){const g=new ye(f.target.path);this.It(g).has(h)||this.Et(h,g)||this.et(h,g,Nt.newNoDocument(g,e))}l.Be&&(t.set(h,l.ke()),l.qe())}}));let s=Le();this.He.forEach(((l,h)=>{let f=!0;h.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(s=s.add(l))})),this.je.forEach(((l,h)=>h.setReadTime(e)));const o=new zc(e,t,this.Ye,this.je,s);return this.je=Fr(),this.Je=Hu(),this.He=Hu(),this.Ye=new st(Me),o}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new qy,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new It(Me),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new It(Me),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ue("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new qy),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Hu(){return new st(ye.comparator)}function Wy(){return new st(ye.comparator)}const gR={asc:"ASCENDING",desc:"DESCENDING"},yR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_R={and:"AND",or:"OR"};class vR{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function sf(r,e){return r.useProto3Json||yl(e)?e:{value:e}}function vc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dw(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function wR(r,e){return vc(r,e.toTimestamp())}function mn(r){return ze(!!r,49232),Ee.fromTimestamp((function(t){const s=Vi(t);return new tt(s.seconds,s.nanos)})(r))}function $f(r,e){return of(r,e).canonicalString()}function of(r,e){const t=(function(o){return new Qe(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function fw(r){const e=Qe.fromString(r);return ze(vw(e),10190,{key:e.toString()}),e}function wc(r,e){return $f(r.databaseId,e.path)}function Ja(r,e){const t=fw(e);if(t.get(1)!==r.databaseId.projectId)throw new se(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new se(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new ye(mw(t))}function pw(r,e){return $f(r.databaseId,e)}function ER(r){const e=fw(r);return e.length===4?Qe.emptyPath():mw(e)}function af(r){return new Qe(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function mw(r){return ze(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Hy(r,e,t){return{name:wc(r,e),fields:t.value.mapValue.fields}}function TR(r,e){return"found"in e?(function(s,o){ze(!!o.found,43571),o.found.name,o.found.updateTime;const l=Ja(s,o.found.name),h=mn(o.found.updateTime),f=o.found.createTime?mn(o.found.createTime):Ee.min(),g=new Qt({mapValue:{fields:o.found.fields}});return Nt.newFoundDocument(l,h,f,g)})(r,e):"missing"in e?(function(s,o){ze(!!o.missing,3894),ze(!!o.readTime,22933);const l=Ja(s,o.missing),h=mn(o.readTime);return Nt.newNoDocument(l,h)})(r,e):_e(7234,{result:e})}function IR(r,e){let t;if("targetChange"in e){e.targetChange;const s=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:_e(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(y,w){return y.useProto3Json?(ze(w===void 0||typeof w=="string",58123),Ft.fromBase64String(w||"")):(ze(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),Ft.fromUint8Array(w||new Uint8Array))})(r,e.targetChange.resumeToken),h=e.targetChange.cause,f=h&&(function(y){const w=y.code===void 0?W.UNKNOWN:uw(y.code);return new se(w,y.message||"")})(h);t=new hw(s,o,l,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Ja(r,s.document.name),l=mn(s.document.updateTime),h=s.document.createTime?mn(s.document.createTime):Ee.min(),f=new Qt({mapValue:{fields:s.document.fields}}),g=Nt.newFoundDocument(o,l,h,f),y=s.targetIds||[],w=s.removedTargetIds||[];t=new nc(y,w,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Ja(r,s.document),l=s.readTime?mn(s.readTime):Ee.min(),h=Nt.newNoDocument(o,l),f=s.removedTargetIds||[];t=new nc([],f,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Ja(r,s.document),l=s.removedTargetIds||[];t=new nc([],l,o,null)}else{if(!("filter"in e))return _e(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,h=new dR(o,l),f=s.targetId;t=new cw(f,h)}}return t}function gw(r,e){let t;if(e instanceof vl)t={update:Hy(r,e.key,e.value)};else if(e instanceof jc)t={delete:wc(r,e.key)};else if(e instanceof ji)t={update:Hy(r,e.key,e.data),updateMask:DR(e.fieldMask)};else{if(!(e instanceof aw))return _e(16599,{Vt:e.type});t={verify:wc(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,h){const f=h.transform;if(f instanceof al)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof ll)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof ul)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof _c)return{fieldPath:h.field.canonicalString(),increment:f.Ae};throw _e(20930,{transform:h.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:wR(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:_e(27497)})(r,e.precondition)),t}function SR(r,e){return r&&r.length>0?(ze(e!==void 0,14353),r.map((t=>(function(o,l){let h=o.updateTime?mn(o.updateTime):mn(l);return h.isEqual(Ee.min())&&(h=mn(l)),new aR(h,o.transformResults||[])})(t,e)))):[]}function AR(r,e){return{documents:[pw(r,e.path)]}}function RR(r,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=pw(r,o);const l=(function(y){if(y.length!==0)return _w(Un.create(y,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const h=(function(y){if(y.length!==0)return y.map((w=>(function(A){return{field:vo(A.field),direction:kR(A.dir)}})(w)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const f=sf(r,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:o}}function CR(r){let e=ER(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){ze(s===1,65062);const w=t.from[0];w.allDescendants?o=w.collectionId:e=e.child(w.collectionId)}let l=[];t.where&&(l=(function(E){const A=yw(E);return A instanceof Un&&qv(A)?A.getFilters():[A]})(t.where));let h=[];t.orderBy&&(h=(function(E){return E.map((A=>(function(H){return new yc(wo(H.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(H.direction))})(A)))})(t.orderBy));let f=null;t.limit&&(f=(function(E){let A;return A=typeof E=="object"?E.value:E,yl(A)?null:A})(t.limit));let g=null;t.startAt&&(g=(function(E){const A=!!E.before,b=E.values||[];return new gc(b,A)})(t.startAt));let y=null;return t.endAt&&(y=(function(E){const A=!E.before,b=E.values||[];return new gc(b,A)})(t.endAt)),GA(e,o,h,l,f,"F",g,y)}function PR(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function yw(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=wo(t.unaryFilter.field);return vt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=wo(t.unaryFilter.field);return vt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=wo(t.unaryFilter.field);return vt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=wo(t.unaryFilter.field);return vt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _e(61313);default:return _e(60726)}})(r):r.fieldFilter!==void 0?(function(t){return vt.create(wo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _e(58110);default:return _e(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return Un.create(t.compositeFilter.filters.map((s=>yw(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return _e(1026)}})(t.compositeFilter.op))})(r):_e(30097,{filter:r})}function kR(r){return gR[r]}function NR(r){return yR[r]}function xR(r){return _R[r]}function vo(r){return{fieldPath:r.canonicalString()}}function wo(r){return Lt.fromServerFormat(r.fieldPath)}function _w(r){return r instanceof vt?(function(t){if(t.op==="=="){if(Vy(t.value))return{unaryFilter:{field:vo(t.field),op:"IS_NAN"}};if(Dy(t.value))return{unaryFilter:{field:vo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Vy(t.value))return{unaryFilter:{field:vo(t.field),op:"IS_NOT_NAN"}};if(Dy(t.value))return{unaryFilter:{field:vo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vo(t.field),op:NR(t.op),value:t.value}}})(r):r instanceof Un?(function(t){const s=t.getFilters().map((o=>_w(o)));return s.length===1?s[0]:{compositeFilter:{op:xR(t.op),filters:s}}})(r):_e(54877,{filter:r})}function DR(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function vw(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}class Ii{constructor(e,t,s,o,l=Ee.min(),h=Ee.min(),f=Ft.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new Ii(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ii(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ii(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ii(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class VR{constructor(e){this.yt=e}}function OR(r){const e=CR({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?rf(e,e.limit,"L"):e}class MR{constructor(){this.Cn=new LR}addToCollectionParentIndex(e,t){return this.Cn.add(t),G.resolve()}getCollectionParents(e,t){return G.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return G.resolve()}deleteFieldIndex(e,t){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,t){return G.resolve()}getDocumentsMatchingTarget(e,t){return G.resolve(null)}getIndexType(e,t){return G.resolve(0)}getFieldIndexes(e,t){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,t){return G.resolve(Di.min())}getMinOffsetFromCollectionGroup(e,t){return G.resolve(Di.min())}updateCollectionGroup(e,t,s){return G.resolve()}updateIndexEntries(e,t){return G.resolve()}}class LR{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new It(Qe.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new It(Qe.comparator)).toArray()}}const Gy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ww=41943040;class nn{static withCacheSize(e){return new nn(e,nn.DEFAULT_COLLECTION_PERCENTILE,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}nn.DEFAULT_COLLECTION_PERCENTILE=10,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nn.DEFAULT=new nn(ww,nn.DEFAULT_COLLECTION_PERCENTILE,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nn.DISABLED=new nn(-1,0,0);class Vo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Vo(0)}static cr(){return new Vo(-1)}}const Ky="LruGarbageCollector",bR=1048576;function Qy([r,e],[t,s]){const o=Me(r,t);return o===0?Me(e,s):o}class FR{constructor(e){this.Ir=e,this.buffer=new It(Qy),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Qy(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class UR{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ue(Ky,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Bo(t)?ue(Ky,"Ignoring IndexedDB error during garbage collection: ",t):await zo(t)}await this.Vr(3e5)}))}}class jR{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return G.resolve(Oc.ce);const s=new FR(t);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(Gy)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Gy):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,o,l,h,f,g,y;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,h=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(s=E,f=Date.now(),this.removeTargets(e,s,t)))).next((E=>(l=E,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((E=>(y=Date.now(),yo()<=Oe.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-w}ms
	Determined least recently used ${o} in `+(f-h)+`ms
	Removed ${l} targets in `+(g-f)+`ms
	Removed ${E} documents in `+(y-g)+`ms
Total Duration: ${y-w}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:E}))))}}function zR(r,e){return new jR(r,e)}class BR{constructor(){this.changes=new Rs((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Nt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?G.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class $R{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class qR{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&Ya(s.mutation,o,pn.empty(),tt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,Le()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=Le()){const o=gs();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((l=>{let h=qa();return l.forEach(((f,g)=>{h=h.insert(f,g.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const s=gs();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,Le())))}populateOverlays(e,t,s){const o=[];return s.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((h,f)=>{t.set(h,f)}))}))}computeViews(e,t,s,o){let l=Fr();const h=Xa(),f=(function(){return Xa()})();return t.forEach(((g,y)=>{const w=s.get(y.key);o.has(y.key)&&(w===void 0||w.mutation instanceof ji)?l=l.insert(y.key,y):w!==void 0?(h.set(y.key,w.mutation.getFieldMask()),Ya(w.mutation,y,w.mutation.getFieldMask(),tt.now())):h.set(y.key,pn.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((y,w)=>h.set(y,w))),t.forEach(((y,w)=>f.set(y,new $R(w,h.get(y)??null)))),f)))}recalculateAndSaveOverlays(e,t){const s=Xa();let o=new st(((h,f)=>h-f)),l=Le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const f of h)f.keys().forEach((g=>{const y=t.get(g);if(y===null)return;let w=s.get(g)||pn.empty();w=f.applyToLocalView(y,w),s.set(g,w);const E=(o.get(f.batchId)||Le()).add(g);o=o.insert(f.batchId,E)}))})).next((()=>{const h=[],f=o.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),y=g.key,w=g.value,E=Zv();w.forEach((A=>{if(!l.has(A)){const b=sw(t.get(A),s.get(A));b!==null&&E.set(A,b),l=l.add(A)}})),h.push(this.documentOverlayCache.saveOverlays(e,y,E))}return G.waitFor(h)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return(function(h){return ye.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Kv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):G.resolve(gs());let f=rl,g=l;return h.next((y=>G.forEach(y,((w,E)=>(f<E.largestBatchId&&(f=E.largestBatchId),l.get(w)?G.resolve():this.remoteDocumentCache.getEntry(e,w).next((A=>{g=g.insert(w,A)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,g,y,Le()))).next((w=>({batchId:f,changes:Jv(w)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ye(t)).next((s=>{let o=qa();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let h=qa();return this.indexManager.getCollectionParents(e,l).next((f=>G.forEach(f,(g=>{const y=(function(E,A){return new _l(A,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,s,o).next((w=>{w.forEach(((E,A)=>{h=h.insert(E,A)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o)))).next((h=>{l.forEach(((g,y)=>{const w=y.getKey();h.get(w)===null&&(h=h.insert(w,Nt.newInvalidDocument(w)))}));let f=qa();return h.forEach(((g,y)=>{const w=l.get(g);w!==void 0&&Ya(w.mutation,y,pn.empty(),tt.now()),bc(t,y)&&(f=f.insert(g,y))})),f}))}}class WR{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return G.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:mn(o.createTime)}})(t)),G.resolve()}getNamedQuery(e,t){return G.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:OR(o.bundledQuery),readTime:mn(o.readTime)}})(t)),G.resolve()}}class HR{constructor(){this.overlays=new st(ye.comparator),this.qr=new Map}getOverlay(e,t){return G.resolve(this.overlays.get(t))}getOverlays(e,t){const s=gs();return G.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&s.set(o,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,l)=>{this.St(e,t,l)})),G.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),G.resolve()}getOverlaysForCollection(e,t,s){const o=gs(),l=t.length+1,h=new ye(t.child("")),f=this.overlays.getIteratorFrom(h);for(;f.hasNext();){const g=f.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&g.largestBatchId>s&&o.set(g.getKey(),g)}return G.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new st(((y,w)=>y-w));const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>s){let w=l.get(y.largestBatchId);w===null&&(w=gs(),l=l.insert(y.largestBatchId,w)),w.set(y.getKey(),y)}}const f=gs(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,w)=>f.set(y,w))),!(f.size()>=o)););return G.resolve(f)}St(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new hR(t,s));let l=this.qr.get(t);l===void 0&&(l=Le(),this.qr.set(t,l)),this.qr.set(t,l.add(s.key))}}class GR{constructor(){this.sessionToken=Ft.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,G.resolve()}}class qf{constructor(){this.Qr=new It(kt.$r),this.Ur=new It(kt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new kt(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new kt(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new ye(new Qe([])),s=new kt(t,e),o=new kt(t,e+1),l=[];return this.Ur.forEachInRange([s,o],(h=>{this.Gr(h),l.push(h.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ye(new Qe([])),s=new kt(t,e),o=new kt(t,e+1);let l=Le();return this.Ur.forEachInRange([s,o],(h=>{l=l.add(h.key)})),l}containsKey(e){const t=new kt(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class kt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ye.comparator(e.key,t.key)||Me(e.Yr,t.Yr)}static Kr(e,t){return Me(e.Yr,t.Yr)||ye.comparator(e.key,t.key)}}class KR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new It(kt.$r)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new cR(l,t,s,o);this.mutationQueue.push(h);for(const f of o)this.Zr=this.Zr.add(new kt(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return G.resolve(h)}lookupMutationBatch(e,t){return G.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.ei(s),l=o<0?0:o;return G.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?Of:this.tr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new kt(t,0),o=new kt(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,o],(h=>{const f=this.Xr(h.Yr);l.push(f)})),G.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new It(Me);return t.forEach((o=>{const l=new kt(o,0),h=new kt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,h],(f=>{s=s.add(f.Yr)}))})),G.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;ye.isDocumentKey(l)||(l=l.child(""));const h=new kt(new ye(l),0);let f=new It(Me);return this.Zr.forEachWhile((g=>{const y=g.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(f=f.add(g.Yr)),!0)}),h),G.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){ze(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return G.forEach(t.mutations,(o=>{const l=new kt(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new kt(t,0),o=this.Zr.firstAfterOrEqual(s);return G.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class QR{constructor(e){this.ri=e,this.docs=(function(){return new st(ye.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,h=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return G.resolve(s?s.document.mutableCopy():Nt.newInvalidDocument(t))}getEntries(e,t){let s=Fr();return t.forEach((o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():Nt.newInvalidDocument(o))})),G.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=Fr();const h=t.path,f=new ye(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:y,value:{document:w}}=g.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||AA(SA(w),s)<=0||(o.has(w.key)||bc(t,w))&&(l=l.insert(w.key,w.mutableCopy()))}return G.resolve(l)}getAllFromCollectionGroup(e,t,s,o){_e(9500)}ii(e,t){return G.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new XR(this)}getSize(e){return G.resolve(this.size)}}class XR extends BR{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),G.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class YR{constructor(e){this.persistence=e,this.si=new Rs((t=>bf(t)),Ff),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.oi=0,this._i=new qf,this.targetCount=0,this.ai=Vo.ur()}forEachTarget(e,t){return this.si.forEach(((s,o)=>t(o))),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),G.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Vo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,G.resolve()}updateTargetData(e,t){return this.Pr(t),G.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.si.forEach(((h,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.si.delete(h),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)})),G.waitFor(l).next((()=>o))}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return G.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),G.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((h=>{l.push(o.markPotentiallyOrphaned(e,h))})),G.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),G.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return G.resolve(s)}containsKey(e,t){return G.resolve(this._i.containsKey(t))}}class Ew{constructor(e,t){this.ui={},this.overlays={},this.ci=new Oc(0),this.li=!1,this.li=!0,this.hi=new GR,this.referenceDelegate=e(this),this.Pi=new YR(this),this.indexManager=new MR,this.remoteDocumentCache=(function(o){return new QR(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new VR(t),this.Ii=new WR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new HR,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new KR(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){ue("MemoryPersistence","Starting transaction:",e);const o=new JR(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ai(e,t){return G.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class JR extends CA{constructor(e){super(),this.currentSequenceNumber=e}}class Wf{constructor(e){this.persistence=e,this.Ri=new qf,this.Vi=null}static mi(e){return new Wf(e)}get fi(){if(this.Vi)return this.Vi;throw _e(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),G.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),G.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),G.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.fi,(s=>{const o=ye.fromPath(s);return this.gi(e,o).next((l=>{l||t.removeEntry(o,Ee.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return G.or([()=>G.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Ec{constructor(e,t){this.persistence=e,this.pi=new Rs((s=>NA(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=zR(this,t)}static mi(e,t){return new Ec(e,t)}Ei(){}di(e){return G.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return G.forEach(this.pi,((s,o)=>this.br(e,s,o).next((l=>l?G.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,(h=>this.br(e,h,t).next((f=>{f||(s++,l.removeEntry(h,Ee.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),G.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),G.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),G.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Zu(e.data.value)),t}br(e,t,s){return G.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return G.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Hf{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=o}static As(e,t){let s=Le(),o=Le();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Hf(e,t.fromCache,s,o)}}class ZR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class eC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return G0()?8:PA(Ht())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.ys(e,t).next((h=>{l.result=h})).next((()=>{if(!l.result)return this.ws(e,t,o,s).next((h=>{l.result=h}))})).next((()=>{if(l.result)return;const h=new ZR;return this.Ss(e,t,h).next((f=>{if(l.result=f,this.Vs)return this.bs(e,t,h,f.size)}))})).next((()=>l.result))}bs(e,t,s,o){return s.documentReadCount<this.fs?(yo()<=Oe.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",_o(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),G.resolve()):(yo()<=Oe.DEBUG&&ue("QueryEngine","Query:",_o(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(yo()<=Oe.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",_o(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,lr(t))):G.resolve())}ys(e,t){if(by(t))return G.resolve(null);let s=lr(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=rf(t,null,"F"),s=lr(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const h=Le(...l);return this.ps.getDocuments(e,h).next((f=>this.indexManager.getMinOffset(e,s).next((g=>{const y=this.Ds(t,f);return this.Cs(t,y,h,g.readTime)?this.ys(e,rf(t,null,"F")):this.vs(e,y,t,g)}))))})))))}ws(e,t,s,o){return by(t)||o.isEqual(Ee.min())?G.resolve(null):this.ps.getDocuments(e,s).next((l=>{const h=this.Ds(t,l);return this.Cs(t,h,s,o)?G.resolve(null):(yo()<=Oe.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),_o(t)),this.vs(e,h,t,IA(o,rl)).next((f=>f)))}))}Ds(e,t){let s=new It(Xv(e));return t.forEach(((o,l)=>{bc(e,l)&&(s=s.add(l))})),s}Cs(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,s){return yo()<=Oe.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",_o(t)),this.ps.getDocumentsMatchingQuery(e,t,Di.min(),s)}vs(e,t,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((l=>(t.forEach((h=>{l=l.insert(h.key,h)})),l)))}}const Gf="LocalStore",tC=3e8;class nC{constructor(e,t,s,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new st(Me),this.xs=new Rs((l=>bf(l)),Ff),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new qR(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function rC(r,e,t,s){return new nC(r,e,t,s)}async function Tw(r,e){const t=Ae(r);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((l=>(o=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const h=[],f=[];let g=Le();for(const y of o){h.push(y.batchId);for(const w of y.mutations)g=g.add(w.key)}for(const y of l){f.push(y.batchId);for(const w of y.mutations)g=g.add(w.key)}return t.localDocuments.getDocuments(s,g).next((y=>({Ls:y,removedBatchIds:h,addedBatchIds:f})))}))}))}function iC(r,e){const t=Ae(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,g,y,w){const E=y.batch,A=E.keys();let b=G.resolve();return A.forEach((H=>{b=b.next((()=>w.getEntry(g,H))).next((q=>{const U=y.docVersions.get(H);ze(U!==null,48541),q.version.compareTo(U)<0&&(E.applyToRemoteDocument(q,y),q.isValidDocument()&&(q.setReadTime(y.commitVersion),w.addEntry(q)))}))})),b.next((()=>f.mutationQueue.removeMutationBatch(g,E)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(f){let g=Le();for(let y=0;y<f.mutationResults.length;++y)f.mutationResults[y].transformResults.length>0&&(g=g.add(f.batch.mutations[y].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function Iw(r){const e=Ae(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function sC(r,e){const t=Ae(r),s=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const h=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const f=[];e.targetChanges.forEach(((w,E)=>{const A=o.get(E);if(!A)return;f.push(t.Pi.removeMatchingKeys(l,w.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(l,w.addedDocuments,E))));let b=A.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?b=b.withResumeToken(Ft.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):w.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(w.resumeToken,s)),o=o.insert(E,b),(function(q,U,re){return q.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=tC?!0:re.addedDocuments.size+re.modifiedDocuments.size+re.removedDocuments.size>0})(A,b,w)&&f.push(t.Pi.updateTargetData(l,b))}));let g=Fr(),y=Le();if(e.documentUpdates.forEach((w=>{e.resolvedLimboDocuments.has(w)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,w))})),f.push(oC(l,h,e.documentUpdates).next((w=>{g=w.ks,y=w.qs}))),!s.isEqual(Ee.min())){const w=t.Pi.getLastRemoteSnapshotVersion(l).next((E=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));f.push(w)}return G.waitFor(f).next((()=>h.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,y))).next((()=>g))})).then((l=>(t.Ms=o,l)))}function oC(r,e,t){let s=Le(),o=Le();return t.forEach((l=>s=s.add(l))),e.getEntries(r,s).next((l=>{let h=Fr();return t.forEach(((f,g)=>{const y=l.get(f);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(f)),g.isNoDocument()&&g.version.isEqual(Ee.min())?(e.removeEntry(f,g.readTime),h=h.insert(f,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),h=h.insert(f,g)):ue(Gf,"Ignoring outdated watch update for ",f,". Current version:",y.version," Watch version:",g.version)})),{ks:h,qs:o}}))}function aC(r,e){const t=Ae(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Of),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function lC(r,e){const t=Ae(r);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.Pi.getTargetData(s,e).next((l=>l?(o=l,G.resolve(o)):t.Pi.allocateTargetId(s).next((h=>(o=new Ii(e,h,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function lf(r,e,t){const s=Ae(r),o=s.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(h=>s.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!Bo(h))throw h;ue(Gf,`Failed to update sequence numbers for target ${e}: ${h}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function Xy(r,e,t){const s=Ae(r);let o=Ee.min(),l=Le();return s.persistence.runTransaction("Execute query","readwrite",(h=>(function(g,y,w){const E=Ae(g),A=E.xs.get(w);return A!==void 0?G.resolve(E.Ms.get(A)):E.Pi.getTargetData(y,w)})(s,h,lr(e)).next((f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(h,f.targetId).next((g=>{l=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(h,e,t?o:Ee.min(),t?l:Le()))).next((f=>(uC(s,QA(e),f),{documents:f,Qs:l})))))}function uC(r,e,t){let s=r.Os.get(e)||Ee.min();t.forEach(((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),r.Os.set(e,s)}class Yy{constructor(){this.activeTargetIds=tR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class cC{constructor(){this.Mo=new Yy,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Yy,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class hC{Oo(e){}shutdown(){}}const Jy="ConnectivityMonitor";class Zy{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ue(Jy,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ue(Jy,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Gu=null;function uf(){return Gu===null?Gu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Gu++,"0x"+Gu.toString(16)}const Vd="RestConnection",dC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class fC{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===pc?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,t,s,o,l){const h=uf(),f=this.zo(e,t.toUriEncodedString());ue(Vd,`Sending RPC '${e}' ${h}:`,f,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,l);const{host:y}=new URL(f),w=bo(y);return this.Jo(e,f,g,s,w).then((E=>(ue(Vd,`Received RPC '${e}' ${h}: `,E),E)),(E=>{throw ko(Vd,`RPC '${e}' ${h} failed with error: `,E,"url: ",f,"request:",s),E}))}Ho(e,t,s,o,l,h){return this.Go(e,t,s,o,l)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+jo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),s&&s.headers.forEach(((o,l)=>e[l]=o))}zo(e,t){const s=dC[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}class pC{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const qt="WebChannelConnection";class mC extends fC{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,o,l){const h=uf();return new Promise(((f,g)=>{const y=new Iv;y.setWithCredentials(!0),y.listenOnce(Sv.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Ju.NO_ERROR:const E=y.getResponseJson();ue(qt,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(E)),f(E);break;case Ju.TIMEOUT:ue(qt,`RPC '${e}' ${h} timed out`),g(new se(W.DEADLINE_EXCEEDED,"Request time out"));break;case Ju.HTTP_ERROR:const A=y.getStatus();if(ue(qt,`RPC '${e}' ${h} failed with status:`,A,"response text:",y.getResponseText()),A>0){let b=y.getResponseJson();Array.isArray(b)&&(b=b[0]);const H=b?.error;if(H&&H.status&&H.message){const q=(function(re){const oe=re.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(oe)>=0?oe:W.UNKNOWN})(H.status);g(new se(q,H.message))}else g(new se(W.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new se(W.UNAVAILABLE,"Connection failed."));break;default:_e(9055,{l_:e,streamId:h,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{ue(qt,`RPC '${e}' ${h} completed.`)}}));const w=JSON.stringify(o);ue(qt,`RPC '${e}' ${h} sending request:`,o),y.send(t,"POST",w,s,15)}))}T_(e,t,s){const o=uf(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=Cv(),f=Rv(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const w=l.join("");ue(qt,`Creating RPC '${e}' stream ${o}: ${w}`,g);const E=h.createWebChannel(w,g);this.I_(E);let A=!1,b=!1;const H=new pC({Yo:U=>{b?ue(qt,`Not sending because RPC '${e}' stream ${o} is closed:`,U):(A||(ue(qt,`Opening RPC '${e}' stream ${o} transport.`),E.open(),A=!0),ue(qt,`RPC '${e}' stream ${o} sending:`,U),E.send(U))},Zo:()=>E.close()}),q=(U,re,oe)=>{U.listen(re,(j=>{try{oe(j)}catch(ee){setTimeout((()=>{throw ee}),0)}}))};return q(E,$a.EventType.OPEN,(()=>{b||(ue(qt,`RPC '${e}' stream ${o} transport opened.`),H.o_())})),q(E,$a.EventType.CLOSE,(()=>{b||(b=!0,ue(qt,`RPC '${e}' stream ${o} transport closed`),H.a_(),this.E_(E))})),q(E,$a.EventType.ERROR,(U=>{b||(b=!0,ko(qt,`RPC '${e}' stream ${o} transport errored. Name:`,U.name,"Message:",U.message),H.a_(new se(W.UNAVAILABLE,"The operation could not be completed")))})),q(E,$a.EventType.MESSAGE,(U=>{if(!b){const re=U.data[0];ze(!!re,16349);const oe=re,j=oe?.error||oe[0]?.error;if(j){ue(qt,`RPC '${e}' stream ${o} received error:`,j);const ee=j.status;let ie=(function(I){const C=_t[I];if(C!==void 0)return uw(C)})(ee),ne=j.message;ie===void 0&&(ie=W.INTERNAL,ne="Unknown error status: "+ee+" with message "+j.message),b=!0,H.a_(new se(ie,ne)),E.close()}else ue(qt,`RPC '${e}' stream ${o} received:`,re),H.u_(re)}})),q(f,Av.STAT_EVENT,(U=>{U.stat===Xd.PROXY?ue(qt,`RPC '${e}' stream ${o} detected buffering proxy`):U.stat===Xd.NOPROXY&&ue(qt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{H.__()}),0),H}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Od(){return typeof document<"u"?document:null}function Bc(r){return new vR(r,!0)}class Kf{constructor(e,t,s=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-s);o>0&&ue("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const e_="PersistentStream";class Sw{constructor(e,t,s,o,l,h,f,g){this.Mi=e,this.S_=s,this.b_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Kf(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===W.RESOURCE_EXHAUSTED?(Lr(t.toString()),Lr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===t&&this.G_(s,o)}),(s=>{e((()=>{const o=new se(W.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ue(e_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ue(e_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class gC extends Sw{constructor(e,t,s,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,h),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=IR(this.serializer,e),s=(function(l){if(!("targetChange"in l))return Ee.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Ee.min():h.readTime?mn(h.readTime):Ee.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=af(this.serializer),t.addTarget=(function(l,h){let f;const g=h.target;if(f=tf(g)?{documents:AR(l,g)}:{query:RR(l,g).ft},f.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){f.resumeToken=dw(l,h.resumeToken);const y=sf(l,h.expectedCount);y!==null&&(f.expectedCount=y)}else if(h.snapshotVersion.compareTo(Ee.min())>0){f.readTime=vc(l,h.snapshotVersion.toTimestamp());const y=sf(l,h.expectedCount);y!==null&&(f.expectedCount=y)}return f})(this.serializer,e);const s=PR(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=af(this.serializer),t.removeTarget=e,this.q_(t)}}class yC extends Sw{constructor(e,t,s,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,h),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ze(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ze(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ze(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=SR(e.writeResults,e.commitTime),s=mn(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=af(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>gw(this.serializer,s)))};this.q_(t)}}class _C{}class vC extends _C{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new se(W.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Go(e,of(t,s),o,l,h))).catch((l=>{throw l.name==="FirebaseError"?(l.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new se(W.UNKNOWN,l.toString())}))}Ho(e,t,s,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,f])=>this.connection.Ho(e,of(t,s),o,h,f,l))).catch((h=>{throw h.name==="FirebaseError"?(h.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new se(W.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class wC{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Lr(t),this.aa=!1):ue("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Ts="RemoteStore";class EC{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((h=>{s.enqueueAndForget((async()=>{Cs(this)&&(ue(Ts,"Restarting streams for network reachability change."),await(async function(g){const y=Ae(g);y.Ea.add(4),await El(y),y.Ra.set("Unknown"),y.Ea.delete(4),await $c(y)})(this))}))})),this.Ra=new wC(s,o)}}async function $c(r){if(Cs(r))for(const e of r.da)await e(!0)}async function El(r){for(const e of r.da)await e(!1)}function Aw(r,e){const t=Ae(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Jf(t)?Yf(t):$o(t).O_()&&Xf(t,e))}function Qf(r,e){const t=Ae(r),s=$o(t);t.Ia.delete(e),s.O_()&&Rw(t,e),t.Ia.size===0&&(s.O_()?s.L_():Cs(t)&&t.Ra.set("Unknown"))}function Xf(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}$o(r).Y_(e)}function Rw(r,e){r.Va.Ue(e),$o(r).Z_(e)}function Yf(r){r.Va=new mR({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),$o(r).start(),r.Ra.ua()}function Jf(r){return Cs(r)&&!$o(r).x_()&&r.Ia.size>0}function Cs(r){return Ae(r).Ea.size===0}function Cw(r){r.Va=void 0}async function TC(r){r.Ra.set("Online")}async function IC(r){r.Ia.forEach(((e,t)=>{Xf(r,e)}))}async function SC(r,e){Cw(r),Jf(r)?(r.Ra.ha(e),Yf(r)):r.Ra.set("Unknown")}async function AC(r,e,t){if(r.Ra.set("Online"),e instanceof hw&&e.state===2&&e.cause)try{await(async function(o,l){const h=l.cause;for(const f of l.targetIds)o.Ia.has(f)&&(await o.remoteSyncer.rejectListen(f,h),o.Ia.delete(f),o.Va.removeTarget(f))})(r,e)}catch(s){ue(Ts,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Tc(r,s)}else if(e instanceof nc?r.Va.Ze(e):e instanceof cw?r.Va.st(e):r.Va.tt(e),!t.isEqual(Ee.min()))try{const s=await Iw(r.localStore);t.compareTo(s)>=0&&await(function(l,h){const f=l.Va.Tt(h);return f.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const w=l.Ia.get(y);w&&l.Ia.set(y,w.withResumeToken(g.resumeToken,h))}})),f.targetMismatches.forEach(((g,y)=>{const w=l.Ia.get(g);if(!w)return;l.Ia.set(g,w.withResumeToken(Ft.EMPTY_BYTE_STRING,w.snapshotVersion)),Rw(l,g);const E=new Ii(w.target,g,y,w.sequenceNumber);Xf(l,E)})),l.remoteSyncer.applyRemoteEvent(f)})(r,t)}catch(s){ue(Ts,"Failed to raise snapshot:",s),await Tc(r,s)}}async function Tc(r,e,t){if(!Bo(e))throw e;r.Ea.add(1),await El(r),r.Ra.set("Offline"),t||(t=()=>Iw(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ue(Ts,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await $c(r)}))}function Pw(r,e){return e().catch((t=>Tc(r,t,e)))}async function qc(r){const e=Ae(r),t=Li(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Of;for(;RC(e);)try{const o=await aC(e.localStore,s);if(o===null){e.Ta.length===0&&t.L_();break}s=o.batchId,CC(e,o)}catch(o){await Tc(e,o)}kw(e)&&Nw(e)}function RC(r){return Cs(r)&&r.Ta.length<10}function CC(r,e){r.Ta.push(e);const t=Li(r);t.O_()&&t.X_&&t.ea(e.mutations)}function kw(r){return Cs(r)&&!Li(r).x_()&&r.Ta.length>0}function Nw(r){Li(r).start()}async function PC(r){Li(r).ra()}async function kC(r){const e=Li(r);for(const t of r.Ta)e.ea(t.mutations)}async function NC(r,e,t){const s=r.Ta.shift(),o=zf.from(s,e,t);await Pw(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await qc(r)}async function xC(r,e){e&&Li(r).X_&&await(async function(s,o){if((function(h){return lw(h)&&h!==W.ABORTED})(o.code)){const l=s.Ta.shift();Li(s).B_(),await Pw(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o))),await qc(s)}})(r,e),kw(r)&&Nw(r)}async function t_(r,e){const t=Ae(r);t.asyncQueue.verifyOperationInProgress(),ue(Ts,"RemoteStore received new credentials");const s=Cs(t);t.Ea.add(3),await El(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await $c(t)}async function DC(r,e){const t=Ae(r);e?(t.Ea.delete(2),await $c(t)):e||(t.Ea.add(2),await El(t),t.Ra.set("Unknown"))}function $o(r){return r.ma||(r.ma=(function(t,s,o){const l=Ae(t);return l.sa(),new gC(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Xo:TC.bind(null,r),t_:IC.bind(null,r),r_:SC.bind(null,r),H_:AC.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),Jf(r)?Yf(r):r.Ra.set("Unknown")):(await r.ma.stop(),Cw(r))}))),r.ma}function Li(r){return r.fa||(r.fa=(function(t,s,o){const l=Ae(t);return l.sa(),new yC(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:PC.bind(null,r),r_:xC.bind(null,r),ta:kC.bind(null,r),na:NC.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await qc(r)):(await r.fa.stop(),r.Ta.length>0&&(ue(Ts,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class Zf{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new ar,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const h=Date.now()+s,f=new Zf(e,t,h,o,l);return f.start(s),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ep(r,e){if(Lr("AsyncQueue",`${e}: ${r}`),Bo(r))return new se(W.UNAVAILABLE,`${e}: ${r}`);throw r}class Ao{static emptySet(e){return new Ao(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||ye.comparator(t.key,s.key):(t,s)=>ye.comparator(t.key,s.key),this.keyedMap=qa(),this.sortedSet=new st(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ao)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Ao;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class n_{constructor(){this.ga=new st(ye.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):_e(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class Oo{constructor(e,t,s,o,l,h,f,g,y){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,t,s,o,l){const h=[];return t.forEach((f=>{h.push({type:0,doc:f})})),new Oo(e,t,Ao.emptySet(t),h,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}class VC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class OC{constructor(){this.queries=r_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const o=Ae(t),l=o.queries;o.queries=r_(),l.forEach(((h,f)=>{for(const g of f.Sa)g.onError(s)}))})(this,new se(W.ABORTED,"Firestore shutting down"))}}function r_(){return new Rs((r=>Qv(r)),Lc)}async function xw(r,e){const t=Ae(r);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.ba()&&e.Da()&&(s=2):(l=new VC,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const f=ep(h,`Initialization of query '${_o(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&tp(t)}async function Dw(r,e){const t=Ae(r),s=e.query;let o=3;const l=t.queries.get(s);if(l){const h=l.Sa.indexOf(e);h>=0&&(l.Sa.splice(h,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function MC(r,e){const t=Ae(r);let s=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const f of h.Sa)f.Fa(o)&&(s=!0);h.wa=o}}s&&tp(t)}function LC(r,e,t){const s=Ae(r),o=s.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);s.queries.delete(e)}function tp(r){r.Ca.forEach((e=>{e.next()}))}var cf,i_;(i_=cf||(cf={})).Ma="default",i_.Cache="cache";class Vw{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Oo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Oo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==cf.Cache}}class Ow{constructor(e){this.key=e}}class Mw{constructor(e){this.key=e}}class bC{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Le(),this.mutatedKeys=Le(),this.eu=Xv(e),this.tu=new Ao(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new n_,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,f=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((w,E)=>{const A=o.get(w),b=bc(this.query,E)?E:null,H=!!A&&this.mutatedKeys.has(A.key),q=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let U=!1;A&&b?A.data.isEqual(b.data)?H!==q&&(s.track({type:3,doc:b}),U=!0):this.su(A,b)||(s.track({type:2,doc:b}),U=!0,(g&&this.eu(b,g)>0||y&&this.eu(b,y)<0)&&(f=!0)):!A&&b?(s.track({type:0,doc:b}),U=!0):A&&!b&&(s.track({type:1,doc:A}),U=!0,(g||y)&&(f=!0)),U&&(b?(h=h.add(b),l=q?l.add(w):l.delete(w)):(h=h.delete(w),l=l.delete(w)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const w=this.query.limitType==="F"?h.last():h.first();h=h.delete(w.key),l=l.delete(w.key),s.track({type:1,doc:w})}return{tu:h,iu:s,Cs:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((w,E)=>(function(b,H){const q=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e(20277,{Rt:U})}};return q(b)-q(H)})(w.type,E.type)||this.eu(w.doc,E.doc))),this.ou(s),o=o??!1;const f=t&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,y=g!==this.Za;return this.Za=g,h.length!==0||y?{snapshot:new Oo(this.query,e.tu,l,h,e.mutatedKeys,g===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new n_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Le(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new Mw(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new Ow(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=Le();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Oo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const np="SyncEngine";class FC{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class UC{constructor(e){this.key=e,this.hu=!1}}class jC{constructor(e,t,s,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new Rs((f=>Qv(f)),Lc),this.Iu=new Map,this.Eu=new Set,this.du=new st(ye.comparator),this.Au=new Map,this.Ru=new qf,this.Vu={},this.mu=new Map,this.fu=Vo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function zC(r,e,t=!0){const s=zw(r);let o;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await Lw(s,e,t,!0),o}async function BC(r,e){const t=zw(r);await Lw(t,e,!0,!1)}async function Lw(r,e,t,s){const o=await lC(r.localStore,lr(e)),l=o.targetId,h=r.sharedClientState.addLocalQueryTarget(l,t);let f;return s&&(f=await $C(r,e,l,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&Aw(r.remoteStore,o),f}async function $C(r,e,t,s,o){r.pu=(E,A,b)=>(async function(q,U,re,oe){let j=U.view.ru(re);j.Cs&&(j=await Xy(q.localStore,U.query,!1).then((({documents:P})=>U.view.ru(P,j))));const ee=oe&&oe.targetChanges.get(U.targetId),ie=oe&&oe.targetMismatches.get(U.targetId)!=null,ne=U.view.applyChanges(j,q.isPrimaryClient,ee,ie);return o_(q,U.targetId,ne.au),ne.snapshot})(r,E,A,b);const l=await Xy(r.localStore,e,!0),h=new bC(e,l.Qs),f=h.ru(l.documents),g=wl.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",o),y=h.applyChanges(f,r.isPrimaryClient,g);o_(r,t,y.au);const w=new FC(e,t,h);return r.Tu.set(e,w),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),y.snapshot}async function qC(r,e,t){const s=Ae(r),o=s.Tu.get(e),l=s.Iu.get(o.targetId);if(l.length>1)return s.Iu.set(o.targetId,l.filter((h=>!Lc(h,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await lf(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&Qf(s.remoteStore,o.targetId),hf(s,o.targetId)})).catch(zo)):(hf(s,o.targetId),await lf(s.localStore,o.targetId,!0))}async function WC(r,e){const t=Ae(r),s=t.Tu.get(e),o=t.Iu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Qf(t.remoteStore,s.targetId))}async function HC(r,e,t){const s=ZC(r);try{const o=await(function(h,f){const g=Ae(h),y=tt.now(),w=f.reduce(((b,H)=>b.add(H.key)),Le());let E,A;return g.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let H=Fr(),q=Le();return g.Ns.getEntries(b,w).next((U=>{H=U,H.forEach(((re,oe)=>{oe.isValidDocument()||(q=q.add(re))}))})).next((()=>g.localDocuments.getOverlayedDocuments(b,H))).next((U=>{E=U;const re=[];for(const oe of f){const j=uR(oe,E.get(oe.key).overlayedDocument);j!=null&&re.push(new ji(oe.key,j,zv(j.value.mapValue),bt.exists(!0)))}return g.mutationQueue.addMutationBatch(b,y,re,f)})).next((U=>{A=U;const re=U.applyToLocalDocumentSet(E,q);return g.documentOverlayCache.saveOverlays(b,U.batchId,re)}))})).then((()=>({batchId:A.batchId,changes:Jv(E)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(h,f,g){let y=h.Vu[h.currentUser.toKey()];y||(y=new st(Me)),y=y.insert(f,g),h.Vu[h.currentUser.toKey()]=y})(s,o.batchId,t),await Tl(s,o.changes),await qc(s.remoteStore)}catch(o){const l=ep(o,"Failed to persist write");t.reject(l)}}async function bw(r,e){const t=Ae(r);try{const s=await sC(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const h=t.Au.get(l);h&&(ze(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?ze(h.hu,14607):o.removedDocuments.size>0&&(ze(h.hu,42227),h.hu=!1))})),await Tl(t,s,e)}catch(s){await zo(s)}}function s_(r,e,t){const s=Ae(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Tu.forEach(((l,h)=>{const f=h.view.va(e);f.snapshot&&o.push(f.snapshot)})),(function(h,f){const g=Ae(h);g.onlineState=f;let y=!1;g.queries.forEach(((w,E)=>{for(const A of E.Sa)A.va(f)&&(y=!0)})),y&&tp(g)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function GC(r,e,t){const s=Ae(r);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Au.get(e),l=o&&o.key;if(l){let h=new st(ye.comparator);h=h.insert(l,Nt.newNoDocument(l,Ee.min()));const f=Le().add(l),g=new zc(Ee.min(),new Map,new st(Me),h,f);await bw(s,g),s.du=s.du.remove(l),s.Au.delete(e),rp(s)}else await lf(s.localStore,e,!1).then((()=>hf(s,e,t))).catch(zo)}async function KC(r,e){const t=Ae(r),s=e.batch.batchId;try{const o=await iC(t.localStore,e);Uw(t,s,null),Fw(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Tl(t,o)}catch(o){await zo(o)}}async function QC(r,e,t){const s=Ae(r);try{const o=await(function(h,f){const g=Ae(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let w;return g.mutationQueue.lookupMutationBatch(y,f).next((E=>(ze(E!==null,37113),w=E.keys(),g.mutationQueue.removeMutationBatch(y,E)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,w,f))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,w))).next((()=>g.localDocuments.getDocuments(y,w)))}))})(s.localStore,e);Uw(s,e,t),Fw(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Tl(s,o)}catch(o){await zo(o)}}function Fw(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function Uw(r,e,t){const s=Ae(r);let o=s.Vu[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function hf(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),t&&r.Pu.yu(s,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((s=>{r.Ru.containsKey(s)||jw(r,s)}))}function jw(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(Qf(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),rp(r))}function o_(r,e,t){for(const s of t)s instanceof Ow?(r.Ru.addReference(s.key,e),XC(r,s)):s instanceof Mw?(ue(np,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||jw(r,s.key)):_e(19791,{wu:s})}function XC(r,e){const t=e.key,s=t.path.canonicalString();r.du.get(t)||r.Eu.has(s)||(ue(np,"New document in limbo: "+t),r.Eu.add(s),rp(r))}function rp(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new ye(Qe.fromString(e)),s=r.fu.next();r.Au.set(s,new UC(t)),r.du=r.du.insert(t,s),Aw(r.remoteStore,new Ii(lr(Uf(t.path)),s,"TargetPurposeLimboResolution",Oc.ce))}}async function Tl(r,e,t){const s=Ae(r),o=[],l=[],h=[];s.Tu.isEmpty()||(s.Tu.forEach(((f,g)=>{h.push(s.pu(g,e,t).then((y=>{if((y||t)&&s.isPrimaryClient){const w=y?!y.fromCache:t?.targetChanges.get(g.targetId)?.current;s.sharedClientState.updateQueryState(g.targetId,w?"current":"not-current")}if(y){o.push(y);const w=Hf.As(g.targetId,y);l.push(w)}})))})),await Promise.all(h),s.Pu.H_(o),await(async function(g,y){const w=Ae(g);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>G.forEach(y,(A=>G.forEach(A.Es,(b=>w.persistence.referenceDelegate.addReference(E,A.targetId,b))).next((()=>G.forEach(A.ds,(b=>w.persistence.referenceDelegate.removeReference(E,A.targetId,b)))))))))}catch(E){if(!Bo(E))throw E;ue(Gf,"Failed to update sequence numbers: "+E)}for(const E of y){const A=E.targetId;if(!E.fromCache){const b=w.Ms.get(A),H=b.snapshotVersion,q=b.withLastLimboFreeSnapshotVersion(H);w.Ms=w.Ms.insert(A,q)}}})(s.localStore,l))}async function YC(r,e){const t=Ae(r);if(!t.currentUser.isEqual(e)){ue(np,"User change. New user:",e.toKey());const s=await Tw(t.localStore,e);t.currentUser=e,(function(l,h){l.mu.forEach((f=>{f.forEach((g=>{g.reject(new se(W.CANCELLED,h))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Tl(t,s.Ls)}}function JC(r,e){const t=Ae(r),s=t.Au.get(e);if(s&&s.hu)return Le().add(s.key);{let o=Le();const l=t.Iu.get(e);if(!l)return o;for(const h of l){const f=t.Tu.get(h);o=o.unionWith(f.view.nu)}return o}}function zw(r){const e=Ae(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=bw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=JC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=GC.bind(null,e),e.Pu.H_=MC.bind(null,e.eventManager),e.Pu.yu=LC.bind(null,e.eventManager),e}function ZC(r){const e=Ae(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=KC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=QC.bind(null,e),e}class Ic{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Bc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return rC(this.persistence,new eC,e.initialUser,this.serializer)}Cu(e){return new Ew(Wf.mi,this.serializer)}Du(e){return new cC}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ic.provider={build:()=>new Ic};class eP extends Ic{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ze(this.persistence.referenceDelegate instanceof Ec,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new UR(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?nn.withCacheSize(this.cacheSizeBytes):nn.DEFAULT;return new Ew((s=>Ec.mi(s,t)),this.serializer)}}class df{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>s_(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=YC.bind(null,this.syncEngine),await DC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new OC})()}createDatastore(e){const t=Bc(e.databaseInfo.databaseId),s=(function(l){return new mC(l)})(e.databaseInfo);return(function(l,h,f,g){return new vC(l,h,f,g)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,l,h,f){return new EC(s,o,l,h,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>s_(this.syncEngine,t,0)),(function(){return Zy.v()?new Zy:new hC})())}createSyncEngine(e,t){return(function(o,l,h,f,g,y,w){const E=new jC(o,l,h,f,g,y);return w&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const s=Ae(t);ue(Ts,"RemoteStore shutting down."),s.Ea.add(5),await El(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}df.provider={build:()=>new df};class Bw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Lr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class tP{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new se(W.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(o,l){const h=Ae(o),f={documents:l.map((E=>wc(h.serializer,E)))},g=await h.Ho("BatchGetDocuments",h.serializer.databaseId,Qe.emptyPath(),f,l.length),y=new Map;g.forEach((E=>{const A=TR(h.serializer,E);y.set(A.key.toString(),A)}));const w=[];return l.forEach((E=>{const A=y.get(E.toString());ze(!!A,55234,{key:E}),w.push(A)})),w})(this.datastore,e);return t.forEach((s=>this.recordVersion(s))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new jc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,s)=>{const o=ye.fromPath(s);this.mutations.push(new aw(o,this.precondition(o)))})),await(async function(s,o){const l=Ae(s),h={writes:o.map((f=>gw(l.serializer,f)))};await l.Go("Commit",l.serializer.databaseId,Qe.emptyPath(),h)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw _e(50498,{Gu:e.constructor.name});t=Ee.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new se(W.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ee.min())?bt.exists(!1):bt.updateTime(t):bt.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ee.min()))throw new se(W.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return bt.updateTime(t)}return bt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class nP{constructor(e,t,s,o,l){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=o,this.deferred=l,this.zu=s.maxAttempts,this.M_=new Kf(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new tP(this.datastore),t=this.Hu(e);t&&t.then((s=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(s)})).catch((o=>{this.Yu(o)}))))})).catch((s=>{this.Yu(s)}))}))}Hu(e){try{const t=this.updateFunction(e);return!yl(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!lw(t)}return!1}}const bi="FirestoreClient";class rP{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=Wt.UNAUTHENTICATED,this.clientId=Vf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async h=>{ue(bi,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(s,(h=>(ue(bi,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ar;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=ep(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Md(r,e){r.asyncQueue.verifyOperationInProgress(),ue(bi,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener((async o=>{s.isEqual(o)||(await Tw(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function a_(r,e){r.asyncQueue.verifyOperationInProgress();const t=await iP(r);ue(bi,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((s=>t_(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,o)=>t_(e.remoteStore,o))),r._onlineComponents=e}async function iP(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ue(bi,"Using user provided OfflineComponentProvider");try{await Md(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===W.FAILED_PRECONDITION||o.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;ko("Error using user provided cache. Falling back to memory cache: "+t),await Md(r,new Ic)}}else ue(bi,"Using default OfflineComponentProvider"),await Md(r,new eP(void 0));return r._offlineComponents}async function ip(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ue(bi,"Using user provided OnlineComponentProvider"),await a_(r,r._uninitializedComponentsProvider._online)):(ue(bi,"Using default OnlineComponentProvider"),await a_(r,new df))),r._onlineComponents}function sP(r){return ip(r).then((e=>e.syncEngine))}function oP(r){return ip(r).then((e=>e.datastore))}async function $w(r){const e=await ip(r),t=e.eventManager;return t.onListen=zC.bind(null,e.syncEngine),t.onUnlisten=qC.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=BC.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=WC.bind(null,e.syncEngine),t}function aP(r,e,t={}){const s=new ar;return r.asyncQueue.enqueueAndForget((async()=>(function(l,h,f,g,y){const w=new Bw({next:A=>{w.Nu(),h.enqueueAndForget((()=>Dw(l,E)));const b=A.docs.has(f);!b&&A.fromCache?y.reject(new se(W.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&A.fromCache&&g&&g.source==="server"?y.reject(new se(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(A)},error:A=>y.reject(A)}),E=new Vw(Uf(f.path),w,{includeMetadataChanges:!0,qa:!0});return xw(l,E)})(await $w(r),r.asyncQueue,e,t,s))),s.promise}function lP(r,e,t={}){const s=new ar;return r.asyncQueue.enqueueAndForget((async()=>(function(l,h,f,g,y){const w=new Bw({next:A=>{w.Nu(),h.enqueueAndForget((()=>Dw(l,E))),A.fromCache&&g.source==="server"?y.reject(new se(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(A)},error:A=>y.reject(A)}),E=new Vw(f,w,{includeMetadataChanges:!0,qa:!0});return xw(l,E)})(await $w(r),r.asyncQueue,e,t,s))),s.promise}function qw(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const l_=new Map;const Ww="firestore.googleapis.com",u_=!0;class c_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new se(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ww,this.ssl=u_}else this.host=e.host,this.ssl=e.ssl??u_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ww;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<bR)throw new se(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}TA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qw(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new se(W.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new se(W.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new se(W.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wc{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new c_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new se(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new c_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new dA;switch(s.type){case"firstParty":return new gA(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new se(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=l_.get(t);s&&(ue("ComponentProvider","Removing Datastore"),l_.delete(t),s.terminate())})(this),Promise.resolve()}}function uP(r,e,t,s={}){r=br(r,Wc);const o=bo(e),l=r._getSettings(),h={...l,emulatorOptions:r._getEmulatorOptions()},f=`${e}:${t}`;o&&(F_(`https://${f}`),U_("Firestore",!0)),l.host!==Ww&&l.host!==f&&ko("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:f,ssl:o,emulatorOptions:s};if(!_s(g,h)&&(r._setSettings(g),s.mockUserToken)){let y,w;if(typeof s.mockUserToken=="string")y=s.mockUserToken,w=Wt.MOCK_USER;else{y=F0(s.mockUserToken,r._app?.options.projectId);const E=s.mockUserToken.sub||s.mockUserToken.user_id;if(!E)throw new se(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new Wt(E)}r._authCredentials=new fA(new kv(y,w))}}class qo{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new qo(this.firestore,e,this._query)}}class ft{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ni(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ft(this.firestore,e,this._key)}toJSON(){return{type:ft._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(gl(t,ft._jsonSchema))return new ft(e,s||null,new ye(Qe.fromString(t.referencePath)))}}ft._jsonSchemaVersion="firestore/documentReference/1.0",ft._jsonSchema={type:wt("string",ft._jsonSchemaVersion),referencePath:wt("string")};class Ni extends qo{constructor(e,t,s){super(e,t,Uf(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ft(this.firestore,null,new ye(e))}withConverter(e){return new Ni(this.firestore,e,this._path)}}function jn(r,e,...t){if(r=St(r),Nv("collection","path",e),r instanceof Wc){const s=Qe.fromString(e,...t);return Iy(s),new Ni(r,null,s)}{if(!(r instanceof ft||r instanceof Ni))throw new se(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Qe.fromString(e,...t));return Iy(s),new Ni(r.firestore,null,s)}}function dt(r,e,...t){if(r=St(r),arguments.length===1&&(e=Vf.newId()),Nv("doc","path",e),r instanceof Wc){const s=Qe.fromString(e,...t);return Ty(s),new ft(r,null,new ye(s))}{if(!(r instanceof ft||r instanceof Ni))throw new se(W.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Qe.fromString(e,...t));return Ty(s),new ft(r.firestore,r instanceof Ni?r.converter:null,new ye(s))}}const h_="AsyncQueue";class d_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Kf(this,"async_queue_retry"),this._c=()=>{const s=Od();s&&ue(h_,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=Od();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Od();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ar;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Bo(e))throw e;ue(h_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Lr("INTERNAL UNHANDLED ERROR: ",f_(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Zf.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&_e(47125,{Pc:f_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function f_(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class Wo extends Wc{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new d_,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new d_(e),this._firestoreClient=void 0,await e}}}function cP(r,e){const t=typeof r=="object"?r:$_(),s=typeof r=="string"?r:pc,o=Ef(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=L0("firestore");l&&uP(o,...l)}return o}function Il(r){if(r._terminated)throw new se(W.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||hP(r),r._firestoreClient}function hP(r){const e=r._freezeSettings(),t=(function(o,l,h,f){return new VA(o,l,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,qw(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new rP(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(o){const l=o?._online.build();return{_offline:o?._offline.build(l),_online:l}})(r._componentsProvider))}class fn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fn(Ft.fromBase64String(e))}catch(t){throw new se(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new fn(Ft.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:fn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(gl(e,fn._jsonSchema))return fn.fromBase64String(e.bytes)}}fn._jsonSchemaVersion="firestore/bytes/1.0",fn._jsonSchema={type:wt("string",fn._jsonSchemaVersion),bytes:wt("string")};class Sl{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new se(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Hc{constructor(e){this._methodName=e}}class ur{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new se(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new se(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Me(this._lat,e._lat)||Me(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ur._jsonSchemaVersion}}static fromJSON(e){if(gl(e,ur._jsonSchema))return new ur(e.latitude,e.longitude)}}ur._jsonSchemaVersion="firestore/geoPoint/1.0",ur._jsonSchema={type:wt("string",ur._jsonSchemaVersion),latitude:wt("number"),longitude:wt("number")};class cr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:cr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(gl(e,cr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new cr(e.vectorValues);throw new se(W.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}cr._jsonSchemaVersion="firestore/vectorValue/1.0",cr._jsonSchema={type:wt("string",cr._jsonSchemaVersion),vectorValues:wt("object")};const dP=/^__.*__$/;class fP{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new ji(e,this.data,this.fieldMask,t,this.fieldTransforms):new vl(e,this.data,t,this.fieldTransforms)}}class Hw{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new ji(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Gw(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e(40011,{Ac:r})}}class sp{constructor(e,t,s,o,l,h){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new sp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Sc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Gw(this.Ac)&&dP.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class pP{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Bc(e)}Cc(e,t,s,o=!1){return new sp({Ac:e,methodName:t,Dc:s,path:Lt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Gc(r){const e=r._freezeSettings(),t=Bc(r._databaseId);return new pP(r._databaseId,!!e.ignoreUndefinedProperties,t)}function op(r,e,t,s,o,l={}){const h=r.Cc(l.merge||l.mergeFields?2:0,e,t,o);lp("Data must be an object, but it was:",h,s);const f=Xw(s,h);let g,y;if(l.merge)g=new pn(h.fieldMask),y=h.fieldTransforms;else if(l.mergeFields){const w=[];for(const E of l.mergeFields){const A=ff(e,E,t);if(!h.contains(A))throw new se(W.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);Jw(w,A)||w.push(A)}g=new pn(w),y=h.fieldTransforms.filter((E=>g.covers(E.field)))}else g=null,y=h.fieldTransforms;return new fP(new Qt(f),g,y)}class Kc extends Hc{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Kc}}class ap extends Hc{_toFieldTransform(e){return new sR(e.path,new al)}isEqual(e){return e instanceof ap}}function Kw(r,e,t,s){const o=r.Cc(1,e,t);lp("Data must be an object, but it was:",o,s);const l=[],h=Qt.empty();Ui(s,((g,y)=>{const w=up(e,g,t);y=St(y);const E=o.yc(w);if(y instanceof Kc)l.push(w);else{const A=Al(y,E);A!=null&&(l.push(w),h.set(w,A))}}));const f=new pn(l);return new Hw(h,f,o.fieldTransforms)}function Qw(r,e,t,s,o,l){const h=r.Cc(1,e,t),f=[ff(e,s,t)],g=[o];if(l.length%2!=0)throw new se(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<l.length;A+=2)f.push(ff(e,l[A])),g.push(l[A+1]);const y=[],w=Qt.empty();for(let A=f.length-1;A>=0;--A)if(!Jw(y,f[A])){const b=f[A];let H=g[A];H=St(H);const q=h.yc(b);if(H instanceof Kc)y.push(b);else{const U=Al(H,q);U!=null&&(y.push(b),w.set(b,U))}}const E=new pn(y);return new Hw(w,E,h.fieldTransforms)}function mP(r,e,t,s=!1){return Al(t,r.Cc(s?4:3,e))}function Al(r,e){if(Yw(r=St(r)))return lp("Unsupported field value:",e,r),Xw(r,e);if(r instanceof Hc)return(function(s,o){if(!Gw(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const l=[];let h=0;for(const f of s){let g=Al(f,o.wc(h));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),h++}return{arrayValue:{values:l}}})(r,e)}return(function(s,o){if((s=St(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return nR(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=tt.fromDate(s);return{timestampValue:vc(o.serializer,l)}}if(s instanceof tt){const l=new tt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:vc(o.serializer,l)}}if(s instanceof ur)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof fn)return{bytesValue:dw(o.serializer,s._byteString)};if(s instanceof ft){const l=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(l))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:$f(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof cr)return(function(h,f){return{mapValue:{fields:{[Uv]:{stringValue:jv},[mc]:{arrayValue:{values:h.toArray().map((y=>{if(typeof y!="number")throw f.Sc("VectorValues must only contain numeric values.");return jf(f.serializer,y)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${Vc(s)}`)})(r,e)}function Xw(r,e){const t={};return Vv(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ui(r,((s,o)=>{const l=Al(o,e.mc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function Yw(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof tt||r instanceof ur||r instanceof fn||r instanceof ft||r instanceof Hc||r instanceof cr)}function lp(r,e,t){if(!Yw(t)||!xv(t)){const s=Vc(t);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function ff(r,e,t){if((e=St(e))instanceof Sl)return e._internalPath;if(typeof e=="string")return up(r,e);throw Sc("Field path arguments must be of type string or ",r,!1,void 0,t)}const gP=new RegExp("[~\\*/\\[\\]]");function up(r,e,t){if(e.search(gP)>=0)throw Sc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Sl(...e.split("."))._internalPath}catch{throw Sc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Sc(r,e,t,s,o){const l=s&&!s.isEmpty(),h=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(l||h)&&(g+=" (found",l&&(g+=` in field ${s}`),h&&(g+=` in document ${o}`),g+=")"),new se(W.INVALID_ARGUMENT,f+r+g)}function Jw(r,e){return r.some((t=>t.isEqual(e)))}class Ac{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new ft(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new yP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(cp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class yP extends Ac{data(){return super.data()}}function cp(r,e){return typeof e=="string"?up(r,e):e instanceof Sl?e._internalPath:e._delegate._internalPath}function _P(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new se(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hp{}class vP extends hp{}function dp(r,e,...t){let s=[];e instanceof hp&&s.push(e),s=s.concat(t),(function(l){const h=l.filter((g=>g instanceof pp)).length,f=l.filter((g=>g instanceof Qc)).length;if(h>1||h>0&&f>0)throw new se(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)r=o._apply(r);return r}class Qc extends vP{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Qc(e,t,s)}_apply(e){const t=this._parse(e);return Zw(e._query,t),new qo(e.firestore,e.converter,nf(e._query,t))}_parse(e){const t=Gc(e.firestore);return(function(l,h,f,g,y,w,E){let A;if(y.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new se(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){m_(E,w);const H=[];for(const q of E)H.push(p_(g,l,q));A={arrayValue:{values:H}}}else A=p_(g,l,E)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||m_(E,w),A=mP(f,h,E,w==="in"||w==="not-in");return vt.create(y,w,A)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function fp(r,e,t){const s=e,o=cp("where",r);return Qc._create(o,s,t)}class pp extends hp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new pp(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:Un.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let h=o;const f=l.getFlattenedFilters();for(const g of f)Zw(h,g),h=nf(h,g)})(e._query,t),new qo(e.firestore,e.converter,nf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function p_(r,e,t){if(typeof(t=St(t))=="string"){if(t==="")throw new se(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Kv(e)&&t.indexOf("/")!==-1)throw new se(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Qe.fromString(t));if(!ye.isDocumentKey(s))throw new se(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return xy(r,new ye(s))}if(t instanceof ft)return xy(r,t._key);throw new se(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Vc(t)}.`)}function m_(r,e){if(!Array.isArray(r)||r.length===0)throw new se(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Zw(r,e){const t=(function(o,l){for(const h of o)for(const f of h.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new se(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new se(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class eE{convertValue(e,t="none"){switch(Mi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Oi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw _e(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Ui(e,((o,l)=>{s[o]=this.convertValue(l,t)})),s}convertVectorValue(e){const t=e.fields?.[mc].arrayValue?.values?.map((s=>ht(s.doubleValue)));return new cr(t)}convertGeoPoint(e){return new ur(ht(e.latitude),ht(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Mc(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(il(e));default:return null}}convertTimestamp(e){const t=Vi(e);return new tt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Qe.fromString(e);ze(vw(s),9688,{name:e});const o=new sl(s.get(1),s.get(3)),l=new ye(s.popFirst(5));return o.isEqual(t)||Lr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function mp(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}class wP extends eE{constructor(e){super(),this.firestore=e}convertBytes(e){return new fn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ft(this.firestore,null,t)}}class Eo{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xi extends Ac{constructor(e,t,s,o,l,h){super(e,t,s,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new rc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(cp("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new se(W.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=xi._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}xi._jsonSchemaVersion="firestore/documentSnapshot/1.0",xi._jsonSchema={type:wt("string",xi._jsonSchemaVersion),bundleSource:wt("string","DocumentSnapshot"),bundleName:wt("string"),bundle:wt("string")};class rc extends xi{data(e={}){return super.data(e)}}class Ro{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Eo(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new rc(this._firestore,this._userDataWriter,s.key,s,new Eo(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new se(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((f=>{const g=new rc(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Eo(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const g=new rc(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Eo(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,w=-1;return f.type!==0&&(y=h.indexOf(f.doc.key),h=h.delete(f.doc.key)),f.type!==1&&(h=h.add(f.doc),w=h.indexOf(f.doc.key)),{type:EP(f.type),doc:g,oldIndex:y,newIndex:w}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new se(W.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ro._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Vf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function EP(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e(61501,{type:r})}}function Is(r){r=br(r,ft);const e=br(r.firestore,Wo);return aP(Il(e),r._key).then((t=>TP(e,r,t)))}Ro._jsonSchemaVersion="firestore/querySnapshot/1.0",Ro._jsonSchema={type:wt("string",Ro._jsonSchemaVersion),bundleSource:wt("string","QuerySnapshot"),bundleName:wt("string"),bundle:wt("string")};class gp extends eE{constructor(e){super(),this.firestore=e}convertBytes(e){return new fn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ft(this.firestore,null,t)}}function Ss(r){r=br(r,qo);const e=br(r.firestore,Wo),t=Il(e),s=new gp(e);return _P(r._query),lP(t,r._query).then((o=>new Ro(e,s,r,o)))}function Ho(r,e,t){r=br(r,ft);const s=br(r.firestore,Wo),o=mp(r.converter,e,t);return tE(s,[op(Gc(s),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,bt.none())])}function tE(r,e){return(function(s,o){const l=new ar;return s.asyncQueue.enqueueAndForget((async()=>HC(await sP(s),o,l))),l.promise})(Il(r),e)}function TP(r,e,t){const s=t.docs.get(e._key),o=new gp(r);return new xi(r,o,e._key,s,new Eo(t.hasPendingWrites,t.fromCache),e.converter)}const IP={maxAttempts:5};class SP{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Gc(e)}set(e,t,s){this._verifyNotCommitted();const o=Si(e,this._firestore),l=mp(o.converter,t,s),h=op(this._dataReader,"WriteBatch.set",o._key,l,o.converter!==null,s);return this._mutations.push(h.toMutation(o._key,bt.none())),this}update(e,t,s,...o){this._verifyNotCommitted();const l=Si(e,this._firestore);let h;return h=typeof(t=St(t))=="string"||t instanceof Sl?Qw(this._dataReader,"WriteBatch.update",l._key,t,s,o):Kw(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(h.toMutation(l._key,bt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Si(e,this._firestore);return this._mutations=this._mutations.concat(new jc(t._key,bt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new se(W.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Si(r,e){if((r=St(r)).firestore!==e)throw new se(W.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}class AP{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Gc(e)}get(e){const t=Si(e,this._firestore),s=new wP(this._firestore);return this._transaction.lookup([t._key]).then((o=>{if(!o||o.length!==1)return _e(24041);const l=o[0];if(l.isFoundDocument())return new Ac(this._firestore,s,l.key,l,t.converter);if(l.isNoDocument())return new Ac(this._firestore,s,t._key,null,t.converter);throw _e(18433,{doc:l})}))}set(e,t,s){const o=Si(e,this._firestore),l=mp(o.converter,t,s),h=op(this._dataReader,"Transaction.set",o._key,l,o.converter!==null,s);return this._transaction.set(o._key,h),this}update(e,t,s,...o){const l=Si(e,this._firestore);let h;return h=typeof(t=St(t))=="string"||t instanceof Sl?Qw(this._dataReader,"Transaction.update",l._key,t,s,o):Kw(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,h),this}delete(e){const t=Si(e,this._firestore);return this._transaction.delete(t._key),this}}class RP extends AP{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Si(e,this._firestore),s=new gp(this._firestore);return super.get(e).then((o=>new xi(this._firestore,s,t._key,o._document,new Eo(!1,!1),t.converter)))}}function CP(r,e,t){r=br(r,Wo);const s={...IP,...t};return(function(l){if(l.maxAttempts<1)throw new se(W.INVALID_ARGUMENT,"Max attempts must be at least 1")})(s),(function(l,h,f){const g=new ar;return l.asyncQueue.enqueueAndForget((async()=>{const y=await oP(l);new nP(l.asyncQueue,y,f,h,g).ju()})),g.promise})(Il(r),(o=>e(new RP(r,o))),s)}function Mn(){return new ap("serverTimestamp")}function nE(r){return Il(r=br(r,Wo)),new SP(r,(e=>tE(r,e)))}(function(e,t=!0){(function(o){jo=o})(Fo),Co(new vs("firestore",((s,{instanceIdentifier:o,options:l})=>{const h=s.getProvider("app").getImmediate(),f=new Wo(new pA(s.getProvider("auth-internal")),new yA(h,s.getProvider("app-check-internal")),(function(y,w){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new se(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sl(y.options.projectId,w)})(h,o),h);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),Pi(_y,vy,e),Pi(_y,vy,"esm2020")})();var PP="firebase",kP="12.7.0";Pi(PP,kP,"app");const NP={apiKey:"AIzaSyA-TURVnsMyyBOWreei2jGLcuXmOzyr_DQ",authDomain:"gamificationcollege.firebaseapp.com",projectId:"gamificationcollege",storageBucket:"gamificationcollege.firebasestorage.app",messagingSenderId:"237003198772",appId:"1:237003198772:web:37fc8130a083377a115561"},rE=B_(NP),Ld=cA(rE),xP=new xr,He=cP(rE),iE=xe.createContext(null);function DP({children:r}){const[e,t]=xe.useState(null),[s,o]=xe.useState(null),[l,h]=xe.useState(!0);xe.useEffect(()=>{const y=JS(Ld,async w=>{if(t(w),o(null),!w){h(!1);return}const E=dt(He,"users",w.uid);(await Is(E)).exists()||await Ho(E,{displayName:w.displayName||"Utilisateur",role:"child",createdAt:Mn()});const b=await Is(E);o(b.data()?.role||"child"),h(!1)});return()=>y()},[]);const f=async()=>{await v1(Ld,xP)},g=async()=>{await ZS(Ld)};return x.jsx(iE.Provider,{value:{user:e,role:s,loading:l,signInGoogle:f,signOutUser:g},children:r})}function Ps(){const r=xe.useContext(iE);if(!r)throw new Error("useAuth doit tre utilis sous <AuthProvider>");return r}function VP(){const{user:r,role:e,signOutUser:t}=Ps();return x.jsx("div",{className:"card",style:{marginBottom:14},children:x.jsxs("div",{className:"row",style:{justifyContent:"space-between"},children:[x.jsxs("div",{children:[x.jsx("div",{style:{fontWeight:900,fontSize:"1.05rem"},children:"Malo  Rvisions"}),x.jsx("div",{className:"small",children:r?x.jsxs(x.Fragment,{children:["Connect : ",x.jsx("strong",{children:r.displayName})," ",x.jsx("span",{className:"badge",children:e})]}):"Non connect"})]}),x.jsxs("div",{className:"row",style:{gap:8},children:[x.jsx(Ba,{className:"btn secondary",to:"/",children:"Accueil"}),e==="parent"&&x.jsxs(x.Fragment,{children:[x.jsx(Ba,{className:"btn secondary",to:"/admin/import",children:"Import (parent)"}),x.jsx(Ba,{className:"btn secondary",to:"/admin/moderation",children:"Modration"}),x.jsx(Ba,{className:"btn secondary",to:"/admin/progression",children:"Progression"})]}),r&&x.jsx("button",{className:"btn secondary",onClick:t,children:"Dconnexion"})]})]})})}function g_({children:r}){const{user:e,loading:t}=Ps();return t?x.jsx("div",{className:"card",children:"Chargement"}):e?x.jsx(x.Fragment,{children:r}):x.jsx(Ud,{to:"/connexion",replace:!0})}function bd({children:r}){const{user:e,role:t,loading:s}=Ps();return s?x.jsx("div",{className:"card",children:"Chargement"}):e?t!=="parent"?x.jsx(Ud,{to:"/",replace:!0}):x.jsx(x.Fragment,{children:r}):x.jsx(Ud,{to:"/connexion",replace:!0})}function Mo(r){return(r||"").toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[]/g,"'").replace(/\s+/g," ").trim()}async function OP(){return(await Ss(jn(He,"subjects"))).docs.map(e=>({id:e.id,...e.data()}))}async function sE(r,e){const{uid:t,includeHidden:s=!1,includeOverrides:o=!1}=e||{},l=dp(jn(He,"themes"),fp("subjectId","==",r)),f=(await Ss(l)).docs.map(w=>({id:w.id,...w.data()}));let g=new Map;if(t){const w=await Ss(jn(He,"users",t,"visibilityThemes"));g=new Map(w.docs.map(E=>[E.id,!!E.data().visible]))}const y=f.filter(w=>{const E=g.get(w.id);return!(!s&&w.hidden||!s&&E===!1)});return o?y.map(w=>({...w,visibleOverride:g.get(w.id)})):y}async function oE(r,e){const{uid:t,includeHidden:s=!1,includeOverrides:o=!1}=e||{},l=dp(jn(He,"exercises"),fp("themeId","==",r)),f=(await Ss(l)).docs.map(w=>({id:w.id,...w.data()}));let g=new Map;if(t){const w=await Ss(jn(He,"users",t,"visibilityExercises"));g=new Map(w.docs.map(E=>[E.id,!!E.data().visible]))}const y=f.filter(w=>{const E=g.get(w.id);return!(!s&&w.hidden||!s&&E===!1)});return o?y.map(w=>({...w,visibleOverride:g.get(w.id)})):y}async function MP(r){const e=nE(He);for(const t of r.subjects){e.set(dt(He,"subjects",t.id),{title:t.title},{merge:!0});for(const s of t.themes){e.set(dt(He,"themes",s.id),{subjectId:t.id,title:s.title,grade:r.grade},{merge:!0});for(const o of s.exercises){const l=dt(He,"exercises",o.id),h={...o,themeId:s.id};h.tags=Array.isArray(h.tags)?h.tags.slice(0,3):[],h.type==="short_text"&&Array.isArray(h.expected)&&(h.expected=h.expected.map(f=>Mo(f))),h.type==="fill_blank"&&Array.isArray(h.expected)&&(h.expected=h.expected.map(f=>Mo(f))),e.set(l,h,{merge:!0})}}}await e.commit()}async function LP(r,e){await Ho(dt(He,"themes",r),{hidden:e},{merge:!0})}async function bP(r,e){await Ho(dt(He,"exercises",r),{hidden:e},{merge:!0})}async function FP(r,e,t){await Ho(dt(He,"users",r,"visibilityThemes",e),{visible:t},{merge:!0})}async function UP(r,e,t){await Ho(dt(He,"users",r,"visibilityExercises",e),{visible:t},{merge:!0})}async function jP(r){const e=dt(He,"users",r,"stats","main"),t=await Is(e);return t.exists()?t.data():(await Ho(e,{xp:0,coins:0,streakDays:0,lastDoneDate:null,badges:[],updatedAt:Mn()}),(await Is(e)).data())}function y_(r){return r.toISOString().slice(0,10)}function zP(r,e){return r===1?e?3:-1:r===2?e?5:-2:e?7:-3}function BP(r){return Math.max(0,Math.min(100,r))}function $P(r){return r>=80?"mastered":r>=60?"nearly":r>=30?"developing":"weak"}async function qP(r){const{uid:e,items:t,existingAttemptId:s}=r,o=new Date,l=y_(o),h=t.length,f=t.filter(b=>b.correct).length;if(h===0)return{xpGain:0,coinsGain:0,streakDays:0,badges:[],score:0,outOf:0};const g=new Map;t.forEach(b=>{const H=Array.isArray(b.tags)?b.tags.slice(0,3):[],q=zP(b.difficulty,b.correct);H.forEach(U=>{const re=g.get(U)||{delta:0,correct:0,wrong:0};g.set(U,{delta:re.delta+q,correct:re.correct+(b.correct?1:0),wrong:re.wrong+(b.correct?0:1)})})});const y=f*10,w=Math.max(1,Math.min(3,Math.round(f/Math.max(1,h)*3)));let E=null;const A=s?dt(He,"users",e,"attempts",s):dt(jn(He,"users",e,"attempts"));return t.map(()=>dt(jn(A,"items"))),await CP(He,async b=>{const H=dt(He,"users",e,"stats","main"),q=dt(He,"users",e,"progressSummary","main"),U=Array.from(g.keys()).map(N=>dt(He,"users",e,"tagProgress",N)),[re,oe,j]=await Promise.all([b.get(H),b.get(q),Promise.all(U.map(N=>b.get(N)))]),ee=re.exists()?re.data():{xp:0,coins:0,streakDays:0,lastDoneDate:null,badges:[]};let ie=ee.streakDays||0;const ne=ee.lastDoneDate;if(ne!==l){const N=y_(new Date(o.getTime()-864e5));ie=ne===N?ie+1:1}const P=new Set(Array.isArray(ee.badges)?ee.badges:[]);ie>=3&&P.add("3 jours daffile"),ie>=7&&P.add("7 jours daffile"),f===h&&h>=10&&P.add("Zro faute (10+)");const I=oe.exists()?oe.data():null,C={weak:0,developing:0,nearly:0,mastered:0};for(let N=0;N<U.length;N++){const O=U[N],R=j[N],fe=O.id,De=g.get(fe),Ue=R.exists()?R.data():null,Re=typeof Ue?.mastery=="number"?Ue.mastery:0,J=Ue?.bucket,ge=BP(Re+De.delta),ae=$P(ge);J&&I&&(C[J]-=1),C[ae]+=1,b.set(O,{mastery:ge,bucket:ae,correctAnswers:(Ue?.correctAnswers||0)+De.correct,wrongAnswers:(Ue?.wrongAnswers||0)+De.wrong,lastDelta:De.delta,updatedAt:Mn()},{merge:!0})}const k=I?.masteryBuckets||{weak:0,developing:0,nearly:0,mastered:0};b.set(H,{xp:(ee.xp||0)+y,coins:(ee.coins||0)+w,streakDays:ie,lastDoneDate:l,badges:Array.from(P),updatedAt:Mn()},{merge:!0}),b.set(q,{totalAnswers:(I?.totalAnswers||0)+h,correctAnswers:(I?.correctAnswers||0)+f,totalAttempts:(I?.totalAttempts||0)+1,masteryBuckets:{weak:(k.weak||0)+C.weak,developing:(k.developing||0)+C.developing,nearly:(k.nearly||0)+C.nearly,mastered:(k.mastered||0)+C.mastered},lastAttemptId:A.id,lastDate:l,updatedAt:Mn()},{merge:!0}),E={xpGain:y,coinsGain:w,streakDays:ie,badges:Array.from(P)}}),{...E||{xpGain:0,coinsGain:0,streakDays:0,badges:[]},score:f,outOf:h}}const __=[{id:"fr",title:"Franais"},{id:"math",title:"Maths"},{id:"en",title:"Anglais"},{id:"es",title:"Espagnol"},{id:"hist",title:"Histoire"}];function WP(){const{user:r}=Ps(),[e,t]=xe.useState([]),[s,o]=xe.useState("fr"),[l,h]=xe.useState([]),[f,g]=xe.useState(null);return xe.useEffect(()=>{(async()=>{try{const y=await OP();t(y.length?y:__)}catch{t(__)}})()},[]),xe.useEffect(()=>{(async()=>{const y=await sE(s,{uid:r?.uid});h(y)})()},[s,r]),xe.useEffect(()=>{r&&(async()=>{const y=await jP(r.uid);g(y)})()},[r]),x.jsxs("div",{className:"container grid",children:[x.jsx("div",{className:"card",children:x.jsxs("div",{className:"row",style:{justifyContent:"space-between"},children:[x.jsxs("div",{children:[x.jsx("h2",{style:{margin:0},children:"Salut Malo "}),x.jsx("div",{className:"small",children:"Choisis une matire, puis un thme. Objectif : 10 questions par jour."})]}),f&&x.jsxs("div",{className:"kpi",children:[x.jsxs("div",{className:"pill",children:["XP: ",x.jsx("strong",{children:f.xp??0})]}),x.jsxs("div",{className:"pill",children:["Pices: ",x.jsx("strong",{children:f.coins??0})]}),x.jsxs("div",{className:"pill",children:["Srie: ",x.jsx("strong",{children:f.streakDays??0})," jours"]})]})]})}),x.jsxs("div",{className:"grid2",children:[x.jsxs("div",{className:"card",children:[x.jsx("h3",{style:{marginTop:0},children:"Matire"}),x.jsx("select",{className:"input",value:s,onChange:y=>o(y.target.value),children:e.map(y=>x.jsx("option",{value:y.id,children:y.title},y.id))}),x.jsx("div",{className:"small",style:{marginTop:8},children:"Priorits : Franais (grammaire & conjugaison) + Maths (fractions)."})]}),x.jsxs("div",{className:"card",children:[x.jsx("h3",{style:{marginTop:0},children:"Thmes"}),l.length===0?x.jsx("div",{className:"small",children:"Aucun thme pour linstant. (Parent : importe un pack JSON)"}):x.jsx("div",{className:"grid",children:l.map(y=>x.jsx(Ba,{className:"btn secondary",to:`/theme/${y.id}`,children:y.title},y.id))})]})]}),f?.badges?.length?x.jsxs("div",{className:"card",children:[x.jsx("h3",{style:{marginTop:0},children:"Badges"}),x.jsx("div",{className:"row",children:f.badges.map(y=>x.jsx("span",{className:"badge",children:y},y))})]}):null]})}function HP(){const{user:r,signInGoogle:e}=Ps(),t=Pc();return xe.useEffect(()=>{r&&t("/")},[r]),x.jsx("div",{className:"container",children:x.jsxs("div",{className:"card",children:[x.jsx("h2",{style:{marginTop:0},children:"Connexion"}),x.jsx("p",{className:"small",children:"Connexion Google recommande (simple sur tablette Android)."}),x.jsx("button",{className:"btn",onClick:e,children:"Se connecter avec Google"}),x.jsx("hr",{}),x.jsxs("p",{className:"small",children:["Astuce : aprs ta premire connexion (toi), va dans Firestore et mets ",x.jsxs("code",{children:["users/","{uid}",".role"]}),'  "parent".']})]})})}function GP(r,e){return r.type==="mcq"?e===r.answerIndex:r.type==="short_text"||r.type==="fill_blank"?r.expected.includes(Mo(e||"")):!1}function KP(r,e){return r===1?e?3:-1:r===2?e?5:-2:e?7:-3}function QP(r){return Math.max(0,Math.min(100,r))}function XP(r){return r>=80?"mastered":r>=60?"nearly":r>=30?"developing":"weak"}function aE(r){return r.toISOString().slice(0,10)}function YP(r,e){const t=new Date(r+"T00:00:00");return t.setDate(t.getDate()+e),aE(t)}function JP(r,e,t){const s=Math.max(0,Math.min(100,r));let o=1;return s>=81||e==="mastered"?o=10:s>=61||e==="nearly"?o=4:s>=31||e==="developing"?o=2:o=1,YP(t,o)}async function ZP(r){const{uid:e,subjectId:t,themeId:s,answers:o,exercises:l,durationSec:h}=r,g=aE(new Date),y=dt(jn(He,"users",e,"attempts")),w=jn(He,"users",e,"attemptItems"),E=dt(He,"users",e,"progressSummary","main"),A=l.map((fe,De)=>{const Ue=GP(fe,o[fe.id]);return{exerciseId:fe.id,subjectId:t,themeId:s,difficulty:fe.difficulty,tags:fe.tags?.slice(0,3)||[],correct:Ue,index:De}}),b=A.filter(fe=>fe.correct).length,H=A.length,q=new Map;A.forEach(fe=>{const De=KP(fe.difficulty,fe.correct);fe.tags.forEach(Ue=>{const Re=q.get(Ue)||{delta:0,correct:0,wrong:0,results:[]};Re.delta+=De,Re.correct+=fe.correct?1:0,Re.wrong+=fe.correct?0:1,Re.results.push(fe.correct),q.set(Ue,Re)})});const U=Array.from(q.keys()),re=await Promise.all(U.map(fe=>Is(dt(He,"users",e,"tagProgress",fe)))),oe=nE(He),j={subjectId:t,themeId:s,score:b,outOf:H,durationSec:h,itemsCount:A.length,date:g,createdAt:Mn()};oe.set(y,j),A.forEach(fe=>{const De=dt(w);oe.set(De,{...fe,createdAt:Mn(),answer:o[fe.exerciseId]??null})});const ee={weak:0,developing:0,nearly:0,mastered:0},ie={};U.forEach((fe,De)=>{const Ue=re[De],Re=Ue.exists()?Ue.data():null,J=q.get(fe),ae=[...Array.isArray(Re?.last7Results)?Re.last7Results:[],...J.results].slice(-7),M={correct:ae.filter(gn=>gn).length,wrong:ae.filter(gn=>!gn).length};let K=Re?.streakCorrect||0,Se=Re?.streakWrong||0;J.results.forEach(gn=>{gn?(K+=1,Se=0):(Se+=1,K=0)});const Ce=typeof Re?.mastery=="number"?Re.mastery:0,ke=QP(Ce+J.delta),Ne=XP(ke),Be=Re?.bucket;Be&&(ee[Be]-=1),ee[Ne]+=1;const be=JP(ke,Ne,g),Ge=dt(He,"users",e,"tagProgress",fe),At={tagId:fe,mastery:ke,bucket:Ne,attempts:(Re?.attempts||0)+J.results.length,correctAnswers:(Re?.correctAnswers||0)+J.correct,wrongAnswers:(Re?.wrongAnswers||0)+J.wrong,last7Results:ae,last7:M,lastSeenAt:Mn(),lastCorrectAt:J.correct>0?Mn():Re?.lastCorrectAt||null,streakCorrect:K,streakWrong:Se,lastDelta:J.delta,nextDueDate:be,updatedAt:Mn()};ie[fe]=At,oe.set(Ge,At,{merge:!0})});const ne=await Is(E),P=ne.exists()?ne.data():null,I=P?.masteryBuckets||{weak:0,developing:0,nearly:0,mastered:0},C={weak:(I.weak||0)+ee.weak,developing:(I.developing||0)+ee.developing,nearly:(I.nearly||0)+ee.nearly,mastered:(I.mastered||0)+ee.mastered},k=Object.values(ie).sort((fe,De)=>fe.mastery-De.mastery).map(fe=>fe.tagId),N=Array.isArray(P?.topWeakTags)?P.topWeakTags:[],O=Array.from(new Set([...k,...N])).slice(0,3),R={totalAnswers:(P?.totalAnswers||0)+H,correctAnswers:(P?.correctAnswers||0)+b,totalAttempts:(P?.totalAttempts||0)+1,masteryBuckets:C,lastAttemptId:y.id,lastDate:g,updatedAt:Mn(),topWeakTags:O};return oe.set(E,R,{merge:!0}),await oe.commit(),{attemptId:y.id,score:b,outOf:H,summary:R,tagsUpdated:ie}}function v_(r,e){return r.type==="mcq"?e===r.answerIndex:r.type==="short_text"||r.type==="fill_blank"?r.expected.includes(Mo(e||"")):!1}function ek(){const{themeId:r}=t0(),e=Pc(),{user:t}=Ps(),[s,o]=xe.useState(null),[l,h]=xe.useState([]),[f,g]=xe.useState({}),[y]=xe.useState(()=>Date.now()),[w,E]=xe.useState(null),[A,b]=xe.useState([]),[H,q]=xe.useState([]),[U,re]=xe.useState(!1);xe.useEffect(()=>{(async()=>{if(!r)return;const j=await Is(dt(He,"themes",r));o(j.exists()?{id:r,...j.data()}:null);const ie=[...await oE(r,{uid:t?.uid})].sort(()=>Math.random()-.5);h(ie.slice(0,10)),g({}),E(null)})()},[r]);const oe=async()=>{if(!t||!r||!s)return;const j=Math.max(1,Math.round((Date.now()-y)/1e3)),ee=l.map(k=>({exerciseId:k.id,difficulty:k.difficulty,tags:k.tags||[],correct:v_(k,f[k.id])})),ie=await ZP({uid:t.uid,subjectId:s.subjectId,themeId:r,answers:f,exercises:l,durationSec:j}),ne=await qP({uid:t.uid,subjectId:s.subjectId,items:ee,existingAttemptId:ie.attemptId}),P=new Set(l.flatMap(k=>k.tags||[])),I=Object.values(ie.tagsUpdated||{}).filter(k=>k&&P.has(k.tagId||"")).sort((k,N)=>(k.mastery??0)-(N.mastery??0)).slice(0,3).map(k=>k.tagId);b(I),E({score:ne.score,outOf:ne.outOf,durationSec:j,...ne});const C=l.map((k,N)=>{const O=f[k.id],R=v_(k,O);let fe="",De="";if(k.type==="mcq"){const Ue=k;fe=Ue.choices[Ue.answerIndex]||"",De=typeof O=="number"&&Ue.choices[O]||""}else(k.type==="short_text"||k.type==="fill_blank")&&(fe=k.expected[0]||"",De=O||"");return{id:k.id,prompt:k.prompt,correct:R,expected:fe||"",userAnswer:(De??"").toString()||"",idx:N+1}});q(C),re(!0)};return r?U&&H.length?x.jsxs("div",{className:"container grid",children:[x.jsxs("div",{className:"card",children:[x.jsxs("h2",{style:{margin:0},children:["Corrections  ",s?.title]}),w&&x.jsxs("div",{className:"small",children:["Score ",x.jsxs("strong",{children:[w.score,"/",w.outOf]}),"  ",w.durationSec,"s  +",w.xpGain," XP  +",w.coinsGain," pices"]})]}),x.jsxs("div",{className:"card",children:[x.jsx("div",{className:"grid",children:H.map(j=>x.jsxs("div",{className:"pill",style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:6,background:j.correct?"rgba(46, 204, 113, 0.12)":"rgba(255, 90, 111, 0.12)",border:j.correct?"1px solid rgba(46, 204, 113, 0.4)":"1px solid rgba(255, 90, 111, 0.4)"},children:[x.jsxs("div",{className:"small",children:["Question ",j.idx,"  ",j.correct?x.jsx("span",{className:"badge",style:{borderColor:"rgba(46,204,113,.6)",color:"#7fffb2"},children:" Bonne rponse"}):x.jsx("span",{className:"badge",style:{borderColor:"rgba(255,90,111,.6)",color:"#ff9fb0"},children:" Mauvaise rponse"})]}),x.jsx("div",{style:{fontWeight:700},children:j.prompt}),x.jsxs("div",{className:"small",children:["Ta rponse : ",x.jsx("strong",{children:j.userAnswer})]}),!j.correct&&x.jsxs("div",{className:"small",children:["Correction : ",x.jsx("strong",{children:j.expected})]})]},j.id))}),x.jsxs("div",{className:"row",style:{marginTop:16},children:[x.jsx("button",{className:"btn",onClick:()=>e("/"),children:"Retour  laccueil"}),x.jsx("button",{className:"btn secondary",onClick:()=>{re(!1),q([]),E(null),g({})},children:"Refaire une session"})]})]})]}):x.jsxs("div",{className:"container grid",children:[x.jsxs("div",{className:"card",children:[x.jsx("h2",{style:{margin:0},children:s?.title||"Session"}),x.jsx("div",{className:"small",children:"Fais de ton mieux. Objectif : rgularit "})]}),l.map((j,ee)=>x.jsxs("div",{className:"card",children:[x.jsxs("div",{className:"small",children:["Question ",ee+1," / ",l.length," ",x.jsxs("span",{className:"badge",children:["Difficult ",j.difficulty]})]}),x.jsx("div",{style:{fontWeight:800,marginTop:6},children:j.prompt}),j.type==="mcq"&&x.jsx("div",{className:"grid",style:{marginTop:10},children:j.choices.map((ie,ne)=>x.jsx("button",{type:"button",className:"btn "+(f[j.id]===ne?"":"secondary"),onClick:()=>g(P=>({...P,[j.id]:ne})),style:{textAlign:"left",opacity:f[j.id]===ne?1:.85},"aria-pressed":f[j.id]===ne,children:ie},ne))}),j.type==="short_text"&&x.jsx("div",{style:{marginTop:10},children:x.jsx("input",{className:"input",placeholder:"Ta rponse",value:f[j.id]??"",onChange:ie=>g(ne=>({...ne,[j.id]:ie.target.value}))})}),j.type==="fill_blank"&&x.jsxs("div",{style:{marginTop:10},children:[x.jsx("div",{className:"small",children:j.text}),x.jsx("input",{className:"input",placeholder:"Le mot manquant",value:f[j.id]??"",onChange:ie=>g(ne=>({...ne,[j.id]:ie.target.value}))})]})]},j.id)),x.jsxs("div",{className:"card",children:[x.jsxs("div",{className:"row",children:[x.jsx("button",{className:"btn",onClick:oe,children:"Corriger et enregistrer"}),w&&x.jsxs("div",{className:"small",children:["Score ",x.jsxs("strong",{children:[w.score,"/",w.outOf]}),"  ",w.durationSec,"s  +",x.jsx("strong",{children:w.xpGain})," XP  +",x.jsx("strong",{children:w.coinsGain})," pices  Srie ",x.jsx("strong",{children:w.streakDays})]})]}),w?.badges?.length?x.jsx("div",{className:"row",style:{marginTop:10},children:w.badges.map(j=>x.jsx("span",{className:"badge",children:j},j))}):null,A.length?x.jsxs("div",{className:"small",style:{marginTop:10},children:["Tags  renforcer (thme) : ",A.map(j=>x.jsx("span",{className:"badge",children:j},j))]}):null]}),H.length?x.jsxs("div",{className:"card",children:[x.jsx("h3",{style:{marginTop:0},children:"Corrections"}),x.jsx("div",{className:"grid",children:H.map(j=>x.jsxs("div",{className:"pill",style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:6},children:[x.jsxs("div",{className:"small",children:["Question ",j.idx,"  ",j.correct?x.jsx("span",{className:"badge",children:" Bonne rponse"}):x.jsx("span",{className:"badge",children:" Mauvaise rponse"})]}),x.jsx("div",{style:{fontWeight:700},children:j.prompt}),x.jsxs("div",{className:"small",children:["Ta rponse : ",x.jsx("strong",{children:j.userAnswer})]}),!j.correct&&x.jsxs("div",{className:"small",children:["Correction : ",x.jsx("strong",{children:j.expected})]})]},j.id))})]}):null]}):x.jsx("div",{className:"container",children:x.jsx("div",{className:"card",children:"Thme introuvable."})})}function tk(){const[r,e]=xe.useState(""),t=async s=>{if(!s)return;e("Lecture du fichier");const o=await s.text();let l;try{l=JSON.parse(o)}catch{e(" JSON invalide");return}if(!l?.subjects?.length){e(" Format inattendu (subjects manquant)");return}e("Import en cours"),await MP(l),e(" Import termin")};return x.jsx("div",{className:"container",children:x.jsxs("div",{className:"card",children:[x.jsx("h2",{style:{marginTop:0},children:"Import dexercices (Parent)"}),x.jsx("p",{className:"small",children:"Importe un pack JSON (gnr par moi) : matires  thmes  exercices."}),x.jsx("input",{className:"input",type:"file",accept:".json,application/json",onChange:s=>t(s.target.files?.[0]||null)}),r&&x.jsx("p",{className:"small",style:{marginTop:10},children:r}),x.jsx("hr",{}),x.jsx("p",{className:"small",children:"Conseil : commence par importer les packs Franais (grammaire + conjugaison) et Maths (fractions)."})]})})}const nk=[{id:"all",label:"Toutes"},{id:"fr",label:"Franais"},{id:"math",label:"Maths"},{id:"en",label:"Anglais"},{id:"es",label:"Espagnol"},{id:"hist",label:"Histoire"}];function rk(r){if(!r)return null;const e=r.split("_")[0];return e==="fr"||e==="math"||e==="en"||e==="es"||e==="hist"?e:null}function ik(r){return r.last7?r.last7:Array.isArray(r.last7Results)?{correct:r.last7Results.filter(Boolean).length,wrong:r.last7Results.filter(e=>!e).length}:{correct:0,wrong:0}}function sk(){const{user:r}=Ps(),[e,t]=xe.useState([]),[s,o]=xe.useState(!1),[l,h]=xe.useState("fr");xe.useEffect(()=>{r&&(o(!0),(async()=>{const y=(await Ss(jn(He,"users",r.uid,"tagProgress"))).docs.map(w=>({id:w.id,tagId:w.id,...w.data()}));t(y),o(!1)})())},[r]);const f=e.filter(g=>l==="all"?!0:rk(g.tagId)===l).sort((g,y)=>(g.mastery||0)-(y.mastery||0)).slice(0,20);return x.jsxs("div",{className:"container",children:[x.jsxs("div",{className:"card",children:[x.jsx("h2",{style:{marginTop:0},children:"Progression par tag"}),x.jsxs("div",{className:"row",style:{gap:8,alignItems:"center"},children:[x.jsx("label",{className:"small",children:"Matire"}),x.jsx("select",{className:"input",value:l,onChange:g=>h(g.target.value),children:nk.map(g=>x.jsx("option",{value:g.id,children:g.label},g.id))})]})]}),s?x.jsx("div",{className:"card",children:"Chargement"}):x.jsxs("div",{className:"card",children:[x.jsx("h3",{style:{marginTop:0},children:"Top 20 faibles"}),f.length===0?x.jsx("div",{className:"small",children:"Aucun tag pour le moment."}):x.jsx("div",{className:"grid",children:f.map(g=>{const y=ik(g);return x.jsx("div",{className:"pill",style:{justifyContent:"space-between",display:"flex",alignItems:"center"},children:x.jsxs("div",{children:[x.jsx("div",{style:{fontWeight:700},children:g.tagId}),x.jsxs("div",{className:"small",children:[g.mastery??0,"/100  ",g.bucket,"  ",y.correct,"/",y.correct+y.wrong," sur 7  Prochaine: ",g.nextDueDate||""]})]})},g.id)})})]})]})}const w_=[{id:"all",label:"Toutes"},{id:"fr",label:"Franais"},{id:"math",label:"Maths"},{id:"en",label:"Anglais"},{id:"es",label:"Espagnol"},{id:"hist",label:"Histoire"}];function ok(){const[r,e]=xe.useState([]),[t,s]=xe.useState(""),[o,l]=xe.useState("all"),[h,f]=xe.useState([]),[g,y]=xe.useState(!1),[w,E]=xe.useState({}),[A,b]=xe.useState(null);xe.useEffect(()=>{(async()=>{const ee=(await Ss(dp(jn(He,"users"),fp("role","==","child")))).docs.map(ie=>({id:ie.id,displayName:ie.data().displayName||"Enfant"}));e(ee),ee[0]&&s(ee[0].id)})()},[]),xe.useEffect(()=>{t&&(y(!0),(async()=>{const j=w_.filter(P=>P.id!=="all").map(P=>P.id),ee=o==="all"?j:[o],ie=[];for(const P of ee){const I=await sE(P,{uid:t,includeHidden:!0,includeOverrides:!0});ie.push(...I)}const ne=ie.sort((P,I)=>(P.title||"").localeCompare(I.title||""));f(ne),y(!1)})())},[t,o]);const H=async(j,ee)=>{t&&(await FP(t,j,ee),f(ie=>ie.map(ne=>ne.id===j?{...ne,visibleOverride:ee}:ne)))},q=async(j,ee)=>{await LP(j,ee),f(ie=>ie.map(ne=>ne.id===j?{...ne,hidden:ee}:ne))},U=async j=>{b(j);const ee=await oE(j,{uid:t,includeHidden:!0,includeOverrides:!0});E(ie=>({...ie,[j]:ee})),b(null)},re=async(j,ee)=>{await bP(j,ee),E(ie=>{const ne={};return Object.keys(ie).forEach(P=>{ne[P]=ie[P].map(I=>I.id===j?{...I,hidden:ee}:I)}),{...ie,...ne}})},oe=async(j,ee,ie)=>{t&&(await UP(t,j,ee),E(ne=>({...ne,[ie]:(ne[ie]||[]).map(P=>P.id===j?{...P,visibleOverride:ee}:P)})))};return x.jsxs("div",{className:"container",children:[x.jsxs("div",{className:"card",children:[x.jsx("h2",{style:{marginTop:0},children:"Modration contenus"}),x.jsxs("div",{className:"row",style:{gap:10},children:[x.jsxs("div",{className:"row",style:{gap:6},children:[x.jsx("span",{className:"small",children:"Enfant"}),x.jsx("select",{className:"input",value:t,onChange:j=>s(j.target.value),children:r.map(j=>x.jsx("option",{value:j.id,children:j.displayName},j.id))})]}),x.jsxs("div",{className:"row",style:{gap:6},children:[x.jsx("span",{className:"small",children:"Matire"}),x.jsx("select",{className:"input",value:o,onChange:j=>l(j.target.value),children:w_.map(j=>x.jsx("option",{value:j.id,children:j.label},j.id))})]})]})]}),g?x.jsx("div",{className:"card",children:"Chargement"}):x.jsxs("div",{className:"grid",children:[h.map(j=>{const ee=j.visibleOverride,ie=ee!==void 0?ee:!j.hidden;return x.jsxs("div",{className:"card",children:[x.jsxs("div",{className:"row",style:{justifyContent:"space-between"},children:[x.jsxs("div",{children:[x.jsx("div",{style:{fontWeight:800},children:j.title}),x.jsx("div",{className:"small",children:j.subjectId}),j.hidden&&x.jsx("div",{className:"badge",children:"Masqu globalement"}),ee===!1&&x.jsx("div",{className:"badge",children:"Masqu pour lenfant"})]}),x.jsxs("div",{className:"row",children:[x.jsx("button",{className:"btn secondary",onClick:()=>H(j.id,!ie),children:ie?"Masquer pour lenfant":"Afficher pour lenfant"}),x.jsx("button",{className:"btn secondary",onClick:()=>q(j.id,!j.hidden),children:j.hidden?"Ractiver globalement":"Masquer globalement"}),x.jsx("button",{className:"btn secondary",onClick:()=>U(j.id),children:"Voir questions"})]})]}),(w[j.id]||[]).length>0&&x.jsxs("div",{style:{marginTop:10},children:[x.jsx("div",{className:"small",style:{marginBottom:6},children:"Questions"}),x.jsx("div",{className:"grid",children:w[j.id].map(ne=>{const P=ne.visibleOverride,I=P!==void 0?P:!ne.hidden;return x.jsxs("div",{className:"pill",style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:6},children:[x.jsxs("div",{className:"small",children:[ne.prompt?.slice(0,80)||ne.id," ",ne.hidden&&x.jsx("span",{className:"badge",children:"Masqu global"})," ",P===!1&&x.jsx("span",{className:"badge",children:"Masqu enfant"})]}),x.jsxs("div",{className:"row",children:[x.jsx("button",{className:"btn secondary",onClick:()=>oe(ne.id,!I,j.id),children:I?"Masquer enfant":"Afficher enfant"}),x.jsx("button",{className:"btn secondary",onClick:()=>re(ne.id,!ne.hidden),children:ne.hidden?"Ractiver global":"Masquer global"})]})]},ne.id)})})]}),A===j.id&&x.jsx("div",{className:"small",style:{marginTop:6},children:"Chargement des questions"})]},j.id)}),h.length===0&&x.jsx("div",{className:"card small",children:"Aucun thme."})]})]})}function ak(){return x.jsx("div",{className:"container",children:x.jsx("div",{className:"card",children:"Page introuvable."})})}function lk(){return x.jsxs(S0,{children:[x.jsx("div",{className:"container",children:x.jsx(VP,{})}),x.jsxs(y0,{children:[x.jsx(_i,{path:"/connexion",element:x.jsx(HP,{})}),x.jsx(_i,{path:"/",element:x.jsx(g_,{children:x.jsx(WP,{})})}),x.jsx(_i,{path:"/theme/:themeId",element:x.jsx(g_,{children:x.jsx(ek,{})})}),x.jsx(_i,{path:"/admin/import",element:x.jsx(bd,{children:x.jsx(tk,{})})}),x.jsx(_i,{path:"/admin/progression",element:x.jsx(bd,{children:x.jsx(sk,{})})}),x.jsx(_i,{path:"/admin/moderation",element:x.jsx(bd,{children:x.jsx(ok,{})})}),x.jsx(_i,{path:"*",element:x.jsx(ak,{})})]})]})}function uk(){"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("${import.meta.env.BASE_URL}sw.js").catch(()=>{})})}ST.createRoot(document.getElementById("root")).render(x.jsx(xe.StrictMode,{children:x.jsx(DP,{children:x.jsx(lk,{})})}));uk();
